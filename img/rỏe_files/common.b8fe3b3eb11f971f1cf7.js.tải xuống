(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["common"],{74037:function(e,t){"use strict";t.Z='<svg width="14" height="15" viewBox="0 0 12 8"><path d="m11.25.8.53.52-5.9 5.89L0 1.3.53.8l5.36 5.36L11.25.8Z"/></svg>'},91483:function(e,t){"use strict";t.Z='<svg width="14" height="14" viewBox="0 0 14 14" slot="icon"><path d="M8.5 4.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM0 3a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3Zm3-2a2 2 0 0 0-2 2v6c0 .37.1.72.28 1.02l3.3-3.31a2 2 0 0 1 2.83 0l3.31 3.3A2 2 0 0 0 11 9V3a2 2 0 0 0-2-2H3Zm3.7 6.41a1 1 0 0 0-1.4 0l-3.32 3.31A2 2 0 0 0 3 11h6a2 2 0 0 0 1.02-.28L6.7 7.42ZM5 14a3 3 0 0 1-2.24-1H9.5A3.5 3.5 0 0 0 13 9.5V2.76A3 3 0 0 1 14 5v4.5A4.5 4.5 0 0 1 9.5 14H5Z"/></svg>'},5535:function(e,t,n){"use strict";n.d(t,{Kh:function(){return r},tY:function(){return o}});var i=n(84982);const r={_05u:"0.5u",_075u:"0.75u",_1u:"1u",_125u:"1.25u",_175u:"1.75u"},o={"0.5u":{height:i.B5,width:1},"0.75u":{height:i.To,width:1},"1u":{height:i.Ew,width:1},"1.25u":{height:i.Pu,width:1},"1.75u":{height:i.yH,width:1},_2x_2y:{height:i.Ew,width:2},_1x_2y:{height:i.Ew,width:1}};i.Gl,i.AY,i.kI,i.kX,i.Aw,i.kI,i.kI},84982:function(e,t,n){"use strict";n.d(t,{$O:function(){return v},AY:function(){return d},Aw:function(){return u},B5:function(){return i},Ew:function(){return s},Gl:function(){return c},Lx:function(){return y},O8:function(){return g},Pu:function(){return o},To:function(){return r},j9:function(){return f},kI:function(){return p},kX:function(){return l},y$:function(){return m},yH:function(){return a},zg:function(){return h}});const i="158px",r="243px",o="413px",a="583px",s="328px",c="146px",d="225px",l="383px",u="541px",p="304px",h="70px",g="248px",m="400px",f="300px",v="10px",y="8"},64664:function(e,t,n){"use strict";n.d(t,{F:function(){return r},g:function(){return i}});const i="selectedNavItemClicked";class r{constructor(){this.supports3DContent=!1}attemptNavItemChange(e){return!!this.superNavChangeCallback&&(this.superNavChangeCallback(e),!0)}disconnectSuperNav(){this.superNavChangeCallback=void 0}getForceSelectedNavItemId(){return this.forceSelectedNavItemId}getSupports3DContent(){return this.supports3DContent}static getInstance(e){return r.instance||(r.instance=new r),e&&(r.instance.superNavChangeCallback=e),r.instance}registerForceSelectedNavItemId(e){this.forceSelectedNavItemId=e}registerSupports3DContent(e){this.supports3DContent=e}}},72584:function(e,t,n){"use strict";n.r(t),n.d(t,{BackgroundImageWC:function(){return Le},BackgroundImageWCStyles:function(){return Nt},BackgroundImageWCTemplate:function(){return Mt},EventName:function(){return s},ToolingInfo:function(){return Ut}});var i=n(33940),r=n(98304),o=n(13959);const a=o.K.Dialog.toString();var s;!function(e){e.Secondary="backgroundImageWCSecondary",e.Edit="backgroundImageWCEdit",e.Toggle="backgroundImageWCToggle",e.StatesSync="backgroundImageWCStatesSync",e.StatesSyncAsk="backgroundImageWCStatesSyncAsk"}(s||(s={}));var c=n(53899),d=n(91608),l=n(35385),u=n(83227),p=n(57846),h=n(53076),g=n(55027),m=n(55755),f=n(83216),v=n(56692),y=n(28970),S=n(26769),C=n(45506),b=n(1334),w=n(55607),T=n(17769),k=n(26007),P=n(987),A=n(92031),I=n(6660),E=n(83760),x=n(70260),M=n(6751),O=n(12574),L=n(65135),D=n(38156),R=n(3931),F=n(10619);const B=()=>{};var N=n(33379),U=n(82423),$=n(85663),_=n(4734);var H;!function(e){e.alert="Alert",e.edit="Edit",e.globe="Globe",e.lightbulb="Lightbulb",e.meetNow="MeetNow",e.news="News",e.search="Search"}(H||(H={}));class W{constructor(e,t,n,o,a){this.fallbackImageURL="",this.museumBarText="",this.likeClickButtonHandler=()=>{const{actTelemetry:e}=this.irisStateInfo||{};this.sendIrisActionTelemetry(e,I.M.Like)},this.dislikeClickButtonHandler=()=>{const{actTelemetry:e}=this.irisStateInfo||{};if(this.dislikeCountWasIncremented=O.Vv.addImageCreativeToDislikeList(),this.dislikeCountWasIncremented||this.newIrisSurfaceInfo)return this.sendIrisActionTelemetry(e,I.M.Dislike),this.getNewIrisContent()},this.hotSpotClickHandler=(e,t)=>{t&&t.preventDefault&&t.preventDefault();const{creativeId:n,placementId:i,actTelemetry:r,impTelemetry:o}=this.irisStateInfo||{},a={ctaType:e.cta_type,ctaMetaData:e.cta,delayInMs:void 0,irisTelemetryActionId:e.hs,irisTelemetryActionString:r},s=this.hotSpotCtaHandler(a,t);s&&s().then((e=>{if(e&&e.actionCompleted&&a.ctaType===E.W.executeAction&&a.ctaMetaData===A.uS.setDefaultBrowser){const e={actionUrl:r,impressionUrl:o};this.fireIrisBeacon(i,n,I.R.Action,e,I.M.Conversion),this.irisDataConnector.resetImageLastUpdateTime()}}))},this.hotSpotMouseEnterHandler=e=>{L.M0.sendActionEvent(null==e?void 0:e.currentTarget,D.Aw.Hover,D.wu.View)},this.hotSpotCtaHandler=(e,t)=>{if(e)if(e.ctaType&&e.ctaMetaData){if(t)return()=>(0,i.mG)(this,void 0,void 0,(function*(){const n=x._.formatTelemetryActionUrl(e.irisTelemetryActionString,I.M.Click+e.irisTelemetryActionId);M.c.sendActionUpdate(n),L.M0.sendActionEvent(t.currentTarget,D.Aw.Click,D.wu.Navigate);const i=this.getCtaCallback(e);return i?yield i():null}));B(Object.assign(Object.assign({},r.OeS),{message:"Event is not defined"}))}else B(Object.assign(Object.assign({},r.jSE),{message:"Either of call to action type or metadata is not defined",pb:Object.assign(Object.assign({},r.jSE.pb),{customMessage:`ctaType: ${e.ctaType||""} and ctaMetaData: ${e.ctaMetaData||""}`})}));else B(Object.assign(Object.assign({},r.drd),{message:"HotSpot call to action state not defined"}))},this.getCtaCallback=e=>{switch(e.ctaType){case E.W.offPageNavigation:return V(e.ctaType,e.ctaMetaData)?(0,A.$y)(e.ctaMetaData):void B(Object.assign(Object.assign({},r.MaG),{message:"Invalid CTA Offpage Nav Data",pb:Object.assign(Object.assign({},r.MaG.pb),{customMessage:`ctaType: ${e.ctaType||""} and ctaMetaData: ${e.ctaMetaData||""}`})}));case E.W.inPageNavigation:return(0,A.U$)(e.ctaMetaData,e.delayInMs);case E.W.executeAction:return(0,A.jo)(e.ctaMetaData)}},this.fireIrisBeacon=(e,t,n,i,r)=>{(0,U.oU)(h.z.IrisData).then((o=>{o&&o.sendActionUpdate(e,t,n,i,r)}))},this.sendIrisActionTelemetry=(e,t)=>{if(e){const n=x._.formatTelemetryActionUrl(e,t);M.c.sendActionUpdate(n)}},this.getNewIrisContent=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.getImageHotSpotsData(!0)})),(0,N.N)()&&(this.connector=e,this.fallbackImageURL=t,this.dislikeCountWasIncremented=!0,this.updatedImageCallback=n,this.notifyOnCallCompletion=o,this.irisFallbackTitle=a,this.newIrisSurfaceInfo=void 0,this.getImageHotSpotsData())}loadImageHotSpots(){return this.irisFetchPromise}updateImageMetadata(e,t,n){e&&t&&n&&(this.irisImageURL=e,this.museumCard=t,this.irisStateInfo=n,this.updatedImageCallback())}getImageHotSpotsData(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.irisFetchPromise=new Promise(((t,n)=>(0,i.mG)(this,void 0,void 0,(function*(){const i=!(0,$.isNullOrUndefined)(e)&&e,o={credits:null,irisButtons:{likeClicked:!1,dislikeClicked:!1},isDisplayed:!1,title:null,titleURL:null},a={};let s,c;if(this.irisDataConnector=yield(0,U.oU)(h.z.IrisData),!this.irisDataConnector)return F.i.trackAppErrorEvent(Object.assign(Object.assign({},r._c7),{message:"No Iris data connector for background image"})),void n();if(i){if(!O.Vv.addImageCreativeToDislikeList()&&!this.newIrisSurfaceInfo)return void t()}if(c=e?yield this.handleDislike():yield this.populateSurfaceInfo(),(0,$.isNullOrUndefined)(c)||(0,$.isNullOrUndefined)(c.creatives)||c.creatives.length<=0)return s=this.fallbackImageURL,o.title=this.museumBarText,a.disableMuseumCard=!0,F.i.trackAppErrorEvent(Object.assign(Object.assign({},r.sd_),{message:`No creative in surface info. Triggered by dislike: ${i}. Surface info: ${c}`})),this.updateImageMetadata(s,o,a),this.notifyOnCallCompletion&&R.f.irisImageUpdated.getActionSender(this.connector).send(),void n();const d=c.creatives[0],l={title:d.content.title||"",credits:d.content.copyright||"",titleURL:d.content.cta},u={titleLink:d.content.cta,ctaType:d.content.cta_type,creativeId:d.content.creativeId,placementId:c.placement,impTelemetry:d.telemetry?d.telemetry.impressionUrl:null,actTelemetry:d.telemetry?d.telemetry.actionUrl:null,hsList:j(d)};s=d.content.LANDSCAPE,Object.assign(o,l),Object.assign(a,u),(0,$.isNullOrUndefined)(a.impTelemetry)||(i?M.c.sendActionUpdate(a.impTelemetry):((0,_.F_)().then((()=>{this.irisDataConnector.fetchedNewImage()&&M.c.sendActionUpdate(a.impTelemetry)})),this.updateImageMetadata(s,o,a)),this.updateImageMetadata(s,o,a),this.notifyOnCallCompletion&&R.f.irisImageUpdated.getActionSender(this.connector).send()),t()})))),this.irisFetchPromise}))}populateSurfaceInfo(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!window.isSSREnabled)return yield this.irisDataConnector.getImagePayload();let e;const t=yield this.irisDataConnector.tryGetPreviousImagePayload();return t?(e=t,this.newIrisSurfaceInfo=yield this.irisDataConnector.getImagePayload()):e=yield this.irisDataConnector.getImagePayload(),e}))}handleDislike(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!window.isSSREnabled||!this.newIrisSurfaceInfo)return yield this.irisDataConnector.getImagePayload(!0);const e=this.newIrisSurfaceInfo;return this.newIrisSurfaceInfo=void 0,this.irisDataConnector.clearPreviousImagePayload(),e}))}getNewImageUrl(){const e=this.newIrisSurfaceInfo.creatives;if(!e||!e.length)return"";return(e[0]&&e[0].content).LANDSCAPE}}const j=e=>{if((0,$.isNullOrUndefined)(e)||(0,$.isNullOrUndefined)(e.content)||(0,$.isNullOrUndefined)(e.content.hs)||0===e.content.hs.length)return null;const t=[];return e.content.hs.forEach((e=>{t.push(e)})),t},G=e=>{let t="",n="";switch(e){case H.alert:t="-8 -8 40 40",n="M12,1.99622391 C16.0499218,1.99622391 19.3566662,5.19096617 19.4958079,9.24527692 L19.5,9.49622391 L19.5,13.5931945 L20.8800025,16.7492056 C20.949058,16.9071328 20.9847056,17.0776351 20.9847056,17.25 C20.9847056,17.9403559 20.4250615,18.5 19.7347056,18.5 L15,18.5014962 C15,20.1583504 13.6568542,21.5014962 12,21.5014962 C10.4023191,21.5014962 9.09633912,20.2525762 9.00509269,18.6777689 L8.99954674,18.4992239 L4.27486429,18.5 C4.10352557,18.5 3.93401618,18.4647755 3.7768624,18.3965139 C3.14366026,18.121475 2.85331154,17.3852002 3.1283504,16.7519981 L4.5,13.594148 L4.50000001,9.4961162 C4.50059668,5.34132493 7.85208744,1.99622391 12,1.99622391 Z M13.4995467,18.4992239 L10.5,18.5014962 C10.5,19.3299233 11.1715729,20.0014962 12,20.0014962 C12.7796961,20.0014962 13.4204487,19.4066081 13.4931334,18.6459562 L13.4995467,18.4992239 Z M12,3.49622391 C8.67983848,3.49622391 6.00047762,6.17047646 6,9.49622391 L6,13.905852 L4.65602014,17 L19.3525351,17 L18,13.9068055 L18.0001102,9.5090803 L17.9963601,9.28387824 C17.8853006,6.05040449 15.2415749,3.49622391 12,3.49622391 Z";break;case H.edit:t="-8 -8 40 40",n="M21.0303301,2.96966991 C22.4277928,4.36713263 22.4277928,6.63286737 21.0303301,8.03033009 L9.06200371,19.9986565 C8.78512854,20.2755316 8.44079112,20.4753584 8.06302761,20.5783848 L2.94733805,21.9735729 C2.38746387,22.1262658 1.87373417,21.6125361 2.02642713,21.0526619 L3.4216152,15.9369724 C3.52464161,15.5592089 3.72446837,15.2148715 4.00134354,14.9379963 L15.9696699,2.96966991 C17.3671326,1.5722072 19.6328674,1.5722072 21.0303301,2.96966991 Z M15.0001717,6.06057288 L5.06200371,15.9986565 C4.96971199,16.0909482 4.90310306,16.2057273 4.86876093,16.3316485 L3.81891446,20.1810855 L7.6683515,19.1312391 C7.79427267,19.0968969 7.90905181,19.030288 8.00134354,18.9379963 L17.9391717,8.99957288 L15.0001717,6.06057288 Z M17.0303301,4.03033009 L16.0601717,4.99957288 L18.9991717,7.93957288 L19.9696699,6.96966991 C20.7813462,6.15799363 20.7813462,4.84200637 19.9696699,4.03033009 C19.1579936,3.21865381 17.8420064,3.21865381 17.0303301,4.03033009 Z";break;case H.globe:t="-5 -5 26 26",n="M7.93868 0H8.06132C10.6629 0 12.8409 1.14472 14.5951 3.43415C15.5317 4.87619 16 6.3777 16 7.93868V8.06132C16 10.6629 14.8553 12.8409 12.5659 14.5951C11.1238 15.5317 9.6223 16 8.06132 16H7.93868C5.33705 16 3.15912 14.8553 1.40488 12.5659C0.468293 11.1312 0 9.62973 0 8.06132V7.93868C0 5.33705 1.14472 3.15912 3.43415 1.40488C4.86876 0.468293 6.37027 0 7.93868 0ZM4.89477 5.32962H11.1052C10.9268 4.46736 10.715 3.72404 10.4697 3.09965C9.74123 1.47921 8.90871 0.66899 7.97213 0.66899C7.08757 0.66899 6.28478 1.46806 5.56376 3.0662C5.29617 3.66829 5.07317 4.42276 4.89477 5.32962ZM1.20418 5.32962H4.17003C4.21463 5.32962 4.31498 4.93194 4.47108 4.13659C4.90221 2.72427 5.43368 1.65761 6.06551 0.936585H6.03206C4.11429 1.56098 2.69082 2.62764 1.76167 4.13659C1.39001 4.82044 1.20418 5.21812 1.20418 5.32962ZM9.93449 0.936585C10.7001 1.79884 11.2985 3.14053 11.7296 4.96167C11.7296 5.20697 11.7631 5.32962 11.83 5.32962H14.7958C14.164 3.64971 12.997 2.36376 11.2948 1.47178C10.8636 1.24878 10.4102 1.07038 9.93449 0.936585ZM0.936585 5.99861C0.758188 6.79396 0.66899 7.47038 0.66899 8.02787C0.66899 8.5259 0.758188 9.18374 0.936585 10.0014H4.10314C4.03624 9.22091 4.00279 8.60767 4.00279 8.16167V7.83833C4.00279 7.39233 4.03624 6.77909 4.10314 5.99861H0.936585ZM4.80557 5.99861C4.71638 6.77909 4.67178 7.45552 4.67178 8.02787C4.67178 8.54077 4.71638 9.19861 4.80557 10.0014H11.2056C11.2873 9.22091 11.3282 8.54448 11.3282 7.97213C11.3282 7.45923 11.2873 6.80139 11.2056 5.99861H4.80557ZM11.8969 5.99861C11.9638 6.77909 11.9972 7.39233 11.9972 7.83833V8.16167C11.9972 8.60767 11.9638 9.22091 11.8969 10.0014H15.0634C15.2418 9.20604 15.331 8.52962 15.331 7.97213C15.331 7.4741 15.2418 6.81626 15.0634 5.99861H11.8969ZM1.20418 10.6704C1.82857 12.3503 2.99559 13.6362 4.70523 14.5282C5.06945 14.7364 5.52288 14.9148 6.06551 15.0634C5.23299 14.1343 4.61231 12.6699 4.20348 10.6704H1.20418ZM4.89477 10.6704C5.07317 11.5326 5.28502 12.276 5.53031 12.9003C6.25877 14.5208 7.09129 15.331 8.02787 15.331C9.03879 15.331 9.93078 14.3089 10.7038 12.2648C10.793 11.9972 10.9268 11.4657 11.1052 10.6704H4.89477ZM9.93449 15.0634H9.96794C11.7816 14.4911 13.1494 13.5024 14.0711 12.0976C14.4056 11.5995 14.6472 11.1238 14.7958 10.6704H11.83C11.7854 10.6704 11.6962 11.0235 11.5624 11.7296C11.1461 13.1791 10.6035 14.2904 9.93449 15.0634Z";break;case H.lightbulb:t="-8 -8 40 40",n="M12.000008,2.00139734 C16.0040628,2.00139734 19.249992,5.24733208 19.249992,9.25139734 C19.249992,11.3474567 18.3493333,13.2711054 16.5869535,14.9933011 C16.5100054,15.0685004 16.450441,15.1590617 16.4118457,15.2586031 L16.380373,15.3609016 L15.2492957,20.256497 C15.0265913,21.2204195 14.2034707,21.9187611 13.2302558,21.9933796 L13.0570456,22 L10.9432689,22 C9.95374997,22 9.08791486,21.3549492 8.79629808,20.4232534 L8.75088874,20.2559339 L7.62132399,15.3611533 C7.58904306,15.2212595 7.51728321,15.0935695 7.41456824,14.9932517 C5.73516207,13.3530399 4.83779011,11.5301519 4.75613429,9.54965138 L4.750008,9.25139734 L4.75388322,9.01208292 C4.88014853,5.11879041 8.07602134,2.00139734 12.000008,2.00139734 Z M14.115008,18.4993973 L9.884008,18.4993973 L10.2124755,19.9186446 C10.2831529,20.2249131 10.5356676,20.4507962 10.8400612,20.4929101 L10.9432689,20.5 L13.0570456,20.5 C13.3712985,20.5 13.6481364,20.3048226 13.757662,20.0177756 L13.7877956,19.9188323 L14.115008,18.4993973 Z M12.000008,3.50139734 C8.89821922,3.50139734 6.37007083,5.95741111 6.25416008,9.03084139 L6.250008,9.25139734 L6.25672343,9.52840679 C6.33286953,11.0917695 7.05722352,12.5475342 8.46263227,13.9201432 C8.72676013,14.1781068 8.92266257,14.4964075 9.03423135,14.8463815 L9.08291336,15.0238752 L9.538008,16.9993973 L14.461008,16.9993973 L14.9188729,15.023237 C15.0019011,14.6638694 15.1717664,14.3313677 15.4124215,14.0542893 L15.5385739,13.9205009 C16.9431998,12.547902 17.6671738,11.0920338 17.7432801,9.5284475 L17.749992,9.25139734 L17.7458399,9.03084154 C17.6299293,5.9574132 15.1017833,3.50139734 12.000008,3.50139734 Z";break;case H.meetNow:break;case H.news:t="-5 -5 25 25",n="M16 4V11C16 11.276 15.9453 11.5365 15.8359 11.7812C15.7318 12.0208 15.5885 12.2318 15.4062 12.4141C15.2292 12.5911 15.0182 12.7344 14.7734 12.8438C14.5286 12.9479 14.2708 13 14 13H1.94531C1.67969 13 1.42708 12.9479 1.1875 12.8438C0.953125 12.7396 0.747396 12.6016 0.570312 12.4297C0.398438 12.2526 0.260417 12.0469 0.15625 11.8125C0.0520833 11.5729 0 11.3203 0 11.0547V2H14V4H16ZM15 5H14V10.5C14 10.6354 13.9505 10.7526 13.8516 10.8516C13.7526 10.9505 13.6354 11 13.5 11C13.3646 11 13.2474 10.9505 13.1484 10.8516C13.0495 10.7526 13 10.6354 13 10.5V3H1V11.0547C1 11.1849 1.02344 11.3073 1.07031 11.4219C1.1224 11.5365 1.1901 11.638 1.27344 11.7266C1.36198 11.8099 1.46354 11.8776 1.57812 11.9297C1.69271 11.9766 1.8151 12 1.94531 12H14C14.1406 12 14.2708 11.974 14.3906 11.9219C14.5104 11.8698 14.6146 11.7995 14.7031 11.7109C14.7969 11.6172 14.8698 11.5104 14.9219 11.3906C14.974 11.2708 15 11.1406 15 11V5ZM12 5H2V4H12V5ZM12 11H8V10H12V11ZM12 9H8V8H12V9ZM12 7H8V6H12V7ZM7 11H2V5.97656H7V11ZM3 10H6V6.97656H3V10Z";break;default:t="-12 -12 40 40",n="M10.5 0C11.0052 0 11.4922 0.0651042 11.9609 0.195312C12.4297 0.325521 12.8672 0.510417 13.2734 0.75C13.6797 0.989583 14.0495 1.27865 14.3828 1.61719C14.7214 1.95052 15.0104 2.32031 15.25 2.72656C15.4896 3.13281 15.6745 3.57031 15.8047 4.03906C15.9349 4.50781 16 4.99479 16 5.5C16 6.00521 15.9349 6.49219 15.8047 6.96094C15.6745 7.42969 15.4896 7.86719 15.25 8.27344C15.0104 8.67969 14.7214 9.05208 14.3828 9.39062C14.0495 9.72396 13.6797 10.0104 13.2734 10.25C12.8672 10.4896 12.4297 10.6745 11.9609 10.8047C11.4922 10.9349 11.0052 11 10.5 11C9.84896 11 9.22396 10.8906 8.625 10.6719C8.03125 10.4531 7.48438 10.138 6.98438 9.72656L0.851562 15.8516C0.752604 15.9505 0.635417 16 0.5 16C0.364583 16 0.247396 15.9505 0.148438 15.8516C0.0494792 15.7526 0 15.6354 0 15.5C0 15.3646 0.0494792 15.2474 0.148438 15.1484L6.27344 9.01562C5.86198 8.51562 5.54688 7.96875 5.32812 7.375C5.10938 6.77604 5 6.15104 5 5.5C5 4.99479 5.0651 4.50781 5.19531 4.03906C5.32552 3.57031 5.51042 3.13281 5.75 2.72656C5.98958 2.32031 6.27604 1.95052 6.60938 1.61719C6.94792 1.27865 7.32031 0.989583 7.72656 0.75C8.13281 0.510417 8.57031 0.325521 9.03906 0.195312C9.50781 0.0651042 9.99479 0 10.5 0ZM10.5 10C11.1198 10 11.7031 9.88281 12.25 9.64844C12.7969 9.40885 13.2734 9.08594 13.6797 8.67969C14.0859 8.27344 14.4062 7.79688 14.6406 7.25C14.8802 6.70312 15 6.11979 15 5.5C15 4.88021 14.8802 4.29688 14.6406 3.75C14.4062 3.20312 14.0859 2.72656 13.6797 2.32031C13.2734 1.91406 12.7969 1.59375 12.25 1.35938C11.7031 1.11979 11.1198 1 10.5 1C9.88021 1 9.29688 1.11979 8.75 1.35938C8.20312 1.59375 7.72656 1.91406 7.32031 2.32031C6.91406 2.72656 6.59115 3.20312 6.35156 3.75C6.11719 4.29688 6 4.88021 6 5.5C6 6.11979 6.11719 6.70312 6.35156 7.25C6.59115 7.79688 6.91406 8.27344 7.32031 8.67969C7.72656 9.08594 8.20312 9.40885 8.75 9.64844C9.29688 9.88281 9.88021 10 10.5 10Z"}return{viewBoxString:t,svgString:n}},V=(e,t)=>!(!e||!t)&&(e===E.W.offPageNavigation&&q(t)),q=e=>/^((microsoft-edge:)?https:\/\/((www)|(cn)|(go))\.((msn)|(bing)|(skype)|(microsoft))\.com)|(edge:\/\/)/.test(e);var z,Q=n(75559),Z=n(31699),K=n(99452),J=n(42590),X=n(81555),Y=n(9533),ee=n(41691);!function(e){e.offPageNavigation="nav-newtab",e.inPageNavigation="nav-inpage",e.executeAction="execute-action"}(z||(z={}));var te=n(68364),ne=n(19388),ie=n(25964),re=n(44979),oe=n(12884),ae=n(53909),se=n(7781),ce=n(40860),de=n(32717);class le{constructor(e,t){if(this.dayNow=(new Date).getDay(),this.firstFrameHidden=!1,this.isEnergySaverMode=!1,this.isGalleryEnabled=!1,this.isPlaying=!1,this.isReducedMotionActive=!1,this.isTomorrowsVideoCached=!1,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)"),this.showVideo=!1,this.showToast=!1,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.batteryChargingChange=()=>{this.battery.charging?this.currentTrigger?this.playVideo("Battery"):this.playVideo("Timer"):this.backgroundImageWC.config.translucentFeedEnabled||this.showToastMessage(this.backgroundImageWC.config.localizedStrings.video_pauseToast,!0)},this.playVideo=e=>(0,i.mG)(this,void 0,void 0,(function*(){!this.config.isTest&&this.showVideo&&e&&((this.config.turnOffAutoPlay||this.backgroundImageWC.config.translucentFeedEnabled)&&"Button"!==e||(yield this.batteryPromise,e!==this.currentTrigger&&"Timer"!==e&&"Button"!==e||this.battery&&!this.battery.charging&&"Button"!==e||this.isPlaying||this.isReducedMotionActive&&"Button"!==e?this.battery.charging||(this.currentTrigger="Battery"):(0,de.eC)().then((()=>{const t=1e3*this.config.pauseTime;if(this.videoTimer&&this.videoTimer.timer&&clearTimeout(this.videoTimer.timer),"Button"!==e||this.battery.charging){if(this.isGalleryEnabled&&this.isEnergySaverMode&&!this.isBandwidthAdequateForVideo())return void this.pauseVideo("Network");if(!this.battery.charging)return void this.pauseVideo("Battery")}else this.showToastMessage(this.backgroundImageWC.config.localizedStrings.video_powerDrainToast,!1);this.videoTimer.remainingTime<=0&&(this.videoTimer.remainingTime=t),this.videoTimer.startTime=Date.now(),this.videoTimer.timer=n.g.setTimeout((()=>{(this.isGalleryEnabled||!this.battery.charging)&&(!this.isGalleryEnabled||this.isEnergySaverMode)?this.pauseVideo("Timer"):this.playVideo("Timer")}),this.videoTimer.remainingTime),this.handleVideoPlay()}))))})),this.handleVideoPlay=()=>{this.isPlaying=!1,requestAnimationFrame((()=>{this.isReducedMotionActive=!1,this.backgroundImageWC.ref_video.play().then((()=>{this.isPlaying=!0})).catch((e=>{(0,te.OO)(e,r.N1Y,"Failed to trigger play.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo),this.isPlaying=!1})).finally((()=>{this.backgroundImageWC.updateProperties()}))}))},this.pauseVideo=e=>{if(this.isPlaying&&this.showVideo){this.currentTrigger=e,this.videoTimer&&this.videoTimer.timer&&(clearTimeout(this.videoTimer.timer),this.videoTimer.remainingTime-=Date.now()-this.videoTimer.startTime),this.isPlaying=!1,this.backgroundImageWC.updateProperties();try{this.backgroundImageWC.ref_video.pause()}catch(e){(0,te.OO)(e,r.FtH,"Failed to trigger pause.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo)}}},this.reducedMotionChange=()=>{this.isReducedMotionActive=this.prefersReducedMotion.matches},this.showToastMessage=(e,t)=>{this.showToast=!0,this.toastMessage=e,t&&this.pauseVideo("Battery"),this.shouldSkipShowToast()?this.hideToastMessage():(this.backgroundImageWC.updateProperties(),n.g.setTimeout((()=>{this.hideToastMessage()}),5e3))},this.hideToastMessage=()=>{this.showToast=!1,this.toastMessage=null,this.backgroundImageWC.updateProperties()},this.shouldSkipShowToast=()=>{var e;const t="off"===(null===(e=this.backgroundImageWC.chromiumPageSettingsState)||void 0===e?void 0:e.selectedQuickLinksDisplaySetting);return"always"===this.backgroundImageWC.chromiumPageSettingsState.selectedFeedDisplaySetting&&t},this.config=e,this.backgroundImageWC=t,this.backgroundImageWC.config.newStorage&&(this.config.data=se.p.getCMSVideoData()),!(0,N.N)())return;if(this.topSitesLayoutDataConnector=(0,U.K0)(h.z.TopSitesLayoutData),this.isGalleryEnabled=!t.config.disableBackgroundGallery&&se.p.getBackgroundGalleryEligibility(),this.isGalleryEnabled){this.backgroundDataConnector=(0,U.K0)(h.z.BackgroundData);const e=this.backgroundDataConnector.getCurrentState();this.isEnergySaverMode=!(0,$.isNullOrUndefined)(e)&&"energySaver"===e.selectedVideoSetting,R.f.videoSettingsUpdated.registerObserver((e=>{const t=e&&e.params;if(!t||!t.length)return;const n=t[0];this.isEnergySaverMode="energySaver"===n}))}this.videoTimer={remainingTime:-1,startTime:-1,timer:null},this.assignVideoSchedule();const o=window&&window.navigator;this.deviceLogicalProcessors=o?o.hardwareConcurrency:-1,this.deviceMemoryGB=o?o.deviceMemory:-1,this.batteryPromise=o.getBattery().then((e=>{this.battery=e})),this.deviceLogicalProcessors<=2||this.deviceMemoryGB<4?this.showVideo=!1:(this.showVideo=this.shouldShowVideo(),this.showVideo&&this.setVideoAndMuseumCardProperties(),this.config.isTest||Promise.all([(0,ne.e3)(),(0,_.F_)()]).then((()=>{this.cacheNextVideo()})))}setVideoAndMuseumCardProperties(){this.defineResolution(),this.videoSource=this.getVideoURL(this.videoId),this.firstFrameSource=this.getFirstFrameURL(this.videoId);const e="video"+this.videoId;this.videoSource&&this.firstFrameSource&&(this.museumCard={credits:this.config.data[this.videoId].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:this.backgroundImageWC.config.localizedStrings.video_titles[e],titleURL:null})}assignBackgroundUsingIndex(e){window.isSSREnabled&&this.defineResolution(),this.videoId=Number(e),this.setVideoAndMuseumCardProperties()}getCurrentBackgroundVideoId(){return this.videoId}assignVideoSchedule(){const e=this.getVideoData();e&&e.schedule?(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed,this.checkAndGenerateVideoSchedule(),this.reRandomizeSchedule(e)):this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule()}checkAndGenerateVideoSchedule(){for(let e=0;e<this.schedule.length;e++){const t=this.schedule[e];if(this.config.data[t]&&this.config.data[t].removeContent||t>-1&&!this.validateCurrentIndex(t,!0)){this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule();break}}}validateCurrentIndex(e,t=!1){const n=!(0,$.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!n&&t&&(0,te.H)(r.FEC,"Error validating video configuration index: "+e),n}cacheNextVideo(){const e=new Date;e.setDate(e.getDate()+1);const t=e.getDay(),n=this.getVideoData();if(!(n&&n.cachedVideoId===this.schedule[t]||this.backgroundImageWC.config.simpleImages||this.backgroundImageWC.config.dailyRotationOnlyImages)&&this.schedule[t]>=0&&this.config.enableFeature){const e=this.schedule[t];try{const t=this.getVideoURL(e),i=this.getFirstFrameURL(e);if(!t||!i)return;fetch(t),fetch(i),this.isTomorrowsVideoCached=!0,this.storeVideoData({cachedVideoId:e,lastUpdatedTime:null==n?void 0:n.lastUpdatedTime,schedule:null==n?void 0:n.schedule,scheduleFixed:null==n?void 0:n.scheduleFixed})}catch(t){(0,te.H)(r.LWq,"Video caching failed. Video url: "+this.getVideoURL(e)+" First frame url: "+this.getFirstFrameURL(e),"Error: "+t)}}}defineResolution(){const e=new re.fH,t=(0,re.Nd)(e.data.innerHeight,"innerHeight"),n=(0,re.Nd)(e.data.innerWidth,"innerWidth"),i=(0,oe.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.backgroundImageWC.config.serveBetterResolution?this.currentResolution=r<=720||o<=1280?"1080":720<r&&r<=1080||1280<o&&o<=1920?"1440":r>=1080||o>=1920?"2160":"1440":this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440"}error(){this.showVideo=!1}generateVideoSchedule(){const e=[];for(let t=0;t<this.config.data.length;t++)e[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];for(let t=0;t<this.config.videosPerWeek;t++){let n=Math.floor(Math.random()*this.config.data.length);if(e[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent)do{n===this.config.data.length-1?n=0:n++}while(e[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent);this.schedule[t]=n,e[n]=!0}(0,ce.Z)(this.schedule),this.scheduleFixed=this.schedule;const t=this.getVideoData();this.storeVideoData({cachedVideoId:(null==t?void 0:t.cachedVideoId)?t.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}generateFilteredVideoSchedule(){const e=[],t=se.p.getLikeAndDislikeCacheByType(ie.wI.videoDislikes);for(let n=0;n<this.config.data.length;n++)t.has(String(n))||e.push(n);const n=[];for(let t=0;t<e.length;t++)n[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];const i=Math.min(e.length,this.config.videosPerWeek);for(let t=0;t<i;t++){let i=Math.floor(Math.random()*e.length);if(n[i]||!this.config.data[i]||this.config.data[i].skipRotation||this.config.data[i].removeContent)do{i===e.length-1?i=0:i++}while(n[i]||!this.config.data[i]||this.config.data[i].skipRotation||this.config.data[i].removeContent);this.schedule[t]=e[i],n[i]=!0}(0,ce.Z)(this.schedule),this.scheduleFixed=this.schedule;const r=this.getVideoData();this.storeVideoData({cachedVideoId:(null==r?void 0:r.cachedVideoId)?r.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getFirstFrameURL(e){var t;if(!this.config.data[e])return null;let n;switch(this.currentResolution){case"720":n=this.config.data[e].firstFrame.i720;break;case"1080":n=this.config.data[e].firstFrame.i1080;break;case"1440":n=this.config.data[e].firstFrame.i1440;break;case"2160":n=this.config.data[e].firstFrame.i2160}return(0,N.N)()&&(this.isGalleryEnabled?this.isGalleryEnabled&&(n=this.isEnergySaverMode?this.config.data[e].firstFrame.i720:n):n=this.shouldReduceTo1080()?this.config.data[e].firstFrame.i1080:n),n=(null===(t=this.backgroundImageWC.config)||void 0===t?void 0:t.useImgGenerator)?(0,ae.zz)(n,{width:0,height:0,enableDpiScaling:!1}):ie.qR+n+".img",n}getVideoData(){try{return(0,P.$o)().getObject(this.storageKey)}catch(e){return(0,te.H)(r.eEQ,"Local storage for video data failed."),null}}getVideoURL(e){var t;if(!this.config.data[e])return null;let n;switch(this.currentResolution){case"720":n=this.config.data[e].video.v720;break;case"1080":n=this.config.data[e].video.v1080;break;case"1440":n=this.config.data[e].video.v1440;break;case"2160":n=this.config.data[e].video.v2160}return(0,N.N)()&&(this.isGalleryEnabled?this.isGalleryEnabled&&(n=this.isEnergySaverMode?this.config.data[e].video.v720:n):n=this.shouldReduceTo1080()?this.config.data[e].video.v1080:n),n=(null===(t=this.backgroundImageWC.config)||void 0===t?void 0:t.useImgGenerator)?(0,ae.QG)(n):ie.Od+n+".mp4",n}removeVideoForToday(){const e=this.getVideoData();e&&e.schedule&&(e.schedule[this.dayNow]=-1,this.showVideo=!1,this.storeVideoData(e))}removeVideoFromLocalStorage(e){const t=this.getVideoData(),n=Number(e);let i=!1;if(t&&t.schedule){for(let e=0;e<t.schedule.length;e++)t.schedule[e]===n&&(t.schedule[e]=-1,i=e===this.dayNow);this.storeVideoData(t)}return i}reRandomizeSchedule(e){e.lastUpdatedTime<this.timeNow-6048e5&&(this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule())}shouldShowVideo(){const e=se.p.getBackgroundSettingsPreferencesCache(),t=this.backgroundImageWC.dailyRotationEnabled(e);if(this.backgroundImageWC.ssrRotationMismatch&&t&&"Video"===this.backgroundImageWC.ssrBackgroundMetadata.provider)return!0;const n=this.schedule&&this.schedule[this.dayNow];return!!(n>-1&&this.validateCurrentIndex(n)&&this.config.enableFeature&&this.config.data)&&(this.videoId=this.schedule[this.dayNow],!0)}shouldReduceTo1080(){const e=this.isBandwidthAdequateForVideo(),t=this.deviceMemoryGB>=4;return(!e||!t)&&(this.currentResolution="1080",!0)}isBandwidthAdequateForVideo(){return"4g"===window.navigator.connection.effectiveType}storeVideoData(e){try{(0,P.$o)().setObject(this.storageKey,e)}catch(e){return void(0,te.H)(r.ybt,"Local storage for video data failed.")}}unloadVideo(){this.batteryPromise.then((()=>{this.battery.removeEventListener("chargingchange",this.batteryChargingChange)})),this.prefersReducedMotion.removeEventListener("change",this.reducedMotionChange)}videoLoaded(){this.firstFrameHidden=!0,this.backgroundImageWC.updateProperties();const e=this.getVideoData();e&&e.cachedVideoId<0&&L.M0.addOrUpdateTmplString("videoFirstLoad"),this.isReducedMotionActive=this.prefersReducedMotion.matches,!this.isReducedMotionActive&&this.deviceMemoryGB>=4&&(this.isPlaying=!1,this.playVideo("Timer")),!this.backgroundImageWC.config.translucentFeedEnabled&&this.isReducedMotionActive&&this.showToastMessage(this.backgroundImageWC.config.localizedStrings.video_reducedMotionToast,!1),this.batteryPromise.then((()=>{this.battery.addEventListener("chargingchange",this.batteryChargingChange)})),this.prefersReducedMotion.addEventListener("change",this.reducedMotionChange)}}var ue=n(24169),pe=n(88828),he=n(14989),ge=n(58958),me=n(51953),fe=n(23586),ve=n(65932);class ye{constructor(e,t){this.showImageInRotation=!1,this.dayNow=(new Date).getDay(),this.config=e,this.backgroundImageWC=t,this.backgroundImageWC.config.newStorage&&(this.config.data=se.p.getCMSImageData()),(0,N.N)()&&(this.cmsSize=se.p.getCMSImageSize(),this.showImageInRotation=!!this.backgroundImageWC.config.simpleImages&&this.shouldShowImageInRotation(),this.showImageInRotation&&this.setImageAndMuseumCardProperties())}shouldShowImageInRotation(){if(this.backgroundImageWC.schedule){const e=this.backgroundImageWC.schedule,t=e&&e[this.dayNow],n=this.backgroundImageWC.config.simpleImages?this.cmsSize:0;if(t>-1&&this.validateCurrentIndex(t)&&this.config.data)return this.imageId=e[this.dayNow]+n,!0}return!1}setImageAndMuseumCardProperties(){if(this.defineResolution(),this.imageSource=this.getImageURL(this.imageId),!this.imageSource)return;const e=this.imageId<this.cmsSize?"image"+this.imageId:"simple"+this.imageId;this.museumCard={credits:this.config.data[this.imageId].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:this.backgroundImageWC.config.localizedStrings.cmsimage_titles[e]||"",titleURL:null}}assignBackgroundUsingIndex(e){this.imageId=Number(e),this.setImageAndMuseumCardProperties()}getImageURL(e){if(!this.config.data[e])return null;let t;switch(this.currentResolution){case"720":t=this.config.data[e].image.i720;break;case"1080":t=this.config.data[e].image.i1080;break;case"1440":t=this.config.data[e].image.i1440;break;case"2160":t=this.config.data[e].image.i2160}return t=ie.qR+t+".img",t}defineResolution(){const e=new re.fH,t=(0,re.Nd)(e.data.innerHeight,"innerHeight"),n=(0,re.Nd)(e.data.innerWidth,"innerWidth"),i=(0,oe.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.backgroundImageWC.config.serveBetterResolution?this.currentResolution=r<=720||o<=1280?"1080":720<r&&r<=1080||1280<o&&o<=1920?"1440":r>=1080||o>=1920?"2160":"1440":this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440"}validateCurrentIndex(e,t=!1){const n=!(0,$.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!n&&t&&(0,te.H)(r.FEC,"Error validating CMS Image configuration index: "+e),n}}var Se=n(34955),Ce=n(16614),be=n(37890),we=n(85068),Te=n(45896),ke=n(43178),Pe=n(97555),Ae=n(65453),Ie=n(86331),Ee=n(8783),xe=n(49286);function Me(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=Ee.k.isImageOfTheDayDisabled(),t=se.p.getBackgroundImageTypeFromSettings(this.includeVideoBackgroundsInRotation,e),n=yield se.p.backgroundSelectionSet();Ee.k.updateLayoutAndBackgroundImageType(t,n)}))}const Oe="vp"===(0,m.L)().get("reqsrc")||!!(0,m.L)().get("vptest");class Le extends ue.l{constructor(){super(...arguments),this.hotSpots=[],this.eventLocalStorage=f.Q.getInstance(),this.imageInformationalStyles="",this.imageOverrideStyles="",this.isFeedDisplayAlwaysOn=!1,this.isFRE=v.jG.IsFrePage,this.isTestRunning=!1,this.isReducedMotionActive=!1,this.isTTVRFired=!1,this.isLoadComplete=!1,this.hasFeedDisplayChanged=!1,this.museumCreditsCardIsShown=!1,this.storeOverrideStyles="",this.telemetryTags={},this.videoPlaying=!1,this.spaceHolderHeight=null,this.bgBlurSize="0px",this.displayMarqueeAd=!1,this.marqueeAdTopHeight=null,this.marqueeAdHeight=null,this.marqueeAdOverlayHeight=null,this.loadImageHotSpotsErrorFired=!1,this.shouldUpdateMuseumCardVisibility=!0,this.shouldUpdateMarqueeAdDismissButtonVisibility=!0,this.renderHotSpots=!0,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.backgroundGalleryEligibility=!1,this.includeVideoBackgroundsInRotation=!1,this.isDarkMode=!1,this.imageEmptyChecked=!1,this.dayNow=(new Date).getDay(),this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.currentProviderChanged=(e,t)=>{var n;switch(this.imageOverrideStyles="",this.imageInformationalStyles="",this.isLoadComplete=!1,"NoBackground"===t?(0,y.j3)("backgroundImage","hidden"):(0,y.j3)("backgroundImage","displayed"),t){case"Iris":this.checkAndCreateIrisProvider();break;case"Video":if(this.checkAndCreateVideoProvider(),(0,N.N)()&&this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider&&(this.videoProvider.showVideo=this.videoProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0),!this.videoProvider.showVideo)){se.p.clearCachedBackground().then((()=>{this.defineCurrentProviderAndSync()}));break}this.videoProvider&&(this.videoProvider.showVideo||this.shouldOverrideWithPreviousRotation())?(window.addEventListener("blur",this.onWindowBlur,!1),window.addEventListener("focus",this.onWindowFocus,!1)):(0,N.N)()&&this.setProviderForRotation();break;case"CMSImage":if(this.checkAndCreateCMSImageProvider(),!(0,N.N)())return;this.cmsImageProvider.showImageInRotation||this.cmsImageProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0)||se.p.clearCachedBackground().then((()=>{this.defineCurrentProviderAndSync()}))}if("Video"!==this.currentProvider&&this.videoProvider&&(this.videoProvider.isPlaying=!1),"Video"===e)(0,N.N)()&&(null===(n=this.videoProvider)||void 0===n||n.unloadVideo()),window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.updateProperties()},this.animationComplete=()=>{this.calcMuseumBottom()},this.calcMuseumBottom=()=>{if(window.scrollY>0&&!this.config.bgMuseumCdBtnMoveToBottom)return;if(this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.remove("museumCard_hide"),this.museumCreditsCardIsShown)return void(this.museumBottom=7);const e=this.getHeaderSpaceHolderHeight();if(null!==e)if(this.config.bgMuseumCdBtnMoveToBottom)this.museumBottom=40;else switch(this.chromiumPageSettingsState.selectedFeedDisplaySetting){case"always":case"peek":case"headingsonly":this.museumBottom=window.innerHeight-e+7;break;default:this.museumBottom=7}},this.createTelemetryTags=()=>{(0,$.isNullOrUndefined)(this.telemetryObject)?(0,te.H)(r.CgS,"Telemetry object is undefined"):(this.telemetryTags.hotSpots={},this.telemetryTags.video=this.telemetryObject.addOrUpdateChild({name:"BackgroundVideo"}).getMetadataTag(),this.backgroundGalleryEligibility&&(this.telemetryTags.backgroundGalleryButton=this.telemetryObject.addOrUpdateChild({name:"BackgroundGalleryButton",type:D.c9.Interaction,behavior:D.wu.Navigate,content:{headline:"Edit Background"}}).getMetadataTag()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]),this.imageEditButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"ImageEditButtonButton",type:D.c9.Interaction,behavior:D.wu.More,content:{headline:"Edit Background"}}).getMetadataTag())},this.defineCurrentProvider=()=>{var e,t,n,i,o;if(!(0,N.N)()||this.shouldOverrideWithPreviousRotation())return this.displayMarqueeAd?void(this.currentProvider="MarqueeAd"):void(this.currentProvider=this.ssrBackgroundMetadata.provider);if(null===(e=this.config.video)||void 0===e?void 0:e.isTest)this.currentProvider="Video";else if(this.backgroundGalleryEligibility&&(this.galleryBackgroundSelectionMetadata=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata),this.includeVideoBackgroundsInRotation=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation)),this.currentBackgroundMetadata=se.p.getCurrentBackgroundPreferenceCache(),"bing"!==this.chromiumPageSettingsState.currentBackgroundImageType&&"imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||!this.isTestRunning)switch(this.chromiumPageSettingsState.currentBackgroundImageType){case c.HX.bing:case c.HX.enterprise:case c.HX.imageAndVideo:case c.HX.iris:if(this.displayMarqueeAd){this.currentProvider="MarqueeAd";break}if(this.isFRE&&!this.config.turnOffFREImage){this.currentProvider="FREBackground";break}if(!this.isSSRBkgd&&(null===(t=this.config.event)||void 0===t?void 0:t.enableEvent)){const e=this.config.event.showImageIndefinitely?S.vC:void 0;this.eventLocalStorage.shouldShowEvent(this.config.event.eventId,u.x.backgroundImageWC,this.config.event.creatives,e,null===(n=this.config.event.cmsContent)||void 0===n?void 0:n.url,r.LXY).then((e=>{this.showEvent=e,this.showEvent&&this.chromiumPageSettingsState.backgroundImageTypePolicy===c.gZ.allowAll?this.currentProvider="Event":(this.config.event.enableEvent=!1,this.defineCurrentProviderAndSync())}));break}if(this.chromiumPageSettingsState.currentLayout==c.nP.informational&&(null===se.p||void 0===se.p?void 0:se.p.isLowEndDevice())){this.currentProvider="NoBackground",L.M0.addOrUpdateTmplProperty("LowEndDeviceBkgdOff","1");break}if(this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata){if("CMSImage"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="CMSImage";break}if("Video"===this.galleryBackgroundSelectionMetadata.provider){this.videoProvider&&!this.videoProvider.showVideo?this.setProviderForRotation():!this.config.simpleImages&&!this.config.dailyRotationOnlyImages||this.config.informationalFlightOnly&&!this.checkInformataionalFlight()?this.config.setBkgdOffInformational&&this.checkInformataionalFlight()?this.currentProvider="NoBackground":this.currentProvider="Video":this.currentProvider="CMSImage";break}if("Iris"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="Iris";break}if("BrowserLocal"===this.galleryBackgroundSelectionMetadata.provider&&this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage){this.currentProvider="BrowserLocal";break}}if((null===(i=this.config.video)||void 0===i?void 0:i.enableFeature)&&this.chromiumPageSettingsState.backgroundImageTypePolicy===c.gZ.allowAll&&this.chromiumPageSettingsState.currentBackgroundImageType!==c.HX.bing){if(!this.videoProvider||this.videoProvider.showVideo&&this.videoProvider.shouldShowVideo()&&(!this.backgroundGalleryEligibility||this.includeVideoBackgroundsInRotation)){!this.config.simpleImages&&!this.config.dailyRotationOnlyImages||this.config.informationalFlightOnly&&!this.checkInformataionalFlight()?this.config.setBkgdOffInformational&&this.checkInformataionalFlight()?this.currentProvider="NoBackground":this.currentProvider="Video":this.currentProvider="CMSImage";break}this.setProviderForRotation();break}this.currentProvider="Iris";break;case c.HX.custom:this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage?this.currentProvider="BrowserLocal":this.currentProvider="Iris";break;case c.HX.off:this.currentProvider="NoBackground";break;case c.HX.theme:{const e=this.chromiumPageSettingsState.configData,t=e&&e.enabledFeatures&&e.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.usingDefaultTheme,i=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.imageUrl,r=this.chromiumPageSettingsState.ntpTheme&&(null===(o=this.chromiumPageSettingsState.ntpTheme.backgroundColorRgba)||void 0===o?void 0:o.length)>3;this.currentProvider=t&&!n&&(i||r)?"Theme":"NoBackground";break}default:this.currentProvider="Iris"}else this.isFRE&&!this.config.turnOffFREImage?this.currentProvider="FREBackground":this.currentProvider="Iris"},this.defineCurrentProviderAndSync=()=>{this.defineCurrentProvider(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.error=e=>{if(this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,N.N)()&&(0,de.eC)().then((()=>Se.H.logEventWithTimestamp(Se.v.NTP_BACKGROUND_IMAGE_LOADED,C.Al.IsPrerender)))),(0,te.H)(r.yb9,"Error fetching source","Source: "+e),"Video"===this.currentProvider)this.videoProvider.error(),this.defineCurrentProviderAndSync();else this.currentProvider="Error",this.updateProperties(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.loadComplete=()=>{this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,N.N)()&&(0,de.eC)().then((()=>Se.H.logEventWithTimestamp(Se.v.NTP_BACKGROUND_IMAGE_LOADED,C.Al.IsPrerender))))},this.playVideo=()=>{this.videoPlaying||this.videoProvider.videoLoaded()},this.toggleMuseumCardOpen=()=>{const e=this.getStyleForElementKey(X._.backgroundOuterHolder);this.museumCreditsCardIsShown?(window.removeEventListener("click",this.onClick_outsideMuseumCard),window.removeEventListener("keydown",this.onKeyDown_closeMuseumCard)):window.setTimeout((()=>{window.addEventListener("click",this.onClick_outsideMuseumCard),window.addEventListener("keydown",this.onKeyDown_closeMuseumCard)}),100),this.isFeedDisplayAlwaysOn&&(this.museumCreditsCardIsShown?(this.imageInformationalStyles=this.storeOverrideStyles,this.storeOverrideStyles=""):(this.storeOverrideStyles=this.imageInformationalStyles,this.imageInformationalStyles="")),this.museumCreditsCardIsShown?e.zIndex="":(e.zIndex=a,this.getStyleForElementKey(X._.backgroundInnerHolder).height=window.innerHeight+"px"),this.museumCreditsCardIsShown=!this.museumCreditsCardIsShown,this.backgroundImageFixedWCStateSyncEventEmit([{key:"museumCreditsCardIsShown",value:this.museumCreditsCardIsShown}]),(0,b.Gg)(b.tk.museumCard,this.museumCreditsCardIsShown),this.calcMuseumBottom(),"Video"===this.currentProvider&&this.museumCreditsCardIsShown&&this.videoProvider.playVideo("Timer")},this.syncWithStateChange=()=>{const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.selectedFeedDisplaySetting!==this.chromiumPageSettingsState.selectedFeedDisplaySetting,n=e.quickLinksEnabled!==this.chromiumPageSettingsState.quickLinksEnabled;if((t||n)&&(this.museumBottom=0,this.hasFeedDisplayChanged=t),t&&this.displayMarqueeAd&&"always"!==e.selectedFeedDisplaySetting&&(this.displayMarqueeAd=!1,this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)),this.displayMarqueeAd){e.currentBackgroundImageType!==this.chromiumPageSettingsState.currentBackgroundImageType&&e.currentBackgroundImageType!==c.HX.imageAndVideo&&e.currentBackgroundImageType!==c.HX.bing&&(this.displayMarqueeAd=!1,this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1))}if(!this.isFeedDisplayAlwaysOn||this.hasFeedDisplayChanged||this.config.translucentFeedEnabled)this.imageInformationalStyles="";else{const e=this.getHeaderSpaceHolderHeight();null!==e&&(this.imageInformationalStyles=`height: ${e}px;`)}if(this.chromiumPageSettingsState=e,this.isSSRBkgd&&!this.backgroundGalleryEligibility&&(this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType),this.defineCurrentProviderAndSync(),this.updateProperties(),this.calcMuseumBottom(),this.config.noBckImgOnNavSticky&&0===window.scrollY){const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType;this.updatebackgroundImageOp(e)}},this.updateProperties=()=>{switch(this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,this.currentProvider){case"BrowserLocal":this.updateProperties_customImage();break;case"FREBackground":this.updateProperties_fre();break;case"Event":this.updateProperties_event();break;case"Iris":this.updateProperties_iris();break;case"NoBackground":this.updateProperties_noBackground();break;case"Theme":this.updateProperties_theme();break;case"Video":this.updateProperties_video();break;case"CMSImage":this.updateProperties_cmsImage();break;case"MarqueeAd":this.updateProperties_marqueeAd();break;default:this.updateProperties_error()}this.isCurrentBackgroundMetadataLoaded=!0,this.shouldOverrideWithPreviousRotation()?this.setCorrectRotationBackground():this.saveBackgroundPref(this.currentProvider)},this.updateProperties_customImage=()=>{this.imageSourceAgent=(0,N.N)()?this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl:this.ssrBackgroundMetadata.imageUrl,this.museumCard=null,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles=""},this.updateProperties_error=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational;this.imageSourceAgent="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,ae.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,ae.zz)(t,{width:0,height:0,enableDpiScaling:!1}),this.museumCard=null,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles=""},this.updateProperties_event=()=>(0,i.mG)(this,void 0,void 0,(function*(){var e,t;const n=this.config.event.eventId,i=this.config.event.showImageIndefinitely?S.vC:void 0;let o,a;if(this.currentEventCreative=yield this.eventLocalStorage.getCurrentCreativeId(n,u.x.backgroundImageWC,this.config.event.creatives,i,null===(e=this.config.event.cmsContent)||void 0===e?void 0:e.url,r.LXY),null===(t=this.config.event)||void 0===t?void 0:t.cmsContent){if(o=this.eventLocalStorage.getCMSContent(n,u.x.backgroundImageWC,this.config.event.creatives,r.LXY),!o)return this.config.event=null,void this.defineCurrentProviderAndSync();this.config.event.imageData.CMS.attribution=o.attribution,this.config.event.imageData.CMS.imageSource=o.imageSource,this.config.event.imageData.CMS.imageHref=o.imageHref}if(a="VpTest"===n?"Test image":this.config.event.cmsContent?o.title:this.strings.events[this.config.event.useCommonIdForLocString?this.config.event.eventId:this.currentEventCreative],this.imageSourceAgent=this.config.event.imageData[this.currentEventCreative].imageSource,this.museumCard={credits:this.config.event.imageData[this.currentEventCreative].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:a,titleURL:(0,w.h_)(this.config.event.imageData[this.currentEventCreative].imageHref)},this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles="",!this.telemetryObject)return void(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=this.telemetryObject.addOrUpdateChild({name:"CopyrightLink",behavior:D.wu.Navigate,content:{headline:a,id:S.YO+this.config.event.eventId},overrideDestinationUrl:this.config.event.imageData[this.currentEventCreative].imageHref}).getMetadataTag(),this.telemetryTags.dismissButton=this.telemetryObject.addOrUpdateChild({name:"DismissEvent",behavior:D.wu.Dislike,content:{headline:this.museumCard.title,id:S.YO+this.config.event.eventId}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"LikeBackground",behavior:D.wu.Show,content:{headline:"LikeBackground",id:S.YO+this.config.event.eventId}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"ExitFullView",behavior:D.wu.Close,content:{headline:"ExitFullView",id:S.YO+this.config.event.eventId}}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]);const s=this.config.event.imageData[this.currentEventCreative].secondaryButton;s&&(this.secondaryButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"SecondaryButton",behavior:D.wu.Navigate,content:{headline:this.museumCard.title,id:S.YO+this.config.event.eventId},overrideDestinationUrl:s.href}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}]))})),this.updateProperties_fre=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational,n="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,ae.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,ae.zz)(t,{width:0,height:0,enableDpiScaling:!1});this.imageSourceAgent=n,this.museumCard=null,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles=""},this.updateProperties_iris=()=>(0,i.mG)(this,void 0,void 0,(function*(){var e;if(!(0,N.N)())return void(this.imageSourceAgent=this.ssrBackgroundMetadata.imageUrl);if(Oe)yield this.irisProvider.loadImageHotSpots();else try{yield this.irisProvider.loadImageHotSpots()}catch(e){this.loadImageHotSpotsErrorFired||((0,te.H)(r.W91,"irisProvider.loadImageHotSpots failed. Mark load complete.",e&&e.message),this.loadImageHotSpotsErrorFired=!0)}const t=this.irisProvider.irisStateInfo;this.imageSourceAgent=this.irisProvider.irisImageURL,this.museumCard=Object.assign(Object.assign({},this.irisProvider.museumCard),{irisButtons:Object.assign({},null===(e=this.museumCard)||void 0===e?void 0:e.irisButtons)}),this.saveBackgroundPref("Iris"),this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles="";const n=this.config.iris.disableHotSpots||this.isFeedDisplayAlwaysOn||!t||!t.hsList||0===t.hsList.length;if(this.hotSpots=[],!n){let e,n;const i=(0,Y.b_)(X._.topSites);this.config.topSitesCloserToSearchBox?(e=i,n=(0,Y.b_)(X._.navBar)):(e=(0,Y.b_)(X._.searchBox),n=i);const r=e?e.getBoundingClientRect().bottom:0,o=n?n.getBoundingClientRect().top:0,a=Math.max(o-r-32,0),s=Math.max(window.outerWidth-64,0);t.hsList.forEach((e=>{if(!e||!e.landscape)return;const t=a*parseFloat(e.landscape.y_percent),n=s*parseFloat(e.landscape.x_percent);if(t+32+16+20<=a&&n+32+8+256<=s){const i={marginTop:r+16+"px",marginLeft:"16px",marginRight:"32px",height:a+"px",width:s+"px",widthOffset:Math.floor(n)+"px",heightOffset:Math.floor(t)+"px"};this.hotSpots.push({data:e,styles:i,icon:G(e.icon),telemetryTags:this.telemetryTags.hotSpots[e.title],onClickHandler:this.irisProvider.hotSpotClickHandler,onMouseEnterHandler:this.irisProvider.hotSpotMouseEnterHandler})}}))}if(!this.telemetryObject||!t)return void(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update");const i=this.museumCard.title?this.museumCard.title:"",o=t.titleLink?t.titleLink:"";this.telemetryTags.cardTitle=this.telemetryObject.addOrUpdateChild({name:"CopyrightLink",behavior:D.wu.Navigate,content:{headline:i},overrideDestinationUrl:o}).getMetadataTag(),this.telemetryTags.dislikeButton=this.telemetryObject.addOrUpdateChild({name:"DisLike",behavior:D.wu.Dislike,content:{headline:i}}).getMetadataTag(),this.telemetryTags.likeButton=this.telemetryObject.addOrUpdateChild({name:"Like",behavior:D.wu.Like,content:{headline:i}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"IrisMuseumCard",behavior:D.wu.Show,content:{headline:"Like this Background?",type:D.uH.Image}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"IrisMuseumCard",behavior:D.wu.Close,content:{headline:"Exit Full View",type:D.uH.Image}}).getMetadataTag();const{hsList:a,creativeId:s}=t;a&&a.forEach((e=>{const t=this.telemetryObject.addOrUpdateChild({name:"HotSpot",content:{headline:(e.cta_type===z.offPageNavigation?`HotSpot_${s}_${e.hs}`:`HotSpot_${e.cta}_${s}_${e.hs}`)+" - "+e.title},type:D.c9.Module,behavior:D.wu.Navigate,action:D.Aw.Click,overrideDestinationUrl:e.cta}).getMetadataTag();this.telemetryTags.hotSpots&&(this.telemetryTags.hotSpots[e.title]=t)})),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}])})),this.updateProperties_noBackground=()=>{this.imageSourceAgent=null,this.museumCard=null,this.imageOverrideStyles="",this.loadComplete()},this.updateProperties_theme=()=>{var e;this.ntpTheme=this.chromiumPageSettingsState.ntpTheme,this.imageSourceAgent=null,this.museumCard=null,this.imageInformationalStyles="",(0,N.N)()?this.imageOverrideStyles=`background-position: ${this.ntpTheme.imageHorizontalAlignment} ${this.ntpTheme.imageVerticalAlignment}; background-repeat: ${this.ntpTheme.imageTiling}; background-image: ${this.ntpTheme.imageUrl}; background-color: ${this.getThemeBackgroundColor()}`:(null===(e=this.ssrBackgroundMetadata)||void 0===e?void 0:e.imageUrl)&&"#"!=this.ssrBackgroundMetadata.imageUrl.charAt(0)?this.imageOverrideStyles=`background-image: ${this.ssrBackgroundMetadata.imageUrl};`:this.imageOverrideStyles=`background-color: ${this.ssrBackgroundMetadata.imageUrl}`,this.ntpTheme&&"repeat"===this.ntpTheme.imageTiling&&(this.imageOverrideStyles+="background-size: auto;"),this.loadComplete()},this.updateProperties_video=()=>{!(0,N.N)()||this.shouldOverrideWithPreviousRotation()?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex.toString()):this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex):this.videoProvider&&this.videoProvider.setVideoAndMuseumCardProperties(),this.imageSourceAgent=this.videoProvider.firstFrameSource,this.museumCard=Object.assign({},this.videoProvider.museumCard),this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.isReducedMotionActive=this.videoProvider.isReducedMotionActive,this.showToast=this.videoProvider.showToast,this.toastMessage=this.videoProvider.toastMessage,this.videoPlaying=this.videoProvider.isPlaying,this.backgroundImageFixedWCStateSyncEventEmit([{key:"videoPlaying",value:this.videoProvider.isPlaying}]),this.videoSource=this.videoProvider.videoSource,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.loadComplete(),this.telemetryObject?(0,N.N)()&&(this.setVideoSecondaryButtonTelemetry(),this.telemetryTags.dislikeButton=this.telemetryObject.addOrUpdateChild({name:"DisLike",behavior:D.wu.Dislike,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.likeButton=this.telemetryObject.addOrUpdateChild({name:"Like",behavior:D.wu.Like,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"LikeBackground",behavior:D.wu.Show,content:{headline:"LikeBackground",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"ExitFullView",behavior:D.wu.Close,content:{headline:"ExitFullView",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}])):(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update")},this.updateProperties_cmsImage=()=>{(0,N.N)()?this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&this.cmsImageProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex):this.cmsImageProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex.toString()),this.imageSourceAgent=this.cmsImageProvider.imageSource,this.museumCard=Object.assign({},this.cmsImageProvider.museumCard),this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:""},this.updateProperties_marqueeAd=()=>{var e,t,n,i,o,a;if(this.marqueeAd){let s;const c=(window.screen&&window.screen.height?window.screen.height:window.innerHeight)*window.devicePixelRatio,d=(window.screen&&window.screen.width?window.screen.width:window.innerWidth)*window.devicePixelRatio>=3840||c>=2160,l=(0,pe.Bn)().currentColumnArrangement;if(l===he.K$.c5&&d)s=this.marqueeAd.images.find((e=>e.type===p.r.HighResolution4K));else{const e={[he.K$.c1]:p.r.C1,[he.K$.c2]:p.r.C2,[he.K$.c3]:p.r.C3,[he.K$.c4]:p.r.C4,[he.K$.c5]:p.r.C5};s=this.marqueeAd.images.find((t=>t.type===e[l]))}if(this.imageSourceAgent=s?s.url:this.marqueeAd.images[0].url,this.museumCard=null,!this.telemetryObject)return void(0,te.H)(r.CgS,"Telemetry object is undefined for bespoke ads update");this.telemetryTags.marqueeAdDismissButton=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdDismissButton",behavior:D.wu.Hide,content:{headline:null===(e=this.marqueeAd)||void 0===e?void 0:e.title,id:null===(t=this.marqueeAd)||void 0===t?void 0:t.clickThroughUrl}}).getMetadataTag(),this.telemetryTags.marqueeAdCTAButton=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdCTAButton",type:D.c9.Interaction,behavior:D.wu.Navigate,content:{headline:null===(n=this.marqueeAd)||void 0===n?void 0:n.ctaText,id:null===(i=this.marqueeAd)||void 0===i?void 0:i.clickThroughUrl}}).getMetadataTag(),this.telemetryTags.marqueeAdSponsorLogo=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdSponsorLogo",type:D.c9.Interaction,behavior:D.wu.Navigate,content:{headline:null===(o=this.marqueeAd)||void 0===o?void 0:o.providerName,id:null===(a=this.marqueeAd)||void 0===a?void 0:a.clickThroughUrl}}).getMetadataTag()}},this.handleGalleryDispositionButtonClick=()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=this.backgroundDataConnector.getCurrentState(),t=null==e?void 0:e.backgroundDispositionMetadata;switch(null==t?void 0:t.actionType){case"like":yield this.handleGalleryLike(null==t?void 0:t.provider);break;case"dislike":yield this.handleGalleryDislike(null==t?void 0:t.provider,null==t?void 0:t.configIndex)}})),this.handleGalleryLike=e=>(0,i.mG)(this,void 0,void 0,(function*(){if("Iris"===e)this.irisProvider.likeClickButtonHandler()})),this.handleGalleryDislike=(e,t)=>(0,i.mG)(this,void 0,void 0,(function*(){let n;switch(e){case"Video":n=this.videoProvider&&this.videoProvider.removeVideoFromLocalStorage(t),n&&this.shouldOverrideWithPreviousRotation()&&this.setCorrectRotationBackground();break;case"Iris":yield this.irisProvider.dislikeClickButtonHandler()}})),this.onClick_secondaryButton=()=>{"Video"===this.currentProvider?this.videoProvider?(this.videoProvider.isPlaying?this.videoProvider.pauseVideo("Button"):this.videoProvider.playVideo("Button"),this.setVideoSecondaryButtonTelemetry(!0)):(0,te.H)(r.$qz,"Video provider not available. Attempted play/pause video"):"Event"===this.currentProvider&&window.open(this.config.event.imageData[this.currentEventCreative].secondaryButton.href)},this.onClick_outsideMuseumCard=e=>{e.composedPath().includes(this.ref_museumCardContainer)||(L.M0.sendActionEvent(this.ref_museumCardButton,D.Aw.Click,D.wu.Close),this.toggleMuseumCardOpen())},this.onClick_openGalleryButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0),this.toggleMuseumCardOpen())},this.onClick_imageEditButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0))},this.onClick_marqueeAdClose=()=>{this.displayMarqueeAd=!1,this.defineCurrentProviderAndSync(),this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1),L.M0.sendActionEvent(this.ref_marqueeAdDismissButton,D.Aw.Click,D.wu.Close)},this.onKeyDown_closeMuseumCard=e=>{"Escape"===e.code&&(L.M0.sendActionEvent(this.ref_museumCardButton,D.Aw.Click,D.wu.Close),this.toggleMuseumCardOpen())},this.onFocusLeave_museumCardButton=()=>{this.museumCreditsCardIsShown&&this.ref_backgroundGalleryButton&&this.ref_backgroundGalleryButton.focus()},this.onFocusLeave_backgroundGalleryButton=()=>{this.museumCreditsCardIsShown&&this.ref_museumCardButton&&this.ref_museumCardButton.focus()},this.onResize=()=>{this.museumCard&&this.calcMuseumBottom(),"Iris"===this.currentProvider&&this.updateProperties(),this.backgroundGalleryEligibility&&this.checkMinimumWidthForGallery()},this.onScroll=(0,T.k)((()=>{this.museumCreditsCardIsShown&&this.toggleMuseumCardOpen();const e=0===window.scrollY;this.museumCard&&(e?(this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.remove("hotSpotContainer_hide"),this.calcMuseumBottom(),this.shouldUpdateMuseumCardVisibility=!0):!e&&this.shouldUpdateMuseumCardVisibility&&(!this.config.bgMuseumCdBtnMoveToBottom&&this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.add("museumCard_hide"),this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.add("hotSpotContainer_hide"),this.shouldUpdateMuseumCardVisibility=!1)),this.displayMarqueeAd&&(e?(this.ref_marqueeAdDismissButtonContainer&&this.ref_marqueeAdDismissButtonContainer.classList.remove("museumCard_hide"),this.calcMuseumBottom(),this.shouldUpdateMarqueeAdDismissButtonVisibility=!0):!e&&this.shouldUpdateMarqueeAdDismissButtonVisibility&&(this.ref_marqueeAdDismissButtonContainer&&this.ref_marqueeAdDismissButtonContainer.classList.add("museumCard_hide"),this.shouldUpdateMarqueeAdDismissButtonVisibility=!1)),"Video"===this.currentProvider&&(e?this.videoProvider.playVideo("Scroll"):this.videoProvider.pauseVideo("Scroll"));const t=window.scrollY>d.FT;if(this.config.noBckImgOnNavSticky){const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType||t;this.updatebackgroundImageOp(e)}}),350),this.onWindowBlur=()=>{this.videoProvider.pauseVideo("Focus")},this.onWindowFocus=()=>{this.videoProvider.playVideo("Focus")},this.updatebackgroundImageOp=e=>{this.shadowRoot.getElementById("backgroundImage")&&(this.shadowRoot.getElementById("backgroundImage").style.opacity=e?"0":"1")},this.dailyRotationEnabled=e=>{var t,n;if(!this.backgroundGalleryEligibility)return(null===(t=this.chromiumPageSettingsState)||void 0===t?void 0:t.currentBackgroundImageType)===c.HX.imageAndVideo||(null===(n=this.chromiumPageSettingsState)||void 0===n?void 0:n.currentBackgroundImageType)===c.HX.bing;const i=this.ssrBackgroundMetadata?this.ssrBackgroundMetadata.provider:this.currentProvider;return(null==e?void 0:e.changeBackgroundDaily)||void 0===this.galleryBackgroundSelectionMetadata&&("Video"===i||"Iris"===i)},this.videoBackgroundsIncludedInRotation=e=>this.backgroundGalleryEligibility?null==e?void 0:e.includeVideoBackgroundsInRotation:this.chromiumPageSettingsState.currentBackgroundImageType===c.HX.imageAndVideo,this.isPotentiallyMismatchedForRotation=e=>this.backgroundGalleryEligibility?this.dailyRotationEnabled(e)&&this.videoBackgroundsIncludedInRotation(e):this.dailyRotationEnabled(e),this.themeChanged=()=>{Z.S.queueUpdate((()=>{this.isDarkMode=(0,ge.Y)()}))},this.handleImageEditEmitListener=()=>{this.onClick_imageEditButton()},this.handleSecondaryEmitListener=()=>{this.onClick_secondaryButton()},this.handleToggleEmitListener=()=>{this.toggleMuseumCardOpen()},this.statesSyncInit=()=>{const e=[];["backgroundGalleryButtonEnabled","currentProvider","museumCreditsCardIsShown","secondaryButtonTelemetryTag","telemetryTags","videoPlaying"].forEach((t=>{e.push({key:t,value:this[t]})})),this.$emit("backgroundImageWCStatesSync",{states:e,init:!0})},this.setMarqueeExtraClassName=e=>{e===he.K$.c1||e===he.K$.c2?this.marqueeAdExtraClass="marqueeAdSmall":this.marqueeAdExtraClass="marqueeAdLarge"}}set imageSourceAgent(e){if(!e&&!this.imageEmptyChecked&&!Oe)switch(this.currentProvider){case"NoBackground":case"Theme":break;default:this.imageEmptyChecked=!0,this.error("No image source")}this.imageSource=e}afterHydration(){this.canRenderNonSsrElements=!0,this.loadComplete(),this.ref_video&&"Video"===this.currentProvider&&this.playVideo()}prerenderRefreshCritical(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.displayMarqueeAd){yield be.o.initializeMarqueeAd(!0);(yield be.o.getMarqueeAdEligibilityAync())&&(this.marqueeAd=be.o.getMarqueeAd())}}))}experienceConnected(){var e,t;return(0,i.mG)(this,void 0,void 0,(function*(){if((0,N.N)()?(this.canRenderNonSsrElements=!this.isSSRRendered,this.imageEditButtonRefPromise=new Promise((e=>this.imageEditButtonRefPromiseResolver=e)),this.videoButtonRefRefPromise=new Promise((e=>this.videoButtonRefPromiseResolver=e))):this.canRenderNonSsrElements=!1,this.config.newStorage&&(yield se.p.loadCMSImageData(),yield se.p.loadCMSVideoData()),this.chromiumPageSettingsConnector=(0,U.K0)(h.z.ChromiumPageSettings),this.isDarkMode=(0,ge.Y)(),this.darkModeQuery.addEventListener("change",this.themeChanged),(0,$.isNullOrUndefined)(this.chromiumPageSettingsConnector)){const e=(0,$.isNullOrUndefined)(this.chromiumPageSettingsConnector);return(0,te.H)(r.B5f,"Data connector missing: ChromiumSettings-"+e),void this.error("Data connectors missing")}this.config.simpleImages&&(se.p.setSimpleImagesandCMSSize(!0,this.config.cmsImage.data.length),this.config.cmsImage.data=this.config.cmsImage.data.concat(this.config.simpleImages.data),this.checkAndGenerateVideoSchedule()),this.config.dailyRotationOnlyImages&&(se.p.setDailyRotationIncludesImages(!0),this.checkAndGenerateImageOnlySchedule());let n=se.p.getBackgroundGalleryEligibility();if(void 0!==n||this.config.disableBackgroundGallery||v.jG.IsFrePage||(yield se.p.initState(R.f.backgroundDataStateLoaded.getActionSender((0,U.K0)(h.z.BackgroundData))),n=se.p.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&!this.isFRE&&se.p&&n,this.backgroundGalleryEligibility&&(this.checkMinimumWidthForGallery(),this.backgroundDataConnector=(0,U.K0)(h.z.BackgroundData),this.galleryBroadcastChannel=new BroadcastChannel(fe.fZ)),this.backgroundGalleryEligibility&&(0,$.isNullOrUndefined)(this.backgroundDataConnector))return(0,te.H)(r.B5f,"Data connector missing: BackgroundData"),void this.error("Data connectors missing");const i=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata);if(i&&i.configIndex){("Video"===i.provider&&this.config.video.data[i.configIndex].removeContent||"CMSImage"===i.provider&&this.config.cmsImage.data[i.configIndex].removeContent)&&(se.p.setBackgroundPreferenceByKey(ie.wI.backgroundSelectionMetadata,void 0),se.p.setBackgroundPreferenceByKey(ie.wI.changeBackgroundDaily,!0),se.p.updateLayoutBasedOnBackgroundType())}if(this.chromiumPageSettingsState=this.chromiumPageSettingsConnector.getCurrentState(),this.isTestRunning="1"===k.c.getQueryParameterByName("forceImageTest",(0,oe.zp)()),this.config.enableMarqueeAd){yield be.o.initializeMarqueeAd();(yield be.o.getMarqueeAdEligibilityAync())&&(this.marqueeAd=be.o.getMarqueeAd(),this.backgroundDataConnector=(0,U.K0)(h.z.BackgroundData),this.displayMarqueeAd=!0,this.setMarqueeExtraClassName((0,pe.Bn)().currentColumnArrangement),(0,pe.Bn)().subscribe((e=>{this.setMarqueeExtraClassName(e),this.syncWithStateChange()})))}if(!(0,N.N)())return this.ssrBackgroundMetadata={provider:C.Al.EdgeNTPHeader.backgroundImage.provider,configIndex:C.Al.EdgeNTPHeader.backgroundImage.configIndex,imageUrl:C.Al.EdgeNTPHeader.backgroundImage.imageUrl},se.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),se.p.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),void this.defineCurrentProviderAndSync();if(this.isSSRBkgd=window.isSSREnabled&&C.Al&&C.Al.CurrentFlightSet&&!C.Al.CurrentFlightSet.has("prg-ssrheader-c"),this.isSSRBkgd){const e=this.backgroundGalleryEligibility&&(yield se.p.getBackgroundPreferences());this.galleryBackgroundSelectionMetadata=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata),this.ssrBackgroundMetadata=yield se.p.getCurrentBackgroundMetadata(),se.p.setCurrentBackgroundPreferenceCache(this.ssrBackgroundMetadata),this.isPotentiallyMismatchedForRotation(e)&&(this.data=this.getVideoData(),this.checkForSSRRotationMismatch(this.data))}if(this.defineCurrentProviderAndSync(),"NoBackground"===this.currentProvider&&this.config.enableBgImagePromotion&&function(e){var t;const n={id:Ie.gz.BackgroundImagePromotion,group:we.V.Functional,placementSource:we.m.Internal,surfaceModel:{surfaceType:Te.U.Coachmark,size:Ie.dm.Medium,position:{coachmarkAnchor:X._.settingsButton,anchoringPosition:Ie.RC.Below,hasPointer:!0,pointerPosition:Ie.Jt.Opposite},dismissAfterSeconds:15},contentModel:{title:(null==e?void 0:e.title)||"Your background image is off.",description:(null==e?void 0:e.description)||"Want to turn it on?",contentType:ke.J.CallToAction,engageContentAction:{label:(null==e?void 0:e.engageButtonLabel)||"Turn on",actionDelegate:Me},dismissContentAction:{label:(null==e?void 0:e.closeButtonLabel)||"Maybe later",actionDelegate:()=>{}}}},i=(0,Pe.l)(Ae.p.Viewed,1);null===(t=(0,xe.$0)())||void 0===t||t.sendInternalPlacement(n,[i])}((null===(t=null===(e=this.config)||void 0===e?void 0:e.localizedStrings)||void 0===t?void 0:t.promotionStrings)||{}),this.isSSRBkgd&&void 0!==this.ssrBackgroundMetadata&&!this.displayMarqueeAd&&(L.M0.addOrUpdateTmplProperty("bkgdSSRProvider",this.currentProvider),void 0!==this.ssrBackgroundMetadata.provider&&this.ssrBackgroundMetadata.provider!==this.currentProvider)){"true"===(0,m.L)().get("mock-ntp-header")||L.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.sFk),{message:"SSR - Edge header mismatch.",pb:Object.assign(Object.assign({},r.sFk.pb),{customMessage:`key: backgroundImage, header: ${this.ssrBackgroundMetadata.provider}, state: ${this.currentProvider}, userSelected: ${this.ssrBackgroundMetadata.userSelected}`})}))}this.createTelemetryTags(),l.J.updateLayout.registerObserver((()=>{this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.add("hotSpotContainer_hide"),window.setTimeout((()=>{this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.remove("hotSpotContainer_hide"),this.syncWithStateChange()}),500)})),ee.V.updateNtpTheme.registerObserver((()=>{this.syncWithStateChange()})),g.I.layoutAnimationComplete.registerObserver((()=>{this.animationComplete()})),this.backgroundGalleryEligibility&&(R.f.backgroundDispositionUpdated.registerObserver((()=>{this.handleGalleryDispositionButtonClick()})),R.f.updateGallerySelectedBackground.registerObserver((()=>{this.handleGalleryBackgroundSelection()})),R.f.refreshBackgroundMetadata.registerObserver((()=>{this.handleBackgroundRefresh()})),(0,ve.Uo)(h.z.BackgroundData,(e=>{this.renderHotSpots=e.shouldRenderHotSpots}))),this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onScroll),this.config.displayFloatButtonGroup&&(window.addEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.addEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.addEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.setTimeout((()=>this.statesSyncInit())))}))}disconnectedCallback(){if(super.disconnectedCallback(),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),this.config.displayFloatButtonGroup&&(window.removeEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.removeEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.removeEventListener("backgroundImageWCToggle",this.handleToggleEmitListener)),"Video"===this.currentProvider)window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.darkModeQuery.removeEventListener("change",this.themeChanged)}getExperienceType(){return u.x.backgroundImageWC}shadowDomPopulated(){var e,t,n,i;this.syncWithStateChange(),(0,Y.h_)(X._.headerSpaceHolder).then((e=>{var t;(t=this.syncWithStateChange,new ResizeObserver(t)).observe(e),this.calcMuseumBottom(),this.displayMarqueeAd&&(0,de.eC)().then((()=>{be.o.sendBeacons(this.marqueeAd.adViewedUrls),L.M0.sendContentViewEvent(this.ref_marqueeAdTemplate,Q.NS.View),L.M0.sendClientLogEvent({message:"Marquee Ad viewed",type:"information"})}))})),(null===(t=null===(e=this.config)||void 0===e?void 0:e.bgImageEditPromotion)||void 0===t?void 0:t.enabled)&&this.promoteImageEditButton(),(null===(i=null===(n=this.config)||void 0===n?void 0:n.bgImageVideoPromotion)||void 0===i?void 0:i.enabled)&&this.promoteVideoButton()}imageEditButtonRefChanged(e,t){t&&this.imageEditButtonRefPromiseResolver(t)}videoButtonRefChanged(e,t){t&&this.videoButtonRefPromiseResolver(t)}promoteImageEditButton(){var e,t,n,r;return(0,i.mG)(this,void 0,void 0,(function*(){if((null===(t=null===(e=this.config)||void 0===e?void 0:e.bgImageEditPromotion)||void 0===t?void 0:t.informationalExcluded)&&this.isFeedDisplayAlwaysOn)return;let i;this.config.displayFloatButtonGroup?i=null!==(n=yield(0,Y.h_)(X._.imageEditButton))&&void 0!==n?n:this.imageEditButtonRef:(yield this.imageEditButtonRefPromise,i=this.imageEditButtonRef);!function(e,t,n){var i;const r={id:Ie.gz.BackgroundImageEditPromotion,group:we.V.Functional,placementSource:we.m.Internal,surfaceModel:{surfaceType:Te.U.Coachmark,size:Ie.dm.Medium,position:{coachmarkAnchor:e,anchoringPosition:Ie.RC.Above,hasPointer:!0,pointerPosition:Ie.Jt.Opposite},dismissAfterSeconds:15},contentModel:{title:(null==n?void 0:n.title)||"Want a change of scenery?",description:(null==n?void 0:n.description)||"Try a new background image.",contentType:ke.J.CallToAction,engageContentAction:{label:(null==n?void 0:n.engageButtonLabel)||"See gallery",actionDelegate:t},dismissContentAction:{label:(null==n?void 0:n.closeButtonLabel)||"No thanks",actionDelegate:()=>{}}}},o=(0,Pe.l)(Ae.p.Viewed,1);null===(i=(0,xe.$0)())||void 0===i||i.sendInternalPlacement(r,[o])}(i,this.onClick_imageEditButton.bind(this),(null===(r=this.config.localizedStrings)||void 0===r?void 0:r.editPromotionStrings)||{})}))}promoteVideoButton(){var e,t,n,r,o;return(0,i.mG)(this,void 0,void 0,(function*(){if(!((null===(t=null===(e=this.config)||void 0===e?void 0:e.bgImageVideoPromotion)||void 0===t?void 0:t.informationalExcluded)&&this.isFeedDisplayAlwaysOn||"Video"!==this.currentProvider||this.videoPlaying)){let e;this.config.displayFloatButtonGroup?e=null!==(n=yield(0,Y.h_)(X._.videoPlayButton))&&void 0!==n?n:this.videoButtonRef:(yield this.videoButtonRefRefPromise,e=this.videoButtonRef);!function(e,t,n){var i;const r={id:Ie.gz.BackgroundImageVideoPromotion,group:we.V.Functional,placementSource:we.m.Internal,surfaceModel:{surfaceType:Te.U.Coachmark,size:Ie.dm.Medium,position:{coachmarkAnchor:e,anchoringPosition:Ie.RC.Above,hasPointer:!0,pointerPosition:Ie.Jt.Opposite},dismissAfterSeconds:15},contentModel:{title:(null==n?void 0:n.title)||"Want to see this image move?",description:(null==n?void 0:n.description)||"Play this inspiring background video now!",contentType:ke.J.CallToAction,engageContentAction:{label:(null==n?void 0:n.engageButtonLabel)||"Try it",actionDelegate:t},dismissContentAction:{label:(null==n?void 0:n.closeButtonLabel)||"Maybe later",actionDelegate:()=>{}}}},o=(0,Pe.l)(Ae.p.Viewed,1);null===(i=(0,xe.$0)())||void 0===i||i.sendInternalPlacement(r,[o])}(e,this.onClick_secondaryButton.bind(this),(null===(o=null===(r=this.config)||void 0===r?void 0:r.localizedStrings)||void 0===o?void 0:o.videoPromotionStrings)||{})}}))}checkAndGenerateVideoSchedule(){const e=this.getVideoData();if(e&&e.schedule){this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed;let t=!1;for(let e=0;e<this.schedule.length;e++)if(this.config.simpleImages.data.length-1<this.schedule[e]){const n=Math.floor(Math.random()*this.config.simpleImages.data.length);this.schedule[e]=n,t=!0}t&&(this.scheduleFixed=this.schedule,this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed}))}}checkAndGenerateImageOnlySchedule(){const e=this.getVideoData();e&&e.schedule?(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed):(this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1]);for(let e=0;e<this.schedule.length;e++)if(-1==this.schedule[e]||this.schedule[e]>-1&&this.config.cmsImage.data.length-1<this.schedule[e]){const t=Math.floor(Math.random()*this.config.cmsImage.data.length);this.schedule[e]=t}this.scheduleFixed=this.schedule,this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getVideoData(){try{return(0,P.$o)().getObject(this.storageKey)}catch(e){return(0,te.H)(r.eEQ,"Local storage for video data failed."),null}}storeVideoData(e){try{(0,P.$o)().setObject(this.storageKey,e)}catch(e){return void(0,te.H)(r.ybt,"Local storage for video data failed.")}}getHeaderSpaceHolderHeight(){const e=(0,Y.b_)(X._.headerSpaceHolder);return e?e.offsetHeight:this.spaceHolderHeight}checkMinimumWidthForGallery(){this.backgroundGalleryButtonEnabled=window.innerWidth>ie.Gb,this.backgroundImageFixedWCStateSyncEventEmit([{key:"backgroundGalleryButtonEnabled",value:this.backgroundGalleryButtonEnabled}])}getThemeBackgroundColor(){var e,t;let n=null;const i=null===(t=null===(e=this.chromiumPageSettingsState)||void 0===e?void 0:e.ntpTheme)||void 0===t?void 0:t.backgroundColorRgba;if(!i||i.length<4)return null;const r={r:i[0],g:i[1],b:i[2],a:i[3]};return n=me.g.rgbNumberToCssHexColor(me.g.parsedColorToNumber(r)),n}setVideoSecondaryButtonTelemetry(e){!e||this.telemetryObject?(this.secondaryButtonTelemetryTag=this.videoPlaying?this.telemetryObject.addOrUpdateChild({name:"Pause",behavior:D.wu.Pause,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag():this.telemetryObject.addOrUpdateChild({name:"Play",behavior:D.wu.Play,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}])):(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update")}saveBackgroundPref(e,t){if(!(0,N.N)()||this.displayMarqueeAd||"Error"===e||"Event"===e)return;const n=this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&("Video"==e||"Iris"==e);switch(e){case"Iris":this.setCurrentBackgroundMetadata({provider:e,userSelected:n,imageUrl:this.irisProvider.newIrisSurfaceInfo&&this.isSSRBkgd?this.irisProvider.getNewImageUrl():this.irisProvider.irisImageURL});break;case"Video":this.setCurrentBackgroundMetadata({provider:e,userSelected:n,configIndex:t||this.videoProvider.videoId});break;case"BrowserLocal":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0,imageUrl:this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl});break;case"Theme":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0,imageUrl:this.getThemeBackgroundInfo(this.ntpTheme)});break;case"CMSImage":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0,configIndex:this.cmsImageProvider.imageId});break;case"NoBackground":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0});break;default:this.setCurrentBackgroundMetadata({provider:e})}se.p.getCurrentBackgroundMetadata()}handleGalleryBackgroundSelection(){const e=this.backgroundDataConnector.getCurrentState();if(!e)return;const t=this.currentProvider;switch(this.galleryBackgroundSelectionMetadata=e.backgroundSelectionMetadata,this.galleryBackgroundSelectionMetadata.provider){case"Video":this.currentProvider="Video";break;case"Iris":this.currentProvider="Iris";break;case"BrowserLocal":this.currentProvider="BrowserLocal";break;case"CMSImage":this.currentProvider="CMSImage"}this.videoProvider&&"Video"===this.currentProvider&&(this.videoProvider.isPlaying=!1),t===this.currentProvider&&(this.isLoadComplete=!1,this.updateProperties()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}handleBackgroundRefresh(){this.defineCurrentProviderAndSync(),"Video"===this.currentProvider&&(this.videoProvider.setVideoAndMuseumCardProperties(),this.videoProvider.isPlaying=!1,this.isLoadComplete=!1),this.updateProperties()}onClick_dislikeButton(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.museumCard=Object.assign(Object.assign({},this.museumCard),{irisButtons:Object.assign(Object.assign({},this.museumCard.irisButtons),{dislikeClicked:!0})}),window.setTimeout((()=>{this.museumCard=Object.assign(Object.assign({},this.museumCard),{irisButtons:Object.assign(Object.assign({},this.museumCard.irisButtons),{dislikeClicked:!1,likeClicked:!1})})}),3e3),"Video"===this.currentProvider)this.videoProvider.removeVideoForToday(),this.currentProvider="Iris";else yield this.irisProvider.dislikeClickButtonHandler();this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}))}onClick_dismissButton(){this.eventLocalStorage.dismissCreative(this.config.event.eventId,u.x.backgroundImageWC,this.currentEventCreative,r.LXY),this.defineCurrentProviderAndSync()}onClick_likeButton(){if(this.museumCard=Object.assign(Object.assign({},this.museumCard),{irisButtons:Object.assign(Object.assign({},this.museumCard.irisButtons),{likeClicked:!0})}),"Video"===this.currentProvider);else this.irisProvider.likeClickButtonHandler()}onClick_MarqueeAdCTAButton(){return(0,i.mG)(this,void 0,void 0,(function*(){yield this.onClick_MarqueeAd(this.ref_marqueeAdCTAButton)}))}onClick_MarqueeAdSponsorLogo(){return(0,i.mG)(this,void 0,void 0,(function*(){yield this.onClick_MarqueeAd(this.ref_marqueeAdSponsorLogo)}))}onClick_MarqueeAd(e){return(0,i.mG)(this,void 0,void 0,(function*(){window.open(this.marqueeAd.clickThroughUrl,"_blank").focus(),yield be.o.sendBeacons(this.marqueeAd.adClickedUrls),L.M0.sendActionEvent(e,D.Aw.Click,D.wu.Navigate)}))}getStyleForElementKey(e){var t;return null===(t=(0,Y.b_)(e))||void 0===t?void 0:t.style}checkInformataionalFlight(){return this.config.informationalFlightOnly&&this.chromiumPageSettingsState.currentLayout==c.nP.informational}setProviderForRotation(){this.config.setBkgdOffInformational&&this.checkInformataionalFlight()?this.currentProvider="NoBackground":this.currentProvider="Iris",this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}getThemeBackgroundInfo(e){return e?e.backgroundColorRgba&&!e.imageUrl?this.getThemeBackgroundColor():e.imageUrl?e.imageUrl:void 0:""}checkAndCreateIrisProvider(){if(!this.irisProvider){const e=(0,ae.zz)(this.config.fallbackImageId,{width:0,height:0,enableDpiScaling:!1});this.irisProvider=this.backgroundGalleryEligibility?new W(this.backgroundDataConnector,e,this.updateProperties,!0,this.strings.irisFallbackTitle):new W(this.chromiumPageSettingsConnector,e,this.updateProperties)}}checkAndCreateVideoProvider(){this.videoProvider||(this.videoProvider=new le(this.config.video,this))}checkAndCreateCMSImageProvider(){this.cmsImageProvider||(this.cmsImageProvider=new ye(this.config.cmsImage,this))}setCurrentBackgroundMetadata(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.isCurrentBackgroundMetadataLoaded&&!(0,Ce.Z)(this.currentBackgroundMetadata,e)&&(this.currentBackgroundMetadata=e,se.p.setCurrentBackgroundMetadata(this.currentBackgroundMetadata))}))}setCorrectRotationBackground(){const e=this.backgroundGalleryEligibility?se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation):this.chromiumPageSettingsState.currentBackgroundImageType===c.HX.imageAndVideo;this.data=this.getVideoData();const t=this.data.schedule[this.dayNow];e&&-1!=t?!this.config.simpleImages&&!this.config.dailyRotationOnlyImages||this.config.informationalFlightOnly&&!this.checkInformataionalFlight()?(this.checkAndCreateVideoProvider(),this.saveBackgroundPref("Video",t)):(this.checkAndCreateCMSImageProvider(),this.saveBackgroundPref("CMSImage",t)):(this.checkAndCreateIrisProvider(),this.saveBackgroundPref("Iris"))}shouldOverrideWithPreviousRotation(){if(!this.isSSRBkgd||this.displayMarqueeAd)return!1;if(!this.backgroundGalleryEligibility)return this.ssrRotationMismatch&&this.dailyRotationEnabled()&&this.ssrPageLoadMismatchBackgroundType===this.ssrModifiedMismatchBackgroundType;const e=this.chromiumPageSettingsState&&this.chromiumPageSettingsState.currentBackgroundImageType===c.HX.off,t=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.changeBackgroundDaily)||void 0===this.galleryBackgroundSelectionMetadata&&("Video"===this.ssrBackgroundMetadata.provider||"Iris"===this.ssrBackgroundMetadata.provider),n=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation);return this.ssrRotationMismatch&&!e&&t&&n}checkForSSRRotationMismatch(e){e&&e.schedule&&(!this.backgroundGalleryEligibility&&this.isRotationMismatchWithoutGallery()?(se.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0,this.ssrPageLoadMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType,this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType):("Video"===this.ssrBackgroundMetadata.provider&&this.data.schedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex||"Iris"===this.ssrBackgroundMetadata.provider&&-1!==this.data.schedule[this.dayNow])&&(se.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0))}isRotationMismatchWithoutGallery(){return"Video"===this.ssrBackgroundMetadata.provider?this.chromiumPageSettingsState.currentBackgroundImageType!==c.HX.imageAndVideo||this.data.schedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex:"Iris"===this.ssrBackgroundMetadata.provider&&(this.chromiumPageSettingsState.currentBackgroundImageType===c.HX.imageAndVideo&&-1!==this.data.schedule[this.dayNow])}get backgroundMuseumCarddBtnMoveToBottom(){return this.config.bgMuseumCdBtnMoveToBottom&&!this.museumCreditsCardIsShown}backgroundImageFixedWCStateSyncEventEmit(e){this.config.displayFloatButtonGroup&&this.$emit("backgroundImageWCStatesSync",{states:e})}}(0,i.gn)([K.LO],Le.prototype,"currentProvider",void 0),(0,i.gn)([K.LO],Le.prototype,"hotSpots",void 0),(0,i.gn)([K.LO],Le.prototype,"imageInformationalStyles",void 0),(0,i.gn)([K.LO],Le.prototype,"imageOverrideStyles",void 0),(0,i.gn)([K.LO],Le.prototype,"imageSource",void 0),(0,i.gn)([K.LO],Le.prototype,"isReducedMotionActive",void 0),(0,i.gn)([K.LO],Le.prototype,"isLoadComplete",void 0),(0,i.gn)([K.LO],Le.prototype,"museumBottom",void 0),(0,i.gn)([K.LO],Le.prototype,"museumCard",void 0),(0,i.gn)([K.LO],Le.prototype,"museumCreditsCardIsShown",void 0),(0,i.gn)([K.LO],Le.prototype,"showToast",void 0),(0,i.gn)([K.LO],Le.prototype,"telemetryTags",void 0),(0,i.gn)([K.LO],Le.prototype,"toastMessage",void 0),(0,i.gn)([K.LO],Le.prototype,"videoPlaying",void 0),(0,i.gn)([K.LO],Le.prototype,"videoSource",void 0),(0,i.gn)([(0,J.Lj)({converter:J.Id})],Le.prototype,"spaceHolderHeight",void 0),(0,i.gn)([(0,J.Lj)({mode:"boolean"})],Le.prototype,"showFullPageBlur",void 0),(0,i.gn)([J.Lj],Le.prototype,"bgBlurSize",void 0),(0,i.gn)([(0,J.Lj)({mode:"boolean"})],Le.prototype,"displayMarqueeAd",void 0),(0,i.gn)([(0,J.Lj)({converter:J.Id})],Le.prototype,"marqueeAdTopHeight",void 0),(0,i.gn)([(0,J.Lj)({converter:J.Id})],Le.prototype,"marqueeAdHeight",void 0),(0,i.gn)([(0,J.Lj)({converter:J.Id})],Le.prototype,"marqueeAdOverlayHeight",void 0),(0,i.gn)([K.LO],Le.prototype,"marqueeAd",void 0),(0,i.gn)([K.LO],Le.prototype,"marqueeAdExtraClass",void 0),(0,i.gn)([K.LO],Le.prototype,"secondaryButtonTelemetryTag",void 0),(0,i.gn)([K.LO],Le.prototype,"imageEditButtonTelemetryTag",void 0),(0,i.gn)([K.LO],Le.prototype,"renderHotSpots",void 0),(0,i.gn)([K.LO],Le.prototype,"backgroundGalleryButtonEnabled",void 0),(0,i.gn)([K.LO],Le.prototype,"canRenderNonSsrElements",void 0),(0,i.gn)([K.LO],Le.prototype,"isDarkMode",void 0),(0,i.gn)([(0,J.Lj)({converter:J.Id})],Le.prototype,"overlapState",void 0),(0,i.gn)([K.LO],Le.prototype,"imageEditButtonRef",void 0),(0,i.gn)([K.LO],Le.prototype,"videoButtonRef",void 0);const De=()=>`https://assets.msn.${v.jG.topDomain}/staticsb/statics/latest/common/icons/`;var Re=n(49218),Fe=n(41472),Be=n(93703),Ne=n(89150),Ue=n(56618),$e=n.n(Ue),_e=n(41990),He=n.n(_e),We=n(14289),je=n.n(We),Ge=n(13622),Ve=n.n(Ge),qe=n(6014),ze=n.n(qe),Qe=n(7143),Ze=n.n(Qe),Ke=n(42798),Je=n(93638),Xe=n.n(Je),Ye=n(14547),et=n.n(Ye),tt=n(76858);Ke.Z;const nt=Re.dy`<p class="irisResponse">${e=>e.strings.irisResponse}</p>`,it=Re.dy`<img class="picture" id="backgroundImagePicture" src=${e=>e.imageSource} style=${e=>e.imageOverrideStyles+e.imageInformationalStyles} @load=${e=>e.loadComplete()} @error=${e=>e.error(e.imageSource)}></img>`,rt=Re.dy`<div class="museumButtonContainer" ${(0,Fe.i)("ref_museumButtonContainer")}><fluent-button appearance="stealth" class="irisButton" data-t="${e=>e.telemetryTags&&e.telemetryTags.dismissButton}" id="like" @click="${e=>e.onClick_dismissButton()}"><span slot="start">${Re.dy.partial($e())}</span><div class="irisButtonTitle">${e=>e.strings.dismissTitle}</div></fluent-button></div>`,ot=Re.dy`<div class="museumButtonContainer" ${(0,Fe.i)("ref_museumButtonContainer")}><fluent-button appearance="stealth" class="irisButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.likeButton}}" id="like" @click="${e=>e.onClick_likeButton()}"><span slot="start">${Re.dy.partial(je())}</span><div><div class="irisButtonTitle">${e=>e.strings.irisLikeTitle}</div><div class="irisButtonSubtitle">${e=>e.strings.irisLikeSubTitle}</div></div></fluent-button><fluent-button appearance="stealth" class="irisButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.dislikeButton}}" id="dislike" @click="${e=>e.onClick_dislikeButton()}"><span slot="start">${Re.dy.partial(He())}</span><div class="irisButtonTitle">${e=>e.strings.irisDislikeTitle}</div><div class="irisButtonSubtitle">${e=>e.strings.irisDislikeSubTitle}</div></fluent-button></div>`,at=Re.dy`<div class="backgroundGalleryButtonContainer"><fluent-button appearance="outline" class="backgroundGalleryButton" @click=${e=>e.onClick_openGalleryButton()} @focusout=${e=>e.onFocusLeave_backgroundGalleryButton()} title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" ?disabled=${e=>!e.backgroundGalleryButtonEnabled} data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.backgroundGalleryButton}}" ${(0,Fe.i)("ref_backgroundGalleryButton")}><span class="backgroundGalleryButtonText">${e=>e.strings.backgroundGalleryButtonText}</span></fluent-button></div>`,st=Re.dy`<div class="museumCardCreditsContainer" ${(0,Fe.i)("ref_museumCreditsContainer")}><div class="museumCardTitleContainer">${(0,Be.g)((e=>e.museumCard.titleURL),Re.dy`<a class="museumCardTitle museumCardTitleAnchor" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.cardTitle}}" href="${e=>e.museumCard.titleURL}" target="_blank">${e=>e.museumCard.title}</a>`)} ${(0,Be.g)((e=>!e.museumCard.titleURL),Re.dy`<p class="museumCardTitle">${e=>e.museumCard.title}</p>`)}<p class="museumCardCredits ${e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider?"backgroundGallery":""}">${e=>e.museumCard.credits}</p></div>${(0,Be.g)((e=>!e.backgroundGalleryEligibility||"Event"===e.currentProvider),Re.dy`<div class="museumCardDivider"></div>${(0,Be.g)((e=>"Event"!==e.currentProvider&&!e.museumCard.irisButtons.likeClicked&&!e.museumCard.irisButtons.dislikeClicked),ot)} ${(0,Be.g)((e=>"Event"!==e.currentProvider&&e.museumCard.irisButtons.likeClicked||e.museumCard.irisButtons.dislikeClicked),nt)} ${(0,Be.g)((e=>"Event"===e.currentProvider),rt)}</div>`)} ${(0,Be.g)((e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider),Re.dy`<div class="copyrightContainer">${e=>` ${e.strings.copyrightText}`}</div>${at} `)}
`,ct=Re.dy`<fluent-button class="backgroundButton ${e=>e.museumCreditsCardIsShown?"backgroundButton_active":""} ${e=>e.showFullPageBlur?"blurbg":""}" ${(0,Fe.i)("imageEditButtonRef")} data-t="${e=>e.imageEditButtonTelemetryTag}" id="imageEditButton" @click="${e=>e.onClick_imageEditButton()}" title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" aria-label="${e=>e.strings.backgroundGalleryButtonText}"><span slot="start">${(0,Be.g)((e=>e.backgroundMuseumCarddBtnMoveToBottom),Re.dy`<img src="${e=>e.showFullPageBlur&&!e.isDarkMode?`${De()}EditImageBlack.svg`:`${De()}EditImageWhite.svg`}">`,Re.dy`${Re.dy.partial(Ve())}`)}</span></fluent-button>`,dt=Re.dy`<fluent-button ${(0,Fe.i)("videoButtonRef")} appearance=${e=>"Event"===e.currentProvider?"hypertext":"neutral"} class="backgroundButton ${e=>e.museumCreditsCardIsShown?"backgroundButton_active":""} ${e=>e.showFullPageBlur?"blurbg":""}" data-t="${e=>e.secondaryButtonTelemetryTag}" id="secondaryButton" href=${e=>"Event"===e.currentProvider?e.config.event.imageData[e.currentEventCreative].secondaryButton.href:""} @click="${e=>e.onClick_secondaryButton()}" title="${e=>e.videoPlaying?e.strings.video_pause:e.strings.video_play}" aria-label="${e=>e.videoPlaying?e.strings.video_pause:e.strings.video_play}">${(0,Be.g)((e=>"Video"===e.currentProvider),Re.dy` ${(0,Be.g)((e=>e.videoPlaying),Re.dy`${(0,Be.g)((e=>e.backgroundMuseumCarddBtnMoveToBottom),Re.dy`<img src="${e=>e.showFullPageBlur&&!e.isDarkMode?`${De()}PauseBlack.svg`:`${De()}PauseWhite.svg`}">`,Re.dy`<span slot="start">${Re.dy.partial(Xe())}</span>`)}`)} ${(0,Be.g)((e=>!e.videoPlaying),Re.dy`${(0,Be.g)((e=>e.backgroundMuseumCarddBtnMoveToBottom),Re.dy`<img src="${e=>e.showFullPageBlur&&!e.isDarkMode?`${De()}PlayBlack.svg`:`${De()}PlayWhite.svg`}">`,Re.dy`<span slot="start">${Re.dy.partial(et())}</span>`)}`)} `)} ${(0,Be.g)((e=>"Event"===e.currentProvider),Re.dy`<a href=${e=>e.config.event.imageData[e.currentEventCreative].secondaryButton.href} class="backgroundButtonText secondaryButtonAnchor">${(0,Be.g)((e=>"Event"===e.currentProvider),Re.dy` ${e=>e.config.event.useCommonIdForLocString?e.strings.events[e.config.event.eventId+"Button"]:e.strings.events[e.config.event.imageData[e.currentEventCreative].secondaryButton.id]} `)}</a>`)}</fluent-button>`,lt=Re.dy` ${(0,Be.g)((e=>e.museumCreditsCardIsShown),st)}<fluent-button class="backgroundButton ${e=>e.museumCreditsCardIsShown?"backgroundButton_active":""} ${e=>e.showFullPageBlur?"blurbg":""}" data-t="${e=>{var t,n;return e.museumCreditsCardIsShown?null===(n=e.telemetryTags)||void 0===n?void 0:n.title_cardShown:null===(t=e.telemetryTags)||void 0===t?void 0:t.title_cardHidden}}" id="museumCardButton" @click="${e=>e.toggleMuseumCardOpen()}" @focusout=${e=>e.onFocusLeave_museumCardButton()} title="${e=>e.museumCreditsCardIsShown?e.strings.museumCardExpanded:e.strings.museumCardCollapsed}" aria-label="${e=>e.museumCreditsCardIsShown?e.strings.museumCardExpanded:e.strings.museumCardCollapsed}" aria-expanded="${e=>e.museumCreditsCardIsShown}" ${(0,Fe.i)("ref_museumCardButton")}>${e=>e.museumCreditsCardIsShown?Re.dy`<span slot="start">${Re.dy.partial(Ze())}</span>`:Re.dy`${(0,Be.g)((e=>e.config.bgMuseumCdBtnMoveToBottom),Re.dy`<img src="${e=>e.showFullPageBlur&&!e.isDarkMode?`${De()}ZoomBlack.svg`:`${De()}ZoomWhite.svg`}">`,Re.dy`<span slot="start">${Re.dy.partial(ze())}</span>`)}`}</fluent-button>`,ut=(0,Be.g)((e=>e.museumCard&&e.museumBottom>0&&e.canRenderNonSsrElements),Re.dy`<div class="museumCard ${e=>!e.museumCreditsCardIsShown&&e.config.bgMuseumCdBtnMoveToBottom?"museumCardVertical":""} ${e=>!e.config.bgMuseumCdBtnMoveToBottom||e.museumCreditsCardIsShown||e.config.bgMuseumCdBtnMoveToBottom&&0==e.overlapState?"":"museumCardVerticalHide"}" style="${e=>`bottom:${e.museumBottom}px`}" ${(0,Fe.i)("ref_museumCardContainer")}>${lt} ${(0,Be.g)((e=>e.backgroundGalleryButtonEnabled),ct)} ${(0,Be.g)((e=>{var t;return"Video"===e.currentProvider||"Event"===e.currentProvider&&(null===(t=e.config.event)||void 0===t?void 0:t.imageData[e.currentEventCreative].secondaryButton)}),dt)}</div>`),pt=Re.dy`<span class="${e=>e.config&&e.config.wholePageOpacity?"overlayTranslucent":"overlay"} ${e=>e.museumCreditsCardIsShown||"Theme"===e.currentProvider&&e.config&&!e.config.wholePageOpacity?"overlay_hide":""} ${e=>e.showFullPageBlur&&!e.museumCreditsCardIsShown?"windowsBlur":""}" data-mscc-ic="false" id="backgroundImageOverlay" style="${e=>e.showFullPageBlur&&!e.museumCreditsCardIsShown&&e.bgBlurSize?`backdrop-filter: blur(${e.bgBlurSize});`:""}" ${(0,Fe.i)("ref_backgroundOverlay")}></span>${(0,Be.g)((e=>e.config&&!e.config.removeOverlayGradient&&!e.museumCreditsCardIsShown),Re.dy`<span class="overlayGradient ${e=>e.showFullPageBlur?"overlayGradientTranslucent":""}"></span>`)}
`,ht=Re.dy`<fluent-button class="backgroundButton opaqueOnRest" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdDismissButton}}" id="marqueeAdDismissButton" @click="${e=>e.onClick_marqueeAdClose()}" title="${e=>e.strings.dismissMarqueeAdText}" aria-label="${e=>e.strings.dismissMarqueeAdText}" ${(0,Fe.i)("ref_marqueeAdDismissButton")}><span slot="start"><img src="https://assets.msn.com/staticsb/statics/latest/icons-wc/CloseButton.svg" alt="Close button" aria-hidden="true" /></span><p class="backgroundButtonText">${e=>e.strings.dismissMarqueeAdText}</p></fluent-button>`,gt=Re.dy`<div class="marqueeAdDismissButtonContainer" style="${e=>`bottom:${e.museumBottom}px`}" ${(0,Fe.i)("ref_marqueeAdDismissButtonContainer")}>${ht}</div>`,mt=(0,Be.g)((e=>e.marqueeAd),Re.dy`<div ${(0,Fe.i)("ref_marqueeAdTemplate")} data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdTemplate}}" class="${e=>`marqueeAdOverlay ${e.marqueeAdExtraClass}`}" style="${e=>`height: ${e.marqueeAdOverlayHeight}px; top: ${e.marqueeAdTopHeight}px;`}"><div class="marqueeAdContainer" style="${e=>`height: ${e.marqueeAdHeight}px;`}"><div class="marqueeAdSponsor"><div>${e=>e.strings.marqueeAdSponsorText}</div><fluent-button @click=${e=>e.onClick_MarqueeAdSponsorLogo()} class="marqueeAdSponsorLogo" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdSponsorLogo}}" title="${e=>e.marqueeAd.providerName}" aria-label="${e=>e.marqueeAd.providerName}" ${(0,Fe.i)("ref_marqueeAdSponsorLogo")}><img class="marqueeAdSponsorLogoImage" src="${e=>e.marqueeAd.sponsorLogoImageUrl}" /></fluent-button></div><div class="marqueeAdContent"><div class="marqueeAdTitle">${e=>e.marqueeAd.title}</div><div class="marqueeAdCTAButtonContainer"><fluent-button @click=${e=>e.onClick_MarqueeAdCTAButton()} class="marqueeAdCTA" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdCTAButton}}" title="${e=>e.marqueeAd.ctaText}" aria-label="${e=>e.marqueeAd.ctaText}" ${(0,Fe.i)("ref_marqueeAdCTAButton")}>${e=>e.marqueeAd.ctaText}</fluent-button></div></div></div></div>`),ft=e=>!e.config.displayFloatButtonGroup||e.museumCreditsCardIsShown,vt=Re.dy` ${it} ${pt}
`,yt=Re.dy` ${it} ${pt}
`,St=Re.dy` ${it} ${pt}
`,Ct=Re.dy` ${it} ${pt} ${(0,Be.g)(ft,Re.dy`${ut}`)}
`,bt=Re.dy` ${it} ${pt} ${mt} ${gt}
`,wt=Re.dy`<svg role="img" viewBox="${e=>e.icon.viewBoxString}" xmlns="http://www.w3.org/2000/svg"><path d="${e=>e.icon.svgString}" fill="#fff" /></svg>`,Tt=Re.dy`<div class="hotSpotRenderRegion" id = "hotspots" style="margin-top:${e=>e.styles.marginTop}; margin-left:${e=>e.styles.marginLeft}; margin-right:${e=>e.styles.marginRight}; height:${e=>e.styles.height}; width:${e=>e.styles.width};"><div class="hotSpot" data-t="${e=>e.telemetryTags}" style="left: ${e=>e.styles.widthOffset}; top: ${e=>e.styles.heightOffset};" @mouseenter="${(e,t)=>null==e?void 0:e.onMouseEnterHandler(null==t?void 0:t.event)}"><a class="hotSpot hotSpotAccess" href="${e=>e.data.cta}" target="_blank" @click="${(e,t)=>e.onClickHandler&&e.onClickHandler(e.data,t)}"><div class="hotSpotSpot hotSpotClickable">${e=>""===e.icon.svgString?Re.dy`<img src="${`${De()}HotSpotIconMeetNow.svg`}" alt="Hot spot icon meet now" aria-hidden="true">`:wt}</div><div class="hotSpotTextArea hotSpotClickable">${e=>e.data.title}<div class="hotSpotSubTextArea">${e=>e.data.text}</div></div></a></div></div>`,kt=Re.dy` ${it} ${pt} ${(0,Be.g)(ft,Re.dy`${ut}`)} ${(0,Be.g)((e=>!e.museumCreditsCardIsShown&&e.renderHotSpots&&e.canRenderNonSsrElements),Re.dy`<div class="hotSpotContainer" ${(0,Fe.i)("ref_hotSpotsContainer")}>${(0,Ne.rx)((e=>e.hotSpots),Tt)}</div>`)}`,Pt=Re.dy` ${it} ${pt}
`,At=Re.dy`<msn-toast class="toast" style="${e=>`bottom:${e.museumBottom}px`}">${e=>e.toastMessage}</msn-toast>`,It=Re.dy`<video class="video" loop muted src="${e=>e.videoSource}" poster="${e=>e.imageSource}" style=${e=>e.imageInformationalStyles} @canplaythrough=${e=>e.playVideo()} @error=${e=>e.error(e.videoSource)} ${(0,Fe.i)("ref_video")}></video>`,Et=Re.dy` ${(0,Be.g)((e=>e.imageSource||e.videoSource),Re.dy` ${It} ${pt} ${(0,Be.g)(ft,Re.dy`${ut}`)} ${(0,Be.g)((e=>e.showToast&&e.canRenderNonSsrElements),At)} `)}
`,xt=Re.dy` ${it} ${pt} ${(0,Be.g)(ft,Re.dy`${ut}`)}
`,Mt=Re.dy`<div class="backgroundImage" id="backgroundImage">${e=>{switch(e.currentProvider){case"BrowserLocal":return vt;case"FREBackground":return St;case"Event":return Ct;case"Iris":return kt;case"NoBackground":return null;case"Theme":return Pt;case"Video":return Et;case"CMSImage":return xt;case"MarqueeAd":return bt;default:return yt}}}</div>${(0,Be.g)((()=>window.isSSREnabled),(e=>(0,tt.a)(`TTSR.${e.getExperienceType()}`)))}
`;var Ot=n(22674),Lt=n(78923),Dt=n(29717);const Rt=Lt.i` .backgroundButton{float:right}.backgroundGalleryButtonContainer{padding-left:12px}.marqueeAdDismissButtonContainer{left:initial;right:12px}.copyrightContainer{padding-left:12px}.museumCard{left:initial;right:12px}.secondaryButton{float:right;margin-right:8px}`,Ft=Lt.i` .backgroundButton{float:left}.backgroundGalleryButtonContainer{padding-right:12px}.marqueeAdDismissButtonContainer{left:initial;right:12px}.copyrightContainer{padding-right:12px}.museumCard{left:12px;right:initial}.secondaryButton{float:left;margin-left:8px}`,Bt=Lt.i` .windowsBlur{background:rgba(31,31,31,0.6)}.backgroundButton.blurbg{color:#FFFFFF}.backgroundButton.blurbg:hover{background:rgba(0,0,0,.6)}.backgroundButton_active.blurbg{background:rgba(0,0,0,.6)}.backgroundButton_active.blurbg:hover{background:rgba(0,0,0,.9)}`,Nt=Lt.i`:not(:defined){visibility:hidden}.backgroundButton{background:transparent;border-radius:12px;border:none;color:white;cursor:pointer;display:inline-block;font-size:12px;height:24px;overflow:hidden;white-space:nowrap;fill:currentColor}.backgroundButton svg{display:flex}.backgroundButton:hover{background:rgba(0,0,0,.6)}.backgroundButton span[slot="start"]{margin-inline:0px}.backgroundButton::part(control){padding:0 8px}.backgroundButton_active{background:rgba(0,0,0,.6)}.backgroundButton_active:hover{background:rgba(0,0,0,.9)}.backgroundButton.blurbg{color:#262626}.backgroundButton.blurbg:hover{background:rgba(255,255,255,.6)}.backgroundButton_active.blurbg{background:rgba(255,255,255,.6)}.backgroundButton_active.blurbg:hover{background:rgba(255,255,255,.9)}.backgroundButtonText{font-size:12px;margin-inline-start:8px;padding:0}.backgroundGalleryButtonContainer{padding-bottom:4px;width:362px}.backgroundGalleryButtonText{color:white}.marqueeAdDismissButtonContainer{position:absolute}.copyrightContainer{color:rgba(255,255,255,0.54);padding-bottom:10px}fluent-button.backgroundGalleryButton::part(control){border-radius:16px}.white-icon svg{fill:white}.backgroundImage{height:100%;width:100%}.hotSpot{height:max-content;position:absolute;width:max-content;z-index:290}.hotSpotAccess{animation-fill-mode:forwards;animation:"backgroundFadeInAnimation 0.5s linear";cursor:default;display:flex;text-decoration:none;z-index:292}.hotSpotClickable{cursor:pointer !important}.hotSpotContainer{opacity:1;transition:opacity 0.2s}.hotSpotContainer_hide{opacity:0;transition:opacity 0.2s}.hotSpotRenderRegion{opacity:1;position:absolute}.hotSpotSpot{background-color:rgba(0,0,0,0.64);border-radius:16px;cursor:default;height:32px;margin-inline-end:8px;width:32px}.hotSpotSubTextArea{color:rgba(255,255,255,0.74);font-size:12px;line-height:16px;opacity:0}.hotSpotSubTextArea:hover{opacity:1}.hotSpotTextArea{border-radius:4px;color:#FFFFFF;font-size:14px;line-height:20px;max-width:256px;padding:4px 12px 10px 12px}.hotSpotTextArea:hover{background-color:rgba(0,0,0,0.64);cursor:pointer;z-index:292}.hotSpotTextArea:hover .hotSpotSubTextArea{opacity:1}.irisButton{background:none;border:none;color:#fff;cursor:pointer;height:auto;width:100%;fill:currentColor}.irisButton:hover{background:rgba(0,0,0,.9)}.irisButton::part(control){align-items:flex-start;justify-content:unset;padding:10px 15px}.irisButtonTitle{font-size:14px;line-height:16px;margin-bottom:4px;text-align:start;user-select:none;width:100%}.irisButtonSubtitle{color:rgba(255,255,255,0.54);font-size:12px;line-height:14px;text-align:start;user-select:none;white-space:normal}.irisResponse{padding:0px 12px;user-select:none}.museumCard{color:#fff;opacity:1;position:absolute;transition:opacity 0.2s;z-index:100}.museumCardVertical{display:flex;flex-flow:column-reverse}.museumCardVerticalHide{display:none}.museumCardVertical .backgroundButton{border-radius:5px;height:28px;width:28px;min-width:28px;margin-bottom:4px}.museumCardVertical .backgroundButton::part(control){padding:0px;width:28px;height:28px;min-width:28px}.museumCardVertical .backgroundButton:hover{background:#f0f0f033}.museumCard_hide{opacity:0;transition:opacity 0.2s}.museumCardCredits{color:rgba(255,255,255,0.54);font-size:13px;margin:10px 0px 16px 0px;user-select:none}.museumCardCredits.backgroundGallery{margin:10px 0px 12px 0px}.museumCardCreditsContainer{background:rgba(0,0,0,.77);border-bottom:1px solid transparent;border-radius:4px;font-family:inherit;font-size:12px;font-weight:400;margin-bottom:10px;max-width:384px;padding:8px 4px}.museumCardDivider{background-color:rgba(255,255,255,0.54);height:1px;margin:4px 12px;width:350px}.museumCardIcon{display:inline;fill:#fff;font-size:20px;height:14px;position:relative;top:1px;width:20px}.museumCardTextContainer{background:none;border:none;color:#fff;display:inline;height:auto;padding-left:12px;padding-right:12px;position:relative;text-decoration:none;width:auto}.museumCardTextContainer:hover,.irisButton:hover{cursor:pointer}.museumCardTitle{color:#fff;font-family:inherit;font-size:20px;font-weight:400;line-height:24px;margin:4px 0px;text-decoration:none;user-select:none}.museumCardTitleAnchor:hover{cursor:pointer;text-decoration:underline}.museumCardTitleContainer{padding:0px 12px}.overlayGradient{width:100%;height:100%;position:absolute;top:0;opacity:1;transition:opacity 0.5s ease-in-out 0s;background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%)}.overlayGradient.overlayGradientTranslucent{opacity:0}.overlayGradientWhiteGradient{background-image:linear-gradient(89.98deg,rgba(255,255,255,0.9) 0.02%,rgba(255,255,255,0.54) 59.36%,rgba(255,255,255,0) 99.98%)}.overlay{height:100%;opacity:1;position:absolute;top:0;transition:opacity 0.4s ease-out 0.4s,background 0.4s ease-in 0s,backdrop-filter 0.4s ease-out 0s;width:100%}.overlayTranslucent{background:#00000052;height:100%;opacity:1;position:absolute;top:0;transition:opacity 0.4s ease-out 0.4s,background 0.4s ease-in 0s,backdrop-filter 0.4s ease-out 0s;width:100%}.overlay_hide{opacity:0}.picture{background-position:center;background-repeat:no-repeat;background-size:cover;height:101%;margin:-1px 0px 0px -1px;object-fit:cover;padding:0;position:absolute;width:101%}.resizeFadeInAnimation{animation:opacityFadeInAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.resizeFadeOutAnimation{animation:opacityFadeOutAnimation 0.02s linear;animation-fill-mode:forwards}.secondaryButtonAnchor{color:#fff;text-decoration:none}.secondaryButtonAnchor:hover{text-decoration:underline}.scrollFadeInAnimation{animation:opacityFadeInAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.scrollFadeOutAnimation{animation:opacityFadeOutAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.toast{bottom:32px;left:50%;position:fixed;transform:translate(-50%,0);width:fit-content;z-index:${String(o.K.Over)}}.video{height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.windowsBlur{background:rgba(255,255,255,.6);backdrop-filter:blur(10px);height:100%;position:absolute;width:100%;z-index:1}#backgroundImage{transition:opacity 0.3s}.marqueeAdOverlay{position:absolute;width:100%;user-select:none;font-style:normal;color:#FFF}.marqueeAdContainer{display:flex;box-sizing:border-box}.marqueeAdLarge .marqueeAdContainer{padding:24px 0 0 47px;width:612px}.marqueeAdSmall .marqueeAdContainer{padding:50px 0 0 47px;width:306px;flex-direction:column}.marqueeAdSponsor{display:flex;flex-direction:column;align-items:center;font-size:12px}.marqueeAdLarge .marqueeAdSponsor{margin-right:32px}.marqueeAdSmall .marqueeAdSponsor{align-items:flex-start;margin-bottom:16px}.marqueeAdSponsorLogo{margin-top:8px;background:none;height:auto}.marqueeAdSponsorLogo::part(control){padding:0;border:0}.marqueeAdSponsorLogoImage{display:block;width:100%;height:100%}.marqueeAdLarge .marqueeAdSponsorLogoImage{max-width:160px;max-height:44px}.marqueeAdSmall .marqueeAdSponsorLogoImage{max-width:120px;max-height:32px}.marqueeAdContent{flex:1;display:flex;flex-direction:column;align-items:flex-start}.marqueeAdTitle{font-weight:600}.marqueeAdLarge .marqueeAdTitle{font-size:16px;line-height:22px}.marqueeAdSmall .marqueeAdTitle{font-size:14px;line-height:20px}.marqueeAdCTA{height:auto;display:flex;align-items:center;justify-content:center;font-weight:600;border-radius:4px;border:1px solid #FFF;cursor:pointer;text-decoration:none;color:#FFF;background-color:#ffffff0f;padding:5px 10px}.marqueeAdCTA:hover{background-color:#ffffff1f}.marqueeAdCTA::part(control){padding:0;border:0}.marqueeAdLarge .marqueeAdCTA{margin-top:12px;padding:5px 16px}.marqueeAdLarge .marqueeAdCTA::part(control){font-size:16px;line-height:22px}.marqueeAdSmall .marqueeAdCTA{margin-top:16px;padding:2px 12px 4px 12px}.marqueeAdSmall .marqueeAdCTA::part(control){font-size:14px;font-weight:600;line-height:20px}.marqueeAdCloseButton{padding:4px 8px;position:absolute;right:12px;bottom:12px;font-size:12px;line-height:16px;border-radius:999px;background:rgba(0,0,0,0.54);cursor:pointer}`.withBehaviors(new Ot.O(Rt,Ft),(0,Dt.Uu)(Bt)),Ut={experienceConfigSchema:undefined}},40738:function(e,t,n){"use strict";n.d(t,{Ik:function(){return v},oR:function(){return C},vC:function(){return i},y3:function(){return y}});var i,r=n(33940),o=n(27003),a=n(11765),s=n(75192),c=n(86331),d=n(85068),l=n(45896),u=n(43178),p=n(97555),h=n(65453),g=n(49286),m=n(49218);!function(e){e.internal="internal",e.intl="intl",e.both="both"}(i||(i={}));const f="__storedBingIntlUpsellState__";function v(){return(0,r.mG)(this,void 0,void 0,(function*(){let e=o.Gq.get(f);if(e)return e;if(!(yield a.L.isApiAvailableToUse()))return e=i.internal,o.Gq.set(f,e),e;const t=yield a.L.getPreferenceSetting(s.nc.bing_intl_upsell);return t&&void 0!==t.value&&(e=t.value),o.Gq.set(f,e),null!=e?e:i.internal}))}function y(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(yield a.L.isApiAvailableToUse()))return;const t={setting:s.nc.bing_intl_upsell,source:"ntp",timestamp:(new Date).getTime(),value:e};a.L.savePreferenceSetting(s.nc.bing_intl_upsell,t)}))}const S=m.dy`
    <div>
        <div style="margin-bottom: 5px"><b></b></div>
        <div style="margin-bottom: 5px"><b></b></div>
    </div>
`;function C(e){var t;const n={id:c.gz.BingIntlUpsellPromotion,group:d.V.Functional,placementSource:d.m.Internal,surfaceModel:{surfaceType:l.U.Coachmark,size:c.dm.Medium,position:{coachmarkAnchor:e,anchoringPosition:c.RC.Below,hasPointer:!0,pointerPosition:c.Jt.Opposite}},contentModel:{title:"",description:S,contentType:u.J.CallToAction}},i=(0,p.l)(h.p.Viewed,1);null===(t=(0,g.$0)())||void 0===t||t.sendInternalPlacement(n,[i])}},84679:function(e,t,n){"use strict";n.r(t),n.d(t,{CommonSearchBoxEdgeNext:function(){return M},CommonSearchBoxEdgeNextStyles:function(){return G},CommonSearchBoxEdgeNextTemplate:function(){return $},ToolingInfo:function(){return V}});var i=n(70159);var r=n(77615),o=n(33940),a=n(7009),s=n(53076),c=n(82890),d=n(83227),l=n(65135),u=n(60483),p=n(55755),h=n(56692),g=n(9533),m=n(81555),f=n(22704),v=n(19388),y=n(89696),S=n(33954),C=n(24169),b=n(35385),w=n(33379),T=n(99452),k=n(65932),P=n(82423),A=n(4734),I=n(75384),E=n(40738),x=n(92402);class M extends C.l{constructor(){super(...arguments),this.enableSearchAutoSuggestion=!1,this.enableWarmBingUrl=!1,this.options=null,this.commonSearchBoxRef=null,this.inputElementHasInput=!1,this.voiceSearchButtonTelemetryTag="",this.openVoiceSearchDialog=!1,this.isVoiceSearchLoaded=!1,this.searchVisible=!0,this.placeholderText="",this.showMultiLineSearchBox=!1,this.showCodexBingPlaceHolder=!1,this.showBingLogo=!1,this.canShowCodexBingUpsellByPolicy=!1,this.canShowCodexBingButton=!1,this.canShowBingIntlUpsellSelector=!1,this.isDefaultSearchBing="0"!==(0,p.L)().get("dsp"),this.pcCode=(0,p.L)().get("PC")||(0,p.L)().get("pc")||"",this.pcmTrafficCode=(0,p.L)().get("PCMPC")||(0,p.L)().get("pcmpc")||"",this.ucpdTrafficCode=(0,p.L)().get("UCPDPC")||(0,p.L)().get("ucpdpc")||"",this.codexBingChatTelemetryTags="",this.dailyDiscoveryShown=!0,this.dailyDiscoveryHasContent=!0,this.enableCodexBingIconStyles=!1,this.handleFocusEvent=()=>{this.fakeFocused=!0,this.searchboxApiHandle&&this.searchboxApiHandle.startCapturingKeyStrokes()},this.handleMouseDownEvent=e=>{this.commonSearchBoxRef&&this.commonSearchBoxRef!==e.target&&this.fakeFocused&&(this.fakeFocused=!1,this.searchboxApiHandle&&this.searchboxApiHandle.stopCapturingKeyStrokes())},this.onInputStart=()=>{this.fakeFocused&&(this.fakeFocused=!1,this.searchVisible=!1)},this.onInputCancel=()=>{this.searchVisible=!0},this.onKeyCaptureChange=()=>{this.searchboxApiHandle&&(this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled)},this.handInputEvent=e=>{const t=e.target.value;this.inputElementHasInput=!!t},this.dailyDiscoveryContentFetchedCallback=e=>{this.dailyDiscoveryHasContent=e,this.dailyDiscoveryHasContent||(this.dailyDiscoveryShown=!1,this.updateVoiceImageSearchButton())},this.onBingIntlUpsellSelection=e=>{var t,n,i,r;if(null==e?void 0:e.detail){const o=null===(i=null===(n=null===(t=this.config)||void 0===t?void 0:t.bingIntlUpsellSlcOpt)||void 0===n?void 0:n.find((t=>t.id===e.detail.key)))||void 0===i?void 0:i.additionalParam,a=o?Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.additionalFormParamMap),o):this.config.additionalFormParamMap;this.options=this.options&&Object.assign(Object.assign({},this.options),{additionalFormParamMap:a})}}}placeholderTextChanged(e,t){t!==e&&(this.options=this.options&&Object.assign(Object.assign({},this.options),{localizedStrings:Object.assign(Object.assign({},this.options.localizedStrings),{placeholderText:this.placeholderText})}))}experienceConnected(){var e,t,n,i,r,o,c,d,l,p;const g=null===(e=(0,P.K0)(s.z.ChromiumPageSettings))||void 0===e?void 0:e.getCurrentState();this.enableFocusRedirect=(null===(t=null==g?void 0:g.configData)||void 0===t?void 0:t.inPageSearchBoxType)===a.HT.redirect,this.isProjectEqual=null===(n=null==g?void 0:g.configData)||void 0===n?void 0:n.isEnrolledInProjectEqual,this.dailyDiscoveryShown=!!(null===(i=this.config.childExperienceReferencesWC)||void 0===i?void 0:i.DailyDiscovery)&&!!(null==g?void 0:g.dailyDiscoveryInSearchBoxEnabled),this.enableCodexBingIconStyles=!!this.config.showCodexBingIcon&&g&&"always"===g.selectedFeedDisplaySetting,this.canShowCodexBingUpsellByPolicy=!(0,h.Yq)().isAadAccountUser||null!==(r=null==g?void 0:g.isCodexBingUpsellEnabledByPolicy)&&void 0!==r&&r,this.canShowCodexBingButton=!!(null===(o=this.config.childExperienceReferencesWC)||void 0===o?void 0:o.CodexBingChat)&&this.canShowCodexBingUpsellByPolicy,this.canShowBingIntlUpsellSelector=!!(null===(c=this.config.childExperienceReferencesWC)||void 0===c?void 0:c.BingIntlUpsell);const m=window;m.chrome&&m.chrome.embeddedSearch&&(this.ntpApiHandle=m.chrome.embeddedSearch.newTabPage,this.searchboxApiHandle=m.chrome.embeddedSearch.searchBox),this.showMultiLineSearchBox=this.config&&!!this.config.enableMultiLineSearchBox&&this.config.enableMultiLineSearchBox&&!this.enableFocusRedirect&&(!this.config.limitMSBToNonDSE||!this.isDefaultSearchBing),this.showCodexBingPlaceHolder=this.showMultiLineSearchBox||this.config&&!!this.config.codexBingPlaceHolder&&this.config.codexBingPlaceHolder&&(this.isDefaultSearchBing||!this.enableFocusRedirect),this.showBingLogo=!this.isDefaultSearchBing&&!this.enableFocusRedirect&&!(null===(l=null===(d=this.config)||void 0===d?void 0:d.childExperienceReferencesWC)||void 0===l?void 0:l.CodexBingChat),this.canShowCodexBingButton&&(this.codexBingChatTelemetryTags=new u.D({name:"headersearch"}).getMetadataTag()),this.populateCommonSearchBoxOptions(),this.setTelemetryPersonalizationParam(),(0,w.N)()&&window.searchFormSubmitListener&&window.requestAnimationFrame((()=>{var e;(null===(e=this.commonSearchBoxRef)||void 0===e?void 0:e.formElement)&&this.commonSearchBoxRef.formElement.removeEventListener("submit",window.searchFormSubmitListener)})),(null===(p=this.config.childExperienceReferencesWC)||void 0===p?void 0:p.DailyDiscovery)&&b.J.updateLayout.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;const n=t[0],i=!!n.dailyDiscoveryInSearchBoxEnabled;this.dailyDiscoveryHasContent&&this.dailyDiscoveryShown!==i&&(this.dailyDiscoveryShown=i,this.updateVoiceImageSearchButton()),this.config.showCodexBingIcon&&(this.enableCodexBingIconStyles="always"===n.selectedFeedDisplaySetting,this.options=this.options&&Object.assign(Object.assign({},this.options),{enableCodexBingIconStyles:this.enableCodexBingIconStyles}))})),(0,w.N)()&&this.canShowBingIntlUpsellSelector&&(0,x.l_)(this).then((()=>{(0,E.Ik)().then((e=>{var t,n,i,r;const o=null===(i=null===(n=null===(t=this.config)||void 0===t?void 0:t.bingIntlUpsellSlcOpt)||void 0===n?void 0:n.find((t=>t.id===e)))||void 0===i?void 0:i.additionalParam,a=o?Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.additionalFormParamMap),o):this.config.additionalFormParamMap;this.options=this.options&&Object.assign(Object.assign({},this.options),{additionalFormParamMap:a})}))}))}shadowDomPopulated(){var e,t;if((0,w.N)()){const e=(0,f.Ou)(),t=e[v.nz+c.p.searchBox];this.markVisuallyReadyRaf(t&&void 0===e[c.p.isSSRAborted]?t:void 0)}else(0,y.hf)("SSR.SearchBoxRendered",(0,f.UE)());!this.config.enableClarity&&(0,h.Yq)().ClarityEnabled&&(this.options=this.options&&Object.assign(Object.assign({},this.options),{enableClarity:!0})),this.setPlaceholderText(),(0,g.FY)(m._.searchBox,this);const n=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&this.commonSearchBoxRef.shadowRoot.querySelector("#q");n&&(this.inputElement=n,this.canShowCodexBingButton&&this.inputElement.addEventListener("input",this.handInputEvent),(0,g.FY)(m._.searchBoxInput,this.inputElement));const i=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&this.commonSearchBoxRef.shadowRoot.querySelector("#voice_srch_go");i&&(0,g.FY)(m._.searchBoxVoiceButton,i),this.enableFocusRedirect?this.registerFocusRedirectHandler():this.config.enableDelayASAfterReveal?(0,I.lr)().then((()=>{this.enableSearchAutoSuggestion=!0})):this.enableSearchAutoSuggestion=!0,Promise.all([(0,A.F_)(),(0,I.lr)()]).then((()=>{this.enableWarmBingUrl=!0})).catch((()=>{S.k.logError("Failed to wait for ATF visually ready and reveal")})),this.config.stampSideBarSupported&&((null===(t=null===(e=null===window||void 0===window?void 0:window.chrome)||void 0===e?void 0:e.edgeMarketingPagePrivate)||void 0===t?void 0:t.showFeatures)?l.M0.addOrUpdateTmplProperty("CodexBingChatSidebarSupported"):l.M0.addOrUpdateTmplProperty("CodexBingChatSidebarNotAvailable")),this.canShowBingIntlUpsellSelector&&window.addEventListener("bingIntlUpsellSelection",this.onBingIntlUpsellSelection)}getExperienceType(){return d.x.commonSearchBoxEdgeNext}setPlaceholderText(){var e;if(!this.config.localizedStrings)return;const{testBingPlaceholderText:t,placeholderText:n,tenantMissingEnterprisePlaceholderText:i,tenantAvailableEnterprisePlaceholderText:r}=this.config.localizedStrings;if(this.showMultiLineSearchBox||this.showCodexBingPlaceHolder)return void(this.placeholderText=t);if(!(0,h.Yq)().isAadAccountUser)return void(this.placeholderText=n);let o=!1;const a=null===(e=(0,P.K0)(s.z.AdminPortalData))||void 0===e?void 0:e.getCurrentState();a&&(o=!0,this.setEnterprisePlaceholderTextWithAdminSettings(a)),(0,k.Uo)(s.z.AdminPortalData,(e=>{o=!0,this.setEnterprisePlaceholderTextWithAdminSettings(e)})),o||(this.placeholderText=i)}setEnterprisePlaceholderTextWithAdminSettings(e){if(!this.config.localizedStrings)return;const{tenantMissingEnterprisePlaceholderText:t,tenantAvailableEnterprisePlaceholderText:n}=this.config.localizedStrings;if(this.placeholderText)return;if(!e.settingsDataRecieved)return;const{company:i,isMsbEnabled:r}=e.settings||{};this.placeholderText=r&&i?n.replace(/\{0\}/g,i):t}getFormParameters(){const e=Object.assign({},this.config.additionalFormParamMap);e.refig=l.M0.getRequestId();const{formCodes:t}=this.config;return e.form=this.isDefaultSearchBing?t.bingSearchEngine:t.nonBingSearchEngine,this.pcCode&&(e.pc=this.pcCode),this.pcmTrafficCode&&(e.pcmpc=this.pcmTrafficCode),this.ucpdTrafficCode&&(e.ucpdpc=this.ucpdTrafficCode),e}populateCommonSearchBoxOptions(){var e,t;this.options=Object.assign(Object.assign({},this.config),{showCodexBingASUpsell:this.canShowCodexBingUpsellByPolicy&&this.config.showCodexBingASUpsell,showMultiLineSearchBox:this.showMultiLineSearchBox,enableCodexBingIconStyles:this.enableCodexBingIconStyles,localizedStrings:Object.assign(Object.assign({},this.strings),{placeholderText:this.placeholderText,inputTitle:this.showMultiLineSearchBox?null===(e=this.strings)||void 0===e?void 0:e.testBingInputTitle:null===(t=this.strings)||void 0===t?void 0:t.inputTitle}),additionalFormParamMap:this.getFormParameters(),showVoiceSearchButton:this.config.showVoiceSearchButton&&this.isDefaultSearchBing&&!(this.config.onlyShowDailyDiscovery&&this.dailyDiscoveryShown)&&!this.canShowCodexBingButton&&!this.canShowBingIntlUpsellSelector,childExperienceReferencesWC:this.config.childExperienceReferencesWC?Object.assign(Object.assign({},this.config.childExperienceReferencesWC),{ImageSearchWC:!this.isDefaultSearchBing||this.config.onlyShowDailyDiscovery&&this.dailyDiscoveryShown||this.canShowCodexBingButton||this.canShowBingIntlUpsellSelector?null:this.config.childExperienceReferencesWC.ImageSearchWC,DailyDiscovery:this.config.childExperienceReferencesWC.DailyDiscovery}):void 0})}updateVoiceImageSearchButton(){this.config.onlyShowDailyDiscovery&&this.options&&(this.options=Object.assign(Object.assign({},this.options),{showVoiceSearchButton:this.config.showVoiceSearchButton&&this.isDefaultSearchBing&&!this.dailyDiscoveryShown,childExperienceReferencesWC:this.config.childExperienceReferencesWC?Object.assign(Object.assign({},this.options.childExperienceReferencesWC),{ImageSearchWC:this.isDefaultSearchBing&&!this.dailyDiscoveryShown?this.config.childExperienceReferencesWC.ImageSearchWC:null}):void 0}))}registerFocusRedirectHandler(){this.ntpApiHandle&&(this.ntpApiHandle.oninputstart=this.onInputStart,this.ntpApiHandle.oninputcancel=this.onInputCancel,this.ntpApiHandle.isInputInProgress&&this.onInputStart()),this.searchboxApiHandle&&(this.searchboxApiHandle.onkeycapturechange=this.onKeyCaptureChange,this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled,this.searchboxApiHandle.isKeyCaptureEnabled&&this.searchboxApiHandle.startCapturingKeyStrokes()),this.commonSearchBoxRef&&this.commonSearchBoxRef.addEventListener("focus",this.handleFocusEvent),document.body.addEventListener("mousedown",this.handleMouseDownEvent)}setTelemetryPersonalizationParam(){const e={page:{has3PSearch:!this.isDefaultSearchBing,isSearchAB:this.enableFocusRedirect}};l.M0.updatePageMetadata(e)}clickBingIcon(){this.commonSearchBoxRef&&this.commonSearchBoxRef.onSubmit()}disconnectedCallback(){var e;super.disconnectedCallback(),this.canShowCodexBingButton&&(null===(e=this.inputElement)||void 0===e||e.removeEventListener("input",this.handInputEvent)),this.enableFocusRedirect&&(this.commonSearchBoxRef&&this.commonSearchBoxRef.removeEventListener("focus",this.handleFocusEvent),document.body.removeEventListener("mousedown",this.handleMouseDownEvent)),this.canShowBingIntlUpsellSelector&&window.removeEventListener("bingIntlUpsellSelection",this.onBingIntlUpsellSelection)}}(0,o.gn)([T.LO],M.prototype,"enableSearchAutoSuggestion",void 0),(0,o.gn)([T.LO],M.prototype,"enableWarmBingUrl",void 0),(0,o.gn)([T.LO],M.prototype,"options",void 0),(0,o.gn)([T.LO],M.prototype,"inputElementHasInput",void 0),(0,o.gn)([T.LO],M.prototype,"openVoiceSearchDialog",void 0),(0,o.gn)([T.LO],M.prototype,"isVoiceSearchLoaded",void 0),(0,o.gn)([T.LO],M.prototype,"fakeFocused",void 0),(0,o.gn)([T.LO],M.prototype,"searchVisible",void 0),(0,o.gn)([T.LO],M.prototype,"placeholderText",void 0),(0,o.gn)([T.LO],M.prototype,"showMultiLineSearchBox",void 0),(0,o.gn)([T.LO],M.prototype,"showCodexBingPlaceHolder",void 0),(0,o.gn)([T.LO],M.prototype,"showBingLogo",void 0),(0,o.gn)([T.LO],M.prototype,"canShowCodexBingUpsellByPolicy",void 0),(0,o.gn)([T.LO],M.prototype,"canShowCodexBingButton",void 0),(0,o.gn)([T.LO],M.prototype,"canShowBingIntlUpsellSelector",void 0);var O=n(49218),L=n(41472),D=n(93703),R=n(81563);const F=O.dy`<div slot="search-options" class="bing-logo-container"><fluent-button class="bing-logo-btn ${e=>e.showMultiLineSearchBox?"ml-bing-logo":"bing-logo-o"}" part="button" title=${e=>e.strings&&e.strings.bingIconText} aria-label=${e=>e.strings&&e.strings.bingIconText} appearance="stealth" @click="${e=>e.clickBingIcon()}" @keypress="${e=>e.clickBingIcon()}" data-t="${e=>{var t;return null===(t=e.commonSearchBoxRef)||void 0===t?void 0:t.buttonTelemetryTag}}" data-customhandled="true"><img src=${"https://assets.msn.com/staticsb/statics/latest/icons/BingLogo.svg"}></fluent-button></div>`,B=O.dy`<div slot="search-options" class="daily-discovery-container">${e=>{var t;return e.options&&(null===(t=e.options.childExperienceReferencesWC)||void 0===t?void 0:t.DailyDiscovery)&&(0,R.Ot)(e.options.childExperienceReferencesWC.DailyDiscovery,{properties:{contentFetchedCallback:e.dailyDiscoveryContentFetchedCallback}})}}</div>`,N=O.dy`<div slot="search-options" class="bing-intl-container">${e=>{var t;return e.options&&(null===(t=e.options.childExperienceReferencesWC)||void 0===t?void 0:t.BingIntlUpsell)&&(0,R.Ot)(e.options.childExperienceReferencesWC.BingIntlUpsell,{properties:{bingIntlUpsellMenuItems:e.config.bingIntlUpsellSlcOpt}})}}</div>`,U=O.dy`<div slot="${e=>e.config&&e.config.showCodexButtonInBox?"search-options":"codex-bing-chat"}" data-t="${e=>e.codexBingChatTelemetryTags}">${e=>{var t;return e.options&&(null===(t=e.options.childExperienceReferencesWC)||void 0===t?void 0:t.CodexBingChat)&&(0,R.Ot)(e.options.childExperienceReferencesWC.CodexBingChat,{properties:{showCodexButtonInBox:e.config.showCodexButtonInBox}})}}</div>`,$=O.dy`<cs-common-search-box ${(0,L.i)("commonSearchBoxRef")} :options=${e=>e.options} :enableAutoSuggestion=${e=>e.enableSearchAutoSuggestion} :enableWarmBingUrl=${e=>e.enableWarmBingUrl} :fakeFocused=${e=>e.fakeFocused} :disableSubmit=${e=>e.enableFocusRedirect} :searchVisible=${e=>e.searchVisible} exportparts="root, searchcore" class=${e=>{var t;return(null===(t=e.config.childExperienceReferencesWC)||void 0===t?void 0:t.DailyDiscovery)?"with-gleam":""}} ?usePageBreakpoints=${e=>!!e.config.usePageBreakpoints}>${(0,D.g)((e=>{var t;return null===(t=e.config)||void 0===t?void 0:t.enableCodexBundlePrefetch}),O.dy`<div><iframe src="https://www.bing.com/wpt/prefetchcib" style="display: none;"></iframe></div>`)} ${(0,D.g)((e=>{var t;return null===(t=e.config.childExperienceReferencesWC)||void 0===t?void 0:t.DailyDiscovery}),B)} ${(0,D.g)((e=>e.canShowCodexBingButton&&!e.inputElementHasInput),U)} ${(0,D.g)((e=>e.showBingLogo),F)} ${(0,D.g)((e=>{var t;return null===(t=e.config.childExperienceReferencesWC)||void 0===t?void 0:t.BingIntlUpsell}),N)}</cs-common-search-box>`;var _=n(78923),H=n(22674);const W=_.i`
.bing-logo-btn{border-radius:0 var(--search-box-radius) var(--search-box-radius) 0}`,j=_.i`
.bing-logo-btn{border-radius:var(--search-box-radius) 0 0 var(--search-box-radius)}`,G=_.i` .bing-logo-btn{height:46px;background:transparent;padding:0;border:none}.bing-logo-o::part(control){padding-inline-end:11px}.ml-bing-logo::part(control){padding-inline-end:7px}.bing-logo-btn > img{margin:12px 2px;height:22px;width:22px;vertical-align:bottom}.daily-discovery-container{margin-inline-end:12px;display:flex;justify-content:center;align-items:center}`.withBehaviors(new H.O(W,j)),V={experienceConfigSchema:undefined};i.il.define(r.s.registry)},4387:function(e,t,n){"use strict";n.r(t),n.d(t,{EdgeChromiumPageWC:function(){return En},EdgeChromiumPageWCCommonTemplate:function(){return ri},EdgeChromiumPageWCStyles:function(){return yi},EdgeChromiumPageWCTemplate:function(){return oi},OverlapState:function(){return ee},ToolingInfo:function(){return Si}});var i=n(38781),r=n(33940),o=n(53076);const a=new Map([["en",["en-xl","en-ae","en-au","en-ca","en-gb","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","en-za"]],["ja",["ja-jp"]],["ko",["ko-kr"]],["ru",["ru-ru","ru-xl"]],["de",["de-de","de-ch","de-at"]],["fr",["fr-xl","fr-be","fr-ca","fr-ch","fr-fr"]],["es",["es-xl","es-us","es-mx","es-ar","es-cl","es-co","es-es"]],["it",["it-it"]],["pl",["pl-pl"]],["ar",["ar-eg","ar-sa","ar-ae"]],["sv",["sv-se"]],["nl",["nl-nl","nl-be"]],["tr",["tr-tr"]],["bn",["bn-in"]],["te",["te-in"]],["hi",["hi-in"]],["mr",["mr-in"]],["nb",["nb-no"]],["pt",["pt-pt","pt-br"]],["id",["id-id"]]]);var s=n(83227),c=n(12108),d=n(32506),l=n(33799),u=n(82890);const p=new Set(["AD","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BW","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CO","CR","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GT","GU","GW","GY","HK","HN","HR","HT","HU","ID","IE","IM","IN","IO","IQ","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PR","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","EN-US","JA-JP","DE-DE"]);var h=n(64893),g=n(17769),m=n(28970),f=n(987),v=n(1334),y=n(13959),S=n(56692),C=n(44979),b=n(45506),w=n(32509),T=n(3900),k=n(31177),P=n(89638),A=n(55755),I=n(32181),E=n(10618),x=n(55607),M=n(91608),O=n(53899),L=n(35385),D=n(41691),R=n(7009),F=n(7029),B=n(14989),N=n(88828),U=n(32164),$=n(79941),_=n(58958),H=n(73231),W=n(17612);const j="background",G="pivot",V="solidHeader",q="top",z=(H.jX.Experience,H.dm.Small,H.M_.Opposite,H.ur.Below,"ntps"),Q=204,Z=176,K=64,J=400,X=900,Y={[W.IY.ENUS]:"Y_993301dc-ad41-46da-b9ee-85cd71d083b7",[W.IY.ENIN]:"Y_7b280bce-7a91-4a7a-b3f8-72012a43944d"};var ee;!function(e){e[e.NoOverlap=0]="NoOverlap",e[e.PartialOverlap=1]="PartialOverlap",e[e.CompleteOverlap=2]="CompleteOverlap"}(ee||(ee={}));const te=new Set(["Nowcast"]),ne=new Set(["SevereWeather"]),ie=new Set(["AQICard"]),re=new Set(["TeaserRain5Day","TeaserRainTonight","TeaserRainTomorrow","TeaserRainToday","TeaserTempRecordDay","TeaserTempRecord","TeaserCurrentTemp","TeaserDayTempChange","TeaserDayTempTrend","TeaserUVIndex","TeaserVisibility","TeaserWindDay","TeaserWind"]),oe=138,ae=240;var se=n(67462),ce=n(65135),de=n(38156),le=n(98304),ue=n(19388),pe=n(68364),he=n(22704),ge=n(62325),me=n(62676),fe=n(59902),ve=n(59785),ye=n(17440),Se=n(75192),Ce=n(24676),be=n(34955),we=n(11765);function Te(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){const t="vp"===(0,A.L)().get("reqsrc")||!!(0,A.L)().get("vptest");if(!window.caches||-1!=(null===(e=location.href)||void 0===e?void 0:e.indexOf("enableForceCache=true"))||t)return;const n=Date.now(),i=yield function(){return(0,r.mG)(this,void 0,void 0,(function*(){let e="";const t=yield Pe("edgenext-base-V1");t&&t.length>0||(e="edgenext-base-v1-empty.");const n=e?[]:t.filter((e=>e.url&&function(e,t){if(!e||!t)return!1;const n=Ie(new URL(e)),i=Ie(new URL(t));if(!n||!i)return!1;return n.href==i.href}(e.url,location.href)));e||n&&0!=n.length||(e="edgenext-base-v1-missing.");const i=yield caches.open("edgenext-base-fallback-V1");if(e){const t=Ae(new URL(location.href));try{return yield i.add(t),e+" NetworkCall"}catch(t){return e+" "+t}}const r=n[0],o=yield caches.match(r.url),a=Ae(new URL(r.url));return yield i.put(a,o),"saved."}))}(),o=Date.now(),a={r:i,ic:yield ke(),te:o-n};(0,f.$o)().setObject("FallbackNavigationResult",a)}))}function ke(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=yield Pe("edgenext-base-fallback-V1");if(!(e&&e.length>0))return!1;const t=Ae(new URL(location.href)),n=e.filter((e=>e.url&&e.url===t.toString()));return!!(n&&n.length>0)}))}function Pe(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(!window.caches)return[];const t=yield caches.open(e);return t&&(yield t.keys())||[]}))}function Ae(e){return(e=Ie(e)).searchParams.append("enableForceCache","true"),e}function Ie(e){return e.searchParams.has("prerender")&&e.searchParams.delete("prerender"),e.searchParams.has("startpage")&&e.searchParams.delete("startpage"),e}var Ee=n(26007),xe=n(41065);const Me={NavResponseParsingFailed:le.D7p,FeedResponseCachingFailed:le.uAr,FeedRequestURLGenerationFailed:le.Mr7,UserIDNotAvailableForFeedFetch:le.Ins,FailedToReadNavResponseStream:le.F14,NavResponseHandlerFailed:le.T93,NavResponseErrorHandlerReturnedFallback:le.npY,NavHandlerMarkersNotFound:le.RD7,UnhandledErrorInNavHandler:le.Bi$,NavFeedRequestFailed:le.K1E,NavFeedHandlerExited:le.ePs,InMemoryHandlerCacheMissed:le.cJZ,FetchMsgHandlerCacheMissed:le.rqK};function Oe(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=yield(0,xe.T)({type:"SW_ERROR_DATA"});if(e&&e.length){for(const t of e){const e=Me[t.id];if(!e)continue;const n=Object.assign(Object.assign({},e),{message:t.message});if(t.data&&(n.pb=Object.assign(Object.assign({},n.pb),t.data)),(e.id===Me.FetchMsgHandlerCacheMissed.id||e.id===Me.InMemoryHandlerCacheMissed.id)&&t.data&&t.data.pageUrl&&t.data.swUrl){const i=Ee.c.compareURLs(t.data.pageUrl,t.data.swUrl);n.pb=Object.assign(Object.assign({},e),{urlMismatchData:i})}ce.M0.sendAppErrorEvent(n)}ce.M0.addOrUpdateTmplProperty("swerr",e.length.toString())}}))}function Le(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e)return;const t=yield function(){return(0,r.mG)(this,void 0,void 0,(function*(){return yield(0,xe.T)({type:"SW_FLAGS_DATA"})}))}();if(t&&t.featureFlags&&t.workerParams){["enableEarlyFeedFetchMem","enableEarlyFeedFetchMsg","enableEarlyFeedFetch"].forEach((n=>{var i,r;const o=e[n],a=t.featureFlags[n];if((o||a)&&o!==a){const e=((null===(r=null===(i=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===i?void 0:i.controller)||void 0===r?void 0:r.scriptURL)||"").split("?")[1];ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.IXH),{message:`Flag mismatch. Page: ${o}, Worker: ${a}`,pb:Object.assign(Object.assign({},le.IXH.pb),{workerParams:t.workerParams,pageSwParams:e})}))}}))}}))}var De=n(62661),Re=n(37574),Fe=n(24169),Be=n(76858),Ne=n(23344),Ue=n(95460),$e=n(7124),_e=n(16614),He=n(52965),We=n(9533),je=n(81555);var Ge=n(4734);function Ve(e,t,n=!1,i,r,o){e?"serviceWorker"in navigator?(e=function(e,t){const n=t.indexOf("?")>-1?"&":"?",i=n+function(e){const t=(0,A.L)().getAll("item"),n=t?t.find((e=>e&&0===e.indexOf("spalink:"))):void 0;let i=function(e){const t=(0,A.L)().get("bundles");let n;if(t&&(n=qe("bundles",t),n))return n;if(n=qe("bundles",e.bundlesOverride),n)return n;const i=b.Al.ClientSettings&&b.Al.ClientSettings.queryparams,r=new URLSearchParams(i);return qe("bundles",r.get("bundles"))}(e);n&&(i=qe("item",n.replace("/mobile","")));return i}(e)+function(e){const t=(0,A.L)().get("raceEnabled");return e.cacheAndNetworkRaceEnabled||t?qe("raceEnabled","true"):""}(e)+((null===(r=null===b.Al||void 0===b.Al?void 0:b.Al.ClientSettings)||void 0===r?void 0:r.audienceMode)===c.F.Enterprise?qe("enableOfficeRoutes","true"):"")+function(e){return isNaN(e.riverAgeMinutes)?"":qe("riverAgeMinutes",e.riverAgeMinutes.toString())}(e)+function(e){const t=(0,A.L)().get("enableNetworkFirst");return e.enableNetworkFirst||t?qe("enableNetworkFirst","true"):""}(e)+function(e){return isNaN(e.navAgeMinutes)?"":qe("navAgeMinutes",e.navAgeMinutes.toString())}(e)+function(e){const t=(0,A.L)().get("enableNavPreload");return e.enableNavPreload||t?qe("enableNavPreload","true"):""}(e)+function(e){const t=(0,A.L)().get("enablePreRenderPartialResponseRoute");return e.enablePreRenderPartialResponseRoute||t?qe("enablePreRenderPartialResponseRoute","true"):""}(e)+function(e){const t=(0,A.L)().get("enableEmptySectionRoute");return e.enableEmptySectionRoute||t?qe("enableEmptySectionRoute","true"):""}(e)+function(e){const t=(0,A.L)().get("enableEarlyFeedFetch");return e.enableEarlyFeedFetch||t?qe("enableEarlyFeedFetch","true"):""}(e)+function(e){const t=(0,A.L)().get("enableEarlyFeedFetchMsg");return e.enableEarlyFeedFetchMsg||t?qe("enableEarlyFeedFetchMsg","true"):""}(e)+function(e){const t=(0,A.L)().get("enableEarlyFeedFetchMem");return e.enableEarlyFeedFetchMem||t?qe("enableEarlyFeedFetchMem","true"):""}(e)+function(e){const t=(0,A.L)().get("enableBaseResponseTeeNoOp");return e.enableBaseResponseTeeNoOp||t?qe("enableBaseResponseTeeNoOp","true"):""}(e)+function(e){const t=(0,A.L)().get("enableBkgdNewStorage");return e.enableBkgdNewStorage||t?qe("enableBkgdNewStorage","true"):""}(e)+function(e){const t=(0,A.L)().get("enableAltCacheNetworkRace");return e.enableAltCacheNetworkRace||t?qe("enableAltCacheNetworkRace","true"):""}(e)+function(e){const t=(0,A.L)().get("enableNavErrorHandler");return e.enableNavErrorHandler||t?qe("enableNavErrorHandler","true"):""}(e)+function(e){const t=(0,A.L)().get("enableFallbackVerticalsFeed");return e.enableFallbackVerticalsFeed||t?qe("enableFallbackVerticalsFeed","true"):""}(e)+function(e){const t=(0,A.L)().get("disableDefaultNavigationRoute");return e.disableDefaultNavigationRoute||t?qe("disableDefaultNavigationRoute","true"):""}(e)+function(e){return isNaN(e.networkTimeoutSeconds)?"":qe("networkTimeoutSeconds",e.networkTimeoutSeconds.toString())}(e);var r;i!==n&&(t=function(e,t){if(!e||!e.endsWith(t))return e;return e.slice(0,-1)}(t+=i,"&"));return t}(i,e),!o||(e=o(e,"serviceWorkerUrlPolicy"))?n?Qe(e,t,r):(0,Ge.F_)().then((()=>{Qe(e,t,r)})):(0,pe.H)(le.a6r,"Service Worker script Url is not trusted type compliant")):(0,pe.H)(le.a6r,"Service Worker is not in navigator."):(0,pe.H)(le.a6r,"No scriptUrl provided")}function qe(e,t){return t?e+"="+t+"&":""}function ze(e="/"){return(0,r.mG)(this,void 0,void 0,(function*(){try{const t=yield navigator.serviceWorker.getRegistration(e);if(!t)return;(yield t.unregister())||(0,pe.H)(le.Fst,"ServiceWorker unregistration failed.")}catch(e){(0,pe.OO)(e,le.Fst,"Failed to unregister ServiceWorker:"+e.message)}}))}function Qe(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){try{yield navigator.serviceWorker.register(e,{scope:t}),n&&n()}catch(e){(0,pe.OO)(e,le.a6r,"ServiceWorker registration failed.")}}))}var Ze=n(12884),Ke=n(42420);function Je(e,t,n,i,r,o){if(!t||"true"!==t.enabled)return;const a=b.Al.ClientSettings.deviceFormFactor;if("false"===t.mobileEnabled&&("phone"===a||"tablet"===a))return;if(!function(e){const t=b.Al.ClientSettings.browser;if(!t&&"false"===e.mobileEnabled)return!1;const n=e.unsupportedBrowsers;if(!n||!n.length)return!0;if(n.findIndex((e=>e.toLowerCase()===t.browserType.toLowerCase()))>-1)return!1;return!0}(t))return;if(!(0,f.$o)().supported)return;const s=t.isLowEndDevice&&t.disableOnLowEndDevices;if("true"===t.registrationEnabled&&!s){const a=function(){const e=(0,Ze.zp)(),t=Ee.c.getQueryParameterByName("swimmediateregistration",e);if(t)return"true"===t.toLocaleLowerCase();return!1}();i=i||a,Ke.U.setIsServiceWorkerEnabled(!0),Ve(e,n,i,t,r,o)}("true"===t.unregistrationEnabled||s)&&(!function(e="/",t=!1){if(!e||!("serviceWorker"in navigator))return null;t||"complete"===document.readyState?ze(e):window.addEventListener("load",(()=>{ze(e)}),{once:!0})}(n),Ke.U.setIsServiceWorkerEnabled(!1))}var Xe=n(89123),Ye=n(1584),et=n(68793),tt=n(77331),nt=n(16822);var it=n(72488),rt=n(41710),ot=n(93450);var at=n(63263),st=n(61109),ct=n(33379),dt=n(6719);var lt,ut=n(38349),pt=n(76868),ht=n(75384),gt=n(32717),mt=n(59997),ft=n(55027),vt=n(75559);let yt;!function(e){e.topStories="topstory",e.breakingNews="breakingnews",e.socialReplies="socialreplies",e.socialReactions="socialreactions",e.socialFollowers="socialfollowers",e.socialAchievements="socialachievements",e.socialAlerts="socialalerts"}(lt||(lt={}));class St{constructor(e){this.resolvePushNotificationsSubscription=(e,t,n,i,o,a,s)=>(0,r.mG)(this,void 0,void 0,(function*(){const c=yield this.swRegistration.pushManager.getSubscription();if("denied"===Notification.permission)return;if(a.size<1&&(!c||"granted"!==Notification.permission))return;if(c)return void St.updateSubscriptions(c,e,a);let d="granted"===Notification.permission;const l=d;let u="";const{defaultNotification:p,defaultNotificationPromptAllow:h,defaultNotificationPromptBlock:g,defaultNotificationPromptDefault:m}=St.buildDefaultNotificationPermissionPromptTelemetryElement(s);if(!d){let e;switch(ce.M0.sendContentViewEvent(p,vt.NS.View),u=yield Notification.requestPermission(),u){case"granted":e=h,d=!0;break;case"denied":e=g;break;default:e=m}ce.M0.sendActionEvent(e,de.Aw.Click,de.wu.Undefined)}if(!d)return;if(fetch(e+"/webpush/key").then((t=>(0,r.mG)(this,void 0,void 0,(function*(){if(t.ok){const n=yield this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:St.urlB64ToUint8Array((yield t.json()).key)});St.updateSubscriptions(n,e,a)}else ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.fcE),{message:"Error fetching key for subscribing to push notifications endpoint",pb:Object.assign(Object.assign({},le.fcE.pb),{customMessage:`HTTP Status: ${t.status}`})}))})))),!l){const e={body:n,tag:"web-notification",icon:o,data:{url:Ee.c.getAbsoluteUrl(i)}};"edge"===b.Al.ClientSettings.browser.browserType?this.swRegistration.showNotification(t,e):new Notification(t,e)}})),this.swRegistration=e}static getInstance(){return yt}static initializePushSubscriptionManager(e){"string"==typeof e?this.initializeFromScope(e):this.initializeFromRegistration(e)}static initializeFromRegistration(e){yt=new St(e)}static initializeFromScope(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield navigator.serviceWorker.ready,St.initializePushSubscriptionManager(yield navigator.serviceWorker.getRegistration(e))}))}static urlB64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}static addTelemetryTagsToElement(e,t,n){const i={name:n},r=t?t.addOrUpdateChild(i):null,o=r.render();return Object.keys(o).forEach((t=>{e.setAttribute(t,o[t])})),r}static buildDefaultNotificationPermissionPromptTelemetryElement(e){const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");t.appendChild(n),t.appendChild(i),t.appendChild(r);const o=St.addTelemetryTagsToElement(t,e,"browserNativeNotificationPermissionPrompt");return St.addTelemetryTagsToElement(n,o,"Accept"),St.addTelemetryTagsToElement(i,o,"Block"),St.addTelemetryTagsToElement(r,o,"Default"),{defaultNotification:t,defaultNotificationPromptAllow:n,defaultNotificationPromptBlock:i,defaultNotificationPromptDefault:r}}static updateSubscriptions(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const i=Object.values(lt).filter((e=>!n.has(e)));[{segment:"subscribe",tags:[...n]},{segment:"unsubscribe",tags:i}].forEach((n=>(0,r.mG)(this,void 0,void 0,(function*(){if(n.tags.length<1)return;const i=n.tags.join(";"),r=t+"/webpush/news/"+b.Al.Locale+"/v1/webpush/"+n.segment+"?scn=MSNRPSAuth",o=yield fetch(r,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Tags:i},body:JSON.stringify({subscription:e})});o.ok?o.json().then((e=>{"Success"!==e.message&&ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.M7L),{message:"Response contained unexpected value when subscribing or unsubscribing from push notifications endpoint",pb:Object.assign(Object.assign({},le.M7L.pb),{customMessage:`Expected response message to be 'Success' but instead was ${e.message} when receiving response from endpoint at ${r}`})}))})):ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.M7L),{message:"HTTP error when making subscribe or unsubscribe call from push notifications endpoint",pb:Object.assign(Object.assign({},le.M7L.pb),{customMessage:`Response status was ${o.status} when attempting to communicate with the endpoint at ${r}`})}))}))))}))}}var Ct=n(32758),bt=n(53301);const wt=(0,g.k)((function(){window.pageYOffset>0&&kt()}),0);let Tt=!1;function kt(){const e=(0,Ge.S0)();e&&bt.g.updateBelowTheFoldTransitionStart.getActionSender(e).send(!0),Tt=!0,window.removeEventListener("scroll",wt)}const Pt={initialize:function(){window.addEventListener("scroll",wt,{passive:!0})},handleSettingUpdate:function(e){Tt||"always"!==e&&"headingsonly"!==e&&"peek"!==e||kt()}};var At=n(27003),It=n(83705),Et=n(99452),xt=n(65932),Mt=n(82423),Ot=n(3931),Lt=n(7781),Dt=n(82749),Rt=n(54291),Ft=n(20782),Bt=n(96470),Nt=n(58869),Ut=n(1033),$t=n(47266),_t=n(37180),Ht=n(16436),Wt=n(68848),jt=n(25964),Gt=n(85068),Vt=n(45896),qt=n(43178),zt=n(71219),Qt=n(65453),Zt=n(97555),Kt=n(49286),Jt=n(57945),Xt=n(791);const Yt="ntps";var en=n(51671);function tn(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(!window.navigator.cookieEnabled)return;yield(0,en.rr)();let i="";try{i=yield function(){var e,t;return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield Xt.N.getPdpUserPreference(!0);if(!n||!n.value||0===n.value.length)return"";const i=n.value[0];return i&&null!==(t=null===(e=i.userSettings)||void 0===e?void 0:e.preferredMarket)&&void 0!==t?t:""}))}()}catch(e){return void(0,pe.H)(le.Xa2,"There was an error getting preferredMarket from PDP services.")}const o=function(){let e="";const t=(0,se.ej)(Yt);if(!t)return"";const n=JSON.parse(t);n&&n.m&&(e=n.m);return e}();let a=!1,s="";if(s=(0,f.$o)().getItem("marketConsolidationTmpl"),i)o?i!==o?(t&&(n&&(s=`MarketConsolidationSync_Mismatch_${i}_${o}`,e(i),(0,f.$o)().setObject("showMarketRoamingCoachmark",!0)),a=!0),(0,pe.H)(le.i05,`Market missmatch. Server market: ${i}, Client market: ${o}`)):i!==o||s||(s="MarketConsolidationSync_Match",a=!0):(n&&(s="MarketConsolidationSync_Client_"+i,e(i)),a=!0);else if(o&&(a=!0,n)){(yield Xt.N.updateMarketPreference(o))?s="MarketConsolidationSync_Server_"+o:(a=!1,(0,pe.H)(le.zm9,"There was an error updating preferredMarket."))}s&&(0,f.$o)().setItem("marketConsolidationTmpl",s),(a||s)&&(ce.M0.addOrUpdateTmplProperty("MarketConsolidationSync",a&&n?"1":"0"),ce.M0.addOrUpdateTmplProperty(s,"1"))}))}var nn=n(37890),rn=n(64664),on=n(86331),an=n(37526);const sn="new_device_experimentation.ntp_feed_below_the_fold_should_show_withdrawal_dialog";var cn=n(18461),dn=n(58475),ln=n(12037),un=n(88195),pn=n(57405),hn=n(25859),gn=n(29442),mn=n(49218),fn=n(19628);function vn(e,t,n,i){if((e=e.filter((e=>!!e)))&&e.length>0)return mn.dy`<img src=${e[0]}
                     class="${i||""}"
                     height=${t}
                     width=${t}
                     alt="${n}" />`}function yn(e,t,n,i){if(e)return function(e,t,n,i,r){return{weatherTelemetryObject:Sn(e,t,de.wu.Navigate,de.uH.Greeting,"Weather",n,i,r)}}(e,"WeatherOneLiner",t,n,i)}function Sn(e,t,n,i,r,o,a,s){return e.addOrUpdateChild({name:t,behavior:n,content:{headline:s||t,type:i,vertical:r,category:o},overrideDestinationUrl:a||""})}var Cn=n(35114);const bn="localhost.msn.com"===(0,Ze.Td)(),wn=300;let Tn="";const kn="https://assets.msn.com/statics/icons/favicon_newtabpage.png",Pn="gaming",An=(0,ve.AF)("feedDependencies",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("common-contentcard"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_icons-wc_icons_ThumbDown_svg-libs_icons-wc_icons_ThumbDownFilled_svg-libs_icons-wc_icons-26649f"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js-node_modules_fluentui_svg-icons_-8f340f"),n.e("feedDependencies")]).then(n.bind(n,75633)))),In=(0,ve.AF)("feedDependenciesGaming",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("common-contentcard"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_icons-wc_icons_ThumbDown_svg-libs_icons-wc_icons_ThumbDownFilled_svg-libs_icons-wc_icons-26649f"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js-node_modules_fluentui_svg-icons_-8f340f"),n.e("feedDependenciesGaming")]).then(n.bind(n,68014))));class En extends Fe.l{constructor(){super(...arguments),this.showWeatherOneLiner=!1,this.isWeatherOneLinerMapped=!1,this.showFeedTranslucent=!0,this.enableHiddenRecommendedSitesStyles=!1,this.brandZoneShowInRecommendedSites=!1,this.brandZoneSize="large",this.edgeHeaderTopMarin=10,this.hideComplianceLink=!1,this.showGreeting=!0,this.isNotificationEnabledByAdmin=!0,this.isShowMSRewardsAllowedByPolicy=!0,this.isShowRewardsAllowedByLocation=!1,this.isAppLauncherAllowedByPolicy=!0,this.enableMobileAppUpsell=!1,this.marketToggleCanFit=!0,this.className="",this.disableStickyHeader=!1,this.canaryFlightEnabled=!1,this.holidayEffectsPosition="display: none;",this.displayConditionalBanner=!1,this.isOnPersonalizeOrM365Page=!1,this.nowPivotId="",this.hideQuickLinks=!1,this.hideOneLineTopSites=!1,this.isNewTabPageContentManagedByPolicy=!1,this.hideSearchHistory=!1,this.headerCoreOffset=0,this.stickyHeaderHeight=M.FQ,this.navHeight=M.A$,this.isSearchSticky=!1,this.hasEnoughSpaceForNotificationMiniCard=!0,this.enableNotificationAnimation=!1,this.searchStickyBreakpoint=0,this.skeletonCardArray=Array(18),this.isImageHiddenAndNotDark=!1,this.hideSearchBox=!1,this.isScrollDownButtonDismissed=!1,this.topSitesQuickLinkEndMarginUsedPadding=0,this.skeletonRemoved=!1,this.museumCardShown=!1,this.scrollIsPastStyleThreshold=!0,this.brandZoneSizeHeightMapping={large:{[B.K$.c1]:0,[B.K$.c2]:311,[B.K$.c3]:371,[B.K$.c4]:371,[B.K$.c5]:371},medium:{[B.K$.c1]:0,[B.K$.c2]:271,[B.K$.c3]:331,[B.K$.c4]:331,[B.K$.c5]:331},small:{[B.K$.c1]:0,[B.K$.c2]:221,[B.K$.c3]:281,[B.K$.c4]:281,[B.K$.c5]:281}},this.msNtpExpBitmask="",this.multiLineSearchBox=!1,this.showCodexBingWithNonBingDSE=!1,this.headingsOnlyHeightReduction=0,this.overriddenFeedConfig=null,this.overlapState=0,this.marqueeAdActive=!1,this.marqueeAdOverlayHeight=0,this.marqueeAdHeight=oe,this.msNtpExpIds=[],this.recommendedSitesSelection=e=>{var t,n,i;(null==e?void 0:e.detail)&&(this.recommendedSitesDisplaySetting=null!==(t=null==e?void 0:e.detail.key)&&void 0!==t?t:this.recommendedSitesDisplaySetting,this.brandZoneShowInRecommendedSites=null!==(n=null==e?void 0:e.detail.showBrandZone)&&void 0!==n?n:this.brandZoneShowInRecommendedSites,this.brandZoneSize=null!==(i=null==e?void 0:e.detail.brandZoneSize)&&void 0!==i?i:this.brandZoneSize,this.refreshHeaderHeight(),this.updateHeaderGrid(),this.calculateTopAndBackgroundStickyBreakpoints())},this.displayQuickLinks=()=>{this.hideQuickLinks=!1,this.topSitesHolder.style.visibility="",this.updateAfterWheelingToDisplayMore()},this.updateAfterWheelingToDisplayMore=()=>{this.calculateStickyBreakpoints(),this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),this.refreshHeaderHeight(),window.removeEventListener("wheel",this.quickLinksToggle)},this.quickLinksToggle=e=>{if("always"!==this.layoutState.selectedFeedDisplaySetting)return;const{selectedQuickLinksDisplaySetting:t}=this.layoutState;if(![O.Z3.onerow,O.Z3.tworows,O.Z3.top].includes(t))return;0===(document.documentElement?document.documentElement:document.body).scrollTop&&e.deltaY<0&&this.hideQuickLinks&&this.displayQuickLinks()},this.smoothScrollToNav=e=>{const t=scrollY,n=e-t;let i;n&&window.requestAnimationFrame((function e(r){i=i||r;const o=r-i,a=Math.min(o/500,1);var s;window.scrollTo(0,t+n*((s=a)<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1)),o<500&&window.requestAnimationFrame(e)}))},this.quickScrollToTop=e=>{const{selectedFeedDisplaySetting:t}=this.layoutState,n=e.wheelDelta<0,i="peek"===t,r="headingsonly"===t;let o=0;r?o=window.innerHeight-151:i&&(o=this.getHeaderHeightForPeekMode()-92),n&&(i||r)&&scrollY<o&&(e.preventDefault(),this.smoothScrollToNav(o))},this.controlNewTabSettings=()=>{Tn=document.title;const e=document.querySelector('head link[rel="icon"]');if(e)e.href=kn;else{const e=document.createElement("link");e.rel="icon",e.href=kn,e.type="image/png",document.head.appendChild(e)}},this.changeNewTabSettings=e=>{document.title=e?"Microsoft Start":Tn;const t=document.querySelector('head link[rel="icon"]');t&&(t.href=e?"https://assets.msn.com/statics/icons/Microsoft_16_SVG.ico":kn)},this.dismissNotificationMiniCard=(e="manual")=>{Nt.u.dismissNotificationMiniCard(e)},this.areNavTopSitesOverlapping=(0,$e.Z)((()=>{if("hidden"===document.visibilityState||!this.nav||!this.topSitesHolder||"hidden"===this.topSitesHolder.style.visibility||!this.topSitesHolder.children.length||"1"!==this.topSitesHolder.style.opacity&&""!==this.topSitesHolder.style.opacity)return;if(this.topSitesHolder.children[0]&&0===this.topSitesHolder.children[0].offsetHeight)return;const e=this.nav.getBoundingClientRect(),t=this.topSitesHolder.getBoundingClientRect();this.checkAndLogRectsOverlapping(e,t)}),500),this.initFeedDependencies=e=>{this.getFeedDependencyPromise=e===Pn?In().then((({FeedManagerWithClientAd:e,GamingLayoutTemplateMap:t})=>{const n=t,i=new e({disablePreloadLikelyExperiences:this.layoutState.currentLayout!==O.nP.informational});return this.msNtpExpBitmask&&(i.edgExpMask=this.msNtpExpBitmask),{feedManager:i,layoutTemplateMap:n}})):An().then((({FeedManagerWithClientAd:e,AnaheimLayoutTemplateMap:t,AnaheimWaterfallLayoutTemplateMap:n,AnaheimWaterfallLayoutTemplateFallbackMap:i})=>{const r=this.config.enableFeed3Cards?Object.assign(Object.assign({},n),t):Object.assign(Object.assign({},t),i),o=new e({disablePreloadLikelyExperiences:this.layoutState.currentLayout!==O.nP.informational});return this.config.enableChannelFiltering&&Ht.followingExperienceManager.setFeedManager(o),this.msNtpExpBitmask&&(o.edgExpMask=this.msNtpExpBitmask),{feedManager:o,layoutTemplateMap:r}})),this.getFeedDependencyPromise.catch((t=>{const n=Object.assign(Object.assign({},le.dp6.pb),{stack:t.stack});(0,Jt.Y)(le.dp6.id),ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.dp6),{message:`Failed to load feedDependencies bundle for ${e}. ${t.message||""}`,pb:n}))}))},this.scrollToShowFeed=()=>{const e=(0,Ne.Nu)(q);e&&window.scrollTo({top:e-8,behavior:"smooth"})},this.changeContentOffToVisible=()=>{const e=(0,Mt.K0)(o.z.ChromiumPageSettings);e&&e.updateFeeds("always","off","scrollDownButton")},this.getExperienceConfigInfo=(e,t=e,n="default")=>({instanceId:e,configRef:{experienceType:t,instanceSrc:n}}),this.topSitesIntersectionObserverCallback=e=>{var t;if(this.topSitesHolder&&(!this.layoutState.quickLinksEnabled||"off"===this.layoutState.selectedQuickLinksDisplaySetting))return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");const n=e[e.length-1];let i,r,o;(null===(t=this.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)&&this.disableStickyHeader||!(n.intersectionRatio<=.99)||"top"===this.layoutState.selectedQuickLinksDisplaySetting?(i=1,r="",o=""):(i=0,r="none",o="1"),this.topSitesHolder.style.opacity=`${i>1?1:i}`,this.topSitesHolder.style.pointerEvents=r,this.topSitesHolder.style.zIndex=o},this.setupTopSitesIntersectionObserver=()=>{const e={root:null,rootMargin:`${this.hideSearchBox?-44:-117}px 0px 0px 0px`,threshold:[.99]};this.topSitesObserver=new IntersectionObserver(this.topSitesIntersectionObserverCallback,e),this.topSitesObserver.observe(this.topSitesHolder)},this.onResize=()=>{const e=this.showCodexBingWithNonBingDSE;if(this.checkCodexBingFlagWithNonBingDSE(),e!=this.showCodexBingWithNonBingDSE&&this.updateHeaderGrid(),this.refreshHeaderHeight(),this.refreshImageHeight(),this.calculateStickyBreakpointsDebounced(),this.renderBackgroundGallery&&this.checkGalleryPageFitAndDisplayToast(),this.renderMarketLanguageToggle&&(this.checkMarketToggleFitOnPage()||(this.marketToggleCanFit=!1,this.updateHeaderCoreData())),this.config.enableRiverZoomStamping&&this.setZoomTmpl(),this.config.bgMuseumCdBtnMoveToBottom&&this.overlapStateChange(),this.config.childRefs.notificationMiniCard)if(this.config.feeds3HeaderDecrease)this.hasEnoughSpaceForNotificationMiniCard=!0;else if(this.quickLinksDisplaySetting===O.Z3.onerow)this.hasEnoughSpaceForNotificationMiniCard="always"!==this.layoutState.selectedFeedDisplaySetting||innerWidth>=1466;else this.hasEnoughSpaceForNotificationMiniCard=!0},this.onScroll=(0,g.k)((()=>{var e,t,n;if(this.marqueeAdActive){this.updateHeaderGrid();const e=0===window.scrollY,t=this.shadowRoot.querySelector("cs-header-core");t&&(e?(t.start.classList.remove("header_hidden"),t.end.classList.remove("header_hidden")):(t.start.classList.add("header_hidden"),t.end.classList.add("header_hidden")))}const i=window.scrollY<100,r=window.scrollY>M.FT;i==this.scrollIsPastStyleThreshold&&r==this.navIsSticky||(this.scrollIsPastStyleThreshold=i,this.navIsSticky=r,this.refreshTranslucentMode());const o=window.scrollY>M.FT-this.recommendedSitesHeight;if(this.hideOneLineTopSites=this.quickLinksDisplaySetting===O.Z3.top&&window.scrollY>M.FT-M.jb,this.navIsSticky&&ce.M0.addOrUpdateTmplProperty("StickyBreakpointTriggered","1"),this.config.translucentFeed&&(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.enableTranslucentFeed)&&this.layoutState.currentBackgroundImageType!==O.HX.off&&this.layoutState.currentBackgroundImageType!==O.HX.theme&&(o&&!(null===(t=this.config.translucentFeed)||void 0===t?void 0:t.disableSticky)?(0,m.j3)("backgroundImage","hidden"):(0,m.j3)("backgroundImage","displayed")),this.config.complianceHyperlink&&this.updateComplianceLinkStyleOnScroll(),this.config.useNewTabSettings&&this.changeNewTabSettings(this.navIsSticky),this.config.noBckImgOnNavSticky){const e="off"===this.layoutState.currentBackgroundImageType||this.navIsSticky;this.showBackplate=e,(0,m.j3)("backgroundImage",e?"hidden":"displayed")}this.updateHeaderCoreOffset(),this.isSearchSticky=!this.disableStickyHeader&&!this.config.disableFeed&&("always"===this.layoutState.selectedFeedDisplaySetting||window.scrollY>this.searchStickyBreakpoint),this.config.showCodexBingNudge&&(0!=scrollY?(this.showCodexBingWithNonBingDSE=!1,this.updateHeaderCoreBelowSearchData()):this.checkCodexBingFlagWithNonBingDSE()),this.config.enableHeadingsOnlyCardSlivers&&this.displayBlankRiver&&(this.handleCardSliversOnScroll(),this.stampScrollTmpl()),"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.scrollDownButton&&(this.scrollDownButton=null===(n=this.shadowRoot.querySelector(".navAndContent"))||void 0===n?void 0:n.querySelector("#scrollDownButtonContainer"),this.scrollDownButton&&(this.scrollDownButton.style.display=0!=scrollY?"none":"flex")),this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),("focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType)&&(this.config.enableFocusFeedBorder||this.config.enableFocusFeedShadow||this.config.enableFocusFeedLighterShade||this.config.enableFocusFeedGradient)&&this.focusFeedBorderScrollFade()})),this.shouldShowFocusBorder=()=>{if("focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType){if(this.config.enableFocusFeedBorder)return"navAndContent_border navAndContent_border_line "+(0!=window.scrollY?"navAndContent_noborder":"");if(this.config.enableFocusFeedShadow)return"navAndContent_border navAndContent_border_shadow "+(0!=window.scrollY?"navAndContent_noshadow":"");if(this.config.enableFocusFeedLighterShade)return"navAndContent_border navAndContent_border_lighterShade "+(0!=window.scrollY?"navAndContent_nolighterShade":"");if(this.config.enableFocusFeedGradient)return"navAndContent_border navAndContent_border_gradient "+(0!=window.scrollY?"navAndContent_nogradient":"")}return""},this.updateComplianceLinkStyleOnScroll=()=>{const e=window.scrollY>0;e!==this.hideComplianceLink&&(this.hideComplianceLink=e,this.hideComplianceLink?this.complianceHyperlink&&this.complianceHyperlink.classList.add("complianceHyperlink_hide"):this.complianceHyperlink&&this.complianceHyperlink.classList.remove("complianceHyperlink_hide"))},this.calculateStickyBreakpointsDebounced=(0,$e.Z)(this.calculateStickyBreakpoints,wn),this.checkPinProngCoachMarkShouldDisplay=()=>{var e,t;const n=null===(e=null===window||void 0===window?void 0:window.screen)||void 0===e?void 0:e.availWidth;n&&n>=1024&&navigator&&(null===(t=navigator.userAgentData.getHighEntropyValues(["platformVersion"]))||void 0===t||t.then((e=>{if("Windows"===navigator.userAgentData.platform){const t=parseInt(e.platformVersion.split(".")[0]);t>0&&t<13&&this.callNurturingToTriggerPinProng("ms-newsandinterests:?pc=ntp_repin")}})))},this.callNurturingToTriggerPinProng=e=>{var t,n,i,r,o,a,s,c,d,l;const u=this.config.onlyEnableCoachmarkHeading?null===(t=this.strings)||void 0===t?void 0:t.pinProng1BannerDescription1:null===(n=this.strings)||void 0===n?void 0:n.pinProng1CoachmarkHeadingText,p=this.config.onlyEnableCoachmarkHeading?" ":null===(i=this.strings)||void 0===i?void 0:i.pinProng1CoachmarkBodyText,h={id:on.gz.PinProng1Flyout,group:Gt.V.Functional,placementSource:Gt.m.Internal,surfaceModel:{surfaceType:Vt.U.Coachmark,size:on.dm.Large,position:on.pY.BottomEnd},contentModel:{title:(null===(r=this.config)||void 0===r?void 0:r.pinProng1CoachmarkHeadingText)||u||"Open Windows News and Interests to see your weather, sports, finance, and so much more!",description:(null===(o=this.config)||void 0===o?void 0:o.pinProng1CoachmarkBodyText)||p||" ",contentType:qt.J.CallToAction,contentImage:{url:"https://assets.msn.com/staticsb/statics/latest/windowsShell/images/pin-over-v2.png",altText:"Image Alt Text"},dismissContentAction:{label:(null===(a=this.config)||void 0===a?void 0:a.pinProngCloseBtnLabel)||(null===(s=this.strings)||void 0===s?void 0:s.pinProngCloseBtnLabel)||"No thanks"},engageContentAction:{label:(null===(c=this.config)||void 0===c?void 0:c.pinProngEngageBtnLabel)||(null===(d=this.strings)||void 0===d?void 0:d.pinProngEngageBtnLabel)||"Try it now",actionDelegate:()=>{window.open(e,"_self")}}}},g=[(0,zt.H)(Qt.p.Viewed,6048e5),(0,Zt.l)(Qt.p.Viewed,3),(0,Zt.l)(Qt.p.Dismissed,1),(0,Zt.l)(Qt.p.Closed,1),(0,Zt.l)(Qt.p.Engaged,1)];null===(l=(0,Kt.$0)())||void 0===l||l.sendInternalPlacement(h,g)},this.getCompanyLogoFromLocalStorage=()=>{const e=(0,f.$o)().supported&&(0,f.$o)().getObject("companyLogo",null);if(!e||!e.default_logo)return"";return!this.layoutState.imageOfTheDayEnabled||!e.light_logo?e.default_logo||"":e.light_logo||""},this.onFlyoutEvent=(e,t)=>{var n,i,r,o,a;let s;switch(e){case v.tk.settings:case v.tk.msRewards:case v.tk.notificationBell:case v.tk.signInControl:case v.tk.mobileAppUpsell:s=this.hideSearchBox?this.headerCoreRef:null===(n=this.headerCoreRef)||void 0===n?void 0:n.end;break;case v.tk.search:case v.tk.imageSearch:case v.tk.voiceSearchWC:case v.tk.dailyDiscovery:s=this.hideSearchBox?this.headerCoreRef:null===(i=this.headerCoreRef)||void 0===i?void 0:i.core;break;case v.tk.searchHistoryMoreOptions:case v.tk.newsHeadlineBelowSearchboxMoreOptions:s=this.hideSearchBox?this.headerCoreRef:null===(r=this.headerCoreRef)||void 0===r?void 0:r.belowSearch;break;case v.tk.waffle:case v.tk.editWelcomeGreeting:s=this.hideSearchBox?this.headerCoreRef:null===(o=this.headerCoreRef)||void 0===o?void 0:o.start;break;case v.tk.addTopSite:case v.tk.editTopSite:case v.tk.topSiteOverflowPanel:s=this.topSitesHolder;break;case v.tk.museumCard:this.museumCardShown=t;break;case v.tk.locationMarkerCard:s=this.shadowRoot.getElementById("locationMarkerHolder");break;case v.tk.recommendedSitesSetting:s=this.shadowRoot.getElementById("recommendedSites")}if(s&&(s.style.zIndex=t?y.K.Flyout.toString():null),s&&e===v.tk.dailyDiscovery&&!t&&((0,v.YN)(v.tk.search)?s.style.zIndex=y.K.Flyout.toString():s.style.zIndex=null),s&&e===v.tk.settings&&(s.style.zIndex=t?y.K.Flyout.toString():null),e===v.tk.topSiteOverflowPanel&&(s.style.zIndex=t?(y.K.Flyout+1).toString():null),this.quickLinksDisplaySetting===O.Z3.top&&s===this.topSitesHolder&&e!==v.tk.topSiteOverflowPanel&&(s.style.zIndex=(y.K.Flyout+1).toString()),e!==v.tk.hamburgerMenu&&e!==v.tk.navOverflow||(this.headerCoreRef&&((null===(a=this.config)||void 0===a?void 0:a.enableTopNav)?this.headerCoreRef.style.zIndex=t?(y.K.Flyout+1).toString():(y.K.Nav+2).toString():this.headerCoreRef.style.zIndex=t?"302":(y.K.Nav+2).toString()),this.quickLinksDisplaySetting===O.Z3.top&&(this.topSitesHolder.style.zIndex=t?"302":(y.K.Nav+2).toString())),e===v.tk.toast&&this.quickLinksDisplaySetting!==O.Z3.top&&(this.topSitesHolder.style.zIndex=t?(y.K.Nav+1).toString():(y.K.Over+3).toString()),e===v.tk.actionMenuOpen){const e=this.shadowRoot.getElementById("g_nav");(null==e?void 0:e.style)&&(e.style.zIndex=t?"0":"")}},this.switchListenerCallback=e=>{var t,n;if(this.isOnPersonalizeOrM365Page=!1,this.isOnM365Page=!1,this.nowPivotId=(null===(t=null==e?void 0:e.newSelection)||void 0===t?void 0:t.pivotId)||"",e&&e.newSelection){const t=e.newSelection;this.startContentLoad(t.configIndexRef,t.context,void 0,t.pivotId),this.isOnM365Page="productivityhub"===t.pivotId.toLocaleLowerCase(),this.isOnPersonalizeOrM365Page="myInterests"===t.pivotId||this.isOnM365Page||"navigationPage"===t.pivotId}if(this.canShowTopNav){if(e.oldSelection&&!this.isAlwaysMode){if(!this.pageSettingsDataConnector)return;if(this.nowPivotId===e.oldSelection.pivotId||void 0===(null===(n=e.newSelection)||void 0===n?void 0:n.context))return;const t=Object.assign(Object.assign({},this.layoutState),{originalLayout:this.layoutState.currentLayout,currentLayout:O.nP.custom,selectedFeedDisplaySetting:"always"});this.pageSettingsDataConnector.updateStateOnce(t)}}else e.oldSelection&&!this.transitionFromContentOff&&this.scrollToShowFeed();this.transitionFromContentOff=!1},this.handleColumnArrangementChange=e=>{if(this.columnArrangement=e,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,ce.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),this.config.enableMarqueeAd&&this.updateMarqueeAdHeightByColumn(e),this.updateHeaderGrid(),(0,ct.N)()){this.shadowRoot.querySelector("background-image").recommendedSitesHeight=this.recommendedSitesHeight}ce.M0.updatePageMetadata({page:{viewType:(0,N.vi)()}},!0),this.config.companyLogo&&(this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement)),this.refreshHeaderHeight(),this.updateHeaderCoreData()},this.onHeaderSpaceHolderTransitionEnd=()=>{ft.I.headerTransitionEnd.getActionSender(this.pageSettingsDataConnector).send()},this.onMarketValueChange=e=>(0,r.mG)(this,void 0,void 0,(function*(){var t;this.pageSettingsDataConnector||(this.pageSettingsDataConnector=(0,Mt.K0)(o.z.ChromiumPageSettings)),e&&this.pageSettingsDataConnector&&(null===(t=D.V.marketUpdated.getActionSender(this.pageSettingsDataConnector))||void 0===t||t.send(e),(0,ut.yV)(pt.y.MarketChange))})),this.updateLanguageToggle=()=>{if("language"==S.jG.MarketMismatchDetail.type){const e=this.targetLanguageOnMismatch(a);e&&(this.renderMarketLanguageToggle=!0,this.localeMarket=e,"marketmismatch"===S.jG.LanguageRegionMismatchExplicit?ce.M0.addOrUpdateTmplProperty("marketMismatchToggleForExplicitMismatch","1"):"marketmismatch"===S.jG.LanguageRegionMismatch&&ce.M0.addOrUpdateTmplProperty("marketMismatchForToggle","1"))}},this.setOverriddenFeedConfig=e=>{this.overriddenFeedConfig=Object.assign({},e)},this.saveViewportInPref=()=>{if((0,ct.N)()){const{innerWidth:e,innerHeight:t}=window;ye.U.savePreferenceSetting(Se.Xm.viewport,{width:e,height:t},!1)}},this.focusControlOnWheel=e=>{this.blurGridViewWhenActive(e.target)},this.focusControlOnScrollKeyUp=e=>{"PageDown"!=e.key&&"PageUp"!=e.key||this.blurGridViewWhenActive(e.target)},this.updateMarqueeAdHeightByColumn=e=>{e===B.K$.c1||e===B.K$.c2?this.marqueeAdHeight=ae:this.marqueeAdHeight=oe},this.overlapStateChange=(0,$e.Z)((()=>{const e=this.config.fixedParentSpace?this.navAndContentRef:this.navAndContentFeedRef;if(!(0,ct.N)()||!e)return void(this.overlapState=0);const t=((0,C.Nd)((new C.fH).data.innerWidth,"innerWidth")-e.getBoundingClientRect().width)/2;this.overlapState=t>=42?0:t<=0?2:1}),10),this.scrollToHideSearchBox=()=>{this.config.scrollToHideSearchBox&&this.layoutState.hideSearchBox&&"always"===this.layoutState.selectedFeedDisplaySetting&&(this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.tworows||this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.onerow)&&window.scrollTo({top:46+this.edgeHeaderTopMarin})}}get canShowTopNav(){return this.config&&this.config.enableTopNav&&this.layoutState&&"off"!==this.layoutState.selectedFeedDisplaySetting&&!this.config.disableFeed}get isTopSitesMovedUp(){return this.hideSearchBox&&this.isAlwaysMode&&this.quickLinksDisplaySetting!==O.Z3.off&&this.quickLinksDisplaySetting!==O.Z3.top}get topBannerOffsetHeight(){if(!this.displayConditionalBanner)return 0;return this.quickLinksDisplaySetting===O.Z3.top&&!this.hideOneLineTopSites?48:46}get topSitesOffsetHeight(){return this.quickLinksDisplaySetting===O.Z3.top&&!this.hideOneLineTopSites?M.jb:0}get responsiveSupported(){return this.config.enableResponsiveFeed&&"myFeed"===this.getSelectedPivot(this.layoutState)}get topSitesHeightBelowSearchBoxForPeekMode(){const{selectedQuickLinksDisplaySetting:e}=this.layoutState,t=e==O.Z3.tworows;return e==O.Z3.off||e==O.Z3.top?0:this.columnArrangement>=B.K$.c3&&!t?90:174}get recommendedSitesHeight(){if(!this.childRefs.recommendedSites||this.recommendedSitesDisplaySetting===O.yR.off)return 0;if(this.config.enableBrandZoneInRecommendedSites&&this.brandZoneShowInRecommendedSites&&"c1"!==this.columnArrangement&&this.brandZoneSize&&this.columnArrangement&&this.brandZoneSizeHeightMapping[this.brandZoneSize][this.columnArrangement])return this.brandZoneSizeHeightMapping[this.brandZoneSize][this.columnArrangement];const e=this.config.enableBrandZoneInRecommendedSites?21:0;switch(this.recommendedSitesDisplaySetting){case O.yR.onerow:return 52+e;case O.yR.tworows:return 88+e;case O.yR.threerows:return 124+e;default:return 0}}experienceConnected(){var e,t,n,i,a,u,p,h,g,C,E;return(0,r.mG)(this,void 0,void 0,(function*(){if(this.disableStickyHeader=!!(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.disableSticky),this.updateStickyHeaderHeight(),(0,ue.hy)(!b.Al.IsPrerender,"Header"),"marketmismatch"===S.jG.LanguageRegionMismatch){"language"==S.jG.MarketMismatchDetail.type&&(0,ue.YJ)(s.x.marketLanguageToggleWC)}if(this.config.enableWpoTopSitesConfigOverride){const e=(0,Ye.R)();e&&(this.config.topSitesCollapsibleControlConfig=e)}this.config.enableMarqueeAd&&nn.o.initializeMarqueeAd(),this.config.enableLoaderFlight&&(this.skeletonObserver=new MutationObserver(this.skeletonObserverCallback),this.skeletonObserver.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})),Ut.SI.setShouldUsePromiseForEarlyFeed(!!this.config.enableEarlyMainFeedV2),this.childRefs=this.config.childRefs,this.updateHeaderCoreSearchData(),this.pageSettingsDataConnector=(0,Mt.K0)(o.z.ChromiumPageSettings),this.topSitesLayoutDataConnector=(0,Mt.K0)(o.z.TopSitesLayoutData);const x=(null===(t=null===S.jG||void 0===S.jG?void 0:S.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.audienceMode)===c.F.Enterprise;if(window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.getConfigData){const e=window.chrome.ntpSettingsPrivate.getConfigData;this.msNtpExpIds=yield(0,Ce.aT)((null==e?void 0:e.enabledFeatures)||[]),this.msNtpExpBitmask=(0,Ce._W)(this.msNtpExpIds),this.msNtpExpIds.length&&ce.M0.addOrUpdateTmplProperty("edgExpMask",this.msNtpExpIds.join("-"))}if((0,ct.N)()){this.marketLanguageConsolidation(),this.initializeDevTools();const e=((e=2)=>{let t="/";const n=window.location.pathname.split("/");if(n.length>e&&n[e]){t+=n[1];for(let i=2;i<=e;i++)t+="/"+n[i]}return t})(2);Je(bn?"service-worker.js":"./ntp/service-worker.js",this.config.serviceWorker,e,!1,(()=>(0,r.mG)(this,void 0,void 0,(function*(){St.initializePushSubscriptionManager(e)}))),(null===(n=this.config)||void 0===n?void 0:n.enableTrustedTypes)?Ce.nz:void 0);const t=function(e){const t=["enablePreRenderPartialResponseRoute","enableEarlyFeedFetchMsg","enableEarlyFeedFetch","enableEarlyFeedFetchMem","enableBaseResponseTeeNoOp","enableNetworkFirst","cacheAndNetworkRaceEnabled"].map((t=>t&&e[t]?1:0)).join(""),n=parseInt(t,2);return isNaN(n)?"":n}(this.config.serviceWorker||{});ce.M0.addOrUpdateTmplProperty("swfdbg",t.toString())}if(this.reportPerfMarkers(),function(e){if(!e.useEnterpriseCompliance)return;const t=ot._.getInstance().rootReducer.connector(o.z.SharedState),n=rt.s.useEnterpriseCompliance.getActionSender(t);n&&n.send(!0)}(this.config),this.config.preloadFeed){const{viewFeedConfig:e}=this.getViewFeedConfigAndPivot();(0,it.Fg)(e)}this.checkIPLocationForRewardsMedallion(),(0,ue.b1)().then((()=>{(0,w.L)()?b.Al.IsPrerender&&(0,ht.lr)().then((()=>{be.H.logEventWithTimestamp(be.v.NTP_VISUALLY_READY,b.Al.IsPrerender)})):be.H.logEventWithTimestamp(be.v.NTP_VISUALLY_READY,b.Al.IsPrerender),this.renderMarketLanguageToggle&&(this.checkMarketToggleFitOnPage()||(this.marketToggleCanFit=!1,this.updateHeaderCoreData()),ce.M0.addOrUpdateTmplProperty("marketToggleLoaded",this.marketToggleCanFit?"1":"0"))})),(0,v.WW)(this.onFlyoutEvent),this.columnArrangement=(0,N.Bn)().currentColumnArrangement,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,ce.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,N.Bn)().subscribe(this.handleColumnArrangementChange),Pt.initialize(),this.recommendedSitesDisplaySetting=this.childRefs.recommendedSites&&(yield(0,et.P6)({enableRecommendedSitesSelection:!0,enableWpoRecommededSitesConfigOverride:!!this.config.enableWpoRecommededSitesConfigOverride,enableRS1Row:!!this.config.enableRS1Row,enableRS2RowsOnly:!!this.config.enableRS2RowsOnly}));let M=!1;const F=new U.o;let B=!1,H=!1;(0,xt.Uo)(o.z.ChromiumPageSettings,(e=>(0,r.mG)(this,void 0,void 0,(function*(){var t,n,i;if(!e.isLoadCompleted)return;F.set();if(!("productivityHub"===(0,T.$z)()||"headingsonly"===e.selectedFeedDisplaySetting||"off"===e.selectedFeedDisplaySetting)&&!H&&this.config.enableSuperEarlyRequest){const e=(!x||this.config.enableEarlyMainFeedV2)&&(!(0,Ce.Tr)()&&!this.config.triggerLowMemDhp||this.config.noDisablePrerenderFeed);!this.config.enableEarlyMainFeedRequest||(null===b.Al||void 0===b.Al?void 0:b.Al.IsPrerender)&&!e||this.fetchAndStoreMainFeed(this.config.useSuperDataProvider),H=!0}const r=this.layoutState;this.layoutState=e;const a=At.Gq.get("__hydrationPromise__");b.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,ct.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted&&a&&(this.layoutState=window.ssrLayoutState,a.getResultAsync().then((()=>{(0,xt.T3)(o.z.ChromiumPageSettings,e)}))),r||B||!(null===(t=window.ssrLayoutState)||void 0===t?void 0:t.selectedFeedDisplaySetting)||window.ssrLayoutState.selectedFeedDisplaySetting===e.selectedFeedDisplaySetting||(ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.XDw),{message:"SSR Layout mismatch CSR Layout",pb:Object.assign(Object.assign({},le.XDw.pb),{customMessage:`SSR Layout:${null===(n=window.ssrLayoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting}; CSR Layout:${e.selectedFeedDisplaySetting}; edgeHeader: ${JSON.stringify(window.edgeNTPHeader)}`})})),B=!0),this.isAlwaysMode="always"===e.selectedFeedDisplaySetting,this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),!this.isAlwaysMode&&this.hideQuickLinks&&this.displayQuickLinks(),this.quickLinksDisplaySetting=e.selectedQuickLinksDisplaySetting;let s=!1,c=!1,d=!1,l=!1,u=!1;if(r){if(s=r.selectedQuickLinksDisplaySetting!==e.selectedQuickLinksDisplaySetting,c=r.selectedFeedDisplaySetting!==e.selectedFeedDisplaySetting,d=r.imageOfTheDayEnabled!==e.imageOfTheDayEnabled,l=r.currentLayout!==e.currentLayout,u=r.sponsoredContentEnabled!==e.sponsoredContentEnabled,this.transitionFromContentOff=(null===(i=this.config.translucentFeed)||void 0===i?void 0:i.enableTranslucentFeed)&&"off"===r.selectedFeedDisplaySetting&&"off"!==e.selectedFeedDisplaySetting,s){const t=e.selectedQuickLinksDisplaySetting===O.Z3.onerow||e.selectedQuickLinksDisplaySetting===O.Z3.tworows||e.selectedQuickLinksDisplaySetting===O.Z3.top;this.handleTopSitesEnableChange(t,e)}c&&(window.setTimeout((()=>{Pt.handleSettingUpdate(e.selectedFeedDisplaySetting)}),0),this.marqueeAdActive&&"always"!==e.selectedFeedDisplaySetting&&(this.marqueeAdActive=!1,window.setTimeout((()=>{this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)}))),this.config.enableHeadingsOnlyCardSlivers&&(this.displayBlankRiver=!1)),!l||e.currentLayout!=O.nP.informational&&e.currentLayout!=O.nP.inspirational||Lt.p.resetAppliedBackgroundAndToggleStorage(e.currentLayout),l&&ce.M0.addOrUpdateTmplProperty("layoutChanged","1"),u&&!e.sponsoredContentEnabled&&(this.marqueeAdActive=!1,window.requestAnimationFrame((()=>{this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)}))),this.config.enableMarqueeAd&&l&&e.currentLayout!==O.nP.informational&&(this.marqueeAdActive=!1,window.requestAnimationFrame((()=>{this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)})))}if(this.multiLineSearchBox=this.config.enableMultiLineSearchBox,this.checkCodexBingFlagWithNonBingDSE(),this.config.hidableSearchBox){const e=this.layoutState.hideSearchBox&&"always"===this.layoutState.selectedFeedDisplaySetting,t=r&&e!==this.hideSearchBox;this.hideSearchBox=e,t&&this.hideSearchBox&&(0,v.YN)(v.tk.settings)&&(this.headerCoreRef.style.zIndex=y.K.Flyout.toString())}if(this.canShowTopNav&&(this.edgeHeaderTopMarin=8),this.updateHeaderGrid(),this.refreshTranslucentMode(),this.refreshHeaderHeight(),this.updateHeaderCoreData(),this.updateHeaderCoreOffset(),r&&!c||(this.isSearchSticky=!this.disableStickyHeader&&!this.config.disableFeed&&"always"===this.layoutState.selectedFeedDisplaySetting),(0,ct.N)()){if((0,Ue.Vo)(M),M=!0,r){if((s||c||d)&&(this.fireLayoutAnimationComplete(),scrollTo(0,0),yield(0,k.rh)(400),this.config.noBckImgOnNavSticky&&0===window.scrollY)){const e="off"===this.layoutState.currentBackgroundImageType;(0,m.j3)("backgroundImage",e?"hidden":"displayed")}yield(0,Be.y)(),this.calculateStickyBreakpoints()}this.config.companyLogo&&this.layoutState.isCompanyLogoEnabledByPolicy&&this.getCompanyLogo(),"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.scrollDownButton&&(this.isScrollDownButtonDismissed=this.layoutState.isScrollDownButtonDismissed),yield(0,Be.y)(),this.config.useNewTabSettings&&this.changeNewTabSettings(this.navIsSticky)}}))));const W=this.getSelectedPivot(this.layoutState),j=x?"productivityHub"!==W:"following"!==W;this.config.enableHeadingsOnlyCardSlivers&&j&&(this.headingsOnlyHeightReduction=this.config.headingsOnlyHeightReduction||0,(0,ct.N)()&&Promise.all([(0,ue.b1)(),(0,ht.lr)(),(0,gt.eC)()]).then((()=>{"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&(this.displayBlankRiver=x?"productivityHub"!==W:"gaming"!==W&&"following"!==W)}))),this.hideQuickLinks=(null===(i=this.config)||void 0===i?void 0:i.autoHideQuickLinksInAlways)&&"always"===(null===(a=this.layoutState)||void 0===a?void 0:a.selectedFeedDisplaySetting),this.hideQuickLinks&&window.addEventListener("wheel",this.quickLinksToggle),yield F.getResultAsync(),this.config.enableRiverZoomStamping&&this.setZoomTmpl();const G=!(0,ct.N)()&&this.config.auctionInNodeIndex;if(!window.isSSREnabled&&!G&&!b.Al.IsPrerender){const e=(0,ct.N)()&&!(null===(u=window.ntpSSRData)||void 0===u?void 0:u.samAd),t=!(0,ct.N)()&&!this.config.disableAdsSSR;(e||t)&&(0,Dt.j)(P.U,this.layoutState)}let V;ce.M0.addOrUpdateTmplProperty("csrLayout",null===(p=this.layoutState)||void 0===p?void 0:p.selectedFeedDisplaySetting),ce.M0.addOrUpdateTmplProperty("ssrLayout",null===(h=window.ssrLayoutState)||void 0===h?void 0:h.selectedFeedDisplaySetting),(0,xt.Uo)(o.z.TopSitesLayoutData,(e=>{this.topSitesLayoutState=e,this.checkCodexBingFlagWithNonBingDSE(),this.refreshHeaderHeight(),this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),(0,Be.y)().then((()=>this.calculateStickyBreakpoints()))})),window.isSSREnabled&&(V=yield we.L.getPreferenceSetting("tscollapsed"));let q="",z="";if(this.config.enableWpoPromotHistory){const e=yield(0,Ce.H1)();(null==e?void 0:e.promotion)&&(q=e.promotion),(null==e?void 0:e.selection)&&(z=e.selection)}const Q=e=>"productivityHub"===(0,T.$z)()||"headingsonly"===e.selectedFeedDisplaySetting||"off"===e.selectedFeedDisplaySetting;if((0,ct.N)()&&this.config.useTreatmentsFromFeedResponse&&Q(this.layoutState)&&!Ut.SI.isOptimizationDataReceived()&&Promise.all([(0,Ge.F_)(),(0,ht.lr)()]).then((()=>{const e=this.config.useTreatmentsFromFeedResponseSuperDp&&this.config.useSuperDataProvider;Q(this.layoutState)&&this.fetchAndStoreWpoTreatments(e,V,q,z)})),!this.config.enableSuperEarlyRequest){const e=(!x||this.config.enableEarlyMainFeedV2)&&(!(0,Ce.Tr)()&&!this.config.triggerLowMemDhp||this.config.noDisablePrerenderFeed);!this.config.enableEarlyMainFeedRequest||(null===b.Al||void 0===b.Al?void 0:b.Al.IsPrerender)&&!e||this.fetchAndStoreMainFeed(this.config.useSuperDataProvider,q,z)}if((0,ct.N)()){if((0,xt.Uo)(o.z.CoachmarkData,(e=>{this.hasCoachmark=!!e.coachmarkMessages})),window.addEventListener("resize",this.saveViewportInPref),window.addEventListener("beforeunload",this.saveViewportInPref),"gaming"===(0,T.$z)()&&S.jG.CurrentRequestTargetScope.audienceMode!==c.F.Enterprise){const e=Y[S.jG.CurrentMarket];if(e&&!(0,f.$o)().getItem(d.d.VideoGameInterestFollowed)){const t="Video Games";(0,Mt.K0)(o.z.TopicData).followTopic(e,t).then((e=>{e&&(0,f.$o)().setItem(d.d.VideoGameInterestFollowed,"true")}))}}this.attachListenerForKeyDownScrollOnFocus(),(0,f.$o)().setItem("LastKnownPV",(new Date).getTime().toString()),Promise.all([(0,Ge.F_)(),(0,ht.lr)()]).then((()=>{if((0,f.$o)().setItem("LastVisuallyReadyMarker",(new Date).getTime().toString()),window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller)Te();else{const e={sw:window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller};(0,f.$o)().setObject("FallbackNavigationResult",e)}}))}if((0,ct.N)())(0,xt.Uo)(o.z.SignInData,(e=>{void 0!==e.isUserSignedIn&&(this.renderSignInControls=!e.isUserSignedIn,this.updateHeaderCoreData())}));else{const e=(0,Mt.K0)(o.z.SharedState);this.renderSignInControls=(null===(g=null==e?void 0:e.getCurrentState())||void 0===g?void 0:g.signedIn)===l.Hy.NotSignedIn}this.config.enableLangExpBanner&&function(){var e;(0,r.mG)(this,void 0,void 0,(function*(){const t={id:"LanguageExplainingBanner",group:Gt.V.Functional,placementSource:Gt.m.Internal,surfaceModel:{surfaceType:Vt.U.HorizontalBanner,position:an.bw.Top},contentModel:{title:"Language Explaining Banner",description:"     ?     ,         .",contentType:qt.J.CallToAction,dismissContentAction:{label:"."}}},n=[(0,zt.H)(Qt.p.Dismissed,1728e5),(0,Zt.l)(Qt.p.Dismissed,3)];null===(e=(0,Kt.$0)())||void 0===e||e.sendInternalPlacement(t,n)}))}(),function(e){var t,n,i;(0,r.mG)(this,void 0,void 0,(function*(){if(!e.enableEdgeFeedCoachmark||!(null===(t=null==e?void 0:e.localizedStrings)||void 0===t?void 0:t.edgeFeedBelowTheFoldCoachmark)||!(null===(n=null===window||void 0===window?void 0:window.chrome)||void 0===n?void 0:n.ntpSettingsPrivate))return;const r=new U.o;if(window.chrome.ntpSettingsPrivate.getPref(sn,(e=>r.set(null==e?void 0:e.value))),!(yield r.getResultAsync()))return;const{title:o,description:a}=e.localizedStrings.edgeFeedBelowTheFoldCoachmark,s={id:"edgeFeedBelowTheFoldCoachmark",group:Gt.V.Functional,placementSource:Gt.m.Internal,surfaceModel:{surfaceType:Vt.U.Coachmark,size:on.dm.Large,position:{coachmarkAnchor:je._.settingsButton,anchoringPosition:on.RC.Below,hasPointer:!0,pointerPosition:on.Jt.Opposite},displaySurfaceAction:{actionDelegate:()=>{window.chrome.ntpSettingsPrivate.setPref(sn,!1)}}},contentModel:{contentType:qt.J.CallToAction,title:o,description:a}},c=[(0,Zt.l)(Qt.p.Viewed,1)];null===(i=(0,Kt.$0)())||void 0===i||i.sendInternalPlacement(s,c)}))}(this.config),!this.childRefs.backgroundGallery||this.config.disableBackgroundGallery||S.jG.IsFrePage||(this.backgroundDataConnector=(0,Mt.K0)(o.z.BackgroundData),this.backgroundDataConnector&&(yield Lt.p.initState(Ot.f.backgroundDataStateLoaded.getActionSender(this.backgroundDataConnector))),(0,xt.Uo)(o.z.BackgroundData,(e=>{this.renderBackgroundGallery=e.backgroundGalleryDisplayed}))),this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy;let Z=this.layoutState&&this.layoutState.configData;const K=(0,Mt.K0)(o.z.ChromiumPageSettings);if(K){const e=yield K.getConfigDataAsync();if(void 0===Z&&(Z=yield K.getConfigDataAsync()),(0,ct.N)()){(null===(C=null==e?void 0:e.enabledFeatures)||void 0===C?void 0:C.includes("msUndersideAutoOpenForMsnTopQuestion"))?((0,f.$o)().setItem("enableUndersideAutoOpenFromEdge","true"),ce.M0.addOrUpdateTmplProperty("enableUndersideAutoOpenFromEdge","1")):(0,f.$o)().setItem("enableUndersideAutoOpenFromEdge","false")}ce.M0.addOrUpdateTmplProperty("headingsOnlyNoBackground",String("headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType))}if(this.isShowMSRewardsAllowedByPolicy=void 0===(null==Z?void 0:Z.isShowMicrosoftRewardsEnabled)||Z.isShowMicrosoftRewardsEnabled,this.config.enableSignInControl&&this.checkSignInStatusAndSetup(Z),(null===(E=this.config.termOfUseBannerConfig)||void 0===E?void 0:E.enabled)&&this.checkIsSignedOut().then((e=>{e&&function(e){var t,n,i,o,a,s,c,d,l,u;(0,r.mG)(this,void 0,void 0,(function*(){const r=!!(null===(t=this.config.termOfUseBannerConfig)||void 0===t?void 0:t.isSecondBanner),p=(null===(n=null==e?void 0:e.termOfUseBannerConfig)||void 0===n?void 0:n.termOfUseBanner1Description)||(null===(i=null==e?void 0:e.localizedStrings)||void 0===i?void 0:i.termOfUseBanner1Description)||"We're updating our Terms of Use",h=(null===(o=null==e?void 0:e.termOfUseBannerConfig)||void 0===o?void 0:o.termOfUseBanner2Description)||(null===(a=null==e?void 0:e.localizedStrings)||void 0===a?void 0:a.termOfUseBanner2Description)||"We've updated our Terms of Use",g=r?h:p,m={id:r?"TermOfUseBanner2":"TermOfUseBanner1",group:Gt.V.Promotional,placementSource:Gt.m.Internal,surfaceModel:{surfaceType:Vt.U.HorizontalBanner,position:an.bw.Top,bannerType:an.pp.LegalCompliance,displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}},closeSurfaceAction:{label:"Close"}},contentModel:{title:g,description:g,contentType:qt.J.CallToAction,logoImage:{url:"https://assets.msn.com/staticsb/statics/pr-4121865/nurturing/img/i-logo.png",altText:"Image Alt Text"},dismissContentAction:{label:(null===(s=null==e?void 0:e.termOfUseBannerConfig)||void 0===s?void 0:s.termOfUseBannerDismBtnLabel)||(null===(c=null==e?void 0:e.localizedStrings)||void 0===c?void 0:c.termOfUseBannerDismBtnLabel)||"Dismiss"},engageContentAction:{label:(null===(d=null==e?void 0:e.termOfUseBannerConfig)||void 0===d?void 0:d.termOfUseBannerEngageBtnLabel)||(null===(l=null==e?void 0:e.localizedStrings)||void 0===l?void 0:l.termOfUseBannerEngageBtnLabel)||"Learn more",actionDelegate:()=>{window.open("https://go.microsoft.com/fwlink/?LinkID=2092201","_blank")}}}},f=r?864e5:6048e5,v=[(0,zt.H)(Qt.p.Viewed,f),(0,Zt.l)(Qt.p.Dismissed,1),(0,Zt.l)(Qt.p.Closed,1),(0,Zt.l)(Qt.p.Engaged,1)];null===(u=(0,Kt.$0)())||void 0===u||u.sendInternalPlacement(m,v)}))}(this.config)})),this.config.enableMarqueeAd){(yield nn.o.getMarqueeAdEligibilityAync())&&(this.marqueeAdActive=!0,this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!0),this.updateMarqueeAdHeightByColumn(this.columnArrangement),this.refreshHeaderHeight(),this.updateHeaderGrid(),(0,gt.eC)().then((()=>{const e=nn.o.getMarqueeAd();ce.M0.addOrUpdateTmplProperty(e.isUpdated?"MarqueeAdUpdate":"MarqueeAdVisible","1"),nn.o.sendBeacons(e.adServedUrls),nn.o.sendVerificationToIas()}))),Ot.f.updateMarqueeAdDisplayStatus.registerObserver((e=>{const t=e&&e.params;t&&t.length>0&&(this.marqueeAdActive=e.params[0]),this.refreshHeaderHeight(),this.updateHeaderGrid()}))}(0,ct.N)()&&this.checkAndEnableMobileUpsell(),this.focusRedirectEnabled=Z&&Z.inPageSearchBoxType===R.HT.redirect,D.V.updateConfigDataChanged.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;t[0]===R.HT.redirect!==this.focusRedirectEnabled&&(0,$.Z)()}));const J=this.showCodexBingWithNonBingDSE;this.checkCodexBingFlagWithNonBingDSE(),J!==this.showCodexBingWithNonBingDSE&&(this.updateHeaderGrid(),this.refreshHeaderHeight()),this.multiLineSearchBox&&this.focusRedirectEnabled&&"0"===(0,A.L)().get("dsp")&&(this.multiLineSearchBox=!1),Object.keys(this.childRefs).filter((e=>e&&(0,I.oO)(this.childRefs[e])&&this.filterFeedExperiencesToSkip(e))).forEach((e=>(0,it.Fg)(this.childRefs[e]))),L.J.updateLayout.registerObserver((e=>(0,r.mG)(this,void 0,void 0,(function*(){var t,n;(null===(n=null===(t=this.config)||void 0===t?void 0:t.childRefs)||void 0===n?void 0:n.holidayEffects)&&this.updateHolidayEffectsPostion();const i=e&&e.params;i&&i.length<1||this.updateFeedLayoutTelemetry()})))),this.childRefs.recommendedSites&&window.addEventListener("recommendedSitesSelection",this.recommendedSitesSelection),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getLayoutStateAsync().then((e=>this.isAlwaysMode="always"===e.selectedFeedDisplaySetting));const X=(0,Mt.K0)(o.z.AdminPortalData),ee=X&&X.getCurrentState();if(ee&&ee.settings&&(this.isNotificationEnabledByAdmin=!!ee.settings.isShowCompanyAndIndustry),"marketmismatch"!==S.jG.LanguageRegionMismatch&&"marketmismatch"!==S.jG.LanguageRegionMismatchExplicit||this.updateLanguageToggle(),(0,ct.N)()||(yield this.initSSRContentConfigInfo(),yield this.tryLoadFeedModuleBundle()),this.config.enableTopNav&&!this.config.disableFeed&&(0,m.N6)("backgroundImage",(e=>{this.isImageHiddenAndNotDark="hidden"===e&&!(0,_.Y)(),this.updateHeaderCoreData()})),this.updateHeaderCoreData(),this.updateHeaderCoreBelowSearchData(),this.config.enableWeatherOneLinerCheck&&(0,ue.b1)().then((()=>{this.weatherOneLinerDataConnector=(0,Mt.K0)(o.z.WeatherCardData),this.weatherOneLinerDataConnector?(0,xt.Uo)(o.z.WeatherCardData,(e=>{this.checkOneLinerEligibility(e),this.showWeatherOneLiner&&ce.M0.addOrUpdateTmplProperty("weatherOneLiner","1")})):ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.sq0),{message:"WeatherOneLiner Data Connector is not defined."}))})),(0,ct.N)()&&this.config.compressionDictionaryEnabled&&document.createElement("link").relList.supports("dictionary")){ce.M0.addOrUpdateTmplProperty("sbr","1");const e=performance.getEntriesByType("resource").find((e=>{var t;return"script"===e.initiatorType&&(null===(t=e.name)||void 0===t?void 0:t.includes("/common."))}));e&&e.encodedBodySize&&ce.M0.addOrUpdateTmplProperty("sbrc",e.encodedBodySize),Promise.all([(0,ht.lr)(),(0,ue.b1)()]).then((()=>(0,Ce.x5)())).then((e=>e&&ce.M0.sendLoadTimeEvent({markers:{size:e.headers.get("content-length"),url:e.url}})))}}))}disconnectedCallback(){super.disconnectedCallback(),(0,v.St)(this.onFlyoutEvent),(0,N.Bn)().unsubscribe(this.handleColumnArrangementChange),this.pivotManager&&(this.pivotManager.removeSwitchListener(Ct.D.onPivotSwitch),this.pivotManager.removeSwitchListener(this.switchListenerCallback)),removeEventListener("scroll",this.areNavTopSitesOverlapping),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("wheel",this.quickLinksToggle),removeEventListener("recommendedSitesSelection",this.recommendedSitesSelection),window.removeEventListener(rn.g,this.scrollToShowFeed),window.removeEventListener("resize",this.saveViewportInPref),window.removeEventListener("beforeunload",this.saveViewportInPref),removeEventListener("wheel",this.quickScrollToTop),window.removeEventListener("keyup",this.focusControlOnScrollKeyUp),window.removeEventListener("wheel",this.focusControlOnWheel),this.headerSpaceHolder&&this.headerSpaceHolder.removeEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),this.config.enableLoaderFlight&&this.skeletonObserver&&this.skeletonObserver.disconnect()}marketLanguageConsolidation(){return(0,r.mG)(this,void 0,void 0,(function*(){if(!window.navigator.cookieEnabled)return;const e=(0,se.ej)(z),t=yield we.L.getPreferenceSetting(z,!1);if(!e||t&&e===t.value||(yield we.L.savePreferenceSetting(z,{setting:z,source:"ntp",timestamp:(new Date).getTime(),value:e})),!e&&t&&t.value){const e=JSON.parse(t.value);e.m&&(yield this.onMarketValueChange(e.m),ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.v7z),{message:"Edge Next page refresh due to market cookie missing.",pb:Object.assign(Object.assign({},le.v7z.pb),{customMessage:`market: ${e.m}`})})))}(0,ht.lr)().then((()=>{tn(this.onMarketValueChange,this.config.marketRoamingSolveConflict,this.config.useMarketRoaming)}))}))}beforeHydration(){return(0,r.mG)(this,void 0,void 0,(function*(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":break;default:{const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot(),n=t===Pn?{gamingPivotSwitched:!0}:void 0;yield this.startContentLoad(e,n,!0,t)}}}))}afterHydration(){return(0,r.mG)(this,void 0,void 0,(function*(){switch(this.refreshHeaderHeight(),this.headerGrid.style&&(this.headerGrid.style.height=this.headerHeight+"px"),this.headerSpaceHolder.style&&(this.headerSpaceHolder.style.height=this.headerHeight+"px"),this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":{const e=this.getExperienceConfigInfo("GridViewFeed");yield this.startContentLoad(e,void 0,!0);break}}if(void 0!==(null===window||void 0===window?void 0:window.ssrSizes)&&!window.isResized){const e=this.columnArrangement+"",t=new C.fH,n=(0,C.Nd)(t.data.innerWidth,"innerWidth"),i=(0,C.Nd)(t.data.innerHeight,"innerHeight");window.ssrSizes.ssrCol!==e&&ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.v8K),{message:"SSR - Column count mismatch after hydration.",pb:Object.assign(Object.assign({},le.v8K.pb),{customMessage:`ssrSizes: {ssrCol: ${window.ssrSizes.ssrCol}, ssrWidth: ${window.ssrSizes.ssrWidth} px, ssrHeight: ${window.ssrSizes.ssrHeight} px},csrSizes: {csrCol: ${e}, csrWidth: ${n} px, csrHeight: ${i} px},breakpoints: ${JSON.stringify((0,N.Bn)().breakpoints)}`})}))}}))}logCriticalException(){const e="Fatal web component experience exception encountered in EdgeChromiumPageWC.",t=new Error(e);(0,Jt.Y)(le.aFk.id),(0,pe.OO)(t,le.aFk,e)}skeletonObserverCallback(){var e,t,n,i,r,o;if(!this.skeletonRemoved){const a=null===(t=null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.querySelector("edge-chromium-page"))||void 0===t?void 0:t.shadowRoot;if(a&&(null===(o=null===(r=null===(i=null===(n=a.querySelector("grid-view-feed"))||void 0===n?void 0:n.shadowRoot)||void 0===i?void 0:i.querySelector("cs-super-container"))||void 0===r?void 0:r.shadowRoot)||void 0===o?void 0:o.querySelector("cs-personalized-feed"))){const e=a.querySelector("#skeleton-loader");e&&(this.skeletonRemoved=!0,e.remove())}}}clickToWeatherOneLinerLink(e){ce.M0.sendActionEvent(e.currentTarget,de.Aw.Click,de.wu.Navigate),window.open(this.weatherOneLinerMapUrl,"_blank")}checkOneLinerEligibility(e){var t,n,i,r,o,a,s,c,d,l,u,p,h,g,m,f,v,y,S,C,b,w,T,k;if(!(e&&e.contentData&&e.contentData.length&&e.contentData[0]&&e.contentData[0].contenttype))return;this.isWeatherOneLinerMapped=!1;const P=null===(n=null===(t=e.contentData)||void 0===t?void 0:t[0])||void 0===n?void 0:n.contenttype;let A;const I=function(e,t){return fn.Ld.Format("{contentType}_{contentId}",{contentType:e,contentId:t||""})}(P,null===(r=null===(i=e.contentData)||void 0===i?void 0:i[0])||void 0===r?void 0:r.id);let E;if(te.has(P))this.weatherOneLinerText=null===(o=e.nowcasting)||void 0===o?void 0:o.shortSummary,A=(0,cn.ld)("waterDrop.svg",dn.Mx),this.weatherOneLinerIconTemplate=vn([A],"28","water-drop-icon","weather-current-precipitation-glyph"),E=(0,un.E_)(e.currentLocation,e.unit,ln.q,"precipitation",null===(c=null===(s=null===(a=e.contentData)||void 0===a?void 0:a[0])||void 0===s?void 0:s.content)||void 0===c?void 0:c[0]),this.weatherOneLinerMapUrl=(0,pn.cT)(E,"content",I);else if(ne.has(P)){this.weatherOneLinerIconTemplate=(x=e.alertsInfo)?vn([(0,gn.n)(x.class,x.significance),dn.Ws],"28",x.title,"icon-svg"):null,E=(0,un.iS)(e),this.weatherOneLinerMapUrl=(0,pn.cT)(E,"content",I),this.weatherOneLinerText="";for(let t=0;t<(null===(d=e.alertsInfo)||void 0===d?void 0:d.abbreviation.length);t++)this.weatherOneLinerText+=(null===(u=null===(l=e.alertsInfo)||void 0===l?void 0:l.abbreviation)||void 0===u?void 0:u[t])+" "}else re.has(P)?(E=function(e){var t,n,i,r;const o=null===(i=null===(n=null===(t=e.contentData)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)||void 0===i?void 0:i[0],a=null===(r=e.currentCondition)||void 0===r?void 0:r.deepLink;let s=null==o?void 0:o.imgUrl,c=null==o?void 0:o.destUrl;return s&&!s.startsWith("http")&&(s=(0,hn.d)(e,s,a)),c&&!c.startsWith("http")&&(c=(0,hn.d)(e,c,a),s=null!=s?s:c),s||a}(e),this.weatherOneLinerMapUrl=(0,pn.cT)(E,"content",I),this.weatherOneLinerText=null===(m=null===(g=null===(h=null===(p=e.contentData)||void 0===p?void 0:p[0])||void 0===h?void 0:h.content)||void 0===g?void 0:g[0])||void 0===m?void 0:m.cap,A=(0,cn.ld)(null===(S=null===(y=null===(v=null===(f=e.contentData)||void 0===f?void 0:f[0])||void 0===v?void 0:v.content)||void 0===y?void 0:y[0])||void 0===S?void 0:S.capIcon,dn.qF),this.weatherOneLinerIconTemplate=vn([A],"28","","teaser-summary-icon")):ie.has(P)&&(this.weatherOneLinerText=(null===(C=e.currentCondition)||void 0===C?void 0:C.aqi)+" "+(null===(b=e.currentCondition)||void 0===b?void 0:b.aqiSeverity),A=(0,cn.ld)("AqiNoColor.svg",dn.Mx),this.weatherOneLinerIconTemplate=vn([A],"28","aqi-icon","nocolor-img-aqi"),E=(0,un.E_)(e.currentLocation,e.unit,ln.q,"airquality",null===(k=null===(T=null===(w=e.contentData)||void 0===w?void 0:w[0])||void 0===T?void 0:T.content)||void 0===k?void 0:k[0]),this.weatherOneLinerMapUrl=(0,pn.cT)(E,"content",I));var x;this.weatherOneLinerIconTemplate&&this.weatherOneLinerText&&this.weatherOneLinerMapUrl&&(this.showWeatherOneLiner=!0),this.showWeatherOneLiner&&(this.telemetryContext=yn(this.telemetryObject,P,this.weatherOneLinerMapUrl,this.weatherOneLinerText)),this.isWeatherOneLinerMapped=!0}initSSRContentConfigInfo(){return(0,r.mG)(this,void 0,void 0,(function*(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":return}const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot();this.initFeedDependencies(t),yield this.getFeedDependencyPromise,this.contentConfigInfo=e,this.context={},yield(0,it.Fg)(e)}))}isWaterfallFeed(e){return this.config.enableWaterfallViewFeed&&("myFeed"===e||""===e)}getViewFeedConfigAndPivot(){const e=(0,T.$z)(),t=e===Pn,n=this.getExperienceConfigInfo("GamingGridViewFeed","GridViewFeed","index_GamingGridViewFeed"),i=this.isWaterfallFeed(e)?this.getExperienceConfigInfo("WaterfallViewFeed"):this.getExperienceConfigInfo("GridViewFeed");let r;return r=t?n:i,{viewFeedConfig:r,selectedPivot:e}}fetchAndStoreWpoTreatments(e=!1,t,n,i){var o,a,s;return(0,r.mG)(this,void 0,void 0,(function*(){const r=e=>{e&&((0,he.Ou)()[Ut.C5.Response]=Math.round(performance.now()),Ut.SI.addWpoOptimizationDataToLocalStorage(e.pageContext,S.jG.AppType,S.jG.CurrentRequestTargetScope,!1,this.config.enbWpoPromotionFromPSL,t),Nt.u.storeWpoNotificationPreviewData(e))};(0,he.Ou)()[Ut.C5.Request]=Math.round(performance.now());const c={isXFeed:!1,ocid:"anaheim-ntp-feeds",timeoutMs:1e3,feedName:(null===(s=null===(a=null===(o=ce.M0.getPageMetadata())||void 0===o?void 0:o.contract)||void 0===a?void 0:a.page)||void 0===s?void 0:s.name)===Pn?Pn:"default",pageScenario:"ntp",pageConfiguration:(0,_t.y)(this.layoutState,!1),requestId:ce.M0.getRequestId(),disableContent:!0,shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",column:this.columnArrangement,anaheimLayoutPromotion:n,anaheimContentSelection:i};if(e){new Rt.X({auctionRidOverride:this.config.auctionRidOverride,initialRequest:{timeoutMs:1e3}}).fetchFromWpoService(c,null).then(r)}else{new $t.fy({auctionRidOverride:this.config.auctionRidOverride,initialRequest:{timeoutMs:1e3}},!1).fetchFromWpoService(c,!0).then(r)}}))}isFeedDisabled(){var e;const t=null===(e=this.layoutState)||void 0===e?void 0:e.selectedFeedDisplaySetting;return"headingsonly"===t||"off"===t}fetchAndStoreMainFeed(e=!1,t,n){var i,o,a,c,d,l,u;return(0,r.mG)(this,void 0,void 0,(function*(){const r=(0,T.$z)();if([Pn,"productivityHub","following"].includes(r))return this.isOnM365Page="productivityHub"===r,void(this.isOnPersonalizeOrM365Page=this.isOnM365Page);if(this.isFeedDisabled())return;const p={experienceType:this.isWaterfallFeed(r)?s.x.waterfallViewFeed:s.x.gridViewFeed,instanceSrc:"default"},h=yield P.U.getConfig(p);let g,m=null===(o=null===(i=null==h?void 0:h.properties)||void 0===i?void 0:i.riverSectionCardProviderConfig)||void 0===o?void 0:o.initialRequest;if(!m)return;if(this.config.auctionRidOverride&&(m.adRefreshVariant="",m.gdpr=!!window.__tcfapi,m.anaheimPageLayout=this.layoutState.currentLayout,m.verticalName=null===(a=null===S.jG||void 0===S.jG?void 0:S.jG.HostPage)||void 0===a?void 0:a.verticalKey),m.anaheimLayoutPromotion=t,m.anaheimContentSelection=n,this.columnArrangement&&(m.column=this.columnArrangement),this.isWaterfallFeed(r)){const e={c1:Cn.Kx.C1,c2:Cn.Kx.C2,c3:Cn.Kx.C3,c4:Cn.Kx.C4,c5:Cn.Kx.C5},t=(0,Ft.Q)(e[this.columnArrangement]);m=Object.assign(Object.assign({},m),t)}if(m.pageConfiguration=null===(l=null===(d=null===(c=ce.M0.getPageMetadata())||void 0===c?void 0:c.contract)||void 0===d?void 0:d.page)||void 0===l?void 0:l.config,!m.pageConfiguration&&this.layoutState){const e=yield this.getPrimaryAccountInfo();m.pageConfiguration=(0,_t.y)(this.layoutState,(null==e?void 0:e.accountType)===F.l.MSA)}this.msNtpExpBitmask&&(m.edgExpMask=this.msNtpExpBitmask);const f=null===(u=null==h?void 0:h.properties)||void 0===u?void 0:u.preloadLikelyExperiences,v=(0,E.x)(f)?void 0:()=>(0,Bt.P)(f,(()=>!!g));Ut.SI.enableEarlyMainFeedRequest=!0;const y=(0,$t.eW)();if(y)g=y,At.Gq.set("__isSSRWpoFeedConsumed__",!0);else if(e){const e=new Rt.X({auctionRidOverride:this.config.auctionRidOverride,initialRequest:{timeoutMs:m.timeoutInMs}});g=yield e.fetchFromService(m,v)}else{const e=new $t.fy({auctionRidOverride:this.config.auctionRidOverride,initialRequest:{timeoutMs:m.timeoutInMs}},!1);g=yield e.fetchFromWpoService(m,!0,v),g&&(g.responseStatus=e.getResponseStatus())}Ut.SI.storeEarlyWpoFeedData(g),(0,ct.N)()||Ut.SI.setSSRInitialFeedResponse(g)}))}checkSignInStatusAndSetup(e){var t;return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield this.checkIsSignedOut(),i=void 0!==e.isEdgeSignInAllowed&&e.isEdgeSignInAllowed;return n&&(null===(t=this.pageSettingsDataConnector)||void 0===t?void 0:t.checkAuthApiIsAvailable())&&i?(this.renderSignInControls=!0,this.updateHeaderGrid()):this.renderSignInControls=!1,this.updateHeaderCoreData(),n}))}checkIsSignedOut(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=yield this.getPrimaryAccountInfo();return e&&""===e.accountId}))}getPrimaryAccountInfo(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){return null===(e=this.pageSettingsDataConnector)||void 0===e?void 0:e.getPrimaryAccountInfoAsync(!1)}))}get shouldShowNotificationMiniCard(){return!(this.config.notificationHeadingsOnly&&!this.isFeedDisabled())&&(this.config.childRefs.notificationMiniCard&&this.wpoNotificationPreviewData&&(this.columnArrangement===B.K$.c4||this.columnArrangement===B.K$.c5)&&this.quickLinksDisplaySetting===O.Z3.onerow&&this.hasEnoughSpaceForNotificationMiniCard&&!Nt.u.notificationMiniCardDismissed)}shadowDomPopulated(){if(this.tryLoadFeedModuleBundle(),!(0,ct.N)())return;if(this.config.childRefs.notificationMiniCard&&(this.config.notificationAnimation&&(b.Al.IsPrerender?(0,ht.lr)().then((()=>{this.enableNotificationAnimation=!0})):this.enableNotificationAnimation=!0),Nt.u.subscribe((e=>{this.wpoNotificationPreviewData=e}))),this.markVisuallyReadyRaf(),(0,We.FY)(je._.headerSpaceHolder,this.shadowRoot.getElementById("headerSpaceHolder")),this.backgroundOuterHolder=this.shadowRoot.getElementById("bgOuterHolder"),(0,We.FY)(je._.backgroundOuterHolder,this.backgroundOuterHolder),(0,We.FY)(je._.backgroundInnerHolder,this.shadowRoot.getElementById("bgInnerHolder")),(0,We.FY)(je._.navBar,this.shadowRoot.getElementById("g_nav")),(0,We.FY)(je._.searchHistory,this.headerCoreRef.belowSearch),this.topSitesHolder=this.shadowRoot.getElementById("topSitesHolder"),this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.off?(this.quickLinksDisplaySetting!==O.Z3.top&&(this.topSitesHolder.style.visibility="hidden"),this.hideSearchHistory=!0):this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),this.enableOneColumn&&(this.conditionalBanner=this.shadowRoot.querySelector(".conditionalBannerHolder"),this.conditionalBanner)){new IntersectionObserver((e=>{const t=e[e.length-1];this.conditionalBannerShown=t.intersectionRatio>.5}),{root:null,rootMargin:"-10px 0px 0px 0px",threshold:.5}).observe(this.conditionalBanner)}this.refreshImageHeight(),this.calculateStickyBreakpoints(),this.setupTopSitesIntersectionObserver();const e=function(){var e,t;try{const n=nt.k.getWpoTreatmentsWithType(tt._h.pinProngCoachMark),i=(null==n?void 0:n.length)>0&&(null===(t=null===(e=n[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.showCoachMark);if(i)return{showCoachMark:i}}catch(e){const t="Error in getting pin prong promotion data";(0,pe.H)(le.Od5,t,`error:${e}`)}return null}();if(e&&((null==e?void 0:e.showCoachMark)?(ce.M0.addOrUpdateTmplProperty("coachmarkToPinProng1","1"),this.config.enableCoachMarkToPinProng&&this.checkPinProngCoachMarkShouldDisplay()):ce.M0.removeTmplProperty("coachmarkToPinProng1")),this.headerGrid=this.shadowRoot.getElementById("headerGrid"),this.disableStickyHeader&&this.headerGrid){const e=this.shadowRoot.getElementById("translucentFeedSentinel"),t={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[.1,1]};new IntersectionObserver((t=>{if(!e||"off"===this.layoutState.selectedFeedDisplaySetting)return;1===t[t.length-1].intersectionRatio||window.innerHeight<this.headerHeight?(this.headerGrid.style.zIndex="1",this.headerGrid.classList.add("headerGrid_visible"),this.headerGrid.classList.remove("headerGrid_hidden"),(0,m.j3)("headerGrid","displayed"),window.setTimeout((()=>{this.headerGrid.style.zIndex=null}),200)):(this.headerGrid.classList.remove("headerGrid_visible"),this.headerGrid.classList.add("headerGrid_hidden"),(0,m.j3)("headerGrid","hidden"))}),t).observe(e)}if(this.nav=this.shadowRoot.getElementById("g_nav"),window.addEventListener("scroll",this.onScroll),this.config.enableQuickScrollToTop&&window.addEventListener("wheel",this.quickScrollToTop,{passive:!1}),window.addEventListener("resize",this.onResize),this.headerSpaceHolder.addEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),this.initializePivotManager(),(0,We.FY)(je._.complianceHyperlink,this.shadowRoot.querySelector("#complianceHyperlink")),this.complianceHyperlink=(0,We.b_)(je._.complianceHyperlink),(0,We.FY)(je._.recommendedSites,this.shadowRoot.querySelector("#recommendedSites")),this.recommendedSites=(0,We.b_)(je._.recommendedSites),this.childRefs.recommendedSites){const e={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1]};new IntersectionObserver((e=>{e[e.length-1].intersectionRatio>.99?this.recommendedSites.style.visibility="visible":this.recommendedSites.style.visibility="hidden"}),e).observe(this.recommendedSites)}(0,Ge.F_)().then((()=>window.requestAnimationFrame((()=>window.setTimeout((()=>{var e,t;(null===(t=null===(e=this.config)||void 0===e?void 0:e.childRefs)||void 0===t?void 0:t.holidayEffects)&&this.updateHolidayEffectsPostion(),this.updateTopSitesQuickLinkEndMarginUsedPadding()}),10))))),this.controlNewTabSettings(),this.scrollToHideSearchBox(),(0,ht.lr)().then((()=>{this.areNavTopSitesOverlapping(),window.addEventListener("scroll",this.areNavTopSitesOverlapping)})),(0,Ge.F_)().then((()=>{var e,t,n,i;var r;if(!!(r=null===(e=this.config)||void 0===e?void 0:e.serviceWorker)&&(r.enableEarlyFeedFetch||r.enableEarlyFeedFetchMem||r.enableEarlyFeedFetchMsg||r.enableBaseResponseTeeNoOp)){Oe();const e=(0,he.Ou)();(0,Xe.f)(e),Le(null===(t=this.config)||void 0===t?void 0:t.serviceWorker)}else(null===(i=null===(n=this.config)||void 0===n?void 0:n.serviceWorker)||void 0===i?void 0:i.enableNavErrorHandler)&&Oe()})),this.config.enableScrollPerfMetrics&&(0,ct.N)()&&Promise.all([(0,ue.b1)(),(0,ue.e3)(),(0,ht.lr)()]).then((()=>{var e,t;return ce.M0.initScrollPerformanceTrackers({enableScrollInputTracking:this.config.enableScrollInputTracking&&((null===(e=ce.M0.getRequestId())||void 0===e?void 0:e.startsWith("1"))||(null===(t=(0,Ze.zp)())||void 0===t?void 0:t.includes("scrolltest=1"))),enableMissedScrollTracking:this.config.enableMissedScrollTracking,enableSectionScrollTracking:this.config.enableSectionScrollTracking})}));(window&&window.navigator).getBattery().then((e=>{ce.M0.addOrUpdateTmplProperty("userOnBatteryPower:",String(!e.charging))})),this.config.bgMuseumCdBtnMoveToBottom&&this.overlapStateChange()}checkAndLogRectsOverlapping(e,t){if(0===e.height||0===e.width||0===t.height||0===t.width)return;!(e.top>t.bottom||e.right<t.left||e.bottom<t.top||e.left>t.right)&&(ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.RtG),{message:"Nav and top sites are overlapping",pb:Object.assign(Object.assign({},le.RtG.pb),{customMessage:`{"nav": ${JSON.stringify(e)}, "top sites": ${JSON.stringify(t)}, "selectedQuickLinksDisplaySetting": ${this.layoutState.selectedQuickLinksDisplaySetting}}`})})),removeEventListener("scroll",this.areNavTopSitesOverlapping))}initializePivotManager(){this.pivotManager=(0,De.l)(null),this.pivotManager&&(this.pivotManager.addSwitchListener(Ct.D.onPivotSwitch,Re.I.Telemetry),this.pivotManager.addSwitchListener(this.switchListenerCallback)),window.addEventListener(rn.g,this.scrollToShowFeed)}filterFeedExperiencesToSkip(e){if("devTools"===e&&!this.enableDevTools)return!1;if("msRewards"===e)return this.isShowRewardsAllowedByLocation;return(0,T.$z)()===Pn||"gamingDiscoverStrip"!==e}startContentLoad(e,t,n=!1,i){return(0,r.mG)(this,void 0,void 0,(function*(){const r=this.config.enableWaterfallViewFeed&&i&&"myFeed"===i?this.getExperienceConfigInfo("WaterfallViewFeed"):e;if(!(0,_e.Z)(this.lastPivotSelection,{configInfo:r,context:t})){switch(this.lastPivotSelection={configInfo:r,context:t},this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":yield(0,Ge.Qm)()}if(this.config.enableChannelFiltering){if(!(null===Ht.followingExperienceManager||void 0===Ht.followingExperienceManager?void 0:Ht.followingExperienceManager.overrideFeedConfig)){const{properties:e}=(0,He.Z)((yield P.U.getConfig(r.configRef))||{});e&&Ht.followingExperienceManager.setFeedConfigOverrider((t=>this.setOverriddenFeedConfig(t(e))))}this.overriddenFeedConfig=null}n||(0,it.Fg)(r),this.initFeedDependencies(i),this.contentConfigInfo=r,this.context=t,(0,ht.lr)().then((()=>{window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.activateTrigger&&window.chrome.ntpSettingsPrivate.NTPTrigger&&window.chrome.ntpSettingsPrivate.activateTrigger(window.chrome.ntpSettingsPrivate.NTPTrigger.FEED_VISIBLE)}))}}))}fireLayoutAnimationComplete(){window.setTimeout((()=>{ft.I.layoutAnimationComplete.getActionSender(this.pageSettingsDataConnector).send({height:100})}),0)}reportPerfMarkers(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=(0,Mt.K0)(o.z.ExperienceTrackerEdgeNextData);if(((0,Ce.ZE)()||this.config.triggerLowMemDhp)&&(yield(0,ht.VD)()),yield(0,at.f)({incompleteVisualDependencyCallback:e&&e.getIncompleteVisualDependencies||null,contentViewTimeoutOverride:2e3,timeoutOverride:35e3,onBeforeNotifyCallback:()=>(0,ge.o)([["TTVR.BingImage",["TTVR.BackgroundImageWC"]],["TTVR.QuickLinks",["TTVR.TopSitesEdgeNextWC"]],["TTVR.Feed",["TTVR"]]])}),b.Al.IsPrerender){let e=!1;(0,gt.eC)().then((()=>{window.setTimeout((()=>{e||ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.aay),{message:"Prerender Reveal not completed before timeout"}))}),3e3)})),this.checkForMissingSecondaryPerfMarkers(),yield(0,ht.lr)(),e=!0}this.addE2ETtvrToSecondaryPageTimings();!function(e){(0,r.mG)(this,void 0,void 0,(function*(){if(!(0,ct.N)())return;e=e||{},b.Al.IsPrerender&&((0,he.Y9)()[dt.C7]=1);let t=!1;return new Promise((n=>{const i=setTimeout((()=>{n(),t=!0,(0,st.If)(o,ue.oN.Secondary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);function o(t){return(0,r.mG)(this,void 0,void 0,(function*(){i&&clearTimeout(i);const n=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();(0,st.ql)(t,e.onBeforeNotifyCallback&&(()=>{e.onBeforeNotifyCallback(t)}),n)}))}(0,ue.e3)().then((e=>{n(),t||o(e)}))}))}))}({incompleteVisualDependencyCallback:e&&e.getIncompleteVisualDependencies||null,timeoutOverride:35e3});const t=(0,he.Ou)();t&&"feedCached"in t&&ce.M0.addOrUpdateTmplProperty("swfcs",t.feedCached)}))}addE2ETtvrToSecondaryPageTimings(){var e,t,n,i,r,o,a,s;const c=(0,he.Ou)(),d=(0,he.Y9)();if(!c||!d)return;const l=c[me.MV],p=c[`${me.MV}.${u.p.searchBox}`],h=c[me.zJ],g=`${me.MV}.${me.T8}`,m=`${me.MV}.${u.p.searchBox}.${me.T8}`,f=`${me.zJ}.${me.T8}`,v=(e,t,n,i)=>{c[e]=d[e]=t,(0,fe.QP)({name:e,startTime:n,endTime:i})},y=(e,t)=>{c[e]=d[e]=t,(0,fe.zI)({name:e,duration:t})},S=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"navigation");if("navigate"!==(S&&1===S.length&&S[0]).type)return v(g,l,0,l),v(m,p,0,p),void v(f,h,0,h);if(!(null===(i=null===(n=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.embeddedSearch)||void 0===n?void 0:n.newTabPage)||void 0===i?void 0:i.getTabTimings))return void ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.IfP),{message:"window.chrome.embeddedSearch.newTabPage.getTabTimings does not exist."}));const C=Math.round(performance.now());null===(s=null===(a=null===(o=null===(r=null===window||void 0===window?void 0:window.chrome)||void 0===r?void 0:r.embeddedSearch)||void 0===o?void 0:o.newTabPage)||void 0===a?void 0:a.getTabTimings)||void 0===s||s.call(a,((e,t)=>{if(!e)return void ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.tkb),{message:"chrome.embeddedSearch.newTabPage.getTabTimings returned false."}));if(!t||!t.tabStartToNavigationStart)return void ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.OWM),{message:"chrome.embeddedSearch.newTabPage.getTabTimings returned invalid timing object."}));let n=Math.round(t.tabStartToNavigationStart);b.Al.IsPrerender&&(n+=c[me.U4]),l&&y(g,n+l),p&&y(m,n+p),h&&y(f,n+h);const i=Math.round(performance.now()),r=i-C;v(me.OM,r,C,i)}))}getExperienceType(){return s.x.edgeChromiumPageWC}updateHeaderGrid(){var e;const{selectedFeedDisplaySetting:t,selectedQuickLinksDisplaySetting:n}=this.layoutState,i="always"===t&&!this.config.disableFeed,r=this.layoutState.imageOfTheDayEnabled,o=this.canShowTopNav?this.navHeight:0;let a=46,s=32;this.showCodexBingWithNonBingDSE&&(s=i?K:"headingsonly"===t?Q:Z),i&&n!==O.Z3.off&&n!==O.Z3.top&&(s-=32);const c=M.jb+"px",d=this.recommendedSitesHeight,l=this.childRefs.recommendedSites?`${d}px`:"",u=this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.off||this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top,p=u?"0":"auto",h=`${(()=>this.canShowTopNav&&!this.childRefs.recommendedSites?10:!i||n===O.Z3.off||n===O.Z3.top||this.childRefs.recommendedSites&&this.recommendedSitesDisplaySetting!==O.yR.off?this.childRefs.recommendedSites?"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.scrollDownButton?60:30-(this.config.reduceHeaderHeight||0):30:6)()}px`;let g=u?"0":"16px";if(i){const e=this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.off,t=this.childRefs.recommendedSites?this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.off:this.layoutState.quickLinksEnabled&&e;let n=this.edgeHeaderTopMarin+this.topBannerOffsetHeight+o;this.enableOneColumn&&(n=32);const i=`${n}px`;if(g="0",this.marqueeAdActive&&(this.marqueeAdTopHeight=n+a+s-window.scrollY,this.marqueeAdOverlayHeight=this.headerHeight-this.marqueeAdTopHeight),t){const e="auto";let t=16;if(this.hideSearchBox&&this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.top?(a=0,s=0,t=0):this.config.tsBackplateEnabled&&[O.Z3.onerow,O.Z3.tworows].includes(this.layoutState.selectedQuickLinksDisplaySetting)&&(t=6),this.marqueeAdActive&&(t+=this.marqueeAdHeight),this.gridRows=`${i} ${a}px ${s}px ${t}px ${e} ${h}`,this.childRefs.recommendedSites&&(this.gridRows=`${i} ${a}px ${s}px ${t}px ${p} ${g} ${l} ${h}`,this.recommendedSitesRow=7),this.searchRow=2,this.topSitesRow=5,this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top){const e="16px",t=`${M.jb+this.topBannerOffsetHeight}px`;this.gridRows=`${t} ${i} ${a}px ${s}px ${e} ${h}`,this.childRefs.recommendedSites&&(this.gridRows=`${t} ${i} ${a}px ${s}px ${e} ${l} ${h}`,this.recommendedSitesRow=6),this.searchRow=3,this.topSitesRow=1}}else this.gridRows=`${i} ${a}px ${s}px 16px ${h}`,this.childRefs.recommendedSites&&(this.gridRows=`${i} ${a}px ${s}px 16px ${p} ${g} ${l} ${h}`,this.recommendedSitesRow=6),this.searchRow=2,this.topSitesRow=4;this.logoRow=0}else if(r){let t;t=this.layoutState.selectedQuickLinksDisplaySetting?this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.tworows:(null===(e=this.topSitesLayoutState)||void 0===e?void 0:e.maxTiles)>10,this.weatherOneLinerRow=6;const n=this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.onerow||"off"===this.layoutState.selectedQuickLinksDisplaySetting||this.config.disableFeed,i=this.enableOneColumn?"minmax(32px, 15%)":"minmax(78px, 15%)";this.layoutState.configData&&this.layoutState.configData.maxQuickLinks&&this.layoutState.configData.maxQuickLinks>=29&&this.layoutState.configData.enabledFeatures&&this.layoutState.configData.enabledFeatures.includes("msNtpExp1")&&n&&"off"===this.layoutState.selectedFeedDisplaySetting?(this.gridRows=`${i} ${a}px ${s}px 1fr auto 20%`,this.childRefs.recommendedSites&&(this.gridRows=this.recommendedSitesDisplaySetting===O.yR.off?`${i} ${a}px ${s}px 1fr ${p} ${l} 20%`:`${i} ${a}px ${s}px 1fr ${p} ${l} ${h}`,this.recommendedSitesRow=6,this.weatherOneLinerRow=7)):(this.gridRows=t?`${i} ${a}px ${s}px 1fr auto 20%`:`${i} ${a}px ${s}px 1fr auto 12%`,this.childRefs.recommendedSites&&(this.recommendedSitesDisplaySetting===O.yR.off?this.gridRows=t?`${i} ${a}px ${s}px 1fr ${p} ${g} ${l} 20%`:`${i} ${a}px ${s}px 1fr ${p} ${g} ${l} 12%`:this.gridRows=`${i} ${a}px ${s}px 1fr ${p} ${g} ${l} ${h}`,this.recommendedSitesRow=7,this.weatherOneLinerRow=8)),this.logoRow=1,this.searchRow=2,this.topSitesRow=5,this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top&&(this.gridRows=`${c} ${i} ${a}px ${s}px 1fr 12%`,this.childRefs.recommendedSites&&(this.gridRows=this.recommendedSitesDisplaySetting===O.yR.off?`${c} ${i} ${a}px ${s}px 1fr ${l} 12%`:`${c} ${i} ${a}px ${s}px 1fr ${l} ${h}`,this.recommendedSitesRow=6),this.logoRow=2,this.searchRow=3,this.topSitesRow=1,this.weatherOneLinerRow=2)}else this.childRefs.recommendedSites&&this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.off||!this.childRefs.recommendedSites&&(this.layoutState.quickLinksEnabled||this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.off)?(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${a}px ${s}px 32px auto 1fr`,this.weatherOneLinerRow=8,this.childRefs.recommendedSites&&(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${a}px ${s}px 32px ${p} ${g} ${l} 1fr`,this.recommendedSitesRow=9,this.weatherOneLinerRow=10),this.logoRow=2,this.searchRow=4,this.topSitesRow=7,this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top&&(this.gridRows=`${c} 1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${a}px ${s}px 32px 1fr`,this.logoRow=3,this.searchRow=5,this.topSitesRow=1,this.childRefs.recommendedSites&&(this.gridRows=`${c} 1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${a}px ${s}px 32px ${l} 1fr`,this.weatherOneLinerRow=9,this.recommendedSitesRow=8))):(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${a}px ${s}px 1fr`,this.logoRow=2,this.searchRow=4,this.topSitesRow=6,this.weatherOneLinerRow=7,this.childRefs.recommendedSites&&(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${a}px ${s}px 32px ${p} ${l} 1fr`,this.topSitesRow=7,this.weatherOneLinerRow=9,this.recommendedSitesRow=8))}getHeaderHeightForPeekMode(){var e;const t=this.getMinimumHeaderHeightForPeekMode();let n=window.innerHeight-this.navHeight-(null!==(e=this.config.maxPeekViewport)&&void 0!==e?e:262);return this.childRefs.recommendedSites&&this.recommendedSitesDisplaySetting!==O.yR.off&&(n-=this.config.reduceHeaderHeight||0),n<t&&(n=t),n}refreshHeaderHeight(){if(!this.topSitesLayoutState||!this.layoutState)return;if(this.contentOffHeaderHeight=void 0,this.config.disableFeed)return void(this.headerHeight=window.innerHeight);let e;switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":e=window.innerHeight-(this.canShowTopNav?0:this.navHeight)-this.headingsOnlyHeightReduction;break;case"peek":e=this.getHeaderHeightForPeekMode();break;case"onscroll":e=window.innerHeight;break;case"off":e=window.innerHeight,this.contentOffHeaderHeight="100vh";break;default:{if(this.museumCardShown)return window.innerHeight-this.navHeight;let t=0;this.enableOneColumn&&(t+=8),this.showCodexBingWithNonBingDSE&&(t+=this.calculateAdditionalHeaderHeightForCodexBingNudge(this.columnArrangement,this.layoutState.selectedQuickLinksDisplaySetting)),this.config.disableBannerHeightFixing&&(t+=this.topBannerOffsetHeight),t+=this.canShowTopNav&&!this.enableOneColumn?M.O9+this.edgeHeaderTopMarin:0,this.marqueeAdActive&&(t+=this.marqueeAdHeight);const n=this.calculateInformationalHeaderHeight()+t,i=this.stickyHeaderHeight+t;if(this.childRefs.recommendedSites&&this.recommendedSitesDisplaySetting!==O.yR.off)return this.headerHeight=n-(this.config.reduceHeaderHeight||0);if(this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.onerow||this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.tworows)return this.headerHeight=n;if(this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.off)return this.headerHeight=i;if(this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top)return this.headerHeight=i+M.jb;e=this.layoutState.quickLinksEnabled?n:i,this.columnArrangement>"c2"&&this.layoutState.quickLinksEnabled&&"always"===this.layoutState.selectedFeedDisplaySetting&&(e+=112);break}}this.headerHeight=e}getMinimumHeaderHeightForPeekMode(){let e=0;return this.layoutState.imageOfTheDayEnabled?(this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top&&(e+=40),e+=78,e+=46,e+=32,e+=this.topSitesHeightBelowSearchBoxForPeekMode,this.childRefs.recommendedSites&&this.recommendedSitesDisplaySetting!==O.yR.off&&(this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.top&&this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.off&&(e+=16),e+=this.recommendedSitesHeight),e+=30):(e+=64,this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.top&&(e+=40),e+=48,e+=72,e+=46,e+=32,e+=32,e+=this.topSitesHeightBelowSearchBoxForPeekMode,this.childRefs.recommendedSites&&this.recommendedSitesDisplaySetting!==O.yR.off&&(this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.top&&this.layoutState.selectedQuickLinksDisplaySetting!==O.Z3.off&&(e+=16),e+=this.recommendedSitesHeight),e+=30),e}refreshImageHeight(){this.imageHeight=window.innerHeight+"px"}refreshTranslucentMode(){var e,t,n,i,r,o,a,s,c,d,l,u,p,h,g,f,v,y,S,C,b,w,T,k,P;if(this.config.translucentFeed&&(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.enableTranslucentFeed)&&this.layoutState.currentBackgroundImageType!==O.HX.off){this.showFeedTranslucent=!0,this.stickyOverrideStyles="",(null===(t=this.config.translucentFeed)||void 0===t?void 0:t.translucentStickyHeader)&&(this.stickyOverrideStyles="background-color: "+((0,_.Y)()?"#242424e6":"#F7F7F7e6")+";");const e=(null===(n=this.config.translucentFeed)||void 0===n?void 0:n.enableBlur)&&["always","peek","headingsonly"].includes(null===(i=this.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&(this.navIsSticky||"always"==(null===(r=this.layoutState)||void 0===r?void 0:r.selectedFeedDisplaySetting)&&["load","all"].includes(null===(o=this.config.translucentFeed)||void 0===o?void 0:o.infoBlurEnabledScene)&&!(null===(a=this.config.translucentFeed)||void 0===a?void 0:a.enableFeedBackplate)),P=(null===(s=this.config.translucentFeed)||void 0===s?void 0:s.enableBlur)&&!this.navIsSticky&&["peek","headingsonly"].includes(null===(c=this.layoutState)||void 0===c?void 0:c.selectedFeedDisplaySetting)&&["load","all"].includes(null===(d=this.config.translucentFeed)||void 0===d?void 0:d.inspBlurEnabledScene);return this.feedOverrideStyles="",P&&(this.feedOverrideStyles+="backdrop-filter: blur("+(null===(l=this.config.translucentFeed)||void 0===l?void 0:l.bgBlurSize)+");"),e?this.feedOverrideStyles+="":(null===(u=this.config.translucentFeed)||void 0===u?void 0:u.feedOpacity)&&(0,_.Y)()?this.feedOverrideStyles+="background-color: rgb(36 36 36 / "+(P?"0.5":null===(p=this.config.translucentFeed)||void 0===p?void 0:p.feedOpacity)+");":!(null===(h=this.config.translucentFeed)||void 0===h?void 0:h.feedOpacity)||(0,_.Y)()||this.config.solidColor?(null===(f=this.config.translucentFeed)||void 0===f?void 0:f.feedOpacity)&&!(0,_.Y)()&&this.config.solidColor&&(this.feedOverrideStyles+="background-color: rgb(245 245 245 /"+(P?"0.5":null===(v=this.config.translucentFeed)||void 0===v?void 0:v.feedOpacity)+");"):this.feedOverrideStyles+="background-color: rgb(247 247 247 /"+(P?"0.5":null===(g=this.config.translucentFeed)||void 0===g?void 0:g.feedOpacity)+");",this.feedOverrideStyles+=(null===(y=this.config.translucentFeed)||void 0===y?void 0:y.feedSidePadding)?`padding-left: ${null===(S=this.config.translucentFeed)||void 0===S?void 0:S.feedSidePadding}; padding-right: ${null===(C=this.config.translucentFeed)||void 0===C?void 0:C.feedSidePadding};`:"",this.feedOverrideStyles+=(null===(b=this.config.translucentFeed)||void 0===b?void 0:b.feedBorderRadius)?`border-radius: ${null===(w=this.config.translucentFeed)||void 0===w?void 0:w.feedBorderRadius};`:"",this.feedOverrideStyles+=!e&&(null===(T=this.config.translucentFeed)||void 0===T?void 0:T.feedBoxShadow)?`box-shadow: ${null===(k=this.config.translucentFeed)||void 0===k?void 0:k.feedBoxShadow};`:"",void(0,m.j3)("backgroundImage","displayed")}this.feedOverrideStyles="",this.stickyOverrideStyles="",this.showFeedTranslucent=this.scrollIsPastStyleThreshold&&this.layoutState.imageOfTheDayEnabled&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"peek"===this.layoutState.selectedFeedDisplaySetting),(null===(P=this.config.translucentFeed)||void 0===P?void 0:P.enableTranslucentFeed)&&(0,m.j3)("backgroundImage",this.showFeedTranslucent?"displayed":"hidden")}handleTopSitesEnableChange(e,t){if(this.topSitesHolder){if("always"===t.selectedFeedDisplaySetting&&!e)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");e?(this.topSitesHolder.style.visibility="",this.topSitesHolder.style.opacity="1"):this.topSitesHolder.style.opacity="0",window.setTimeout((()=>{e||(this.topSitesHolder.style.visibility="hidden"),this.topSitesHolder.style.transition=null}),wn)}}calculateInformationalHeaderHeight(){let e=0,t=this.childRefs.recommendedSites?224:218,n=330;"always"===this.layoutState.selectedFeedDisplaySetting&&(t=this.childRefs.recommendedSites?214:208,n=310);const{selectedQuickLinksDisplaySetting:i}=this.layoutState,r=i==O.Z3.tworows;let o;return i==O.Z3.off||i==O.Z3.top?(o=78,e=56):o=this.columnArrangement>=B.K$.c3&&!r?t:n,t=o,i==O.Z3.top&&(t+=M.jb),this.childRefs.recommendedSites&&(t+=this.recommendedSitesHeight+e),this.displayConditionalBanner&&(t+=this.topBannerOffsetHeight),this.hideSearchBox&&i!==O.Z3.off&&i!==O.Z3.top&&(t-=62),i!==O.Z3.off&&i!==O.Z3.top&&(t-=32,this.childRefs.recommendedSites&&this.recommendedSitesDisplaySetting!==O.yR.off||(i==O.Z3.tworows?t-=32:t-=16)),this.config.feeds3HeaderDecrease&&(i==O.Z3.tworows?t-=32:i==O.Z3.onerow&&(t-=16)),this.config.enableFeeds3HeaderDecrease&&(i==O.Z3.tworows?t-=48:i==O.Z3.onerow&&(t-=32)),t}checkMarketToggleOverlap(e,t,n){const i=e.getBoundingClientRect();let r=!1;if(i){const e=!(i.right<t.left||i.left>t.right),o=n?i.bottom>t.top:i.top<t.bottom;r=e&&o}return r}checkMarketToggleFitOnPage(){var e,t,n,i,r,o;if(!this.shadowRoot)return!0;let a=this.shadowRoot.querySelector("market-language-toggle");const s=this.shadowRoot.querySelector("cs-header-core");if(!a){if(!s)return!0;a=null===(e=s.shadowRoot)||void 0===e?void 0:e.querySelector("market-language-toggle")}if(!a||!a.shadowRoot||!(null===(t=a.shadowRoot)||void 0===t?void 0:t.children))return!0;const c=null===(n=a.shadowRoot)||void 0===n?void 0:n.children[0];if(!c)return!0;const d=c.getBoundingClientRect(),l=null===(i=this.headerCoreRef)||void 0===i?void 0:i.search;if(l&&this.checkMarketToggleOverlap(l,d,!1))return!1;const u=this.shadowRoot.querySelector("background-image");if(u){const e=null===(r=u.shadowRoot)||void 0===r?void 0:r.querySelector(".museumCard");if(e&&this.checkMarketToggleOverlap(e,d,!1))return!1}const p=this.shadowRoot.querySelector("top-sites-edgenext");if(p){if(this.checkMarketToggleOverlap(p,d,!1))return!1;const e=null===(o=p.shadowRoot)||void 0===o?void 0:o.querySelector(".action-button");if(e&&this.checkMarketToggleOverlap(e,d,!1))return!1}return!0}focusFeedBorderScrollFade(){const e=this.shadowRoot.querySelector(".navAndContent_feed");let t="";t=this.config.enableFocusFeedBorder?"navAndContent_noborder":this.config.enableFocusFeedShadow?"navAndContent_noshadow":this.config.enableFocusFeedLighterShade?"navAndContent_nolighterShade":"navAndContent_nogradient",e&&(0!=window.scrollY?e.classList.add(t):0==window.scrollY&&e.classList.remove(t))}checkGalleryPageFitAndDisplayToast(){requestAnimationFrame((()=>{innerWidth<jt.Gb&&(this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.renderGalleryMinimumWidthToast())}))}renderGalleryMinimumWidthToast(){this.displayGalleryMinimumWidthToast=!0,window.setTimeout((()=>{this.displayGalleryMinimumWidthToast=!1}),5e3)}getSelectedPivot(e){return e&&e.selectedFeedPivot?e.selectedFeedPivot:(0,f.$o)().getItem("switchedPivot")}stampScrollTmpl(){ce.M0.addOrUpdateTmplProperty("userScrolled","1")}handleCardSliversOnScroll(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("blankRiverContainer");t&&(t.classList.add("fadeOut"),window.setTimeout((()=>{this.displayBlankRiver=!1}),500))}calculateStickyBreakpoints(){0===window.scrollY&&this.calculateSearchStickyBreakpoint(),this.calculateTopAndBackgroundStickyBreakpoints()}calculateSearchStickyBreakpoint(){const e=this.headerCoreRef;if(!e)return;let t=this.edgeHeaderTopMarin;this.quickLinksDisplaySetting===O.Z3.top&&(t+=36),t+=this.topBannerOffsetHeight;const n=e.offsetTop;this.searchStickyBreakpoint=n-t+(this.enableOneColumn?this.stickyHeaderHeight:0),(0,Ne.Fc)("search",this.searchStickyBreakpoint)}calculateTopAndBackgroundStickyBreakpoints(){var e;const{selectedFeedDisplaySetting:t,selectedQuickLinksDisplaySetting:n}=this.layoutState;let i;const r=this.calculateAdditionalHeaderHeightForCodexBingNudge(this.columnArrangement,this.layoutState.selectedQuickLinksDisplaySetting);switch(t){case"always":{let e=0;const t=this.calculateInformationalHeaderHeight();this.enableOneColumn&&(e+=8),i=n===O.Z3.off&&this.recommendedSitesDisplaySetting===O.yR.off?0+e:t-this.stickyHeaderHeight+e,i+=r;break}case"peek":i=this.getHeaderHeightForPeekMode()-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"headingsonly":i=window.innerHeight-this.stickyHeaderHeight-this.navHeight-this.topBannerOffsetHeight-this.headingsOnlyHeightReduction;break;default:i=window.innerHeight-this.stickyHeaderHeight-this.topBannerOffsetHeight}let o=i;const a=i;o+=+(this.enableOneColumn?this.stickyHeaderHeight:0),!(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.enableTranslucentFeed)||this.layoutState.currentBackgroundImageType===O.HX.off&&!this.disableStickyHeader?(0,Ne.Fc)(j,a):(0,Ne.Fc)(j,-1),this.disableStickyHeader?((0,Ne.Fc)(q,o+this.stickyHeaderHeight),(0,M.cN)(o+this.stickyHeaderHeight)):((0,Ne.Fc)(G,o),(0,Ne.Fc)(q,o),(0,M.cN)(o)),this.layoutState.currentBackgroundImageType!==O.HX.off?(0,Ne.Fc)(V,a):(0,Ne.Fc)(V,-1),this.navIsSticky=window.scrollY>o,this.hideOneLineTopSites=this.quickLinksDisplaySetting===O.Z3.top&&window.scrollY>o-M.jb,this.updateHeaderCoreOffset()}calculateAdditionalHeaderHeightForCodexBingNudge(e,t){if(!this.showCodexBingWithNonBingDSE||!this.config||"always"!==this.layoutState.selectedFeedDisplaySetting||e<"c2")return 0;let n=32;return t===O.Z3.off||t===O.Z3.top?n=60:t===O.Z3.tworows&&(n=10),n}getCompanyLogo(){const e=this.layoutState.currentLayout;this.showBackplate=e===O.nP.focused||e===O.nP.custom&&!this.layoutState.imageOfTheDayEnabled||e===O.nP.informational&&this.config.turnOffBkgdForInformational&&this.layoutState.imageOfTheDayEnabled,this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement),this.companyLogoImage=this.getCompanyLogoFromLocalStorage(),this.updateHeaderCoreData()}updateHolidayEffectsPostion(){this.holidayEffectsPosition="display: none;",window.setTimeout((()=>{var e,t;const n=getComputedStyle(this).getPropertyValue("--direction")===mt.N.ltr,i=null===(t=null===(e=this.shadowRoot.querySelector("background-image"))||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector(".museumCard");if(i&&i.clientWidth){const e=i.clientWidth+162;this.holidayEffectsPosition=n?`left: calc(100% - ${e}px);`:`right: calc(100% - ${e}px);`}else this.holidayEffectsPosition=n?"left: calc(100% - 300px);":"right: calc(100% - 300px);"}),wn)}updateTopSitesQuickLinkEndMarginUsedPadding(){var e,t,n,i;const r=!!(null===(t=null===(e=this.config)||void 0===e?void 0:e.childRefs)||void 0===t?void 0:t.holidayEffects),o=null===(i=null===(n=this.shadowRoot.querySelector("background-image"))||void 0===n?void 0:n.shadowRoot)||void 0===i?void 0:i.querySelector(".museumCard");(r||o)&&window.setTimeout((()=>{var e;this.layoutState.selectedQuickLinksDisplaySetting===O.Z3.off&&(null===(e=this.config)||void 0===e?void 0:e.enableNewQuickLinksPositionInAlways)&&(r&&(this.topSitesQuickLinkEndMarginUsedPadding+=124),o&&o.clientWidth&&(this.topSitesQuickLinkEndMarginUsedPadding+=o.clientWidth),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.updateTopSitesQuickLinkEndMarginUsedPadding(this.topSitesQuickLinkEndMarginUsedPadding))}),wn)}initializeDevTools(){var e,t;if(this.config.childRefs.devTools&&"true"===(0,A.L)().get("devtools")){const n=b.Al.ClientSettings,i=(null===(e=null==n?void 0:n.detection)||void 0===e?void 0:e.isMsft)||(null===(t=null==n?void 0:n.detection)||void 0===t?void 0:t.isCorpNet);this.enableDevTools=i||S.jG.IsDebug}}updateFeedLayoutTelemetry(){ce.M0.updatePageMetadata({feed:{layout:"multicol"}})}checkAndEnableMobileUpsell(){var e,t,n;if(this.childRefs.mobileAppUpsell){const i=b.Al.ClientSettings,r=(null===(e=null==i?void 0:i.detection)||void 0===e?void 0:e.isMsft)||(null===(t=null==i?void 0:i.detection)||void 0===t?void 0:t.isCorpNet),o="1"===(0,A.L)().get("showupsellicon");null===(n=this.pageSettingsDataConnector)||void 0===n||n.getPrimaryAccountInfoAsync(!0).then((e=>{const t=o||!r&&e.accountType!==F.l.AAD;t&&ce.M0.addOrUpdateTmplProperty("MobileAppUpsellDisplay","1"),this.enableMobileAppUpsell=t,this.updateHeaderCoreData()}))}}checkIPLocationForRewardsMedallion(){var e;if(!(null===(e=this.config)||void 0===e?void 0:e.enableCountryCheckForRewards)||!S.jG.CountryCode)return void(this.isShowRewardsAllowedByLocation=!1);const t=S.jG.CountryCode.toUpperCase();this.isShowRewardsAllowedByLocation=null==p?void 0:p.has(t)}tryLoadFeedModuleBundle(){return(0,r.mG)(this,void 0,void 0,(function*(){this.feedModuleImportPromise||(this.feedModuleImportPromise=(0,It.n)(this.config),yield this.feedModuleImportPromise)}))}updateHeaderCoreData(){const e=this.layoutState.greetingEnabled&&this.showGreeting&&this.childRefs.welcomeGreeting&&"greeting"===this.config.topLeftDisplayMode&&!this.isNewTabPageContentManagedByPolicy,t=this.isAppLauncherAllowedByPolicy,n=this.renderSignInControls,i=this.childRefs.mobileAppUpsell&&this.enableMobileAppUpsell,r=this.childRefs.msRewards&&this.isShowRewardsAllowedByLocation&&this.isShowMSRewardsAllowedByPolicy,o=this.childRefs.notificationBell&&"off"!==this.layoutState.selectedFeedDisplaySetting&&this.isNotificationEnabledByAdmin,a=this.renderMarketLanguageToggle&&this.marketToggleCanFit,s=this.layoutState.isCompanyLogoEnabledByPolicy&&this.showCompanyLogo&&this.config.companyLogo&&!!this.companyLogoImage;this.headerCoreTopStartData={waffleRef:t?this.childRefs.waffle:null,enableMSBranding:!this.config.companyLogo,brandingTitle:this.config.logoRedirectionUrl?this.strings.logoSeeMoreTitleText:this.strings.logoTitleText,brandingHref:this.config.logoRedirectionUrl?(0,x.h_)(this.config.logoRedirectionUrl):"",backgroundImageOn:this.layoutState.imageOfTheDayEnabled,enableCompanyLogo:s,companyLogoImage:this.companyLogoImage,showcompanyLogoBackplate:this.showBackplate},this.headerCoreTopEndData={signInControlRef:n&&!this.config.useNewSignInButtonStyles?this.childRefs.signInControl:null,signInControlAtTheEndRef:n&&this.config.useNewSignInButtonStyles?this.childRefs.signInControl:null,mobileAppUpsellRef:i?this.childRefs.mobileAppUpsell:null,rewardsRef:r?this.childRefs.msRewards:null,welcomeGreetingRef:e?this.childRefs.welcomeGreeting:null,notificationBellRef:o?this.childRefs.notificationBell:null,settingsRef:this.childRefs.settings,themePickerRef:this.childRefs.themePicker,marketLanguageToggleRef:a?this.childRefs.marketLanguageToggleWC:null,localeMarket:this.localeMarket,onMarketValueChange:this.onMarketValueChange,languageToggleHorizontalAlignment:!1},this.headerCoreNavData={navRef:this.canShowTopNav?this.childRefs.superNav:null,isImageHiddenAndNotDark:this.isImageHiddenAndNotDark}}updateHeaderCoreSearchData(){var e,t;this.headerCoreSearchData={searchConfigRef:this.childRefs.search,showCodexBingIcon:null===(e=this.config)||void 0===e?void 0:e.showCodexBingIcon,enableCodexBingStyles:(null===(t=this.config)||void 0===t?void 0:t.showCodexBingIcon)&&(this.isAlwaysMode||0!=(null===window||void 0===window?void 0:window.scrollY))}}updateHeaderCoreBelowSearchData(){this.headerCoreBelowSearchData={testBingNudgeRef:this.childRefs.testBingNudge&&this.showCodexBingWithNonBingDSE?this.childRefs.testBingNudge:null,searchHistoryRef:this.childRefs.searchHistory,newsHeadlineBelowSearchboxRef:this.isNewTabPageContentManagedByPolicy?null:this.childRefs.newsHeadlineBelowSearchbox}}checkCodexBingFlagWithNonBingDSE(){if(!this.config.showCodexBingNudge||this.focusRedirectEnabled||!document||!document.documentElement||"0"!==(0,A.L)().get("dsp"))return void(this.showCodexBingWithNonBingDSE=!1);const e=document.documentElement.clientHeight,{selectedFeedDisplaySetting:t}=this.layoutState,n="headingsonly"===t||"off"===t,i="always"===t;this.showCodexBingWithNonBingDSE=n?e>J:!!i||document.documentElement.clientHeight>X,this.updateHeaderCoreBelowSearchData()}targetLanguageOnMismatch(e){var t,n;const i=b.Al.ClientSettings&&b.Al.ClientSettings.market&&b.Al.ClientSettings.market.requestInput,r=S.jG.CurrentMarket.split("-"),o={language:(null!==(t=i.language)&&void 0!==t?t:"").toLowerCase(),market:(null!==(n=i.region)&&void 0!==n?n:"").toLowerCase()};if(i&&o&&"zh"!==o.language){const t={language:o.language,market:r[r.length-1]},n=h.$n.find((e=>e.id==(0,Wt.p)(t)));if(n)return n;const i=o.market&&h.$n.find((e=>e.id==(0,Wt.p)(o)));if(i)return i;{const t=e.get(o.language);if(t)return h.$n.find((e=>e.id==t[0]))}}}onConditionalBannerDisplayChange(e){return(0,r.mG)(this,void 0,void 0,(function*(){this.displayConditionalBanner=e,this.updateStickyHeaderHeight(),this.updateHeaderCoreOffset(),this.updateHeaderGrid(),this.refreshHeaderHeight(),yield(0,Be.y)().then((()=>this.calculateStickyBreakpoints()))}))}updateStickyHeaderHeight(){this.stickyHeaderHeight=M.FQ,this.enableOneColumn||(this.stickyHeaderHeight+=this.topBannerOffsetHeight)}updateHeaderCoreOffset(){this.headerCoreOffset=this.quickLinksDisplaySetting!==O.Z3.top||this.hideOneLineTopSites?0:M.jb,this.enableOneColumn||(this.headerCoreOffset+=this.topBannerOffsetHeight)}setZoomTmpl(){if(!(0,ct.N)())return;const e=this.getZoomTmpl();this.riverZoomTmpl!==e&&(ce.M0.removeTmplProperty(this.riverZoomTmpl),ce.M0.addOrUpdateTmplProperty(e,"1"),this.riverZoomTmpl=e)}getZoomTmpl(){var e;let t,n;return this.isCurrentWidthInZoomRange(3)?(n="c4",ce.M0.addOrUpdateTmplProperty(n+"riverZoomOutTMPL","1"),t=innerWidth>1132&&innerWidth<1257?"90":innerWidth<1133?"80":"100"):this.isCurrentWidthInZoomRange(2)?(n="c3",ce.M0.addOrUpdateTmplProperty(n+"riverZoomOutTMPL","1"),t=innerWidth>855&&innerWidth<949?"90":innerWidth<856?"80":"100"):(n=null===(e=(0,N.Bn)())||void 0===e?void 0:e.currentColumnArrangement,t="100"),"riverZoom_"+n+"_"+t}isCurrentWidthInZoomRange(e){if(!this.config.columnDifferences)return!1;const t=(0,N.sZ)(e);return this.config.enableRiverZoom?innerWidth>t-1&&innerWidth<(0,N.sZ)(e)+this.config.columnDifferences[e]+1:innerWidth>(0,N.sZ)(e)-this.config.columnDifferences[e]-1&&innerWidth<(0,N.sZ)(e)+1}attachListenerForKeyDownScrollOnFocus(){window.addEventListener("keyup",this.scrollOnKeyUp,{once:!0}),window.addEventListener("keyup",this.focusControlOnScrollKeyUp),window.addEventListener("wheel",this.focusControlOnWheel)}scrollOnKeyUp(e){"PageDown"!=e.key&&"ArrowDown"!=e.key||window.setTimeout((()=>{if(0==window.scrollY){const t="PageDown"==e.key?window.innerHeight:window.innerHeight/5;window.scrollBy({top:t,behavior:"smooth"})}}),1)}blurGridViewWhenActive(e){e&&e.shadowRoot&&e.shadowRoot.activeElement&&"gridViewFeed"==e.shadowRoot.activeElement.elementKey&&e.shadowRoot.activeElement.blur()}checkForMissingSecondaryPerfMarkers(){var e;let t=!1;const n=()=>{if(!(0,w.j)()||t)return;const e=(0,ue.bO)(ue.oN.Secondary);e&&e.length&&(t=!0,ce.M0.sendAppErrorEvent(Object.assign(Object.assign({},le.zis),{message:`Incomplete markers: ${e.join(",")}`,pb:Object.assign({},le.zis.pb)})))};if(window.addEventListener("beforeunload",n,{once:!0}),Promise.all([(0,gt.eC)(),(0,ue.b1)()]).then((()=>(0,k.rh)(2e3))).then(n),null===(e=this.config)||void 0===e?void 0:e.enablePageTimingsDebug){const e=()=>{if(!(0,w.j)())return;const e=["Background.Request","Background.Serve","Consume","Prerender","Request","Response","Serve"],t=(0,he.Y9)(),n={type:"debug"};for(const i of e){const e="TTNativeAd."+i;e in t&&(n[i]=t[e])}const i=(0,ue.bO)(ue.oN.Primary);if(null==i?void 0:i.length){const e=(0,he.Ou)();n.pendingPrimaryTimings=e,n.incompleteMarkers=i}ce.M0.sendLoadTimeEvent({markers:n})};window.addEventListener("beforeunload",e,{once:!0})}}}(0,r.gn)([Et.LO],En.prototype,"showWeatherOneLiner",void 0),(0,r.gn)([Et.LO],En.prototype,"isWeatherOneLinerMapped",void 0),(0,r.gn)([Et.LO],En.prototype,"weatherOneLinerMapUrl",void 0),(0,r.gn)([Et.LO],En.prototype,"weatherOneLinerText",void 0),(0,r.gn)([Et.LO],En.prototype,"weatherOneLinerIconTemplate",void 0),(0,r.gn)([Et.LO],En.prototype,"telemetryContext",void 0),(0,r.gn)([Et.LO],En.prototype,"layoutState",void 0),(0,r.gn)([Et.LO],En.prototype,"columnArrangement",void 0),(0,r.gn)([Et.LO],En.prototype,"quickLinksDisplaySetting",void 0),(0,r.gn)([Et.LO],En.prototype,"headerHeight",void 0),(0,r.gn)([Et.LO],En.prototype,"contentOffHeaderHeight",void 0),(0,r.gn)([Et.LO],En.prototype,"imageHeight",void 0),(0,r.gn)([Et.LO],En.prototype,"gridRows",void 0),(0,r.gn)([Et.LO],En.prototype,"enableOneColumn",void 0),(0,r.gn)([Et.LO],En.prototype,"showPivotRefreshButton",void 0),(0,r.gn)([Et.LO],En.prototype,"closeRefreshAnimation",void 0),(0,r.gn)([Et.LO],En.prototype,"logoRow",void 0),(0,r.gn)([Et.LO],En.prototype,"searchRow",void 0),(0,r.gn)([Et.LO],En.prototype,"topSitesRow",void 0),(0,r.gn)([Et.LO],En.prototype,"recommendedSitesRow",void 0),(0,r.gn)([Et.LO],En.prototype,"weatherOneLinerRow",void 0),(0,r.gn)([Et.LO],En.prototype,"showFeedTranslucent",void 0),(0,r.gn)([Et.LO],En.prototype,"stickyOverrideStyles",void 0),(0,r.gn)([Et.LO],En.prototype,"feedOverrideStyles",void 0),(0,r.gn)([Et.LO],En.prototype,"enableHiddenRecommendedSitesStyles",void 0),(0,r.gn)([Et.LO],En.prototype,"recommendedSitesDisplaySetting",void 0),(0,r.gn)([Et.LO],En.prototype,"brandZoneShowInRecommendedSites",void 0),(0,r.gn)([Et.LO],En.prototype,"brandZoneSize",void 0),(0,r.gn)([Et.LO],En.prototype,"hasCoachmark",void 0),(0,r.gn)([Et.LO],En.prototype,"navIsSticky",void 0),(0,r.gn)([Et.LO],En.prototype,"edgeHeaderTopMarin",void 0),(0,r.gn)([Et.LO],En.prototype,"pivotManager",void 0),(0,r.gn)([Et.LO],En.prototype,"conditionalBannerShown",void 0),(0,r.gn)([Et.LO],En.prototype,"isAlwaysMode",void 0),(0,r.gn)([Et.LO],En.prototype,"bottomRightCornerClassName",void 0),(0,r.gn)([Et.LO],En.prototype,"className",void 0),(0,r.gn)([Et.LO],En.prototype,"disableStickyHeader",void 0),(0,r.gn)([Et.LO],En.prototype,"canaryFlightEnabled",void 0),(0,r.gn)([Et.LO],En.prototype,"holidayEffectsPosition",void 0),(0,r.gn)([Et.LO],En.prototype,"displayConditionalBanner",void 0),(0,r.gn)([Et.LO],En.prototype,"isOnPersonalizeOrM365Page",void 0),(0,r.gn)([Et.LO],En.prototype,"isOnM365Page",void 0),(0,r.gn)([Et.LO],En.prototype,"nowPivotId",void 0),(0,r.gn)([Et.LO],En.prototype,"hideOneLineTopSites",void 0),(0,r.gn)([Et.LO],En.prototype,"isNewTabPageContentManagedByPolicy",void 0),(0,r.gn)([Et.LO],En.prototype,"contentConfigInfo",void 0),(0,r.gn)([Et.LO],En.prototype,"context",void 0),(0,r.gn)([Et.LO],En.prototype,"getFeedDependencyPromise",void 0),(0,r.gn)([Et.LO],En.prototype,"renderBackgroundGallery",void 0),(0,r.gn)([Et.LO],En.prototype,"displayGalleryMinimumWidthToast",void 0),(0,r.gn)([Et.LO],En.prototype,"headerCoreTopStartData",void 0),(0,r.gn)([Et.LO],En.prototype,"headerCoreTopEndData",void 0),(0,r.gn)([Et.LO],En.prototype,"headerCoreNavData",void 0),(0,r.gn)([Et.LO],En.prototype,"headerCoreSearchData",void 0),(0,r.gn)([Et.LO],En.prototype,"headerCoreBelowSearchData",void 0),(0,r.gn)([Et.LO],En.prototype,"headerCoreOffset",void 0),(0,r.gn)([Et.LO],En.prototype,"stickyHeaderHeight",void 0),(0,r.gn)([Et.LO],En.prototype,"isSearchSticky",void 0),(0,r.gn)([Et.LO],En.prototype,"wpoNotificationPreviewData",void 0),(0,r.gn)([Et.LO],En.prototype,"hasEnoughSpaceForNotificationMiniCard",void 0),(0,r.gn)([Et.LO],En.prototype,"enableNotificationAnimation",void 0),(0,r.gn)([Et.LO],En.prototype,"isImageHiddenAndNotDark",void 0),(0,r.gn)([Et.LO],En.prototype,"hideSearchBox",void 0),(0,r.gn)([Et.LO],En.prototype,"isScrollDownButtonDismissed",void 0),(0,r.gn)([Et.lk],En.prototype,"topBannerOffsetHeight",null),(0,r.gn)([Et.lk],En.prototype,"topSitesOffsetHeight",null),(0,r.gn)([Et.LO],En.prototype,"multiLineSearchBox",void 0),(0,r.gn)([Et.LO],En.prototype,"showCodexBingWithNonBingDSE",void 0),(0,r.gn)([Et.LO],En.prototype,"displayBlankRiver",void 0),(0,r.gn)([Et.LO],En.prototype,"overriddenFeedConfig",void 0),(0,r.gn)([Et.LO],En.prototype,"overlapState",void 0),(0,r.gn)([Et.LO],En.prototype,"marqueeAdOverlayHeight",void 0),(0,r.gn)([Et.LO],En.prototype,"marqueeAdHeight",void 0),(0,r.gn)([Et.lk],En.prototype,"shouldShowNotificationMiniCard",null);var xn=n(89150),Mn=n(93703),On=n(41472),Ln=n(81563);function Dn(e){return mn.dy`<script nonce="${()=>window.NONCE_ID}">window.ssrLoadedExperience.publish(${mn.dy.partial(JSON.stringify(e))})</script>`}var Rn=n(83649),Fn=n(42798);Rn.q,Fn.Z;const Bn=(e,t=!1)=>{const n=t?`window.dispatchEvent(new Event("${e}"));`:"";return mn.dy`<script nonce="${()=>window.NONCE_ID}">${mn.dy.partial(`window.markTTSR("${e}");`)} ${mn.dy.partial(n)}</script>`},Nn=e=>`--sticky-height:${e.stickyHeaderHeight||108}px;--search-sticky-extra-height:${e.topBannerOffsetHeight}px`,Un=mn.dy`<div class="refreshPage ${e=>e.closeRefreshAnimation?"hide":""}"><fluent-progress-ring></fluent-progress-ring></div>`,$n=mn.dy`<div class="doubleWideRiverCard"></div>`,_n=mn.dy`<div class="singleWideRiverCard"></div>`,Hn=mn.dy`<div class="fixed-size-card"><div class="card-img skeleton"></div><div class="card-label skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton" style="width: 70%;"></div></div>`,Wn=mn.dy`<div class="fixed-size-card work-feed"></div>`,jn=mn.dy`<div class="fixed-size-card-infopane"><div class="card-img skeleton"></div><div class="card-label skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton" style="width: 70%;"></div></div>`,Gn=mn.dy`<div class="fixed-size-card-infopane work-feed"></div>`,Vn=mn.dy`<div class="skeleton-container ${e=>e.isOnM365Page?"work-feed":""}" id="skeleton-loader"><div class="skeleton-feed fixed-size-feed">${e=>e.isOnM365Page?Gn:jn} ${(0,xn.rx)((e=>e.skeletonCardArray),(e=>e.isOnM365Page?Wn:Hn))}</div></div>`,qn=mn.dy`${$n} ${_n} ${_n} ${_n}`,zn=mn.dy`${$n} ${_n} ${_n}`,Qn=mn.dy`${$n} ${_n}`,Zn=mn.dy`${$n}`,Kn=mn.dy`${_n}`,Jn=mn.dy`<div id="blankRiverContainer" class="blankRiverContainer">${(0,Mn.g)((e=>"c5"===e.columnArrangement),qn)} ${(0,Mn.g)((e=>"c4"===e.columnArrangement),zn)} ${(0,Mn.g)((e=>"c3"===e.columnArrangement),Qn)} ${(0,Mn.g)((e=>"c2"===e.columnArrangement),Zn)} ${(0,Mn.g)((e=>"c1"===e.columnArrangement),Kn)}</div>`,Xn=mn.dy`<div id="scrollDownButtonContainer">${e=>(0,Ln.Ot)(e.childRefs.scrollDownButton,{properties:{scrollToShowFeed:e.scrollToShowFeed,isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled}})}</div>`,Yn=mn.dy`<div class="navAndContent ${e=>e.config.enableOneColumn?"navAndContentOneColumn":""} ${e=>e.showFeedTranslucent?"navAndContent_tb":""} ${e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)?"navAndContent_nb":""}} ${e=>e.config.solidColor?"solidtx":""} ${e=>e.config.bgMuseumCdBtnMoveToBottom&&e.config.fixedParentSpace?"navAndContentAutoWidth":""} ${e=>e.config.enableRiverZoom?"riverZoom":""}" ${(0,On.i)("navAndContentRef")}>${e=>(0,Ln.Ot)(e.childRefs.backToTopButton)} ${(0,Mn.g)((e=>!e.config.noScrollDownBtn&&"headingsonly"===e.layoutState.selectedFeedDisplaySetting&&!!e.childRefs.scrollDownButton&&!e.isScrollDownButtonDismissed&&(!e.config.enableWeatherOneLiner||e.config.enableWeatherOneLiner&&e.isWeatherOneLinerMapped&&!e.showWeatherOneLiner)),Xn)}<div class="navAndContent_feed ${e=>"play"===e.nowPivotId?"navAndContent_feed_fullpage":""} ${e=>e.responsiveSupported?"nav-feed-size-responsive":""}  ${e=>e.shouldShowFocusBorder()}" style="${e=>e.feedOverrideStyles}; ${e=>(e=>`--nav-height:${e.navHeight||50}px;`)(e)} ${e=>Nn(e)}" ${(0,On.i)("navAndContentFeedRef")}>${(0,Mn.g)((e=>!e.config.enableTopNav),mn.dy`<div class="g_nav_container"><div id="g_nav" style="${e=>{var t;return e.isOnM365Page&&(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)?"position:relative;--m365-column-width:fit-content;justify-content:flex-start":""}}" class="nav ${e=>e.className} ${e=>e.config.enableOneColumn?"navStickyOneColumn":""} ${e=>e.conditionalBannerShown?"conditionalBannerShown":""} ${e=>e.config.translucentFeed&&e.config.translucentFeed.translucentStickyHeader&&e.showFeedTranslucent?"translucentHeader":""}" ${(0,Ne.Fl)({stickyClassName:"nav_sticky",breakpointName:G})} ${e=>e.config.solidColor?"solidtx":""}"><div class="contentSized navSized ${e=>e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>e.responsiveSupported?"nav-size-responsive":""} ${e=>e.config.enableRiverZoom?"short":""} ">${e=>{var t,n,i,r;return(0,Ln.Ot)(e.childRefs.superNav,{attributes:{showFullPageBlur:!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))},ttvrMarkerAggregate:"Header"})}}</div></div></div>`)} ${(0,Mn.g)((e=>e.showPivotRefreshButton),Un)}<div style="${e=>{var t;return!e.canShowTopNav&&e.isOnM365Page&&(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)?"margin-top:0;":""}}" class="${e=>e.config.enableTopNav?"contentNoNav":"contentBelowNav"}  ${e=>e.isOnM365Page?"":"contentSized"} ${e=>!e.isOnM365Page&&e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>"play"===e.nowPivotId?"contentSizedFullScreen":""} ${e=>e.config.enableContentPlaceHolder?"contentPlaceHolder":""} ${e=>e.responsiveSupported?"content-size-responsive":""} ${e=>e.config.enableRiverZoom?"riverZoom short":""} ">${(0,Mn.g)((e=>e.config.enableLoaderFlight),Vn)} ${(0,Mn.g)((e=>!e.isOnPersonalizeOrM365Page&&!e.config.childRefs.superBreakingNews&&e.config.childRefs.breakingNews),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.breakingNews,{ttvrMarkerAggregate:"Header",attributes:{oneLine:!0,usePivotManager:!0}})}`)} ${(0,Mn.g)((e=>!e.isOnPersonalizeOrM365Page&&e.config.childRefs.superBreakingNews&&e.config.useSuperBreakingNews),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.superBreakingNews,{attributes:{style:"display: grid; justify-items: center;"},ttvrMarkerAggregate:"Header"})}`)} ${(0,Mn.g)((e=>"gaming"===e.nowPivotId&&e.childRefs.gamingDiscoverStrip),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.gamingDiscoverStrip,{ttvrMarkerAggregate:"Header"})}`)} ${(0,Mn.g)((e=>e.config.enableHeadingsOnlyCardSlivers&&e.displayBlankRiver),Jn)} ${(0,Mn.g)((e=>e.config.enableChannelFiltering&&"following"===e.nowPivotId),mn.dy`${e=>(0,Ln.Ot)(e.getExperienceConfigInfo("ChannelFilterCard"),{memoize:!1})}`)} ${(0,Mn.g)((e=>e.contentConfigInfo),mn.dy` ${(0,Mn.g)((()=>window.isSSREnabled),mn.dy`${()=>mn.dy`${mn.dy.partial((0,ve.yC)())}`}`)} ${(0,Mn.g)((e=>window.isSSREnabled),(e=>Dn(e.contentConfigInfo)))} ${e=>{var t;return(0,Ln.Ot)(e.contentConfigInfo,{includeTelemetryTag:!1,properties:{gamingPivotSwitched:null===(t=e.context)||void 0===t?void 0:t.gamingPivotSwitched,context:e.context,getFeedDependencyPromise:e.getFeedDependencyPromise,overriddenConfig:e.config.enableChannelFiltering?e.overriddenFeedConfig:null},memoize:!1})}} `)}</div></div></div>`,ei=mn.dy`<msn-toast class="backgroundGalleryMinimumWidthToast">${e=>e.strings.backgroundGalleryBelowMinimumWidthToastText}</msn-toast>`,ti=mn.dy`<cs-header-core :startSection=${e=>e.headerCoreTopStartData} :endSection=${e=>e.headerCoreTopEndData} :navSection=${e=>e.headerCoreNavData} :searchSection=${e=>e.headerCoreSearchData} :belowSearchSection=${e=>e.headerCoreBelowSearchData} :chromiumPageSettingsState=${e=>e.layoutState} :addInlineTTVRScript=${e=>Bn} :topSitesInCenter=${e=>e.hideSearchBox&&e.isAlwaysMode&&e.quickLinksDisplaySetting!==O.Z3.off&&e.quickLinksDisplaySetting!==O.Z3.top} :showFullPageBlur=${e=>{var t,n,i,r;return!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))}} class="${e=>e.isSearchSticky?"search-sticky":""} ${e=>e.hideSearchBox?"hide-search-box":""} ${e=>{var t;return(null===(t=e.headerCoreSearchData)||void 0===t?void 0:t.enableCodexBingStyles)?"bing-chat":""}} ${e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)?"translucent":""}}" style="grid-row:${e=>e.searchRow};${e=>(e=>`--header-offset:${e.headerCoreOffset||0}px;--header-top-margin:${e.edgeHeaderTopMarin}px;`)(e)}" ${(0,On.i)("headerCoreRef")}></cs-header-core>`,ni=mn.dy` ${(0,Mn.g)((e=>e.topSitesLayoutState&&e.childRefs.topSites&&e.quickLinksDisplaySetting!==O.Z3.off),(e=>{var t,n,i,r;return(0,Ln.Ot)(e.childRefs.topSites,{attributes:{selectedQuickLinksDisplaySetting:e.quickLinksDisplaySetting,quickLinksToggleSpacingForBanner:!!e.displayConditionalBanner,showFullPageBlur:!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene))),quickBriefVisible:!!e.shouldShowNotificationMiniCard},ttvrMarkerAggregate:"Header"})}))} ${(0,Mn.g)((()=>!(0,ct.N)()),Bn("TTSR.TopSitesTag",!0))}
`,ii=mn.dy` ${(0,Mn.g)((e=>!e.config.notificationOnRight),mn.dy`<div id="notificationMiniCardWrapper">${(0,Mn.g)((e=>e.shouldShowNotificationMiniCard),(e=>(0,Ln.Ot)(e.childRefs.notificationMiniCard,{properties:{data:e.wpoNotificationPreviewData,onDismiss:e.dismissNotificationMiniCard}})))}</div>`)} ${ni} ${(0,Mn.g)((e=>e.config.notificationOnRight),mn.dy`<div id="notificationMiniCardWrapper">${(0,Mn.g)((e=>e.shouldShowNotificationMiniCard),(e=>(0,Ln.Ot)(e.childRefs.notificationMiniCard,{properties:{data:e.wpoNotificationPreviewData,onDismiss:e.dismissNotificationMiniCard}})))}</div>`)}
`,ri=mn.dy`
${(0,Mn.g)((e=>e.childRefs.conditionalBanner),mn.dy`<div class="conditionalBannerHolder">${e=>(0,Ln.Ot)(e.childRefs.conditionalBanner,{properties:{onDisplayChange:e.onConditionalBannerDisplayChange.bind(e)}})}</div>`)}
${(0,Mn.g)((e=>e.childRefs.promoBanner),mn.dy`<div class="conditionalBannerHolder">${e=>(0,Ln.Ot)(e.childRefs.promoBanner)}</div>`)}
${(0,Mn.g)((e=>e.childRefs.coachmark),mn.dy`<div class="coachMarkHolder">${e=>(0,Ln.Ot)(e.childRefs.coachmark)}</div>`)}
${(0,Mn.g)((e=>e.childRefs.superCoachMark),mn.dy`<div class="superCoachMarkHolder">${e=>(0,Ln.Ot)(e.childRefs.superCoachMark)}</div>`)}
${(0,Mn.g)((e=>e.childRefs.superNavCoachMark),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.superNavCoachMark,{attributes:{style:"display: none"}})}`)}
${(0,Mn.g)((e=>e.childRefs.stickyPeek),mn.dy`<div class="stickyPeekHolder">${e=>(0,Ln.Ot)(e.childRefs.stickyPeek)}</div>`)}
${(0,Mn.g)((e=>e.childRefs.officeCoachmark),mn.dy`<div class="officeCoachmarkHolder">${e=>(0,Ln.Ot)(e.childRefs.officeCoachmark)}</div>`)}
${(0,Mn.g)((e=>e.displayGalleryMinimumWidthToast),ei)}<div id="headerGrid" style="grid-template-rows: ${e=>e.gridRows};height:${e=>{var t;return null!==(t=e.contentOffHeaderHeight)&&void 0!==t?t:e.headerHeight+"px"}};" role="${e=>"off"===e.layoutState.selectedFeedDisplaySetting?"main":"banner"}"><div class="companyLogoHolder_aboveSearch" ${e=>e.logoRow?"grid-row: ${x => x.logoRow};":""} style=${e=>e.logoRow&&e.quickLinksDisplaySetting===O.Z3.top?"grid-row:"+e.logoRow:""} ${(0,Ue.XJ)()}>${(0,Mn.g)((e=>"always"!==e.layoutState.selectedFeedDisplaySetting&&!e.layoutState.imageOfTheDayEnabled),mn.dy`${mn.dy.partial('<svg viewBox="0 0 226 48" height="48" width="225"><path key="MicrosoftLogo1" id="microsoft" d="M93.6 9.6v28.8h-5V15.8h-.1l-8.9 22.6h-3.3l-9.1-22.6h-.1v22.6h-4.6V9.6h7.2L78 30.9h.1l8.7-21.3h6.8zm4.1 2.2c0-.8.3-1.5.9-2 .6-.5 1.3-.8 2.1-.8.9 0 1.6.3 2.1.9.5.5.9 1.2.9 2s-.3 1.5-.9 2c-.6.5-1.3.8-2.1.8-.9 0-1.5-.3-2.1-.8-.5-.7-.9-1.4-.9-2.1zm5.4 5.9v20.7h-4.9V17.7h4.9zm14.8 17.2a9.2 9.2 0 0 0 4.8-1.8v4.5c-.8.5-1.7.8-2.7 1-1 .2-2.1.3-3.3.3-3.1 0-5.5-.9-7.4-2.9-1.9-1.9-2.9-4.4-2.9-7.3 0-3.3 1-6.1 2.9-8.2 1.9-2.1 4.7-3.2 8.3-3.2.9 0 1.8.1 2.7.3.9.3 1.7.5 2.2.8v4.7c-.7-.5-1.5-1-2.3-1.3-.8-.3-1.6-.5-2.4-.5-1.9 0-3.5.6-4.7 1.9-1.2 1.3-1.8 2.9-1.8 5.1 0 2.1.5 3.7 1.7 4.9 1.4 1.1 2.9 1.7 4.9 1.7zm18.6-17.5c.4 0 .7 0 1.1.1.3.1.6.1.8.2v4.9c-.3-.2-.6-.3-1.1-.5-.5-.2-1.1-.3-1.8-.3-1.2 0-2.2.5-3 1.5-.8 1-1.3 2.5-1.3 4.7v10.4h-4.9V17.7h4.9V21h.1c.5-1.1 1.1-2 2-2.7.8-.6 1.9-.9 3.2-.9zm2.1 11c0-3.4.9-6.1 2.9-8.1 1.9-2 4.6-3 8.1-3 3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.9-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.2 1.2-1.6 2.9-1.6 5.1zm23.3-5c0 .7.2 1.3.7 1.7.5.4 1.4.9 2.9 1.5 1.9.8 3.3 1.7 4.1 2.6.8 1 1.2 2.1 1.2 3.5 0 1.9-.7 3.5-2.3 4.7-1.5 1.2-3.5 1.8-6.1 1.8-.9 0-1.8-.1-2.9-.3-1.1-.2-1.9-.5-2.7-.8V33c.9.6 1.9 1.1 2.9 1.5 1 .3 1.9.5 2.8.5 1.1 0 1.9-.1 2.4-.5.5-.3.8-.8.8-1.5s-.3-1.3-.8-1.7c-.5-.5-1.6-1-3.1-1.6-1.8-.7-3.1-1.6-3.8-2.5s-1.1-2.1-1.1-3.6c0-1.9.7-3.4 2.2-4.6 1.5-1.2 3.4-1.8 5.7-1.8.7 0 1.5.1 2.4.3.9.1 1.7.4 2.3.6v4.6c-.7-.4-1.4-.8-2.3-1.1-.9-.3-1.7-.5-2.5-.5-.9 0-1.7.2-2.1.5-.4.5-.7.9-.7 1.6zm10.9 5.2c0-3.4.9-6.1 2.9-8.1s4.6-3 8.1-3c3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.8-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.1 1.2-1.6 2.9-1.6 5.1zm32.3-6.5H208v16.7h-4.9V21.7h-3.5v-4h3.5v-2.9c0-2.2.7-3.9 2.1-5.3 1.4-1.4 3.2-2.1 5.4-2.1.6 0 1.1 0 1.6.1s.9.1 1.2.3V12c-.1-.1-.5-.2-.9-.3-.4-.1-.9-.2-1.4-.2-1 0-1.8.3-2.3.9-.5.7-.8 1.6-.8 2.8v2.5h7.3V13l4.9-1.5v6.1h4.9v4h-4.9v9.7c0 1.3.2 2.2.7 2.7.5.5 1.2.8 2.2.8.3 0 .6-.1 1-.2s.7-.3 1.1-.5v4c-.3.2-.8.3-1.5.5-.7.1-1.4.2-2.1.2-2.1 0-3.6-.5-4.6-1.7-1-1.1-1.5-2.7-1.5-4.9V21.7h-.2z"/><path key="MicrosoftLogo2" id="blue" d="M22.8 25.2H0V48h22.8V25.2z" fill="#00A4EF"/><path key="MicrosoftLogo3" id="yellow" d="M48 25.2H25.2V48H48V25.2z" fill="#FFB900"/><path key="MicrosoftLogo4" id="green" d="M48 0H25.2v22.8H48V0z" fill="#7FBA00"/><path key="MicrosoftLogo5" id="red" d="M22.8 0H0v22.8h22.8V0z" fill="#F25022"/></svg>')}`)}</div>${ti}<div id="topSitesHolder" class=" ${e=>e.quickLinksDisplaySetting===O.Z3.top?"oneline-topsite-holder":""} ${e=>e.hideOneLineTopSites||e.quickLinksDisplaySetting===O.Z3.off?"hide":""} ${e=>e.config.enableRiverZoom&&e.quickLinksDisplaySetting!==O.Z3.top?"short":""} ${e=>e.hideSearchBox&&e.isAlwaysMode?"move-upward":""} ${e=>e.childRefs.notificationMiniCard?"enable-notification":""} ${e=>e.enableNotificationAnimation?"notification-anime":""} ${e=>e.config.notificationOnRight?"notification-right":"notification-left"} ${e=>e.config.feeds3HeaderDecrease?"notification-topsitesf3v1":""} " style="grid-row: ${e=>e.topSitesRow}; ${e=>(e=>`--top-banner-offset-height:${e.topBannerOffsetHeight||0}px;`)(e)}" ${(0,Ue.XJ)()}>${(0,Mn.g)((e=>e.childRefs.notificationMiniCard),ii,ni)}</div>${(0,Mn.g)((e=>e.layoutState.greetingEnabled&&e.showWeatherOneLiner&&e.config.enableWeatherOneLiner&&("focused"===e.layoutState.currentLayout||"headingsonly"===e.layoutState.selectedFeedDisplaySetting||"off"===e.layoutState.selectedFeedDisplaySetting)),mn.dy`<fluent-button id="weatherOneLinerHolder" class="oneline-weather-holder ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"oneline-weather-holder-content-off"}" style="grid-row: ${e=>e.weatherOneLinerRow};" target="_blank" @click="${(e,t)=>e.clickToWeatherOneLinerLink(t.event)}" data-t="${e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.telemetryContext)||void 0===t?void 0:t.weatherTelemetryObject)||void 0===n?void 0:n.getMetadataTag()}}"><span>${e=>e.weatherOneLinerIconTemplate} ${e=>e.weatherOneLinerText}</span></a>`)} ${(0,Mn.g)((e=>e.childRefs.recommendedSites),mn.dy`<div id="recommendedSites" class=" ${e=>e.recommendedSitesDisplaySetting===O.yR.off?"hide":""} unified " style="grid-row: ${e=>e.recommendedSitesRow};" ${(0,Ue.XJ)()}>${(0,Mn.g)((e=>!e.enableHiddenRecommendedSitesStyles),mn.dy` ${e=>{var t,n,i,r;return(0,Ln.Ot)(e.childRefs.recommendedSites,{properties:{narrowed:!e.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(e.layoutState.selectedFeedDisplaySetting),isOnBackgroundImage:!(!e.layoutState.imageOfTheDayEnabled||e.config.turnOffBkgdForInformational&&e.layoutState.currentLayout==O.nP.informational),showFullPageBlur:!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))},ttvrMarkerAggregate:"Header"})}} `)}</div>`)} ${(0,Mn.g)((e=>e.config.complianceHyperlink),mn.dy`<a href=${e=>(0,x.h_)(e.config.complianceHyperlink.url)} id="complianceHyperlink" class="${e=>e.layoutState.imageOfTheDayEnabled?"complianceHyperlink_imageEnabled":null}" ${(0,Ue.XJ)()}>${e=>e.config.complianceHyperlink.text}</a>`)} ${(0,Mn.g)((e=>e.childRefs.holidayEffects&&"off"!==e.layoutState.selectedFeedDisplaySetting&&"focused"!==e.layoutState.currentLayout),mn.dy`<div class="holidayEffectsHolder ${e=>e.layoutState.currentBackgroundImageType!==O.HX.off?"darkMode":""}" id="holidayEffects" style="${e=>e.holidayEffectsPosition}">${e=>(0,Ln.Ot)(e.childRefs.holidayEffects,{ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,Mn.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery&&!e.config.bgMuseumCdBtnMoveToBottom),mn.dy`<div id="backgroundGalleryContainer">${e=>(0,Ln.Ot)(e.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)}</div>${(0,Mn.g)((e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)&&!e.disableStickyHeader}),mn.dy`<div ${(0,Ne.Fl)({stickyClassName:"translucentSticky",breakpointName:V})} style=${e=>e.stickyOverrideStyles}></div>`)}<div ${(0,On.i)("headerSpaceHolder")} id="headerSpaceHolder" style="height:${e=>{var t;return null!==(t=e.contentOffHeaderHeight)&&void 0!==t?t:e.headerHeight+"px"}};${e=>Nn(e)}" class="${e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)&&e.disableStickyHeader?"":"headerSpaceHolder"}}"><div id="bgOuterHolder" class="bgOuterHolder ${e=>e.config.solidColor?"solidtx":""}" ${(0,Ne.Fl)({stickyClassName:"bgOuterHolder_sticky",breakpointName:j})}><div id="bgInnerHolder" style="height:${e=>e.imageHeight};">${e=>{var t,n,i,r,o,a,s,c;return s=e.childRefs.backgroundImage,c={attributes:{spaceHolderHeight:e.headerHeight,showFullPageBlur:!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene))),bgBlurSize:(null===(o=e.config.translucentFeed)||void 0===o?void 0:o.bgBlurSize)?null===(a=e.config.translucentFeed)||void 0===a?void 0:a.bgBlurSize:"0px",overlapState:e.overlapState,displayMarqueeAd:e.marqueeAdActive,marqueeAdTopHeight:e.marqueeAdTopHeight,marqueeAdHeight:e.marqueeAdHeight,marqueeAdOverlayHeight:e.marqueeAdOverlayHeight},ttvrMarkerAggregate:"Header"},window.isSSREnabled?(0,Ln.Ot)(s,Object.assign(Object.assign({},c),{memoize:!0,eagerConnectableScriptTag:Dn(s)})):(0,Ln.Ot)(s,c)}}</div></div></div><div id="translucentFeedSentinel"></div>${(0,Mn.g)((e=>"off"!==e.layoutState.selectedFeedDisplaySetting&&!e.config.disableFeed),Yn)}
${(0,Mn.g)((e=>"off"===e.layoutState.selectedFeedDisplaySetting&&e.config.enableBtnForContentOff&&!!e.childRefs.scrollDownButton&&!e.isScrollDownButtonDismissed),mn.dy`<div id="scrollDownButtonContainer" class="exploreMoreBtn">${e=>(0,Ln.Ot)(e.childRefs.scrollDownButton,{properties:{scrollToShowFeed:e.changeContentOffToVisible,isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled}})}</div>`)}
${(0,Mn.g)((e=>e.childRefs.topSites&&!e.hideOneLineTopSites),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.edgeShopping)}`)}
${(0,Mn.g)((e=>e.enableDevTools),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.devTools)}`)}
${e=>(0,Ln.Ot)(e.childRefs.sharedLinks,{ttvrMarkerAggregate:"Header"})}
${e=>(0,Ln.Ot)(e.childRefs.topSitesBookmarks,{ttvrMarkerAggregate:"Header"})}
${(0,Mn.g)((e=>e.config.displayFloatButtonGroup),mn.dy`${e=>(0,Ln.Ot)(e.childRefs.floatButtonGroupWC,{attributes:{class:"floatButtonGroup",overlapState:e.overlapState}})}`)}
${(0,Mn.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery&&e.config.bgMuseumCdBtnMoveToBottom),mn.dy`<div id="backgroundGalleryContainer">${e=>(0,Ln.Ot)(e.childRefs.backgroundGallery,{memoize:!1})}</div>`)}
${(0,Mn.g)((e=>e.childRefs.dailyBrief),(e=>(0,Ln.Ot)(e.childRefs.dailyBrief)))}
${(0,Mn.g)((e=>(!e.config.displayFloatButtonGroup||e.config.displayFloatButtonGroup&&e.config.feedbackOldDesign)&&e.childRefs.feedback),mn.dy`${e=>{var t,n,i,r;return(0,Ln.Ot)(e.childRefs.feedback,{properties:{isAutoHide:!e.config.bgMuseumCdBtnMoveToBottom&&!e.isAlwaysMode},attributes:{overlapState:e.overlapState,showFullPageBlur:!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))},ttvrMarkerAggregate:"Header"})}}`)}
${e=>e.childRefs.channelStore&&(0,Ln.Ot)(e.childRefs.channelStore,{properties:{showOverlay:!1}})}
${e=>e.childRefs.shoppingNotification&&(0,Ln.Ot)(e.childRefs.shoppingNotification)}
`,oi=mn.dy` ${(0,Mn.g)((e=>e.config.enableMournMode),mn.dy`<div class="mourn">${ri}</div>`)} ${(0,Mn.g)((e=>!e.config.enableMournMode),ri)} ${(0,Mn.g)((()=>!(0,ct.N)()),Bn(`${ue.nz}${u.p.complete}`))}
`;var ai=n(14165),si=n(78923),ci=n(29717),di=n(74449),li=n(71942),ui=n(38492),pi=n(79148),hi=n(39238);const gi=(y.K.Over+2).toString(),mi=(y.K.Over+3).toString(),fi=(y.K.Nav+2).toString(),vi=si.i`
.companyLogoHolder_aboveSearch > svg{fill:white}.navAndContent,.nav.nav_sticky,.bgOuterHolder_sticky,.solidtx{background:#242424}.translucentHeader.nav.nav_sticky{background:#242424e6}.translucentSticky{background:#242424}.navAndContent_wb{background:rgba(0,0,0,.5) !important}.doubleWideRiverCard,.singleWideRiverCard{background:#656565}.skeleton{background:#4a4a4a}#weatherOneLinerHolder.oneline-weather-holder{border:1px solid rgb(94,94,94);background:rgb(30,30,30)}#weatherOneLinerHolder.oneline-weather-holder:hover{border:1px solid rgb(145,145,145);background:rgb(51,51,51)}#weatherOneLinerHolder.oneline-weather-holder:active{border:1px solid rgb(119,119,119);background:rgb(20,20,20)}`,yi=si.i`
:host(){--breaking-news-height-offset:0}#backgroundGalleryContainer{position:relative;z-index:${y.K.Flyout.toString()}}#scrollDownButtonContainer{position:fixed;z-index:${(y.K.Over+3).toString()}}.exploreMoreBtn{width:100vw;display:flex;justify-content:center}.mourn{filter:grayscale(1)}.backgroundGalleryMinimumWidthToast{bottom:25px;left:50%;position:fixed;transform:translateX(-50%);width:fit-content;z-index:${y.K.Overlay.toString()}}.bgOuterHolder{height:100%;overflow:hidden;position:fixed;width:100%}.bgOuterHolder_sticky{background:#F7F7F7;height:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));z-index:${y.K.Over.toString()}}#bgInnerHolder{height:100%;opacity:1;overflow:hidden;top:0px;transform:scale(1);width:100%}.coachMarkHolder{left:initial;position:fixed;z-index:${y.K.Flyout.toString()}}.companyLogoHolder_aboveSearch{align-self:end;height:48px;opacity:1;width:225px}.companyLogoHolder_aboveSearch > svg{fill:#737373}#complianceHyperlink{bottom:8px;color:${di.Q};font-size:10px;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;text-decoration:none;transition:opacity 0.2s;z-index:${gi}}#complianceHyperlink.complianceHyperlink_imageEnabled,#complianceHyperlink.translucentFeed{color:white;opacity:0.64}#complianceHyperlink.onScroll{transform:translate(-50%,-60px)}.complianceHyperlink_hide{opacity:0 !important}.doubleWideRiverCard,.singleWideRiverCard{background:#dadada;border-radius:8px;height:304px}.doubleWideRiverCard{width:612px}.singleWideRiverCard{width:300px}.blankRiverContainer{display:flex;gap:12px}.blankRiverContainer.fadeOut{opacity:0;transition:opacity 0.5s}.location-marker{bottom:5px;color:white;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;left:36px;text-decoration:none;transition:opacity 0.2s;z-index:${y.K.Nav.toString()}}.conditionalBannerHolder{max-height:200px;position:fixed;top:0;width:100%;z-index:${y.K.Overlay.toString()}}#headerGrid{display:grid;justify-items:center;position:absolute;top:0;width:100%}.headerGrid_hidden{visibility:hidden}.headerGrid_visible{opacity:1}.headerSpaceHolder{transition:height .3s ease-out,visibility 0.3s}.holidayEffectsHolder{position:absolute;bottom:7px;opacity:1}.holidayEffectsHolder.darkMode{--border:none;--bg-color:#0000008A;--flipper-color:#fff}.holidayEffectsSticky{--menu-opacity:0}.nav{display:flex;height:var(--nav-height);justify-content:center;z-index:${y.K.Nav.toString()}}.navAndContent{align-items:center;background:#F7F7F7;display:flex;flex-direction:column;min-height:100vh;position:relative;transition:background-color .3s ease-out}.navAndContent.navAndContent_tb{background:#00000051}.navAndContent.navAndContent_nb{background:#00000000}.navAndContent_wb{background:rgba(255,255,255,.5) !important;backdrop-filter:blur(10px);transition:unset !important}.navAndContent.navAndContent_nwb{transition:unset}navAndContent.riverZoom{overflow-x:hidden}#recommendedSites{align-items:center;display:flex;flex-direction:column}#recommendedSites.hide{display:none}#recommendedSites.unified{z-index:${gi}}.navAndContent_feed{align-items:center;display:flex;flex-direction:column;transition:background-color 0.5s ease-in-out 0s,opacity 0.4s ease-in 0s}.navAndContent_feed_fullpage{width:100%}.navAndContent_border{border-radius:12px;padding-left:20px;padding-right:20px}.navAndContent_border_line{border:1px solid ${li.dt};transition:1s border-color ease}.navAndContent_border_line.navAndContent_noborder{border-color:${ui.I}}.navAndContent_border_shadow{box-shadow:rgba(0,0,0,0.35) 0px 0px 15px;transition:1s box-shadow ease}.navAndContent_border_shadow.navAndContent_noshadow{box-shadow:rgb(0 0 0 / 0%) 0px 0px 0px 0px}.navAndContent_border_lighterShade{background-color:${pi.RJ};transition:1s background-color ease}.navAndContent_border_lighterShade.navAndContent_nolighterShade{background-color:${ui.I}}.navAndContent_border_gradient{background:linear-gradient(${pi.RJ},${ui.I} 40px);background-position:0 0;transition:1s background-position ease}.navAndContent_border_gradient.navAndContent_nogradient{background-position:0 -50px}.g_nav_container{position:relative;display:flex;justify-content:center;width:100%}.navAndContent_feed > .contentBelowNav{margin-top:var(--nav-height)}.navAndContent_feed > .contentNoNav{margin-top:20px}.navAndContent_feed_hidden_rs{background:#00000051}.navAndContentAutoWidth{margin:0 auto;width:fit-content}.nav{position:absolute;top:0px;width :100%}.nav.nav_sticky{background:#F7F7F7;position:fixed;top:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));width:100%}.translucentHeader.nav.nav_sticky{background:#F7F7F7e6}.navSized{align-items:center;display:flex;gap:5px}.translucentSticky{background:#F7F7F7;height:108px;position:fixed;top:0px;width:100%;z-index:${y.K.Over.toString()}}#weatherOneLinerHolder{height:100%;min-width:0;z-index:${mi};opacity:1}#weatherOneLinerHolder.oneline-weather-holder-content-off{margin-bottom:40px !important}#weatherOneLinerHolder.oneline-weather-holder{font-family:"Segoe UI";padding:5px;font-size:16px;font-weight:600;margin-top:auto;height:34px;background-color:white;border:1px solid lightgray;border-radius:4px;margin-bottom:10px}#weatherOneLinerHolder.oneline-weather-holder:hover{background:rgb(245,245,245)}#weatherOneLinerHolder.oneline-weather-holder:active{background:rgba(224,224,224,1)}#weatherOneLinerHolder.oneline-weather-holder span{display:flex;align-items:center;gap:12px}#topSitesHolder{--notification-mini-card-width:208px;--notification-mini-card-height:68px;--notification-mini-card-vertical-gap:6px;--notification-mini-card-gap:30px;height:100%;min-width:0;z-index:${mi};opacity:1}#topSitesHolder.notification-topsitesf3v1{--notification-mini-card-vertical-gap:0;--notification-mini-card-height:58px}#topSitesHolder.oneline-topsite-holder{height:36px;position:fixed;top:var(--top-banner-offset-height,0px);width:100%;z-index:${fi}}#topSitesHolder.hide{visibility:hidden;opacity:0}#topSitesHolder.move-upward{z-index:${fi}}#topSitesHolder.enable-notification{display:flex;justify-content:center}#topSitesHolder.enable-notification top-sites-edgenext{max-width:fit-content}#notificationMiniCardWrapper{width:0;margin-top:var(--notification-mini-card-vertical-gap)}#topSitesHolder.notification-anime #notificationMiniCardWrapper{transition:all 0.3s ease-in}#topSitesHolder.notification-left #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-end:var(--notification-mini-card-gap)}#topSitesHolder.notification-left #notificationMiniCardWrapper notification-mini-card{float:right}#topSitesHolder.notification-right #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-start:var(--notification-mini-card-gap)}#topSitesHolder.notification-right #notificationMiniCardWrapper notification-mini-card{float:left}.topSitesZoomHidden{visibility:hidden}.headerGrid_hidden cs-header-core::part(core){top:calc(-1 * var(--header-height));display:none}cs-header-core{z-index:${fi}}cs-header-core.hide-search-box:focus-within{z-index:700}@media (max-width:1097px){#topSitesHolder{height:100%}}.contentSizedFullScreen{width:100%!important}.refreshPage{height:50px;width:50px;margin-top:50px;margin-bottom:-50px}.refreshPage.hide{animation:hideRefreshBtn ease-in both 1s}@keyframes hideRefreshBtn{from{height:50px;opacity:1}to{height:0px;opacity:0}}.refreshPage fluent-progress-ring{margin:8px auto}.weather-current-precipitation-glyph{margin-inline-start:auto;margin-inline-end:4px;fill:currentcolor;filter:invert(var(--iconInvert))}.nocolor-img-aqi,.nocolor-img-nm-aqi{filter:invert(var(--iconInvert))}.nocolor-img-aqi{width:20px !important;height:20px !important}${(0,B.vW)(null,B.K$.c2)}{.contentSized{width:${ai._3.toString()}px}#topSitesHolder{height:100%}.skeleton-container{width:${ai._3.toString()}px}.fixed-size-card{display:flex;flex-direction:column;height:304px;width:274px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}.fixed-size-card-infopane{display:flex;flex-direction:column;height:304px;width:560px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}}${(0,B.eH)(B.K$.c3)}{.contentSized{width:${ai.Xn.toString()}px}.skeleton-container{width:${ai.Xn.toString()}px}.fixed-size-card{display:flex;flex-direction:column;height:304px;width:282px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}.fixed-size-card-infopane{display:flex;flex-direction:column;height:304px;width:576px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}}${(0,B.eH)(B.K$.c4)}{.contentSized{width:${ai.xX.toString()}px}.skeleton-container{width:${ai.xX.toString()}px}.fixed-size-card{display:flex;flex-direction:column;height:304px;width:287px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}.fixed-size-card-infopane{display:flex;flex-direction:column;height:304px;width:586px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}}${(0,B.vW)(B.K$.c5,null)}{.contentSized{width:var(--m365-column-width,${ai.sc.toString()}px)}.skeleton-container{width:${ai.sc.toString()}px}.fixed-size-card{display:flex;flex-direction:column;height:304px;width:289px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}.fixed-size-card-infopane{display:flex;flex-direction:column;height:304px;width:590px;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}}${(0,B.vW)(null,B.K$.c1)}{.contentSizedOneColumn{width:${ai.xs.toString()}px}.nav.navStickyOneColumn{top:0}.navStickyOneColumn.conditionalBannerShown{top:30px}.navAndContentOneColumn{z-index:401}.skeleton-container{width:${ai.xs.toString()}px}.fixed-size-card-infopane{display:flex;flex-direction:column;height:304px;width:100%;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}.fixed-size-card{display:flex;flex-direction:column;height:304px;width:100%;border-radius:5px;float:left;margin-bottom:12px;margin-right:12px}}@media (min-width:1133px) and (max-width:1256px){.contentSized.short{width:1109px}}@media (min-width:${(0,N.sZ)(3).toString()}px) and (max-width:1132px){.contentSized.short{width:996px}#topSitesHolder.short{transform:scale(0.9)}}@media (min-width:856px) and (max-width:948px){.contentSized.short{width:830px}#topSitesHolder.short{transform:scale(0.9)}}@media (min-width:${(0,N.sZ)(2).toString()}px) and (max-width:855px){.contentSized.short{width:775px}#topSitesHolder.short{transform:scale(0.9)}}.contentPlaceHolder{min-height:100vh}.solidtx{background:#f5f5f5}.content-size-responsive{min-width:100%;width:100%}.nav-size-responsive{width:100%;min-width:100%}.nav-feed-size-responsive{margin:0px 24px;min-width:90%}@media (min-width:${ai.gf.toString()}px){.nav-feed-size-responsive{margin:0px 24px;min-width:1588px;max-width:2088px}}.skeleton-container{height:100%;position:absolute;top:43px;z-index:99999999;background:${hi._B}}.work-feed{height:0px}.skeleton-channel{display:flex;position:relative;padding:20px 20px;box-sizing:border-box;overflow:hidden}.skeleton-feed{display:block;flex-direction:column;position:relative;padding:20px;box-sizing:border-box;overflow:hidden}.skeleton-header{padding:12px 20px 0}.skeleton-header .card-label{height:15px;width:95px;border-radius:5px}.fixed-size-card .card-img{width:100%;height:157px;border-radius:5px}.fixed-size-card .card-label{margin:10px 16px 8px 16px;height:16px;width:100px;border-radius:5px}.fixed-size-card .card-text{margin:5px 16px 0 16px;height:20px;border-radius:5px}.fixed-size-card-infopane .card-img{width:100%;height:380px;border-radius:5px}.fixed-size-card .work-feed{height:0px}.fixed-size-card-infopane .work-feed{height:0px}.skeleton{display:block;background:#e0e0e0;position:relative;overflow:hidden}.skeleton:before{content:"";display:block;position:absolute;top:0;left:-80px;height:100%;width:80px;opacity:0.3;background-image:linear-gradient(to right,transparent,#f5f5f5,transparent);animation:shine 1s infinite}.fixed-size-feed{margin:0 auto}.floatButtonGroup{position:relative;z-index:500}`.withBehaviors((0,ci.Uu)(vi)),Si={experienceConfigSchema:undefined};(0,i.W)()},60758:function(e,t,n){"use strict";n.r(t),n.d(t,{FloatButtonGroupWC:function(){return y},FloatButtonGroupWCStyles:function(){return N},FloatButtonGroupWCTemplate:function(){return O},ToolingInfo:function(){return U}});var i=n(33940),r=n(3900),o=n(31699),a=n(99452),s=n(42590),c=n(58958),d=n(33379),l=n(24169),u=n(83227),p=n(53076),h=n(38156),g=n(82423),m=n(65932),f=n(9533),v=n(81555);class y extends l.l{constructor(){var e;super(...arguments),this.backgroundGalleryButtonEnabled=!0,this.canRenderNonSsrElements=!0,this.isDarkMode=!1,this.isOnImage=!0,this.museumCreditsCardIsShown=!1,this.telemetryTags={},this.videoPlaying=!1,this.overlapState=0,this.darkModeQuery=null===(e=null===window||void 0===window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme:dark)"),this.imageEditButtonRef=null,this.videoButtonRef=null,this.handleStatesSync=e=>{const{init:t,states:n}=e.detail;n.forEach((e=>{Reflect.set(this,e.key,e.value)})),t&&requestAnimationFrame((()=>{(0,f.FY)(v._.imageEditButton,this.imageEditButtonRef),(0,f.FY)(v._.videoPlayButton,this.videoButtonRef)}))},this.handleDarkModeQueryChange=()=>{o.S.queueUpdate((()=>{this.isDarkMode=(0,c.Y)()}))}}getExperienceType(){return u.x.floatButtonGroupWC}experienceConnected(){var e,t,n,r;return(0,i.mG)(this,void 0,void 0,(function*(){(0,d.N)()?this.canRenderNonSsrElements=!this.isSSRRendered:this.canRenderNonSsrElements=!1,this.imageEditButtonTelemetryTag=null===(t=null===(e=this.telemetryObject)||void 0===e?void 0:e.addOrUpdateChild)||void 0===t?void 0:t.call(e,{name:"ImageEditButtonButton",type:h.c9.Interaction,behavior:h.wu.More,content:{headline:"Edit Background"}}).getMetadataTag(),window.addEventListener("backgroundImageWCStatesSync",this.handleStatesSync),this.isDarkMode=(0,c.Y)(),null===(r=null===(n=this.darkModeQuery)||void 0===n?void 0:n.addEventListener)||void 0===r||r.call(n,"change",this.handleDarkModeQueryChange);const i=(0,g.K0)(p.z.ChromiumPageSettings);i&&(this.isOnImage=i.getCurrentState().imageOfTheDayEnabled),(0,m.Uo)(p.z.ChromiumPageSettings,(e=>{this.isOnImage=e.imageOfTheDayEnabled}))}))}afterHydration(){this.canRenderNonSsrElements=!0}disconnectedCallback(){var e,t;super.disconnectedCallback(),window.removeEventListener("backgroundImageWCStatesSync",this.handleStatesSync),null===(t=null===(e=this.darkModeQuery)||void 0===e?void 0:e.removeEventListener)||void 0===t||t.call(e,"change",this.handleDarkModeQueryChange)}displayDarkModeIcon(){return!this.isDarkMode&&0!==this.overlapState}displayFeedbackLinkDarkModeIcon(){return!this.isDarkMode&&(!this.isOnImage||0!==this.overlapState)}handleImageEditEmitClick(){this.$emit("backgroundImageWCEdit")}handleSecondaryEmitClick(){this.$emit("backgroundImageWCSecondary")}handleToggleMuseumCardOpenClick(){this.$emit("backgroundImageWCToggle")}get feedbackLinkConfig(){return{turnOffFeedbackLinkText:!0,localizedStrings:{display:this.strings.feedback}}}feedbackLinkHookAPI(){var e,t;if(null===(t=null===(e=window.chrome)||void 0===e?void 0:e.ntpSettingsPrivate)||void 0===t?void 0:t.launchEdgeFeedback){const e=(0,r.NJ)();if(e){const t=new URL(window.location.href),n=t.hash;t.hash=`pivot-${e}`,history.replaceState(history.state,"",t),window.location.reload(),window.chrome.ntpSettingsPrivate.launchEdgeFeedback(),window.stop(),t.hash=n||"",history.replaceState(history.state,"",t)}else window.chrome.ntpSettingsPrivate.launchEdgeFeedback()}}}(0,i.gn)([a.LO],y.prototype,"backgroundGalleryButtonEnabled",void 0),(0,i.gn)([a.LO],y.prototype,"canRenderNonSsrElements",void 0),(0,i.gn)([a.LO],y.prototype,"currentProvider",void 0),(0,i.gn)([a.LO],y.prototype,"imageEditButtonTelemetryTag",void 0),(0,i.gn)([a.LO],y.prototype,"isDarkMode",void 0),(0,i.gn)([a.LO],y.prototype,"isOnImage",void 0),(0,i.gn)([a.LO],y.prototype,"museumCreditsCardIsShown",void 0),(0,i.gn)([a.LO],y.prototype,"secondaryButtonTelemetryTag",void 0),(0,i.gn)([a.LO],y.prototype,"telemetryTags",void 0),(0,i.gn)([a.LO],y.prototype,"videoPlaying",void 0),(0,i.gn)([(0,s.Lj)({converter:s.Id})],y.prototype,"overlapState",void 0);var S=n(56692),C=n(49218),b=n(41472),w=n(93703),T=n(67134);const k=()=>`https://assets.msn.${S.jG.topDomain}/staticsb/statics/latest/common/icons/`;T.f;const P=C.dy`<msn-feedback-link class="feedback ${e=>0===e.overlapState&&e.isOnImage?"":"overlapFeedback"}" icon=${e=>e.displayFeedbackLinkDarkModeIcon()?`${k()}FeedbackBlank.svg`:`${k()}FeedbackWhite.svg`} :config=${e=>e.feedbackLinkConfig} :appType=${S.jG.AppType} :buttonStyleReset=${!0} :hookAPI=${e=>e.feedbackLinkHookAPI.bind(e)}></msn-feedback-link>`,A=C.dy`<fluent-button ${(0,b.i)("imageEditButtonRef")} class="actionButton ${e=>0==e.overlapState?"":"overlap"}" data-t="${e=>e.imageEditButtonTelemetryTag}" id="imageEditButton" @click="${e=>e.handleImageEditEmitClick()}" title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" aria-label="${e=>e.strings.backgroundGalleryButtonText}"><span slot="start"><img src="${e=>e.displayDarkModeIcon()?`${k()}EditImageBlank.svg`:`${k()}EditImageWhite.svg`}"></span></fluent-button>`,I=C.dy`<fluent-button ${(0,b.i)("videoButtonRef")} appearance=${e=>"Event"===e.currentProvider?"hypertext":"neutral"} class="actionButton ${e=>0==e.overlapState?"":"overlap"}" data-t="${e=>e.secondaryButtonTelemetryTag}" id="secondaryButton" @click="${e=>e.handleSecondaryEmitClick()}" title="${e=>e.videoPlaying?e.strings.video_pause:e.strings.video_play}" aria-label="${e=>e.videoPlaying?e.strings.video_pause:e.strings.video_play}">${(0,w.g)((e=>"Video"===e.currentProvider),C.dy` ${(0,w.g)((e=>e.videoPlaying),C.dy`<img src="${e=>e.displayDarkModeIcon()?`${k()}PauseBlank.svg`:`${k()}PauseWhite.svg`}">`,C.dy`<img src="${e=>e.displayDarkModeIcon()?`${k()}PlayBlank.svg`:`${k()}PlayWhite.svg`}">`)} `)}</fluent-button>`,E=C.dy`<fluent-button class="actionButton ${e=>0==e.overlapState?"":"overlap"}" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.title_cardHidden}}" id="museumCardButton" @click="${e=>e.handleToggleMuseumCardOpenClick()}" title="${e=>e.strings.museumCardCollapsed}" aria-label="${e=>e.strings.museumCardCollapsed}"><img src="${e=>e.displayDarkModeIcon()?`${k()}ZoomBlank.svg`:`${k()}ZoomWhite.svg`}"></fluent-button>`,x=C.dy`${(0,w.g)((e=>e.currentProvider&&["Event","Iris","Video","CMSImage"].includes(e.currentProvider)&&!e.museumCreditsCardIsShown),C.dy` ${E} ${(0,w.g)((e=>e.backgroundGalleryButtonEnabled),A)} ${(0,w.g)((e=>"Video"===e.currentProvider),I)} `)}`,M=(0,w.g)((e=>e.canRenderNonSsrElements),C.dy`<div class="container ${e=>e.config.feedbackOldDesign?"containerBottom46":"containerBottom12"}">${(0,w.g)((e=>!e.config.feedbackOldDesign),C.dy`${P}`)} ${x}</div>`),O=C.dy`${M}`;var L=n(78923),D=n(22674);const R=L.i.partial`
    width: 28px;
    height: 28px;
    min-width: 28px
`,F=L.i` .container{left:initial;right:12px}`,B=L.i` .container{left:12px;right:initial}`,N=L.i` .container{position:fixed;bottom:12px;z-index:100;display:flex;flex-flow:column-reverse;color:#fff;opacity:1;transition:opacity .2s}.containerBottom12{bottom:12px}.containerBottom46{bottom:46px}.actionButton{display:inline-block;margin-bottom:4px;${R};font-size:12px;overflow:hidden;border-radius:5px;white-space:nowrap;background:transparent;border:1px solid transparent;color:white;cursor:pointer;fill:currentColor}.actionButton svg{display:flex}.actionButton:hover,.feedback::part(control):hover{background:#f0f0f033}.actionButton span[slot="start"]{margin-inline:0}.actionButton::part(control){padding:0;${R}}.feedback::part(control){${R};padding:0;border:1px solid transparent;border-radius:5px;background:transparent;box-shadow:none;outline:none}.overlap,.overlap:hover,.overlapFeedback::part(control),.overlapFeedback::part(control):hover{border:1px solid #0000002E;background:rgba(255,255,255,.8)}@media (prefers-color-scheme:dark){.overlap,.overlap:hover,.overlapFeedback::part(control),.overlapFeedback::part(control):hover{border:1px solid #616161;background:#292929}}`.withBehaviors(new D.O(F,B)),U={experienceConfigSchema:undefined}},31057:function(e,t,n){"use strict";n.r(t),n.d(t,{AdLabelType:function(){return $},BlockedDomainAndTitles:function(){return U},BlockedHosts:function(){return N},DragDropType:function(){return s},GroupPolicySettings:function(){return o},OneLineTopSitesStyles:function(){return kr},OptioTopSitesTemplate:function(){return Nn},SharedLinksUrl:function(){return B},TileSource:function(){return a},TileSourceString:function(){return q},ToggleOverflowMenuElement:function(){return _},ToolingInfo:function(){return Er},TopSitesClassNameConstants:function(){return F},TopSitesDataHelper:function(){return Si},TopSitesEdgeNextWC:function(){return sr},TopSitesEdgeNextWCStyles:function(){return Ir},TopSitesEdgeNextWCTemplate:function(){return ci},TopSitesElementConstants:function(){return R},TopSitesNextStyles:function(){return Ar},TopSitesResponsiveStyles:function(){return Pr},addDialogHeight:function(){return u},addDialogWithSubSectionHeight:function(){return p},blockedDomainsPair:function(){return H},contextMenuWidth:function(){return h},defaultMaxTileForFirstRow:function(){return v},defaultMaxTileForSixteenTopSites:function(){return m},defaultMaxTileForThreeRowsTopSites:function(){return y},defaultMaxTileForTwentyTopSites:function(){return f},defaultMaxTiles:function(){return g},defaultOverrideIconsList:function(){return W},defaultTilesxColxRowsMap:function(){return V},defaultTopSiteIcon:function(){return S},dialogWidth:function(){return C},displayPinIconTopSitesBindingSource:function(){return ei},editDialogHeight:function(){return b},feeds3T1SearchBoxWidthTilesxColxRowsMap:function(){return ae},feeds3T1SearchBoxWidthWithNotificationMiniCardTilesxColxRowsMap:function(){return se},isOverflowNotEmpty:function(){return ni},notificationToastDefaultDisplayMs:function(){return w},overflowTopSitesBindingSource:function(){return ti},pinToastDefaultDisplayMs:function(){return T},pinToastTemplate:function(){return Xn},tileDialogMargin:function(){return k},tileSourceToTopSiteDataCollections:function(){return oe},titleOverrides:function(){return j},topSiteAddDialogTemplate:function(){return Zn},topSiteEditDialogTemplate:function(){return Kn},topSiteShell:function(){return G},topSiteTileHeight:function(){return A},topSiteTileWidth:function(){return I},topSiteTopTileHeight:function(){return P},topSitesBindingSource:function(){return Yn},topSitesCollapsedStorageKey:function(){return E},topSitesDragDropStorageKey:function(){return M},topSitesDragDropUnpinStorageKey:function(){return O},topSitesUndoToastMessageMargin:function(){return L},topSitesUnpinnedStorageKey:function(){return x},undoToastTemplate:function(){return Jn},validQueryParameterPrefix:function(){return D}});var i=n(45900),r=n(63070);var o,a,s,c=n(33940),d=n(14989),l=n(53899);!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(o||(o={})),function(e){e[e.CuratedTileSource=-5]="CuratedTileSource",e[e.UserAddedTileSource=4]="UserAddedTileSource",e[e.UserAddedTileSourceNewVal=3]="UserAddedTileSourceNewVal",e[e.AlgoGeneratedTileSource=0]="AlgoGeneratedTileSource",e[e.WPOPromotedTileSource=-4]="WPOPromotedTileSource",e[e.PromotedCuratedTileSource=-6]="PromotedCuratedTileSource",e[e.SponsoredPromotedCuratedTileSource=-7]="SponsoredPromotedCuratedTileSource",e[e.SponsoredCuratedTileSource=-8]="SponsoredCuratedTileSource",e[e.AffiliateAutoAppendTileSource=2]="AffiliateAutoAppendTileSource"}(a||(a={})),function(e){e[e.DragDrop=1]="DragDrop",e[e.DragDropUnpin=-1]="DragDropUnpin"}(s||(s={}));const u=282,p=386,h="130px",g=8,m=16,f=20,v=10,y=30,S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrsl7EJADAIBGPIEO4/nVt8SCFkgijhvhCsPNQHNUmjWnM0EBCpdYK7i07cSUTYy+I5ARaz705UuQR34A4ggAACCCCA4LL6qhPGV94JYgswAGXGEhq663zFAAAAAElFTkSuQmCC",C=320,b=176,w=1e4,T=1200,k=8,P=30,A=84,I=108,E="tsCollapsed",x="tsUnpinned",M="tsDragDrop",O="tsDragDropUnpin",L=32,D=/^(\/\?|\?|&|)/,R={topSitesContainerId:"TopSitesContainer",topSitesId:"TopSitesCommon",topSitesClassSelector:"topSitesCommon",topSiteActionMenuId:"tsam"},F={topSitesDarkOnBackgroundImage:"topSitesDarkOnBackgroundImage",topSitesLightOnBackgroundImage:"topSitesLightOnBackgroundImage",topSitesDark:"topSitesDark",topSitesLight:"topSitesLight",tenSites:"ten-sites",nineSites:"nine-sites",eightSites:"eight-sites",sixSites:"six-sites",twoRowSites:"two-row-sites",feeds3T1SearchBoxWidth:"f3t1tsb",feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled:"qbf3t1tsb",large:"Large"},B="https://ntp.msn.com/edge/ntp/sharedlinkssmartlist?id=AA11D0c3",N=["ntp.msn.com","ntp.msn.cn","microsoftedgewelcome.microsoft.com"],U={"go.microsoft.com":["Welcome to Microsoft Edge"],"msn.com":["MSN","Microsoft Start"]};var $,_;!function(e){e[e.topSiteAdLabelBig=0]="topSiteAdLabelBig",e[e.topSiteAdLabelSmall=1]="topSiteAdLabelSmall",e[e.topSiteAdTxtBig=2]="topSiteAdTxtBig",e[e.topSiteAdTxtSmall=3]="topSiteAdTxtSmall"}($||($={})),function(e){e[e.AllQuickLinksButton=1]="AllQuickLinksButton",e[e.SeeMoreButton=2]="SeeMoreButton"}(_||(_={}));const H=[{url:"https://www.bing.com",exc:["maps"]},{url:"https://www2.bing.com",exc:["maps"]},{url:"https://bing.com",exc:["maps"]},{url:"https://chat.bing.com"},{url:"https://www.google.co.jp",exc:["maps","photos","flights"]},{url:"https://google.com",exc:["maps","photos","flights","mail"]},{url:"https://www.google.com",exc:["maps","photos","flights"]},{url:"https://www.google.com.au",exc:["maps","photos","flights"]},{url:"https://www.google.com.br",exc:["maps","photos","flights"]},{url:"https://www.google.com.fr",exc:["maps","photos","flights"]},{url:"https://www.google.co.uk",exc:["maps","photos","flights"]},{url:"https://www.google.de",exc:["maps","photos","flights"]},{url:"https://www.yahoo.com"},{url:"https://search.yahoo.com"},{url:"https://uk.yahoo.com "},{url:"https://uk.search.yahoo.com"},{url:"https://de.yahoo.com"},{url:"https://de.search.yahoo.com"},{url:"https://fr.yahoo.com"},{url:"https://fr.search.yahoo.com"},{url:"https://ca.yahoo.com"},{url:"https://ca.search.yahoo.com"},{url:"https://au.yahoo.com"},{url:"https://www.yahoo.co.jp"},{url:"https://search.yahoo.co.jp"},{url:"https://www.baidu.com"},{url:"https://www.duckduckgo.com"},{url:"https://yandex.com"},{url:"https://www.yandex.com"},{url:"https://www.yandex.ru"},{url:"https://www.naver.com"},{url:"https://www.microsoft.com/en-us/edge/update"}],W={"https://www.office.com":"AA13Q6AL","https://www.office.com/":"AA13Q6AL"},j={"https://www.office.com":"Microsoft 365","https://www.office.com/":"Microsoft 365"},G={rid:1,dataGenerationTime:null,faviconUrl:"",domain:"",enforcement:void 0,title:"          ",tileSource:0,tileTitleSource:0,url:"",direction:"ltr"},V={[l.Z3.onerow]:{[d.K$.c1]:{default:{tile:6,class:F.sixSites}},[d.K$.c2]:{default:{tile:10,class:F.tenSites}},[d.K$.c3]:{always:{tile:8,class:F.eightSites},peek:{tile:8,class:F.eightSites},default:{tile:10,class:F.tenSites}},[d.K$.c4]:{default:{tile:10,class:F.tenSites}},[d.K$.c5]:{default:{tile:10,class:F.tenSites}}},[l.Z3.tworows]:{[d.K$.c1]:{default:{tile:6,class:F.sixSites}},[d.K$.c2]:{default:{tile:10,class:F.tenSites}},[d.K$.c3]:{default:{tile:16,class:F.eightSites}},[d.K$.c4]:{default:{tile:16,class:F.eightSites}},[d.K$.c5]:{default:{tile:16,class:F.eightSites}}},[l.Z3.top]:{[d.K$.c1]:{default:{tile:100,class:""}},[d.K$.c2]:{default:{tile:100,class:""}},[d.K$.c3]:{default:{tile:100,class:""}},[d.K$.c4]:{default:{tile:100,class:""}},[d.K$.c5]:{default:{tile:100,class:""}}}},q={0:"AlgoGenerated",[-5]:"CuratedTileSource",4:"UserAddedTileSource",3:"UserAddedTileSourceNewVal"},z=new Set,Q=new Set,Z=new Set,K=new Set,J=new Set,X=new Set,Y=new Set,ee=new Set,te=new Set,ne=new Set,ie=new Set,re=new Set,oe=new Map([[0,[ne,ie,re]],[-5,[z,Q,Z]],[4,[K,J,X]],[3,[Y,ee,te]]]),ae={[l.Z3.onerow]:{[d.K$.c1]:{default:{tile:8,class:F.feeds3T1SearchBoxWidth}},[d.K$.c2]:{default:{tile:10,class:F.feeds3T1SearchBoxWidth}},[d.K$.c3]:{default:{tile:6,class:F.feeds3T1SearchBoxWidth}},[d.K$.c4]:{default:{tile:9,class:F.feeds3T1SearchBoxWidth}},[d.K$.c5]:{default:{tile:9,class:F.feeds3T1SearchBoxWidth}}},[l.Z3.tworows]:{[d.K$.c1]:{default:{tile:8,class:F.feeds3T1SearchBoxWidth}},[d.K$.c2]:{default:{tile:10,class:F.feeds3T1SearchBoxWidth}},[d.K$.c3]:{default:{tile:12,class:F.feeds3T1SearchBoxWidth}},[d.K$.c4]:{default:{tile:18,class:F.feeds3T1SearchBoxWidth}},[d.K$.c5]:{default:{tile:18,class:F.feeds3T1SearchBoxWidth}}},[l.Z3.top]:{[d.K$.c1]:{default:{tile:100,class:""}},[d.K$.c2]:{default:{tile:100,class:""}},[d.K$.c3]:{default:{tile:100,class:""}},[d.K$.c4]:{default:{tile:100,class:""}},[d.K$.c5]:{default:{tile:100,class:""}}}},se={[l.Z3.onerow]:{[d.K$.c1]:{default:{tile:8,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c2]:{default:{tile:10,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c3]:{default:{tile:3,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c4]:{default:{tile:6,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c5]:{default:{tile:6,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}}},[l.Z3.tworows]:{[d.K$.c1]:{default:{tile:8,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c2]:{default:{tile:10,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c3]:{default:{tile:6,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c4]:{default:{tile:12,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}},[d.K$.c5]:{default:{tile:12,class:F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}}},[l.Z3.top]:{[d.K$.c1]:{default:{tile:100,class:""}},[d.K$.c2]:{default:{tile:100,class:""}},[d.K$.c3]:{default:{tile:100,class:""}},[d.K$.c4]:{default:{tile:100,class:""}},[d.K$.c5]:{default:{tile:100,class:""}}}};var ce=n(987),de=n(56692),le=n(99038);const ue=/www\d*\./i,pe=/^https?:/i;class he{constructor(e){if(!le.b.isNotNullOrUndefined(e))return;let t;try{t=new URL(e.trim())}catch(e){t=void 0}if(!t||!e.toLocaleLowerCase().startsWith(t.origin.toLocaleLowerCase()))try{t=new URL("http://"+e)}catch(e){t=void 0}if(!t||!t.host||!pe.test(t.protocol))return;const n=t.hostname.replace(ue,"");this.url=t.href.replace(/\/$/,""),this.domain=n,this.domainAndPath=this.domain+t.pathname.replace(/[\s/]+$/g,""),this.domainPathAndQuery=this.domainAndPath+t.search,this.hasQuery=!!t.search}}const ge="removedTopSiteUrls",me={};let fe,ve,ye,Se;function Ce(e){if(e){return null!=de.jG&&de.jG.IsChinaCompliance?`//img-s.msn.cn/tenant/amp/entityid/${e}.img`:`//img-s-msn-com.akamaized.net/tenant/amp/entityid/${e}.img`}return S}function be(e){if(e){return(e&&e.match(/cms\/api\/amp\/image\/([a-z0-9]+)$/i)||{})[1]}return null}function we(e,t){t&&!e[t]&&(e[t]=!0)}Se=(0,ce.$o)(),ye=Se.getObject(ge)||{},ve={};var Te=n(17769),ke=n(1334),Pe=n(45506),Ae=n(55755),Ie=n(40537),Ee=n(17612),xe=n(88828),Me=n(32164),Oe=n(58958),Le=n(85068),De=n(45896),Re=n(43178),Fe=n(97555),Be=n(65453),Ne=n(71219),Ue=n(4814),$e=n(86331),_e=n(83227),He=n(53076),We=n(82890),je=n(34955),Ge=n(82209),Ve=n(75192),qe=n(92031),ze=n(98304),Qe=n(22704),Ze=n(19388),Ke=n(68364),Je=n(65135),Xe=n(38156),Ye=n(60483);const et="curated_topsite",tt="user_topsite",nt="frequent_topsite",it="promotedcurated_topsite",rt="promotedcurated_topsite_sponsored",ot="wpopromoted_topsite",at="curatedleadgen_topsite",st="autoappend_topsite",ct="tile",dt="url",lt="context_menu",ut="topsite_remove_toast",pt="remove",ht="undoremove",gt="close",mt="cancel",ft="rename",vt="save",yt="suggestedlink",St="edit_dialog",Ct="add_dialog",bt="topsiteaddtile",wt="topsite",Tt="onelinetopsite",kt="turnonpreview",Pt="turnoffpreview",At="topsitePinToTaskBar",It="unpin",Et="pin",xt="allquicklinkbutton",Mt="seemorebutton",Ot="settingButton",Lt="dropdownSelector",Dt="action_menu";var Rt;!function(e){e.tsn="tsn",e.moreOption="More Options",e.remove="Remove",e.undoRemove="Undo Remove",e.close="Close",e.rename="Rename",e.save="Save",e.cancel="Cancel",e.addSite="Add a site",e.add="Add",e.show="Show",e.suggestedLink="Add a suggested link",e.turnOnPreview="Turn On Preview",e.turnOffPreview="Turn Off Preview",e.container="Container",e.unpin="Unpin",e.pin="Pin",e.topsiteTaskbarpin="TopSite Pin to TaskBar",e.allQuickLinkButton="All Quick Link Button",e.seeMoreButton="See More Button",e.settingButton="Setting Button",e.selector="Dropdown Selector",e.edgeShoppingTile="EdgeShopping",e.ActionMenu="Action Menu"}(Rt||(Rt={}));const Ft="tsu",Bt=(e,t)=>{if(!e)return;let n;switch(t.tileSource){case 4:case 3:n=tt;break;case-5:n=et;break;case-6:n=it;break;case-7:n=rt;break;case-4:n=ot;break;case-8:n=at;break;case 2:n=st;break;default:n=nt}const i=Xe.uH.TopSites,r=e.addOrUpdateChild({name:`${n}_${ct}`,content:{type:i}});let o=Rt.tsn;t.hasEdgeShoppingSmartlist&&(o=Rt.edgeShoppingTile);return{topSiteTile:r,destination:e.addOrUpdateChild({name:`${n}_${dt}${"https://www.bing.com/work"===t.url?">top-sites-bookmarks-tile-click":""}`,behavior:Xe.wu.Navigate,content:{headline:o,type:i},overrideDestinationUrl:Ft}),moreOption:e.addOrUpdateChild({name:`${n}_${lt}`,behavior:Xe.wu.More,content:{headline:Rt.moreOption,type:i},overrideDestinationUrl:Ft}),unpin:e.addOrUpdateChild({name:`${n}_${It}`,behavior:Xe.wu.Unpin,content:{headline:Rt.unpin,type:i},overrideDestinationUrl:Ft}),pin:e.addOrUpdateChild({name:`${n}_${Et}`,behavior:Xe.wu.Pin,content:{headline:Rt.pin,type:i},overrideDestinationUrl:Ft})}};var Nt=n(42590),Ut=n(99452);const $t=e=>{const t=Pe.Al.CurrentFlightSet;return!(t.has("prg-sharedl-t")||t.has("prg-sharedlr-t")||t.has("prg-sharedl-te"))&&e===B};var _t=n(7522);function Ht(e,t){var n;const i=[];let r=0,o=0;const a=(0,_t.Z)(t,"slot"),s=e.length+t.length;for(let t=0;t<s;t++)t>=(null===(n=a[o])||void 0===n?void 0:n.slot)?i.push(a[o++]):r<e.length&&i.push(e[r++]);for(;o<a.length;)i.push(a[o++]);return i}var Wt=n(94794);const jt=[-5,-8,-4,-6,-7];function Gt(e,t){this.timer&&(window.clearTimeout(this.timer),this.timer=null),e&&(this.timer=window.setTimeout((()=>{t(!0)}),e))}function Vt(e){Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.pqC),{message:e}))}function qt(e,t,n,i,r,o,a){if(e){const{left:s,right:c,bottom:d,top:l}=e.getBoundingClientRect(),u=a?P:A,p=t.getBoundingClientRect(),h=i-c>C,g=h?s-p.left:c-C-p.left,m=h?p.right-s-C:p.right-c,f=r-d-k>n,v=l>=n;let y="auto";f&&(y=d-p.bottom+k+"px"),f||v||(y=-l+"px");const S=f?"auto":p.bottom-d+u+k+"px";return o?`--dialog-left:${g}px;--dialog-top:${y};--dialog-bottom:${S};`:`--dialog-right:${m}px;--dialog-top:${y};--dialog-bottom:${S};`}return o?`--dialog-left:0px; --dialog-top:${k}px;`:`--dialog-right:0px; --dialog-top:${k}px;`}function zt(e,t,n,i,r){const o=function(e,t,n){const i=e.recommendedSites,r=ye||{},o=ve||{},a=n.map((e=>e.url)),s=i.filter((e=>{const t=Jt(e.url);if(!o[t]&&!r[e.url]&&!a.includes(e.url))return e})),c=n.filter((e=>4===e.tileSource||3===e.tileSource)).length,d=t-c;return s.splice(0,d)}(e,t,n),a=o.map((e=>e.url));let s;n=n.filter((e=>{if(!a.includes(e.url))return e})),s=0===n.length&&0===r.length?1:r.length>0?r[r.length-1].rid+1:n[n.length-1].rid+1e3;return function(e,t){const n=e.length+t.length,i=[];let r=0,o=0,a=0;for(let s=0;s<n;s++)o<t.length&&t[o].locationIndex===a?i[a++]=t[o++]:r<e.length?i[a++]=e[r++]:i[a++]=t[o++];return i}(n,o.map((e=>{var t,n;i.set(s,e);const r=null!==(t=e.faviconId)&&void 0!==t?t:be(e.faviconUrl);return Object.assign(Object.assign({},e),{faviconUrl:Ce(r),tileSource:-4,rid:s++,customImagePart:null!==(n=e.customImagePart)&&void 0!==n?n:"image"})})))}function Qt(e,t){if(t.shouldRenderSmartList){const n=t.getEnabledSmartList(e.rid);if(n&&t.smartListBadgePropsMap&&t.smartListBadgePropsMap.size>0)return t.smartListBadgePropsMap.get(n.experienceType)}return null}function Zt(e,t,n,i,r,o){if(n){if((a=n.url)&&(ye[a]=!0,Se.setObject(ge,ye)),o&&r(),jt.includes(n.tileSource))return void t();i&&n.rid&&(i.deleteMostVisitedItem(n.rid),je.H.logEventWithTimestamp(je.v.NTP_CUSTOMIZE_SHORTCUT_REMOVE,Pe.Al.IsPrerender))}var a}function Kt(e,t,n,i,r){if(jt.includes(i))return(o=r)&&(delete ye[o],Se.setObject(ge,ye)),void e();var o;if(t&&n){const e=t.getMostVisitedItemData(n),i=e?e.tileSource:null;4===i||3===i?t.undoCustomLinkAction(n):0!==i&&2!==i||t.undoMostVisitedDeletion(n)}}function Jt(e){try{return new URL(e).hostname}catch(e){return""}}function Xt(e,t){t&&(null==e?void 0:e.mostVisitedAvailable)&&e.mostVisited.forEach((t=>{var n;const i=e.getMostVisitedItemData(t.rid),r=(null!==(n=i.domain)&&void 0!==n?n:Jt(i.url)).replace("www.",""),o=oe.get(i.tileSource);!o||o.length<3||(o[0].add(i.url),o[1].add(i.domain),o[2].add(r),0!==i.tileSource&&Yt(i,0),-5!==i.tileSource&&Yt(i,-5),4!==i.tileSource&&Yt(i,4),3!==i.tileSource&&Yt(i,3),function(e){(0,c.mG)(this,void 0,void 0,(function*(){const t=["sign in","signin","working","loading","log in","login","logging in","interstitial","redirect"];for(let n=0;n<t.length;n++)yield(0,Wt.R)(),(null==e?void 0:e.toLocaleLowerCase().includes(t[n]))&&Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.lqy),{message:"Interstitial title appears which includes:"+t[n]}))}))}(i.title))}))}function Yt(e,t){var n;const i=q[e.tileSource],r=q[t],o=oe.get(t),a=e.url,s=e.domain,c=(null!==(n=e.domain)&&void 0!==n?n:Jt(e.url)).replace("www.",""),d=o[0],l=o[1],u=o[2];d.has(a)&&Vt("Urls match of types: "+i+" and "+r+" "+a),l.has(s)&&Vt("Domains match of types: "+i+" and "+r+" "+s),u.has(c)&&Vt("Hosts match of types: "+i+" and "+r+" "+c)}function en(e,t){if(U&&U[e])for(let n=0;n<U[e].length;n++)if(0===U[e][n].localeCompare(t,{sensitivity:"accent"}))return!0;return!1}var tn=n(37802),nn=n(70430),rn=n(52965),on=n(9533),an=n(81555),sn=n(32717),cn=n(75384),dn=n(38349),ln=n(65932),un=n(54678),pn=n.n(un),hn=n(59997),gn=n(44070),mn=n(49218),fn=n(89150),vn=n(93703),yn=n(41472),Sn=n(74037),Cn=n(11310),bn=n.n(Cn),wn=n(11301),Tn=n(74359),kn=n(79668),Pn=n(63971),An=n(42798),In=n(81031),En=n(34009),xn=n.n(En),Mn=n(7137),On=n.n(Mn),Ln=n(12287),Dn=n.n(Ln);wn.O,Tn.v,kn.S,An.Z,In.X,Pn.O;const Rn=mn.dy`<span class="badge">${e=>e.badge.children}</span>`,Fn=mn.dy` ${e=>"topSiteAdLabelSmall"!==e.adLabelType?mn.dy`<span class="dot-separator">  </span>`:null}<msn-native-ad-ad-label class="${e=>"topSiteAdLabelSmall"===e.adLabelType?"top-site-ad-label":" "}" type="${e=>e.adLabelType}"></msn-native-ad-ad-label>`,Bn=(e,t)=>{const n=[];return t.parent.config.enableFeeds3V1Base&&t.parent.userSelectedSetting!==l.Z3.top&&(n.push("top-site-f3v1b"),t.parent.config.enableF3V1ICBP&&n.push("top-site-f3v1b-icbp"),t.parent.config.disableF3V1Hover&&n.push("top-site-f3v1b-no-hover")),n.join(" ")},Nn=mn.dy`<fluent-option value="${e=>e.title}" id="${e=>e.id}" class=${(e,t)=>t.parent.topSiteSelectedItem&&t.parent.topSiteSelectedItem.id===e.id?"selected":"unselected"} ?selected=${(e,t)=>t.parent.topSiteSelectedItem&&t.parent.topSiteSelectedItem.id===e.id}>${e=>e.title}</fluent-option>`,Un=mn.dy`<div class="topsite-list-footer-setting topsite-direct-settings"><label>${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.quickLinksLabelText}}</label><fluent-select class="topSitesOptions" id="topSitessSelector" appearance="filled" @click=${(e,t)=>e.onTopSiteOptions(t.event)} data-t="${e=>e.oneLineTopSitesSelectorTelemetryTag}" @change=${(e,t)=>e.updateTopSite(t.event)} current-value=${e=>e.topSiteSelectedItem&&e.topSiteSelectedItem.title} data-customhandled="true"><span slot="selected-value">${e=>e.topSiteSelectedItem&&e.topSiteSelectedItem.title}</span>${(0,fn.rx)((e=>e.topSiteMenuItems),Nn)}</fluent-select></div>`,$n=mn.dy`<fluent-button class="start-button" appearance="stealth" title="${(e,t)=>{var n,i;return(null===(i=null===(n=t.parent)||void 0===n?void 0:n.config)||void 0===i?void 0:i.enablePinIconUnclickable)?null:e.pinLabel}}" aria-lable="${e=>e.pinLabel}" role="button" @click=${(e,t)=>{var n,i;return t.parent.pinAction&&!(null===(i=null===(n=t.parent)||void 0===n?void 0:n.config)||void 0===i?void 0:i.enablePinIconUnclickable)&&t.parent.pinAction(e,t.event)}} data-t="${e=>e.pinActionButtonTelemetryTag}" icon-only>${(0,vn.g)(((e,t)=>{var n;return!(null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin)}),mn.dy`${mn.dy.partial(On())}`)} ${(0,vn.g)(((e,t)=>{var n;return null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin}),mn.dy` ${(0,vn.g)((e=>1===e.dragDropType),mn.dy`${mn.dy.partial(On())}`)} ${(0,vn.g)(((e,t)=>{var n,i;return 1!==e.dragDropType&&!(null===(i=null===(n=t.parent)||void 0===n?void 0:n.config)||void 0===i?void 0:i.enablePinIconUnclickable)}),mn.dy`${mn.dy.partial(xn())}`)} `)}</fluent-button>`,_n=mn.dy`<fluent-button class="end-button" appearance="stealth" title="${e=>e.contextMenuLabel}" aria-label="${e=>e.contextMenuLabel}" role="button" @click=${(e,t)=>t.parent.toggleActionMenu&&t.parent.toggleActionMenu(e,t.event)} data-t="${e=>e.toggleActionMenuButtonTelemetryTag}" icon-only>${mn.dy.partial(bn())}</fluent-button>`,Hn=mn.dy`<div class="top-site-title ${e=>e.textShadowEnabled?"top-site-shadow":""}"><span class="top-site-title-text ${(e,t)=>t.parent.config.enableOnelineClamp?"one-line-title":""}">${e=>e.title}</span>${(0,vn.g)((e=>e.adLabelType&&e.isSponsored),Fn)} ${(0,vn.g)((e=>e.badge),Rn)}</div>`,Wn=mn.dy`<a class="control" href="${e=>e.url}" data-t="${e=>e.anchorTelemetryTag}">${Hn}</a>`,jn=mn.dy`<a class="control" href="${e=>e.url}" data-t="${e=>e.anchorTelemetryTag}" @click=${(e,t)=>t.parent.preventClickOnTopSite(t.event)}>${Hn}</a>`,Gn=mn.dy`<div title="${e=>e.title}" aria-label="${e=>e.title}" class="top-site-next small-top-sites pill-top-site ${(e,t)=>t.parent.config.enablePinIconUnclickable?"pinned-top-site":" "} ${(e,t)=>t.parent.config.enableGridTopSites&&t.parent.userSelectedSetting===l.Z3.top?"grid-top-sites ":""} ${(e,t)=>t.parent.config.enableHoverTitle?"uses-hover-title":""} ${(e,t)=>t.parent.config.enableHideTitle?"hide-title":""} ${(e,t)=>t.parent.config.enableTopsitesDecrease?"decrease-top-site":""} ${(e,t)=>t.parent.config.enableCancelHoverTitleHeight?"cancel-hover-top-site":""} ${Bn} ${(e,t)=>t.parent.topSitesClassName}" href="${e=>e.url}" data-t="${e=>e.contentViewTelemetryTag}" @mouseenter=${(e,t)=>t.parent.handleTopSiteHover(e.rid,!0,e.hasEdgeShoppingSmartlist)(t.event)} @mouseleave=${(e,t)=>t.parent.handleTopSiteHover(e.rid,!1,e.hasEdgeShoppingSmartlist)(t.event)} @focus=${(e,t)=>t.parent.handleTopSiteHover(e.rid,!0,e.hasEdgeShoppingSmartlist)(t.event)} @blur=${(e,t)=>t.parent.handleTopSiteHover(e.rid,!1,e.hasEdgeShoppingSmartlist)(t.event)} @keyup=${(e,t)=>t.parent.handleKeyDownPress(e.rid,e.hasEdgeShoppingSmartlist)(t.event)} @mouseup=${(e,t)=>t.parent.handleTopSiteClick(e.rid,e.hasEdgeShoppingSmartlist)(t.event)}>${(0,vn.g)(((e,t)=>{var n,i;return(t.parent.renderTopSiteStartAndEnd&&(null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin)&&!((null===(i=t.parent)||void 0===i?void 0:i.config.enablePinIconUnclickable)&&1!==e.dragDropType)||e.promote)&&!e.enablePinnedIndicator}),mn.dy`<span class="start"><div class="top-site-next-g">${$n}</div></span>`)}<div class="content-container ${(e,t)=>t.parent.topSitesClassName}"><div class="image-container"><div class="image"><img src="${e=>e.faviconUrl}" /></div></div><div class="title-container">${(0,vn.g)((e=>1===e.dragDropType&&e.enablePinnedIndicator),mn.dy`<div class="pinned-container"><span class="pinned-indicator">${mn.dy`${mn.dy.partial(On())}`}</span></div>`)} ${(0,vn.g)((e=>e.disableHref),jn,Wn)}</div></div>${(0,vn.g)(((e,t)=>t.parent.renderTopSiteStartAndEnd),mn.dy`<span class="end"><div class="top-site-next-g">${_n}</div></span>`)}</div>`,Vn=mn.dy`<div class="top-site-next small-top-sites pill-top-site drag-locked add-placeholder ${(e,t)=>t.parent.config.enableGridTopSites&&t.parent.userSelectedSetting===l.Z3.top?"grid-top-sites ":""} ${(e,t)=>t.parent.config.enableHoverTitle?"uses-hover-title":""} ${(e,t)=>t.parent.config.enableTopsitesDecrease?"decrease-top-site":""} ${(e,t)=>t.parent.config.enableCancelHoverTitleHeight?"cancel-hover-top-site":""} ${Bn} ${(e,t)=>t.parent.topSitesClassName}"><div class="content-container ${(e,t)=>t.parent.topSitesClassName}"><div class="image-container"><div class="add-image"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg></div></div><div class="title-container"><a class="control" href="#" @click=${(e,t)=>e.onAddTopSiteClick(t.event)} data-t="${e=>e.addTopSiteButtonTelemetryTag}" aria-label="${(e,t)=>t.parent.strings.ariaLabel_addTile}" title="${(e,t)=>t.parent.strings.ariaLabel_addTile}"><div class="top-site-title"><span class="top-site-title-text"></span></div></a></div></div></div>`,qn=mn.dy`<msft-top-site-placeholder class="small-top-sites drag-locked ${(e,t)=>t.parent.topSitesClassName} ${(e,t)=>t.parent.config.enableHoverTitle?"uses-hover-title":""}" ?backPlateEnabled=${e=>e.backPlateEnabled}><div slot="icon-action"><fluent-button class="add-button ${e=>e.backPlateEnabled?"with-back-plate":""}" appearance="stealth" aria-label="${e=>e.ariaLabel}" role="button" title="${e=>e.ariaLabel}" id="clickAddTileButton" @click=${(e,t)=>e.onAddTopSiteClick(t.event)} data-t="${e=>e.addTopSiteButtonTelemetryTag}"><div class="add-button-label"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg><span>${e=>e.addTileLabel}</span></div></fluent-button></div></msft-top-site-placeholder>`,zn=mn.dy`<msft-top-site-placeholder class="small-top-sites drag-locked ${(e,t)=>t.parent.topSitesClassName}" ?backPlateEnabled=${e=>e.backPlateEnabled}><div slot="icon-action"><fluent-button class="add-button ${e=>e.backPlateEnabled?"with-back-plate":""}" appearance="stealth" aria-label="${e=>e.ariaLabel}" role="button" title="${e=>e.ariaLabel}" id="clickSeeAllTileButton" @click=${(e,t)=>e.onSeeAllTopSiteClick(t.event)}><div><svg width="14" height="4" viewBox="0 0 14 4" xmlns="http://www.w3.org/2000/svg"><path d="M3.25 2C3.25 2.69036 2.69036 3.25 2 3.25C1.30964 3.25 0.75 2.69036 0.75 2C0.75 1.30964 1.30964 0.75 2 0.75C2.69036 0.75 3.25 1.30964 3.25 2ZM8.25 2C8.25 2.69036 7.69036 3.25 7 3.25C6.30964 3.25 5.75 2.69036 5.75 2C5.75 1.30964 6.30964 0.75 7 0.75C7.69036 0.75 8.25 1.30964 8.25 2ZM12 3.25C12.6904 3.25 13.25 2.69036 13.25 2C13.25 1.30964 12.6904 0.75 12 0.75C11.3096 0.75 10.75 1.30964 10.75 2C10.75 2.69036 11.3096 3.25 12 3.25Z" /></svg><span>${e=>e.ariaLabel}</span></div></fluent-button></div></msft-top-site-placeholder>`,Qn=mn.dy`
${(0,vn.g)((e=>e.seeAllTileEnabled),zn)}
${(0,vn.g)((e=>!e.seeAllTileEnabled),mn.dy`${(0,vn.g)(((e,t)=>t.parent.config.enableFeeds3V1Base&&t.parent.userSelectedSetting!==l.Z3.top),Vn,qn)}`)}`,Zn=mn.dy`<msn-top-site-dialog id="topSiteAddDialog" cancelText="${e=>e.topSiteAddDialog.cancelText}" headerTitle="${e=>e.topSiteAddDialog.headerTitle}" saveText="${e=>e.topSiteAddDialog.saveText}" closeText="${e=>e.topSiteAddDialog.closeText}" :nameInputData="${e=>e.topSiteAddDialog.nameInputBox}" :urlInputData="${e=>e.topSiteAddDialog.urlInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteAddDialog.closeButtonTelemetryTag}" @focus="${(e,t)=>e.topSiteAddDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteAddDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteAddDialog.saveHandler(t.event)}" style="${e=>e.topSiteAddDialogContainerPosition}">${(0,vn.g)((e=>e.config.suggestedTopSiteList&&e.config.suggestedTopSiteList.length>0),mn.dy`<div slot="subSection"><h3 class="suggestion-title">${e=>e.strings.addDialogSubHeading}</h3><div class="suggestion-body">${(0,vn.g)((e=>e.config.optSuggestedTpsTpl),mn.dy`${(0,fn.rx)((e=>e.config.suggestedTopSiteList),mn.dy`<div tabIndex="0" style="margin-inline-end: 12px"><div class="top-site-next" href="${e=>e.url}" title="${e=>e.title}" aria-label="${e=>e.title}" tabIndex="-1" @click=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} @keydown=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)}><div class="content-container"><div class="image-container"><div class="image"><img src="${e=>Ce(e.faviconId)}" alt="${e=>e.title}" /></div></div><div class="title-container"><div class="control" data-t="${e=>e.suggestedLinkTelemetryTag}"><div class="top-site-title"><span class="top-site-title-text">${e=>e.title}</span>${(0,vn.g)((e=>e.adLabelType&&e.isSponsored),Fn)} ${(0,vn.g)((e=>e.badge),Rn)}</div></div></div></div></div></div>`)}`,mn.dy`${(0,fn.rx)((e=>e.config.suggestedTopSiteList),mn.dy`<div tabIndex="0" style="margin-inline-end: 12px"><msft-top-site href=${e=>e.url} title="${e=>e.title}" aria-label="${e=>e.title}" @click=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} @keydown=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} :anchorTelemetryTag="${e=>e.suggestedLinkTelemetryTag}" tabIndex="-1"><img slot="image" src="${e=>Ce(e.faviconId)}" alt="${e=>e.title}" />${e=>e.title}</msft-top-site></div>`)}`)}</div></div>`)}</msn-top-site-dialog>`,Kn=mn.dy`<msn-top-site-dialog id="topSiteEditDialog" cancelText="${e=>e.topSiteEditDialog.cancelText}" headerTitle="${e=>e.topSiteEditDialog.headerTitle}" saveText="${e=>e.topSiteEditDialog.saveText}" closeText="${e=>e.topSiteEditDialog.closeText}" :nameInputData="${e=>e.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteEditDialog.closeButtonTelemetryTag}" @focus="${(e,t)=>e.topSiteEditDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteEditDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteEditDialog.saveHandler(t.event)}" style="${e=>e.topSiteEditDialogContainerPosition}"></msn-top-site-dialog>`,Jn=mn.dy`<msn-toast>${(0,fn.rx)((e=>e.undoToast.removedText),mn.dy`<span>${e=>e}</span>`)}<fluent-button ${(0,yn.i)("undoButton")} appearance="lightweight" slot="actions" class="toast-navigation-button" title=${e=>e.undoToast.undoButtonLabel} @click=${(e,t)=>e.undoToast.undoTopSiteHandler(t.event)} data-t="${e=>e.undoToast.undoButtonTelemetryTag}">${e=>e.undoToast.undoButtonLabel}</fluent-button><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.undoToast.closeButtonLabel} @click=${(e,t)=>e.undoToast.closeHandler(t.event)} data-t="${e=>e.undoToast.closeButtonTelemetryTag}"><svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg></fluent-button></msn-toast>`,Xn=mn.dy`<msn-toast>${(0,fn.rx)((e=>e.pinToast.pinText),mn.dy`<span>${e=>e}</span>`)}<fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.pinToast.closeButtonLabel} @click=${(e,t)=>e.pinToast.closeHandler(t.event)} data-t="${e=>e.pinToast.closeButtonTelemetryTag}"><svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg></fluent-button></msn-toast>`,Yn=e=>e.topSites,ei=e=>e.topSites.map((e=>Object.assign(Object.assign({},e),{displayPinIcon:!0}))),ti=e=>e.overflowItems,ni=e=>e.overflowItems&&e.overflowItems.length&&e.overflowItems.length>0,ii=e=>e.topSites&&e.topSites.length,ri=mn.dy`<a class="pill-top-site ${(e,t)=>{var n;return(null===(n=t.parent.config)||void 0===n?void 0:n.enableTopsitesTopMiniMargin)?"mini-margin":""}}" href="${e=>e.url}" title="${e=>e.title===e.url?e.title:e.title+": "+e.url}" aria-label="${e=>e.title}" data-t="${e=>e.anchorTelemetryTag}"><div class="left-part"><img slot="image" src="${e=>e.faviconUrl}" /><span>${e=>e.title}</span>${(0,vn.g)((e=>e.adLabelType&&e.isSponsored),Fn)}</div>${(0,vn.g)((e=>e.displayPinIcon),mn.dy` ${(0,vn.g)(((e,t)=>{var n;return!(null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin)}),mn.dy`<div class="top-sites-responsive-pin-icon">${mn.dy.partial(On())}</div>`)} ${(0,vn.g)(((e,t)=>{var n;return null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin}),mn.dy` ${(0,vn.g)((e=>1===e.dragDropType),mn.dy`<div class="top-sites-responsive-pin-icon">${mn.dy.partial(On())}</div>`)} ${(0,vn.g)(((e,t)=>{var n,i;return 1!==e.dragDropType&&!(null===(i=null===(n=t.parent)||void 0===n?void 0:n.config)||void 0===i?void 0:i.enablePinIconUnclickable)}),mn.dy`<div class="top-sites-responsive-pin-icon">${mn.dy.partial(xn())}</div>`)} `)} `)}<div class="right-part">${_n}</div></a>`,oi=mn.dy`<fluent-button type="button" id="allQuickLinksButtonId" ${(0,yn.i)("allQuickLinksButton")} appearance="stealth" aria-label="${e=>e.strings.quickLinksLabelText||""}" title="${e=>e.strings.quickLinksLabelText||""}" aria-haspopup="true" aria-expanded="${e=>e.showMenu?"true":null}" @click=${(e,t)=>e.toggleOverflowMenu(_.AllQuickLinksButton)} data-t="${e=>e.oneLinetopSitesAllQuickLinkButtonTelemetryTag}"><div class="all-links-btn ${e=>"start"===e.overflowMenuClass?"active":""}">${mn.dy.partial(Sn.Z)} ${e=>e.strings.quickLinksLabelText}</div></fluent-button>`,ai=mn.dy`<fluent-button type="button" id="seeMoreButtonId" ${(0,yn.i)("seeMoreButton")} aria-label="${e=>e.strings.quickLinksSeeMoreButton||""}" title="${e=>e.strings.quickLinksSeeMoreButton||""}" aria-haspopup="true" aria-expanded="${e=>e.showMenu?"true":null}" @click=${(e,t)=>e.toggleOverflowMenu(_.SeeMoreButton)} data-t="${e=>e.oneLinetopSitesSeeMoreButtonTelemetryTag}"><div class="all-links-btn ${e=>"end"===e.overflowMenuClass?"active":""}">${e=>e.strings.quickLinksSeeMoreButton} ${mn.dy.partial(Sn.Z)}</div></fluent-button>`,si=mn.dy`<div class="${e=>e.showMenu?"overflow-menu":"overflow-menu hidden"} ${e=>e.config.enableGridTopSites?"overflow-menu-grid ":""}${e=>e.overflowMenuClass}" ${(0,yn.i)("overflowPanelContainer")}>${(0,vn.g)((e=>ni&&!e.config.enableGridTopSites),mn.dy`<div class="topsite-list">${(0,fn.rx)(ti,ri)}</div><div class="divider"></div>`)} ${(0,vn.g)((e=>e.config.enableGridTopSites&&ii),mn.dy`<div class="topsite-list">${(0,fn.rx)((e=>e.topSites),Gn)}</div><div class="divider"></div>`)}<div class="topsite-list-footer">${(0,fn.rx)((e=>e.topSitesPlaceHolders),Qn)} ${(0,vn.g)((e=>!e.config.enbOnLineSetting),mn.dy`<div title="${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.quickLinksSetting}}" data-t="${e=>e.oneLinetopSitesSettingButtonTelemetryTag}" class="topsite-list-footer-setting" @click=${(e,t)=>e.openSettingDialog(t.event)}>${mn.dy.partial(Dn())} ${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.quickLinksSetting}}</div>`)} ${(0,vn.g)((e=>e.config.enbOnLineSetting),Un)}</div></div>`,ci=mn.dy`
${(0,vn.g)((e=>e.userSelectedSetting===l.Z3.top),mn.dy`<div class="one-line-top-sites-container ${e=>{var t;return e.isOnImage||(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesSoildBg)?"":"notonimg"}} ${e=>{var t;return(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesSoildBg)?"solid":""}} ${e=>{var t;return(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesPillShape)?"pill":""}}" id="oneLineTopSitesContainer" data-t="${e=>e.oneLinetopSitesCommonTelemetryTag}" ${(0,yn.i)("topSitesRoot")}>${(0,vn.g)((e=>{var t;return null===(t=e.config)||void 0===t?void 0:t.enbOnLineQicLink}),mn.dy`<div class="see-more-container start">${oi}<div class="divider"></div></div>`)} ${(0,vn.g)((e=>{var t,n;return!(null===(t=e.config)||void 0===t?void 0:t.enableGridTopSites)||(null===(n=e.config)||void 0===n?void 0:n.enableGridTopSites)&&!e.showMenu}),mn.dy`<div class="oneline-top-sites settings" ${(0,yn.i)("oneLineTopSitesContainer")}>${(0,fn.rx)(ei,ri)} ${(0,vn.g)((e=>{var t,n;return(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesPillShape)&&!(null===(n=e.config)||void 0===n?void 0:n.disableSeeMoreButton)}),mn.dy`<div class="see-more-container" ${(0,yn.i)("oneLineTopSitesSeeMoreEle")}>${ai}</div>`)}</div>`)} ${(0,vn.g)((e=>{var t,n;return!(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesPillShape)&&!(null===(n=e.config)||void 0===n?void 0:n.disableSeeMoreButton)}),mn.dy`<div class="see-more-container">${ai}</div>`)} ${si}</div>`,mn.dy`<div class="root ${e=>e.extraAddedSitesClassName} ${e=>e.className} ${e=>e.config.enableRiverZoom?"river-zoom":""}  ${e=>e.moveUpward?"move-upward":""}" id="${R.topSitesClassSelector}" ${(0,yn.i)("topSitesRoot")}><div class="top-sites ${e=>e.twoRowSitesClassName} ${e=>e.config.enableFeeds3V1Base?"f3plate":""} ${e=>e.config.topsitesCommonBackplate?"topsitesplate":""} ${e=>e.config.useFeedColorForF3V1BP?"feedcolor":""}" role="status"><div id=${R.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,yn.i)("topSitesContainer")}>${mn.dy`${(0,fn.rx)(Yn,Gn)}`} ${mn.dy`${(0,fn.rx)((e=>e.topSitesPlaceHolders),Qn)}`}</div></div></div>`)}<div ${(0,yn.i)("dialogRoot")}>${(0,vn.g)((e=>e.isAddDialogOpen),Zn)} ${(0,vn.g)((e=>e.topSiteAddedSuccessfully),mn.dy`<div class="top-site-add-success" aria-live="polite">${e=>e.lastAddedTopSite} added successfully</div>`)} ${(0,vn.g)((e=>e.isEditDialogOpen),Kn)} ${(0,vn.g)((e=>e.isActionMenuOpen),mn.dy`<div data-t=${e=>e.topsiteItemContainerTelemetry()}><msn-actions-menu id="actions-menu" :referrerButton=${e=>e.activeContextMenuButtonElement} class="${e=>e.config.enableAllPin?"long-width-menu":""}" :menuItems=${e=>e.actionsMenuProps.menuItems} ${(0,yn.i)("topSiteActionsMenu")} @dismiss-menu=${e=>e.isActionMenuOpen=!1} :isGlyphUrlsPicture=${!0} data-t=${e=>e.actionsMenuTelemetry()}>x</msn-actions-menu></div>`)}<div ${(0,yn.i)("undoToastContainer")} class="toast-root">${(0,vn.g)((e=>e.isUndoToastOpen),Jn)} ${(0,vn.g)((e=>e.isPinToastOpen&&!e.isUndoToastOpen),Xn)}</div></div>`;class di{constructor(e,t){this.onTouchStart=()=>{this.sortableService&&this.sortableService.destroy(),this.sortableService=null,document.addEventListener("mousemove",this.onMouseMove)},this.onMouseMove=()=>{this.initializeService(),document.removeEventListener("mousemove",this.onMouseMove)},this.onUnloadPage=()=>{this.clearTopsiteByUnpinnedSites(),this.clearUnpinStorage()},this.component=e,this.container=t.container,this.disableDragDrop=t.disableDragDrop,this.webStorage=(0,ce.$o)(),this.bindEvents()}bindEvents(){window.addEventListener("beforeunload",this.onUnloadPage),document.addEventListener("touchstart",this.onTouchStart),document.addEventListener("mousemove",this.onMouseMove)}unBindEvents(){window.removeEventListener("beforeunload",this.onUnloadPage),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("mousemove",this.onMouseMove)}getDataFromStorage(e){try{const t=this.webStorage.getItem(e);if(t){return JSON.parse(t)}}catch(e){Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.OF8),{message:"Cannot read/write storage for topsite drag drop service",pb:Object.assign(Object.assign({},ze.OF8.pb),{customMessage:`Cannot get drag drop service data, msg: ${e.message||JSON.stringify(e)}`})}))}}saveDataToStorage(e,t){try{this.webStorage.setItem(e,JSON.stringify(t))}catch(e){Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.OF8),{message:"Cannot read/write storage for topsite drag drop service",pb:Object.assign(Object.assign({},ze.OF8.pb),{customMessage:`Cannot save data to topsites, msg: ${e.message||JSON.stringify(e)}`})}))}}reorderItems(e,t,n){Array.isArray(e)&&e.splice(t,0,e.splice(n,1)[0])}getValidTopSitesFromStorageData(){var e;const t=this.getDataFromStorage(M)||{},n=(null!==(e=t.data)&&void 0!==e?e:[]).filter((e=>e.slot>=0)).sort(((e,t)=>e.slot-t.slot)).reduce(((e,t)=>"rid"in t||"url"in t||"faviconUrl"in t?($t(t.url)||(0===e.length||e[e.length-1].slot!==t.slot)&&e.push(t),e):e),[]);return Object.assign(Object.assign({},t),{data:n})}getFixedTopSites(){const{data:e}=this.getValidTopSitesFromStorageData();return e||[]}getTopSites(e,t){let n=e;const{data:i}=this.getValidTopSitesFromStorageData();if(!i)return e;const r=i.filter((e=>e.slot<t));return n=[...Ht((0,nn.Z)(e,r,"url"),r)],n=n.filter((e=>e)).slice(0,t),n}removeTopSiteFromStorage(e,t){const n=this.getDataFromStorage(e)||{},i=n.data;i&&(n.data=i.filter((e=>e.rid!==t.rid)),this.saveDataToStorage(e,n))}clearUnpinStorage(){this.saveDataToStorage(O,{})}clearTopsiteByUnpinnedSites(){const e=(this.getDataFromStorage(O)||{}).data;e&&e.forEach((e=>{this.removeTopSite(e)}))}addTopSite(e,t){let n=this.getValidTopSitesFromStorageData(),i=n.data;if(i||(i=[],n={data:i}),t){i.filter((t=>t.rid!==e.rid&&t.slot>=Math.min(e.fromIndex,e.toIndex)&&t.slot<=Math.max(e.fromIndex,e.toIndex))).forEach((t=>e.fromIndex>e.toIndex?t.slot++:t.slot--))}const r=i.find((t=>t.rid===e.rid));r?Object.assign(r,e):i.push(e),n.data=(0,gn.Z)(i,"rid"),this.saveDataToStorage(M,n),this.removeUnpinnedTopSite(e)}removeTopSite(e){this.removeTopSiteFromStorage(M,e)}addUnpinnedTopSite(e){let t=this.getDataFromStorage(O)||{},n=t.data;n||(n=[],t={data:n}),n.push(e),this.saveDataToStorage(O,t)}removeUnpinnedTopSite(e){this.removeTopSiteFromStorage(O,e)}updateTopSites(e){const t=this.getValidTopSitesFromStorageData(),n=t.data;if(!n)return;const i=n.find((t=>t.rid===e.rid));i&&Object.assign(i,e),this.saveDataToStorage(M,t)}initializeService(){return(0,c.mG)(this,void 0,void 0,(function*(){if(this.sortableService||this.disableDragDrop)return;let e;if(e=this.container instanceof Promise?yield this.container:this.container,!e)return;const{Sortable:t}=yield n.e("node_modules_sortablejs_modular_sortable_esm_js").then(n.bind(n,54958)),i=new Image;i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",this.sortableService=t.create(e,{animation:150,chosenClass:"drag-chosen",dragClass:"drag-dragged",delay:100,touchStartThreshold:5,delayOnTouchOnly:!0,filter:".drag-locked",setData:e=>{e.setDragImage(i,0,0)},onMove:e=>{if(e.related||e.dragged)return!e.related.classList.contains("drag-locked")&&!e.dragged.classList.contains("drag-locked")&&(e.related.classList.add("drag-chosen__no-hover"),!0)},onEnd:t=>{var n,i;const{oldIndex:r,newIndex:o}=t;null===(n=Array.from(e.children))||void 0===n||n.forEach((e=>{var t;null===(t=e.classList)||void 0===t||t.remove("drag-chosen__no-hover")}));const a=this.component.topSites;if(a&&0!==a.length&&-1!==r&&-1!==o&&r!==o){Je.M0.addOrUpdateTmplProperty("tpsdrag","1");if(!this.component.getUserSelectedSetting())return;const e=a[r],n=Object.assign(Object.assign({},e),{slot:o,fromIndex:r,toIndex:o,dragDropType:1});this.addTopSite(n,!0);const s=null===(i=this.component.$fastController.subscribers)||void 0===i?void 0:i.topSites;if(s){const e=[...this.component.topSites];this.reorderItems(e,o,r);let n=[];if(s.spillover)n=s.spillover;else{const{sub1:e,sub2:t}=s;n=[e,t].filter((e=>e))}const i=n.filter((e=>e.subject===Yn))[0];if(i){const e=i.sub1.views,n=e[r].firstChild.parentNode;if(o<r)n.insertBefore(e[o].firstChild,t.item.nextSibling),n.insertBefore(e[r].firstChild,t.item),n.insertBefore(e[r].lastChild,t.item.nextSibling);else{const i=e[o+1];i&&n.insertBefore(i.firstChild,t.item.nextSibling),n.insertBefore(e[r].firstChild,t.item),n.insertBefore(e[r].lastChild,t.item.nextSibling)}this.reorderItems(e,o,r),this.component.getOrUpdateTopSites()}}Je.M0.sendActionEvent(t.item)}},onChange:e=>{this.component.setActiveTopSiteElement(e.item)}})}))}destroy(){this.sortableService&&this.sortableService.destroy(),this.sortableService=null,this.unBindEvents()}}var li=n(851),ui=n.n(li),pi=n(25158),hi=n.n(pi),gi=n(49286),mi=n(91104),fi=n.n(mi),vi=n(18536);const yi="TSNP1.topsites";class Si{constructor(){try{this.storage=window.localStorage}catch(e){}}write(e,t){if(this.storage)try{this.storage[e]=t}catch(e){}}writeJsonKey(e,t){return this.write(e,JSON.stringify(t))}readJsonKey(e,t){var n;const i=null===(n=this.storage)||void 0===n?void 0:n[e];return i?JSON.parse(i):t}getTopSites(){return this.readJsonKey(yi,[])}writeTopSites(e){this.writeJsonKey(yi,e)}}const Ci="TopSitesSmartListsState";let bi=[];function wi(e,t,n){const i=Ti(e);i&&(i.enabled=t,i.isUserSignedIn=n||!1,(0,ce.$o)().setObject(Ci,bi))}function Ti(e){let t;return bi.forEach((n=>{n.experienceType===e&&(t=n)})),t}function ki(e){const t=Ti(e);return!t||t.enabled}function Pi(e){const t=Ti(e);return!!t&&t.isUserSignedIn}function Ai(){const e=(0,ce.$o)().getObject(Ci);return e?(bi&&bi.length||(bi=e),bi):null}function Ii(...e){return bi=[...e]}var Ei,xi=n(47680);!function(e){e[e.initialize=0]="initialize",e[e.render=1]="render",e[e.unmount=2]="unmount",e[e.updateSingInStatus=3]="updateSingInStatus"}(Ei||(Ei={}));var Mi=n(19809),Oi=n(87298),Li=n(26007),Di=n(23547),Ri=n(98429),Fi=n(12884),Bi=JSON.parse('[{"storeName":"Gap ","domain":"gap.com","cashbackInfo":{"value":"4","isPercentage":false,"schemaName":"Retail.CashbackValue","kifMajorVersion":1,"kifMinorVersion":0,"kifMinorVersion2":0}},{"storeName":"Amazon","domain":"amazon.com","cashbackInfo":{"value":"5","isPercentage":true,"schemaName":"Retail.CashbackValue","kifMajorVersion":1,"kifMinorVersion":0,"kifMinorVersion2":0}},{"storeName":"Macys","domain":"macys.com","cashbackInfo":{"value":"","isPercentage":false,"schemaName":"Retail.CashbackValue","kifMajorVersion":1,"kifMinorVersion":0,"kifMinorVersion2":0}}]'),Ni=JSON.parse('{"priceDrops":{"data":[{"clickUrl":"https://www.amazon.com/Dr-Squatch-Mens-Soap-Sampler/dp/B07BQBNV7C/ref=sr_1_22_sspa?crid=1O8A2MCWA9XY6&keywords=dr+squatch&qid=1649030218&sprefix=dr+squatch,aps,53&sr=8-22-spons&psc=1&smid=A2R651JBHM4ZCY&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExMjQ2MTJSM1gwNlFJJmVuY3J5cHRlZElkPUEwNzY5OTUwMjFPUDgxNlFSWUU3TiZlbmNyeXB0ZWRBZElkPUEwMTQ4ODk3MVZQV0FKSVdFTVQzMSZ3aWRnZXROYW1lPXNwX210ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com"},"trendRank":"","id":"","title":"Dr. Squatch All Natural Bar Soap for Men, 5 Bar Variety Pack - Aloe, Alpine Sage, Spearmin, Bay Rum and Grapefruit IPA","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://images-na.ssl-images-amazon.com/images/I/41aJlevN4RS.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"39.95","price":"32.99","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""},{"clickUrl":"https://www.amazon.com/Votatu-VRD501-Co-Witness-Low-Profile-Anti-Reflection/dp/B09MV1F1PV/ref=sr_1_14_sspa?crid=26O7KIBNHKC6I&keywords=airsoft+blue+dot+sight&qid=1647052224&refinements=p_72%3A1248957011&rnid=1248955011&s=sporting-goods&sprefix=airsoft+blue,aps,51&sr=1-14-spons&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEzQzFIUUI0R002WUREJmVuY3J5cHRlZElkPUEwMDU0NjY4MVZUVzJCMllFRlk3NyZlbmNyeXB0ZWRBZElkPUEwOTk3MjU2MTRXMFpWWTZYRTJUJndpZGdldE5hbWU9c3BfbXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ&th=1","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com"},"trendRank":"","id":"","title":"Votatu Red Dot Sight, VRD501 2MOA Auto Off and Motion Awake Red Dot Site with Co-Witness and Low-Profile Mount, Anti-Reflection Device and Flip Up Lens Cover","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://images-na.ssl-images-amazon.com/images/I/41AbIfRCBCL.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"79.99","price":"67.99","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""}],"rank":2},"abandonedCarts":{"data":[{"clickUrl":"https://amazon.com/gp/product/B07LD1NVY6/ref=ox_sc_act_image_1?smid=A115IJ93FOJ777&psc=1","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com","couponsCount":32},"trendRank":"","id":"","title":"Windproof Arc Lighter X Plasma Lighters Rechargeable USB Lighters Candle Lighter-with LED Display Power (Magic)","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://m.media-amazon.com/images/I/31tgF8bG2HS._AC_AA180_.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"0","price":"14.89","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""},{"clickUrl":"https://amazon.com/gp/product/B07QCW3FXZ/ref=ox_sc_act_image_8?smid=ACF1CCU9ZUYCB&psc=1","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com","couponsCount":32},"trendRank":"","id":"","title":"DoppSk Waterproof & Leak-Proof Travel Toiletry Bag | Small, Black","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://m.media-amazon.com/images/I/A1BGJlWrx+L._AC_AA180_.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"0","price":"34.95","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""}],"rank":1}}');const Ui=1e4,$i=!0,_i={ocid:"anaheim-shopping-topsites",apiKey:"ogTIEkUJTNRKfuviV6imfOBW6i874Wsn2XeWZBW83k",$select:"BatchStoresCashbackWorkflow"};function Hi(){return"1"===Li.c.getParamsObj((0,Fi.zp)()).vptest}function Wi(e){var t,n;try{(null===(n=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.ntpSettingsPrivate)||void 0===n?void 0:n.recordShoppingUserEngagement)&&window.chrome.ntpSettingsPrivate.recordShoppingUserEngagement(e,(()=>{}))}catch(e){(0,Ke.OO)(e,ze.V5U,"Unable to send user engagement")}}function ji(){var e,t;(null===(t=null===(e=null===window||void 0===window?void 0:window.chrome)||void 0===e?void 0:e.ntpSettingsPrivate)||void 0===t?void 0:t.ShoppingEngagement)&&(window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_CLICK?Wi(window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_CLICK):window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_HOVER&&Wi(window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_HOVER))}function Gi(e){return new Promise((t=>{var n,i;Hi()?t(!0):(null===(i=null===(n=null===window||void 0===window?void 0:window.chrome)||void 0===n?void 0:n.ntpSettingsPrivate)||void 0===i?void 0:i.getPref)?window.chrome.ntpSettingsPrivate.getPref(e,(n=>{t(n&&n.key===e?n.value:null)})):t(null)}))}function Vi(e,t,n){var i,r,o,a,s;return(0,c.mG)(this,void 0,void 0,(function*(){const d=new Map;if(!Hi())if(n&&t){const t=yield function(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{const t={method:"GET",credentials:"include",headers:yield Mi.$D.getOneServiceHeaders()},n=qi(e),i=yield(0,Oi.w)((()=>(0,c.mG)(this,void 0,void 0,(function*(){const e=yield fetch(n,t);if(!e)throw Error(`Null response. Url = ${n}`);if(!e.ok)throw Error(`Status:${e.status} Url = ${n}`);return e.json()}))),"getShoppingDataFromOneService",Ui,$i);if(!(i&&i.length&&i[0]&&i[0].data))throw new Error(`Null, empty or invalid response Json. Url = ${n}`);const r={cashbackData:null,userData:null};return i.forEach((e=>{"BatchStoresCashback"===e.type?r.cashbackData=JSON.parse(e.data):"EdgeShoppingCard"===e.type&&(r.userData=JSON.parse(e.data))})),r}catch(e){return null}}))}(e),n=null==t?void 0:t.userData,a=null==t?void 0:t.cashbackData;let s=[],l=[];(null===(i=null==n?void 0:n.abandonedCarts)||void 0===i?void 0:i.data)&&n.abandonedCarts.data.length>0&&(s=null===(r=null==n?void 0:n.abandonedCarts)||void 0===r?void 0:r.data),(null===(o=null==n?void 0:n.priceDrops)||void 0===o?void 0:o.data)&&n.priceDrops.data.length>0&&(l=n.priceDrops.data),zi(s,l,a,d)}else{zi([],[],yield function(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{const t={method:"GET",credentials:"include",headers:yield Mi.$D.getOneServiceHeaders()},n=qi(e),i=yield(0,Oi.w)((()=>(0,c.mG)(this,void 0,void 0,(function*(){const e=yield fetch(n,t);if(!e)throw Error(`Null response. Url = ${n}`);if(!e.ok)throw Error(`Status:${e.status} Url = ${n}`);return e.json()}))),"getCashbackDataFromOneService",Ui,$i);if(!(i&&i.length&&i[0]&&i[0].data))throw new Error(`Null, empty or invalid response Json. Url = ${n}`);return JSON.parse(i[0].data)}catch(e){return null}}))}(e),d)}return function(){const e=Li.c.getParamsObj((0,Fi.zp)());return"1"===e.test||"1"===e.vptest}()&&zi(null===(a=null==Ni?void 0:Ni.abandonedCarts)||void 0===a?void 0:a.data,null===(s=null==Ni?void 0:Ni.priceDrops)||void 0===s?void 0:s.data,Bi,d),d}))}function qi(e){const t=de.jG.CurrentMarket;if("en-us"!=t)throw new Error(`Unsuported market ${t}`);const n=new URL("https://assets.msn.com/service/segments/recoitems/shopping"),i=new Di.h;for(const e in _i){const t=_i[e];i.set(e,t)}const r=(0,Ri.pW)();return i.set("activityId",r),i.set(de.jG.OneServiceContentMarketQspKey,t),i.set("$filter",e.join(",")),n.search=i.toString(),n.href}function zi(e,t,n,i){return(null==e?void 0:e.length)>0&&function(e,t){t.forEach((t=>{const n=t.storeInfo.domain;let i=Qi(n);if(e.has(n)&&(i=e.get(n)),""===i.abandonedCart.webLink){const e=new URL(`https://${n}`);i.abandonedCart.webLink=e.toString()}if(i.abandonedCart.numberOfItems=i.abandonedCart.numberOfItems+1,2==i.abandonedCart.cartItems.length)return void e.set(n,i);let r=t.priceInfo.priceCurrencySymbol;"%24"===r&&(r="$");const o=+t.priceInfo.price,a={imgSrc:t.imageInfo.sourceImageUrl,title:t.title,price:`${r}${o.toFixed(2)}`,webLink:t.clickUrl,cartItemAriaLabel:""};a.cartItemAriaLabel=`${a.title} ${a.price}`,i.abandonedCart.cartItems.push(a),e.set(n,i)}))}(i,e),(null==t?void 0:t.length)>0&&function(e,t){t.forEach((t=>{const n=t.storeInfo.domain;let i=Qi(n);if(e.has(n)&&(i=e.get(n),2==i.priceDrops.priceDropItems.length))return;let r=t.priceInfo.priceCurrencySymbol;"%24"===r&&(r="$");const o=+t.priceInfo.price,a=+t.priceInfo.originalPrice,s=a-o,c={imgSrc:t.imageInfo.sourceImageUrl,title:t.title,newPrice:`${r}${o.toFixed(2)}`,oldPrice:`${r}${a.toFixed(2)}`,priceDropValue:`${r}${s.toFixed(2)}`,webLink:t.clickUrl,priceDropAriaLabel:""};i.priceDrops.priceDropItems.push(c),e.set(n,i)}))}(i,t),n&&n.length&&function(e,t){t.forEach((t=>{if(t.cashbackInfo.value.length>0){const n=t.domain;let i=Qi(n);e.has(n)&&(i=e.get(n));const r=new URL(`https://www.bing.com/rebates/details?merchant=${t.storeName}&redref=amc`),o=parseFloat(t.cashbackInfo.value),a=1==t.cashbackInfo.isPercentage?`${o}%`:`$${o.toFixed(2)}`,s={retailer:t.storeName,cashbackValue:a,urlLink:r.toString(),cashbackTextStart:"",cashbackTextEnd:""};i.cashBackInfo=s,e.set(n,i)}}))}(i,n),i}function Qi(e){return{domain:e,dialogBoxAriaLabel:"",abandonedCart:{heading:"",cartItems:[],numberOfItems:0,buttonText:"",webLink:""},priceDrops:{heading:"",priceDropItems:[]},cashBackInfo:{retailer:"",cashbackValue:"",urlLink:"",cashbackTextStart:"",cashbackTextEnd:""}}}var Zi=n(93450),Ki=n(85663),Ji=n(11974);function Xi(e){if(!e)return;let t=Yi(e=(0,Ji.Z)(e).replace(/^[\b\n\r]*/,""));return t&&t.href.toLocaleUpperCase().startsWith(e.toLocaleUpperCase())||pe.test(e)||(t=Yi("https://"+e)),t&&t.host&&pe.test(t.protocol)&&Li.c.isValidUrl(t.href,!0)?t:void 0}function Yi(e){try{return new URL(e)}catch(e){return}}var er=n(24169),tr=n(7781),nr=n(33379),ir=n(82423),rr=n(1584);const or={lightMode:"https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/Preview.svg",darkMode:"https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/PreviewDark.svg"},ar="removedTopSiteUrls";class sr extends er.l{constructor(){super(...arguments),this.dataHelper=new Si,this.marqueeAdActive=!1,this.extraAddedSitesClassName="",this.currentNumberOfTopSitesReturnedByClient=0,this.topSitesEndMarginUsedPadding=0,this.enableOfficeComCurated=!1,this.isActionMenuOpen=!1,this.isEditDialogOpen=!1,this.isUndoToastOpen=!1,this.isPinToastOpen=!1,this.topSiteMapper=new Map,this.topSites=[],this.moveUpward=!1,this.topSiteAddedSuccessfully=!1,this.addTopSiteDialogListener=!1,this.editTopSiteDialogListener=!1,this.shouldAddSeeAllLinksInFavoritesHubButton=!1,this.numberPromotedSites=0,this.disablePromoteTopSites=!1,this.isDisableDefaultInProgress=!1,this.getUserSelectedSetting=()=>this.userSelectedSetting,this.setActiveTopSiteElement=e=>{this.activeTopSiteElement=e},this.overflowItems=[],this.showMenu=!1,this.isOverflowing=!1,this.isOnImage=!0,this.renderTopSiteStartAndEnd=!1,this.closeFlyouts=(0,Te.k)((()=>{this.isActionMenuOpen&&this.toggleActionMenu(null),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog()}),400),this.closeUndoToast=(e=!1)=>{var t;this.isUndoToastOpen=!1,this.isPinToastOpen=!1,e&&(0,ke.Gg)(ke.tk.toast,!1),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog(),null===(t=this.activeContextMenuButtonElement)||void 0===t||t.focus()},this.getOrUpdateTopSites=()=>{var e,t;this.topSites=(0,nr.N)()&&this.config.optimization?this.getTopSitesNext():this.getTopSites(),this.currentTilesNumber=null!==(t=null===(e=this.topSites)||void 0===e?void 0:e.length)&&void 0!==t?t:0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders(),this.userSelectedSetting===l.Z3.top&&window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.calcTopSitesToTopOverflowItems()}),10)}))},this.handleClick=e=>{this.isActionMenuOpen&&(!this.topSiteActionsMenu||this.topSiteActionsMenu.contains(e.target)||this.activeContextMenuButtonElement.contains(e.target)||!e.composedPath()||e.composedPath().includes(this.activeContextMenuButtonElement)||this.toggleActionMenu(this.activeTopSiteItem,e)),this.topSites&&this.topSites.length>0&&this.ShowPinningWizardCampaign()},this.handleTopSiteHover=(e,t=!0,n=!1)=>i=>{var r,o;if((null===(r=this.config)||void 0===r?void 0:r.enableHoverTelemetry)&&t&&i){const e=vi.u.get(i.target);if(e&&e.contract){const t=e.contract;t.overrideDestinationUrl=Ft,t.content&&(t.content.headline=Rt.tsn),vi.u.setAttribute(i.target,t),Je.M0.sendActionEvent(i.target,Xe.Aw.Hover)}}if((null===(o=this.config)||void 0===o?void 0:o.enableHoverTelemetry)&&!t&&i){const e=vi.u.get(i.target);if(e&&e.contract){const t=e.contract;t.overrideDestinationUrl=Ft,t.content&&(t.content.headline=Rt.tsn),vi.u.setAttribute(i.target,t),Je.M0.sendActionEvent(i.target,Xe.Aw.MouseLeave)}}if(this.topSitesSmartListManager.shouldRenderSmartList){if(this.topSitesSmartListManager.isSharedLinksSmartList(e)&&this.isActionMenuOpen)return;if(this.topSitesSmartListManager.hoverTopSite(e,t,i),this.topSitesSmartListManager.hasSmartList(e)&&i.target&&"mouseleave"!==i.type){const t=vi.u.get(i.target);if(t&&t.contract){const r=t.contract;r.overrideDestinationUrl=Ft,r.content&&(n?r.content.headline=_e.x.edgeShopping:this.topSitesSmartListManager.isSharedLinksSmartList(e)?r.content.headline=_e.x.sharedLinks:r.content.headline=e.toString()),vi.u.setAttribute(i.target,r),Je.M0.sendActionEvent(i.target,Xe.Aw.Hover,Xe.wu.Show)}}}},this.onMostVisitedHandler=()=>{this.getOrUpdateTopSites()},this.pinAction=(e,t)=>{var n,i;if(1===e.dragDropType&&((null===(n=this.config)||void 0===n?void 0:n.enableAllPin)||this.dragDropService&&"slot"in e))return e.dragDropType=-1,this.togglePinToast({toastText:this.strings.unpinConfirmationMessage,toastDisplayMs:T,tileTitle:e.title}),this.dragDropService.updateTopSites(e),this.getOrUpdateTopSites(),void this.dragDropService.addUnpinnedTopSite(e);if(this.activeTopSiteItem=e,null===(i=this.config)||void 0===i?void 0:i.enableAllPin){e.dragDropType=1;let t=Object.assign({},e);t=Object.assign(Object.assign({},e),{slot:this.findActiveSiteIndex(e)}),this.dragDropService.addTopSite(t),this.togglePinToast({toastText:this.strings.pinConfirmationMessage,toastDisplayMs:T,tileTitle:e.title}),this.getOrUpdateTopSites()}},this.toggleActionMenu=(e,t)=>{var n;this.activeTopSiteElement=!this.isActionMenuOpen&&t?t.currentTarget.parentElement.parentElement:this.activeTopSiteElement,this.activeTopSiteItem=e,this.isActionMenuOpen?window.removeEventListener("scroll",this.closeFlyouts):(window.addEventListener("scroll",this.closeFlyouts),t&&t.currentTarget&&vi.u.addElement(t.currentTarget),this.topSiteActionTelemetryContext&&this.activeTopSiteItem&&(this.topSiteActionTelemetryContext=((e,t)=>{let n;switch(t.tileSource){case 4:case 3:n=tt;break;case-5:n=et;break;case-6:n=it;break;case-7:n=rt;break;case-4:n=ot;break;case-8:n=at;break;case 2:n=st;break;default:n=nt}const{removeTopSite:i,editDialog:r,closeEditDialog:o,saveEdit:a,cancelEdit:s,turnOffPreview:c,turnOnPreview:d,pinningTopSiteInQuickLinks:l}=e;return i.contract.name=`${n}_${pt}`,r.contract.name=`${n}_${ft}`,o.contract.name=`${n}_${St}_${gt}`,a.contract.name=`${n}_${St}_${vt}`,s.contract.name=`${n}_${St}_${mt}`,c.contract.name=`${n}_${Pt}`,d.contract.name=`${n}_${kt}`,l.contract.name=`${n}_${Et}`,e})(this.topSiteActionTelemetryContext,this.activeTopSiteItem)),this.actionsMenuProps=this.generateActionsMenuProps(),this.activeContextMenuButtonElement=t.currentTarget,(null===(n=this.topSitesSmartListManager)||void 0===n?void 0:n.isSharedLinksSmartList(e.rid))&&this.topSitesSmartListManager.hoverTopSite(e.rid,!1,t)),this.isActionMenuOpen=!this.isActionMenuOpen,(0,ke.Gg)(ke.tk.actionMenuOpen,this.isActionMenuOpen)},this.toggleAddDialog=e=>{if(this.activeTopSitePlaceholderElement=!this.isAddDialogOpen&&e?e.currentTarget.parentElement.parentElement:null,this.isAddDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&vi.u.addElement(e.currentTarget);const t=document.dir===hn.N.ltr,n=this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0?p:u,i=this.userSelectedSetting===l.Z3.top,r=i?this.oneLineTopSitesContainer:this.topSitesRoot,o=qt(i?this.oneLineTopSitesContainer:this.activeTopSitePlaceholderElement,r,n,document.documentElement.clientWidth,document.documentElement.clientHeight,t,i);this.topSiteAddDialogContainerPosition=o}this.isAddDialogOpen=!this.isAddDialogOpen,this.isAddDialogOpen||(this.isEditDialogOpen&&this.toggleEditDialog(),this.isUndoToastOpen&&this.toggleUndoToast()),(0,ke.Gg)(ke.tk.addTopSite,this.isAddDialogOpen),this.topSiteAddDialog.newOrUpdatedTopSite={name:"",url:""}},this.toggleSeeAllLinksInFavoritesHubButton=()=>{window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.Hub&&window.chrome.ntpSettingsPrivate.openHub&&window.chrome.ntpSettingsPrivate.openHub(window.chrome.ntpSettingsPrivate.Hub.FAVORITES)},this.updateSmartListStateHandler=(e,t)=>{t?this.topSitesSmartListManager.enableSmartList(e):this.topSitesSmartListManager.disableSmartList(e),function(e){e?je.H.logEventWithTimestamp(je.v.NTP_SMARTLIST_ENABLED,Pe.Al.IsPrerender):je.H.logEventWithTimestamp(je.v.NTP_SMARTLIST_DISABLED,Pe.Al.IsPrerender)}(t)},this.saveTopSitesTP1Data=()=>{this.dataHelper.writeTopSites(this.topSites)},this.onBreakpointCallback=e=>{this.columnArrangement=e,this.reRenderTopsite()},this.getCurrentLayoutConfig=()=>{var e,t,n,i;const r=null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.selectedFeedDisplaySetting,o=this.userSelectedSetting&&this.userSelectedSetting!==l.Z3.off?this.userSelectedSetting:l.Z3.onerow;let a=this.tilesxColxRowsMap;this.config.hidableSearchBox&&this.moveUpward&&!(null===(t=this.config)||void 0===t?void 0:t.enableF3V1SameWidth)&&(this.searchBoxHiddenTilesxColxRowsMap||this.setUpSearchBoxHiddenTilesColxRowsMap(),a=this.searchBoxHiddenTilesxColxRowsMap);const s=a[o];if(!s)return Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.A$C),{message:"Can't find layout config for topsites",pb:Object.assign(Object.assign({},ze.A$C.pb),{userSelectedSetting:this.userSelectedSetting,chromiumPageSettingStatePresent:!!this.chromiumPageSettingState,selectedQuickLinksDisplaySetting:null===(n=this.chromiumPageSettingState)||void 0===n?void 0:n.selectedQuickLinksDisplaySetting})})),null;const c=s[this.columnArrangement];return null!==(i=c[r])&&void 0!==i?i:c.default},this.onResize=()=>{this.closeFlyouts(),this.userSelectedSetting===l.Z3.top&&this.calcTopSitesToTopOverflowItems()},this.toggleOverflowMenu=e=>{let t,n;switch(e){case _.AllQuickLinksButton:t=this.allQuickLinksButton,n="start";break;case _.SeeMoreButton:t=this.seeMoreButton,n="end";break;default:n="end"}if(!0===this.showMenu&&t!=this.toggleEle&&this.hideOverflowMenu(),!0===this.showMenu)this.toggleEle=null,this.overflowMenuClass="",this.hideOverflowMenu();else{if(this.toggleEle=t,this.overflowMenuClass=n,this.config.enableOneLineTopSitesPillShape&&this.overflowPanelContainer){const e=this.toggleEle&&this.oneLineTopSitesContainer?this.oneLineTopSitesContainer.offsetWidth-this.toggleEle.offsetLeft-this.toggleEle.offsetWidth:0;document.dir===hn.N.ltr?this.overflowPanelContainer.style.right=e>8?e+"px":"8px":this.overflowPanelContainer.style.left=e>8?e+"px":"8px"}this.showOverflowMenu()}},this.onClickOutside=e=>{const t=e.composedPath();t&&t.includes(this.toggleEle)||this.isActionMenuOpen||t.includes(this.dialogRoot)||t.includes(this.oneLineTopSitesContainer)||t.includes(this.overflowPanelContainer)||this.hideOverflowMenu()},this.onScrollOutside=(0,tn.Z)((()=>{this.hideOverflowMenu()}),200),this.onKeyDown=e=>{const{code:t}=e;"Escape"===t&&this.hideOverflowMenu()}}experienceConnected(){var e,t,n,i,r;return(0,c.mG)(this,void 0,void 0,(function*(){(0,Qe.Ou)().TopSitesConnected=null===performance||void 0===performance?void 0:performance.now();const o=!Pe.Al.IsPrerender;if(this.config.enableWpoTopSitesConfigOverride){const e=(0,rr.DU)();e&&(this.config.disableWPORecommendedSites&&(e.recommendedSites=[],e.enableRecommendedSites=!1),this.config=Object.assign(Object.assign({},this.config),e))}this.topSitesContainerPromise=new Promise((e=>this.topSitesContainerPromiseResolver=e)),this.dragDropService||this.initializeDragDropService(),this.topSiteMenuItems=[{id:l.Z3.off,title:this.strings.offOption||""},{id:l.Z3.onerow,title:this.strings.quickLinks1Row||""},{id:l.Z3.tworows,title:this.strings.quickLinks2Rows||""},{id:l.Z3.top,title:this.strings.quickLinksTop||""}],this.config.enableUnifiedTopSitesTwoLinesOption&&(this.strings.quickLinksMiddle&&(this.topSiteMenuItems[2].title=this.strings.quickLinksMiddle),this.topSiteMenuItems.splice(1,1)),o&&(this.topSites=this.dataHelper.getTopSites()),this.isTP1DataUsed=o&&this.topSites.length>0,this.isTP1DataUsed?(yield this.waitForSelectedQuickLinksReady(),this.chromiumPageSettingState=(0,ir.K0)(He.z.ChromiumPageSettings).getCurrentState(),this.userSelectedSetting=this.chromiumPageSettingState.selectedQuickLinksDisplaySetting||this.selectedQuickLinksDisplaySetting,(0,Qe.Ou)().TopSitesConnectedFirstGetTopSites=null===performance||void 0===performance?void 0:performance.now(),(0,nr.N)()&&(0,sn.eC)().then((()=>je.H.logEventWithTimestamp(je.v.NTP_ALL_TILES_LOADED,Pe.Al.IsPrerender)))):yield this.subscribeToChromiumPageState(),this.columnArrangement=(0,xe.Bn)().currentColumnArrangement,this.numberPromotedSites=this.config.promoteCurated;const a=(0,ce.$o)().getItem(x),s=Number(null==a?void 0:a);if(this.disablePromoteTopSites=!isNaN(s)&&0===s,!this.disablePromoteTopSites&&this.numberPromotedSites>s&&(this.numberPromotedSites=s),this.enableSixteenTopSites?(this.maxTiles=m,this.extraAddedSitesClassName=this.userSelectedSetting===l.Z3.tworows&&this.columnArrangement>="c4"?null:F.tenSites):(this.maxTiles=g,this.extraAddedSitesClassName=F.eightSites),this.config.enableOneColumn&&this.columnArrangement===d.K$.c1&&(this.extraAddedSitesClassName=F.sixSites),this.userSelectedSetting===l.Z3.top&&(this.maxTiles=100),null===(e=(0,ir.K0)(He.z.TopSitesLayoutData))||void 0===e||e.updateMaxTiles(this.maxTiles),this.pageSettingsConnector=(0,ir.K0)(He.z.ChromiumPageSettings),this.config.hidableSearchBox&&this.pageSettingsConnector){const e=null===(t=this.pageSettingsConnector)||void 0===t?void 0:t.getCurrentState();this.moveUpward=(null==e?void 0:e.hideSearchBox)&&"always"===(null==e?void 0:e.selectedFeedDisplaySetting)}if(this.isTP1DataUsed){const e=this.getCurrentLayoutConfig();e&&(this.maxTiles=e.tile,this.extraAddedSitesClassName=e.class),this.topSites.length>=this.maxTiles&&(this.topSites=this.topSites.slice(0,this.maxActualTile))}const u=window;u.chrome&&u.chrome.embeddedSearch&&(this.ntpApiHandle=u.chrome.embeddedSearch.newTabPage);const p=this.config?this.config.smartListConfig:null;this.topSitesSmartListManager=class{constructor(e,t){this.$updateTopSitesHandler=t,this.$smartListConfig=e,this.validateConfigAndSetEnableState(),this.$enabled&&(this.$smartListStorageState=Ai(),this.$smartListSharedConnector=this.getSmartListSharedConnector(),this.startSmartListObservers())}get shouldRenderSmartList(){return this.$enabled}get smartListBadgePropsMap(){return this.$smartListBadgePropsMap}static getInstance(e,t){return this.$instance||(this.$instance=new this(e,t))}static deInit(){this.$instance=void 0}disableSmartList(e){if(!this.$enabled||!e||!this.$topSiteSmartListMap)return;const t=this.$topSiteSmartListMap.get(e);t&&(t.enabled=!1,wi(t.experienceType,!1),this.$updateTopSitesHandler())}enableSmartList(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)))return;const t=this.$topSiteSmartListMap.get(e);t&&!t.enabled&&(t.enabled=!0,wi(t.experienceType,!0),t.experienceType===_e.x.edgeShopping?this.initEdgeShoppingSmartlist():this.tryInitSmartList(t.experienceType),this.$updateTopSitesHandler())}getSmartListSignInStatus(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)))return;const t=this.$topSiteSmartListMap.get(e);return t?t.isUserSignedIn:void 0}hoverTopSite(e,t=!0,n){if(this.$enabled&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.has(e)){const i=this.$topSiteSmartListMap.get(e),r=n.currentTarget;i&&i.enabled&&(t?this.executeSmartListCallback(i.experienceType,Ei.render,r):this.executeSmartListCallback(i.experienceType,Ei.unmount,r))}}mapMostVisitedDataToSmartLists(e,t){var n;if(this.$enabled&&(this.$topSiteSmartListMap=new Map,e.forEach((e=>{const t=this.trimUrl(e.url);Object.values(this.$smartListConfig.smartLists).forEach((n=>{this.getSmartList(n.experienceType)||n.identifierHosts.every((i=>{if(0===t.indexOf(i)||this.checkAndStampIfIsSharedLinks(n,i,e)){const t=!this.$smartListStorageState||ki(n.experienceType);return this.$topSiteSmartListMap.set(e.rid,{experienceType:n.experienceType,enabled:t,isSignInAvailable:!(0,Ki.isNullOrUndefined)(n.isSignInAvailable)&&n.isSignInAvailable,isUserSignedIn:!!this.$smartListStorageState&&Pi(n.experienceType)}),this.tryInitSmartList(n.experienceType),!1}return!0}))}))})),this.$smartListStorageState=Ii(...this.$topSiteSmartListMap.values()),this.edgeShoppingSmartlistConfigEnabled()&&(Je.M0.addOrUpdateTmplProperty("ShoppingSmartlistsHasConfigEnabled","1"),t||this.fetchShopingDataForTopSites(e),(null===(n=this.$shoppingSmartListData)||void 0===n?void 0:n.size)>0))){const t=Array.from(this.$shoppingSmartListData.keys()),n=e.filter((e=>{var n;const i=null===(n=Xi(e.url))||void 0===n?void 0:n.hostname.replace("www.","");return t.includes(i)}));if(n&&n.length>0){const e=!this.$smartListStorageState||ki(_e.x.edgeShopping),t={experienceType:_e.x.edgeShopping,enabled:e,isSignInAvailable:!1,isUserSignedIn:!!this.$smartListStorageState&&Pi(_e.x.edgeShopping)};this.$smartListStorageState=Ii(...this.$topSiteSmartListMap.values(),t),n.forEach((e=>{e.hasEdgeShoppingSmartlist=!0,this.$topSiteSmartListMap.set(e.rid,t)})),this.initEdgeShoppingSmartlist()}}}checkAndStampIfIsSharedLinks(e,t,n){return e.experienceType===_e.x.sharedLinks&&t===n.url&&(Je.M0.addOrUpdateTmplProperty("SharedLinksTSEnabled","1"),!0)}moveFocusToSmartList(e,t){if(this.$enabled&&this.$topSiteSmartListMap){if(this.$topSiteSmartListMap.has(e)){const n=this.$topSiteSmartListMap.get(e);if(n&&n.enabled&&this.$smartListSharedConnector)return this.$smartListSharedConnector.moveFocusToSmartList(n.experienceType,t)}return!1}}signInSmartList(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)))return;const t=this.$topSiteSmartListMap.get(e);t&&t.isSignInAvailable&&!Pi(t.experienceType)&&(t.isUserSignedIn=!0,wi(t.experienceType,t.enabled,!0),this.executeSmartListCallback(t.experienceType,Ei.updateSingInStatus,!0))}signOutSmartList(e){if(!this.$enabled||!e||!this.$topSiteSmartListMap)return;const t=this.$topSiteSmartListMap.get(e);t&&t.isSignInAvailable&&Pi(t.experienceType)&&(t.isUserSignedIn=!1,wi(t.experienceType,t.enabled,!1),this.executeSmartListCallback(t.experienceType,Ei.updateSingInStatus,!1))}getEnabledSmartList(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.has(e)))return null;const t=this.$topSiteSmartListMap.get(e);return t.enabled?t:null}hasSignInAvailable(e){return!!(this.$enabled&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)&&this.$topSiteSmartListMap.get(e).isSignInAvailable)}hasSmartList(e){return!!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e))}isTopBookmarksSmartList(e){var t;return!(!this.$enabled||!(null===(t=this.$topSiteSmartListMap)||void 0===t?void 0:t.get(e)))&&this.$topSiteSmartListMap.get(e).experienceType===_e.x.topSitesBookmarks}isSharedLinksSmartList(e){var t;return!(!this.$enabled||!(null===(t=this.$topSiteSmartListMap)||void 0===t?void 0:t.get(e)))&&this.$topSiteSmartListMap.get(e).experienceType===_e.x.sharedLinks}executeSmartListCallback(e,t,n){if(this.$smartListSharedConnector)switch(t){case Ei.initialize:e===_e.x.edgeShopping?this.$smartListSharedConnector.initSmartList(e,n):this.$smartListSharedConnector.initSmartList(e);break;case Ei.render:this.$smartListSharedConnector.renderSmartList(e,n);break;case Ei.unmount:this.$smartListSharedConnector.unmountSmartList(e,n);break;case Ei.updateSingInStatus:this.$smartListSharedConnector.updateSignInStatus(e,n)}}tryInitSmartList(e,t){if(!this.isSmartListEnabled(e)||!this.$smartListSharedConnector)return;const n=this.$smartListSharedConnector.getCurrentState().smartLists;n&&0!==n.size&&this.executeSmartListCallback(e,Ei.initialize,t)}getSmartListSharedConnector(){return Zi._.getInstance().rootReducer.connector(He.z.SmartListSharedData)}isSmartListEnabled(e){const t=this.getSmartList(e);return!(!t||!t.enabled)}getSmartList(e){for(const[t,n]of this.$topSiteSmartListMap)if(n.experienceType===e)return n;return null}validateConfigAndSetEnableState(){this.$smartListConfig&&this.$smartListConfig.enabled&&this.$smartListConfig.smartLists&&0!==Object.entries(this.$smartListConfig.smartLists).length?this.$enabled=!0:this.$enabled=!1}trimUrl(e){let t;try{t=new URL(e)}catch(e){return""}let n=t.host?t.host:"";return n=n.replace(/^(www\.)?/i,""),`${n}${t.pathname?t.pathname:""}`}updateSmartListBadgeProps(e,t){this.$smartListBadgePropsMap||(this.$smartListBadgePropsMap=new Map),this.$smartListBadgePropsMap.set(e,t)}observeSmartListRegistrations(){this.$smartListSharedConnector&&xi.j.registerSmartList.registerObserver((e=>{if(!e.params&&!e.params[0])return;const t=e.params[0];t.experienceType===_e.x.edgeShopping?this.initEdgeShoppingSmartlist():this.tryInitSmartList(t.experienceType)}))}observeSmartListBadgePropUpdate(){this.$smartListSharedConnector&&xi.j.updateSmartListBadgeProps.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],n=e.params[1];this.getSmartList(t)&&(this.updateSmartListBadgeProps(t,n),this.$updateTopSitesHandler())}))}observeSmartListDisable(){this.$smartListSharedConnector&&xi.j.disableSmartList.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],n=this.getSmartList(t);if(n)for(const[e,t]of this.$topSiteSmartListMap)if(t===n)return void this.disableSmartList(e)}))}observeSmartListUpdateSignInState(){this.$smartListSharedConnector&&(xi.j.userSignInSignature.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],n=this.getSmartList(t);if(n)for(const[e,t]of this.$topSiteSmartListMap)if(t===n)return void this.signInSmartList(e)})),xi.j.userSignOutSignature.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],n=this.getSmartList(t);if(n)for(const[e,t]of this.$topSiteSmartListMap)if(t===n)return void this.signOutSmartList(e)})))}startSmartListObservers(){this.observeSmartListRegistrations(),this.observeSmartListBadgePropUpdate(),this.observeSmartListDisable(),this.observeSmartListUpdateSignInState()}initEdgeShoppingSmartlist(){var e;if((null===(e=this.$shoppingSmartListData)||void 0===e?void 0:e.size)>0){const e=Array.from(this.$shoppingSmartListData.values());this.tryInitSmartList(_e.x.edgeShopping,JSON.stringify(e))}}edgeShoppingSmartlistConfigEnabled(){return!!this.$smartListConfig.smartLists.EdgeShopping}fetchShopingDataForTopSites(e){var t;return(0,c.mG)(this,void 0,void 0,(function*(){if(!(yield Gi("edge_shopping_assistant_enabled")))return;if(Je.M0.addOrUpdateTmplProperty("HasShoppingPreference","1"),!(yield Gi("shopping.allow_personalized_shopping")))return;Je.M0.addOrUpdateTmplProperty("HasShoppingReminders","1");const n=e.reduce(((e,t)=>{const n=Xi(t.url);return n&&e.push(n.toString()),e}),[]),i=yield(r=n,new Promise((e=>{var t,n;Hi()?e(["https://www.amazon.com"]):(null===(n=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.edgeShoppingPrivate)||void 0===n?void 0:n.getShoppingDomainsEligibility)?window.chrome.edgeShoppingPrivate.getShoppingDomainsEligibility(r,(t=>{t&&Object.keys(t).length>0?e(Object.keys(t)):e([])})):e(null)})));var r;if(!i||!Array.isArray(i)||0===i.length)return;Je.M0.addOrUpdateTmplProperty("HasShoppingDomain","1");const o=null!==(t=yield Gi("user_experience_metrics.personalization_data_consent_enabled"))&&void 0!==t&&t,a=o?"1":"0";Je.M0.addOrUpdateTmplProperty("HasSanConsent",a);const s=i.map((e=>{var t;return null===(t=Xi(e))||void 0===t?void 0:t.hostname.replace("www.","")})).filter(Boolean),c=s.filter(((e,t)=>s.indexOf(e)===t)),d=yield Vi(c,o,this.$smartListConfig.useNewShoppingApi);this.$shoppingSmartListData=d,d.size>0?(Je.M0.addOrUpdateTmplProperty("HasShoppingDataForTopSites","1"),this.mapMostVisitedDataToSmartLists(e,!0)):Je.M0.addOrUpdateTmplProperty("HasShoppingDataForTopSites","0")}))}}.getInstance(p,this.getOrUpdateTopSites),this.ntpApiHandle&&(this.ntpApiHandle.onmostvisitedchange=this.onMostVisitedHandler);const h=this.getOverrideIconList();if(h&&h.length>0&&h.forEach((e=>{e.identifierHosts.forEach((t=>{var n;this.topSiteMapper.set(t,null!==(n=e.faviconUrl)&&void 0!==n?n:Ce(e.faviconId))}))})),this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0&&(this.config.suggestedTopSiteList=((e,t)=>{if(!e)return t;for(const n of t){const t=e.addOrUpdateChild({name:`${wt}_${Ct}_${yt}`,behavior:Xe.wu.Save,content:{headline:Rt.suggestedLink,type:Xe.uH.TopSites},overrideDestinationUrl:Ft,type:Xe.c9.ActionButton});n.suggestedLinkTelemetryTag=t.getMetadataTag()}return t})(this.telemetryObject,this.config.suggestedTopSiteList)),this.initializeTopSitesState(),this.minimumTopSites=g-1,!(0,nr.N)()){const e=this.getCurrentLayoutConfig();return this.maxTiles=e.tile,this.extraAddedSitesClassName=e.class,void this.getOrUpdateTopSites()}this.isTP1DataUsed?(this.currentTilesNumber=null!==(i=null===(n=this.topSites)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()):(this.getOrUpdateTopSites(),(0,Qe.Ou)().TopSitesConnectedFirstGetTopSites=null===performance||void 0===performance?void 0:performance.now(),(0,nr.N)()&&(0,sn.eC)().then((()=>je.H.logEventWithTimestamp(je.v.NTP_ALL_TILES_LOADED,Pe.Al.IsPrerender)))),this.topSiteAddDialog=this.generateTopSiteAddDialogProps(),this.topSiteAddedSuccessfully=!1,this.topSiteEditDialog=this.generateTopSiteEditDialogProps(),this.actionsMenuProps=this.generateActionsMenuProps(),this.isOnImage=null===(r=this.pageSettingsConnector)||void 0===r?void 0:r.getCurrentState().imageOfTheDayEnabled,(0,on.FY)(an._.topSites,this),Promise.all([(0,Ze.b1)(),(0,cn.lr)()]).then((()=>{Xt(this.ntpApiHandle,this.config.enableTelemetryTopSite)}))}))}subscribeToChromiumPageState(){return(0,c.mG)(this,void 0,void 0,(function*(){const e=new Me.o;(0,ln.Uo)(He.z.ChromiumPageSettings,(t=>{if(!t.isLoadCompleted)return;e.set(),this.chromiumPageSettingState=t,t&&t.configData&&t.configData.enabledFeatures&&(this.enableOfficeComCurated=t.configData.enabledFeatures.includes("msNtpNoClientCuratedSites"));const n=t&&t.selectedQuickLinksDisplaySetting;if(this.enableSixteenTopSites&&this.userSelectedSetting!==n&&(this.userSelectedSetting&&(this.userSelectedSettingCheck=!0,this.userSelectedSetting=n,this.userSelectedSetting===l.Z3.tworows?this.maxTiles=m:this.userSelectedSetting===l.Z3.top&&(this.maxTiles=100),this.getOrUpdateTopSites()),this.userSelectedSetting=n),this.config.hidableSearchBox){const e=t.hideSearchBox&&"always"===t.selectedFeedDisplaySetting;this.moveUpward!==e&&(this.moveUpward=e)}this.chromiumPageSettingLayoutState&&this.chromiumPageSettingLayoutState!=t&&this.reRenderTopsite(),this.topSiteSelectedItem=this.topSiteMenuItems.find((e=>e.id===this.userSelectedSetting)),this.chromiumPageSettingLayoutState=t,this.isOnImage=t.imageOfTheDayEnabled,this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding&&this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding!=this.topSitesEndMarginUsedPadding&&(this.topSitesEndMarginUsedPadding=this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding),Je.M0.addOrUpdateTmplProperty("tsLayout",`${this.userSelectedSetting}`),Je.M0.addOrUpdateTmplProperty("tsHideDefault",""+(t.hideDefaultTopSites?1:0))})),window.isSSREnabled&&(yield e.getResultAsync())}))}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.dragDropService)||void 0===e||e.destroy(),this.dragDropService=null,window.removeEventListener("resize",this.onResize),window.removeEventListener("mouseup",this.handleClick,!1)}prerenderRefreshCritical(){return(0,c.mG)(this,void 0,void 0,(function*(){return this.initializeTopSitesState()}))}getApproxTTVRValue(e){const t=(0,Qe.Ou)();if(t[We.p.isSSRCompleted])return t[Ze.nz+(e||this.getExperienceType())]||t[Ze.nz+We.p.complete]}shadowDomPopulated(){var e,t;if((0,nr.N)()){if(window.addEventListener("resize",this.onResize),window.addEventListener("mouseup",this.handleClick,!1),(0,xe.Bn)().subscribe(this.onBreakpointCallback),this.isTP1DataUsed?window.requestAnimationFrame((()=>{this.markVisuallyReady(),Je.M0.observeSingleElement(this.topSitesRoot)})):window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.markVisuallyReady(),Je.M0.observeSingleElement(this.topSitesRoot)}))})),this.columnArrangement=(0,xe.Bn)().currentColumnArrangement,this.renderTopSiteStartAndEnd=!0,this.isTP1DataUsed){const n=null!==(t=null===(e=this.topSites)||void 0===e?void 0:e.length)&&void 0!==t?t:0;window.requestIdleCallback((()=>{var e,t;this.subscribeToChromiumPageState(),this.getOrUpdateTopSites();(null!==(t=null===(e=this.topSites)||void 0===e?void 0:e.length)&&void 0!==t?t:0)-n>1&&Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.VKG),{message:"TopSites don't get enough data from TP1",pb:Object.assign(Object.assign({},ze.VKG.pb),{tp1DataLength:this.topSites.length,maxTiles:this.maxTiles,columnArrangement:this.columnArrangement})}))}))}else this.reRenderTopsite();this.registerElements(),window.addEventListener("beforeunload",this.saveTopSitesTP1Data,{once:!0})}}registerElements(){const e=this.shadowRoot.getElementById("clickAddTileButton");e&&(0,on.FY)(an._.addTopSiteButton,e);const t=this.shadowRoot.querySelector("msft-top-site");if(t&&(0,on.FY)(an._.topSitesFirstLink,t),(0,de.Yq)().ClarityEnabled||this.config.clarityEnabled){const e=this.shadowRoot.getElementById(R.topSitesId);e&&e.setAttribute("data-clarity-mask","true")}const n=this.shadowRoot.getElementById("seeAllLinksInFavoritesHubButton");n&&(0,on.FY)(an._.seeAllLinksButton,n),this.topSitesContainerPromiseResolver(this.userSelectedSetting===l.Z3.top?this.oneLineTopSitesContainer:this.topSitesContainer),this.config.enablePromotionCoachMark&&this.registerCoachMark()}oneLineTopSitesSeeMoreEleChanged(){this.oneLineTopSitesSeeMoreObserver||(this.oneLineTopSitesSeeMoreObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio<1&&this.calcTopSitesToTopOverflowItems()}))}),{root:null,rootMargin:"0px",threshold:[.8,1]})),this.oneLineTopSitesSeeMoreObserver.disconnect(),this.oneLineTopSitesSeeMoreObserver.observe(this.oneLineTopSitesSeeMoreEle)}quickBriefVisibleChanged(){var e;!0===(null===(e=this.config)||void 0===e?void 0:e.enableF3V1SameWidth)&&this.$fastController.isConnected&&this.reRenderTopsite(!0)}get shouldHidePlaceholders(){var e,t;return(null===(e=this.config)||void 0===e?void 0:e.enableF3V1SameWidth)&&(null===(t=this.config)||void 0===t?void 0:t.qbHideAdd)&&this.quickBriefVisible}get maxActualTile(){return this.shouldHidePlaceholders?this.maxTiles:this.maxTiles-1}get tilesxColxRowsMap(){return this.config.enableF3V1SameWidth?this.quickBriefVisible?se:ae:V}getExperienceType(){return _e.x.topSitesEdgeNextWC}get className(){var e,t,n,i;return this.config.enableMarqueeAd&&(0,ln.Uo)(He.z.BackgroundData,(e=>{this.marqueeAdActive!==e.displayMarqueeAd&&(this.marqueeAdActive=e.displayMarqueeAd)})),!this.marqueeAdActive&&tr.p.isLowEndDevice()&&(null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.currentLayout)==l.nP.informational||this.config.setBkgdOffInformational&&(null===(t=this.chromiumPageSettingState)||void 0===t?void 0:t.imageOfTheDayEnabled)&&(null===(n=this.chromiumPageSettingState)||void 0===n?void 0:n.currentLayout)==l.nP.informational?(0,Oe.Y)()?F.topSitesDark:F.topSitesLight:(null===(i=this.chromiumPageSettingState)||void 0===i?void 0:i.imageOfTheDayEnabled)&&!this.showFullPageBlur?(0,Oe.Y)()?F.topSitesDarkOnBackgroundImage:F.topSitesLightOnBackgroundImage:(0,Oe.Y)()?F.topSitesDark:F.topSitesLight}get enableSixteenTopSites(){var e;return!!(null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.ntpPrefOptionApiAvailability)}get twoRowSitesClassName(){var e;return this.selectedQuickLinksDisplaySetting&&this.selectedQuickLinksDisplaySetting==l.Z3.tworows?(null===(e=this.topSites)||void 0===e?void 0:e.length)<=this.minimumTopSites?"":F.twoRowSites:""}get showCodexBingNudge(){return this.config&&this.config.showCodexBingNudge&&(0,Ae.L)()&&"0"===(0,Ae.L)().get("dsp")}get topSitesClassName(){return this.isInformationalLayout&&this.userSelectedSetting!==l.Z3.top?"information-layout":""}get isInformationalLayout(){var e;return!("always"!=(null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.selectedFeedDisplaySetting))}generateActionsMenuProps(){return{menuItems:this.getActionMenuItem(),onDismiss:this.toggleActionMenu}}generateTopSiteAddDialogProps(){return{addInputListener:e=>{this.addTopSiteDialogElement=this.shadowRoot.getElementById("topSiteAddDialog"),this.addTopSiteDialogListener||(this.addTopSiteDialogListener=!0,this.addTopSiteDialogElement.addEventListener("keydown",(e=>{"Escape"===e.key&&this.addTopSiteDialogElement.closeTopSiteDialog()}))),this.addTopSiteDialogElement.nameInputControl.addEventListener("keydown",(e=>{"Tab"!==e.key&&"Shift"!==e.key||this.addTopSiteDialogElement.nameInputKeyHandler(e)}))},onClose:e=>{this.toggleAddDialog()},saveHandler:(e,t)=>{const n=t||e.detail,i=Xi(n.url),r=t?t.title:n.name,o=function(e,t,n){if(e&&t){const i=e.fixupAndValidateUrl(t.href);if(i)return e.updateCustomLink(-1,i,n||t.hostname),je.H.logEventWithTimestamp(je.v.NTP_CUSTOMIZE_SHORTCUT_ADD,Pe.Al.IsPrerender),!0}return!1}(this.ntpApiHandle,i,r);this.lastAddedTopSite=r,o?(this.topSiteAddedSuccessfully=!0,this.toggleAddDialog()):(this.topSiteAddedSuccessfully=!1,this.lastAddedTopSite="")},headerTitle:this.strings.addDialogHeadingText,saveText:this.strings.addText,cancelText:this.strings.cancelText,closeText:this.strings.closeButtonText,dialogAnchor:this.activeTopSiteElement,nameInputBox:{name:this.strings.nameLabelText,value:"",ariaLabel:this.strings.ariaLabel_addNameInput||"",id:"nameInputControl"},urlInputBox:{name:this.strings.urlLabelText,value:"",ariaLabel:this.strings.ariaLabel_addUrlInput||"",id:"urlInputControl"},newOrUpdatedTopSite:{name:"",url:""},saveButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.saveAdd&&this.topSitesTelemetryContext.saveAdd.getMetadataTag(),cancelButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.cancelAdd&&this.topSitesTelemetryContext.cancelAdd.getMetadataTag(),closeButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.closeAddDialog&&this.topSitesTelemetryContext.closeAddDialog.getMetadataTag()}}generateTopSiteEditDialogProps(){return{addInputListener:e=>{this.editTopSiteDialogElement=this.shadowRoot.getElementById("topSiteEditDialog"),this.editTopSiteDialogListener||(this.editTopSiteDialogListener=!0,this.editTopSiteDialogElement.addEventListener("keydown",(e=>{"Escape"===e.key&&this.editTopSiteDialogElement.closeTopSiteDialog()}))),this.editTopSiteDialogElement.nameInputControl.addEventListener("keydown",(e=>{"Tab"!==e.key&&"Shift"!==e.key||this.editTopSiteDialogElement.nameInputKeyHandler(e)}))},onClose:e=>{this.toggleEditDialog(e)},saveHandler:e=>{const t=e.detail,n=Xi(t.url),i=t.name;if(this.dragDropService&&"slot"in this.activeTopSiteItem)return this.activeTopSiteItem.title=i,this.dragDropService.updateTopSites(this.activeTopSiteItem),this.toggleEditDialog(e),void this.getOrUpdateTopSites();const r=function(e,t,n,i,r,o){if(t&&i){let a=t.fixupAndValidateUrl(i.href);if(a&&r)return t.getMostVisitedItemData(r)?(a=t.getMostVisitedItemData(r).url!==a?a:"",t.updateCustomLink(r,a,o||i.hostname),t.logEventWithTimestamp(je.v.NTP_CUSTOMIZE_SHORTCUT_UPDATE,Pe.Al.IsPrerender)):(t.onmostvisitedchange=n,t.updateCustomLink(-1,a,o||i.hostname),e()),!0}return!1}(this.getOrUpdateTopSites,this.ntpApiHandle,this.onMostVisitedHandler,n,this.activeTopSiteItem.rid,i);r&&this.toggleEditDialog(e)},headerTitle:this.strings.renameDialogHeadingText,saveText:this.strings.saveText,cancelText:this.strings.cancelText,closeText:this.strings.closeButtonText,dialogAnchor:this.activeTopSiteElement,nameInputBox:{name:this.strings.nameLabelText,value:"",ariaLabel:this.strings.ariaLabel_addNameInput||"",id:"nameInputControl"},saveButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.saveEdit&&this.topSiteActionTelemetryContext.saveEdit.getMetadataTag(),cancelButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.cancelEdit&&this.topSiteActionTelemetryContext.cancelEdit.getMetadataTag(),closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeEditDialog&&this.topSiteActionTelemetryContext.closeEditDialog.getMetadataTag()}}generateUndoTopSiteHandler(){return this.isDisableDefaultInProgress?(this.disableCurated(),void(this.isDisableDefaultInProgress=!1)):this.dragDropService&&"slot"in this.activeTopSiteItem?(this.dragDropService.addTopSite(this.activeTopSiteItem),this.toggleUndoToast(),void this.getOrUpdateTopSites()):(-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites++,(0,ce.$o)().setItem(x,this.numberPromotedSites.toString())),Kt(this.getOrUpdateTopSites,this.ntpApiHandle,this.activeTopSiteItem.rid,this.activeTopSiteItem.tileSource,this.activeTopSiteItem.url),void this.toggleUndoToast(!0))}generateUndoToastProps(){const e=this.activeTopSiteItem.title,t=e.length>20?`${e.substring(0,20)}`:e,n=this.strings.undoRemovedFormat;let i=(0,Ie.Z)(n,t);return this.isDisableDefaultInProgress&&(i=[this.strings.undoDisableDefault]),{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeRemoveToast?this.topSiteActionTelemetryContext.closeRemoveToast.getMetadataTag():null,closeHandler:()=>{this.toggleUndoToast()},notificationDurationMs:this.config.undoToastNotificationDurationMs||w,removedText:i,undoButtonLabel:this.strings.undoLabelText,undoButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.undoRemoveTopSite?this.topSiteActionTelemetryContext.undoRemoveTopSite.getMetadataTag():null,undoTopSiteHandler:()=>{this.generateUndoTopSiteHandler()}}}generatePinToastProps(e){const{toastText:t,toastDisplayMs:n,tileTitle:i=this.activeTopSiteItem.title}=e,r=i.length>20?`${i.substring(0,20)}`:i,o=(0,Ie.Z)(t,r);return{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeRemoveToast?this.topSiteActionTelemetryContext.closeRemoveToast.getMetadataTag():null,closeHandler:()=>{this.isPinToastOpen=!1},notificationDurationMs:n||this.config.undoToastNotificationDurationMs||w,pinText:o}}checkTopsitesTail(e){var t;const n=null===(t=this.topSites)||void 0===t?void 0:t.length;if(n)for(let t=n-1;t>e&&"slot"in this.topSites[t];t--)this.topSites[t].slot--,this.dragDropService.addTopSite(this.topSites[t])}getActionMenuItem(){var e,t;const n=this.activeTopSiteItem&&[-5,-6].includes(this.activeTopSiteItem.tileSource),i=this.activeTopSiteItem&&(-8===this.activeTopSiteItem.tileSource||-7===this.activeTopSiteItem.tileSource),r=de.jG.CurrentMarket===Ee.IY.ENUS,o=this.activeTopSiteItem&&this.topSitesSmartListManager.isSharedLinksSmartList(this.activeTopSiteItem.rid),a={id:"Remove",title:this.strings.removeLabelText,glyph:pn(),onClick:e=>{this.checkTopsitesTail(this.findActiveSiteIndex(this.activeTopSiteItem)),"https://www.office.com"==this.activeTopSiteItem.url&&(this.deletedUrlLookup[this.activeTopSiteItem.url]=!0,this.webStorage.setObject(ar,this.deletedUrlLookup)),-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites--,(0,ce.$o)().setItem(x,this.numberPromotedSites.toString())),this.dragDropService&&"slot"in this.activeTopSiteItem&&this.dragDropService.removeTopSite(this.activeTopSiteItem),Zt(0,this.getOrUpdateTopSites,this.activeTopSiteItem,this.ntpApiHandle,this.toggleUndoToast.bind(this,!0),!0),this.onMostVisitedHandler()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeTopSite?this.topSiteActionTelemetryContext.removeTopSite.getMetadataTag():""},s={id:"Rename",title:this.strings.renameLabelText,glyph:ui(),onClick:e=>{this.toggleEditDialog(e)},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.editDialog?this.topSiteActionTelemetryContext.editDialog.getMetadataTag():""},c={id:"Hide",title:r?this.strings.hidePromotedCuratedLabelText:this.strings.hideCuratedLabelText,glyph:hi(),onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeCurated?this.topSiteActionTelemetryContext.removeCurated.getMetadataTag():""},d={id:"Hide",title:r?this.strings.hideSponsoredCuratedLabelText:this.strings.hideCuratedLabelText,glyph:hi(),onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeCurated?this.topSiteActionTelemetryContext.removeCurated.getMetadataTag():""},l={id:"PinToTaskBar",title:this.strings.pinToTaskBar,glyph:fi(),onClick:e=>{this.pinToTaskBar(),this.togglePinToast()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.pinningTopSite?this.topSiteActionTelemetryContext.pinningTopSite.getMetadataTag():""},u={id:"Pin",title:1===(null===(e=this.activeTopSiteItem)||void 0===e?void 0:e.dragDropType)?this.strings.unpinSite:this.strings.pinSite,glyph:1===(null===(t=this.activeTopSiteItem)||void 0===t?void 0:t.dragDropType)?On():xn(),onClick:e=>{this.pinAction(this.activeTopSiteItem)},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.pinningTopSite?this.topSiteActionTelemetryContext.pinningTopSiteInQuickLinks.getMetadataTag():""},p=[s,a];n&&p.push(c),i&&p.push(d),this.config.enableAllPin&&p.push(u),this.config.enablePinningTopSite&&!o&&p.push(l);const h=this.getSmartListActionsMenuItem();return h&&!o&&p.push(h),p}getSmartListActionsMenuItem(){if(this.activeTopSiteItem&&this.topSitesSmartListManager.shouldRenderSmartList&&this.topSitesSmartListManager.hasSmartList(this.activeTopSiteItem.rid)){let e,t,n;return this.topSitesSmartListManager.getEnabledSmartList(this.activeTopSiteItem.rid)?(e=this.strings.disableSmartListText,n=this.updateSmartListStateHandler.bind(this,this.activeTopSiteItem.rid,!1),t=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.turnOffPreview?this.topSiteActionTelemetryContext.turnOffPreview.getMetadataTag():""):(e=this.strings.enableSmartListText,n=this.updateSmartListStateHandler.bind(this,this.activeTopSiteItem.rid,!0),t=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.turnOnPreview?this.topSiteActionTelemetryContext.turnOnPreview.getMetadataTag():""),{id:"SmartList",title:e,glyphUrls:or,onClick:e=>{n(),this.toggleActionMenu(null)},telemetryTag:t}}return null}getOrderedTopSites(){var e,t,n,i;let r;if(!(0,nr.N)())return Array(this.maxActualTile).fill(G).map(((e,t)=>Object.assign(Object.assign({},e),{rid:t+1})));var o,a,s;r=this.config.optimization?function(e,t){if(!(null==e?void 0:e.mostVisitedAvailable))return[];const n=[],i=new Set,r=new Set,o=new Set,a=new Set;return e.mostVisited.forEach((s=>{var c;const d=e.getMostVisitedItemData(s.rid),l={rid:s.rid,dataGenerationTime:d.dataGenerationTime,faviconUrl:s.faviconUrl,domain:d.domain,title:d.title,tileSource:d.tileSource,tileTitleSource:d.tileTitleSource,url:d.url,direction:d.direction,enforcement:s.enforcement,customImagePart:s.customImagePart};if(0!=d.tileSource)return n.push(l),!o.has(l.url)&&o.add(l.url),!r.has(l.domain)&&r.add(l.domain),void(!a.has(l.title)&&a.add(l.title));const u=(null!==(c=d.domain)&&void 0!==c?c:Jt(d.url)).replace("www.","");!i.has(u)&&i.add(u),(!t||0!=d.tileSource||"https://www.office.com/"!=d.url&&"https://www.office.com"!=d.url)&&(N.includes(u)||en(u,d.title)||o.has(l.url)||(r.has(l.domain)||i.has(u))&&a.has(l.title)||n.push(l))})),i.clear(),r.clear(),o.clear(),n}(this.ntpApiHandle,this.config.disableOfficeSite):function(e,t){const n=[];if(e){if(!e.mostVisitedAvailable)return null;const i=new Set;e.mostVisited.forEach((r=>{var o;const a=e.getMostVisitedItemData(r.rid),s={rid:r.rid,dataGenerationTime:a.dataGenerationTime,faviconUrl:r.faviconUrl,domain:a.domain,title:a.title,tileSource:a.tileSource,tileTitleSource:a.tileTitleSource,url:a.url,direction:a.direction,enforcement:r.enforcement,customImagePart:r.customImagePart};if($t(a.url))return;if(0!=a.tileSource)return void n.push(s);const c=(null!==(o=a.domain)&&void 0!==o?o:Jt(a.url)).replace("www.","");if(i.has(c)||i.add(c),!en(c,a.title)&&(!t||0!=a.tileSource||"https://www.office.com/"!=a.url&&"https://www.office.com"!=a.url)&&!N.includes(c)){for(let e=0;e<n.length;e++){if(n[e].url==s.url)return;if((n[e].domain==s.domain||i.has(c))&&n[e].title==s.title)return}n.push(s)}})),i.clear()}return n}(this.ntpApiHandle,this.config.disableOfficeSite),r=this.sliceMostVisitedSites(r),0!==this.currentNumberOfTopSitesReturnedByClient&&r&&r.length>this.currentNumberOfTopSitesReturnedByClient&&(o=this.chromiumPageSettingState,a=this.pageSettingsConnector,s=r.length,a&&o&&o.configData&&o.configData.maxQuickLinks&&o.selectedQuickLinksDisplaySetting&&o.configData.isQuickLinksFolderInFavoritesEnabled&&10===s&&o.selectedQuickLinksDisplaySetting===l.Z3.onerow&&a.executeSettingsChange(l._9.quickLinksDisplaySetting,l.VE[l.Z3.tworows])),r&&r.length!==this.currentNumberOfTopSitesReturnedByClient&&(this.currentNumberOfTopSitesReturnedByClient=r.length),r=this.removeBlockedSites(r);let c=1;const d=new Map,u=this.numberPromotedSites;let p=u>0&&!this.disablePromoteTopSites;const h=[];if(r||(r=[]),this.config.enableBingChatTS){const e=r.findIndex((e=>"www.office.com"==e.domain));-1!==e&&0==r[e].tileSource&&(r[e].url="https://www.bing.com/chat?form=NTPQL1",r[e].title="Bing Chat",r[e].faviconUrl=Ce("AA1cfVF7"),r[e].domain=void 0)}this.updateAffiliateAutoAppendTileSource(r);let m=this.maxTiles?this.maxTiles-1:g-1;const f=this.getCurrentLayoutConfig();m=this.shouldHidePlaceholders?f.tile:f.tile-1;const v=null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.hideDefaultTopSites;let y=r.length>=m;if(!v&&r&&this.config&&(r.length<m||p)&&this.config.curatedSites){this.config.optimization?function(e,t){var n;if(t&&t.forEach((e=>{var t;const n=null!==(t=me[e.url])&&void 0!==t?t:new he(e.url);ve[n.domain]=!0,ye[e.url]=!0,!me[e.url]&&(me[e.url]=n)})),fe=[],!e.curatedSites)return;const i={};for(const e in ve)we(i,e);for(const e in ye){if(!e||i[e])return;const t=null!==(n=me[e])&&void 0!==n?n:new he(e);!me[e]&&(me[e]=t),we(i,t.domainAndPath),i[e]=!0}fe=new Array,e.curatedSites.forEach((e=>{const n=e.faviconId||be(e.faviconUrl),r=Object.assign(Object.assign({},e),{faviconUrl:n?Ce(n):e.faviconUrl}),o=new he(r.url);i[o.domain]||i[o.domainAndPath]||i[r.url]||fe.push(r),r.isSponsored&&t.forEach((e=>{if(e.url===r.url&&0==e.tileSource){const t=r.faviconId||be(r.faviconUrl);e.title=r.title,e.faviconUrl=t?Ce(t):r.faviconUrl}}))}))}(this.config,r):function(e,t){var n;if(t&&t.forEach((e=>{var t;const n=null!==(t=me[e.url])&&void 0!==t?t:new he(e.url);ve[n.domain]=!0,ye[e.url]=!0,!me[e.url]&&(me[e.url]=n)})),fe=[],!e.curatedSites)return;const i=e.curatedSites.map((e=>{const t=e.faviconId||be(e.faviconUrl);return Object.assign(Object.assign({},e),{faviconUrl:t?Ce(t):e.faviconUrl})})),r={};for(const e in ve)we(r,e);for(const e in ye){if(!e||r[e])return;const t=null!==(n=me[e])&&void 0!==n?n:new he(e);!me[e]&&(me[e]=t),we(r,t.domainAndPath),r[e]=!0}fe=new Array,i.forEach((e=>{const n=new he(e.url);r[n.domain]||r[n.domainAndPath]||r[e.url]||fe.push(e),e.isSponsored&&t.forEach((t=>{if(t.url===e.url&&0==t.tileSource){const n=e.faviconId||be(e.faviconUrl);t.title=e.title,t.faviconUrl=n?Ce(n):e.faviconUrl}}))}))}(this.config,r),r.length<m&&(p=!1,y=!1);const e=r.length;e>0&&(c=r[e-1].rid+1e3);const t=fe;let n=this.maxActualTile-r.length;p&&(n=u,this.config.enablePromTopsitesSort&&t.sort(((e,t)=>{var n,i;return e.isSponsored=null!==(n=e.isSponsored)&&void 0!==n&&n,t.isSponsored=null!==(i=t.isSponsored)&&void 0!==i&&i,Number(t.isSponsored)-Number(e.isSponsored)})));const i=t.slice(0,n).map((e=>{var t;return d.set(c,e),{rid:c++,dataGenerationTime:void 0,faviconUrl:null!==(t=e.faviconUrl)&&void 0!==t?t:Ce(e.faviconId),domain:void 0,title:e.title,tileSource:this.getTileSource(p,e.isSponsored),tileTitleSource:void 0,url:e.url,direction:e.direction,enforcement:void 0,isSponsored:e.isSponsored}}));if(!this.config.enableBingChatTS&&(this.webStorage=(0,ce.$o)(),this.deletedUrlLookup=this.webStorage.getObject(ar)||{},this.enableOfficeComCurated&&!this.deletedUrlLookup["https://www.office.com"])){const e={rid:c++,dataGenerationTime:void 0,faviconUrl:Ce("BBMzZlJ"),domain:void 0,title:"Office",tileSource:-5,tileTitleSource:void 0,url:"https://www.office.com",direction:"ltr",enforcement:void 0};i.unshift(e)}p?h.push(...i):r.push(...i)}this.config.enableRecommendedSites&&!v&&(r=zt(this.config,this.maxTiles,r,d,h));const S=new Map;if(p&&h.length>0)for(let e=u,t=0;e>0&&t<h.length;e--,t++)S.set(m-e,h[t]);const C=new Set([0,2,-5,-8,-4]),b=new Set([4,3]);let w=f.tile;const T=(0,nr.N)()&&null!==(i=null===(n=null===(t=this.dragDropService)||void 0===t?void 0:t.getFixedTopSites)||void 0===n?void 0:n.call(t))&&void 0!==i?i:[];let k=T.filter((e=>e.slot<w)),P=(0,nn.Z)(r,k,"url"),A=P.filter((e=>b.has(e.tileSource)));A.length+T.filter((e=>e.slot<f.tile)).length<f.tile&&!this.shouldHidePlaceholders&&(w=f.tile-1,k=T.filter((e=>e.slot<w)),P=(0,nn.Z)(r,k,"url"),A=P.filter((e=>b.has(e.tileSource))));const I=k.length,E=Math.min(w-I,A.length),x=w-I-E;let M=0,O=0;const L=P.reduce(((e,t)=>(C.has(t.tileSource)&&O<x&&(e.push(t),O+=1),b.has(t.tileSource)&&M<E&&(e.push(t),M+=1),e=((e,t,n,i,r)=>{if(!Pe.Al.CurrentFlightSet.has("prg-sharedlr-t"))return e;if(t.url===B&&n===i)for(let n=e.length-1;n>=0;n--)if(r.has(e[n].tileSource)){e.splice(n,1,t);break}return e})(e,t,O,x,C),e)),[]);r=[...Ht(L,k)],p&&0===E&&S.size>0&&S.forEach(((e,t)=>{r.splice(t,0,e),r.pop()}));const D=Pe.Al.CurrentFlightSet;return(D.has("prg-prmt-crtdv2")||D.has("prg-prmt-ctrlv2"))&&y&&Je.M0.addOrUpdateTmplString("promotedTopSites"),r}getTopSites(){let e=this.getOrderedTopSites();if(e&&e.length>0){this.userSelectedSettingCheck||this.topSitesSmartListManager.mapMostVisitedDataToSmartLists(e),this.userSelectedSettingCheck=!1;const t=this.maxActualTile;e=e.map(((e,n)=>{if(t<n)return;if(this.config.overrideIconsList&&this.config.overrideIconsList.length>0&&this.topSiteMapper.size>0){const t=Jt(e.url);this.topSiteMapper.get(e.url)?e.faviconUrl=this.topSiteMapper.get(e.url):this.topSiteMapper.get(t)&&(e.faviconUrl=this.topSiteMapper.get(t))}W&&W[e.url]&&(e.faviconUrl=Ce(W[e.url])),j&&j[e.url]&&(e.title=j[e.url]);const i=new he(e.url),{topSitesAffiliates:r,affiliateLinkOverrides:o}=this.config;r&&r[i.domainPathAndQuery]&&2===e.tileSource&&D.test(r[i.domainPathAndQuery])&&(e.url=e.url.replace(/\/$/,"")+r[i.domainPathAndQuery]),o&&this.handleAffiliateOverrides(i,e);const a=Qt(e,this.topSitesSmartListManager);return Object.assign(Object.assign({},e),{badge:a,adLabelType:this.config.adLabelType})}));const n=[];return e.forEach((e=>{if(!e)return;const t=Bt(this.telemetryObject,e);let i=(-6===e.tileSource||-7===e.tileSource)&&t&&t.unpin&&t.unpin.getMetadataTag();this.config.enableAllPin&&1===e.dragDropType&&(i=t&&t.pin&&t.pin.getMetadataTag()),n.push(Object.assign(Object.assign({},e),{contextMenuLabel:this.strings.contextMenuLabel,contentViewTelemetryTag:t&&t.topSiteTile&&t.topSiteTile.getMetadataTag(),anchorTelemetryTag:t&&t.destination&&t.destination.getMetadataTag(),toggleActionMenuButtonTelemetryTag:t&&t.moreOption&&t.moreOption.getMetadataTag(),enablePinnedIndicator:this.config.enablePinnedIndicator,promote:1===e.dragDropType,pinLabel:1===e.dragDropType?this.strings.unpinSite:this.strings.pinSite,pinActionButtonTelemetryTag:i,textShadowEnabled:this.config.enableBackPlateForPlaceholder,disableHref:this.topSitesSmartListManager.isSharedLinksSmartList(e.rid)}))})),n}return this.userSelectedSetting&&this.userSelectedSetting==l.Z3.off||this.zeroTopSitesErrorHandler(),[]}getTopSitesNext(){const e=this.getOrderedTopSites();if(!(null==e?void 0:e.length))return this.userSelectedSetting&&this.userSelectedSetting==l.Z3.off||this.zeroTopSitesErrorHandler(),[];this.userSelectedSettingCheck||this.topSitesSmartListManager.mapMostVisitedDataToSmartLists(e),this.userSelectedSettingCheck=!1;const t=[],n=this.maxActualTile;return e.forEach(((e,i)=>{if(n<i)return;if(this.config.overrideIconsList&&this.config.overrideIconsList.length>0&&this.topSiteMapper.size>0){const t=new URL(e.url);this.topSiteMapper.get(e.url)?e.faviconUrl=this.topSiteMapper.get(e.url):this.topSiteMapper.get(t.hostname)&&(e.faviconUrl=this.topSiteMapper.get(t.hostname))}W&&W[e.url]&&(e.faviconUrl=Ce(W[e.url])),j&&j[e.url]&&(e.title=j[e.url]);const r=new he(e.url),{topSitesAffiliates:o,affiliateLinkOverrides:a}=this.config;o&&o[r.domainPathAndQuery]&&2===e.tileSource&&D.test(o[r.domainPathAndQuery])&&(e.url=e.url.replace(/\/$/,"")+o[r.domainPathAndQuery]),a&&this.handleAffiliateOverrides(r,e);const s=Qt(e,this.topSitesSmartListManager),c=Object.assign(Object.assign({},e),{badge:s,adLabelType:this.config.adLabelType}),d=Bt(this.telemetryObject,c);let l=(-6===c.tileSource||-7===c.tileSource)&&d&&d.unpin&&d.unpin.getMetadataTag();this.config.enableAllPin&&1===c.dragDropType&&(l=d&&d.pin&&d.pin.getMetadataTag()),t.push(Object.assign(Object.assign({},c),{contextMenuLabel:this.strings.contextMenuLabel,contentViewTelemetryTag:d&&d.topSiteTile&&d.topSiteTile.getMetadataTag(),anchorTelemetryTag:d&&d.destination&&d.destination.getMetadataTag(),toggleActionMenuButtonTelemetryTag:d&&d.moreOption&&d.moreOption.getMetadataTag(),enablePinnedIndicator:this.config.enablePinnedIndicator,promote:1===c.dragDropType,pinLabel:1===c.dragDropType?this.strings.unpinSite:this.strings.pinSite,pinActionButtonTelemetryTag:l,textShadowEnabled:this.config.enableBackPlateForPlaceholder}))})),t}handleAffiliateOverrides(e,t){const n=this.config.affiliateLinkOverrides;0===t.tileSource&&n[e.domainAndPath]&&this.config.enableAffiliateOverride&&!e.hasQuery&&(t.url=n[e.domain],t.tileSource=2,t.isSponsored=!0,Je.M0.addOrUpdateTmplProperty("tsaffov","4"))}getTopSitesPlaceHolders(){const e=[];return this.shouldAddSeeAllLinksInFavoritesHubButton?(e.push({addTileSupported:!1,ariaLabel:this.strings.ariaLabel_seeAllTile,backPlateEnabled:this.config.enableBackPlateForPlaceholder||!1,onSeeAllTopSiteClick:this.toggleSeeAllLinksInFavoritesHubButton,seeAllTileEnabled:!0}),this.currentTilesNumber++):this.currentTilesNumber<this.maxTiles&&(e.push({addTileSupported:!0,backPlateEnabled:this.config.enableBackPlateForPlaceholder||!1,onAddTopSiteClick:this.toggleAddDialog,addTileLabel:this.strings.addTileLabel,ariaLabel:this.strings.ariaLabel_addTile,addTopSiteButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.topSitePlaceHolderAddSite&&this.topSitesTelemetryContext.topSitePlaceHolderAddSite.getMetadataTag(),seeAllTileEnabled:!1}),this.currentTilesNumber++),e}handleTopSiteClick(e,t){return n=>{const i=n.target,r="A"===(null==i?void 0:i.tagName)&&2!==n.button;if(r&&t)ji();else if(r&&this.topSitesSmartListManager.isSharedLinksSmartList(e)){const e=(0,qe.U$)(qe.QF.tryOffice365);e&&e();const t=(0,qe.Rc)();t&&t()}}}handleKeyDownPress(e,t){return n=>{"ArrowUp"===n.key?this.topSitesSmartListManager.moveFocusToSmartList(e,!1)&&n.preventDefault():"ArrowDown"===n.key?this.topSitesSmartListManager.moveFocusToSmartList(e,!0)&&n.preventDefault():!t||"Enter"!==n.key&&"NumpadEnter"!==n.key||ji()}}findActiveSiteIndex(e){var t;if(!e||!(null===(t=this.topSites)||void 0===t?void 0:t.length))return-1;let n=-1;for(let t=0;t<this.topSites.length;t++)if(e.rid===this.topSites[t].rid){n=t;break}return n}disableCurated(){this.isDisableDefaultInProgress=!0;const e=this.chromiumPageSettingState,t={hideDefaultTopSites:!e.hideDefaultTopSites,currentBackgroundImageType:e.currentBackgroundImageType,originalLayout:e.currentLayout,currentLayout:l.nP.custom,greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,quickLinksEnabled:e.quickLinksEnabled,selectedQuickLinksDisplaySetting:e.selectedQuickLinksDisplaySetting,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting};this.pageSettingsConnector&&(this.pageSettingsConnector.updateLayout(t),this.getOrUpdateTopSites(),this.toggleUndoToast(),this.isDisableDefaultInProgress=!1,(0,dn.ih)(_e.x.topSitesEdgeNextWC))}pinToTaskBar(e){window&&window.chrome&&window.chrome.appPinningPrivate&&window.chrome.appPinningPrivate.pinPage("This attests that the user has agreed to pin this website",this.activeTopSiteItem.url,this.activeTopSiteItem.title)}toggleEditDialog(e){if(this.isEditDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&vi.u.addElement(e.currentTarget),this.topSiteEditDialog.newOrUpdatedTopSite={name:this.activeTopSiteItem.title,url:this.activeTopSiteItem.url},this.topSiteEditDialog.nameInputBox.value=this.activeTopSiteItem.title;const t=document.dir===hn.N.ltr,n=this.userSelectedSetting===l.Z3.top,i=n?this.oneLineTopSitesContainer:this.topSitesRoot,r=qt(this.activeTopSiteElement,i,b,document.documentElement.clientWidth,document.documentElement.clientHeight,t,n);this.topSiteEditDialogContainerPosition=r}this.isEditDialogOpen=!this.isEditDialogOpen,this.isEditDialogOpen||(this.isAddDialogOpen&&this.toggleAddDialog(),this.isUndoToastOpen&&this.toggleUndoToast()),(0,ke.Gg)(ke.tk.editTopSite,this.isEditDialogOpen)}toggleUndoToast(e){const t=this.userSelectedSetting===l.Z3.top?this.oneLineTopSitesContainer:this.topSitesRoot;if((e||!this.isUndoToastOpen)&&t&&this.undoToastContainer){this.isActionMenuOpen=!1;const e=t.getBoundingClientRect(),n=`top: ${Math.ceil(e.bottom)+window.scrollY+L}px`;this.undoToastContainer.setAttribute("style",n),this.undoToast=this.generateUndoToastProps(),vi.u.addElement(this.undoToastContainer),this.isPinToastOpen=!1,this.isUndoToastOpen=!0,Gt.bind(this)(this.undoToast.notificationDurationMs,this.closeUndoToast),window.setTimeout((()=>{this.undoButton.focus()}),100)}else this.closeUndoToast();(0,ke.Gg)(ke.tk.toast,this.isUndoToastOpen)}togglePinToast(e={toastText:this.strings.pinToTaskBarConfirmationMessage}){const t=this.userSelectedSetting===l.Z3.top?this.oneLineTopSitesContainer:this.topSitesRoot;if(!this.isPinToastOpen&&t&&this.undoToastContainer){this.isActionMenuOpen=!1;const n=t.getBoundingClientRect(),i=`top: ${Math.ceil(n.bottom)+window.scrollY+L}px`;this.undoToastContainer.setAttribute("style",i),this.pinToast=this.generatePinToastProps(e),vi.u.addElement(this.undoToastContainer),this.isUndoToastOpen=!1,this.isPinToastOpen=!0,Gt.bind(this)(this.pinToast.notificationDurationMs,this.closeUndoToast)}else this.isPinToastOpen=!1;(0,ke.Gg)(ke.tk.toast,this.isPinToastOpen)}waitForSelectedQuickLinksReady(){return(0,c.mG)(this,void 0,void 0,(function*(){const e=new Me.o,t=n=>{n.isLoadCompleted&&n.selectedQuickLinksDisplaySetting&&((0,ln.q1)(He.z.ChromiumPageSettings,t),e.set())};(0,ln.Uo)(He.z.ChromiumPageSettings,t),yield e.getResultAsync()}))}initializeTopSitesState(){this.sitesClassName="expanded-sites",this.topSitesTelemetryContext=(e=>{if(!e)return;const t=Xe.uH.TopSites,n=e.addOrUpdateChild({name:bt,behavior:Xe.wu.Add,content:{headline:Rt.addSite,type:t},overrideDestinationUrl:Ft}),i={name:wt,type:Xe.wu.View,content:{headline:Rt.container,type:Xe.uH.TopSites},action:Xe.Aw.View,overrideDestinationUrl:Ft};return{topSitePlaceHolderAddSite:n,topSiteCommon:new Ye.D(i),saveAdd:e.addOrUpdateChild({name:`${wt}_${Ct}_${vt}`,behavior:Xe.wu.Save,content:{headline:Rt.add,type:t},overrideDestinationUrl:Ft}),cancelAdd:e.addOrUpdateChild({name:`${wt}_${Ct}_${mt}`,behavior:Xe.wu.Cancel,content:{headline:Rt.cancel,type:t},overrideDestinationUrl:Ft}),closeAddDialog:e.addOrUpdateChild({name:`${wt}_${Ct}_${gt}`,behavior:Xe.wu.Close,content:{headline:Rt.close,type:t},overrideDestinationUrl:Ft})}})(this.telemetryObject),this.topSiteActionTelemetryContext=(e=>{if(!e)return;const t=Xe.uH.TopSites;return{removeTopSite:e.addOrUpdateChild({name:`${pt}`,behavior:Xe.wu.Remove,content:{headline:`${Rt.remove} ${Rt.tsn}`,type:t},overrideDestinationUrl:Ft}),undoRemoveTopSite:e.addOrUpdateChild({name:`${ut}_${ht}`,behavior:Xe.wu.UndoRemove,content:{headline:`${Rt.undoRemove} ${Rt.tsn}`,type:t},overrideDestinationUrl:Ft}),closeRemoveToast:e.addOrUpdateChild({name:`${ut}_${gt}`,behavior:Xe.wu.Close,content:{headline:Rt.close,type:t},overrideDestinationUrl:Ft}),editDialog:e.addOrUpdateChild({name:`${wt}_${ft}`,behavior:Xe.wu.Rename,content:{headline:`${Rt.rename} ${Rt.tsn}`,type:t},overrideDestinationUrl:Ft}),closeEditDialog:e.addOrUpdateChild({name:`${wt}_${St}_${gt}`,behavior:Xe.wu.Close,content:{headline:Rt.close,type:t},overrideDestinationUrl:Ft}),saveEdit:e.addOrUpdateChild({name:`${wt}_${St}_${vt}`,behavior:Xe.wu.Save,content:{headline:Rt.save,type:t},overrideDestinationUrl:Ft}),cancelEdit:e.addOrUpdateChild({name:`${wt}_${St}_${mt}`,behavior:Xe.wu.Cancel,content:{headline:Rt.cancel,type:t},overrideDestinationUrl:Ft}),turnOnPreview:e.addOrUpdateChild({name:`${wt}_${kt}`,behavior:Xe.wu.TurnOn,content:{headline:Rt.turnOnPreview,type:t},overrideDestinationUrl:Ft}),turnOffPreview:e.addOrUpdateChild({name:`${wt}_${Pt}`,behavior:Xe.wu.TurnOff,content:{headline:Rt.turnOffPreview,type:t},overrideDestinationUrl:Ft}),pinningTopSite:e.addOrUpdateChild({name:`${wt}_${At}`,behavior:Xe.wu.Pin,content:{headline:Rt.topsiteTaskbarpin,type:t},overrideDestinationUrl:Ft}),pinningTopSiteInQuickLinks:e.addOrUpdateChild({name:`${wt}_${Et}`,behavior:Xe.wu.Pin,content:{headline:Rt.pin,type:t},overrideDestinationUrl:Ft})}})(this.telemetryObject),this.topSiteCommonTelemetryTag=this.topSitesTelemetryContext&&this.topSitesTelemetryContext.topSiteCommon&&this.topSitesTelemetryContext.topSiteCommon.getMetadataTag();const e=(e=>{if(!e)return;const t=Xe.uH.TopSites,n={name:Tt,type:Xe.wu.View,content:{headline:Rt.container,type:Xe.uH.TopSites},action:Xe.Aw.View,overrideDestinationUrl:Ft};return{topSiteCommon:new Ye.D(n),allQuickLinkButton:e.addOrUpdateChild({name:`${Tt}_${xt}`,behavior:Xe.wu.More,content:{headline:Rt.allQuickLinkButton,type:t},overrideDestinationUrl:Ft}),seeMoreButton:e.addOrUpdateChild({name:`${Tt}_${Mt}`,behavior:Xe.wu.More,content:{headline:Rt.seeMoreButton,type:t},overrideDestinationUrl:Ft}),settingButton:e.addOrUpdateChild({name:`${Tt}_${Ot}`,behavior:Xe.wu.Open,content:{headline:Rt.settingButton,type:t},overrideDestinationUrl:Ft}),selector:e.addOrUpdateChild({name:`${Tt}_${Lt}`,behavior:Xe.wu.Click,content:{headline:Rt.selector,type:t},overrideDestinationUrl:Ft})}})(this.telemetryObject);this.oneLinetopSitesCommonTelemetryTag=this.topSitesTelemetryContext&&e.topSiteCommon&&e.topSiteCommon.getMetadataTag(),this.oneLinetopSitesAllQuickLinkButtonTelemetryTag=this.topSitesTelemetryContext&&e.allQuickLinkButton&&e.allQuickLinkButton.getMetadataTag(),this.oneLinetopSitesSeeMoreButtonTelemetryTag=this.topSitesTelemetryContext&&e.seeMoreButton&&e.seeMoreButton.getMetadataTag(),this.oneLinetopSitesSettingButtonTelemetryTag=this.topSitesTelemetryContext&&e.settingButton&&e.settingButton.getMetadataTag(),this.oneLineTopSitesSelectorTelemetryTag=this.topSitesTelemetryContext&&e.selector&&e.selector.getMetadataTag()}ShowPinningWizardCampaign(){Ge.M.notifyTriggerEvent(Ge.j.NTP_TOP_SITES_CLICK).then((e=>{e&&!e.success&&(0,Ke.H)(ze.Qc1,"TopSitesEdgeNextWC: "+e.Message)})).catch((e=>{(0,Ke.OO)(e,ze.Qc1,"TopSitesEdgeNextWC: Failed to call window.chrome.edgeNurturingPrivate.NotifyTriggerEvent chromium API")}))}reRenderTopsite(e=!1){const t=this.getCurrentLayoutConfig();this.maxTiles=t.tile,this.extraAddedSitesClassName=t.class,e?this.getOrUpdateTopSites():this.renderTopsite()}renderTopsite(){window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.getOrUpdateTopSites()}),0)}))}zeroTopSitesErrorHandler(){Je.M0.sendAppErrorEvent(Object.assign(Object.assign({},ze.xKE),{message:"Zero top sites returned"}))}initializeDragDropService(){this.dragDropService=new di(this,{container:this.topSitesContainerPromise,disableDragDrop:!this.config.draggable}),this.dragDropService.initializeService()}shouldDropTopSite(e){const t=0==e.url.indexOf("http://")?e.url.replace("http://","https://"):e.url,n=this.config.blockedDomains||H;if(n)for(let e=0;e<n.length;e++){const i=n[e];if(t.startsWith(i.url)&&(!i.exc||!i.exc.find((e=>t.includes(e)))))return!0}return!1}removeBlockedSites(e){return e?e.filter((e=>{if(0==e.tileSource){if(this.shouldDropTopSite(e))return Je.M0.addOrUpdateTmplProperty("RemSE","1"),!1;if(this.config.enableAffiliateOverride&&this.config.affiliateLinkOverrides)return!Object.values(this.config.affiliateLinkOverrides).includes(e.url)}return!0})):null}getTileSource(e,t){return e?t?-7:-6:t?-8:-5}updateAffiliateAutoAppendTileSource(e){const{topSitesAffiliates:t}=this.config;e.forEach((e=>{const n=new he(e.url);t[n.domain]&&0==e.tileSource&&(e.tileSource=2,e.isSponsored=!0)}))}showOverflowMenu(){this.showMenu=!0,document.addEventListener("click",this.onClickOutside),document.addEventListener("scroll",this.onScrollOutside),document.addEventListener("keydown",this.onKeyDown),(0,ke.Gg)(ke.tk.topSiteOverflowPanel,!0)}hideOverflowMenu(){this.showMenu=!1,this.overflowMenuClass="",document.removeEventListener("click",this.onClickOutside),document.removeEventListener("scroll",this.onScrollOutside),document.removeEventListener("keydown",this.onKeyDown),(0,ke.Gg)(ke.tk.topSiteOverflowPanel,!1)}calcTopSitesToTopOverflowItems(){if(!this.oneLineTopSitesContainer||!this.oneLineTopSitesContainer.offsetWidth)return;this.overflowItems=[],this.showMenu=!1;let e=0;const t=this.oneLineTopSitesContainer.offsetWidth;this.config.enableOneLineTopSitesPillShape&&(e=this.oneLineTopSitesSeeMoreEle?this.oneLineTopSitesSeeMoreEle.offsetWidth:0),Array.from(this.oneLineTopSitesContainer.children).filter((e=>"A"===e.tagName)).forEach(((n,i)=>{const r=this.topSites[i];if(!r)return;const o=this.config.enableTopsitesTopMiniMargin?4:7;n.classList.remove("hidden"),e+=n.offsetWidth+o,e>t-18?(this.overflowItems.push(r),n.classList.add("hidden")):n.classList.remove("hidden")})),this.isOverflowing=!!this.overflowItems.length}openSettingDialog(e){if(!e)return;e.preventDefault(),e.stopPropagation();const t=(0,on.b_)(an._.settingsButton);t&&(Je.M0.sendActionEvent(e.target,Xe.Aw.Click,Xe.wu.Show),t.click())}registerCoachMark(){var e;return(0,c.mG)(this,void 0,void 0,(function*(){const t=this.pageSettingsConnector&&this.pageSettingsConnector.getCurrentState();if(!(null==t?void 0:t.isTopsitesWPOPromoted))return;const n=this.allQuickLinksButton?this.allQuickLinksButton:this.oneLineTopSitesContainer.querySelector(".pill-top-site"),{topSitesPromotionCoachMark:i}=this.strings,r={id:$e.gz.TopSitesPromotion,group:Le.V.Functional,placementSource:Le.m.Internal,surfaceModel:{surfaceType:De.U.Coachmark,size:$e.dm.Large,position:{coachmarkAnchor:n,anchoringPosition:$e.RC.Below,hasPointer:!0,pointerPosition:$e.Jt.Adjacent},closeSurfaceAction:{ariaLabel:(null==i?void 0:i.dismissContentActionLabel)||""}},contentModel:{title:(null==i?void 0:i.title)||"",description:(null==i?void 0:i.description)||"",contentType:Re.J.CallToAction,engageContentAction:{label:(null==i?void 0:i.engageContentActionLabel)||"",actionDelegate:()=>{this.pageSettingsConnector&&(this.pageSettingsConnector.updateQuickLinksDisplayOption(l.Z3.top),(0,Ue.qi)(Ve.nc.quick_links_options,l.Z3.top))}},dismissContentAction:{label:(null==i?void 0:i.closeContentActionLabel)||"",actionDelegate:()=>{this.pageSettingsConnector&&(this.pageSettingsConnector.updateQuickLinksDisplayOption(l.Z3.top),(0,Ue.qi)(Ve.nc.quick_links_options,l.Z3.top),this.pageSettingsConnector.updateQuickLinksDisplayOption(l.Z3.onerow),(0,Ue.qi)(Ve.nc.quick_links_options,l.Z3.onerow))}}}},o=[(0,Fe.l)(Be.p.Viewed,1),(0,Ne.H)(Be.p.Viewed,864e5)];null===(e=(0,gi.$0)())||void 0===e||e.sendInternalPlacement(r,o)}))}sliceMostVisitedSites(e){if(this.shouldAddSeeAllLinksInFavoritesHubButton=!1,!e)return null;if(this.chromiumPageSettingState&&this.chromiumPageSettingState.configData&&this.chromiumPageSettingState.configData.isQuickLinksFolderInFavoritesEnabled&&this.chromiumPageSettingState.selectedQuickLinksDisplaySetting){const t=this.config.enableF3V1SameWidth?Math.max(...Object.values(this.tilesxColxRowsMap[l.Z3.tworows]).map((e=>{var t;return null===(t=e.default)||void 0===t?void 0:t.tile})))-1:15;e.length>=t&&this.chromiumPageSettingState.selectedQuickLinksDisplaySetting===l.Z3.tworows&&(e=e.slice(0,t),this.shouldAddSeeAllLinksInFavoritesHubButton=!0)}return e}getOverrideIconList(){const e=[];if(this.config.overrideIconsList&&this.config.overrideIconsList.length>0)for(const t of this.config.overrideIconsList)e.push(t);return e}focusedAndNotAlways(){const{selectedFeedDisplaySetting:e,currentBackgroundImageType:t}=this.chromiumPageSettingState;return["peek","headingsonly","off"].includes(e)&&t===l.HX.off}setUpSearchBoxHiddenTilesColxRowsMap(){const e=(0,rn.Z)(this.tilesxColxRowsMap);this.config.enableFeeds3V1Base?(e[l.Z3.onerow][d.K$.c2].default={tile:10,class:F.tenSites},e[l.Z3.onerow][d.K$.c3].always={tile:6,class:F.sixSites},e[l.Z3.onerow][d.K$.c4].default={tile:9,class:F.nineSites},e[l.Z3.tworows][d.K$.c2].default={tile:10,class:F.tenSites},e[l.Z3.tworows][d.K$.c3].default={tile:12,class:F.sixSites}):(e[l.Z3.onerow][d.K$.c2].default={tile:8,class:""},e[l.Z3.onerow][d.K$.c3].always={tile:6,class:F.sixSites},e[l.Z3.onerow][d.K$.c4].default={tile:8,class:""},e[l.Z3.tworows][d.K$.c2].default={tile:8,class:""},e[l.Z3.tworows][d.K$.c3].default={tile:12,class:F.sixSites}),this.searchBoxHiddenTilesxColxRowsMap=e}onTopSiteOptions(e){let t=e&&e.target;t&&"FLUENT-OPTION"!=t.tagName&&"SPAN"==t.tagName&&(t=e.currentTarget)}updateTopSite(e){const t=e&&e.target;if(!t&&!t.selectedIndex)return;const n=t.selectedIndex;isNaN(n)||(this.topSiteSelectedItem=this.topSiteMenuItems[n],window.setTimeout((()=>{this.pageSettingsConnector.updateQuickLinksDisplayOption(this.topSiteSelectedItem.id),(0,Ue.qi)(Ve.nc.quick_links_options,this.topSiteSelectedItem.id)})),this.sitesSelectionToggleTelemetry(this.topSiteSelectedItem.id,t))}sitesSelectionToggleTelemetry(e,t){if(!t)return;const n=t;vi.u.addElement(n);const i=vi.u.get(n);i&&i.contract&&(e&&""!==e.toString()&&((i.contract.content=i.contract.content||{}).headline=e.toString()),i.contract.type=Xe.c9.ActionButton,i.contract.destinationUrl=location.href,n.setAttribute("data-customhandled","true"),vi.u.setAttribute(n,i.contract),Je.M0.sendActionEvent(n,"click"))}topsiteItemContainerTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem)return this.activeTopSiteItem.anchorTelemetryTag}actionsMenuTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem){const e=this.topSites.findIndex((e=>e.url===this.activeTopSiteItem.url));if(e>=0)return function(e,t){return e.addOrUpdateChild({name:`${Dt}_${t}`,behavior:Xe.wu.Show,content:{headline:Rt.ActionMenu,type:Xe.uH.TopSites},overrideDestinationUrl:Ft})}(this.telemetryObject,e+1).getMetadataTag()}}preventClickOnTopSite(e){null==e||e.preventDefault()}}(0,c.gn)([(0,Nt.Lj)({mode:"boolean"})],sr.prototype,"quickBriefVisible",void 0),(0,c.gn)([Ut.lk],sr.prototype,"shouldHidePlaceholders",null),(0,c.gn)([Ut.LO],sr.prototype,"actionsMenuProps",void 0),(0,c.gn)([Ut.LO],sr.prototype,"activeTopSiteItem",void 0),(0,c.gn)([Ut.LO],sr.prototype,"activeTopSiteElement",void 0),(0,c.gn)([Ut.LO],sr.prototype,"activeTopSitePlaceholderElement",void 0),(0,c.gn)([Ut.LO],sr.prototype,"activeContextMenuButtonElement",void 0),(0,c.gn)([Ut.LO],sr.prototype,"maxTiles",void 0),(0,c.gn)([Ut.LO],sr.prototype,"chromiumPageSettingState",void 0),(0,c.gn)([Ut.lk],sr.prototype,"className",null),(0,c.gn)([Ut.LO],sr.prototype,"extraAddedSitesClassName",void 0),(0,c.gn)([Ut.LO],sr.prototype,"currentTilesNumber",void 0),(0,c.gn)([(0,Nt.Lj)({mode:"boolean"})],sr.prototype,"showFullPageBlur",void 0),(0,c.gn)([Ut.LO],sr.prototype,"userSelectedSetting",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isAddDialogOpen",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isActionMenuOpen",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isEditDialogOpen",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isUndoToastOpen",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isPinToastOpen",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isLtr",void 0),(0,c.gn)([Ut.LO],sr.prototype,"ntpApiHandle",void 0),(0,c.gn)([Ut.LO],sr.prototype,"sitesClassName",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteAddDialog",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteEditDialog",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteMapper",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSites",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSitesPlaceHolders",void 0),(0,c.gn)([Ut.LO],sr.prototype,"undoToast",void 0),(0,c.gn)([Ut.LO],sr.prototype,"pinToast",void 0),(0,c.gn)([Nt.Lj],sr.prototype,"selectedQuickLinksDisplaySetting",void 0),(0,c.gn)([(0,Nt.Lj)({mode:"boolean"})],sr.prototype,"quickLinksToggleSpacingForBanner",void 0),(0,c.gn)([Ut.LO],sr.prototype,"moveUpward",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteAddedSuccessfully",void 0),(0,c.gn)([Ut.LO],sr.prototype,"lastAddedTopSite",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteSelectedItem",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteAddDialogContainerPosition",void 0),(0,c.gn)([Ut.LO],sr.prototype,"topSiteEditDialogContainerPosition",void 0),(0,c.gn)([Ut.LO],sr.prototype,"overflowItems",void 0),(0,c.gn)([Ut.LO],sr.prototype,"showMenu",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isOverflowing",void 0),(0,c.gn)([Ut.LO],sr.prototype,"overflowMenuClass",void 0),(0,c.gn)([Ut.LO],sr.prototype,"oneLineTopSitesSeeMoreEle",void 0),(0,c.gn)([Ut.LO],sr.prototype,"isOnImage",void 0),(0,c.gn)([Ut.LO],sr.prototype,"renderTopSiteStartAndEnd",void 0),(0,c.gn)([Ut.lk],sr.prototype,"topSitesClassName",null),(0,c.gn)([Ut.lk],sr.prototype,"isInformationalLayout",null);var cr=n(18544),dr=n(33442),lr=n(92531),ur=n(35680),pr=n(27460),hr=n(42689),gr=n(80260),mr=n(71942),fr=n(60184),vr=n(26512),yr=n(17993),Sr=n(27782),Cr=n(38492),br=n(26738),wr=n(78923),Tr=n(91608);const kr=wr.i`
.one-line-top-sites-container{width:100%;display:flex;height:${Tr.jb.toString()}px;background:rgba(255,255,255,0.1);position:relative}.one-line-top-sites-container.notonimg:not(.pill){background:${ur.Gy}}.one-line-top-sites-container.solid{background:${pr.s}}.one-line-top-sites-container.pill{background:none}.oneline-top-sites{display:flex;overflow:hidden;width:100%}.oneline-top-sites .pill-top-site .right-part{display:none}.oneline-top-sites.settings .pill-top-site{position:relative;max-width:unset;transition:background-color 0.5s ease-in-out 0.5s}.oneline-top-sites.settings .pill-top-site .left-part{max-width:150px}.oneline-top-sites.settings .pill-top-site .right-part{display:flex;visibility:hidden;width:0px;border-radius:50%;margin-inline:4px -6px;transition:all 0.5s ease-in-out 0.5s}.oneline-top-sites.settings .pill-top-site:hover .right-part{visibility:inherit;width:24px}.oneline-top-sites .pill-top-site .right-part>fluent-button{color:#FFFFFF;fill:#FFFFFF}.one-line-top-sites-container.notonimg .pill-top-site .right-part>fluent-button,.one-line-top-sites-container.solid .pill-top-site .right-part>fluent-button{color:${hr.C};fill:${hr.C}}.oneline-top-sites .pill-top-site .right-part>fluent-button{background:rgba(255,255,255,0.32)}.notonimg .oneline-top-sites .pill-top-site .right-part>fluent-button,.solid .oneline-top-sites .pill-top-site .right-part>fluent-button{background:${ur.wF}}.one-line-top-sites-container .pill-top-site{cursor:pointer;text-decoration:none;display:flex;max-width:150px;margin:6px 0 6px 7px;padding:6px 11px;align-items:center;box-sizing:border-box;justify-content:space-between;color:#FFFFFF;border-radius:2px}.one-line-top-sites-container.pill .pill-top-site{background:rgba(255,255,255,0.3);border-radius:16px;padding:4px 12px}.one-line-top-sites-container.notonimg.pill .pill-top-site{background:${ur.Gy}}.one-line-top-sites-container.notonimg .pill-top-site,.one-line-top-sites-container.solid .pill-top-site{color:${hr.C}}.one-line-top-sites-container .pill-top-site:hover{background:rgba(255,255,255,0.3)}.one-line-top-sites-container .pill-top-site.mini-margin{margin:6px 0px 6px 4px;padding:6px 8px}.one-line-top-sites-container .overflow-menu .pill-top-site{color:${hr.C};margin:0 0 6px 0;padding:6px 4px}.one-line-top-sites-container .overflow-menu .pill-top-site:nth-child(odd){margin-inline-end:8px}.one-line-top-sites-container.pill .overflow-menu .pill-top-site{background:none;border-radius:2px}.one-line-top-sites-container .overflow-menu .pill-top-site:hover,.one-line-top-sites-container.pill .overflow-menu .pill-top-site:hover{background:${ur.Xi}}.pill-top-site .left-part,.pill-top-site .right-part{display:flex;--base-height-multiplier:6;overflow:hidden}.pill-top-site .left-part{flex:1}.one-line-top-sites-container.notonimg:not(.pill) .pill-top-site:hover,.one-line-top-sites-container.solid .pill-top-site:hover{background:${gr.sG}}.one-line-top-sites-container.solid .grid-top-sites{--top-site-fill-hover:${(0,Oe.Y)()?"rgba(66, 66, 66, 0.4)":"rgba(229, 229, 229, 0.3)"}}.one-line-top-sites-container.solid .grid-top-sites:hover{background:var(--top-site-fill-hover,var(--neutral-fill-hover))}.one-line-top-sites-container .pill-top-site img{width:16px;height:16px;image-rendering:-webkit-optimize-contrast}.one-line-top-sites-container .grid-top-sites img{width:30px;height:30px;max-width:30px !important}.one-line-top-sites-container .grid-top-sites .end{width:30px;height:30px;max-width:30px !important}.one-line-top-sites-container .pill-top-site span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:400;font-size:12px;line-height:16px;margin-inline-start:6px}.hidden{visibility:hidden}.pill .hidden{display:none !important}.see-more-container{display:flex;align-items:center;margin:0 8px;border-radius:2px}.see-more-container .all-links-btn{display:flex;align-items:center;font-size:12px;vertical-align:middle}.see-more-container .all-links-btn svg{margin-inline-start:8px;margin-top:3px;width:12px;height:12px}.see-more-container .all-links-btn.active svg{transform:rotate(-180deg)}.see-more-container>fluent-button{background:none;color:#FFFFFF}.one-line-top-sites-container.pill .see-more-container>fluent-button{background:rgba(255,255,255,0.3);border-radius:16px;height:28px}.one-line-top-sites-container.notonimg.pill .see-more-container>fluent-button{background:${ur.Gy}}.one-line-top-sites-container.notonimg .see-more-container>fluent-button,.one-line-top-sites-container.solid .see-more-container>fluent-button{color:${hr.C};}.see-more-container>fluent-button:hover{background-color:rgba(255,255,255,0.07)}.one-line-top-sites-container.notonimg:not(.pill) .see-more-container>fluent-button:hover,.one-line-top-sites-container.solid .see-more-container>fluent-button:hover{background:${gr.sG}}.overflow-menu{color:${hr.C};fill:${hr.C};position:absolute;background:${pr.s};top:${Tr.jb.toString()}px;width:320px;overflow:hidden;border-radius:4px;box-shadow:0 16px 32px rgba(0,0,0,0.14)}.overflow-menu-grid{width:100%;z-index:700}.overflow-menu.hidden{display:none}.overflow-menu .topsite-list{display:flex;flex-wrap:wrap;overflow-y:auto;max-height:200px;padding:12px 0 10px 0;padding-inline-start:10px}.overflow-menu msft-top-site-placeholder{width:100%;height:32px;overflow:hidden}.overflow-menu msft-top-site-placeholder,.overflow-menu msft-top-site-placeholder .add-button,.overflow-menu msft-top-site-placeholder:hover .add-button{background:none}.overflow-menu msft-top-site-placeholder .add-button .add-button-label{display:flex;align-items:center;height:100%}.overflow-menu msft-top-site-placeholder .add-button span{display:inline-block;font-size:14px;line-height:20px}.overflow-menu msft-top-site-placeholder .add-button svg{padding-inline-end:7px;width:15px;height:15px}.overflow-menu msft-top-site-placeholder fluent-button::part(control){justify-content:unset;padding-inline-start:14px}.overflow-menu msft-top-site-placeholder [slot="icon-action"]{display:flex}.overflow-menu .divider{border-top:1px solid ${mr.dt};margin-inline:4px}.topsite-list .pill-top-site{width:142px;height:28px}.topsite-list .grid-top-sites{height:85px;width:104px}.topsite-list .grid-top-sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.topsite-list .pill-top-site .right-part{visibility:hidden;width:1px;border-radius:50%}.topsite-list .pill-top-site:hover .right-part>fluent-button{background:${ur.wF}}.topsite-list .pill-top-site:hover .right-part{visibility:inherit;width:unset}.topsite-list-footer{padding:10px 4px 12px 4px}.topsite-list-footer-setting{display:flex;font-size:14px;font-weight:400;line-height:20px;padding:6px 0;cursor:pointer}.topsite-list-footer-setting svg{padding-inline-start:14px;padding-inline-end:4px;width:20px;height:20px}.topsite-list-footer-setting.topsite-direct-settings{padding-inline:14px;justify-content:space-between;vertical-align:middle}.topsite-direct-settings label{line-height:32px;min-width:120px}.topsite-direct-settings fluent-select{min-width:150px;max-width:250px;margin-inline-end:auto;width:100%}.see-more-container.start .all-links-btn svg{margin-inline-end:4px;margin-inline-start:0px}.see-more-container .divider{height:20px;border-right:1px solid ${fr.rU};margin-inline-start:5px;margin-inline-end:-10px}`,Pr=wr.i` .top-sites-responsive-pin-icon{flex-shrink:0;display:none;margin:0 5px}.top-sites .top-sites-responsive-pin-icon{line-height:26px}.one-line-top-sites-container .top-sites-responsive-pin-icon svg{width:12px;height:12px}.top-sites .top-sites-responsive-pin-icon svg{width:14px;height:14px}`,Ar=wr.i` .top-site-next{background-color:transparent;border-radius:4px;box-shadow:none;display:flex;height:var(--top-site-height,84px);justify-content:center;width:var(--top-site-width,108px);position:relative;border:calc(${vr.H} * 1px) solid transparent}.top-site-next:hover:not(.uses-hover-title){background:var(--top-site-fill-hover,${ur.Xi})}.top-site-next.top-site-f3v1b:hover{background:unset}.top-site-next:has(.control:focus){outline:none;border-color:${yr.yG}}.top-site-next .control:focus{outline:none;border:none}.top-site-next .start,.top-site-next .end{position:absolute;top:var(--top-site-margin,9px);z-index:2;opacity:0}.top-site-next.small-top-sites.top-site-f3v1b .start{top:var(--top-site-action-top-position);left:var(--top-site-action-border-position)}.top-site-next.small-top-sites.top-site-f3v1b .end{top:var(--top-site-action-top-position);right:var(--top-site-action-border-position)}.top-site-next .pinned-top-site .start{pointer-events:none}.top-site-next:active .start,.top-site-next:active .end,.top-site-next:focus .start,.top-site-next:focus .end,.top-site-next:hover .start,.top-site-next:hover .end,.top-site-next:hover fluent-button,.top-site-next .start:active,.top-site-next .end:active,.top-site-next .start:focus-within,.top-site-next .end:focus-within{background:transparent;opacity:1;outline:none}.top-site-next .content-container{transition:all 0.2s ease-in-out;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;width:100%;height:100%;padding:10px 12px;border-radius:4px}.top-site-next .content-container.information-layout{padding:8px 10px;justify-content:center}.top-site-next .image{align-items:center;box-sizing:border-box;width:var(--top-site-black-plate-width,44px);height:var(--top-site-black-plate-height,44px);justify-content:center;display:flex}.top-site-next .image img{margin:0 auto;max-width:24px;height:24px}.top-site-next .title-container{display:flex;justify-content:center;margin:4px 0 0 0;width:100%}.top-site-next .control{box-sizing:content-box;color:var(--top-site-color,${hr.C});font-family:inherit;font-size:12px;font-weight:400;line-height:18px;max-height:18px;max-width:100%;white-space:nowrap;overflow:hidden;padding:0;text-overflow:ellipsis;text-decoration:none}.top-site-next .control:after{bottom:0;content:"";height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:1}.top-site-next .top-site-next-g{display:grid;gap:5px;align-items:center;grid-auto-flow:column}.top-site-next .pinned-container{display:flex;width:0;margin-inline-end:2px;flex-direction:row-reverse}.top-site-next .pinned-indicator{height:12px;width:12px;align-self:center;display:flex}.top-site-next .pinned-indicator-svg svg{width:12px;height:12px}.top-site-next.small-top-sites.information-layout.uses-hover-title{height:80px}.top-site-next.uses-hover-title .content-container{height:fit-content;justify-content:center;padding:4px 12px 0px}.top-site-next.small-top-sites.information-layout.cancel-hover-top-site{height:var(--top-site-pill-height)}.top-site-next.small-top-sites.information-layout.decrease-top-site{height:50px}.top-site-next.uses-hover-title .title-container{margin:3px 0px 0px}.top-site-next.uses-hover-title .top-site-title{flex-direction:row-reverse}.top-site-next.uses-hover-title .top-site-title-text{display:-webkit-box;opacity:0;-webkit-line-clamp:2;-webkit-box-orient:vertical}.top-site-next.uses-hover-title .top-site-title-text.one-line-title{-webkit-line-clamp:1}.top-site-next.uses-hover-title:hover:not(.drag-chosen__no-hover) .top-site-title-text,.top-site-next.drag-chosen.uses-hover-title .top-site-title-text{opacity:1}.top-site-next.hide-title .top-site-title-text{opacity:0 !important}.top-site-next.uses-hover-title .control{height:34px;line-height:unset;max-height:34px;text-align:center;white-space:unset}.top-site-next.uses-hover-title msn-native-ad-ad-label{position:absolute;top:38px;margin-inline-start:44px}.top-site-next.uses-hover-title.top-site-f3v1b msn-native-ad-ad-label{top:28px}.sites msft-top-site-placeholder.uses-hover-title{height:44px !important;margin:0px 30px;top:4px;width:44px !important}.sites msft-top-site-placeholder.information-layout.uses-hover-title{margin:0px 28px}.top-site-next.uses-hover-title .badge{margin-inline-end:4px;margin-inline-start:0px;opacity:0}.top-site-next.uses-hover-title:hover .badge{opacity:1}.top-site-next.uses-hover-title.add-placeholder.top-site-f3v1b .title-container{height:34px}.top-site-next.uses-hover-title.add-placeholder.top-site-f3v1b .image-container{height:36px;display:flex;align-items:center}.oneline-top-sites msn-native-ad-ad-label[type="topSiteAdLabelSmall"],.overflow-menu msn-native-ad-ad-label[type="topSiteAdLabelSmall"]{margin-inline-start:5px}`,Ir=wr.i` :host{width:100%;--menu-max-width:210px;--menu-min-width:160px;--top-site-dialog-z-index:900}.long-width-menu{--menu-max-width:360px}msn-actions-menu::part(menu-region){z-index:700}.root{display:flex;background-color:transparent;flex-direction:row;justify-content:center;position:relative;transition:transform .3s ease-out;z-index:301;--top-site-margin:4px;--outline-width:2}.expanded-sites{opacity:1;visibility:inherit}.expanded-sites-large{opacity:1;visibility:inherit}.dot-separator{margin-left:2px;margin-right:2px;font-size:9px}msft-top-site-placeholder fluent-button::part(content){height:16px}.add-button{width:100%;height:100%}.add-button svg{width:16px;height:16px;pointer-events:none}.add-button span{display:none}.add-dialog-show{display:block}.add-dialog-hide{display:none}.see-all-button{width:100%;height:100%}.see-all-button svg{width:16px;height:16px;pointer-events:none}.see-all-button span{display:none}.sites{display:grid;grid-template-columns:repeat(var(--top-sites-grid-template-column,8),auto);transition:opacity 0.3s ease-out;row-gap:8px;overflow:hidden}.f3plate > .sites{row-gap:10px;column-gap:var(--top-site-column-gap);overflow:visible;transition:none}.sites .start-button,.sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.sites .end-button-medium{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px}.sites .end-button-large{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px;--top-site-color:${(0,Oe.Y)()?"#FFFFFF":"#000000"}}.sites .start-button:hover,.sites .end-button:hover{background:var(--top-site-action-icon-hover,${gr.Qp})}.sites .option-icon{width:14px;height:14px}.sites path{fill:var(--top-site-color,${hr.C})}@media screen and (-ms-high-contrast:active){.sites path{fill:currentColor}}.sites fluent-button{background:transparent}.suggestion-title{font-weight:600;font-size:${Sr.c};line-height:20px}.suggestion-body{margin-top:16px;display:flex}.suggestion-body msft-top-site,.suggestion-body .top-site-next{transition:all 0.2s ease-in-out;border-radius:4px;background:${pr.s};box-shadow:0px 1.6px 3.6px rgb(0 0 0 / 13%),0px 0px 2.9px rgb(0 0 0 / 11%);cursor:default}.suggestion-body msft-top-site:hover,.suggestion-body .top-site-next:hover{background:${pr.s};box-shadow:0px 3.2px 7.2px rgb(0 0 0 / 13%),0px 0px 3.8px rgb(0 0 0 / 11%)}.suggestion-body .top-site-next .control{display:inline}.toast-root{position:absolute;left:50%;transform:translate(-50%,0);width:fit-content;max-width:95%;z-index:700;--fill-color:${(()=>{const e=(0,dr.$B)((()=>cr.m0))(lr.ZP);return(0,Oe.Y)()?cr.P5:e})()};--neutral-foreground-rest:${(()=>{const e=(0,dr.$B)((()=>cr.m0))(lr.ZP);return(0,Oe.Y)()?e:cr.P5})()};--accent-foreground-rest:${(0,Oe.Y)()?"#006CBE":"#63ADE5"};--toast-message-max-width:287px}msn-toast::part(toast-root){color:${hr.C};background:${Cr.I}}.toast-close-button{background:transparent}.toast-navigation-button{margin-inline-start:4px;background:transparent;color:${br.go}}.top-sites{position:relative}.top-sites.f3plate{--top-site-backplate-color:rgba(255,255,255,0.8);--top-site-backplate-border-color:rgba(0,0,0,0.05);--top-site-pill-width:77px;--top-site-pill-height:58px;--top-site-column-gap:6px;--top-site-border-width:1px}.top-sites.f3plate.feedcolor{--top-site-backplate-color:rgb(247 247 247 /1)}.top-sites.f3plate > .sites{--top-site-pill-calculated-width:calc(var(--top-site-pill-width) + var(--top-site-border-width) * 2);max-width:calc(var(--top-site-pill-calculated-width) * var(--top-sites-grid-template-column) + var(--top-site-column-gap) * (var(--top-sites-grid-template-column) - 1));grid-template-columns:repeat(auto-fit,var(--top-site-pill-calculated-width))}.top-sites.f3plate.topsitesplate{background:var(--top-site-backplate-color);border:1px solid var(--top-site-backplate-border-color);border-radius:12px;padding:7px;--top-site-color:rgba(0,0,0,0.83)}@media (prefers-color-scheme:dark){.top-sites.f3plate{--top-site-backplate-color:rgba(0,0,0,0.4)}.top-sites.f3plate.feedcolor{--top-site-backplate-color:rgb(36 36 36 / 1)}.top-sites.f3plate.topsitesplate{--top-site-color:#FFFFFF}}.topSitesLightOnBackgroundImage{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(234,234,234,0.42);--top-site-placeholder-backplate-fill:rgba(229,229,229,0.7);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDarkOnBackgroundImage{--top-site-fill-hover:rgba(66,66,66,0.4);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(36,36,36,0.42);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDark{--top-site-fill-hover:rgba(0,0,0,0.3);--top-site-color:#FFFFFF;--top-site-placeholder-backplate-fill:transparent}.topSitesLight{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:rgba(0,0,0,0.83);--top-site-placeholder-backplate-fill:transparent}.with-back-plate path{fill:${hr.C}}.top-site-next.drag-chosen:not(.top-site-f3v1b,.uses-hover-title){background:var(--top-site-fill-hover,var(--neutral-fill-hover))}.top-site-next.drag-chosen__no-hover{background:transparent !important}.top-site-next.drag-dragged{background:transparent}.top-site-next.small-top-sites{height:80px;width:104px}.top-site-next.small-top-sites.information-layout{height:75px;width:99px}msft-top-site::part(image),.top-site-next .image{background:${pr.s};border-radius:4px}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image{background:transparent}msft-top-site::part(imageMSB){background:#0078D4;border-radius:4px}.top-site-next.pill-top-site .image{box-shadow:0px 2px 4px rgb(0 0 0 / 10%);border-radius:12px}.top-site-next.pill-top-site.top-site-f3v1b .add-image{border-radius:12px}.top-site-next.grid-top-sites .image{box-shadow:unset;border-radius:unset;background:unset}.top-site-next.grid-top-sites .start{top:2px;left:0px}.top-site-next.grid-top-sites .end{top:5px;right:0px}.top-site-next.pill-top-site fluent-button{border-radius:4px}.top-site-next.grid-top-sites fluent-button{background:transparent}.top-site-next.grid-top-sites .end:hover{background:var(--top-site-action-icon-hover,${gr.Qp})}.top-site-next.pill-top-site{border-radius:6px}.top-site-next.pinned-top-site .start{pointer-events:none}.top-site-next .control{padding:0;margin:0}.top-site-next .top-site-title{display:flex;justify-content:center;align-items:center}.top-site-next .top-site-title-large-tile{display:flex;justify-content:center;align-items:center;color:${(0,Oe.Y)()?"white":"black"};--top-site-color:${(0,Oe.Y)()?"white":"black"}}.top-site-next .top-site-title span{overflow:hidden;text-overflow:ellipsis}.top-site-next .top-site-title-large-tile a{overflow:hidden;text-overflow:ellipsis}.top-site-next .badge{padding:1px 5px;border-radius:12px;flex:none;min-width:16px;background-color:#EDEDED;color:#0078D4;margin-inline-start:4px;font-size:10px;line-height:13px;height:16px;font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;max-width:215px;transition:all 0.2s ease-in-out}.top-site-next.uses-hover-title .badge{display:none}.top-site-next.uses-hover-title:hover .badge{display:inline}msft-top-site-placeholder{height:88px}msft-top-site-placeholder.small-top-sites{height:84px}msft-top-site-placeholder.small-top-sites.information-layout{height:75px;width:99px}.top-site-next .top-site-shadow .top-site-title-text{text-shadow:black 1px 1px 1px}@media (min-width:1012px) and (max-width:1097px){.river-zoom{--top-sites-grid-template-column:10 !important}}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-black-plate-height:36px;--top-site-black-plate-width:36px;--top-site-hover-backplate-width:90px;--top-site-hover-backplate-height:78px;--top-site-action-icon-hover:rgba(0,0,0,0.05);--top-site-action-top-position:-9px;--top-site-action-border-position:-1px;width:var(--top-site-pill-width);height:var(--top-site-pill-height)}.top-site-next.small-top-sites.top-site-f3v1b.top-site-f3v1b-icbp .image svg{--top-site-color:#FFFFFF}@media (prefers-color-scheme:light){.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-no-hover){--top-site-fill-hover:rgba(229,229,299,0.3)}.top-site-next.small-top-sites.top-site-f3v1b.top-site-f3v1b-icbp .image svg{--top-site-fill-hover:#FFFFFF}}@media (prefers-color-scheme:dark){.top-site-next.small-top-sites.top-site-f3v1b.top-site-f3v1b-icbp .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-action-icon-hover:rgba(255,255,255,0.05)}}.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-no-hover):hover .content-container{z-index:1}.top-site-next.small-top-sites.top-site-f3v1b::before{transition:all 0.5s ease-in-out}.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-no-hover):hover::before{content:"";position:absolute;top:-12px;width:var(--top-site-hover-backplate-width);height:var(--top-site-hover-backplate-height);box-sizing:border-box;z-index:1;background:var(--top-site-fill-hover);border:1px solid var(--top-site-backplate-border-color);box-shadow:0px 6px 12px rgba(0,0,0,0.14);border-radius:8px}.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-no-hover):hover .control::after{width:var(--top-site-hover-backplate-width);height:var(--top-site-hover-backplate-height);top:-12px;left:var(--top-site-anchor-left-fix,-16px);box-sizing:border-box}@media (prefers-color-scheme:dark){.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-no-hover):hover{--top-site-fill-hover:rgba(66,66,66,0.4)}.top-sites.f3plate.feedcolor .top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-no-hover):hover{--top-site-fill-hover:black}}.top-site-next.small-top-sites.top-site-f3v1b.top-site-f3v1b-icbp{--top-site-hover-backplate-width:90px;--top-site-anchor-left-fix:-10px;--top-site-action-border-position:-1px}.top-site-next.small-top-sites.top-site-f3v1b.top-site-f3v1b-no-hover{--top-site-action-top-position:-5px;--top-site-fill-hover:transparent}.top-site-next.small-top-sites.top-site-f3v1b .content-container{padding:0}.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-icbp) .title-container{margin:0}.top-site-next.small-top-sites.top-site-f3v1b .content-container{justify-content:center}.top-site-next.small-top-sites.top-site-f3v1b:not(.top-site-f3v1b-icbp) .image{background:transparent;box-shadow:unset;border-radius:unset}.top-site-next.small-top-sites.top-site-f3v1b .image img{max-width:24px;height:24px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{width:20px;height:20px}@media (max-width:1097px){:host{--top-sites-grid-template-column:4}.ten-sites{--top-sites-grid-template-column:5}.eight-sites{--top-sites-grid-template-column:8}.six-sites{--top-sites-grid-template-column:3}}@media (min-width:1098px){:host{--top-sites-grid-template-column:8}.ten-sites{--top-sites-grid-template-column:10}.expanded-sites{min-height:90px}.expanded-sites.information-layout{min-height:75px}.expanded-sites-large{min-height:72.9px}}.f3plate > .expanded-sites{min-height:unset}${(0,d.vW)(d.K$.c3,null)}{.move-upward.six-sites{--top-sites-grid-template-column:6}}${(0,d.vW)(d.K$.c3,null)}{.move-upward.nine-sites{--top-sites-grid-template-column:9}}.top-site-add-success{position:absolute;top:40px;left:-10000px}.pinned-indicator{width:12px;height:12px}#dismissButtonId{margin-top:1px}.topsite-info{float:inline-end}.overflow-menu.start{inset-inline-start:8px}.overflow-menu-grid.start{inset-inline-start:0px}.overflow-menu.end{inset-inline-end:8px}.overflow-menu .dismiss-button{inset-block-start:2px;inset-inline-end:2px}.top-site-next .start{inset-inline-start:var(--top-site-margin,9px)}.top-site-next .end{inset-inline-end:var(--top-site-margin,9px)}.${F.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:4}${(0,d.vW)(d.K$.c2,null)}{.${F.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:5}}${(0,d.vW)(d.K$.c3,null)}{.${F.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:6}}${(0,d.vW)(d.K$.c4,null)}{.${F.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:9}}.${F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:4}${(0,d.vW)(d.K$.c2,null)}{.${F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:5}}${(0,d.vW)(d.K$.c3,null)}{.${F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:3}}${(0,d.vW)(d.K$.c4,null)}{.${F.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:6}}${kr} ${Pr} ${Ar}
`,Er={experienceConfigSchema:undefined};i.D.define(r.H.registry)},36399:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(33940);const r=["/ads-prebid.js","/istripper.js","/javascript/fropo.js","/nb/f_ls.js","/prebid-add.js","/prebid-ads/adsensebase.js","/prebid-article-ad-ad-300x250.js","/reclama/ads.js","/safu/safu.js","/wp-content/plugins/wp-banners/js/wp-banners.js","/zlk/zlk.js"],o=["/adex.js","/adgpt.js","/ados.js","/ads/stickyLb.js","/ane-popup-banner/ane-popup-banner.js","/ane-preroll/preroll.js","/arcads.js","/awe2.js","/clever_ads.js","/cnads.js","/dfp/dc.js","/doublepimp2.js","/eureka/eureka.js","/exopopunderdesktop.js","/expop.js","/fload.js","/fro_lo.js","/frontend_loader.js","/gpt.min.js","/invoke-2.js","/js/m/i-def.js","/js/youmuffpu.js","/js3caf.js","/kampyle.js","/keyade.js","/lib/ad.js","/markpop.js","/moatsdk.min.js","/nugg.min.js","/nwm-fcn.min.js","/nwm-pw2.min.js","/p8network.js","/popu.js","/popup2.js","/popup3.js","/punder.js","/pustrck.js","/scripts/chatur.js","/soralink.js","/suv4.js","/taboola_ads.js","/tardisrocinante/austin.js","/utep_ad.js","/weborama.js","/wp-content/plugins/bhcb/lock.js","/xpopup.js","/_adverts.js","/_rebid.js","/cmbdv2.js","/push-skin/skin.min.js","/pop2.js","/banger.js","/detroitchicago/anaheim.js","/detroitchicago/boise.js","/detroitchicago/houston.js","/detroitchicago/memphis.js","/detroitchicago/minneapolis.js","/detroitchicago/raleigh.js","/detroitchicago/rochester.js","/detroitchicago/tampa.js","/_js/prbd_6.19.0.js","/prebid14.js","/prebid_ver.js","/pubfig.js","/pubfig.min.js","/_prebid.js","/~Prebid.js","/datomata.widget.js","/abtest_ab.js","/adb.min.js","/adblock-relief.js","/blockblock/blockblock.jquery.js","/fuckadb.js"];var a=n(95651),s=n.n(a);class c{Impacts(){const e=this.GetConfig();return new Promise(function(t,n){const i=[this.CheckLoadStatus(e.EasyList),this.CheckLoadStatus(e.UboSpecial),this.CheckLoadStatus(e.Param)];Promise.all(i).then((e=>{t(e[0]||e[1]||e[2])})).catch((e=>{n(e)}))}.bind(this))}CheckLoadStatus(e){const t=document.createElement("script");t.src=e.urls,document.body.appendChild(t);const n=new Promise((function(n,i){t.onload=function(){document.getElementById(e.id)?n(!1):n(!0)},t.onerror=function(){n(!0)}}));return r=500,o=n,(0,i.mG)(void 0,void 0,void 0,(function*(){const e=new Promise(((e,t)=>{setTimeout(e,r,!1)}));return Promise.race([o,e])}));var r,o}GetConfig(){const e="https://assets.msn.com/staticsb/statics/latest/adboxes",t=this.Sample(o),n=this.Sample(r),i=this.Sample(o);return{UboSpecial:{urls:e+"/ubo"+n,id:btoa(n)},EasyList:{urls:e+"/egb"+t,id:btoa(t)},Param:{urls:e+"/general.js?"+i,id:btoa(i)}}}Sample(e){return e[Math.floor(Math.random()*e.length)]}}var d=new class{constructor(){this.adbTime=0,this.getAdbStatus=()=>(this.hasAdbStatus||(this.adbStatus=this.checkAdbStatus(),this.hasAdbStatus=!0),this.adbStatus),this.getAdbLoggedTime=()=>{const e=s().get("AlgoRes");return e&&"ABD=V=0"!=e&&(this.adbTime=Number(e.split("=")[2])),this.adbTime},this.executeDetector=()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=new c,t=yield e.Impacts();this.setCookie(t)})),this.appendAdbStatusToUrl=e=>{if(!e||0===e.length||!this.getAdbStatus())return e;const t=new URL(e),n=t.searchParams.get("rlink");if(!n)return e;const i=decodeURIComponent(n);if(!(i.includes("www.bing.com/aclick?ld=")||i.includes("www.bing.com/ac?ld=")||i.includes("www.bing.com/ck?ld=")||i.includes("www.bing.com/ack?ld=")||i.includes("www.bing.com/clk?ld=")||i.includes("www.bing.com/aclk?ld=")||i.includes("www.bing.com/click?ld=")))return e;const r=n.concat("&adb=1");return t.searchParams.set("rlink",r),t.toString()},this.checkAdbStatus=()=>{const e=s().get("AlgoRes");return!(!e||"ABD=V=0"===e)},this.setCookie=e=>{if(e){const e=(new Date).getTime();s().set("AlgoRes",`ABD=V=${e}`,{expires:30})}else s().set("AlgoRes","ABD=V=0",{expires:30})}}}},82852:function(e,t,n){"use strict";n.d(t,{N:function(){return o},O:function(){return r}});var i=n(33954);const r=(e,t,n,r=!1)=>{r?n[e]?n[e].push(t):n[e]=[t]:e&&"function"==typeof t&&n&&(i.k.log(`DisplayAd: addEventListener eventName: ${e} callback: ${t} events: ${n}`),n[e]&&n[e][0].toString()!=t.toString()?n[e].push(t):n[e]=[t])},o=(e,t,n,i)=>{if(!t||!n)return;let r=5;t.divid=t.divid||t.divName,t.msnSdkName=i;const o=setInterval((()=>{if(n[e]&&n[e].length){for(let i=0;i<n[e].length;i++)n[e][i](t);clearInterval(o)}else r--||clearInterval(o)}),500)}},60367:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});const i=()=>(new Date).getTime()+"|"+(9*Math.random()+1)*Math.pow(10,17)},64573:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var i=n(33940),r=n(19809),o=n(87298),a=n(67462),s=n(81765),c=n(98304),d=n(65135);const l=new class{constructor(){this.fetchCalled=!1,this.baseUrl="https://api.msn.com/segments/recoitems/LiveRampObjectStoreCaller",this.oneServiceOcid="peregrine",this.noEnvelopeIdConst="_"}fetchAndOutputEnvelopeId(){if(this.fetchCalled)return;this.fetchCalled=!0;if(!(0,a.ej)(s.yV.LiverampEnvelopeId)&&this.isCookieSetAllowed()){const e=this.fetchEnvelopeIdFromObjectStore();this.liverampCookieSetPromise=this.setCookie(s.yV.LiverampEnvelopeId,e)}}getEnvelopeIdFromCookie(){const e=(0,a.ej)(s.yV.LiverampEnvelopeId);return e===this.noEnvelopeIdConst?null:e}finishLiverampCookieSet(){return(0,i.mG)(this,void 0,void 0,(function*(){this.liverampCookieSetPromise&&(yield this.liverampCookieSetPromise)}))}fetchEnvelopeIdFromObjectStore(){return(0,i.mG)(this,void 0,void 0,(function*(){const e={method:"GET",headers:yield r.$D.getOneServiceHeaders(),credentials:"include"},t=this.getServiceUrl();let n;try{n=yield(0,o.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const n=yield fetch(t.href,e);if(200!=n.status)return 404==n.status||d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.t7r),{message:`Unexpected response from OneService call. Status: ${n.status}`})),null;try{const e=yield n.text();let t=JSON.parse(e)[0].data;return'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),t}catch(e){return d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.t7r),{message:"OneService response is not in expected format."})),null}}))),"liverampObjectStoreCall")}catch(e){return d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.t7r),{message:`Error sending OneService request. Error: ${e}`})),null}return n}))}setCookie(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){let n=yield t;n||(n=this.noEnvelopeIdConst);(0,a.sq)(e,n,1,".msn.com","/",!0)||d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.lxu),{message:"Unable to set LiverampEnvelopeId Cookie."}))}))}getServiceUrl(){const e=new URL(this.baseUrl);return[...r.$D.getCommonParams2(this.oneServiceOcid,!0)].forEach((t=>{t.value&&e.searchParams.set(t.key,t.value)})),e.searchParams.set("ocid",this.oneServiceOcid),e}isCookieSetAllowed(){try{return(0,a.sq)(s.yV.LiverampEnvelopeId,this.noEnvelopeIdConst,1,".msn.com","/",!0)}catch(e){return!1}}}},18769:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var i=n(33940),r=(n(34757),n(45506));const o="undefined"!=typeof window?function(){const e={positions:[],beacons:{},clickBeacons:{},elements:{},timer:null,watch:null,paused:!1,supportsIO:!(window.location.search.indexOf("useLegacyTracking=1")>-1)&&"IntersectionObserver"in window,viewedBeaconHistory:new Set},t="background: #fff; border-radius: 2px; color: #5f6a96; padding: 4px;";let n=!1;window&&(n=window.location.search.toLowerCase().indexOf("debug=1",0)>-1);const i=function(e){"NOT_PROVIDED"!==e&&((new Image).src=e)},r=function(t){const n=e.clickBeacons[t]||[];if(n.length)for(let e=0,t=n.length;e<t;e++)i(n[e])},a=function(e,t){const n=(new Date).getTime()/1e3|0,i=Math.floor(9007199254740990*Math.random()),r=t&&t.index||0;return e.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r)).replace("{REQUEST_ID}",i).replace("[timestamp]",n).replace("[CACHEBUSTER]",n).replace("[RANDOM_NUMBER]",i)},s=function(e,t,n){const i=function(e,t){const n=t+1,i=Math.floor(e.width/n),r=Math.floor(e.height/n),o=Math.max(0,e.left),a=e.top,s=[];for(let e=1;e<n;e++){const t=o+i*e;for(let e=1;e<n;e++){const n=a+r*e;s[s.length]=[t,n]}}return s}(t,10);let r=0;for(let t=0,n=i.length;t<n;t++){const n=i[t][0],o=i[t][1];c(e,n,o)||r++}const o=100*n;return!(100-r/i.length*100>=o)},c=(e,t,n)=>{if(!!e.shadowRoot){const i=e.shadowRoot.elementFromPoint(t,n);return e.shadowRoot.contains(i)||e.contains(i)}const i=document.elementFromPoint(t,n);return!(!i||"MSFT-FEED-LAYOUT"!==i.tagName.toUpperCase()&&"VIEWS-NATIVE-AD"!==i.tagName.toUpperCase()&&"EDGE-CHROMIUM-PAGE"!==i.tagName.toUpperCase())},d=function(e,t){const n=function(){const e=document,t=window,n=e.body,i=e.documentElement;return{height:t.innerHeight||i.clientHeight||n&&n.clientHeight,width:t.innerWidth||i.clientWidth||n&&n.clientWidth}}(),i=e.getBoundingClientRect(),r=Math.max(0,Math.min(i.bottom,n.height)-Math.max(i.top,0)),o=Math.max(0,Math.min(i.right,n.width)-Math.max(i.left,0)),a=r/(i.height||e.offsetHeight)||0,c=o/(i.width||e.offsetWidth)||0;return!window.disableObstructionDetection&&window.addEventListener&&s(e,i,t)?0:Math.max(0,a+c-1)},l=function(e,t,n){return window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},u=function(){const i=e.positions.length;for(let o=0;o<i;o++){const i=e.positions[o];if(!e.paused&&i){const a=i.uid,s=i.node;if(!s)continue;if(e.elements[a]||(e.elements[a]=s,e.clickBeacons[a]&&l(s,"click",(function(){r(a)}))),d(s,i.threshold)<i.threshold)i.history=null;else{i.history||(i.history=Date.now(),n&&console.log("%c[ Gemini: Started - "+i.history+" ]",t));const r=(Date.now()-i.history)/1e3;if(n&&console.log("%c[ Gemini: Tracking - "+r+" ]",t),r>=i.duration&&(n&&console.log("%c[ Gemini: Tracking - "+r+" ]",t),i.timer&&(clearInterval(i.timer),i.timer=null),i.observer&&i.observer.unobserve(s),e.viewedBeaconHistory.has(i.uid)||(e.viewedBeaconHistory.add(i.uid),i.callback(i)),i.history=Date.now(),e.positions.splice(o,1),o-=1,!e.positions.length)){n&&console.log("%c[ Gemini: Finished - "+i.history+" ]","background: #eb2e2e; border-radius: 2px; color: #fff; padding: 4px;"),e.timer&&(clearInterval(e.timer),e.timer=null);break}}}}},p=function(e){const t=e.node;if(!e.observer){const n=new IntersectionObserver((function(t){return function(t){const n=t[t.length-1];n.isIntersecting?n.isIntersecting&&!e.timer&&(e.timer=setInterval(u,150)):(clearInterval(e.timer),e.timer=null,e.history=null)}(t)}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});n.observe(t),e.observer=n}},h=function(t,r,s,c,d,l){const u=s.a,h=s.c,g=s.d,m=s.p,f=s.t,v=e.beacons,y=e.positions,S=m/100;v[t]||(v[t]={});v[t][r]={urls:c,threshold:S,duration:g,type:f,consecutive:h,audio:u};const C={uid:t,threshold:S,duration:g,consecutive:h,audio:u,callback:function(){const e=v[t][r],s=e.urls,c=s.length,d=o.beaconCallback;for(let o=0;o<c;o++){const c=s[o];i(a(c,l)),"function"==typeof d&&d(v[t][r],t,r,c),n&&console.log("%c[ Gemini: $$$$ ]\n"+JSON.stringify({url:c,rule:r,threshold:e.threshold,duration:e.duration,consecutive:e.consecutive},null,2),"background: #5c71d9; border-radius: 2px; color: #fff; padding: 4px;")}},node:d,history:null};y.push(C),e.supportsIO&&p(C)},g=function(t,n,i){const r=n.rules,o=r.viewabilityDefStatic,a=r.viewabilityDefStatic3P,s=n.tag,c=s.clickTrackingUrl,d=s.imprTrackingUrl,l=s.imprTrackingUrls,u=n.actionUrls,p=n.beacon;if(u&&u.PARTIAL_VIEW){const e=u.PARTIAL_VIEW;h(t,"viewabilityDefStaticPartial",{p:.01,d:0,t:21},e,i,n)}if(o||p||u&&u.IMPR_INTERNAL){const e="viewabilityDefStatic",r=o||{c:1,d:1,p:50};let a=[];p&&p.length&&a.push(p),u&&u.IMPR_INTERNAL&&(a=a.concat(u.IMPR_INTERNAL)),l&&l.length?a=a.concat(l):d&&(d instanceof Array?a=a.concat(d):a.push(d)),h(t,e,r,a,i,n)}if(a&&u&&u.STATIC_VIEW_3P){const e=a.length;for(let r=0;r<e;r++){const e=u.STATIC_VIEW_3P.slice(),o=a[r],s="viewabilityDefStatic3P:"+r,c=a[r].t;for(let t=0,n=e.length;t<n;t++)e[t]=(g=e[t],m=c,g.replace("$(S_VIEW_TYPE)",m));h(t,s,o,e,i,n)}}var g,m;let f=[];u&&u.CLICK_INTERNAL&&(f=f.concat(u.CLICK_INTERNAL)),c&&c.length&&(f=f.concat(c)),e.clickBeacons[t]=f},m=function(e,t){const n=e.ads,i=e.section.id,r=n.length;for(let e=0;e<r;e++){const r=n[e],o=r.customId||"gemini-"+i+"-"+(r.creativeId||r.demandSourceCreativeId||r.dynamicProductAdId||0)+"-"+r.index,a=t;r.tag="string"==typeof r.tag?JSON.parse(r.tag):r.tag,r.beacon=r.beacon.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r.index)),g(o,r,a)}},f=function(t,i){const r=t instanceof Array;if(!t||r&&!t.length||t&&"object"!=typeof t)return;t&&!r&&(t=[t]);const o=t.length;for(let e=0;e<o;e++){const n=t[e],r=n.sectionads;if(r)for(let e=0;e<r.length;e++)m(r[e],i);else m(n,i)}return"IntersectionObserver"in window||e.timer||(n&&console.log("%c[ Gemini: Start Watching ]","background: #55ae3f; border-radius: 2px; color: #fff; padding: 4px;"),e.timer=setInterval(u,150)),this};return window.Gemini=f,"hidden"in document&&document.addEventListener("visibilitychange",(function(){return e.paused=document.hidden})),f.version="2.0",f}():null;var a=n(33954),s=n(68364),c=n(98304),d=n(81765),l=n(36159),u=n(743),p=n(33379),h=n(12884),g=n(65135),m=n(75559);class f{constructor(e){this.config=e,this.visiJsonTrackingData=new Map,this.userActionLog=new l.Km,this.beaconsProcessed=new Map,this.currentVideoDom=new Map,this.onObserve=(e,t)=>(n,i)=>{n&&n.forEach((n=>{a.k.logCallback((()=>"IntersectionRatio: "+n.intersectionRatio.toString())),n.intersectionRatio>=.5?this.timerId=window.setTimeout(((n,i)=>{this.fireVisibilityBeacon(n,i),this.userActionLog.fireImpressionLog(e,t,i)}),1e3,i,n.target):this.timerId&&clearTimeout(this.timerId)}))}}sendBeaconForAdServed(e){return(0,i.mG)(this,void 0,void 0,(function*(){const{beaconsJson:t,beaconsSupportHttpPOST:n}=e;this.fireAdServedTrackingCall(t,n)}))}fireAdServedTrackingCall(e,t){var n;return(0,i.mG)(this,void 0,void 0,(function*(){if(e&&e.length>0)try{const i=JSON.parse(e),r=i&&i.trb;if(r)for(let e=0;e<r.length;e++){const o=r[e];(null===(n=window.servedBeaconUrls)||void 0===n?void 0:n.includes(o))||(this.beaconsProcessed&&this.beaconsProcessed.has(o)&&this.beaconsProcessed.get(o)===d.hE.BeaconTypeAdServed||f.allServeBeaconsFiredOnPage&&f.allServeBeaconsFiredOnPage.has(o)||(this.config&&this.config.useNavigatorSendBeacon&&t?this.firePostTrackingBeacon(r[e],d.hE.BeaconTypeAdServed,i.e):this.fireTrackingBeacon(r[e],d.hE.BeaconTypeAdServed,i.e)))}}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire ad served call",`Fail to parse beacon json tracking data: ${e}`))}}))}fireClickTrackingCall(e,t){if(e&&e.length>0)try{const n=JSON.parse(e),i=JSON.parse(t),r=n&&n.tcb,o=i&&i.e;if(r)for(let e=0;e<r.length;e++)this.fireTrackingBeacon(r[e],d.hE.BeaconTypeClick,o)}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire ad clicked call",`Fail to parse beacon click json: ${e}`))}}fireUserActionBeacon(e){this.fireTrackingBeacon(e,d.hE.UserActionEvent,!1)}visibilityObserver(e,t,n){const i=document.querySelector(e.replace(/\s/g,".")),r=e.slice(1,e.length);i&&this.elementVisibilityObserver(i,t,void 0,r,n)}visibilityCarouselObserver(e,t){e&&t&&this.elementVisibilityObserver(e,t)}elementVisibilityObserver(e,t,n,i,r,o,a,d){if(this.visiJsonTrackingData.set(e,t),n)try{!function(e,t){window.Gemini&&window.Gemini(e,t)}(JSON.parse(n),e)}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to invoke gemini caller",`Fail to parse beacon gemini json: ${n}`))}const l={root:null,rootMargin:"0px",threshold:.5};this.onObserve=this.onObserve.bind(this),this.fireVisibilityBeacon=this.fireVisibilityBeacon.bind(this),this.loadPolyfills().then((()=>{new IntersectionObserver(this.onObserve(a,d),l).observe(e),r&&r.length>0&&(this.trackBingViewability=this.trackBingViewability.bind(this),this.trackBingViewability(e,i,r,!0,this.beaconsProcessed,o,t))}))}checkVideoElementChanged(e,t,n){const i=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,r=i&&i.querySelector("content-video-player")&&i.querySelector("content-video-player").shadowRoot?i.querySelector("content-video-player").shadowRoot.querySelector("video"):null,o=n?n.get(e):null;n&&r!=o&&(t.element=r,t.videoParenentElement=i&&i.host&&i.host.parentElement,window&&window.MSANTracker&&window.MSANTracker.TrackElements&&(window.MSANTracker.PlayUtils.untrackElement(o),window.MSANTracker.TrackElements([t],window)),n.set(e,r))}trackBingViewability(e,t,n,i,r,o,a){var s,c;const l=null!==(s=this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.triggerType)&&void 0!==s?s:"play",u=null!==(c=this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.durationMs)&&void 0!==c?c:2e3,p=!!o,h=t?t.concat(" video"):"";let g=e,m=null;i&&p&&(null==this.currentVideoDom&&(this.currentVideoDom=new Map),g=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,m=g&&g.querySelector("content-video-player")&&g.querySelector("content-video-player").shadowRoot&&g.querySelector("content-video-player").shadowRoot.querySelector("video"),this.currentVideoDom.set(e,m));let f=[];const v=[];let y=[],S=[];if(n&&n.length>0)for(let e=0;e<n.length;e++){const t=n[e];r&&r.has(t)&&r.get(t)===d.hE.BeaconTypeVisibility||(p?y.push({type:"videoView",triggerType:l,url:t,percentage:50,duration:u}):v.push({type:"view",triggerType:"view",url:t,percentage:50,duration:1e3}),null!=r&&i&&r.set(t,d.hE.BeaconTypeVisibility),S.push({beaconUrl:t,type:d.hE.BeaconTypeVisibility}))}if(p){const{bingBeacons:n,servedBeacons:s,videoTrackedUrls:c}=this.getBeaconsForVideo(o,r,i,a);y=y.concat(n),S=S.concat(c),f=[{impid:t,element:i?e:null,beacons:s},{impid:i?t:h,element:i?m:null,videoParenentElement:i?g&&g.host&&g.host.parentElement:null,beacons:y}]}else f=[{impid:t,element:i?e:null,beacons:v}];if(window&&window.MSANTracker&&window.MSANTracker.TrackElements&&window.MSANTracker.TrackElements(f,window),i&&p){const n={impid:t,element:m,videoParenentElement:g&&g.host&&g.host.parentElement,beacons:y};setInterval(this.checkVideoElementChanged,100,e,n,this.currentVideoDom)}return S}getBeaconsForVideo(e,t,n,i){var o,a;const l=null===(o=this.config&&this.config.VideoAd&&this.config.VideoAd.mobileEnable)||void 0===o||o,u=null!==(a=this.config&&this.config.VideoAd&&this.config.VideoAd.impression&&this.config.VideoAd.impression.durationMs)&&void 0!==a?a:1e3;let p=[];const h=[],{bingBeacons:m,videoUrls:f}=this.generateVideoBeaconsFromVast(e,t,n);p=p.concat(f);const v=i,y=r.Al&&r.Al.ClientSettings||{},S=y.browser&&"true"===y.browser.ismobile||"phone"===y.deviceFormFactor;if(v&&v.length>0)try{const e=JSON.parse(v);if(e){const i=e.trb;if(i)for(let r=0;r<i.length;r++){const o=i[r];t&&t.has(o)&&t.get(o)===d.hE.BeaconTypeAdServed||(h.push({type:"videoImpression",triggerType:"view",url:e.e?o:decodeURIComponent(o),percentage:50,duration:l&&S?300:u}),null!=t&&n&&t.set(o,d.hE.BeaconTypeAdServed),p.push({beaconUrl:o,type:d.hE.BeaconTypeAdServed}))}}}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire video tracked beacon",`Fail to parse beacon json tracking data: ${v}`))}return{bingBeacons:m,servedBeacons:h,videoTrackedUrls:p}}getMilliseconds(e){const t=e.split(".");let n=0;const i=t[0];t.length>1&&(n+=Number(t[1]));const r=i.split(":");return n+1e3*(3600*Number(r[0])+60*Number(r[1])+Number(r[2]))}generateVideoBeaconsFromVast(e,t,n){const i=[],r=[],o=this.getMilliseconds(e.Duration);if(e.TrackingEvents)for(let a=0;a<e.TrackingEvents.length;a++)if(e.TrackingEvents[a]){const s=e.TrackingEvents[a].value;if(t&&t.has(s)&&t.get(s)===d.hE.BeaconTypeVideoProgress)continue;let c="";switch(e.TrackingEvents[a].event&&(c=e.TrackingEvents[a].event.toLowerCase()),c){case d.hE.StartEvent:i.push({type:"start",triggerType:"play",url:s,percentage:50,duration:0});break;case d.hE.FirstQuartileEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/4)});break;case d.hE.MidPointEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/2)});break;case d.hE.ThirdQuartileEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/4*3)});break;case d.hE.CompleteEvent:i.push({type:"complete",triggerType:"play",url:s,percentage:50,duration:o});break;case d.hE.ProgressEvent:e.TrackingEvents[a].offset&&i.push({type:"progress",triggerType:"play",url:s,percentage:50,duration:this.getMilliseconds(e.TrackingEvents[a].offset)})}null!=t&&n&&t.set(s,d.hE.BeaconTypeVideoProgress),r.push({beaconUrl:s,type:d.hE.BeaconTypeVideoProgress})}return{bingBeacons:i,videoUrls:r}}firePageMonetizedTelemetry(e){if(!(null==e?void 0:e.getAttribute))return;const t=e.getAttribute(m.qP);try{const n=JSON.parse(t);(null==n?void 0:n.ism)&&g.M0.sendContentViewEvent(e.parentElement,m.NS.Partial)}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to set isMonetized flag",`Fail to parse telemetryObject json: ${t}`))}}fireVisibilityBeacon(e,t){if(a.k.logCallback((()=>"ad visible for 1 second")),this.firePageMonetizedTelemetry(t),this.visiJsonTrackingData&&this.visiJsonTrackingData.get(t))try{const e=JSON.parse(this.visiJsonTrackingData.get(t)),n=e&&e.tvb;if(n)for(let t=0;t<n.length;t++){const i=n[t];this.beaconsProcessed&&this.beaconsProcessed.has(i)&&this.beaconsProcessed.get(i)===d.hE.BeaconTypeVisibility||(f.allVisiBeaconsFiredOnPage&&f.allVisiBeaconsFiredOnPage.has(i)||this.fireTrackingBeacon(i,d.hE.BeaconTypeVisibility,e.e))}}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire visibility beacon",`Fail to parse beacon json tracking data: ${this.visiJsonTrackingData.get(t)}`))}e&&e.unobserve(t)}fireRequestLevelBeacons(e){e&&e.forEach((e=>{e&&this.fireRequestLevelBeaconCall(e)}))}fireJSTrackers(e,t=!1){if(e&&e.length>0)try{const n=JSON.parse(e),i=n&&n.tjb;if(!Array.isArray(i))return;for(const e of i)e&&"string"==typeof e&&(this.beaconsProcessed&&this.beaconsProcessed.has(e)&&this.beaconsProcessed.get(e)===d.hE.BeaconTypeJsTracker||(t&&this.isXandrVisibilityTracker(e)?this.fireXandrJSTracker(e):this.fireJSTracker(e)))}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire jstrackers",`Fail to parse beacon json tracking data: ${e}`))}}fireJSTracker(e){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(!(0,p.N)())return;const i=(0,h.b0)(e,void 0,!0,void 0);i.onload=()=>{a.k.logCallback((()=>"Added jsTracker url: "+e)),this.beaconsProcessed.set(e,d.hE.BeaconTypeJsTracker),t()},i.onerror=t=>{g.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.is$),{message:"Failed to load partner jsTracker file",pb:Object.assign(Object.assign({},c.is$.pb),{customMessage:`Error occurred while loading ad partner trackerJS file: ${e}`})})),n(t)},document.body.appendChild(i)}))}))}fireRequestLevelBeaconCall(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(e){a.k.logCallback((()=>"Firing encoded requestlevel beacon: "+e));let t=yield new Image(1,1);t.src=e,t=null}}))}firePostTrackingBeacon(e,t,n){let i=d.hE.BeaconFormatEncoded;n||(e=decodeURIComponent(e),i=d.hE.BeaconFormatDecoded),e&&(a.k.logCallback((()=>"Firing "+i+" "+t+" beacon, beaconUrl: "+e)),navigator.sendBeacon(e),this.beaconsProcessed.set(e,t))}fireTrackingBeacon(e,t,n){let i=d.hE.BeaconFormatEncoded;n||(e=decodeURIComponent(e),i=d.hE.BeaconFormatDecoded),e&&(a.k.logCallback((()=>"Firing "+i+" "+t+" beacon, beaconUrl: "+e)),this.fireBeaconCall(e,t))}fireBeaconCall(e,t){try{let n=new Image(1,1);n.src=e,n=null}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.AIp,"Invalid beacon URL",`Fail to parse beacon json tracking data: ${e}`))}finally{this.beaconsProcessed.set(e,t),t===d.hE.BeaconTypeVisibility&&f.allVisiBeaconsFiredOnPage.add(e),t===d.hE.BeaconTypeAdServed&&f.allServeBeaconsFiredOnPage.add(e)}}supportsIntersectionObserver(){return"IntersectionObserver"in n.g&&"IntersectionObserverEntry"in n.g&&"intersectionRatio"in IntersectionObserverEntry.prototype}loadPolyfills(){const e=[];return this.supportsIntersectionObserver()||e.push(n.e("node_modules_intersection-observer_intersection-observer_js").then(n.t.bind(n,76583,23))),Promise.all(e)}isXandrVisibilityTracker(e){return e.includes("trk.js")}fireXandrJSTracker(e){document.addEventListener(u.gL,(t=>{const n=this.extractAdIdFromXandrTrackerUrl(e);t.detail.adUniqueIds.includes(n)&&this.fireJSTracker(this.replaceXandrVisibilityTrackerParam(n,e))}))}replaceXandrVisibilityTrackerParam(e,t){const n=`dom_id=${e};`,i=`dom_elt_var=${e};`;return t.replace(n,i)}extractAdIdFromXandrTrackerUrl(e){var t;const n=null===(t=e.match(/dom_id=([a-zA-Z0-9_-]+);/))||void 0===t?void 0:t[1];return n||(0,s.H)(c.C$l,"Xandr visibility tracker URL doesn't have ad id","dom_id parameter is empty",{trackerUrl:e}),n}get intersectionObserver(){return this.loadPolyfills()}}f.allVisiBeaconsFiredOnPage=new Set,f.allServeBeaconsFiredOnPage=new Set},17615:function(e,t,n){"use strict";n.d(t,{UF:function(){return l}});var i=n(33940),r=n(52144),o=n(72344),a=n(33379);let s,c=!1;const d=new Promise((e=>{s=e}));function l(){return(0,i.mG)(this,void 0,void 0,(function*(){switch(yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){c||(r.A.subscribe(r.U.CookieConsentStatus,(e=>{e!==o._.Unknown&&s()})),c=!0);const e=r.A.get(r.U.CookieConsentStatus);return e!==o._.Unknown?e:((0,a.N)()&&(yield d),r.A.get(r.U.CookieConsentStatus))}))}()){case o._.Required:return!0;case o._.NotRequired:return!1;default:return}}))}},16257:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var i=n(81765),r=n(67462);class o{updateMsaOptOutCookie(e){if(!this.getMsaOptoutCookieData()&&e&&e.optout){const t=!0===e.optout.msaOptOut?"1":"0";this.setMsaOptoutCookie(t)}}getMsaOptoutCookieData(){const e=(0,r.ej)(i.yV.MSAOptOut);return e&&e.length>0?e:null}setMsaOptoutCookie(e){e&&e.length>0&&(0,r.sq)(i.yV.MSAOptOut,e,1,null,"/")}getBrowserOptoutStatus(){const e=(0,r.ej)(i.yV.BrowserOptOut);return!(!e||"1"!==e)}setUserOptOutSettings(){const e=this.getBrowserOptoutStatus(),t=this.getMsaOptoutCookieData(),n=!(!t||"1"!==t),r=(e||n).toString().toLowerCase();let o="";e&&(o="b|"),n&&(o+="m");const a=i.Lr.UserOptOut+":"+r+";"+i.Lr.UserOptOutOptions+":"+o;if(document.head.attributes["data-info"]){const e=document.head.attributes["data-info"].value.split(";");e.find((e=>e.indexOf(i.Lr.UserOptOut)>-1))?e.find((e=>e.indexOf(i.Lr.UserOptOut)>-1))!==i.Lr.UserOptOut+":"+r&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOut+":false",i.Lr.UserOptOut+":"+r).replace(i.Lr.UserOptOut+":true",i.Lr.UserOptOut+":"+r)):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.Lr.UserOptOut+":"+r,e.find((e=>e.indexOf(i.Lr.UserOptOutOptions)>-1))?e.find((e=>e.indexOf(i.Lr.UserOptOutOptions)>-1))!==i.Lr.UserOptOutOptions+":"+o&&(e.includes(i.Lr.UserOptOutOptions+":")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":b|")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":b|",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":b|m")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":b|m",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":m")&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":m",i.Lr.UserOptOutOptions+":"+o))):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.Lr.UserOptOutOptions+":"+o}else document.head.setAttribute("data-info",a)}}},4365:function(e,t,n){"use strict";n.d(t,{c:function(){return _},d:function(){return H}});var i,r=n(33940),o=n(81765),a=n(15213),s=n(88875),c=n(68364),d=n(98304),l=n(19388),u=n(62676),p=n(22704),h=n(52965),g=n(26671),m=n(4935),f=n(90351),v=n(25156),y=n(95592),S=n(89696),C=n(18769),b=n(26007),w=n(78468),T=n(56692),k=n(53909);!function(e){e.SlideshowPreview="ss",e.ArticlePreview="ar",e.VideoPreview="vi"}(i||(i={}));var P=n(87298),A=n(65135);class I{constructor(){this.cmsProviderCache=new Map}getCMSList(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){if(e)try{const n={method:"GET",headers:{}},i=yield(0,P.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){const t=new URL(`${o.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),i=yield fetch(t.toString(),n);if(i.ok)return i.json();A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response from CMS, ${i.statusText}, listId: ${e}`))}))),"getCMSList");if(!i)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response.json(), listId: ${e}`));const a=i;return this.translateToCMSItem(a,e,t,o.Lr.PrivacyUrl)}catch(t){return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Error while fetching CMS Native Ad  ${t}, id: ${e}`))}else A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`No backfill id found, listId: ${e}`))}))}translateToCMSItem(e,t,n,i){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.list||0===e.list.length)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`No CMS Response returned from ${t}`));const r=[];for(const t of e.list){let e=!1;const a=t.extendedProperties;if(a)for(const t of a)if(t.key&&t.key.indexOf("is_content")>-1&&t.values&&t.values.indexOf("true")>-1){e=!0;break}let s;if(null!=t.link&&null!=t.link.title&&t.link.href&&null!=t.link.image&&null!=t.link.image.href){const n=this.getCMSContentId(t.link.image.href);let r,a;if(t.link.ad)if(t.link.ad.providerHref&&t.link.ad.providerHref.href){const e=this.getCMSContentId(t.link.ad.providerHref.href);e?r=yield this.fetchProviderName(e):t.link.ad.sponsorText&&(r=t.link.ad.sponsorText)}else t.link.ad.sponsorText&&(r=t.link.ad.sponsorText);a=r||(null!=t.link.kicker?t.link.kicker:o.ZG.DefaultProviderName),s={title:t.link.title,url:t.link.href,provider:{name:a},imageUrl:n?(0,k.zz)(n,{width:624,height:350,enableDpiScaling:!1}):t.link.image.href,isContent:e,privacyUrl:i}}else if(null!=t.reference&&null!=t.reference.href){const r=this.getCMSContentId(t.reference.href);if(null!=r){const t=yield this.getCMSContent(r);if(!t)continue;s={title:t.title,url:this.constructDestinationUrl(t,n),provider:this.constructProvider(t),imageUrl:this.constructImageUrl(t),isContent:e,privacyUrl:i}}}s&&s.title&&s.imageUrl&&s.url&&r.push(s)}return{id:e._id,items:r}}))}getCMSContent(e){return(0,r.mG)(this,void 0,void 0,(function*(){try{const t=new URL(this.getContentServiceUrlBase().search,`${this.getContentServiceUrlBase()}${o.ZG.CMSContentServiceURl}${e}/`),n=yield fetch(t.toString());if(!n||!n.ok)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Failed to fetch CMS content, cmsId: ${e}`));const i=yield n.json();return i||void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid JSON response to get CMS content, cmsId: ${e}`))}catch(t){return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Error while fetching CMS content ${t}, cmsId: ${e}`))}}))}constructDestinationUrl(e,t){const{category:n}=e,r=n&&n.product||"news",o=n&&n.label||"other",a=i[e.type]||"xx";return`https://www.msn.com/${t}/${b.c.encodeURIComponentForPrime(r||"")}/${b.c.encodeURIComponentForPrime(o||"")}/${b.c.encodeURIComponentForPrime(e.title||"")}/${a}-${e.id}`}constructProvider(e){const{name:t,logo:n}=e.provider;return{name:t,logo:n&&n.id?{src:`${w.E.prod}${n.id}?w=16&h=16`,alt:t}:void 0}}constructImageUrl(e){if(e.images&&!(e.images.length<1)&&e.images[0].id)return(0,k.zz)(e.images[0].id,{width:624,height:350,focalRegion:e.images[0].focalRegion,enableDpiScaling:!1})}getCMSContentId(e){return e&&e.indexOf("cms/api/amp")>-1?e.substring(e.lastIndexOf("/")+1):null}fetchProviderName(e){return(0,r.mG)(this,void 0,void 0,(function*(){try{if(this.cmsProviderCache.get(e))return this.cmsProviderCache.get(e);const t={method:"GET",headers:{}},n=yield(0,P.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){const n=new URL(`${o.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),i=yield fetch(n.toString(),t);if(i.ok)return i.json();A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response from CMS. status: ${i.status}, statusText: ${i.statusText}, url: ${i.url}`))}))),"getProviderName");if(!n)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response.json(), cmsId: ${e}`));const i=n;return i?(this.cmsProviderCache.set(e,i.displayName),i.displayName):void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Failed to parse JSON response, cmsId: ${e}`))}catch(t){return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Error while fetching Provider name  ${t}, cmsId: ${e}`))}}))}getContentServiceUrlBase(){let e=T.jG.ContentServiceUrlBase;return e&&!e.toString().includes("localhost")||(e=new URL(o.Lr.DefaultContentServiceBaseUrl)),e}}var E,x=n(97662),M=n(11394),O=n(45506),L=n(16908),D=n(92773),R=n(75384),F=n(33379),B=n(27003),N=n(62425);!function(e){e.success="success",e.cmsBackfill="cmsBackfill",e.fail="fail"}(E||(E={}));const U={},$=(e,t)=>{var n;(null===(n=T.jG.CurrentRequestTargetScope)||void 0===n?void 0:n.pageExperiments.includes("prg-ad-cms-cnt"))&&(U[t]||(U[t]={[E.success]:0,[E.cmsBackfill]:0,[E.fail]:0}),U[t][e]++,A.M0.sendClientLogEvent({pb:Object.assign({clientLogName:"NativeAdCMSBackfillCount",region:t},U[t])}))};class _{constructor(e,t,n){this.adTemplateConfig=e,this.adServiceConfig=t,this.adBeaconServiceConfig=n,this.beaconService=new C.A(this.adBeaconServiceConfig),this.cmsService=new I,this.samService=new x.B(this.adServiceConfig),this.templateService=new M.E,this.cmsNativeAdsItemsMap=new Map,this.cmsRetryCount=0,this.backfillIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList=[],this.callbackList=[]}resetNativeAdService(){this.backfillIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList.length=0,this.callbackList.length=0,this.samService.clearPreviousInfo()}fetchNativeAds(e,t){var n,i,a;return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||0===e.placements.length)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed","No placements found in the request"));if(e.locale||(e.locale=O.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${O.Al.Locale}, adRequest.locale: ${e.locale}`));(null===(n=this.adServiceConfig)||void 0===n?void 0:n.enableNativeAdXandr)&&(e.enableNativeAdXandr=!0,e.xandrFlightKeywords=null===(i=this.adServiceConfig)||void 0===i?void 0:i.xandrFlightKeywords);const r=this.buildAdResponse(e),s=this.samService.fetchSAMAds(e,!1,!0===(null===(a=this.adTemplateConfig)||void 0===a?void 0:a.useOpenRtb),null,null,t),l=e.locale,u=o.Wi[l];if(!this.cmsItems){const e=yield this.cmsService.getCMSList(u,l);e&&(this.cmsItems=e.items)}const p=yield s;return this.updateAdResponse(r,this.cmsItems,u,p,e.enableNativeAdXandr),r}))}updateAdResponse(e,t,n,i,r){const o=!t||0==t.length,s=!i||!i.placements||0==i.placements.length;if(o&&s)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.v73,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${n} and SAM response`));o&&A.M0.sendAppErrorEvent((0,c.Tr)(d.v73,"Unable to retrieve backfill list",`Backfill list id: ${n}`));const p=this.mapSAMPlacements(i);return e.pageViewId=i&&i.metaData&&i.metaData.pageViewId,e.placements.forEach((n=>{var i;const s=n.region+n.regionIndex,h=p.get(s);if((null===(i=this.adServiceConfig)||void 0===i?void 0:i.enableBuyDirectAd)&&"infopane"==n.region&&15==n.regionIndex&&this.buyDirectItem){const e=this.buyDirectItem,t={title:e.title,destinationUrl:e.url,imageUrl:this.updateImageUrl(n,e.imageUrl),providerName:"Buy with Microsoft"};n.items.push(t),n.privacyUrl=e.privacyUrl,n.isBackfill=!1}else if(h&&h.items&&h.items.length>0){h.items.forEach((e=>{const t={title:e.title,description:e.description,destinationUrl:e.url,imageUrl:e.imageUrl,providerName:e.sourceName,adChoiceIconUrl:e.adChoicesUrl,imageHeight:e.imageHeight,imageWidth:e.imageWidth,clickBeacons:e.clickBeacons,uniqueId:e.uniqueId,feedbackUrl:r?h.feedbackUrl:(0,y.Yf)(e.clickBeacons),verificationParameters:e.verificationParameters,cashback:e.cashback};_.updateAssetDataFields(t,e.assets),n.items.push(t)})),n.privacyUrl=h.privacyUrl,n.adServedUrls=h.adServedUrls,n.jsTrackerUrls=h.jsTrackerUrls,n.visibilityUrls=h.visibilityUrls,n.beaconsJson=h.beaconsJson,n.bingTrackerUrls=h.bingTrackerUrls,n.beaconsSupportHttpPOST=h.beaconsSupportHttpPOST,n.geminiViewabilityDataJson=h.geminiViewabilityDataJson,n.crids=h.crids,this.updateTemplate(n),this.beaconService.sendBeaconForAdServed({beaconsJson:n.beaconsJson,beaconsSupportHttpPOST:n.beaconsSupportHttpPOST}),this.beaconService.fireJSTrackers(h.beaconsJson,e.shouldUseWindowVisibilityTrackingForXandr);const t=!0===O.Al.IsPrerender?performance.now()-(0,l.TZ)(u.DB):performance.now();(0,l.su)(a.q.TimeToServeAd,t),$(E.success,s)}else if(o)A.M0.sendAppErrorEvent((0,c.Tr)(d.m9g,"Unable to backfill invalid sam placement",`Placement key: ${s}`)),this.updateTemplate(n),$(E.fail,s);else{const e=this.backfillIndex++%t.length,i=t[e],r={title:i.title,destinationUrl:i.url,imageUrl:this.updateImageUrl(n,i.imageUrl),providerName:i.provider?i.provider.name:""};n.items.push(r),n.privacyUrl=i.privacyUrl,this.updateTemplate(n),$(E.cmsBackfill,s)}})),e}updateTemplate(e){var t;(null===(t=e.items)||void 0===t?void 0:t.length)>0&&this.templateService.updateTemplate(e,this.adTemplateConfig)}addToCallbackList(e){e&&e.length>0&&this.callbackList.push(...e)}fetchSamAds(e,t=!1,n,i,o){var a,s;return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||0===e.placements.length)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed","No placements found in the request"));if(!(0,F.N)()&&this.adServiceConfig.disableAdsSSR&&!o)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed SSR","Should not call fetchSamAds in render-service if AdsSSR is not enabled"));if(e.locale||(e.locale=O.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${O.Al.Locale}, adRequest.locale: ${e.locale}`));if(this.addToCallbackList(n),this.locale=e.locale,(0,F.N)()&&t&&window.ntpSSRData&&!this.adServiceConfig.disableAdsSSR){if(window.ntpSSRData.samAd)return window.ntpSSRData.samAd;A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed SSR","No sam ad found in SSR Data"))}const r=this.samService.fetchSAMAds(e,t,!0===(null===(a=this.adTemplateConfig)||void 0===a?void 0:a.useOpenRtb),null===(s=this.adTemplateConfig)||void 0===s?void 0:s.msxServiceUrl,i,null,o);if(!(0,F.N)()&&o)return;const l=this.buildAdResponse(e);(0,F.N)()||B.Gq.set("__placeHolderResponse__",(0,h.Z)(l));const u=yield r;return(0,F.N)()||B.Gq.get("__backfillContentDueToSSRAdsFailed__")||(0,N.l)().set(N.H3,(0,h.Z)({placeHolderResponse:l,samResponse:u})),{placeHolderResponse:l,samResponse:u}}))}fetchCmsAds(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||0===e.placements.length)return void A.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed","No placements found in the request"));let i=O.Al.Locale;if("ru-xl"===i&&(i="en-xl"),!this.cmsNativeAdsItemsMap.has(t)){const e=yield this.cmsService.getCMSList(t,i);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const r=this.buildAdResponse(e),o=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];for(const e of r.placements){const t=n.shift();let r,a;if(t){let e=parseInt(t,10);if(e)e=Math.max(e-1,0),e=e<o.length?e:e%o.length,r=o[e];else{if(!this.cmsNativeAdsItemsMap.has(t)){const e=yield this.cmsService.getCMSList(t,i);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const e=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];r=(0,g.Z)(e)[0],r||(r=o[this.cmsAdsCounter%o.length])}}else r=o[this.cmsAdsCounter%o.length];r&&(a={title:r.title,destinationUrl:r.url,imageUrl:this.updateImageUrl(e,r.imageUrl),providerName:r.provider?r.provider.name:""},e.items.push(a),e.privacyUrl=r.privacyUrl),this.updateTemplate(e),this.cmsAdsCounter++}return r}))}updateSamAdResponse(e,t,n){const i=this.cmsItems,r=this.mapSAMPlacements(t),o=!i||0==i.length;return e.pageViewId=t&&t.metaData&&t.metaData.pageViewId,e.placements.forEach((e=>{var t,s,c;(null===(t=this.adServiceConfig)||void 0===t?void 0:t.enableAdsWaterfall)&&"river"===e.region&&e.regionIndex===(null===(s=this.adServiceConfig)||void 0===s?void 0:s.tallAdsIndex)&&(e.region="rivert");const u=e.region+e.regionIndex,h=r.get(u);if((null===(c=this.adServiceConfig)||void 0===c?void 0:c.enableBuyDirectAd)&&"infopane"==e.region&&15==e.regionIndex&&this.buyDirectItem){const t=this.buyDirectItem,n={title:t.title,destinationUrl:t.url,imageUrl:this.updateImageUrl(e,t.imageUrl),providerName:"Buy with Microsoft"};e.items.push(n),e.privacyUrl=t.privacyUrl,e.isBackfill=!1}else if(h&&h.items&&h.items.length>0){h.items.forEach((t=>{const n={title:t.title,adSelectionReason:t.adSelectionReason,description:t.description,destinationUrl:t.url,providerName:t.sourceName,adChoiceIconUrl:t.adChoicesUrl,imageUrl:t.imageUrl,imageHeight:t.imageHeight,imageWidth:t.imageWidth,images:t.images,clickBeacons:t.clickBeacons,uniqueId:t.uniqueId,beaconsJson:t.beaconsJson,feedbackUrl:(0,y.Yf)(t.clickBeacons),originalImageWidth:t.originalImageWidth,originalImageHeight:t.originalImageHeight,verificationParameters:t.verificationParameters,ext:t.ext,adScenarioType:t.adScenarioType,cashback:t.cashback};_.updateAssetVideoField(n,t.assets),_.updateAssetDataFields(n,t.assets),e.items.push(n)}));const t=(0,L.dQ)(e,0);e.videoViewabilityData=t?t.ViewabilityProps:null,e.privacyUrl=h.privacyUrl,e.adServedUrls=h.adServedUrls,e.jsTrackerUrls=h.jsTrackerUrls,e.visibilityUrls=h.visibilityUrls,e.beaconsJson=h.beaconsJson,e.bingTrackerUrls=h.bingTrackerUrls,e.beaconsSupportHttpPOST=h.beaconsSupportHttpPOST,e.geminiViewabilityDataJson=h.geminiViewabilityDataJson,e.providerId=h.providerId,e.crids=h.crids;const i=(0,S.v0)(O.Al.IsPrerender&&!n);n?((0,l.su)(a.q.TimeToServeAdBackground,i),(0,R.lr)().then((()=>{const e=(0,p.Ou)().TTPR;e?(0,l.su)(a.q.TimeToServeAd,e):A.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.iVH),{message:"Could not find TTPR to set TimeToServeAd"}))}))):(0,l.su)(a.q.TimeToServeAd,i)}else if(o)this.handleCmsStandyPlacement(e);else{const t=this.backfillIndex++%i.length,n=i[t],r={title:n.title,destinationUrl:n.url,imageUrl:this.updateImageUrl(e,n.imageUrl),providerName:n.provider?n.provider.name:""};e.items.push(r),e.privacyUrl=n.privacyUrl,e.isBackfill=!0}this.updateTemplate(e)})),e}handleCmsStandyPlacement(e){if(this.cmsItems){const t=this.cmsItems;for(const n of this.callbackFnPlacementList){const i=t[this.backfillIndex++%t.length];if(i){const t={title:i.title,destinationUrl:i.url,imageUrl:this.updateImageUrl(e,i.imageUrl),providerName:i.provider?i.provider.name:""};n.items.push(t),n.privacyUrl=i.privacyUrl,n.isBackfill=!0,this.updateTemplate(n)}}this.callbackList.forEach((e=>{e(this)})),this.callbackList=[],this.callbackFnPlacementList=[]}else e&&this.callbackFnPlacementList.push(e)}loadCmsBackFillList(){let e=this.locale?this.locale:O.Al.Locale;"ru-xl"===e&&(e="en-xl");const t=o.Wi[e];t&&!this.cmsItems&&this.cmsService.getCMSList(t,e).then((e=>{e?(this.cmsItems=e.items,this.handleCmsStandyPlacement()):++this.cmsRetryCount<10&&this.loadCmsBackFillList()})),this.adServiceConfig.enableBuyDirectAd&&this.cmsService.getCMSList("AA13DgW5",e).then((e=>{e&&(this.buyDirectItem=e.items[0])}))}tryGetCmsList(e=0){return(0,r.mG)(this,void 0,void 0,(function*(){let t=this.locale?this.locale:O.Al.Locale;"ru-xl"===t&&(t="en-xl");const n=o.Wi[t];if(!n||!t)return;const i=yield this.cmsService.getCMSList(n,t);return i||(e<5?yield this.tryGetCmsList(++e):void 0)}))}mapSAMPlacements(e){const t=new Map;return e&&e.placements&&e.placements.forEach((e=>{e.region&&e.index&&t.set(e.region+e.index,e)})),t}buildAdResponse(e){const t=[];e.placements.forEach((e=>{e.region&&e.indices&&e.indices.length&&e.indices.forEach((n=>{const i={region:e.region,regionIndex:n,imageHeight:e.img&&e.img.h&&e.img.h.toString(),imageWidth:e.img&&e.img.w&&e.img.w.toString(),items:[]};t.push(i)}))}));return{placements:t,adLabelText:(0,y.En)(e.locale),isGreyAdsLabelEnabled:o.Eg.includes(e.locale),shouldUseWindowVisibilityTrackingForXandr:Boolean(e.shouldUseWindowVisibilityTrackingForXandr),privacyUrl:o.Lr.PrivacyUrl}}loadBuyDirectAd(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.locale?this.locale:O.Al.Locale;if(!this.buyDirectItem){const t=yield this.cmsService.getCMSList("AA13DgW5",e);t&&(this.buyDirectItem=t.items[0])}}))}updateImageUrl(e,t){return e&&e.imageWidth&&e.imageHeight&&t?t.replace("w=624","w="+e.imageWidth).replace("h=350","h="+e.imageHeight):t}static updateAssetDataFields(e,t){const n=(0,m.Z)(t,((e,t)=>{if(null==t?void 0:t.data){const n=(0,f.Z)(t,"data.type"),i=(0,v.Z)(s.aT,(e=>e===`data-${n}`));if(i)if(s.xs.includes(i)){const n=(0,f.Z)(t,"data.value")||"{}";e[i]=JSON.parse(n)}else e[i]=(0,f.Z)(t,"data.value")}else if((null==t?void 0:t.image)||(null==t?void 0:t.img)){let n,i;(null==t?void 0:t.image)?(n=null==t?void 0:t.image,i=(0,f.Z)(t,"image.type")):(n=null==t?void 0:t.img,i=(0,f.Z)(t,"img.type"));const r=(0,v.Z)(s.aT,(e=>e===`image-${i}`));r&&(e[r]={w:null==n?void 0:n.w,h:null==n?void 0:n.h,url:null==n?void 0:n.url,ext:null==n?void 0:n.ext})}else(null==t?void 0:t.title)&&(e.title=t.title.text);return e}),{});e.assets=n}static updateAssetVideoField(e,t){t&&t.length>0&&t.forEach((t=>{const n=(0,f.Z)(t,"video.vasttag");n&&(e.video=n)}))}getAdTagStyleByLocale(e){let t=null!=e?e:O.Al.Locale;return"ru-xl"===t&&(t="en-xl"),{adLabelText:(0,y.En)(t),isGreyAdsLabelEnabled:o.Eg.includes(t)}}}(0,r.gn)([(0,D.Et)(d.rEw,"fetchNativeAds")],_.prototype,"fetchNativeAds",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateAdResponse")],_.prototype,"updateAdResponse",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateTemplate")],_.prototype,"updateTemplate",null),(0,r.gn)([(0,D.Et)(d.rEw,"fetchSamAds")],_.prototype,"fetchSamAds",null),(0,r.gn)([(0,D.Et)(d.rEw,"fetchCmsAds")],_.prototype,"fetchCmsAds",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateSamAdResponse")],_.prototype,"updateSamAdResponse",null),(0,r.gn)([(0,D.Et)(d.rEw,"handleCmsStandyPlacement")],_.prototype,"handleCmsStandyPlacement",null),(0,r.gn)([(0,D.Et)(d.rEw,"loadCmsBackFillList")],_.prototype,"loadCmsBackFillList",null),(0,r.gn)([(0,D.Et)(d.rEw,"tryGetCmsList")],_.prototype,"tryGetCmsList",null),(0,r.gn)([(0,D.Et)(d.rEw,"mapSAMPlacements")],_.prototype,"mapSAMPlacements",null),(0,r.gn)([(0,D.Et)(d.rEw,"buildAdResponse")],_.prototype,"buildAdResponse",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateImageUrl")],_.prototype,"updateImageUrl",null),(0,r.gn)([(0,D.Et)(d.rEw,"getAdTagStyleByLocale")],_.prototype,"getAdTagStyleByLocale",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateAssetDataFields")],_,"updateAssetDataFields",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateAssetVideoField")],_,"updateAssetVideoField",null);const H=(0,D.Et)(d.Evv,"getNativeAdService")(((e,t)=>{const n=B.Gq.get("__NativeAdServiceInstance__",(()=>new _(e||{},t)));return n.resetNativeAdService(),n}))},97662:function(e,t,n){"use strict";n.d(t,{B:function(){return be}});var i,r=n(33940),o=n(68364),a=n(98304),s=n(19388),c=n(62676),d=n(89696),l=n(22704),u=n(56692),p=n(76754),h=n(45506),g=n(10877),m=n(32005),f=n(67462),v=n(81765),y=n(53076),S=n(12108);!function(e){e.AR="AR",e.GA="GA",e.VI="VI",e.EDGECHRNTP="edgechrntp",e.EDGECHRDHP="edgechrdhp",e.MSNEWS="msnews",e.FirstParty="firstparty",e.SAA="saa",e.SAI="sai",e.VerticalLandingPage="vlp",e.WINVLP="winvlp",e.WINAR="winar",e.WINGA="winga",e.WINVI="winvi",e.WEBCOMPAR="webcompar",e.WEBCOMPGA="webcompga",e.WEBCOMPVI="webcompvi",e.WATCH="watch",e.WINWEB="Winweb"}(i||(i={}));var C,b,w,T,k,P,A=n(15213);!function(e){e[e.Sponsored=1]="Sponsored",e[e.Description=2]="Description",e[e.Rating=3]="Rating",e[e.Likes=4]="Likes",e[e.Downloads=5]="Downloads",e[e.Price=6]="Price",e[e.Saleprice=7]="Saleprice",e[e.Phone=8]="Phone",e[e.Address=9]="Address",e[e.Description2=10]="Description2",e[e.DisplayUrl=11]="DisplayUrl",e[e.CTAText=12]="CTAText",e[e.InstallmentPrice=500]="InstallmentPrice",e[e.PriceDrop=501]="PriceDrop",e[e.FreeShipping=502]="FreeShipping",e[e.TopViewed=503]="TopViewed",e[e.Sold=504]="Sold",e[e.SpecialOffer=505]="SpecialOffer",e[e.EliteBadge=506]="EliteBadge",e[e.Condition=507]="Condition",e[e.LIA=508]="LIA",e[e.CurbsidePickup=509]="CurbsidePickup",e[e.Review=510]="Review",e[e.ShortTitle=511]="ShortTitle",e[e.ReturnPolicy=512]="ReturnPolicy",e[e.DisclaimerText=513]="DisclaimerText",e[e.AdSelectionReason=514]="AdSelectionReason",e[e.Discount=600]="Discount"}(C||(C={})),function(e){e[e.Mobile=1]="Mobile",e[e.PC=2]="PC"}(b||(b={})),function(e){e[e.Large=3]="Large",e[e.MultipleImages=600]="MultipleImages"}(w||(w={})),function(e){e[e.TrackingAllowed=0]="TrackingAllowed",e[e.NoTrackingAllowed=1]="NoTrackingAllowed"}(T||(T={})),function(e){e[e.Impression=1]="Impression",e[e.Viewed=2]="Viewed"}(k||(k={})),function(e){e[e.Image=1]="Image",e[e.JavaScript=2]="JavaScript"}(P||(P={}));var I=n(65135),E=n(17615),x=n(18769),M=n(16257),O=n(93450),L=n(37574),D=n(62661),R=n(67893),F=n(987);const B=(e,t,n,i,s,c,l,u)=>(0,r.mG)(void 0,void 0,void 0,(function*(){var e;if(s){const r=s.serverTiming&&(null===(e=s.serverTiming[0])||void 0===e?void 0:e.duration);if(r&&l(A.q.AdServerLatency,r),i>-1){const e=(0,d.v0)(t&&!n,s.requestStart),r=e-i;l(A.q.RequestSent,r>0?r:0),c||u(n?A.q.TimeToRequestAdBackground:A.q.TimeToRequestAd,0,e)}l(A.q.TimeToAdResponse,(0,d.v0)(t&&!n,s.responseEnd)),s.isApproximate||u(A.q.AdFetched,s.fetchStart,s.responseEnd),l(A.q.ApiDuration,null==s?void 0:s.duration)}else(0,o.H)(a.iVH,"Unable to find performance entry for RTB request")})),N=(e,t,n)=>(0,r.mG)(void 0,void 0,void 0,(function*(){var e;const i={requestStart:t,responseEnd:n,duration:n-t,isApproximate:!0},r=null===(e=(0,l.Ou)())||void 0===e?void 0:e[A.q.RequestInitiated];B(0,!1,!1,r,i,!0,((e,t)=>{(0,d.hf)(e,t)}),((e,t,n)=>{(0,d.hf)(e,n-t)}))})),U=(e,t,n=!1)=>(0,r.mG)(void 0,void 0,void 0,(function*(){const i=performance.getEntriesByName&&performance.getEntriesByName(e)&&performance.getEntriesByName(e)[0],r=(0,s.O0)(A.q.RequestInitiated);B(0,t,n,r,i,!1,((e,t)=>{(0,s.su)(e,t)}),((e,t,n)=>{(0,s.O_)(e,t,n)}))}));function $(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}var _=n(19809),H=n(87298),W=n(33379),j=n(36585),G=n(99753),V=n(31177);var q,z=n(27003),Q=n(99590),Z=n(49972),K=n(98429);!function(e){e.AdReturned="adAvailable",e.AdNotReturned="AdNotReturned"}(q||(q={}));class J{constructor(){this.groupedAdRequests={},this.adRequestsInfoById={},this.initialized=!1,this.handleAdNotReturned=e=>{const t=e.targetId;if(!t||!this.adRequestsInfoById[t])return;const{_groupKey:n,_cancelled:i}=this.adRequestsInfoById[t];i||(this.adRequestsInfoById[t]=Object.assign(Object.assign({},this.adRequestsInfoById[t]),{_fetched:!0}),this.updateGroupInfoOnAdUpdate(n))},this.handleAdReturned=e=>{const t=e.targetId;if(!t||!this.adRequestsInfoById[t])return;const{_groupKey:n,_onAvailable:i,_cancelled:r}=this.adRequestsInfoById[t];if(r)return;const o=i&&i(this.adRequestsInfoById[t].initialData,e);this.adRequestsInfoById[t]=Object.assign(Object.assign({},this.adRequestsInfoById[t]),{_fetched:!0,fetchedData:o}),this.sdkWrapper.fireServeBeacon(e),this.updateGroupInfoOnAdUpdate(n)}}initialize(e){this.initialized||(this.sdkWrapper=e,this.sdkWrapper.addEventListener(q.AdReturned,this.handleAdReturned),this.sdkWrapper.addEventListener(q.AdNotReturned,this.handleAdNotReturned),this.initialized=!0)}tryRegisterPlacements(e,t,n){const i=this.findValidPlacements(e);if(0===i.length)return!1;const r=[];let o=0;i.forEach((e=>{const{targetId:t}=e||{};o+=1,r.push(t)}));const a=$();return this.groupedAdRequests[a]={targetIds:r,pendingCount:o,onCompleteAll:t},i.forEach((e=>{const{targetId:t}=e;this.adRequestsInfoById[t]={initialData:Object.assign({},e),_groupKey:a,_onAvailable:n}})),!0}unregisterPlacements(e){const t=this.findValidPlacements(e);if(0===t.length)return null;let n;return t.forEach((e=>{const{targetId:t}=e;this.sdkWrapper&&this.sdkWrapper.removeAllEventListeners(t),this.adRequestsInfoById[t]._cancelled=!0,n||(n=this.adRequestsInfoById[e.targetId]._groupKey)})),this.collectGroupResults(n)}findValidPlacements(e){return e&&0!==e.length?e.filter((e=>this.validatePlacement(e))):[]}validatePlacement(e){const{targetId:t}=e||{};return!!t||(I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.Mc7),{message:"Missing targetId in placement info"})),!1)}collectGroupResults(e){if(!e)return null;const t=this.groupedAdRequests[e];if(!t||!t.targetIds||0==t.targetIds.length)return null;const n=[];return t.targetIds.forEach((e=>{const t=this.adRequestsInfoById[e];if(t&&t._fetched){const e=Object.assign(Object.assign({},t.initialData||{}),t.fetchedData||{});n.push(e)}})),0===n.length&&I.M0.sendAppErrorEvent((0,o.Tr)(a.XWd,"No placements returned from Xandr SDK per request")),{data:n}}updateGroupInfoOnAdUpdate(e){const t=this.groupedAdRequests[e];t.pendingCount-=1,0===t.pendingCount&&t.onCompleteAll(this.collectGroupResults(e))}}var X,Y=n(12884),ee=n(60367);!function(e){e.AdRequested="adRequested",e.AdReturned="adAvailable",e.AdRefreshed="adLoaded",e.AdError="adError",e.AdRequestFailure="adRequestFailure",e.AdCollapse="adCollapse",e.AdNoBid="adNoBid"}(X||(X={}));var te=n(64573);class ne{constructor(){this.sdkUrl="https://acdn.adnxs.com/ast/ast.js",this.sdkPending=!1,this.apnMemberId=this.getApnMemberId()}static getInstance(){return z.Gq.get("__XandrAdSdkWrapper__",(()=>new ne))}loadSdkAsync(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{if(!(0,W.N)())return I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.FER),{message:"unexpected call to loadSdkAsync on server side"})),void t(new Error("unexpected call to loadSdkAsync on server side"));if(globalThis.apntag)return e();if(this.sdkPending)return void window.addEventListener("xandrAdSdkLoadedCustomEvent",(function(){e()}));const n=(0,Y.b0)(this.sdkUrl);this.sdkPending=!0,n.onload=()=>{const t=new CustomEvent("xandrAdSdkLoadedCustomEvent");window.dispatchEvent(t),e()},n.onerror=e=>{this.sdkPending=!1,I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.FER),{message:JSON.stringify(e)})),t(e)},document.body.appendChild(n)}))}))}tryBuildPageOptions(e){var t;if(!globalThis.apntag){const e="Xandr SDK is not loaded";return I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.FER),{message:e})),!1}const{prid:n,rid:i,pageType:r,locale:o,verticalName:s,audienceMode:c,ocid:d,flightKeywords:l}=e||{};if(this.pageType||(this.pageType=r||(null===(t=null===h.Al||void 0===h.Al?void 0:h.Al.ClientSettings)||void 0===t?void 0:t.pagetype)),!this.providerId)if(n)this.providerId=n;else{this.providerId="EMPTYPIDAN";const e="ProviderId is empty for page type: "+this.pageType;I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.pa7),{message:e}))}this.externalUid||(this.externalUid=(0,f.jG)());const u=(0,ee.m)();this.pageOptions=this.pageOptions||{member:this.apnMemberId,user:{externalUid:this.externalUid,externalImpId:u,userIds:[{type:"extendedIDs",eids:[{id:this.externalUid,source:"msft_muid"}]}]},keywords:{page_type:this.pageType,rid:i,provider_id:this.providerId,user_locale:o,vertical:s,audience_mode:c,ocid:d,rebroadcast_origin:"MSN",optout:this.getBrowserOptoutStatus(),flight:l?Object.keys(l):[]},trackingManagement:{native:{loadViewabilityScriptAt:"impression"}}};const p=te.h.getEnvelopeIdFromCookie();return p&&this.pageOptions.user.userIds.push({type:"liveramp",id:p}),(0,Y.zw)().startsWith("localhost.")&&(this.pageOptions.test=!0),!0}clearEventHandlers(e){globalThis&&globalThis.apntag&&(globalThis.apntag.offEvent(X.AdRequested,e),globalThis.apntag.offEvent(X.AdReturned,e),globalThis.apntag.offEvent(X.AdRefreshed,e),globalThis.apntag.offEvent(X.AdError,e),globalThis.apntag.offEvent(X.AdRequestFailure,e),globalThis.apntag.offEvent(X.AdCollapse,e),globalThis.apntag.offEvent(X.AdNoBid,e))}getApnMemberId(){return["en-au","en-nz"].includes(u.jG.CurrentMarket)?1705:280}getBrowserOptoutStatus(){return(0,f.ej)(v.yV.BrowserOptOut)}}const ie=(0,Q.h)(ne);var re=n(82852);class oe{constructor(){this.memberId=280,this.events=[]}static getInstance(){return z.Gq.get("__NativeAdXandrWrapper__",(()=>new oe))}loadSdkAsync(){return(0,r.mG)(this,void 0,void 0,(function*(){return ie.loadSdkAsync().then((()=>!0)).catch((()=>!1))}))}tryConfigPlacements(e,t){return!!ie.tryBuildPageOptions(t)&&(this.providerId=ie.providerId,this.pageOptions=ie.pageOptions,globalThis.apntag.setPageOpts(this.pageOptions),e.forEach((e=>{ie.clearEventHandlers(e.targetId);const n=this.buildNativeAdPlacement(e,t);globalThis.apntag.defineTag(n),this.attachEventHandlers(e.targetId)})),!0)}startAdServerCalls(){globalThis&&globalThis.apntag&&globalThis.apntag.loadTags()}fireServeBeacon(e){globalThis&&globalThis.apntag&&globalThis.apntag.fireImpressionTrackers(e)}attachClickBeacon(e,t){globalThis&&globalThis.apntag&&globalThis.apntag.attachClickTrackers(e,t)}addEventListener(e,t){(0,re.O)(e,t,this.events)}removeAllEventListeners(e){ie.clearEventHandlers(e)}buildNativeAdPlacement(e,t){var n;this.countryCode||(this.countryCode=(null===(n=null===u.jG||void 0===u.jG?void 0:u.jG.LocaleContentMarket)||void 0===n?void 0:n.market)||"CO");const i={targetId:e.targetId,member:this.memberId,invCode:e.tagCode,native:{title:{required:!0,max_length:140},image:{required:!0,sizes:[{width:e.img.w,height:e.img.h}]},sponsoredBy:{required:!0},clickUrl:{required:!0},privacySupported:!0},extInvCode:this.countryCode,allowSmallerSizes:!1,nobidIfUnsold:(!1,!0),trafficSourceCode:"tg:"+e.tagCode+";p:"+this.providerId+";r:"+t.rid,keywords:{pos:e.regionIndex}};return i}attachEventHandlers(e){const t=this.events;globalThis.apntag.onEvent(X.AdRequested,e,(()=>{})),globalThis.apntag.onEvent(X.AdReturned,e,(e=>{(0,re.N)(q.AdReturned,e,t,"xandr")})),globalThis.apntag.onEvent(X.AdError,e,(e=>{this.adNotReturned(e,t)})),globalThis.apntag.onEvent(X.AdRequestFailure,e,(e=>{this.adNotReturned(e,t)})),globalThis.apntag.onEvent(X.AdNoBid,e,(e=>{this.adNotReturned(e,t)}))}adNotReturned(e,t){(0,re.N)(q.AdNotReturned,e,t,"xandr")}}const ae=(0,Q.h)(oe);var se=n(26680);const ce="infopane",de={hp:{[ce]:[6,18,29]}},le=["interstitialgallery","interstitialgallerymsx","galleryonepagecontent"],ue=["river","rivertall","peekriver","sriver"],pe=["river-dbl","riverdb"],he=["river-half","river-half-textonly"],ge=(e,t)=>{var n,i,r;if(!e||!e.native)return{};const o=e.native,a=12085===e.buyerMemberId?"https://account.microsoft.com/privacy/ad-settings":"https://monetize.xandr.com/privacy-center/captcha?next_page=/privacy-center/delete";const s=((e,t)=>{var n,i;const{rid:r,locale:o,region:a,index:s,relativeIndex:c,pageType:d,tagCode:l}=t||{},{msft:p,auctionId:h}=e,{bidder_id:g,msx_creative_id:m}=p||{},f=null===(i=null===(n=u.jG.CurrentRequestTargetScope)||void 0===n?void 0:n.browser)||void 0===i?void 0:i.browserType,v=e.is_prebid_server_bid?e.buyerMemberId:"0";return(0,se.$A)("https://g.msn.com/neg/0?type=adsfb",{rid:r,r:a,i:null==s?void 0:s.toString(),p:d,l:o,d:null==g?void 0:g.toString(),b:f,a:h,ii:null==c?void 0:c.toString(),c:m,tid:l,m:null==v?void 0:v.toString()})})(e,t);return{imageWidth:null===(n=o.image)||void 0===n?void 0:n.width,imageHeight:null===(i=o.image)||void 0===i?void 0:i.height,items:[{url:o.clickUrl,sourceName:null==o?void 0:o.sponsoredBy,title:o.title,imageUrl:null===(r=o.image)||void 0===r?void 0:r.url,uniqueId:e.targetId,adChoicesUrl:o.privacyLink,clickBeacons:o.clickTrackers&&JSON.stringify({tcb:o.clickTrackers})}],privacyUrl:a,feedbackUrl:s,beaconsJson:JSON.stringify({e:!0})}};class me{static getInstance(){return z.Gq.get("__NativeAdSdkService__",(()=>new me))}fetchAds(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return e&&e.placements&&0!==e.placements.length?ae.loadSdkAsync().then((n=>{if(!n)return null;const i=this.buildPlacementsToFetch(e,t);if(!ae.tryConfigPlacements(i,t))throw new Error("NativeAdXandrWrapper: tryConfigPlacements failed");this.eventHub||(this.eventHub=new J,this.eventHub.initialize(ae));const d=this.buildPlacementsRegisteredToEventHub(i,t);let l;if(!this.eventHub.tryRegisterPlacements(d,((...e)=>l(...e)),this.calculateUpdates))throw new Error("NativeAdSdkEventHub: tryRegisterPlacements failed");const u=!0===h.Al.IsPrerender?performance.now()-(0,s.TZ)(c.DB):performance.now();(0,s.su)(A.q.RequestInitiated,u),ae.startAdServerCalls();const p=this.calculateRequestTimeout();return(g=p,m=new Promise((e=>l=e)),(0,r.mG)(void 0,void 0,void 0,(function*(){const e=(0,V.rh)(g);return Promise.race([m,e])}))).then((e=>{if(!e){const e=this.eventHub.unregisterPlacements(d),t=(null==e?void 0:e.data)||[],n=i.filter((e=>!t.find((t=>t.targetId===e.targetId)))).map((e=>e.targetId));return I.M0.sendAppErrorEvent((0,o.Tr)(a._nz,`Timeout to fetch native ads from Xandr SDK within ${p}ms`,`missing placements: (${n.join(",")})`)),this.formatAdRespons(e)}return this.formatAdRespons(e)}));var g,m})).catch((e=>(I.M0.sendAppErrorEvent((0,o.Tr)(a.nZ_,"Error while fetch native ads from Xandr SDK",`fetchAds reject: ${(0,Z.n)(e)}`)),null))):(I.M0.sendAppErrorEvent((0,o.Tr)(a.nZ_,"Empty placements in ad request")),Promise.resolve(null))}))}formatAdRespons(e){return{placements:(null==e?void 0:e.data)||[]}}buildPlacementsToFetch(e,t){const n=[];e.placements.forEach((e=>{const{indices:i,img:r,region:o,allIndices:a,diceRoll:s}=e;let{adContainerIds:c}=e;c||(c=i.map((e=>`${t.pageType}-${o}-${e}-${(0,K.pW)()}`))),i&&i.length&&c&&c.length&&i.forEach(((e,t)=>{n.push({region:o,regionIndex:e,mappedPosition:Number(e),targetId:c[t],img:r,allIndices:a,diceRoll:s,tagCode:void 0})}))}));const i={pageType:t.pageType,previousRiverNativeAdCount:t.previousRiverNativeAdCount,previousReservedRiverNativeAdCount:t.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:t.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:t.previousRiverHalfNativeAdCount};return((e,t)=>{var n,i,r,o;let a=0,s=0,c=0,d=0,l=null!==(n=t.previousRiverNativeAdCount)&&void 0!==n?n:0,u=null!==(i=t.previousReservedRiverNativeAdCount)&&void 0!==i?i:0,p=null!==(r=t.previousRiverDualWideNativeAdCount)&&void 0!==r?r:0,h=null!==(o=t.previousRiverHalfNativeAdCount)&&void 0!==o?o:0,g=0,m=0;e.forEach((e=>{if(!e.isStrictIndices){const n=t.pageType.toLowerCase(),i=e.region.toLowerCase(),r=e.mappedPosition;if(de[n]&&de[n][i]&&de[n][i].indexOf(r)>=0)return;i===ce||"peekinfopane"===i?e.allIndices&&""!==e.diceRoll?e.mappedPosition=e.allIndices.indexOf(r.toString())+1:(a+=1,e.mappedPosition=a):"infopane.river"===i?(s+=1,e.mappedPosition=s):"resinfopane"===i?(c+=1,e.mappedPosition=c):le.indexOf(i)>=0?(d+=1,e.mappedPosition=d):ue.indexOf(i)>=0?(l+=1,e.mappedPosition=l):"resriver"===i?(u+=1,e.mappedPosition=u):"river_amp"===i?(g+=1,e.mappedPosition=g):pe.indexOf(i)>=0?(p+=1,e.mappedPosition=p):he.indexOf(i)>=0?(h+=1,e.mappedPosition=h):"rightrail"===i&&(m+=1,e.mappedPosition=m)}})),e.forEach((e=>{e.tagCode=`${t.pageType}-${e.region}-${e.mappedPosition}`.toLowerCase()}))})(n,i),n}buildPlacementsRegisteredToEventHub(e,t){const n=[];return e.forEach(((e,i)=>{const{region:r,regionIndex:o,targetId:a,tagCode:s}=e;n.push({targetId:a,region:r,index:Number(o),relativeIndex:i+1,pageType:t.pageType,id:`extcontentsponcon_${t.pageType}_${r}_${o}`,rid:t.rid,locale:t.locale,tagCode:s})})),n}calculateUpdates(e,t){var n,i,r;return(null==t?void 0:t.native)||I.M0.sendAppErrorEvent((0,o.Tr)(a.yL3,"Missing native in returned ad object")),(null===(n=null==t?void 0:t.native)||void 0===n?void 0:n.clickTrackers)||I.M0.sendAppErrorEvent((0,o.Tr)(a.jSV,"Missing click trackers in returned ad object")),(null===(i=null==t?void 0:t.native)||void 0===i?void 0:i.impressionTrackers)||I.M0.sendAppErrorEvent((0,o.Tr)(a.qok,"Missing impression trackers in returned ad object")),(null===(r=null==t?void 0:t.native)||void 0===r?void 0:r.javascriptTrackers)&&I.M0.sendAppErrorEvent((0,o.Tr)(a.Z6e,"Javascript trackers are not expected in returned ad object")),ge(t,e)}calculateRequestTimeout(){return v.il.Timeout}}const fe=(0,Q.h)(me);var ve=n(62425),ye=n(3635),Se=n(59002);let Ce=!0;class be{constructor(e){this.config=e,this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.beaconService=new x.A,this.cookieService=new M.N,this.ecasession=v.Lr.Ecasession;const t=O._.getInstance().rootReducer;if("edgeChromium"===u.jG.AppType){const e=t.connector(y.z.ChromiumPageSettings);e&&(this.anaheimPageLayout=e.getCurrentState().currentLayout)}const n=t.connector(y.z.SharedState);n&&n.getCurrentState().useHistory?(0,R.lY)().addSwitchListener(this.onPivotSwitch.bind(this),L.I.Monetization):(0,D.l)().addSwitchListener(this.onPivotSwitch.bind(this),L.I.Monetization)}get sourceUrl(){if(this._sourceUrl)return this._sourceUrl;this._sourceUrl=u.jG.HostPage.originalUrl;const e=u.jG.CurrentRequestTargetScope.pageType,t=u.jG.HostPage.verticalKey;if(e&&t){const n=e.toLowerCase();(n.indexOf(S.G.DHP)>-1||n.indexOf(S.G.NTP)>-1)&&(this._sourceUrl="https://"+u.jG.HostPage.hostName+"/"+t+"/"+e)}return this._sourceUrl}get pageType(){if(this._pageType)return this._pageType;const e=u.jG.CurrentRequestTargetScope.pageType,t=u.jG.CurrentRequestTargetScope.ocid;switch(u.jG.AppType){case"edgeChromium":this._pageType=i.EDGECHRNTP;break;case"views":if((0,p.wq)()&&["article","gallery"].includes(e)){const e=(0,j.v1)();this._pageType=e&&"iOS"===e.platform?i.SAI:i.SAA}else if("article"===e)this._pageType=this.isWindowsViewsPage(t)?i.WINAR:i.WEBCOMPAR;else if("gallery"===e)this._pageType=this.isWindowsViewsPage(t)?i.WINGA:i.WEBCOMPGA;else if("video"===e)this._pageType=i.WATCH;else{new Set(["topic","source"]).has(e)&&(this._pageType=i.VerticalLandingPage)}break;case"sports":case"hub":this._pageType=i.VerticalLandingPage;break;case"windows":location.href.includes("feed/interest/following")?this._pageType=i.WINWEB:this._pageType=e;break;default:this._pageType=e}return this._pageType}fetchSAMAds(e,t=!1,n=!1,i=null,l,p,g){var m,y,S,C,b;return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||e.placements.length<1)return void I.M0.sendAppErrorEvent((0,o.Tr)(a.rmC,"Invalid request to fetch native ads","No placements found in the request"));const r=e.pageType||this.pageType;if(!r)return void I.M0.sendAppErrorEvent((0,o.Tr)(a.rmC,"Invalid request to fetch native ads","No page type found"));const w="ru-xl"===e.locale?"en-xl":e.locale,T=null===(m=null===u.jG||void 0===u.jG?void 0:u.jG.HostPage)||void 0===m?void 0:m.verticalKey,k=null===(y=null===u.jG||void 0===u.jG?void 0:u.jG.CurrentRequestTargetScope)||void 0===y?void 0:y.audienceMode,P=null===(S=null===u.jG||void 0===u.jG?void 0:u.jG.CurrentRequestTargetScope)||void 0===S?void 0:S.ocid,x=this.riverNativeAdCount,M=this.reservedRiverNativeAdCount,O=this.dualWideRiverNativeAdCount,L=this.halfRiverNativeAdCount;if(e.enableNativeAdXandr){const t={placements:this.getPlacementsForXandr(e,r)};return fe.fetchAds(t,{rid:this.getImpressionId(),prid:e.prid,pageType:r,locale:w,verticalName:T,audienceMode:k,ocid:P,flightKeywords:e.xandrFlightKeywords,previousRiverNativeAdCount:x,previousReservedRiverNativeAdCount:M,previousRiverDualWideNativeAdCount:O,previousRiverHalfNativeAdCount:L})}this._isSuperAppPage=this.isSuperAppPage(r,e.appName),this._isChannelAppPage=this.isChannelAppPage(r,e.appName),this._isMsnHpMobileAppPage=this.isMsnHpMobileAppPage(r,e.appName);const D=this.isNotMyFeed();Ce=!1;const R=this.getImpressionId(),B=!this._isSuperAppPage&&this.cookieService.getBrowserOptoutStatus(),N=!this._isSuperAppPage&&(yield(0,E.UF)()),U=this.getMuid(e.muid),$=e.partnerId||u.jG.CurrentRequestTargetScope.pageType,{anaheimColLayout:_}=e,H=!!window.__tcfapi;N||this._isSuperAppPage||!t||(this.ecasession=(0,f.ej)(v.yV.TaboolaSessionCookieName)||this.ecasession);const j=this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage||!(!h.Al.ClientSettings||!h.Al.ClientSettings.deviceFormFactor||"phone"!==h.Al.ClientSettings.deviceFormFactor);void 0===this.isAdBlock&&(this.config&&this.config.sendAdBlockDetection?this.isAdBlock=function(){if((0,F.$o)().supported){const e=(0,F.$o)().getObject("BT_AA_DETECTION",void 0);if(void 0!==e)return!1===e.acceptable}return!1}():this.isAdBlock=!1);const G={adRefreshVariant:null!==(C=e.adRefreshVariant)&&void 0!==C?C:"",locale:w,rid:(0,W.N)()?R:u.jG.ActivityIdLowerCaseNoHypens,partnerId:$,content:{sourceUrl:this.sourceUrl,pageType:r,previousReservedRiverNativeAdCount:M,previousRiverDualWideNativeAdCount:O,previousRiverHalfNativeAdCount:L,previousRiverNativeAdCount:x,verticalName:T,anaheimPageLayout:this.anaheimPageLayout,anaheimColLayout:_,isXfeed:D,audienceMode:k},user:{muid:U,browserOptOut:B,isAdblock:this.isAdBlock,gdpr:H},placements:this.getPlacements(e,r),extensions:this.getExtensions(this.lastResponseMetadata,this.ecasession),isCookieWallPresent:N,isPeregrine:!0,device:{isMobile:j}};(0,W.N)()||(G.tmax=v.Lr.SamOpenRTBMinTimeout,(0,Se.Z)(null===(b=this.config)||void 0===b?void 0:b.adSSRTimeoutSinceAdReqInMS)&&(G.tmax=this.config.adSSRTimeoutSinceAdReqInMS)),(0,Se.Z)(e.tmax)&&(G.tmax=e.tmax);const V=this.config&&this.config.enablePrerenderAdsAuctionFlag&&(0,W.N)(),q=this.config&&this.config.enableSponsoredCollectionSSR&&!(0,W.N)();(V||q)&&(G.content.prerender=l?1:0);const z=(0,f.ej)(v.il.BCPCookieKey);"bingHomepage"===u.jG.AppType&&z&&(G.user.bcp=z),this._isSuperAppPage&&(G.app={adid:e.adid,anid:e.anid,muid:e.muid,sapphireid:e.sapphireid,version:e.clientVersion,bundle:e.packageName}),(0,W.N)()&&(G.extensions.impressedCrids=ye.k.getDedupeIds());const Q=i||v.Lr.SamDomain,Z=n?v.Lr.SamOpenRtbEndpoint:v.Lr.SamEndpoint,K=new URL(Z,Q),J=n?this.createOpenRtbRequest(G):G,X=JSON.stringify(J),Y=!0===h.Al.IsPrerender?performance.now()-(0,s.TZ)(c.DB):performance.now();return(0,W.N)()?((0,s.su)(A.q.RequestInitiated,Y),this.fetchSAMAdsCSR(X,w,U,K.href,r,J,l,n,p)):((0,d.hf)(A.q.RequestInitiated,Y),this.fetchSAMAdsSSR(X,w,U,K.href,r,J,l,n,g))}))}generateSourceUrl(){const e=u.jG.CurrentRequestTargetScope.pageType;let t=u.jG.HostPage.originalUrl;const n=u.jG.HostPage.verticalKey;if(e&&n){const i=e.toLowerCase();(i.indexOf(S.G.DHP)>-1||i.indexOf(S.G.NTP)>-1)&&(t="https://"+u.jG.HostPage.hostName+"/"+n+"/"+e)}return t}processAdResponse(e){if(200!==e.status)return 204===e.status?(I.M0.sendAppErrorEvent((0,o.Tr)(a.vvT,"No content received from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}`)),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void I.M0.sendAppErrorEvent((0,o.Tr)(a.I2B,"Invalid response from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}`));try{const t=JSON.parse(e.response);if(!t)return void I.M0.sendAppErrorEvent((0,o.Tr)(a.K8d,"Invalid json response from SAMRTB",`Status: ${e.status}, Invalid json: ${e.response}`));const n=t.metaData;return this.processMetaData(n),this.beaconService.fireRequestLevelBeacons(n.requestLevelBeaconUrls),(0,W.N)()||(0,d.hf)("samRTBResponseFinishedProcessing",(0,l.UE)()),t}catch(t){return void(0,o.OO)(t,a.ryt,"Failed to process SAMRTB response",`Status: ${e.status}, json: ${e.response}`)}}processOpenRtbAdResponse(e,t){if(200!==t.status)return 204===t.status?(I.M0.sendAppErrorEvent((0,o.Tr)(a.vvT,"No content received from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`)),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void I.M0.sendAppErrorEvent((0,o.Tr)(a.I2B,"Invalid response from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`));try{const n=JSON.parse(t.response);if(!n)return void I.M0.sendAppErrorEvent((0,o.Tr)(a.K8d,"Invalid json response from SAMRTB",`Status: ${t.status}, Invalid json: ${t.response}`));const i=this.convertOpenRtbResponseToNativeAdResponse(e,n),r=i.metaData;return this.processMetaData(r),this.beaconService.fireRequestLevelBeacons(r.requestLevelBeaconUrls),i}catch(e){return void(0,o.OO)(e,a.ryt,"Failed to process SAMRTB response",`Status: ${t.status}, json: ${t.response}`)}}createOpenRtbRequest(e){var t;const n={native:{assets:[{id:1,img:{type:w.Large}}]}},i=JSON.stringify(n);let r=1;const o=e.placements.flatMap((t=>t.indices.map((n=>({id:(r++).toString(),tagid:`${e.content.pageType}-${t.region}-${n}`,native:{request:i},ext:{msn:{index:n,region:t.region}}}))))),a={url:e.content.sourceUrl,ext:{locale:e.locale,msn:{pageType:e.content.pageType,verticalName:e.content.verticalName,anaheimPageLayout:e.content.anaheimPageLayout,isXfeed:e.content.isXfeed,audienceMode:e.content.audienceMode,isPeregrine:e.isPeregrine,previousReservedRiverNativeAdCount:e.content.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:e.content.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:e.content.previousRiverHalfNativeAdCount,previousRiverNativeAdCount:e.content.previousRiverNativeAdCount,partnerId:e.partnerId}}},s={id:v.Lr.PublisherId},c={id:$(),imp:o,user:{dnt:e.user.browserOptOut?1:0,ext:{anid:"",muid:null===(t=e.user)||void 0===t?void 0:t.muid,msn:{isCookieWallPresent:e.isCookieWallPresent,bcp:e.user.bcp}}},device:{devicetype:e.device.isMobile?b.Mobile:b.PC,ext:{isAdBlock:e.user.isAdblock}},ext:{sessionId:e.rid,admConfiguration:{useAdmObject:!0,useMultipleAdms:!0,maxAdmCount:999},msn:{adRefreshVariant:e.adRefreshVariant,metadata:e.extensions}}};return this._isSuperAppPage?c.app={id:v.Lr.AppId,bundle:e.app.bundle,ver:e.app.version,content:a,publisher:s,ext:{msn:{adid:e.app.adid,sapphireId:e.app.sapphireid}}}:c.site={content:a,publisher:s},c}createSamRtbFetchRequest(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield _.$D.getBaseRequestData(v.il.Method);return i.credentials="include",i.body=e,i.headers[v.il.ContentTypeKey]=v.il.ContentType,i.headers[v.il.FlightIdKey]=h.Al.CurrentFlights,i.headers[v.il.CacheControlKey]=v.il.CacheControl,i.headers[v.il.MarketKey]=t,i.headers[v.il.UserAgent]=window.navigator.userAgent,n&&(i.headers[v.il.ClientIdKey]=n),!this._isSuperAppPage&&(0,f.ej)(v.yV.AppAnonCookieExist)&&(i.headers[v.il.AuthCookieNameKey]=g.Ji),i}))}createSamRtbXmlHttpRequest(e,t,n){const i=new XMLHttpRequest;return i.open(v.il.Method,n,!0),i.withCredentials=!0,i.timeout=this.config&&this.config.auctionTimeoutOverride?this.config.auctionTimeoutOverride:v.il.Timeout,i.setRequestHeader(v.il.ContentTypeKey,v.il.ContentType),i.setRequestHeader(v.il.FlightIdKey,h.Al.CurrentFlights),i.setRequestHeader(v.il.CacheControlKey,v.il.CacheControl),i.setRequestHeader(v.il.MarketKey,e),t&&i.setRequestHeader(v.il.ClientIdKey,t),!this._isSuperAppPage&&(0,f.ej)(v.yV.AppAnonCookieExist)&&i.setRequestHeader(v.il.AuthCookieNameKey,g.Ji),i}fetchSAMAdsSSR(e,t,n,i,s,c,u,p,h){var g;return(0,r.mG)(this,void 0,void 0,(function*(){let r,u,f,y,S;try{if(S=(0,l.UE)(),(0,d.hf)(A.q.TimeToRequestAd,S),r=yield this.createSamRtbFetchRequest(e,t,n),h)return void(0,ve.l)().set(ve.l4,{request:r,url:i,finalRequestBody:c,useOpenRtb:p});let C=v.Lr.SamOpenRTBMinTimeout;if((0,Se.Z)(null===(g=this.config)||void 0===g?void 0:g.adSSRTimeoutSinceAdReqInMS)&&(C=this.config.adSSRTimeoutSinceAdReqInMS),C+=100,u=yield(0,H.w)((()=>(0,m.Sm)(i,C,r)),"auction"),y=(0,l.UE)(),(0,d.hf)("samRTBResponseReturned",y),!u.ok)return void I.M0.sendAppErrorEvent((0,o.Tr)(a.I2B,"Error calling SAMRTB Ajax on SSR",`pageType: ${s}, status: ${u.status}, StatusText: ${u.statusText}`));N(0,S,y);const b=u.clone();return f=yield b.text(),b.response=f,p?this.processOpenRtbAdResponse(c,b):this.processAdResponse(b)}catch(e){return void(0,o.OO)(e,a.ryt,"Failed to get response from SAMRTB call on SSR",`pageType: ${s}, status: ${null==u?void 0:u.status}, response: ${f}`)}}))}fetchSAMAdsCSR(e,t,n,i,s,c,d,l,u){return(0,r.mG)(this,void 0,void 0,(function*(){if(window.auctionPromise&&window.auctionPromise instanceof Promise&&window.auctionRequestData){const e=yield this.getSamAdsFromEarlyAuctionPromise(s);if(e)return e}return new Promise((r=>{try{const p=this.createSamRtbXmlHttpRequest(t,n,i);p.onload=()=>{U(i,h.Al.IsPrerender,d),r(l?this.processOpenRtbAdResponse(c,p):this.processAdResponse(p))},p.ontimeout=()=>{I.M0.sendAppErrorEvent((0,o.Tr)(a.vvT,"Timeout calling SAMRTB Ajax",`pageType: ${s}, status: ${p.status}, StatusText: ${p.statusText}, StartTime: ${g}, EndTime: ${(new Date).toISOString()}`)),r(void 0)},p.onerror=()=>{I.M0.sendAppErrorEvent((0,o.Tr)(a.I2B,"Error calling SAMRTB Ajax",`pageType: ${s}, status: ${p.status}, StatusText: ${p.statusText}, StartTime: ${g}, EndTime: ${(new Date).toISOString()}`)),r(void 0)};const g=(new Date).toISOString();p.send(e),u&&u()}catch(e){(0,o.OO)(e,a.ryt,"Failed to get response from SAMRTB call",`pageType: ${s}`),r(void 0)}}))}))}convertOpenRtbResponseToNativeAdResponse(e,t){var n,i,r,o,a;const s=null!==(r=null===(i=null===(n=t.seatbid)||void 0===n?void 0:n.flatMap((e=>e.bid)))||void 0===i?void 0:i.filter((e=>e.ext.admObjects.length>0)))&&void 0!==r?r:[],c=new Map;e.imp.forEach((e=>c.set(e.id,e)));const d=s.map((e=>{const t=e.ext.admObjects[0].native.ext.msn.mappedRegion,n=e.ext.admObjects.flatMap((e=>e.native.eventtrackers)),{geminiViewabilityDataJson:i,beaconsSupportHttpPOST:r}=e.ext.admObjects[0].native.ext.msn,o=e.ext.admObjects[0].native.privacy,a=[],s=[],d=[],l=[];null==n||n.forEach((e=>{var t,n;(null===(n=null===(t=e.ext)||void 0===t?void 0:t.msn)||void 0===n?void 0:n.isBingTracker)&&e.event==k.Viewed?l.push(e.url):e.method==P.JavaScript?d.push(e.url):e.event==k.Impression&&e.method==P.Image?a.push(e.url):e.event==k.Viewed&&e.method==P.Image&&s.push(e.url)}));const u=e.ext.admObjects.flatMap((e=>e.native.link.clicktrackers)),p=e.ext.admObjects[0].native.ext.msn.fireEncodedBeacons,h=JSON.stringify({tvb:s,trb:a,tcb:u,tjb:d,p:e.ext.bidderId,e:p}),g=e.ext.admObjects.map((e=>{const t=e.native,n={title:null,adSelectionReason:t.ext.msn.adSelectionReason,description:null,url:t.link.url,sourceName:null,adChoicesUrl:t.ext.adChoicesUrl,imageUrl:null,imageHeight:null,imageWidth:null,images:null,clickBeacons:null,uniqueId:t.ext.msn.uniqueId,beaconsJson:null,originalImageWidth:null,originalImageHeight:null,verificationParameters:t.ext.msn.verificationParameters,ext:t.ext.msn.ext,assets:[]};return n.clickBeacons=JSON.stringify({tcb:t.link.clicktrackers}),e.native.assets.forEach((e=>{if(e.ext.msn.isRtbAsset)e.img?n.assets.push({w:e.img.w,h:e.img.h,url:e.img.url,alt:e.img.ext.alt,ext:e.img.ext.msn}):n.assets.push(e);else if(e.data){const t=e.data.value;switch(e.data.type){case C.Sponsored:n.sourceName=t;break;case C.Description:n.description=t}}else if(e.img){const{url:t,w:i,h:r}=e.img;switch(e.img.type){case w.Large:n.imageUrl=t,n.imageWidth=i,n.imageHeight=r,n.originalImageHeight=e.img.ext.msn.originalImageHeight,n.originalImageWidth=e.img.ext.msn.originalImageWidth;break;case w.MultipleImages:n.images||(n.images=[]),n.images.push({url:t,alt:e.img.ext.alt,ext:e.img.ext.msn})}}else null!=e.title&&(n.title=e.title.text)})),n})),m=c.get(e.impid);return{items:g,privacyUrl:o,adServedUrls:a,jsTrackerUrls:d,visibilityUrls:s,beaconsJson:h,bingTrackerUrls:l,beaconsSupportHttpPOST:r,geminiViewabilityDataJson:i,region:t,index:m.ext.msn.index}}));return{placements:d,metaData:null===(a=null===(o=t.ext)||void 0===o?void 0:o.msn)||void 0===a?void 0:a.metadata}}mapPlacementRegion(e,t){return t==i.EDGECHRNTP&&v.d5[e.region]||e.region}updatePlacementStrictIndices(e,t){"rivert"===e.region&&(t.isStrictIndices=!0),G.BU.includes(e.region)&&(t.isStrictIndices=!0),void 0!==e.isStrictIndices&&(t.isStrictIndices=e.isStrictIndices)}updateRequestedPlacementsInfo(e){const t=e.region.toLocaleLowerCase();t===v.Lr.RiverRegion?this.riverNativeAdCount+=e.indices.length:t===v.Lr.ReservedRiver?this.reservedRiverNativeAdCount+=e.indices.length:t===v.Lr.RiverDoubleWide?this.dualWideRiverNativeAdCount+=e.indices.length:t!==v.Lr.RiverHalf&&t!==v.Lr.RiverHalfTextOnly||(this.halfRiverNativeAdCount+=e.indices.length)}getPlacementsForXandr(e,t){const n=[];return e.placements.forEach((e=>{if(e.region&&e.indices&&e.indices.length){const{adContainerIds:i,indices:r,img:o}=e,a={region:this.mapPlacementRegion(e,t),indices:r,img:o,adContainerIds:i};this.updatePlacementStrictIndices(e,a),n.push(a),this.updateRequestedPlacementsInfo(e)}})),n}getPlacements(e,t){const n=[];return e.placements.forEach((e=>{if(e.region&&e.indices&&e.indices.length){const{assets:r,indices:o,img:a,extensions:s}=e,c=t==i.EDGECHRNTP&&v.d5[e.region]||e.region,d=a?{assets:r,region:c,indices:o,img:a}:{assets:r,region:c,indices:o};s&&(d.extensions=s),this.updatePlacementStrictIndices(e,d),n.push(d),this.updateRequestedPlacementsInfo(e)}})),n}processMetaData(e){if(this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage)return;const t=e&&e.taboola&&e.taboola.sessionId;!this.isCookieWallPresent&&t&&(0,f.sq)(v.yV.TaboolaSessionCookieName,t,.042),this.lastResponseMetadata=this.mergeMetadata(this.lastResponseMetadata,e),this.cookieService.updateMsaOptOutCookie(e)}mergeMetadata(e,t){return e?t?(t.taboola=this.mergePartnerMetadata(e.taboola,t.taboola),t):e:t}mergePartnerMetadata(e,t){return t=t||{},e&&e.sessionId&&!t.sessionId&&(t.sessionId=e.sessionId),t}getImpressionId(){return this.config&&this.config.auctionRidOverride&&u.jG.ActivityIdLowerCaseNoHypens?u.jG.ActivityIdLowerCaseNoHypens:this.lastResponseMetadata&&this.lastResponseMetadata.pageViewId?this.lastResponseMetadata.pageViewId:I.M0.getRequestId()}clearPreviousInfo(){var e;this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,(null===(e=this.lastResponseMetadata)||void 0===e?void 0:e.pageViewId)&&delete this.lastResponseMetadata.pageViewId}getExtensions(e,t){const n={taboola:(e=e||{taboola:{}}).taboola};return n.taboola.sessionId||(n.taboola.sessionId=t),n}getMuid(e){return this.isCookieWallPresent?null:e||(0,f.jG)()}onPivotSwitch(e){if(!e.oldSelection)return;const t=e.newSelection.pivotId;t&&t.toLowerCase()!==v.E7.EditInterestPivotId&&(this.pivotId=t)}isNotMyFeed(){return!!this.pivotId&&this.pivotId.toLowerCase()!==v.E7.MyFeedPivotId&&this.pivotId.toLowerCase()!==v.E7.StripeMyFeedPivotId}isWindowsViewsPage(e){return!!e&&("windirect"===(e=e.toLowerCase())||e.startsWith("winp"))}isSuperAppPage(e,t){return!!(e&&["saa","sai","mmx"].includes(e.toLowerCase())&&["SuperAppHP","SuperAppViews"].includes(t))}isChannelAppPage(e,t){return!(!e||!["skypefeed","outlookfeed"].includes(e.toLowerCase())||"Channel"!==t)}isMsnHpMobileAppPage(e,t){return!(!e||!["mobilefeed"].includes(e.toLowerCase())||"prime_mobile"!==t)}getSamAdsFromEarlyAuctionPromise(e){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise((t=>(0,r.mG)(this,void 0,void 0,(function*(){let n;try{const e=yield window.auctionPromise,{url:i,startTime:r,endTime:o}=window.auctionRequestData;if(this.logSSREarlySamAPICallDuration(i,r,o),n=e.clone(),n.response=yield n.text(),window.auctionRequestData.useOpenRtb)return void t(this.processOpenRtbAdResponse(window.auctionRequestData.finalRequestBody,n));t(this.processAdResponse(n))}catch(i){const{name:r,message:s,stack:c}=i||{};I.M0.sendAppErrorEvent((0,o.Tr)(a.I2B,"Error in early SAMRTB fetch call",`pageType: ${e}, status: ${n.status}, StatusText: ${n.statusText}, StartTime: ${window.auctionRequestData.startTime}, EndTime: ${window.auctionRequestData.endTime}`,{name:r,message:s,stack:c})),t(void 0)}finally{delete window.auctionPromise,delete window.auctionRequestData}}))))}))}logSSREarlySamAPICallDuration(e,t,n){window.setTimeout((()=>{performance.getEntriesByName(e)&&performance.getEntriesByName(e)[0]?U(e,!1,!1):N(0,t,n)}))}}},3635:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});const i=new class{constructor(){this.dedupeIds=new Array,this.cacheSize=0}setCacheSize(e){for(;this.dedupeIds.length>e;)this.dedupeIds.shift();this.cacheSize=e}addDedupeIds(e){this.cacheSize&&e&&0!=e.length&&e.forEach((e=>{const t=this.dedupeIds.findIndex((t=>t===e));if(t>-1)return this.dedupeIds.splice(t,1),void this.dedupeIds.push(e);this.dedupeIds.length==this.cacheSize&&this.dedupeIds.shift(),this.dedupeIds.push(e)}))}getDedupeIds(){return this.dedupeIds}}},11394:function(e,t,n){"use strict";n.d(t,{E:function(){return fn}});var i=n(33940),r=n(88875),o=n(29666),a=n(98304),s=n(68364),c=n(90351),d=n(25193),l=n(52965),u=n(72554),p=n(13578),h=n(92170),g=n(11935),m=n(4935),f=n(40252),v=n(31011),y=n(99753);const S={configType:"prg-d-rating-n-y",region:[y.yp.river],template:(e,t)=>o.SI.RatingDefaultYellowNonDRStatic,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},C={configType:"prg-h-rating-n-r",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightRedNonDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},b={configType:"prg-h-rating-n-y",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightYellowNonDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},w={configType:"prg-h-rating-nys",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightYellowNonDRStatic,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},T={configType:"prg-promo-ndr",region:[...y.Fg],template:(e,t)=>o.SI.SpecialOfferNonDR,requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},k={configType:"prg-promo-ndr2",region:[...y.Fg],template:(e,t)=>o.SI.SpecialOfferNonDRWithExp,requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},P={configType:"prg-ad-condition",region:[y.yp.river],template:o.SI.ConditionNonDR,requiredAssetsAll:[r.aT.condition]},A={configType:"prg-ad-return",region:[y.yp.river],template:o.SI.ReturnPolicyNonDR,requiredAssetsAll:[r.aT.returnPolicy]},I={configType:"prg-ad-sold",region:[y.yp.river],template:o.SI.SoldNonDR,requiredAssetsAll:[r.aT.sold]},E={configType:"prg-fship-in-b-n",region:[y.yp.river],template:o.SI.FreeShippingInlineNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},x={configType:"prg-fship-in-t-n",region:[y.yp.river],template:o.SI.FreeShippingPlainTextNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},M={configType:"prg-fship-tl-n",region:[y.yp.river],template:o.SI.FreeShippingTopLeftNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},O={configType:"prg-fship-tr-n",region:[y.yp.river],template:o.SI.FreeShippingTopRightNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]};var L=n(9915);const D={name:"gamification-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"gamification",layout:{mode:"pixel",bottom:"35",width:"300",zIndex:4}}]}]},R=(e,t,n)=>({modifier:(e,t)=>{t.template.useClickInGamify=n},configType:e,region:[y.yp.river],template:o.SI.Gamification,discountThreshold:t,requiredAssetsAll:[r.aT.price,r.aT.salePrice],supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],dynamicRenderingConfig:()=>D}),F=R("prg-wpo-gamify-c",y.XP.gamification,!0),B=R("prg-wpo-gamify-h",y.XP.gamification,!1),N={name:"hotspot-single-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:0,scaleTo:1,durationString:".3s",delayTimeMs:0},children:[{name:"hotspot-single"}]}]},{name:"ad-title"}]}]}]}]},U=(e,t)=>({configType:e,region:[y.yp.river],requiredAssetsAll:[r.aT.price,r.aT.salePrice],template:o.SI.HotspotSingle,supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:t,dynamicRenderingConfig:()=>N}),$=U("prg-wpo-hs",y.XP.default),_=U("prg-wpo-hs10",y.XP.hotspotSingle10),H={configType:"prg-ad-ctav3",region:[...y.cE,...y.Fg],maxAdCount:3,template:(e,t)=>o.SI.CallToActionV3},W={configType:"prg-ad-cta-pa",region:[...y.Fg],requiredAssetsAll:[r.aT.price],maxAdCount:3,template:(e,t)=>o.SI.CallToActionV3PA};var j=n(18297),G=n(27679);const V={name:"feedv2-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"302",height:"157",zIndex:1}},{name:"color-mask",alwaysPresent:!0,feedV2:!0,layout:{mode:"pixel",left:"0",top:"157",width:"300",height:"147",zIndex:1}},{name:"ad-title",isFeedV2:!0,titleFontSize:18,layout:{mode:"pixel",top:"169",zIndex:1}},{name:"see-more",isFeedV2:!0,layout:{mode:"pixel",top:"8",height:"31",left:"260",zIndex:5}},(0,G.It)((0,G.ZV)(j.l,"end-action-part",2,[],1),["ad-label","provider-name","ad-choice"],[{isFeedV2:!0},{isFeedV2:!0},{isFeedV2:!0,layout:{zIndex:5,marginInlineEnd:10}}])]}]},q={configType:"prg-scards",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>V},z=(0,G.RM)(V,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:18,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),Q={configType:"prg-scardsul",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>z},Z=(0,G.RM)(V,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:20,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),K={configType:"prg-scardshov",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>Z};var J,X,Y,ee,te,ne;!function(e){e.ROW="row",e.ROW_REVERSE="row-reverse",e.COLUMN="column",e.COLUMN_REVERSE="column-reverse"}(J||(J={})),function(e){e.FLEX="flex",e.INLINE_FLEX="inline-flex"}(X||(X={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.SPACE_BETWEEN="space-between",e.SPACE_AROUND="space-around",e.SPACE_EVENLY="space-evenly"}(Y||(Y={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.STRETCH="stretch",e.BASELINE="baseline"}(ee||(ee={})),function(e){e.NOWRAP="nowrap",e.WRAP="wrap",e.WRAP_REVERSE="wrap-reverse"}(te||(te={})),function(e){e.AUTO="auto",e.STRETCH="stretch",e.CENTER="center",e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.BASELINE="baseline",e.INITIAL="initial",e.INHERIT="inherit"}(ne||(ne={}));const ie={name:"ad-slug-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-label",layout:{mode:"pixel",top:"270",height:"31",zIndex:5,marginInlineStart:"16",marginInlineEnd:"8"}},{name:"ad-choice",layout:{mode:"pixel",top:"267",height:"31",zIndex:5,marginInlineStart:"231",marginInlineEnd:"8"}},{name:"see-more",layout:{mode:"pixel",top:"262",height:"31",zIndex:5,marginInlineStart:"256"}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"background-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div-wrapper",marginBottom:"6",marginLeft:"16",marginRight:"16",width:"260",children:[{name:"favicon-provider-name",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-favicon",layout:{mode:"flex"}},{name:"provider-name",layout:{mode:"flex",flex:1,marginInline:"6",minWidth:"0"},customStyleClass:"white-12-flex-layout",keepOpacity:!0}]}]},{name:"ad-title",twoLine:!0}]}]}]},re={configType:"prg-wpo-ad-slug3",region:[y.yp.river,y.yp.rivercms,y.yp.resriver],template:o.SI.AdSlugV3,dynamicRenderingConfig:()=>ie},oe={configType:"prg-wpo-ad-slug4",region:[y.yp.river,y.yp.resriver,y.yp.rivercms],template:o.SI.AdSlugV4,dynamicRenderingConfig:()=>ie};var ae=n(64553),se=n(88087);const ce={maxAdCount:3,template:(e,t)=>y.cE.includes(t.region)?o.SI.InfopaneDynamicRendering:o.SI.DecorationDynamic,region:[...y.vn],dynamicRenderingConfig:e=>y.cE.includes(e.region)?ae.v:se.$},de=[Object.assign(Object.assign({},ce),{configType:"prg-ads-deco",supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review]}),Object.assign(Object.assign({},ce),{configType:"prg-ads-no-deco"})],le={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"div-text",inlineStyle:"font-size:14px;line-height:16px;letter-spacing:0.7px",text:"nativeAdBingRewardsText",layout:{mode:"pixel",left:"16",top:"16",zIndex:2}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"footer-wrapper",layout:{mode:"pixel",top:"264",height:"31",width:"100%",zIndex:5},children:[{name:"footer",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,alignItems:ee.CENTER,height:"31"},children:[{name:"start-action-part",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"join-now",layout:{mode:"pixel",left:"16",zIndex:2}}]},{name:"end-action-part",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW_REVERSE,alignItems:ee.CENTER},children:[{name:"ad-choice",layout:{mode:"flex",paddingRight:"6"}},{name:"div-text",inlineStyle:"font-size:12px;color:rgba(255,255,255,0.7);padding-right:11px",text:"nativeAdPromotedByText",layout:{mode:"flex"}}]}]}]}]}]},ue={configType:"prg-amplify",region:[y.yp.riverAmplify,y.yp.rightRailAmplify],template:o.SI.Amplify,dynamicRenderingConfig:()=>le},pe=e=>({name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:1.5,scaleTo:1,durationString:"1s",duration:1500,delayTimeMs:500},intersectionRootMargin:"0px 0px 0px 0px",children:[e]}),he=e=>(0,G.BH)(e,G.Oz.byName("product-image"),pe),ge=he(se.$),me=he(ae.v);var fe,ve,ye,Se,Ce,be,we;!function(e){e[e["Segoe UI"]=1]="Segoe UI",e[e.Tenorite=2]="Tenorite",e[e.Lora=3]="Lora"}(fe||(fe={})),function(e){e[e["scale-up"]=1]="scale-up",e[e["scale-down"]=2]="scale-down",e[e["scale-up-down"]=3]="scale-up-down"}(ve||(ve={})),function(e){e[e["#036AC4"]=1]="#036AC4",e[e["#B26200"]=2]="#B26200",e[e["#508128"]=3]="#508128",e[e["#158389"]=4]="#158389",e[e["#C84C56"]=5]="#C84C56",e[e["#12875E"]=6]="#12875E",e[e["#666666"]=7]="#666666"}(ye||(ye={})),function(e){e[e.cube=2]="cube",e[e.box=3]="box",e[e.truck=4]="truck"}(Se||(Se={})),function(e){e[e.normal=1]="normal",e[e.small=2]="small",e[e.large=3]="large"}(Ce||(Ce={})),function(e){e[e.default=1]="default",e[e["5-star-with-button"]=2]="5-star-with-button",e[e["1-star-with-button"]=3]="1-star-with-button",e[e["1-star-with-shadow"]=4]="1-star-with-shadow"}(be||(be={})),function(e){e.normal="265",e.small="270",e.large="255"}(we||(we={}));var Te=n(92773);const ke=(0,Te.Et)(a.Evv,"personalizedV2Override")((e=>{var t,n,i;(0,p.Z)(null===(i=null===(n=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===n?void 0:n.ext)||void 0===i?void 0:i.adCreativeV2)||(e.items[0].ext.adCreative=JSON.parse(e.items[0].ext.adCreativeV2))})),Pe=(0,Te.Et)(a.Evv,"isPersonalizedAvailable")(((e,t)=>{var n,i,r,o,a,s,c,d;return(null===(o=null===(r=null===(i=null===(n=e.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.ext)||void 0===r?void 0:r.adCreative)||void 0===o?void 0:o.templateId)===t&&!!(null===(d=null===(c=null===(s=null===(a=e.items)||void 0===a?void 0:a[0])||void 0===s?void 0:s.ext)||void 0===c?void 0:c.adCreative)||void 0===d?void 0:d.templateConfig)})),Ae=(0,Te.Et)(a.Evv,"isShippingConfig")((e=>{var t,n,i,r,o,a,s,c,d,l,u,p,h;return!!(null===(n=null===(t=e.items[0])||void 0===t?void 0:t.assets)||void 0===n?void 0:n.freeShipping)&&!!(null===(s=null===(a=null===(o=null===(r=null===(i=e.items)||void 0===i?void 0:i[0])||void 0===r?void 0:r.ext)||void 0===o?void 0:o.adCreative)||void 0===a?void 0:a.templateConfig)||void 0===s?void 0:s.shipping)&&!(null===(h=null===(p=null===(u=null===(l=null===(d=null===(c=e.items)||void 0===c?void 0:c[0])||void 0===d?void 0:d.ext)||void 0===l?void 0:l.adCreative)||void 0===u?void 0:u.templateConfig)||void 0===p?void 0:p.shipping)||void 0===h?void 0:h.suppress)})),Ie=(0,Te.Et)(a.Evv,"isRatingConfig")((e=>{var t,n,i,r,o,a,s,c,d,l,u,p,h;return!!(null===(n=null===(t=e.items[0])||void 0===t?void 0:t.assets)||void 0===n?void 0:n.rating)&&!!(null===(s=null===(a=null===(o=null===(r=null===(i=e.items)||void 0===i?void 0:i[0])||void 0===r?void 0:r.ext)||void 0===o?void 0:o.adCreative)||void 0===a?void 0:a.templateConfig)||void 0===s?void 0:s.ratings)&&!(null===(h=null===(p=null===(u=null===(l=null===(d=null===(c=e.items)||void 0===c?void 0:c[0])||void 0===d?void 0:d.ext)||void 0===l?void 0:l.adCreative)||void 0===u?void 0:u.templateConfig)||void 0===p?void 0:p.ratings)||void 0===h?void 0:h.suppress)})),Ee=(0,Te.Et)(a.Evv,"getPersonalizedConfig")(((e,t)=>{if(Pe(e,t)){const[t]=e.items;return t.ext.adCreative.templateConfig}return null}));var xe;!function(e){const t=(0,Te.Et)(a.Evv,"processDecorations");e.processDecorations=t(((e,t)=>{var n,i;return(0,G.Tb)(t,"ad-decoration",{fontSizes:{price:null===(n=e.price)||void 0===n?void 0:n.fontSize,salePrice:null===(i=e.saleprice)||void 0===i?void 0:i.fontSize},fontFamily:fe[e.font]})}));const n=(0,Te.Et)(a.Evv,"getAnimationDuration")((e=>e?{duration:e,durationString:e/1e3+"s"}:{})),i=(0,Te.Et)(a.Evv,"getAnimationScale")(((e,t)=>e&&t?{scaleFrom:e,scaleTo:e-t}:{})),r=(0,Te.Et)(a.Evv,"getLocationAlignRight")((e=>{if(2==e)return{mode:"flex",display:X.FLEX,flexDirection:J.ROW,justifyContent:Y.FLEX_END}})),o=(0,Te.Et)(a.Evv,"getLocation")(((e,t)=>3==e?{mode:"pixel",bottom:we[t||"normal"]}:4==e?{mode:"pixel",bottom:we[t||"normal"],right:"16"}:void 0)),s=(0,Te.Et)(a.Evv,"getDelayTime")((e=>e?{delayTimeMs:e}:{})),c=(0,Te.Et)(a.Evv,"processAnimationImage");e.processAnimationImage=c(((e,t)=>{if(!e.image)return t;return(0,G.BH)(t,G.Oz.byName("animation-decorator"),(t=>{if(e.image.suppress)return{};const{animation:r}=e.image,o=Object.assign(Object.assign({},t),{animationType:ve[null==r?void 0:r.type]||t.animationType,animationConfig:Object.assign(Object.assign(Object.assign(Object.assign({},t.animationConfig),i(null==r?void 0:r.scaleFrom,null==r?void 0:r.scaleBy)),n(null==r?void 0:r.duration)),s(null==r?void 0:r.delayTimeMS))});if(!(null==r?void 0:r.scaleFrom)&&"scale-down"===o.animationType){const e=t.animationConfig.scaleFrom;t.animationConfig.scaleFrom=t.animationConfig.scaleTo,t.animationConfig.scaleTo=e}return o}))}));const d=(0,Te.Et)(a.Evv,"processFreeShipping");e.processFreeShipping=d(((e,t)=>{if(!e.shipping||e.shipping.suppress)return t;const{color:n,location:i}=e.shipping,a=Se[e.shipping.icon],s=(0,G.Tb)(t,"div-wrapper",{layout:Object.assign({},r(i))});return(0,G.Tb)(s,"free-shipping",{fontFamily:fe[e.font],color:ye[n||"1"],icon:a,layout:Object.assign({},o(i))})}));const l=(0,Te.Et)(a.Evv,"processRating");e.processRating=l(((e,t)=>{if(!e.ratings||e.ratings.suppress)return t;const{color:n,elementStyle:i,elementSize:a,location:s,displayReviewCount:c}=e.ratings,d=Ce[a],l=(0,G.Tb)(t,"div-wrapper",{layout:Object.assign({},r(s))});return(0,G.Tb)(l,"rating",{fontFamily:fe[e.font],color:ye[n||"1"],elementStyle:be[i],elementSize:d,displayReviewCount:c,layout:Object.assign({},o(s,d))})}));const u=(0,Te.Et)(a.Evv,"processTitle");e.processTitle=u(((e,t)=>(0,G.Tb)(t,"ad-title",{fontFamily:fe[e.font]})))}(xe||(xe={}));const Me=[xe.processDecorations,xe.processTitle],Oe=(0,Te.Et)(a.Evv,"processPersonalizedConfig")(((e,t,n,i=Me)=>{const r=Ee(e,t);return r?(0,m.Z)(i,((e,t)=>t(r,e)),n):n})),Le=(0,Te.Et)(a.Evv,"removeAssets")((e=>{var t,n,i,r,o,a;for(const s of e.items){if(!e.enableNativeAdWC&&!(null===(t=null==e?void 0:e.template)||void 0===t?void 0:t.enableVA)){null===(n=s.assets)||void 0===n||delete n.price,null===(i=s.assets)||void 0===i||delete i.salePrice;continue}const c=null===(o=null===(r=s.ext)||void 0===r?void 0:r.adCreative)||void 0===o?void 0:o.templateConfig;if(c){const{price:e,saleprice:t}=c;(null==e?void 0:e.suppress)&&(null===(a=s.assets)||void 0===a||delete a.price),(null==t?void 0:t.suppress)&&delete s.assets.salePrice}}return e})),De=(0,Te.Et)(a.Evv,"processConfig")(((e,t,n)=>Oe(e,t,n,[xe.processTitle,xe.processAnimationImage,xe.processDecorations,xe.processFreeShipping,xe.processRating]))),Re={configType:"prg-ani-img",qualifier:(e,t)=>Pe(t,"animatedimageryinf")||Pe(t,"animatedimageryriver"),region:[y.yp.river,y.yp.resriver,y.yp.infopane,y.yp.resinfopane],template:o.SI.AnimatedImagery,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:e=>"infopane"===e.region||"resinfopane"===e.region?De(e,"animatedimageryinf",me):De(e,"animatedimageryriver",ge),modifier:(e,t)=>{Le(t)}},Fe=(0,G.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"call-to-action",layout:{mode:"flex",display:X.FLEX,paddingRight:"16"}}]}]}),Be={configType:"prg-ad-cta",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToAction,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>Fe},Ne=(0,G.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"div",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"ad-title-mask"},{name:"call-to-action",ctaMode:"arrow",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:X.FLEX,paddingRight:"16"}}]}]}),Ue={configType:"prg-ad-cta-ic",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionIcon,dynamicRenderingConfig:()=>Ne},$e={configType:"prg-ad-cta-lm",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionLearnMore,dynamicRenderingConfig:()=>Fe},_e=(0,G.RM)(Fe,"call-to-action",{name:"call-to-action",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:X.FLEX,paddingRight:"16"}}),He={configType:"prg-ad-cta-lmd",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionDarkMode,dynamicRenderingConfig:()=>_e},We=(0,G.As)(Fe,["call-to-action","product-image"],[{name:"call-to-action",ctaMode:"mask"},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!1}]),je={configType:"prg-ad-cta-m",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionMaskMode,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>We},Ge={configType:"prg-ad-cta-st",region:[...y.Fg],requiredAssetsAll:[r.aT.price,r.aT.shortTitle],template:o.SI.CallToActionShortTitle,dynamicRenderingConfig:()=>_e},Ve={configType:"prg-ad-ctav2",region:[...y.Fg],template:o.SI.CallToActionV2,dynamicRenderingConfig:()=>Ne},qe=[{configType:"prg-ad-logo-c",template:o.SI.LogoControl,region:[...y.Fg],qualifier:(e,t)=>{var n,i,r,o;return!!(null===(o=null===(r=null===(i=null===(n=t.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.assets)||void 0===r?void 0:r.logo)||void 0===o?void 0:o.url)},requiredAssetsAll:[r.aT.logo]},{configType:"prg-ad-z-c",template:o.SI.ZIndexControl,region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-promo-ndr-c",template:o.SI.SpecialOfferControl,region:[...y.Fg],requiredAssetsAll:[r.aT.specialOffer]},{configType:"prg-fship-c",template:o.SI.FreeShippingControl,region:[y.yp.river],requiredAssetsAll:[r.aT.freeShipping]},{configType:"prg-rating-c",template:o.SI.RatingControl,region:[y.yp.river],requiredAssetsAll:[r.aT.rating]},{configType:"prg-trendingc",template:o.SI.TrendingControl,region:[...y.Fg],requiredAssetsAll:[r.aT.viewed]},{configType:"prg-ad-cta-c",template:o.SI.CallToActionControl,region:[...y.Fg],requiredAssetsAll:[r.aT.price]},{configType:"prg-ad-s-title-c",template:o.SI.ShortTitleControl,region:[y.yp.river],qualifier:(e,t)=>{var n,i,r;return!!(null===(r=null===(i=null===(n=t.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.assets)||void 0===r?void 0:r.shortTitle)},requiredAssetsAll:[r.aT.shortTitle]},{configType:"prg-ad-sh-v1-c",template:o.SI.SaleHighlightV1Control,region:[...y.Fg,...y.cE],requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:y.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-sh-v3v4-c",template:o.SI.SaleHighlightV3V4Control,region:[...y.Fg],qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-combo-c",region:[...y.Fg],template:(e,t)=>(0,y.J2)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping]},{configType:"prg-ad-condition-c",region:[y.yp.river],template:o.SI.ConditionNonDRControl,requiredAssetsAll:[r.aT.condition]},{configType:"prg-ad-return-c",region:[y.yp.river],template:o.SI.ReturnPolicyNonDRControl,requiredAssetsAll:[r.aT.returnPolicy]},{configType:"prg-ad-sold-c",region:[y.yp.river],template:o.SI.SoldNonDRControl,requiredAssetsAll:[r.aT.sold]},{configType:"prg-ad-combo-t-c",region:[...y.Fg],template:(e,t)=>(0,y.ZV)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition]},{configType:"prg-ad-ris1-c",region:y.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,y.dj)(t,!0)}},{configType:"prg-ad-desc-c",region:y.Fg,template:(e,t)=>(0,y.PY)(t)},{configType:"prg-ad-gpt-title-c",region:[y.yp.infopane,y.yp.river],requiredAssetsAll:[r.aT.shortTitle],template:o.SI.GPTTitle},{configType:"prg-ad-align-rf",region:y.Fg,template:(e,t)=>o.SI.AlignmentRF},{configType:"prg-ad-ai-img-c",region:[...y.Fg,...y.cE],template:o.SI.AIImg,requiredAssetsAll:[r.aT.transparentImage]}],ze={configType:"default",region:[y.yp.infopane,y.yp.resinfopane],maxAdCount:2,template:(e,t)=>t.enableNativeAdWC?o.SI.AnimatedImagery:o.SI.Default,supportedAssets:[],dynamicRenderingConfig:e=>{if(e.enableNativeAdWC)return De(e,"animatedimageryinf",me)},modifier:(e,t)=>{Le(t)}},Qe={configType:"default",region:[y.yp.river,y.yp.resriver],template:o.SI.Default},Ze={configType:"prg-dr-combined",region:y.vn,template:(e,t)=>y.cE.includes(t.region)?o.SI.InfopaneDynamicRendering:o.SI.DecorationDynamic,dynamicRenderingConfig:e=>y.cE.includes(e.region)?ae.v:se.$,modifier:(e,t)=>{t.enableNativeAdWC=!0}},Ke={configType:"prg-ad-combo",region:[y.yp.river],template:(e,t)=>(0,y.JU)(t),requiredAssetsAny:[r.aT.freeShipping,r.aT.rating,r.aT.specialOffer],dynamicRenderingConfig:e=>(0,y.R)(e),modifier:(e,t)=>(0,y.$u)(t,!0)},Je={configType:"prg-dr-infopane",region:[y.yp.infopane,y.yp.resinfopane],maxAdCount:3,template:o.SI.InfopaneDynamicRendering,supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>ae.v},Xe=[{configType:"prg-ads-tel-i",region:y.cE,template:o.SI.DrPerf,dynamicRenderingConfig:()=>ae.v},{configType:"prg-ads-tel-r",region:y.Fg,template:o.SI.DrPerf,dynamicRenderingConfig:()=>se.$}],Ye={configType:"prg-ad-eb",region:[...y.Fg,...y.cE],template:o.SI.EliteBadge,requiredAssetsAll:[r.aT.eliteBadge],supportedAssets:[r.aT.eliteBadge],maxAdCount:3,dynamicRenderingConfig:e=>y.cE.includes(e.region)?ae.v:se.$},et=(0,G.ZV)(se.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]),tt={configType:"prg-dr-fship",qualifier:(e,t)=>Pe(t,"shippingriver"),region:[y.yp.river],template:o.SI.FreeShippingDR,requiredAssetsAll:[r.aT.freeShipping],dynamicRenderingConfig:e=>De(e,"shippingriver",et)},nt={name:"highlight-rating-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"highlight-rating"}]},{name:"ad-title",oneLineTitle:!0}]}]}]}]},it={configType:"prg-wpo-h-rating",region:[y.yp.river],requiredAssetsAll:[r.aT.rating],template:o.SI.HighlightRating,supportedAssets:[r.aT.rating],dynamicRenderingConfig:()=>nt},rt=(0,G.It)(ae.v,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),ot=(0,G.It)(se.$,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),at={configType:"prg-ad-hover",region:[...y.vn],template:o.SI.Default,dynamicRenderingConfig:e=>y.cE.includes(null==e?void 0:e.region)?rt:ot},st={name:"default-infopane-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1",trimBottom:!0},{name:"gradient-mask",paddingTop:"90",layout:{mode:"pixel",bottom:"0",width:"100%",zIndex:2},children:[{name:"ad-title",lineHeight:"36",titleFontSize:"28",oneLineTitle:!0}]},j.l]}]},ct={configType:"prg-infopaneDoubleCard19",region:y.cE,maxAdCount:3,template:o.SI.InfopaneDoubleCard_19by10,dynamicRenderingConfig:()=>st},dt=(0,G.It)(st,["footer","ad-title"],[{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"17",height:"31",width:"100%"}},{lineHeight:"44"}]),lt={configType:"prg-infopane-db",region:[y.yp.riverdb],maxAdCount:3,template:o.SI.InfopaneDoubleCard_19by10,dynamicRenderingConfig:()=>dt,modifier:(e,t)=>{t.enableNativeAdWC=!0}},ut=(0,G.FT)(se.$,"end-action-part",0,[{name:"like-button",layout:{zIndex:5}}]),pt={configType:"prg-ad-like",region:[y.yp.river,y.yp.resriver],template:o.SI.LikeButton,dynamicRenderingConfig:()=>ut},ht={name:"logo-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"logo",width:"42",height:"42",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}},{name:"logo-title-wrapper",layout:{mode:"pixel",left:"54",bottom:"54",zIndex:2},children:[{name:"logo-title-flex-wrapper",layout:{mode:"flex",height:"42",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",titleFontSize:"20",twoLine:!0}]}]}]}]},gt={qualifier:(e,t)=>{var n,i,r,o;return!!(null===(o=null===(r=null===(i=null===(n=t.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.assets)||void 0===r?void 0:r.logo)||void 0===o?void 0:o.url)},configType:"prg-ad-logo",region:[...y.Fg],template:o.SI.Logo,requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>ht,modifier:(e,t)=>{t.items&&t.items[0]}},mt=(0,G.RM)(ht,"logo",{name:"logo",width:"42",height:"42",borderRadius:"6",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}}),ft={qualifier:(e,t)=>{var n,i,r,o;return!!(null===(o=null===(r=null===(i=null===(n=t.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.assets)||void 0===r?void 0:r.logo)||void 0===o?void 0:o.url)},configType:"prg-ad-logo-r",region:[...y.Fg],template:o.SI.LogoWithBorderRadius,requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>mt},vt={configType:"prg-ad-combo2",region:y.Fg.concat(y.cE),template:(e,t)=>(0,y.uH)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping,r.aT.discount],maxAdCount:1,modifier:(e,t)=>(0,y.$u)(t)},yt=(e,t)=>{const n=(0,G.As)(se.$,["gradient-mask","provider-name","ad-label"],[{name:"gradient-mask",peSeasonalColorMode:`peSeasonalColorMode${e}`,layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout",adLabelTextOpacity:"1",isSeasonal:!0},{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5},adLabelTextOpacity:"1",isSeasonal:!0}]);return(0,G.FT)(n,"default-template",3,[{name:"product-image",patternMode:`patternMode${t}`,useTransparentImage:!0,layout:{position:"absolute",bottom:0,width:"100%",height:121,zIndex:2,pointerEvents:"none"}}])},St=(yt("1","1"),yt("2","1"),yt("3","1"),yt("4","1"),yt("1","2"),yt("2","2"),yt("3","2"),yt("4","2"),{configType:"prg-ads-seasonal",qualifier:(e,t)=>Ct(t),region:[...y.Fg],template:(e,t)=>o.SI.PESeasonalAds,dynamicRenderingConfig:e=>{const t=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.color"),n=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.elementStyle");return yt(t,n)}}),Ct=(0,Te.Et)(a.Evv,"isPersonalizedAvailable")((e=>{var t,n,i,r;return"seasonal"===(0,c.Z)(e,"items[0].ext.adCreative.templateId")&&!!(null===(r=null===(i=null===(n=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===n?void 0:n.ext)||void 0===i?void 0:i.adCreative)||void 0===r?void 0:r.templateConfig)&&!1===(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.suppress")})),bt={configType:"prg-ads-seav1",region:[...y.Fg],template:(e,t)=>o.SI.PESeasonalAdsV1,dynamicRenderingConfig:e=>yt("3","1")},wt={configType:"prg-ads-seav1-p",region:y.Fg,template:(e,t)=>o.SI.PESeasonalAdsV1P,qualifier:(e,t)=>t.providerId&&"bing"===t.providerId.toLowerCase(),dynamicRenderingConfig:e=>yt("3","1")},Tt=(0,G.FT)(se.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating"}]}]),kt={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Pt=e=>Pe(e,"shippingriver"),At={configType:"prg-ads-personal",qualifier:(e,t)=>Pt(t)||Pe(t,"ratingsriver"),region:[y.yp.river],template:(e,t)=>Pt(t)?o.SI.FreeShippingDR:o.SI.RatingDR,supportedAssets:[r.aT.freeShipping,r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>{const t=Ae(e)?et:kt,n=Ie(e)?Tt:kt;return Pt(e)?De(e,"shippingriver",t):De(e,"ratingsriver",n)}},It={configType:"prg-wpo-deco-dr",region:[y.yp.river,y.yp.infopane,y.yp.resriver,y.yp.resinfopane],template:o.SI.DecorationDynamic,requiredAssetsAny:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>se.$},Et={configType:"prg-dr-rating",qualifier:(e,t)=>Pe(t,"ratingsriver"),region:[y.yp.river],template:o.SI.RatingDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>De(e,"ratingsriver",Tt)},xt=e=>(0,G.FT)(e?ae.v:se.$,e?"default-infopane-template":"default-template",0,[{name:"sale-highlight-badge",layout:{mode:"pixel",top:"16",left:"16",zIndex:2}}]),Mt=xt(!1),Ot=xt(!0),Lt={configType:"prg-ad-sh-v1",region:[...y.Fg,...y.cE],template:o.SI.SaleHighlightV1,requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>y.cE.includes(e.region)?Ot:Mt},Dt={name:"sale-highlight-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:X.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3},children:[{name:"ad-title"}]}]}]},Rt={name:"sale-highlight-v3-template",children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,alignItems:ee.CENTER,justifyContent:Y.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},Ft={configType:"prg-ad-sh-v3",region:[...y.Fg],template:o.SI.SaleHighlightV3,qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,y.Up)(e)?Dt:Rt},Bt={name:"sale-highlight-v4-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:X.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{adBackgroundColor:"#2E2E2E",width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.7",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,G.Tb)(j.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]}]},Nt={name:"sale-highlight-v4-template",children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,alignItems:ee.CENTER,justifyContent:Y.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1,adBackgroundColor:"#2E2E2E"}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,G.Tb)(j.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]},Ut={configType:"prg-ad-sh-v4",region:[...y.Fg],template:o.SI.SaleHighlightV4,qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,y.Up)(e)?Bt:Nt},$t={qualifier:(e,t)=>{var n,i,r;return!!(null===(r=null===(i=null===(n=t.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.assets)||void 0===r?void 0:r.shortTitle)},configType:"prg-ad-gpt-title",region:[y.yp.infopane,y.yp.river],requiredAssetsAll:[r.aT.shortTitle],template:o.SI.GPTTitle,modifier:(e,t)=>{var n,i;t.items&&t.items[0]&&(null===(i=null===(n=t.items[0])||void 0===n?void 0:n.assets)||void 0===i?void 0:i.shortTitle)&&(t.items[0].title=t.items[0].assets.shortTitle)}},_t={configType:"prg-wpo-ss",region:[y.yp.river],template:o.SI.Slideshow,modifier:(e,t)=>{t.slideshowProps=t.template.slideshowProps={autoScroll:!0,autoScrollIntervalMs:3e3,maxImageCount:5,enableSlideshowMediaControls:!0}},multiImage:!0},Ht={name:"spotlight-image-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:1},imageMaskOn:!0},{name:"spotlight-background",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},paddingBottom:"0"}]}]},Wt={configType:"prg-wpo-sl",region:[y.yp.river],template:o.SI.Spotlight,supportedAssets:[],supportedImageRatios:[o.hb._1by1,o.hb._3by4,o.hb._4by3],targetImageRatio:o.hb._1by1,dynamicRenderingConfig:()=>Ht},jt=Object.assign(Object.assign({},se.$),{userActionLogger:"PrgTitle2"}),Gt={configType:"prg-title-2",region:y.Fg,template:o.SI.TitleMaxLine2,dynamicRenderingConfig:()=>jt},Vt=Object.assign(Object.assign({},se.$),{userActionLogger:"PrgTitle2C"}),qt={configType:"prg-title-2-c",region:y.Fg,template:o.SI.TitleMaxLine2C,dynamicRenderingConfig:()=>Vt},zt=(0,G.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"trending",layout:{position:"relative",zIndex:5}},{name:"ad-title"}]}),Qt={configType:"prg-trending",region:[...y.Fg],template:o.SI.Trending,requiredAssetsAll:[r.aT.viewed],dynamicRenderingConfig:()=>zt},Zt={name:"zindex-v2-original-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",height:"304",zIndex:1},isFullGradient:!0},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"div",layout:{mode:"pixel",bottom:"45",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Kt={configType:"prg-ad-zv2-o",region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),template:o.SI.ZIndexV2Original,requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Zt},Jt={name:"zindex-v2-polygon-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:1},opacity:"0.4",alwaysPresent:!0},{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"polygon-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:2}},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}],isRadialMask:!0}]}]},Xt={configType:"prg-ad-zv2-p",region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),template:o.SI.ZIndexV2Polygon,requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Jt},Yt={configType:"prg-ad-combo-txt",region:[...y.Fg],template:(e,t)=>(0,y.xP)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition],modifier:(e,t)=>(0,y.E5)(t)},en={configType:"prg-ad-ris1",region:y.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,y.dj)(t)}},tn=[{configType:"prg-ad-desc-wide-1",region:y.Fz,template:(e,t)=>(0,y.PY)(t)},{configType:"prg-ad-desc-wide-2",region:y.Fz,template:(e,t)=>(0,y.PY)(t)}],nn=[o.SI.GeometricAdWaves1,o.SI.GeometricAdWaves3,o.SI.GeometricAdWaves4,o.SI.GeometricAdNature3,o.SI.GeometricAdSparkles1,o.SI.GeometricAdSparkles2,o.SI.GeometricAdSparkles3,o.SI.GeometricAdSparkles4,o.SI.GeometricAdSparkles5],rn=[{configType:"prg-ad-geometric",region:[...y.Fg],modifier:(e,t)=>{(0,y.rf)(t,nn,o.SI.Default,t.template.seasonalAdTemplateConfig.density)}}],on={configType:"prg-ad-ai-img",region:[...y.Fg,...y.cE],template:o.SI.AIImg,requiredAssetsAll:[r.aT.transparentImage],modifier:(e,t)=>{(0,y.Gu)(t)}},an=[F,B,$,_,ze,Qe,It,Re,_t,Gt,qt,it,gt,ft,$t,Be,Ue,$e,He,Ge,je,Ve,Je,ct,lt,Kt,Xt,Wt,Q,K,q,re,oe,ue,...de,...Xe,T,k,E,x,M,O,C,b,w,S,I,P,A,Ze,tt,Ye,Et,At,pt,at,Qt,Lt,Ft,Ut,Ke,vt,H,W,St,bt,wt,Yt,en,on,...rn,...tn,...qe];var sn=n(87618),cn=n(78931),dn=n(94921),ln=n(60260);class un{constructor(){this.filterConfigs=(e,t=[])=>(0,cn.Z)([...an,...t],(t=>(0,dn.Z)([...sn.Sj,t.qualifier],(n=>!n||n(t,e))))),this.fallbackConfig=e=>y.cE.includes(e.region)?ze:Qe,this.pickConfigByWeight=e=>{let t=0;(0,g.Z)(e,(e=>{t=t+e.weight||y.KB}));const n=Math.floor(Math.random()*t);let i=0;for(let t=0;t<e.length;++t)if(i+=e[t].weight||y.KB,n<i)return e[t]},this.preProcess=e=>{(0,g.Z)(e.items,(e=>{e.assets&&(this.calculateDiscount(e.assets),this.filterRatings(e.assets))})),(0,ln.dO)(e)},this.postProcess=(e,t)=>{(0,g.Z)([...sn.F8,e.modifier],(n=>null==n?void 0:n(e,t)))},this.calculateDiscount=e=>{const t=e.price,n=e.salePrice;if(t&&n){const i=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((i-r)/i*100)}},this.filterRatings=e=>{e&&e.rating&&(isNaN(parseInt(e.rating))||parseInt(e.rating)<=6)&&(e.rating=void 0)}}selectTemplate(e,t=[]){this.preProcess(e);const n=this.filterConfigs(e,t),i=n&&n.length>0?this.pickConfigByWeight(n):this.fallbackConfig(e);this.postProcess(i,e)}}var pn=n(26007);class hn{}hn.concat=(e,t)=>`${e}.${t}`,hn.identity=e=>t=>hn.concat(e,t),hn.boolean=e=>t=>t?hn.concat(e,"1"):null;class gn{constructor(){this._availableAssets="",this._displayedAssets=""}get availableAssets(){return this._availableAssets}get displayedAssets(){return this._displayedAssets}setAvailableAssets(e){var t,n;((null===(n=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===n?void 0:n.assets)||(0,c.Z)(e,"items[0].ext.adCreative.templateConfig"))&&(this._availableAssets=this.concatAssets(e))}setDisplayedAssets(e){var t,n;(null===(n=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===n?void 0:n.assets)&&(this._displayedAssets=this.concatAssets(e))}concatAssets(e){let t="";(0,c.Z)(e,"items[0].assets")&&(t=(0,d.Z)(Object.keys(e.items[0].assets),(e=>{const t=r.aT[e].split("-");return"data"==(null==t?void 0:t[0])?t[1]:"image"==(null==t?void 0:t[0])?`i${t[1]}`:void 0})).join("_"));const n=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig");if(!n)return t;let i="";n&&(i=(0,d.Z)(Object.keys(n),(e=>r.XY[e])).join("_"));return t+(t&&i?"_":"")+i}}(0,i.gn)([(0,Te.Et)(a.NMS,"setAvailableAssets")],gn.prototype,"setAvailableAssets",null),(0,i.gn)([(0,Te.Et)(a.NMS,"setDisplayedAssets")],gn.prototype,"setDisplayedAssets",null),(0,i.gn)([(0,Te.Et)(a.NMS,"concatAssets")],gn.prototype,"concatAssets",null);const mn={templateType:hn.identity("type"),animatedImage:hn.identity("ani"),flipZIndex:hn.boolean("fz"),landscapeOverlay:hn.boolean("lo")};class fn{constructor(){this.hasAnyInlineDecoration=e=>{if(e.items&&0!==e.items.length){if(e.items[0]&&e.items[0].assets){const t=e.items[0].assets;return!!(t.price||t.salePrice||t.installmentPrice||t.rating||t.review||t.priceDrop||t.viewed||t.freeShipping||t.discount)}return!1}return!1}}updateTemplate(e,t={}){const n=(0,l.Z)(e);try{this.updateTemplateInternal(e,t)}catch(t){(0,s.OO)(t,a.NMS,"Fail to apply template service on placement"),e=void 0,e=(0,l.Z)(n)}}updateTemplateInternal(e,t){var n;if(!e)return;ke(e),this.decorationBeaconBuilder=new gn,this.decorationBeaconBuilder.setAvailableAssets(e);const i=(0,u.Z)({},t,o.j3);if(i.configType){e.template=i;(new un).selectTemplate(e)}else e.template=this.processConfig(e,i),this.resetTempateTypeForInfopaneInMultiAds(e),this.filterAssetByFlight(e),this.updatePlacementImageSize(e),this.updateTemplateTypeForPriceDiscount(e);this.updateBeacon(e),(null===(n=null==e?void 0:e.template)||void 0===n?void 0:n.templateType)&&e.template.templateType.endsWith("-c")&&(e.template.templateType=o.SI.Default,this.filterAssetByFlight(e))}processConfig(e,t){const n=t;if(this.updateAllowedAssetsAndTemplateForInfopane(e,n),this.updateTemplateInfoForDRInfopane(e,n),n.templateType!==o.SI.Slideshow&&n.templateType!==o.SI.PseudoVideo||this.updateSlideshowTemplateType(e,t,n),n.templateType===o.SI.PatternOverlay){"225"===this.getItemImageSize(e).height?n.landscapeOverlay=!1:n.templateType=o.SI.Default}return n.templateType===o.SI.Default&&e.items&&e.items.length>3&&n.adCarousel&&(n.templateType=o.SI.AdCarousel),this.updateTemplateInfoForBrandStory(e,n),n}updatePlacementImageSize(e){if(e.template.templateType===o.SI.PatternOverlay){const t=this.getItemImageSize(e);e.imageWidth=(0,c.Z)(e,"imageWidth",t.width),e.imageHeight=(0,c.Z)(e,"imageHeight",t.height)}}updateBeacon(e){const t=t=>{if(t.includes("srtb.msn.com")){const n=new URL(t);return this.addOrUpdateUrlQueryParam(n,"t",this.serializeTemplateConfig(e)),this.decorationBeaconBuilder.setDisplayedAssets(e),this.decorationBeaconBuilder.availableAssets&&this.addOrUpdateUrlQueryParam(n,"dec",this.decorationBeaconBuilder.availableAssets+"-"+this.decorationBeaconBuilder.displayedAssets),n.href}return t};if(!(0,p.Z)(e.beaconsJson)){const n=JSON.parse(e.beaconsJson);n&&((0,h.Z)(n.trb)&&(n.trb=n.trb.map((e=>t(e)))),(0,h.Z)(n.tvb)&&(n.tvb=n.tvb.map((e=>t(e)))),e.beaconsJson=JSON.stringify(n))}e&&(0,h.Z)(e.items)&&(0,g.Z)(e.items,(e=>{if(!(0,p.Z)(e.clickBeacons)){const n=JSON.parse(e.clickBeacons);n&&((0,h.Z)(n.tcb)&&(n.tcb=n.tcb.map((e=>t(e)))),e.clickBeacons=JSON.stringify(n))}}))}serializeTemplateConfig(e){return e.items&&e.items.length>0&&e.items[0].video?e.items[0].verificationParameters?o.SI.VideoIAS:o.SI.Video:(0,m.Z)(mn,((t,n,i)=>{const r=(0,c.Z)(e.template,i);if(r){const e=n(r);if(e)return""===t?e:`${t}_${e}`}return t}),"")}addOrUpdateUrlQueryParam(e,t,n){return pn.c.getQueryParameterByName(t,e.href)?pn.c.updateSearchParam(e,t,n):pn.c.appendSearchParam(e,t,n)}updateSlideshowTemplateType(e,t,n){e&&e.items&&e.items[0]&&e.items[0].images&&e.items[0].images.length>1?(n.templateType=t.templateType,e.slideshowProps=n.slideshowProps):(n.templateType=o.SI.Default,n.slideshowProps=void 0)}getItemImageSize(e){const t=(0,f.Z)(e.items);return(0,p.Z)(t)?{}:{width:`${(0,c.Z)(t,"imageWidth")}`,height:`${(0,c.Z)(t,"imageHeight")}`}}calculateDiscount(e){const t=e.price,n=e.salePrice;if(t&&n){const i=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((i-r)/i*100)}}filterAssetByFlight(e){var t;if(e&&e.items&&e.items[0]&&e.items[0].assets){this.calculateDiscount(e.items[0].assets);const n=(0,v.Z)((0,h.Z)(null===(t=e.template)||void 0===t?void 0:t.allowedAssets)?[...r.fs,...e.template.allowedAssets]:r.fs),i=(0,m.Z)(e.items[0].assets,((e,t,i)=>(n.includes(r.aT[i])&&(e[i]=t),e)),{});e.items[0].assets=i}}resetTempateTypeForInfopaneInMultiAds(e){"infopane"===e.region&&e.items&&e.items.length>1&&e.template.templateType!==o.SI.InfopaneDynamicRendering&&(e.template.templateType=o.SI.Default,e.template.animatedImage="")}isValidProviderNameForBrand(e){if(!(e&&e.items&&e.items[0]&&e.items[0].providerName))return!1;const t=e.items[0].providerName;return-1===t.indexOf("/")&&t.length<20}updateAllowedAssetsAndTemplateForInfopane(e,t){t.templateType!==o.SI.BrandStory&&t.templateType!==o.SI.BrandStoryNoDeco&&t.templateType!==o.SI.BrandStoryNoProgressiveDisplay&&t.templateType!==o.SI.HotspotSingle&&t.templateType!==o.SI.DiscountScribble&&t.templateType!==o.SI.ContentReveal&&t.templateType!==o.SI.Gamification||"infopane"===e.region&&(t.allowedAssets=void 0,t.templateType=o.SI.Default)}updateTemplateInfoForBrandStory(e,t){var n,i,r,a;t.templateType!==o.SI.BrandStory&&t.templateType!==o.SI.BrandStoryNoDeco&&t.templateType!==o.SI.BrandStoryNoProgressiveDisplay||((null===(i=null===(n=e.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.description)===(null===(a=null===(r=e.items)||void 0===r?void 0:r[0])||void 0===a?void 0:a.providerName)&&(e.items[0].description=null),this.isValidProviderNameForBrand(e)||(t.templateType=o.SI.Default,t.allowedAssets=void 0))}updateTemplateTypeForPriceDiscount(e){var t,n,i,r,a,s,c,d,l,u,p,h,g,m,f,v,y,S,C;const{Default:b,HotspotSingle:w,BrandStory:T,DiscountScribble:k,ContentReveal:P,Gamification:A}=o.SI;(null===(i=null===(n=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===n?void 0:n.assets)||void 0===i?void 0:i.discount)>=(null===(r=e.template)||void 0===r?void 0:r.discountThreshold)||([w,k,A].includes(null===(a=e.template)||void 0===a?void 0:a.templateType)&&(e.template.templateType=b,e.template.allowedAssets=void 0,e.items[0].assets={}),(null===(s=e.template)||void 0===s?void 0:s.templateType)===P&&(null===(l=null===(d=null===(c=e.items)||void 0===c?void 0:c[0])||void 0===d?void 0:d.assets)||void 0===l||delete l.discount,(null===(p=null===(u=e.items)||void 0===u?void 0:u[0])||void 0===p?void 0:p.description)===(null===(g=null===(h=e.items)||void 0===h?void 0:h[0])||void 0===g?void 0:g.providerName)&&(e.items[0].description=null),(null===(f=null===(m=e.items)||void 0===m?void 0:m[0])||void 0===f?void 0:f.description)||this.hasAnyInlineDecoration(e)||(e.template.templateType=b,e.template.allowedAssets=void 0)),(null===(v=e.template)||void 0===v?void 0:v.templateType)===T&&(null===(C=null===(S=null===(y=e.items)||void 0===y?void 0:y[0])||void 0===S?void 0:S.assets)||void 0===C||delete C.discount))}updateTemplateInfoForDRInfopane(e,t){"river"===e.region||"infopane"==e.region&&t.templateType===o.SI.InfopaneDynamicRendering||(t.templateType=o.SI.Default),"river"===e.region&&t.templateType===o.SI.InfopaneDynamicRendering&&(t.templateType=o.SI.Default)}}(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplate")],fn.prototype,"updateTemplate",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInternal")],fn.prototype,"updateTemplateInternal",null),(0,i.gn)([(0,Te.Et)(a.NMS,"processConfig")],fn.prototype,"processConfig",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updatePlacementImageSize")],fn.prototype,"updatePlacementImageSize",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateBeacon")],fn.prototype,"updateBeacon",null),(0,i.gn)([(0,Te.Et)(a.NMS,"serializeTemplateConfig")],fn.prototype,"serializeTemplateConfig",null),(0,i.gn)([(0,Te.Et)(a.NMS,"addOrUpdateQueryParam")],fn.prototype,"addOrUpdateUrlQueryParam",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateSlideshowTemplateType")],fn.prototype,"updateSlideshowTemplateType",null),(0,i.gn)([(0,Te.Et)(a.NMS,"getItemImageSize")],fn.prototype,"getItemImageSize",null),(0,i.gn)([(0,Te.Et)(a.NMS,"calculateDiscount")],fn.prototype,"calculateDiscount",null),(0,i.gn)([(0,Te.Et)(a.NMS,"filterAssetByFlight")],fn.prototype,"filterAssetByFlight",null),(0,i.gn)([(0,Te.Et)(a.NMS,"resetTempateTypeForInfopaneInMultiAds")],fn.prototype,"resetTempateTypeForInfopaneInMultiAds",null),(0,i.gn)([(0,Te.Et)(a.NMS,"isValidProviderNameForBrand",(()=>!1))],fn.prototype,"isValidProviderNameForBrand",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateAllowedAssetsAndTemplateForInfopane")],fn.prototype,"updateAllowedAssetsAndTemplateForInfopane",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInfoForBrandStory")],fn.prototype,"updateTemplateInfoForBrandStory",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateTypeForPriceDiscount")],fn.prototype,"updateTemplateTypeForPriceDiscount",null),(0,i.gn)([(0,Te.Et)(a.NMS,"hasAnyInlineDecoration")],fn.prototype,"hasAnyInlineDecoration",void 0),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInfoForDRInfopane")],fn.prototype,"updateTemplateInfoForDRInfopane",null)},16908:function(e,t,n){"use strict";n.d(t,{dQ:function(){return h}});var i=n(33940),r=n(45506),o=n(65135),a=n(68364),s=n(98304),c=n(81765),d=n(33379);const l={180:"101",270:"102",360:"103",540:"104",720:"105",1080:"107"};function u(e,t,n,i,a,s){var d,l,u,p,h,g,m,f,v,y,S;if(!e||!t)return;const C=e.target.parentElement,b=e.target.querySelector("video"),w=JSON.parse(null===(d=C.attributes["data-t"])||void 0===d?void 0:d.value).n,T=e.target.player,k=function(e){const t={AdStart:"AdPlayStarted",AdComplete:"AdPlayCompleted",EventPause:"Pause",ContentResume:"Resume",seeked:"Seek",error:"ContentError",canplay:"Canplay",canplaythrough:"Canplaythrough"};return t[e]&&(e=t[e]),c.Bs[e]}(t.name),P=null!==(l=t.data)&&void 0!==l?l:{PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"},A="video/mp4"===(null==T?void 0:T.currentType()),I={type:61,name:"nativeAds_"+w,ext:{videoCs:n,eventType:k,timeElasped:b.currentTime,videoFormatCode:A?Number(null==s?void 0:s.format):1006,title:i,videoDuration:null==T?void 0:T.duration(),fr:(null===(u=null===r.Al||void 0===r.Al?void 0:r.Al.ClientSettings)||void 0===u?void 0:u.geo_country)+"_"+(null===(p=null===r.Al||void 0===r.Al?void 0:r.Al.ClientSettings)||void 0===p?void 0:p.geo_city)+"_"+(null===r.Al||void 0===r.Al?void 0:r.Al.Locale)+"_"+a,pageGroup:"",playerInstanceId:e.target.id,playType:"pb",playerTech:P.PlayerTechnology,pluginVersion:P.PlayerTechnology,size:b.clientWidth+"x"+b.clientHeight,videoPlayerType:P.VideoPlayerType,playerType:P.PlayerTechnology,playDuration:b.currentTime,inline:!1,videoUrl:null==T?void 0:T.src(),errorType:t.name===c.pt.Error?null===(h=null==T?void 0:T.error())||void 0===h?void 0:h.code:null,errorDescription:t.name===c.pt.Error?null===(g=null==T?void 0:T.error())||void 0===g?void 0:g.message:null,bandwidth:A?null:null===(f=null===(m=null==T?void 0:T.tech_)||void 0===m?void 0:m.hls)||void 0===f?void 0:f.bandwidth,throughput:A?null:null===(y=null===(v=null==T?void 0:T.tech_)||void 0===v?void 0:v.hls)||void 0===y?void 0:y.throughput,bufferWaitTime:null===(S=t.data)||void 0===S?void 0:S.bufferTime}};o.M0.sendVideoPlayEvent(I,C)}function p(e,t){e&&(e.bigPlayButton&&e.bigPlayButton.el_&&e.bigPlayButton.enabled_&&(e.bigPlayButton.el_.style.display="none"),e.loadingSpinner&&e.loadingSpinner.el_&&(e.loadingSpinner.el_.style.display="none"),t&&(t.style.display="none"))}function h(e,t,n=!0){if((0,d.N)()&&e&&e.items&&e.items.length>t&&e.items[t].video){const r=(new DOMParser).parseFromString(e.items[t].video,"application/xml"),o=e.region,d=r.getElementsByTagName("MediaFile"),h=Array.from(d).map((e=>{return{url:e.textContent,delivery:e.getAttribute("delivery"),id:e.getAttribute("id"),bitrate:Number(e.getAttribute("bitrate")),minBitrate:Number(e.getAttribute("minBitrate")),maxBitrate:Number(e.getAttribute("maxBitrate")),codec:e.getAttribute("codec"),scalable:!!Number(e.getAttribute("scalable")),maintainAspectRatio:!!Number(e.getAttribute("maintainAspectRatio")),width:Number(e.getAttribute("width")),height:Number(e.getAttribute("height")),contentType:e.getAttribute("type"),format:(t=e.getAttribute("type"),n=e.getAttribute("height"),"application/x-mpegURL"==t?"1006":l[n])};var t,n})),g=r.getElementsByTagName("Duration"),m=g.length>0?g[0].textContent:null,f=r.getElementsByTagName("Tracking"),v=Array.from(f).map((e=>({value:e.textContent,event:e.getAttribute("event"),offset:e.getAttribute("offset")}))),y=r.getElementsByTagName("Ad"),S=y.length>0?Number(y[0].getAttribute("id")):null,C=r.getElementsByTagName("AdTitle"),b=C.length>0?C[0].textContent:"",w=r.getElementsByTagName("AdServingId"),T=w.length>0?w[0].textContent:"",k=r.getElementsByTagName("ClickThrough"),P=k.length>0?k[0].textContent:"",A=r.getElementsByTagName("Impression"),I=A.length>0?A[0].textContent:"",E=r.getElementsByTagName("Pricing");let x=null,M=null,O=null;E.length>0&&(x=Number(E[0].textContent),M=E[0].getAttribute("model"),O=E[0].getAttribute("currency"));let L=null,D=null;const R=T+"_"+S,F=(e,t,n,r)=>(0,i.mG)(this,void 0,void 0,(function*(){var i;if(e.type===c.pt.Telemetry&&("ContentOpen"==t.name&&(L=Date.now(),D=L),u(e,t,R,b,o,r)),n===c.pt.Error)(0,a.H)(s.mFi,null===(i=t.error())||void 0===i?void 0:i.message),u(e,{name:c.pt.Error,data:{VideoDuration:m,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},R,b,o,r);else if(L&&n===c.pt.CanPlay){const t=Date.now()-L;L=null,u(e,{name:n,data:{VideoDuration:m,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},R,b,o,r)}else if(D&&n===c.pt.CanPlayThrough){const t=Date.now()-D;D=null,u(e,{name:n,data:{VideoDuration:m,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},R,b,o,r)}})),B=document.createElement("div");B.id="nativeAdVideoMask",B.className="nativeAdVideoMask-mask",B.style.cssText="position:absolute;inset:0px;background-image:var(--mask-gradient, linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0,0,0,0) 176px));display:flex;";const N=(e,t)=>{let[i,r,a,s,d,l,u,h]=[null,null,null,null,null,null,null,null],[g,m,f]=[null,null,null];const v=!!e&&e.el_&&e.el_.querySelector("#nativeAdVideoMask");if(n?(g=!!e&&e.el_&&e.el_.getRootNode().host&&e.el_.getRootNode().host.getRootNode(),m=!!g&&g.host&&g.host.parentElement&&g.host.parentElement.querySelector("native-ad-video-controls")&&g.host.parentElement.querySelector("native-ad-video-controls").shadowRoot,f=!!g&&g.host&&g.host.parentElement&&g.host.parentElement.parentElement&&g.host.parentElement.parentElement.querySelector("native-ad-video-controls")&&g.host.parentElement.parentElement.querySelector("native-ad-video-controls").shadowRoot):(m=!!e&&e.el_&&e.el_.parentElement&&e.el_.parentElement.parentElement,f=!!m&&m.parentElement,g=m||f),g&&(u=g.querySelector(".video-ad-background-img-river"),h=g.querySelector(".video-ad-background-img-infopane")),m&&(s=m.querySelector("#nativead-video-replay-button-river"),d=m.querySelector("#nativead-video-learn-more-button-river")),f&&(i=f.querySelector("#nativead-video-play-button-infopane"),r=f.querySelector("#nativead-video-replay-button-infopane"),a=f.querySelector("#nativead-video-learn-more-button-infopane"),n?l=g.host.parentElement.parentElement.querySelector(".info-pane-slide-title"):"infopane"==o&&(l=f.nextElementSibling&&f.nextElementSibling.querySelector("h3"))),t&&t.toLowerCase()==c.pt.Ended&&(s&&(s.style.display="block"),r&&(r.style.display="block"),a&&(a.style.display="block"),d&&(d.style.display="block")),e&&e.errorDisplay&&e.errorDisplay.el_&&(e.errorDisplay.el_.style.display="none"),t&&t.toLowerCase()==c.pt.Play&&(s&&(s.style.display="none"),i&&(i.style.display="none"),r&&(r.style.display="none"),a&&(a.style.display="none"),d&&(d.style.display="none"),l&&(l.style.display="none"),v&&(v.style.display="none")),t&&t.toLowerCase()==c.pt.Error&&e&&"video/mp4"==e.currentType()&&p(e,i),t&&t.toLowerCase()==c.pt.Pause&&(l&&(l.style.display=null),v&&(v.style.display="flex")),t&&t.toLowerCase()==c.pt.Ready){if(u&&(u.style.display="none"),h&&(h.style.display="none"),i){i.style.display="block";const t=e&&e.posterImage&&e.posterImage.el_;if(t){const n=t.nextSibling;e.el_.insertBefore(B,n)}}e&&!e.currentSrc()&&p(e,i)}};return{VideoPlayerProps:{posterUrl:e.items[t].imageUrl,onMessage:(e,t,n,i)=>{N(t,n),F(e,t,n,i)},videoMetadataProps:{videoSources:h},playerConfigProps:{autoplay:"river"==o,inViewPlay:"river"==o,replayWhenInView:!1,outOfViewPause:!0,inViewPlayPercentage:.5,muted:!0,disableSeek:!0,useProgressiveVideoFallback:!0}},ViewabilityProps:{Duration:m,TrackingEvents:v},VideoAdProps:{AdId:S,AdTitle:b,AdServingId:T,ClickThrough:P,Impression:I,Price:x,PricingModel:M,Currency:O}}}return null}},37890:function(e,t,n){"use strict";n.d(t,{o:function(){return b}});var i=n(33940),r=n(45506),o=n(92773),a=n(27003),s=n(99590),c=n(65135),d=n(57846),l=n(98304),u=n(68364),p=n(49972);var h=n(96154),g=n(81765);const m="ntp.background_image_type",f="ntp.news_feed_display",v="ntp.layout_mode",y=(new Set(["ntp.user_nurturing","ntp.record_user_choices",m,f,v]),new Set(["cs-cz","da-dk","de-at","de-ch","de-de","de-ch","el-gr","en-gb","en-ie","en-xl","es-es","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-pt","sv-se","tr-tr"]));class S{static initializeMarqueeAd(e,t,n,i){const r=new S;if(!window)throw new Error("Can not fetch Marquee ad since no window object available");window._marquee_ad_request={marqueeAdFetchPromise:r.fetchMarqueeAd(t,e,n,i)}}getBrowserOptOutStatus(){const e=(0,h.AE)("TOptOut");return!(!e||"1"!==e)}isCookieBannerPresent(e){if(!e||!y.has(e.toLowerCase()))return!1;return null===(0,h.AE)("eupubconsent-v2")}createSamAdRequestData(e,t,n,i){if(!e)return;const{locale:r,pagetype:o,audienceMode:a,fd_muid:s,aid:c}=e,l=s||(0,h.AE)("MUID");if(!(r&&r.language&&r.market&&o&&"kids"!==a))return;const u=r.language+"-"+r.market,p=this.isCookieBannerPresent(e.locale.language+"-"+e.locale.market),g=!p&&l?l:null,m=this.getBrowserOptOutStatus(),f=i||(document.URL&&document.URL.includes("localhost")?"https://ntp.msn.com/edge/ntp":document.URL),v={[d.r.Logo]:[0,0],[d.r.HighResolution4K]:[3840,2160],[d.r.C1]:[632,1440],[d.r.C2]:[944,1440],[d.r.C3]:[1256,1440],[d.r.C4]:[1600,1440],[d.r.C5]:[1920,1440]},y={locale:u,rid:c,partnerId:o,content:{sourceUrl:f,pageType:"edgechrntp",audienceMode:a},user:{muid:g,browserOptOut:m,isAdblock:!1},placements:[{region:"bespoke",indices:[1],img:{w:1920,h:1440},assets:[[{id:1,required:1,title:{len:90}},{id:2,required:1,data:{type:1}},{id:3,required:1,data:{type:2}},{id:4,required:1,data:{type:12}},...Object.keys(v).map(((e,t)=>({id:t+5,required:1,img:{type:Number(e),w:v[e][0],h:v[e][1],wmin:v[e][0],hmin:v[e][1]}})))]]}],isCookieWallPresent:p,isPeregrine:!0,device:{isMobile:!1}},S=new Headers;return S.append("x-ms-flightId",t),S.append("Content-Type","application/json; charset=utf-8"),S.append("User-Agent",n||navigator.userAgent),S.append("x-msedge-market",u),S.append("x-msedge-clientid",g),{headers:S,method:"POST",body:JSON.stringify(y)}}fetchMarqueeAd(e,t,n,i){if(!t)throw new Error("Can not fetch Marquee ad since no client settings available");let r;r=window.location.search&&window.location.search.includes("useDevSrtb=1")?new URL(g.Lr.SamEndpoint,"https://srtb-dev.msn.com/"):new URL(g.Lr.SamEndpoint,g.Lr.SamDomain);const o=this.createSamAdRequestData(t,e,n,i);return fetch(r,o)}}class C{constructor(){this.marqueeAdInitialized=!1,this.marqueeAdResponseProcessed=new Promise((e=>{this.marqueeAdPromiseResolver=e})),this.attachIasScriptWrapper=(0,o.Et)(l.Q0n,"attachIasScript"),this.attachIasScript=this.attachIasScriptWrapper(((e,t)=>{if(!e)return;const n=e.split(";"),i=n[0]&&n[0].split(":")[1],r=n[1]&&n[1].split(":")[1];if(i&&r){if(globalThis.isSingleIASInstance=!0,globalThis.__IntegralASAdPush)return void this.IASAdPush(t,i,r);const e=document.createElement("script");e.async=!0,e.src="https://assets.msn.com/staticsb/statics/latest/js/thirdparty/ias/fw.js",e.onload=()=>{this.IASAdPush(t,i,r)},e.onerror=()=>{c.M0.sendAppErrorEvent((0,u.Tr)(l.Sp0,"Failed to download IAS FW JS"))},document.head.appendChild(e)}})),this.IASAdPushWrapper=(0,o.Et)(l.Q0n,"IASAdPush"),this.IASAdPush=this.IASAdPushWrapper(((e,t,n)=>{globalThis.__IntegralASAdPush([{adSelector:"%23"+e,iasParameters:JSON.stringify({host:"",config:"/rjss/st/"+t+"/"+n+"/skeleton.js?iasProxyPartnerId=2&ias_adpath=%23"+e,contentType:"application/json"})}])}))}static getInstance(){return a.Gq.get("__MarqueeAdService__",(()=>new C))}mapSamAdResponseToMarqueeAd(e,t){var n,i,r;const o={title:"",images:[],adClickedUrls:[],adServedUrls:[],adViewedUrls:[],clickThroughUrl:"",isUpdated:t};if(!e)throw new Error("Invalid SAM response");if(!(null==e?void 0:e.placements)||0===(null==e?void 0:e.placements.length))throw new Error("Ad placements is empty in SAM response");const a=e.placements[0];if(!(null==a?void 0:a.items)||0===a.items.length)throw new Error("Ad items is empty in ad placement");const s=a.items[0];if(!(null==s?void 0:s.assets)||0===s.assets.length)throw new Error("Ad assets is empty in ad item");const c=s.assets.find((e=>e.title));if(!c)throw new Error("Ad item title is empty");o.title=c.title.text;const l=s.assets.find((e=>{var t;return 1===(null===(t=e.data)||void 0===t?void 0:t.type)}));if(!l||!(null===(n=l.data)||void 0===n?void 0:n.value))throw new Error("Ad item provider name is empty");o.providerName=l.data.value;const u=s.assets.filter((e=>e.image));if(!u.length)throw new Error("Ad item images is empty");o.images=u.map((e=>e.image));const p=s.assets.find((e=>{var t;return 12===(null===(t=e.data)||void 0===t?void 0:t.type)}));if(!p||!(null===(i=p.data)||void 0===i?void 0:i.value))throw new Error("Ad item cta text is empty");o.ctaText=p.data.value;const h=s.assets.find((e=>{var t;return(null===(t=e.image)||void 0===t?void 0:t.type)===d.r.Logo}));if(!h||!(null===(r=h.image)||void 0===r?void 0:r.url))throw new Error("Ad item sponsor logo is empty");if(o.sponsorLogoImageUrl=h.image.url,!s.url||0===s.url.length)throw new Error("Ad item url is empty");return o.clickThroughUrl=s.url,a.adServedUrls&&(o.adServedUrls=a.adServedUrls),a.visibilityUrls&&(o.adViewedUrls=a.visibilityUrls),s.clickUrls&&(o.adClickedUrls=s.clickUrls),o.nativeAdId="marqueeAdContainer",o.verificationParameters=s.verificationParameters,o}getMarqueeAdRequest(){return window._marquee_ad_request}getMarqueeAd(){return this.marqueeAd}initializeMarqueeAd(e=!1){var t;return(0,i.mG)(this,void 0,void 0,(function*(){if(window.marqueeAdInitialized&&window.marqueeAd&&!this.marqueeAd)return this.marqueeAd=window.marqueeAd,this.marqueeAdInitialized=!0,void(this.marqueeAdEligibility=!0);if(!e&&this.marqueeAdInitialized)return;if(this.marqueeAdInitialized=!0,e&&S.initializeMarqueeAd(r.Al.ClientSettings,r.Al.CurrentFlights),!(null===(t=this.getMarqueeAdRequest())||void 0===t?void 0:t.marqueeAdFetchPromise))return void this.marqueeAdPromiseResolver();let n,i;try{const e=this.getMarqueeAdRequest();if(!(null==e?void 0:e.marqueeAdFetchPromise))throw new Error("Marquee ad request is missing, maybe it is not initialized successfully");n=yield e.marqueeAdFetchPromise}catch(e){return void c.M0.sendAppErrorEvent((0,u.Tr)(l.KPf,`Marquee ad request failed. Error: ${(0,p.n)(e)}`))}if(!n||!n.body||!n.ok||200!==n.status)return 204===(null==n?void 0:n.status)?c.M0.sendAppErrorEvent((0,u.Tr)(l.KPf,"Marquee ad returned no content")):c.M0.sendAppErrorEvent((0,u.Tr)(l.KPf,`Marquee ad did not return the expected response. marqueeAdResponse: ${n}, body: ${null==n?void 0:n.body}, ok: ${null==n?void 0:n.ok}, status code: ${null==n?void 0:n.status}`)),void this.marqueeAdPromiseResolver();try{i=yield n.json()}catch(e){return c.M0.sendAppErrorEvent((0,u.Tr)(l.KPf,`Marquee ad response could not be parsed. Error: ${(0,p.n)(e)}`)),void this.marqueeAdPromiseResolver()}try{this.marqueeAd=this.mapSamAdResponseToMarqueeAd(i,e),this.marqueeAdEligibility=!0}catch(e){c.M0.sendAppErrorEvent((0,u.Tr)(l.KPf,`Map marquee ad error. Error: ${(0,p.n)(e)}`))}this.marqueeAdPromiseResolver()}))}getMarqueeAdEligibilityAync(){return(0,i.mG)(this,void 0,void 0,(function*(){return!!this.marqueeAdEligibility||(yield this.marqueeAdResponseProcessed,this.marqueeAdEligibility)}))}sendVerificationToIas(){this.attachIasScript(this.marqueeAd.verificationParameters,this.marqueeAd.nativeAdId)}sendBeacons(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(e&&e.length)for(let t=0;t<e.length;t++){let n=new Image(1,1);n.src=e[t],n=null}}))}}const b=(0,s.h)(C)},62425:function(e,t,n){"use strict";n.d(t,{H3:function(){return o},l:function(){return s},l4:function(){return a}});var i=n(56474),r=n(27003);const o="native-ad-data",a="native-ad-request-data",s=()=>r.Gq.get("__nativeAdDataCache__",(()=>new i.v("nativeAdDataCache")))},60260:function(e,t,n){"use strict";n.d(t,{GM:function(){return d},dO:function(){return c}});var i=n(29666),r=n(98304),o=n(78931),a=n(92773);const s=[{ratio:i.hb._lowerBound,width:1,height:9999},{ratio:i.hb._1by191,width:1,height:1.91},{ratio:i.hb._9by16,width:9,height:16},{ratio:i.hb._3by4,width:3,height:4},{ratio:i.hb._1by1,width:1,height:1},{ratio:i.hb._4by3,width:4,height:3},{ratio:i.hb._16by9,width:16,height:9},{ratio:i.hb._191by1,width:1.91,height:1}],c=(0,a.Et)(r.Evv,"calculateRatio")((e=>{var t,n;const i=null===(t=null==e?void 0:e.items[0])||void 0===t?void 0:t.originalImageWidth,r=null===(n=null==e?void 0:e.items[0])||void 0===n?void 0:n.originalImageHeight;if(!i||!r)return;const o=u(e.items[0].imageUrl);if(!o)return;const a=o.searchParams.get("c");if(a&&"4"!==a)return;const c=Number(i),d=Number(r);let l=1;for(;l<s.length&&Math.ceil(c*s[l].height)!==Math.ceil(d*s[l].width);++l)if(!(Math.ceil(c*s[l].height)>Math.ceil(d*s[l].width))){if(1==l)break;const e=1*c/d;Math.abs(e-s[l].width/s[l].height)>=Math.abs(e-s[l-1].width/s[l-1].height)&&(l-=1);break}l==s.length&&(l-=1),e.template.desiredRatio=s[l].ratio})),d=(0,a.Et)(r.Evv,"reduceWidthOrHeightAndUpdateUrl")(((e,t,n,i)=>{const r=(0,o.Z)(s,(e=>e.ratio===t));if(1!==r.length)return;const a=r[0],c=n?e.ext.originalImageWidth:e.originalImageWidth,d=n?e.ext.originalImageHeight:e.originalImageHeight;if(!c||!d)return;const u=1*c/d,p=1*a.width/a.height,h={w:c,h:d};u>=p?h.w=Math.round(d*p):h.h=Math.round(c/p);const g={river:300,infopane:604};return h.w>g[i]?(h.h=Math.round(h.h*g[i]/h.w),h.w=g[i]):(h.h=g[i]*p,h.w=g[i]),l(h.h,h.w,e,n),h})),l=(0,a.Et)(r.Evv,"updateUrlWithDesiredSize")(((e,t,n,i)=>{const r=u(i?n.url:n.imageUrl);r&&(r.searchParams.set("h",e),r.searchParams.set("w",t),r.searchParams.set("c","4"),i?n.url=r.href:n.imageUrl=r.href)})),u=(0,a.Et)(r.Evv,"constructUrl")((e=>{let t;try{t=new URL(e)}catch(n){try{t=new URL(`https://${e}`)}catch(e){return}}return t}))},87618:function(e,t,n){"use strict";n.d(t,{F8:function(){return I},Sj:function(){return A},vy:function(){return k}});var i=n(88875),r=n(13578),o=n(31011),a=n(11935),s=n(4935),c=n(98304),d=n(99753),l=n(60260),u=n(92773);const p=(0,u.Et)(c.Evv,"checkConfigType")(((e,t)=>t.template.configType===e.configType)),h=(0,u.Et)(c.Evv,"checkRegion")(((e,t)=>e.region.includes(t.region))),g=(0,u.Et)(c.Evv,"checkAllAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAll)||e.requiredAssetsAll.every((e=>{var n,o;return!(0,r.Z)(null===(n=null==t?void 0:t.items[0])||void 0===n?void 0:n.assets)&&Object.keys(null===(o=null==t?void 0:t.items[0])||void 0===o?void 0:o.assets).some((t=>e===i.aT[t]))})))),m=(0,u.Et)(c.Evv,"checkAnyAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAny)||e.requiredAssetsAny.some((e=>{var n,o;return!(0,r.Z)(null===(n=null==t?void 0:t.items[0])||void 0===n?void 0:n.assets)&&Object.keys(null===(o=null==t?void 0:t.items[0])||void 0===o?void 0:o.assets).some((t=>e===i.aT[t]))})))),f=(0,u.Et)(c.Evv,"checkAdCount")(((e,t)=>t.items.length<=(e.maxAdCount||1))),v=(0,u.Et)(c.Evv,"checkMultiImage")(((e,t)=>{var n,i;return!e.multiImage||(null===(i=null===(n=t.items[0])||void 0===n?void 0:n.images)||void 0===i?void 0:i.length)>1})),y=(0,u.Et)(c.Evv,"checkDiscountThreshold")(((e,t)=>{var n;return!e.discountThreshold||!(null===(n=t.items[0])||void 0===n?void 0:n.assets)||e.discountThreshold<=t.items[0].assets.discount})),S=(0,u.Et)(c.Evv,"checkRatio")(((e,t)=>{var n,i;return!e.supportedImageRatios||(null===(n=e.supportedImageRatios)||void 0===n?void 0:n.includes(null===(i=null==t?void 0:t.template)||void 0===i?void 0:i.desiredRatio))})),C=(0,u.Et)(c.Evv,"setTemplate")(((e,t)=>{t.template.templateType=e.template instanceof Function?e.template(e,t):e.template,t.template.dynamicRenderingConfig=e.dynamicRenderingConfig&&e.dynamicRenderingConfig(t)})),b=(0,u.Et)(c.Evv,"filterAssets")(((e,t)=>{var n,c;if(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.enableVA)return;const d=(0,o.Z)([...i.fs,...(null===(c=null==t?void 0:t.template)||void 0===c?void 0:c.allowedAssets)||[],...e.supportedAssets||[],...e.requiredAssetsAll||[],...e.requiredAssetsAny||[]]);(0,a.Z)(t.items,(e=>{if((0,r.Z)(d)||(0,r.Z)(null==e?void 0:e.assets))return void delete e.assets;const t=(0,s.Z)(e.assets,((e,t,n)=>(d.includes(i.aT[n])&&(e[n]=t),e)),{});e.assets=t}))})),w=(0,u.Et)(c.Evv,"updateImageRatio")(((e,t)=>{if(!e.supportedImageRatios||!e.targetImageRatio)return;let n;const i=d.cE.includes(t.region)?"infopane":"river";t.items.forEach((t=>{const r=(0,l.GM)(t,e.targetImageRatio,!1,i);n||(n=r),t.images&&(0,a.Z)(t.images,(t=>{t.ext&&t.ext.originalImageWidth&&t.ext.originalImageHeight&&(0,l.GM)(t,e.targetImageRatio,!0,i)}))})),(null==n?void 0:n.h)&&(null==n?void 0:n.w)&&(t.template.desiredHeight=n.h.toString(),t.template.desiredWidth=n.w.toString())})),T=(0,u.Et)(c.Evv,"trimProviderName")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.providerName&&(e.providerName=k(e.providerName))}))})),k=(0,u.Et)(c.Evv,"trimProviderNameHelper")((e=>{if(!e)return"";const t=e.trim();try{let e=t;t.startsWith("http://")||t.startsWith("https://")||(e="https://"+t),new URL(e);const n=t.match(/^(www\.)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)/);return n?t.length-n[2].length==1?t:n[2]:t}catch(e){return t}})),P=(0,u.Et)(c.Evv,"updateLayoutColor")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.images&&e.images.forEach((e=>{e&&e.ext&&e.ext.layoutColor&&(e.ext.layoutColor.startsWith("#")||(e.ext.layoutColor="#"+e.ext.layoutColor))}))}))})),A=[p,h,g,m,f,y,v,S],I=[C,b,w,T,P]},99753:function(e,t,n){"use strict";n.d(t,{yp:function(){return d},vn:function(){return C},KB:function(){return A},XP:function(){return P},cE:function(){return y},Ue:function(){return I},PY:function(){return q},Up:function(){return E},dj:function(){return G},FH:function(){return S},FC:function(){return b},rf:function(){return z},PB:function(){return T},Fg:function(){return v},R:function(){return D},JU:function(){return R},J2:function(){return N},uH:function(){return B},ZV:function(){return W},xP:function(){return H},$u:function(){return F},E5:function(){return j},Gu:function(){return J},BU:function(){return k},n_:function(){return m},zI:function(){return f},Fz:function(){return w}});var i=n(29666),r=n(27679),o=n(88087);const a=(0,r.ZV)(o.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating",displayReviewCount:!1}]}]),s=(0,r.RM)(o.$,"gradient-mask",{name:"gradient-mask",setClickBeacon:!0,layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"special-offer",isDrConfig:!0,layout:{mode:"block",display:"inline-block",position:"relative",marginBottom:"8",marginInlineStart:"16",marginInlineEnd:"16",width:"150",zIndex:5}},{name:"ad-title",setClickBeacon:!0}]}),c=(0,r.ZV)(o.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]);var d,l=n(90351),u=n(24526),p=n(98304),h=n(94792),g=n(92773);!function(e){e.river="river",e.infopane="infopane",e.resriver="resriver",e.rivercms="river_cms",e.riverdb="riverdb",e.riverAmplify="river_amp",e.restoday="restoday",e.todaystripe="todaystripe",e.newsstripe="News-Stripe",e.entertainmentstripe="Entertainment-Stripe",e.sportsstripe="Sports-Stripe",e.lifestylestripe="Lifestyle-Stripe",e.rightRail="rightRail",e.rightRailAmplify="rr_amp",e.resinfopane="resinfopane",e.infopanetab="infopane-tab",e.infopanecms="infopane_cms",e.sliver="sliver",e.rightrail="rightrail",e.eoab="eoab",e.rectangle="rectangle",e.inarticle="inarticle",e.WatchInFeed="intranative",e.eoabmsx="eoabmsx",e.interstitialgallery="interstitialgallery",e.articleInline="ArticleInline",e.rivert="rivert",e.infopanet1="infopanet1",e.infopanet3="infopanet3"}(d||(d={}));const m=[d.rightrail,d.eoab,d.rectangle,d.inarticle,d.eoabmsx,d.interstitialgallery,d.WatchInFeed,d.articleInline,d.rivert],f=[d.river,d.riverdb],v=(d.riverdb,[d.river,d.resriver,d.rivercms,d.rightRail,d.rightrail]),y=[d.infopane,d.resinfopane,d.infopanetab,d.infopanecms],S=[d.restoday,d.todaystripe,d.newsstripe,d.entertainmentstripe,d.sportsstripe,d.lifestylestripe],C=[...v,...y],b=[...v,...S,d.riverdb,d.rightRail,d.rightrail,d.sliver,d.rectangle,d.eoab,d.inarticle],w=[d.infopane,d.resinfopane,d.riverdb],T=[d.infopane,d.resinfopane],k=[d.infopanet1,d.infopanet3],P={default:20,discScribble10:10,hotspotSingle10:10,saleHighlight15:15,gamification:5},A=10,I=e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].images&&e.items[0].images[0]&&e.items[0].images[0].ext&&e.items[0].images[0].ext.layoutColor),E=e=>((e,t)=>{var n,i,r;const o=null===(r=null===(i=null===(n=null==e?void 0:e.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.assets)||void 0===r?void 0:r.transparentImage,a=null==o?void 0:o.w,s=null==o?void 0:o.h;return!!((null==o?void 0:o.url)&&null!=o&&s>0&&a>0)&&t(a,s)})(e,((e,t)=>e/t<1.4)),x=e=>(0,l.Z)(e,"items[0].assets.rating"),M=e=>(0,l.Z)(e,"items[0].assets.specialOffer"),O=e=>(0,l.Z)(e,"items[0].assets.freeShipping"),L=e=>(0,l.Z)(e,"items[0].assets.discount"),D=e=>x(e)?a:M(e)?s:O(e)?c:void 0,R=e=>x(e)?i.SI.ComboRating:M(e)?i.SI.ComboSpecialOffer:O(e)?i.SI.ComboFreeShipping:void 0,F=(e,t)=>{var n;t&&(e.enableNativeAdWC=!0);const i=null===(n=null==e?void 0:e.items[0])||void 0===n?void 0:n.assets;(null==i?void 0:i.rating)?e.items[0].assets=(0,u.Z)(i,["rating"]):(null==i?void 0:i.specialOffer)?e.items[0].assets=(0,u.Z)(i,["specialOffer"]):(null==i?void 0:i.discount)&&(null==i?void 0:i.discount)>=P.saleHighlight15?e.items[0].assets=(0,u.Z)(i,["discount"]):(null==i?void 0:i.freeShipping)&&(e.items[0].assets=(0,u.Z)(i,["freeShipping"]))},B=e=>x(e)?i.SI.ComboRatingNonDR:M(e)?i.SI.ComboSpecialOfferNonDR:L(e)&&L(e)>=P.saleHighlight15?i.SI.ComboSaleHighlightNonDR:O(e)?i.SI.ComboFreeShippingNonDR:i.SI.Default,N=e=>x(e)?i.SI.ComboRatingNonDRControl:M(e)?i.SI.ComboSpecialOfferNonDRControl:L(e)&&L(e)>=P.saleHighlight15?i.SI.ComboSaleHighlightNonDRControl:O(e)?i.SI.ComboFreeShippingNonDRControl:i.SI.Default,U=e=>(0,l.Z)(e,"items[0].assets.sold"),$=e=>(0,l.Z)(e,"items[0].assets.returnPolicy"),_=e=>(0,l.Z)(e,"items[0].assets.condition"),H=e=>U(e)?i.SI.ComboSoldNonDR:$(e)?i.SI.ComboReturnPolicyNonDR:_(e)?i.SI.ComboConditionNonDR:i.SI.Default,W=e=>U(e)?i.SI.ComboSoldNonDRControl:$(e)?i.SI.ComboReturnPolicyNonDRControl:_(e)?i.SI.ComboConditionNonDRControl:i.SI.Default,j=(e,t)=>{var n;t&&(e.enableNativeAdWC=!0);const i=null===(n=null==e?void 0:e.items[0])||void 0===n?void 0:n.assets;(null==i?void 0:i.sold)?e.items[0].assets=(0,u.Z)(i,["sold"]):(null==i?void 0:i.returnPolicy)?e.items[0].assets=(0,u.Z)(i,["returnPolicy"]):(null==i?void 0:i.condition)&&(e.items[0].assets=(0,u.Z)(i,["condition"]))},G=(0,g.Et)(p.Evv,"modifyImageUrlForResponsiveImageSizingTemplate")(((e,t)=>{var n,r,o,a,s;const c=null===(n=null==e?void 0:e.items)||void 0===n?void 0:n[0],d=null===(r=c.assets)||void 0===r?void 0:r.price;if(e.template.templateType=i.SI.Default,c&&!d){const n=Z(parseFloat(c.originalImageHeight),parseFloat(c.originalImageWidth),c.imageUrl,e.template.responsiveImageSizingTemplateConfigs);n&&n.imageUrl!==c.imageUrl&&Q(null===(o=null==n?void 0:n.responsiveImageSizingTemplateConfig)||void 0===o?void 0:o.maxHeight,(0,h.O1)(null===(s=null===(a=e.items)||void 0===a?void 0:a[0])||void 0===s?void 0:s.title))&&(e.enableResponsiveImageSize=!0,e.template.templateType=i.SI.ResponsiveImageSizing,t||(e.responsiveImageSizingTemplateConfig=n.responsiveImageSizingTemplateConfig,e.items[0].imageUrl=n.imageUrl))}})),V=(0,g.Et)(p.Evv,"isDescriptionShowingHelper")(((e,t)=>{var n,i,r,o;const a=null===(i=null===(n=e.items)||void 0===n?void 0:n[0])||void 0===i?void 0:i.description,s=null===(o=null===(r=e.items)||void 0===r?void 0:r[0])||void 0===o?void 0:o.title,c=(null==a?void 0:a.length)>1&&s!=a,l=d[e.region];return w.includes(l)?c:c&&(0,h.O1)(s)<=t})),q=(0,g.Et)(p.Evv,"isDescriptionShowing")(((e,t)=>V(e,t)?i.SI.ResponsiveDescription:i.SI.Default)),z=(0,g.Et)(p.Evv,"pickRandomTemplateWithDensity")(((e,t,n,i)=>{if(Math.random()>i)e.enablePattern=!1,e.template.templateType=n;else{const n=t.length,i=Math.floor(Math.random()*n);e.template.templateType=t[i],e.enablePattern=!0}})),Q=(0,g.Et)(p.Evv,"isTitleLineMeetRequire")(((e,t)=>!(!e||!t)&&(225===e&&t<=1||200===e&&t<=2))),Z=(0,g.Et)(p.Evv,"modifyImageUrl")(((e,t,n,i)=>{if(!(e&&t&&n&&n.startsWith("https://www.bing.com/th")))return{imageUrl:n};const r=K(n),o=n.split("?")[0];if(!i||0===i.length)return{imageUrl:n};for(let n=0;n<i.length;n++){const a=i[n],s=t/e;if(s>=a.lowerBound&&s<=a.placementRatio){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&w=${a.maxWidth}`,responsiveImageSizingTemplateConfig:a}}if(s>a.placementRatio&&s<=a.upperBound){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&h=${a.maxHeight}`,responsiveImageSizingTemplateConfig:a}}}return{imageUrl:n}})),K=(0,g.Et)(p.Evv,"parseImageUrl")((e=>{if(!e)return;const t=new URL(e),n=new URLSearchParams(t.searchParams),i={};return n.forEach(((e,t)=>{["id","pid"].includes(t)&&(i[t]=e)})),i})),J=(0,g.Et)(p.Evv,"switchToAIImage")((e=>{e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].imageUrl&&(e.items[0].imageUrl=e.items[0].assets.transparentImage.url)}))},95592:function(e,t,n){"use strict";n.d(t,{Bi:function(){return m},En:function(){return d},FD:function(){return u},IA:function(){return g},Yf:function(){return l},c5:function(){return f}});var i=n(81765),r=n(29020),o=n(98304),a=n(65135),s=n(33379),c=n(18769);function d(e){return i.S7[e]||"Ad"}function l(e){let t="";if(!e)return t;try{const n=JSON.parse(e).tcb;n&&Array.isArray(n)&&n.forEach((e=>{e.includes("srtb")&&(t=e.replace("notify/clicked","notify/feedback"))}))}catch(e){t=""}return t}function u(e,t,n){var i,c;let d;if(t)d=e.imp[0];else{if(!e.data)return;try{d=JSON.parse(e.data)}catch(t){a.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.TBk),{message:"Invalid JSON sent to card mapper from WPO Boost",pb:Object.assign(Object.assign({},o.TBk.pb),{customMessage:`${t&&t.message}`,wpoJson:e.data})}))}}const l=null===(c=null===(i=p(d,!0))||void 0===i?void 0:i.promotions)||void 0===c?void 0:c[0];return(0,s.N)()&&f(l,n),d.tagid===r.x.Prong2?l.isProng2Promotion=!0:d.tagid==r.x.Prong1&&(l.isProng1Promotion=!0),l}function p(e,t){if(!e.Promotions&&e.Promotions.length>0)return;const n={promotions:[]};return t?n.promotions[0]=h(e.Promotions[0]):n.promotions=e.Promotions.map((e=>h(e))),n}function h(e){var t;const{images:n,longTitle:i,title:r,description:o,displayUrl:a,targetUrl:s,Beacons:c,brand:d,merchantCategory:l,actionText:u,logo:p}=e,{imageUrl:h}=n&&n[0],g=c.map((e=>e.MIFeedbackurl)),m=c.map((e=>e.MVFeedbackurl)),f=c.map((e=>e.EventUrl.replace("{ACTION}","click"))),v=JSON.stringify({tcb:f}),y=JSON.stringify({tvb:m,trb:g,e:!0,tjb:[]});return{region:"rr_amp",regionIndex:void 0,destinationUrl:s||"",imageUrl:h||"",imageUrlFallback:(null===(t=n[1])||void 0===t?void 0:t.imageUrl)||h,tagLine:i||r,logoText:a||"",clickBeacons:v||"",beaconsJson:y||"",images:n,logo:p,brand:d,category:l,actionText:u,logoUrl:null==p?void 0:p.imageUrl}}function g(e,t){if(!function(e,t=0){return e.Promotions&&e.Promotions.length>t}(e))return;const n=e.Promotions[0],{images:i,longTitle:r,title:o,description:a,displayUrl:s,targetUrl:c,Beacons:d}=n,{height:l,width:u,imageUrl:p}=i[0];let h="",g="";h=l&&l.toString(),g=u&&u.toString();const m=d.map((e=>e.MIFeedbackurl)),f=d.map((e=>e.MVFeedbackurl)),v=d.map((e=>e.EventUrl.replace("{ACTION}","click"))),y=JSON.stringify({tcb:v}),S={region:"rr_amp",regionIndex:1,items:[],adServedUrls:m,visibilityUrls:f,beaconsJson:JSON.stringify({tvb:f,trb:m,e:!0,tjb:[]})},C={destinationUrl:c,imageHeight:h,imageUrl:p,imageWidth:g,title:r||o,description:a,prong2AmplifyBusinessName:s,clickBeacons:y};return S.items.push(C),S.imageHeight=h,S.imageWidth=g,S}function m(e,t){if(!e||!e.index||!e.region)return;const{adServedUrls:n,beaconsJson:r,index:o,items:a,jsTrackerUrls:s,locale:c,privacyUrl:u,providerId:p,region:h,visibilityUrls:g}=e,m={adServedUrls:n,beaconsJson:r,items:[],jsTrackerUrls:s,privacyUrl:u,providerId:p,region:h,regionIndex:o,visibilityUrls:g};m.adLabelText=d(c),m.isGreyAdsLabelEnabled=i.Eg.includes(c);let f="",v="";return a.forEach((e=>{const{adChoicesUrl:t,assets:n,clickBeacons:i,description:r,imageHeight:o,imageWidth:a,imageUrl:s,originalImageHeight:c,originalImageWidth:d,sourceName:u,title:p,uniqueId:h,url:g}=e;f=o&&o.toString(),v=a&&a.toString();const y={adChoiceIconUrl:t,assets:n,clickBeacons:i,destinationUrl:g,description:r,feedbackUrl:i&&l(i),imageHeight:f,imageUrl:s,imageWidth:v,originalImageHeight:c&&c.toString(),originalImageWidth:d&&d.toString(),providerName:u,title:p,uniqueId:h};m.items.push(y)})),m.imageHeight=f,m.imageWidth=v,m}function f(e,t){if(e.beaconsJson){new c.A(t).sendBeaconForAdServed({beaconsJson:e.beaconsJson,beaconsSupportHttpPOST:e.beaconsSupportHttpPOST})}}},94792:function(e,t,n){"use strict";n.d(t,{O1:function(){return a}});const i=2.255859375,r=(e,t=20)=>{if(!e||0===e.length)return 0;const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.13623046875,.3046875,.4375,.8,.6,.9,.8,.3,.4,.4328125,.5,.7,.4,.403125,.3,.6,.6,.403125,.6,.6,.7,.6,.6,.6,.6,.6,.3,.4,.6953125,.7,.6953125,.5,1,.8,.6046875,.7,.71875,.6,.503125,.7,.7359375,.3,.5,.7,.6,.925,.8,.8,.6,.9,.7,.6,.7,.703125,.8,1.1,.8,.8,.7,.4,.6,.3328125,.7,.6,.3,.5234375,.603125,.5,.603125,.6,.5,.603125,.6,.3,.5,.6,.3,.9,.6,.6,.603125,.603125,.4,.5,.5,.6,.7,.9,.7,.7,.6,.4,.3,.4,.7];return e.split("").map((e=>o(e,n,.5944274259868422,1.030769230769231))).reduce(((e,t)=>t+e))*t},o=(e,t,n,i)=>{const r=e.charCodeAt(0);return r<t.length?t[r]:s(e)?i:n},a=(e,t=265,n=20)=>{if(!e||0===e.length)return 0;const o=e.split(" ");let a=1,s=t;for(let e=0;e<o.length;e++){const c=r(o[e],n);c>s?(a+=1,s=t-c-i):c===s?(a+=1,s=t):s=s-c-i}return a},s=e=>/^[\u4e00-\u9fff\u3040-\u30ff\u1100-\u11ff\u3130-\u318f\uac00-\ud7af]$/.test(e)},68723:function(e,t,n){"use strict";n.d(t,{Ai:function(){return a},F8:function(){return d},GL:function(){return o},P$:function(){return i},_7:function(){return c},jV:function(){return s},mC:function(){return r},x7:function(){return l}});const i={id:"https://enterprisenews.microsoft.com",friendlyName:n(1038).Ak},r="https://ent-api.msn.com/news/companies/current/settings",o="Peregrine",a="AdminPortalSettings",s="AdminPortalSettingsRetryTimes",c=3,d="AdminPortalUserLayoutCache",l="isContentFeedManagedByAdminPortal"},88087:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var i=n(9915),r=n(27679);const o={name:"default-template",children:[...i.u,{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},a=(0,r.Tb)(o,"product-image",{imageMaskOn:!0})},27679:function(e,t,n){"use strict";n.d(t,{As:function(){return s},BH:function(){return o},FT:function(){return l},It:function(){return d},Oz:function(){return i},RM:function(){return a},Tb:function(){return c},ZV:function(){return u}});class i{}i.byName=e=>t=>(null==t?void 0:t.name)===e;class r{}function o(e,t,n=r.identity()){return p(e,[{condition:t,action:n}])}function a(e,t,n){return o(e,i.byName(t),r.replaceWith(n))}function s(e,t,n){const o=[];for(let e=0;e<t.length;e++)o.push({condition:i.byName(t[e]),action:r.replaceWith(n[e])});return p(e,o)}function c(e,t,n){return o(e,i.byName(t),r.extendFields(n))}function d(e,t,n){const o=[];for(let e=0;e<t.length;e++)o.push({condition:i.byName(t[e]),action:r.extendFields(n[e])});return p(e,o)}function l(e,t,n,a){return o(e,i.byName(t),r.spliceChildren(n,a))}function u(e,t,n,a=[],s){return o(e,i.byName(t),r.spliceChildren(n,a,s))}function p(e,t){if((e=t.reduce(((e,t,n,i)=>{const{condition:r,action:o}=t;return r(e)?(i[n]=null,o(e)):e}),e)).children){const n=e.children.map((e=>p(e,t.filter((e=>e)))));return Object.assign(Object.assign({},e),{children:n})}return e}r.identity=()=>e=>e,r.replaceWith=e=>()=>e,r.extendFields=e=>t=>Object.assign(Object.assign({},t),e),r.spliceChildren=(e,t=[],n)=>i=>{const r=[...i.children||[]];return r.splice(e,n,...t),Object.assign(Object.assign({},i),{children:r})}},9915:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});const i=[{name:"product-image",layout:{position:"absolute",left:0,top:0,width:"300",height:"225",zIndex:1}},n(18297).l]},18297:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});const i={name:"footer",layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%"},children:[{name:"start-action-part",children:[{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5}},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout"}]},{name:"end-action-part",children:[{name:"disclaimer",layout:{zIndex:5}},{name:"ad-choice",layout:{zIndex:5}},{name:"see-more",layout:{marginInlineEnd:"16",zIndex:5}}]}]}},64553:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});const i={name:"default-infopane-template",children:[{name:"product-image",layout:{position:"absolute",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1"},{name:"gradient-mask",height:"176",paddingBottom:"0",paddingTop:"0",layout:{position:"absolute",bottom:"0",width:"100%",zIndex:2},useDynamicStyle:!0},{name:"ad-title",lineHeight:"36",titleFontSize:"28",layout:{position:"absolute",bottom:"53",width:"100%",zIndex:2}},n(18297).l]}},743:function(e,t,n){"use strict";function i(e){for(const[t,n]of e)window[t]=n;const t=new CustomEvent(o,{detail:{adUniqueIds:Array.from(e.keys())}});document.dispatchEvent(t)}function r(e){for(const t of e)delete window[t]}n.d(t,{gL:function(){return o},gy:function(){return i},l$:function(){return r}});const o="nativeAdRendered"},70193:function(e,t,n){"use strict";n.d(t,{hZ:function(){return p},$H:function(){return u},V8:function(){return l},lj:function(){return d}});var i=n(36399);const r=5131;let o;try{o=(()=>{const e=i.Z.getAdbLoggedTime();return r+e%r})()}catch(e){o=r}const a=/(a)(d)/gi,s=e=>String.fromCharCode(e+97),c=(new Map,(e,t)=>{const n=(e=>{let t,n="";for(t=Math.abs(e);t>26;t=t/26|0)n=s(t%26)+n;return(s(t%26)+n).replace(a,"$1-$2")})(((e,t)=>(void 0===t&&(t=o),((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(t,e)))(e,t)>>>0);return n}),d=(e,t)=>`${g(e,t)}`,l=(e,t)=>`algo-${g(e,t)}`,u=(e,t,n)=>e&&(null===i.Z||void 0===i.Z?void 0:i.Z.getAdbStatus())?d(t,n):t,p=(e,t)=>(null===i.Z||void 0===i.Z?void 0:i.Z.getAdbStatus())?l(e,t):e,h=new Map,g=(e,t)=>{const n=((e,t)=>(h.has(e)||h.set(e,c(e,t)),h))(e,t).get(e);return n}},33764:function(e,t,n){"use strict";n.d(t,{_t:function(){return o}});const i={neutralForegroundRestColor:"--neutral-foreground-rest",neutralFillHoverColor:"--neutral-fill-hover",neutralFillActiveColor:"--neutral-fill-active",adBackgroundColor:"--ad-background-color",gradientMidColor:"--gradient-mid-color",gradientEndColor:"--gradient-end-color"},r={"font-weight":"","z-index":"",flex:"","flex-grow":"","flex-shrink":"",order:""};function o(e,t){return null==t||"undefined"===t?"":(e=null!=i[n=e]?i[n]:n.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),isNaN(Number(t))?`${e}:${t}`:`${e}:${t}${(e=>null!=r[e]?r[e]:"px")(e)}`);var n}},92773:function(e,t,n){"use strict";n.d(t,{Et:function(){return d},uj:function(){return l}});var i=n(68364),r=n(65135);function o(e){var t;return!(!/^.*{\s*return __awaiter/.test(String(e))&&!/^\([\w_$,\s]*?\) => __awaiter/.test(String(e)))||"AsyncFunction"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}function a(e,t,n,a,s,c){if(r.M0.sendAppErrorEvent((0,i.Tr)(t,n||"",function(e,t){return`args: ${JSON.stringify(e)||""}\nerror: ${(null==t?void 0:t.stack)||(null==t?void 0:t.message)||""}`}(a,s))),!c)return;const d=c(...a,s);return o(e)?Promise.resolve(d):d}function s(e,t,n,i,r,s){try{return o(e)?e.call(this,...i).catch((o=>a(e,t,n,i,o,r))).finally((()=>{null==s||s(...i)})):e.call(this,...i)}catch(o){return a(e,t,n,i,o,r)}finally{o(e)||null==s||s(...i)}}function c(e,t){const n=Object.getOwnPropertyDescriptor(e.prototype,t);return n||{configurable:!0,enumerable:!0,writable:!0,value:e.prototype[t]}}const d=(e,t,n,i)=>(r,o,a)=>{const c=null==a?void 0:a.value;if("function"==typeof r)return function(...o){return s.call(this,r,e,t,o,n,i)};if("function"!=typeof c)return a;if(!e)throw Error("Parameter baseError is missed");return a&&(a.value=function(...r){return s.call(this,c,e,t,r,n,i)}),a},l=(e,t,n,i)=>r=>{var o;class a extends r{connectedCallback(){super.connectedCallback()}}const d=Object.assign(Object.assign({},Object.getOwnPropertyDescriptors(r.prototype)),Object.getOwnPropertyDescriptors(a.prototype));for(const r in d){if("constructor"===r||!(null===(o=d[r])||void 0===o?void 0:o.value))continue;if(!(a.prototype[r]instanceof Function))continue;const l=c(a,r),u=l.value;l.value=function(...r){return s.call(this,u,e,t,r,n,i)},Object.defineProperty(a.prototype,r,l)}return a}},36159:function(e,t,n){"use strict";n.d(t,{Cw:function(){return a},Km:function(){return s}});var i=n(33940),r=n(92773),o=n(98304);const a={EventType:"uat",Timestamp:"uats",Duration:"uad",Element:"uae",Message:"uam"};class s{fireImpressionLog(e,t,n){(null==e?void 0:e.id)&&!s.impressionNativeAdIdSet.has(null==e?void 0:e.id)&&s.impressionLog&&(s.impressionLog(e,t,n),s.impressionNativeAdIdSet.add(null==e?void 0:e.id))}fireClickLog(e,t,n){s.clickLog&&s.clickLog(e,t,n)}saveUserActionBeacon(e="",t="{}",n="srtb.msn.com"){const i=JSON.parse(t),r=i&&i.trb;if(e&&r)for(let t=0;t<r.length;t++){if(!r[t].includes(n))continue;const i=new URL(r[t]);i.pathname=i.pathname.replace("served","useraction"),s.userActionBeaconsMap.set(e,i),s.startTimestampMap.set(e,(new Date).getTime())}}getUserActionBeacon(e=""){return s.userActionBeaconsMap.get(e)}populateBeaconUrl(e,t,n,i,r,o){var c,d,l,u,p,h,g;const m=this.getUserActionBeacon(e);if(!m)return"";for(const e of Object.values(a))null===(c=m.searchParams)||void 0===c||c.delete(e);if(n){const c=s.startTimestampMap.get(e),f={m:i,f:t};null===(d=m.searchParams)||void 0===d||d.set(a.EventType,n),null===(l=m.searchParams)||void 0===l||l.set(a.Timestamp,String(c?(new Date).getTime()-c:0)),null===(u=m.searchParams)||void 0===u||u.set(a.Duration,r||0),null===(p=m.searchParams)||void 0===p||p.set(a.Message,JSON.stringify(f)),null===(h=m.searchParams)||void 0===h||h.set(a.Element,(null===(g=null==o?void 0:o.tagName)||void 0===g?void 0:g.toLowerCase())||"")}return m}}s.impressionNativeAdIdSet=new Set,s.userActionBeaconsMap=new Map,s.startTimestampMap=new Map,(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.fireImpressionLog")],s.prototype,"fireImpressionLog",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.fireClickLog")],s.prototype,"fireClickLog",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.saveUserActionBeacon")],s.prototype,"saveUserActionBeacon",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.getUserActionBeacon")],s.prototype,"getUserActionBeacon",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.populateBeaconUrl")],s.prototype,"populateBeaconUrl",null)},87:function(e,t,n){"use strict";var i;n.d(t,{v:function(){return i}}),function(e){e.CacheMissing="authCacheMissing",e.CacheExpired="authCacheExpired",e.OtherCacheError="authCacheError"}(i||(i={}))},49982:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var i=n(33940),r=n(87);class o{constructor(){this.AuthDataMap={}}getAuthDataFromCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.id))return{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:r.v.OtherCacheError}};const t=Math.round(performance.now()),n=this.AuthDataMap[e.id],i=Math.round(performance.now());return n?this.isJwtTokenExpired(n.authToken)?{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is expired",status:r.v.CacheExpired},performance:{startTime:t,endTime:i}}:{resource:e,authToken:n.authToken,performance:{startTime:t,endTime:i}}:{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is missing",status:r.v.CacheMissing},performance:{startTime:t,endTime:i}}}))}setAuthDataToCache(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.id))return{resource:e,error:{message:"setAuthDataToCache Resource Id is missing",status:r.v.OtherCacheError}};const{authToken:n}=t,i=Math.round(performance.now());this.AuthDataMap[e.id]={authToken:n};const o=Math.round(performance.now());return{resource:e,performance:{startTime:i,endTime:o}}}))}removeAuthDataFromCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.id))return{resource:e,error:{message:"removeAuthDataFromCache Resource Id is missing",status:r.v.OtherCacheError}};const t=Math.round(performance.now());delete this.AuthDataMap[e.id];const n=Math.round(performance.now());return{resource:e,performance:{startTime:t,endTime:n}}}))}isJwtTokenExpired(e){if(!e)return;let t;try{t=JSON.parse(atob(e.split(".")[1]))}catch(e){return}return(null==t?void 0:t.exp)?1e3*t.exp<Date.now():void 0}}},9332:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var i=n(33940),r=n(87);class o{getAuthDataFromCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){return{resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:r.v.CacheMissing}}}))}setAuthDataToCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){return{resource:e}}))}removeAuthDataFromCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){return{resource:e}}))}}},29803:function(e,t,n){"use strict";var i;n.d(t,{H:function(){return i}}),function(e){e.InteractionRequired="userInteractionRequired",e.AuthProviderNotSupported="authProviderNotSupported",e.MaySucceedOnRetry="fetchRetryableError",e.OtherError="authFetchError"}(i||(i={}))},83490:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(33940),r=n(29803);const o=(e,t=3,n=1e3)=>(t<0&&(t=0),{fetchAuthData:(o,s)=>(0,i.mG)(void 0,void 0,void 0,(function*(){var i;let c={resource:o,error:{status:r.H.OtherError}};s&&(t=0);for(let d=0;d<t+1&&(c=yield e.fetchAuthData(o,s),(null===(i=null==c?void 0:c.error)||void 0===i?void 0:i.status)===r.H.MaySucceedOnRetry);d++)yield a(n);return c}))}),a=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){return new Promise((function(t){setTimeout(t,e)}))}))},25777:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var i,r=n(33940),o=n(29803),a=n(32164);!function(e){e[e.kNoError=0]="kNoError",e[e.kTokenFetchUserInteractionRequired=13]="kTokenFetchUserInteractionRequired",e[e.kTokenFetchProviderError=15]="kTokenFetchProviderError",e[e.kInteractionRequired=24]="kInteractionRequired",e[e.kUnsupportedSovereignty=60]="kUnsupportedSovereignty",e[e.kSovereigntyDetectionFailed=61]="kSovereigntyDetectionFailed"}(i||(i={}));class s{constructor(e){if(this.authCallerValidator=e,!e)throw new Error("Auth Caller Validator is not provided in EdgeChromiumFetchStrategy")}fetchAuthData(e,t=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield this.authCallerValidator.validateAuthCaller(),{account:s,client:c}=n,d=(0,r._T)(n,["account","client"]);if(!s||!c)return Object.assign(Object.assign({},d),{resource:e});if(!(null==e?void 0:e.id))return{resource:e,error:{message:"Resource Id not provided.",status:o.H.OtherError}};const l=t?window.chrome.authPrivate.acquireAccessTokenWithUserInteraction:window.chrome.authPrivate.acquireAccessTokenSilently,u=new a.o,p={account_id:s.account_id,account_type:s.account_type,client_id:c.id,scope_or_resource:e.id},h=Math.round(performance.now());let g=-1;l(p,(e=>{u.set(e),g=Math.round(performance.now())}));const m=yield u.getResultAsync(),{access_token:f,is_success:v,error_info:y,is_token_valid:S}=m||{};if(v&&S)return{authToken:f,resource:e,callerId:d.callerId,performance:{startTime:h,endTime:g}};let C=o.H.OtherError,b=(null==y?void 0:y.error_string)||"Unknown Error";return v&&!S?(C=o.H.MaySucceedOnRetry,b="Invalid Auth Token returned"):(null==y?void 0:y.secondary_error)===i.kTokenFetchUserInteractionRequired||(null==y?void 0:y.secondary_error)===i.kInteractionRequired?(C=o.H.InteractionRequired,b="User interaction Required"):(null==y?void 0:y.secondary_error)===i.kTokenFetchProviderError?(C=o.H.AuthProviderNotSupported,b="Authentication provider not supported"):this.isRetryableError(y)&&(C=o.H.MaySucceedOnRetry,b="Retryable fetch error"),{resource:e,error:{message:b,status:C,internalError:y},callerId:d.callerId,performance:{startTime:h,endTime:g}}}))}isRetryableError(e){if(!(null==e?void 0:e.platform_error_code))return!1;const t=(e.platform_error_code>>>0).toString(16).toUpperCase();return void 0!==["CAA3","CAA7","CAA8","CAAD"].find((e=>t.startsWith(e)))||!!["CAA20005","CAA20008","CAA10001"].includes(t)}}},75270:function(e,t,n){"use strict";n.d(t,{BV:function(){return s},Kf:function(){return c},U:function(){return o}});var i=n(33940),r=n(29803);class o{constructor(e,t,n=(()=>{})){if(this.authDataFetchStrategy=e,this.authDataCacheStrategy=t,this.logAuthEvent=n,!e)throw new Error("Fetch Strategy is not provided in ModularAuthManager");if(!t)throw new Error("Cache Strategy is not provided in ModularAuthManager")}getAuthData(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const n=yield this.authDataCacheStrategy.getAuthDataFromCache(e),r=n||{},{authToken:o}=r,a=(0,i._T)(r,["authToken"]);if(this.logAuthEvent(a,t),null==n?void 0:n.authToken)return n;const s=yield this.authDataFetchStrategy.fetchAuthData(e,t),c=s||{},{authToken:d}=c,l=(0,i._T)(c,["authToken"]);return this.logAuthEvent(l,t),(null==s?void 0:s.error)||this.authDataCacheStrategy.setAuthDataToCache(e,s).then((e=>{this.logAuthEvent(e,t)})),s}))}}let a={getAuthData:e=>(0,i.mG)(void 0,void 0,void 0,(function*(){return{resource:e,error:{message:"Auth manager is not initialized",status:r.H.OtherError}}}))};function s(e){a=e}function c(){return a}},67267:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(33940),r=n(56692),o=n(38601),a=n(33799);class s{constructor(e){if(this.authCallerGetter=e,!e)throw new Error("Auth Caller Getter is not provided in AadEdgeChromiumAuthCallerValidator")}validateAuthCaller(){return(0,i.mG)(this,void 0,void 0,(function*(){const{authCallerGetter:e}=this,{account:t,client:n}=(yield e())||{};return t?t.account_type===a.Qm.UNSUPPORTED_SOVEREIGNTY?{callerId:t.tenant_id,error:{message:"Edge unsupported sovereignty",status:o.$.UnsupportedSovereignty}}:t.account_type!==a.Qm.AAD?{callerId:t.tenant_id,error:{message:"Not valid AAD account.",status:o.$.OtherValidationError}}:(null==n?void 0:n.id)?(0,r.Yq)().IsChinaCompliance?{callerId:t.tenant_id,error:{message:"CN domain unsupported",status:o.$.CnDomain}}:{client:n,account:t,callerId:t.tenant_id}:{callerId:t.tenant_id,error:{message:"Client Id not provided.",status:o.$.OtherValidationError}}:{error:{message:"Account info not available",status:o.$.AccountInfoUnavailable}}}))}}},38601:function(e,t,n){"use strict";var i;n.d(t,{$:function(){return i}}),function(e){e.AccountInfoUnavailable="accountInfoUnavailable",e.UnsupportedSovereignty="unsupportedSovereignty",e.CnDomain="cnDomainUnsupported",e.OtherValidationError="otherValidationError"}(i||(i={}))},90952:function(e,t,n){"use strict";n.d(t,{P:function(){return p}});const i=/(?:Primary Error:\s)(\w+)/,r=/(?:Secondary Error:\s)(\w+)/,o=/(?:hex:)(\w+)/,a=/(?:Error code:\s)(\w+)/,s=/(?:error message:)(AADSTS\w+)/,c=/(?:Trace ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,d=/(?:Correlation ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,l=/(?:Timestamp:\s)([0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}Z)/,u=/([\w.-]+)@([\w-]+)((\.(\w){2,3})+)/g;function p(e,t){var n,p,h,g,m,f,v,y;const S={};try{if(S.requestedResource=null==t?void 0:t.id,e&&e.internalError){const t=e.internalError;if(S.platformCode=t.platform_error_code||void 0,t.error_string){const e=t.error_string.replace(u,"");S.primaryError=(null===(n=e.match(i))||void 0===n?void 0:n[1])||"",S.secondaryError=(null===(p=e.match(r))||void 0===p?void 0:p[1])||"",S.aadErrorCode=(null===(h=e.match(s))||void 0===h?void 0:h[1])||"",S.errorCode=(null===(g=e.match(a))||void 0===g?void 0:g[1])||"",S.hexCode=(null===(m=e.match(o))||void 0===m?void 0:m[1])||"",S.traceId=(null===(f=e.match(c))||void 0===f?void 0:f[1])||"",S.correlationId=(null===(v=e.match(d))||void 0===v?void 0:v[1])||"",S.timestamp=(null===(y=e.match(l))||void 0===y?void 0:y[1])||""}}}catch(e){return S}return S}},21952:function(e,t,n){"use strict";n.d(t,{oc:function(){return d}});var i=n(98304),r=n(22704),o=n(65135),a=n(38601),s=n(29803),c=n(90952);const d=(e,t)=>{((e,t)=>{var n,r;if(!e||!o.M0)return;let d;if(!e.error)return;switch(e.error.status){case s.H.InteractionRequired:case a.$.CnDomain:case a.$.UnsupportedSovereignty:case a.$.AccountInfoUnavailable:d=i.N1G;break;case a.$.OtherValidationError:case s.H.OtherError:d=i.etM;break;default:return}const l=Object.assign(Object.assign({},(0,c.P)(e.error,e.resource)),{authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:null===(n=e.resource)||void 0===n?void 0:n.friendlyName}),u={id:e.callerId||"",status:!1,name:(null===(r=e.resource)||void 0===r?void 0:r.friendlyName)||"",info:Object.assign(Object.assign({},d),{message:e.error.message,pb:Object.assign(Object.assign({},d.pb),{customMessage:JSON.stringify(l)})})};o.M0.sendAuthEvent(u)})(e,t),((e,t)=>{var n;if(!e||!o.M0)return;if(!e.error)return;let r;switch(e.error.status){case s.H.InteractionRequired:case a.$.AccountInfoUnavailable:r=i.N1G;break;case a.$.OtherValidationError:case s.H.OtherError:r=i.etM;break;default:return}const d=Object.assign(Object.assign({},(0,c.P)(e.error,e.resource)),{authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:null===(n=e.resource)||void 0===n?void 0:n.friendlyName});o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r),{message:e.error.message,pb:Object.assign(Object.assign({},r.pb),{customMessage:JSON.stringify(d)})}))})(e,t),(e=>{var t,n;if(!e)return;const i=`Auth.AcquireAccessToken.${e.callerId}`,o=`${i}.Start`,a=`${i}.End`,{startTime:s,endTime:c}=e.performance||{},d=(0,r.Ou)();d&&(d[o]=(null===(t=e.performance)||void 0===t?void 0:t.startTime)||-1,d[a]=(null===(n=e.performance)||void 0===n?void 0:n.endTime)||-1,d[i]=c&&s?c-s:-1)})(e)}},4875:function(e,t,n){"use strict";n.d(t,{AN:function(){return s},VQ:function(){return c},bk:function(){return d},rZ:function(){return a}});var i=n(33940),r=n(247),o=n(56692);const a="stn",s="aad";function c(){return(0,r.m)().useEnterpriseCompliance()}function d(){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,o.Yq)().AccountInfoPromise.then((e=>e&&e.tenant_id?e.oid?`Oid:${e.oid}@${e.tenant_id}`:`TID:${e.tenant_id}`:""))}))}},99347:function(e,t,n){"use strict";n.d(t,{$q:function(){return c},GL:function(){return d},I0:function(){return i},VT:function(){return o},X_:function(){return r},Yc:function(){return s},gQ:function(){return l},m2:function(){return a}});const i="at-bing",r="at-bing-dt",o="sign-in-active",a="initial-page-nav",s="sign-in-pending",c="sign-in-refreshed-page",d="authconstants-peregrine",l="sign-in-refresh-session"},42821:function(e,t,n){"use strict";n.d(t,{Yb:function(){return a},Z6:function(){return o},w0:function(){return s}});var i=n(21050),r=n(89696);const o=(0,n(76323).p)((()=>(0,i.oA)("auth","auth"))),a=e=>(0,r.FF)(`Auth.${e}`,{logStart:!0,logDuration:!0,firstTimeOnly:!0}),s=(e,t)=>(0,r.hf)(`Auth.${e}`,t,!0)},88432:function(e,t,n){"use strict";n.d(t,{ID:function(){return y},Z5:function(){return v}});var i=n(33954),r=n(19388),o=n(68364),a=n(98304),s=n(56692),c=n(27583),d=n(68354),l=n(10877),u=n(33799),p=n(67462),h=n(51671),g=n(31573),m=n(27496),f=n(56548);function v(e){s.jG.AuthCookieName=function(e){let t=s.jG.AuthCookieName;if(e)t=e.isAAD?"al_app_anon":"app_anon";else if((0,c.TJ)()){t=(0,d.XS)().accountType===u.Qm.AAD?"al_app_anon":"app_anon"}else t=(0,c.P8)()&&(0,h.xQ)()===u.Qm.AAD?"al_anon":"anon";return t}(e),(0,g.jW)(s.jG.AuthCookieName),(0,c.TJ)()&&(0,d.XS)().accountType===u.Qm.AAD&&y()}function y(e,t=!0){if(!(0,c._K)())return void i.k.log("Auth: WorkId work flow is not enabled in this environment");let n;(!(0,p.ej)(l.og)||!t)&&Promise.race([(0,r.b1)(),(0,m.Kb)(1e4).then((()=>n=!0))]).then((t=>{n&&(0,o.H)(a.nrW,"Work Id call was made before TTVR marker was set"),(0,f.qs)(e)}))}},98533:function(e,t,n){"use strict";n.d(t,{Gy:function(){return I},aH:function(){return b},cu:function(){return S},ks:function(){return C}});var i=n(33940),r=n(83097),o=n(12108),a=n(98304),s=n(10877),c=n(81428),d=n(56692),l=n(68354),u=n(20424),p=n(987),h=n(67462),g=n(99347),m=n(65135),f=n(77162),v=n(79941);function y(){k(),P(),T(g.gQ)}function S(e=null){const t=decodeURIComponent((0,h.ej)(r.IR.AppAnonCookieExists)),n=(0,h.ej)(s.nM),{child:i}=t&&(0,c.dW)(t)||{};if(("edgeChromium"!=d.jG.AppType||!t||0!=i)&&t&&(1===i||n)){const t=d.jG.CurrentRequestTargetScope;t&&t.audienceMode!==o.F.Kids&&(e&&e(),(0,v.Z)())}}function C(e,t=null,n=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const i=(0,h.ej)(s.m$),r=!!(0,h.ej)(l.g8);if(n){if(i)return w(),void(yield x(t,!1,!0));yield x(t,r,!1)}else if(e){if(r||(0,h.sq)(l.g8,e,1,d.jG.HostPage.topDomain,"/",!0),!i)return void(yield x(t,!0,!1));y()}else{if(w(),i)return void(yield x(t,!1,!0));y()}}))}function b(){if((0,u.G)().getItem(g.Yc))return k(),void A();E()?O(g.$q):A(),O(g.Yc)}function w(){const e=d.jG.HostPage.topDomain;(0,h.sq)(l.g8,"",-1,e,"/",!0),(0,p.$o)().removeItem(g.I0)}function T(e){(0,u.G)().removeItem(e)}function k(){T(g.VT)}function P(){T(g.Yc)}function A(){T(g.$q)}function I(){const e=parseInt((0,u.G)().getItem(g.m2));return T(g.m2),Number.isInteger(e)?e:0}function E(){return!!(0,u.G)().getItem(g.VT)}function x(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){if(t!==n&&(yield(0,f.FI)()),E())return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.amS),{message:`Auth refresh blocked. TokenExists: ${t}, CookieExists: ${n}.`})),void y();(0,u.G)().supported?(P(),M(),function(){const e=Date.now()-Math.round(window.performance.now());O(g.m2,e.toString())}(),m.M0.sendAppErrorEvent(a.XD),m.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.G0e),{message:`Sign In Refresh Required. TokenExists: ${t}, CookieExists: ${n}.`})),e&&e(),O(g.gQ),(0,v.Z)()):y()}))}function M(){O(g.VT)}function O(e,t="1"){(0,u.G)().setItem(e,t)}},51671:function(e,t,n){"use strict";n.d(t,{KW:function(){return y},XJ:function(){return C},YX:function(){return w},hC:function(){return S},rr:function(){return b},xQ:function(){return P}});var i=n(33940),r=n(33799),o=n(247),a=n(27583),s=n(45506),c=n(68354),d=n(34042),l=n(17157),u=n(65019),p=n(42821),h=n(27003),g=n(72447);const m="__SignInStateIsValid__",f="__SignInStatePromiseResolver__",v=()=>{h.Gq.set(m,new Promise((e=>{h.Gq.set(f,e)})))};v();function y(){const e=h.Gq.get(f);e&&e()}function S(){return(0,o.m)().getSignInState()===r.Hy.SignedIn}function C(){return T("getUserSignInState",(0,a.hk)())}function b(){return T("waitForSignInState",!0)}function w(e=!0){return(0,i.mG)(this,void 0,void 0,(function*(){const t={signedInStatus:r.Hy.NotSignedIn,accountType:null};if((0,l.wq)()&&e){yield(0,u.mr)();const e=(0,u._4)();e&&(t.signedInStatus=e.isSignedIn?r.Hy.SignedIn:r.Hy.NotSignedIn,t.accountType=k(e.accountType))}else if((0,d.ID)()){const e=yield(0,d.yb)();t.accountType=k(e.accountType),t.signedInStatus=e.tokenValue?r.Hy.SignedIn:r.Hy.NotSignedIn}else t.signedInStatus=yield b(),t.accountType=P();return t}))}function T(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=(0,s.nP)().UserIsSignedIn;if(null!=n)return n?r.Hy.SignedIn:r.Hy.NotSignedIn;const i=(0,p.Z6)(),a=i&&i.startMeasure(e).endMeasure;let c;t&&(c=(0,p.Yb)("GetSignInStateAsync"),(0,o.m)().initOverrides(),yield h.Gq.get(m));const d=(0,o.m)().getSignInState();return a&&a(),c&&c(),d}))}function k(e=null){return"MSA"===e?r.Qm.MSA:"AAD"===e?r.Qm.AAD:void 0}function P(){if((0,a.TJ)()){const e=(0,c.XS)();return e.isSignedIn===r.Hy.SignedIn&&e.accountType}if((0,a.P8)())return(0,g.bW)()}},11112:function(e,t,n){"use strict";n.d(t,{M:function(){return p}});var i=n(33940),r=n(33799),o=n(27583),a=n(68354),s=n(41651),c=n(61285),d=n(85305),l=n(51671),u=n(34042);function p(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t,n,i;if(e)t=e.isMsa,n=e.isAAD,i=e.isSSO;else if((0,u.ID)()){t=!!(yield(0,u.yb)()).tokenValue}else if((0,o.TJ)()){const e=(0,a.XS)();i=e.isSignedIn===r.Hy.SignedIn,i&&(t=e.accountType===r.Qm.MSA,n=e.accountType===r.Qm.AAD)}else if((0,o.P8)()){const e=(0,l.xQ)();t=e===r.Qm.MSA,n=e===r.Qm.AAD,i=!(0,s.YU)()}else t=(yield(0,l.XJ)())===r.Hy.SignedIn;const p={aadState:n?1:0,isSignedIn:t,isSso:i},h=function(e,t){let n;const i=(0,c.E)()===c.M.Web?"anon":"app_anon";let r=!1;t&&(r=(0,d.u6)(i));n=r?"AAD-AL":t?"AAD":e?"MSA":"NA";return n}(t,n),g=Object.assign(Object.assign({},p),{loginState:h});return Promise.resolve(g)}))}},77162:function(e,t,n){"use strict";n.d(t,{B0:function(){return T},B9:function(){return k},FA:function(){return C},FI:function(){return b}});var i=n(33940),r=n(33799),o=n(83097),a=n(17873),s=n(27583),c=n(56692),d=n(10877),l=n(68354),u=n(247),p=n(83977),h=n(51671),g=n(72447),m=n(65135),f=n(99347),v=n(67462),y=n(13578),S=n(42821);function C(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function*(){const i=(0,S.Z6)(),o=i&&i.startMeasure("updateAuthState").endMeasure;try{if(n||!a.yb&&!a.R0)yield b(r),yield w(t);else if((0,s.P8)())yield(0,g.GQ)(),yield w(t,!1);else{const e=yield(0,a.ot)({id:"appanoncookie"}),n=e&&e.payload&&e.payload.appAnonCookieExists;yield w(t,n)}}catch(t){yield w(),e(t)}o&&o()}))}function b(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){(0,s.P8)()?yield(0,g.GQ)():function(){let e=!1;if(c.jG.UseOneServiceAuthEndpoints)e=!0;else if((0,s.TJ)()){const t=(0,l.XS)(),n=!!(0,v.ej)(o.IR.AppAnonCookieExists);e=t.accountType===r.Qm.MSA&&!n||t.accountType===r.Qm.AAD&&(0,p.vs)()&&!(0,s._K)()}return e}()&&(yield function(e,t){const n=new URL(`https://api.msn.${c.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/appanon`),i={credentials:"include"};return e&&(i.headers=e),n.searchParams.set("apikey",c.jG.OneServiceApiKey),n.searchParams.set("ocid",t||f.GL),n.searchParams.set("activityId",c.jG.ActivityId),n.searchParams.set("scn","app_anon"),fetch(n.href,i)}(e,t))}))}function w(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){let n=!1;const i=(0,S.Z6)(),o=i&&i.startMeasure("handleSignInStateUpdateAsync").endMeasure;if((0,s.P8)()){const{accessToken:e}=((0,s.hk)()?yield(0,g.IY)():(0,s.aS)())||{},t=(0,s.me)(e);(0,y.Z)(t)||(n=!0,(0,a.mS)({id:"AuthHeaders",type:"command",payload:t}))}else if(n=null!=(0,v.ej)(d.m$),(0,s.TJ)()){(0,l.KO)();n=(0,l.XS)().isSignedIn===r.Hy.SignedIn}const c=n?r.Hy.SignedIn:r.Hy.NotSignedIn;!1===t&&c===r.Hy.SignedIn&&((0,a.mS)({id:"updatemyfeed"}),(0,a.mS)({id:"updatepdp"}),(0,a.mS)({id:"UpdateMyBriefing"})),(0,u.m)().setSignInState(c),(0,h.KW)(),void 0!==e&&e!==c&&m.M0.addOrUpdateTmplProperty("signInUpdate","1"),o&&o()}))}function T(){return(0,h.hC)()&&(!(0,s.P8)()||(0,h.xQ)()===r.Qm.MSA)}function k(){return(0,h.xQ)()===r.Qm.AAD}},34042:function(e,t,n){"use strict";n.d(t,{ID:function(){return c},Vo:function(){return l},yb:function(){return d}});var i=n(33940),r=n(33379),o=n(56692),a=n(76323),s=n(27496);function c(){return o.jG.WidgetAttributes&&"shopping"==o.jG.AppType}const d=(0,a.p)((()=>(0,i.mG)(void 0,void 0,void 0,(function*(){let e;const t=(0,r.N)()&&window.__pw_options,n=t&&t.auth&&t.auth.serviceToken;if("object"==typeof n&&n.then){const t=3e3;e=yield Promise.race([n,(0,s.Kb)(t).then((()=>null))])}return e||{tokenValue:void 0,accountType:void 0}}))));function l(){d.cache.clear()}},56548:function(e,t,n){"use strict";n.d(t,{qs:function(){return v}});var i,r=n(33940),o=n(21050),a=n(33954),s=n(68364),c=n(98304),d=n(49972),l=n(27583),u=n(61285),p=n(56692),h=n(10877),g=n(99347),m=n(67462),f=n(42821);function v(e){return(0,o.fW)((()=>y("Acquire",e)),"tryAcquire1SWorkIdCookies",(0,f.Z6)())}function y(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(0,l._K)())return void a.k.log("Auth: WorkId work flow is not enabled in this environment");const n="Reset"===e,i="Acquire"===e||n,r=i?"GET":"DELETE",o=(0,u.E)(),f=`https://api.msn.${p.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/${n?"wid":"AAD"}`;let v,y;try{v=yield fetch(`${f}?apikey=${p.jG.OneServiceApiKey}&ocid=${g.GL}&activityId=${p.jG.ActivityId}&it=${o}${n?"&reset=true":""}`,{method:r,credentials:"include",headers:(0,l.me)(t)||void 0});const a=o===u.M.Web?h.yz:h.og;i!==!!(0,m.ej)(a)&&(y=new Error(`${i?"Expected":"Unexpected"} cookie ${a} is ${i?"missing":"still present"} after ${e} 1S call to ${f}`))}catch(e){y=e}const S=!y&&v&&v.ok?null:`Error in ${e} mode in ${f} call. ${y||""}`;S&&(0,s.H)(c.FTS,S,y&&(y.message||(0,d.n)(y)))}))}!function(e){e.Acquire="Acquire",e.Delete="Delete",e.Reset="Reset"}(i||(i={}))},62264:function(e,t,n){"use strict";n.d(t,{B:function(){return f}});var i=n(33940),r=n(7029),o=n(987),a=n(45506),s=n(68354),c=n(67462),d=n(99347),l=n(98533),u=n(98304),p=n(65135),h=n(33379);const g="f3222e55-ab35-49de-81f3-88a3be08cf77",m="service::www.msn.com::mbi_ssl";function f(e,t,n=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const f=window.chrome,y=f&&f.authPrivate,S=e&&e.accountType===r.l.MSA;if(!y||!S)return yield(0,l.ks)(null,null,n),void(0,o.$o)().removeItem(d.I0);(0,h.N)()&&a.Al.IsPrerender&&"visible"!==document.visibilityState||(0,l.aH)();const C=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=(0,c.ej)(s.g8);return e?(yield(0,l.ks)(e),!0):(p.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.Mef),{message:"MSA user, lt cookie not present.",pb:Object.assign(Object.assign({},u.Mef.pb),{isPrerender:a.Al.IsPrerender,msnCookiePresent:e})})),!1)}))}(),b=function(){var e,t;const n=null===(e=(0,o.$o)())||void 0===e?void 0:e.getItem(d.I0),i=null===(t=(0,o.$o)())||void 0===t?void 0:t.getItem(d.X_);if(n&&i){const e=Number(i);if(e){const t=36e5,n=(new Date).getTime()-new Date(e).getTime();return Math.ceil(n/t)<12}}return p.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.sNU),{message:"MSA user, Bing token not found.",pb:Object.assign(Object.assign({},u.sNU.pb),{isPrerender:a.Al.IsPrerender,bingTokenFound:null!=n})})),!1}();if(!C){const r={account_id:e.accountId,account_type:e.accountType,client_id:t||g,scope_or_resource:m},o=yield v(r);if(o&&!o.is_success&&o.error_info&&0==o.error_info.primary_error&&0==o.error_info.platform_error_code&&""!=o.error_string&&(0,c.ej)(s.g8))return w=o.error_string,void p.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.u8h),{message:"Access token fetch failed. Used LT cookie",pb:Object.assign(Object.assign({},u.u8h.pb),{errorMessage:w,isPrerender:a.Al.IsPrerender})}));yield function(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){yield(0,l.ks)(e&&e.is_success&&e.is_token_valid&&e.access_token,null,t)}))}(o,n)}var w,T;if(!b){const n={account_id:e.accountId,account_type:e.accountType,client_id:t||g,scope_or_resource:"service::bing.com::MBI_SSL"},i=yield v(n);(T=i)&&T.is_success&&T.is_token_valid&&T.access_token&&((0,o.$o)().setItem(d.I0,T.access_token),(0,o.$o)().setItem(d.X_,(new Date).getTime().toString()),(0,c.sq)(d.I0,"",-1,"msn.com","/",!0))}}))}function v(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield function(e){return new Promise((t=>{window.chrome.authPrivate.acquireAccessTokenSilently(e,(e=>{t(e)}))}))}(e);return t&&t.is_success||function(e,t){if(!e||!e.is_success){const n=t.scope_or_resource==m?u.npG:u.PAZ;p.M0.sendAppErrorEvent(Object.assign(Object.assign({},n),{message:"Failed to acquire MSA access token.",pb:Object.assign(Object.assign({},n.pb),{customMessage:e&&e.error_info})}))}}(t,e),t}))}},28803:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var i=n(49972),r=n(76323),o=n(96154),a=n(64084),s=n(65135),c=n(3072),d=n(61091);const l=(0,r.p)((()=>(0,d.vp)((0,o.AE)("MUID"),100)<2));function u(e,t,n=null){s.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:(0,i.n)(n),authRecordTrail:l()&&(0,c.xI)()||void 0,tokenCacheState:(0,a.wX)()})}))}},61091:function(e,t,n){"use strict";n.d(t,{sm:function(){return w},lx:function(){return f},LT:function(){return y},Df:function(){return S},sA:function(){return C},nt:function(){return b},vp:function(){return T},nq:function(){return m},RH:function(){return v}});var i=n(33940),r=n(1329),o=n(56692),a=n(27583),s=n(96154),c=n(81428);var d=n(10877),l=n(79814),u=n(33799),p=n(76668),h=n(62281),g=n(67462);function m(e){const t=encodeURIComponent(JSON.stringify(e||{}));(0,g.sq)(r.sM,t,r.ac,o.jG.HostPage.topDomain,"/",!1,p.f.Strict),(0,a.yd)()}function f(e){if(e)return function(e){return e&&e.tenantId===l.bc}(e)?u.Qm.MSA:u.Qm.AAD}function v(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t;if(e){t=(yield y()).find((t=>t.username===e))}else{const e=C();if(e){t=(yield y()).find((t=>S(t)===e))}}return t}))}function y(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,h.Yu)();return yield e.handleRedirectPromise(),e.getAllAccounts()}))}function S(e){return e&&e.idTokenClaims&&e.idTokenClaims[l.an]}function C(){const e=(0,r.x6)();return e&&e.login_hint}function b(){const e=(()=>{const e=(0,s.AE)("lh",!0),t=e&&(0,c.dW)(e),{login_hint:n}=t||{};return n&&t})();return e&&e.login_hint}function w(){(0,g.sq)(d.cs,null,-1,o.jG.HostPage.topDomain,"/")}function T(e,t=1e3){let n=0;for(let t=0,i=e&&e.length;t<i;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return n<0&&(n+=2147483647),n%t}},3072:function(e,t,n){"use strict";n.d(t,{Ov:function(){return k},pD:function(){return A},xI:function(){return P}});var i=n(33940),r=n(79814),o=n(33799),a=n(987),s=n(76323),c=n(81428),d=n(45506),l=n(1329),u=n(96154),p=n(247),h=n(10877),g=n(41651),m=n(55377),f=n(30323),v=n(16614),y=n(62515),S=n(61091),C=n(62281),b=n(33954);let w;const T=(0,a.$o)();function k(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n={time:(new Date).toISOString(),action:e.toString(),result:t,state:yield E()};b.k.log(`dual-auth: authRecord entry - ${e}: ${t}`),function(e){if(!e)return void b.k.logError("dual-auth: authRecord is null or undefined");w||(w=I());w.push(e),A.cache.clear();const t=w.slice(-r.tk);T.setItem(r.tU,JSON.stringify(t))}(n)}))}function P(){return function(){if(w)return w;return w=I(),w}().slice(-r.tk)}const A=(0,s.p)((()=>(w||(w=I()),function(e){const t=";";let n={};if(!e)return n;return n={a:"",r:"",s:[],t:[]},e.forEach(((i,r)=>{n.a+=i.action+t,n.r+=function(e){if(!e)return null;if(e.match(/\bsuccess\b/i))return"S";if(e.match(/\bfailure\b/i))return"F";{let t=e.match(/tryInitiateEarlyAuth: Finalized sign in state (\w+) from auth-(\w+)/);return t?`EarlyAuth: ${t[1]} from ${t[2]}`:(t=e.match(/initiateSSOCore: (\w+) - SSO data from the (\w+) auth flow[^]*/),t?`SSO: ${t[1]} from ${t[2]}`:e.toString())}}(i.result)+t,n.s.push(function(e,t){if(!e)return{};if(e===t)return e;const n=(0,m.Z)((0,f.Z)(e),(0,f.Z)(t),v.Z);return(0,y.Z)(n)}(i.state,r>0?e[r-1].state:i.state)),n.t.push(function(e,t){if(!e)return;if(e===t)return e;const n=new Date(e),i=n&&n.getTime(),r=t&&new Date(t),o=r&&r.getTime();if(i&&o)return(i-o).toString()}(i.time,r>0?e[r-1].time:i.time))})),n}(w))));function I(){if(!T.supported)return void b.k.log("dual-auth: Local storage access is not supported");const e=T.getItem(r.tU);return(0,c.dW)(e)||[]}function E(){var e;return(0,i.mG)(this,void 0,void 0,(function*(){const t=d.Al.ClientSettings,n=(0,C.dn)(),i=n&&(0,S.lx)(yield(0,S.RH)())||(null===(e=(0,l.x6)())||void 0===e?void 0:e.account_type)||void 0,r=(0,u.AE)(l.sM),{login_hint:a}=r&&(0,c.dW)(r)||{},s=a&&0!==Object.keys(a).length;return{isSignedIn:(0,p.m)().getSignInState()===o.Hy.SignedIn,accountType:i,signedInAccounts:n?yield x():void 0,storage:{aace:(0,u.AE)(h.m$),ace:(0,u.AE)(h.Li),als:(0,u.AE)(h.tX,!0),child:(0,u.AE)(h.nM),currentAccount:s,loginFlowMarker:(0,g.YU)(),logoutFlowMarker:(0,g.SY)(),editFlowMarker:(0,g.hU)(),osate:(0,u.AE)(h.cs)},appType:t&&t.apptype,pageType:t&&t.pagetype}}))}function x(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(yield(0,C.Yu)()))return[-1];return(yield(0,S.LT)()).map((e=>(0,S.vp)(e.username)))}))}},79814:function(e,t,n){"use strict";n.d(t,{BS:function(){return c},Ic:function(){return r},QL:function(){return o},an:function(){return i},bc:function(){return u},g4:function(){return p},kQ:function(){return d},tU:function(){return a},tk:function(){return s},w6:function(){return l}});const i="login_hint",r=300,o=3600,a="authRecordTrail",s=10,c="InteractionRequiredAuthError",d="BrowserAuthError",l="no_tokens_found",u="9188040d-6c67-4c5b-b112-36a304b66dad";var p,h;!function(e){e.tryAcquire1STokenLite="ATL",e.acquireTokenSilent="ATS",e.tryAcquire1STokenProfileSwitch="ATP",e.clearAccountLinkingCookies="CAL",e.jwtSSOService="JWT",e.interactiveLogin="ILO",e.loginRedirect="LRD",e.loginPopup="LPP",e.logout="LGT",e.ssoSilent="SSL",e.singleSignOn="SSO",e.waitFor1SToken="W1S"}(p||(p={})),function(e){e[e.NotAttempted=0]="NotAttempted",e[e.Fail=1]="Fail",e[e.FailTrySSO=2]="FailTrySSO",e[e.Success=3]="Success"}(h||(h={}))},62281:function(e,t,n){"use strict";n.d(t,{Bj:function(){return M},Oo:function(){return L},Yu:function(){return O},dn:function(){return E},qW:function(){return x}});var i=n(33940),r=n(79814),o=n(33954),a=n(22704),s=n(19388),c=n(68364),d=n(98304),l=n(49972),u=n(32164),p=n(27496),h=n(1038),g=n(987),m=n(56692),f=n(45506),v=n(27583),y=n(12884),S=n(33379),C=n(9791),b=n(11935),w=n(42821);const T="2.18.0";let k,P,A,I;function E(){return P}function x(e=!1){const t={scopes:["User.Read"],loginHint:"",redirectUri:D(e)};return e||Object.assign(t,Object.assign(Object.assign({},F()),{extraQueryParameters:{edge_suppress_profile_switch:"1"}})),t}function M(e){return{scopes:e,forceRefresh:!1,redirectUri:D(!0)}}k="localhost.msn.com"===(0,y.Td)(),I=(0,y.zw)().toLowerCase().endsWith(".cn"),A=((0,y.zp)().match(/\bpr=([\d]+)\b/)||{})[1];const O=(0,C.Z)((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(0,S.N)())return;let e;(0,v.lT)()&&(yield Promise.race([R.getResultAsync(),(0,s.b1)(),(0,p.Kb)(1e4).then((()=>e=!0))]),e&&(0,c.H)(d.gZU,"Loading MSAL before TTVR in delay load"));const t=(0,w.Z6)(),n=t&&t.startMeasure("loadMsalScript").endMeasure;let i;const r=new Promise((e=>{i=e})),o=e=>{n&&n({customSuffix:e}),i()},a=_(`auth/msal-browser-${B()}.min.js`),u=(0,y.b0)(a);return u.onload=()=>o(),u.onerror=e=>{(0,c.H)(d.ydI,"Error in loading MSAL script",(0,l.n)(e)),o("error")},document.head.appendChild(u),yield r}))}();const t=window.msal;P=!!t,t&&!N()&&function(e){const t=(0,g.$o)();t.keys().forEach((e=>{const n=e.match(/-[-]+/),i=n&&n[0].length;i>=2&&(2===i&&e.includes("accesstoken")||3===i&&e.includes("idtoken")||4===i&&e.includes("refreshtoken"))&&t.removeItem(e)}))}();const n=$()?{performanceTelemetryConfiguration:{samplingPrecentage:1}}:void 0;if(t&&t.PublicClientApplication){const i=new t.PublicClientApplication(function(e){const{tenantScope:t="Dual",tenantId:n}=e||{};let i;return i=n||("MSA"===t?"consumers":"AAD"===t?"organizations":"common"),{auth:{clientId:h.I4,authority:`https://login.microsoftonline.com/${i}`,redirectUri:D(),navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,n)=>{if(!n)switch(e){case"Error":return void o.k.logError("dual-auth: "+t.toString());case"Info":case"Verbose":case"Warning":return void o.k.log("dual-auth: "+t.toString())}}},tokenRenewalOffsetSeconds:r.Ic}}}(e),n);return function(e){if(!N()||!f.Al.CurrentFlightSet.has("prg-msal224-ts")&&!m.jG.IsDebug)return;let t=1;const n=(0,a.Ou)(),i=(e,i)=>n[`MSAL.${t}.${e}`]=i,r=e=>Math.round(10*e)/10;e.addPerformanceCallback((e=>{e.forEach((e=>{const n=e.name;i(`${n}-start`,r(e.startTimeMs-performance.timeOrigin)),i(n,r(e.durationMs)),i("meta",`c:${e.fromCache?1:0}-v:${e.startPageVisibility}-ok:${e.success?1:0}`),i("cv",e.correlationId);const o="DurationMs";(0,b.Z)(e,((e,t)=>{if(t.endsWith(o)){const n=t.substring(0,t.length-o.length);i(`fn.${n}`,e)}})),t++}))}))}(i),i}}))));function L(){R.set()}function D(e){return _(e?"auth/auth-redirect-blank.html":"0/auth/auth-redirect.html","https://"+(!!(0,y.Td)().match(/\.msn\.(com|cn)$/i)?(0,y.zw)():"www.msn."+(I?"cn":"com")),!1)}const R=new u.o;function F(){const e={appType:m.jG.AppType,authRedirJsVer:"2.16",buildVersion:m.jG.BuildVersion,debug:m.jG.IsDebug?1:void 0,msalJsVer:B(),pr:A,returnUrl:(0,y.l4)()};return{state:encodeURIComponent(JSON.stringify(e))}}function B(){return $()?"1p-2.24.0":U()?"2.24.0":T}function N(){return U()||$()}function U(){return f.Al.CurrentFlightSet.has("prg-msal224-b")}function $(){return f.Al.CurrentFlightSet.has("prg-msal224-1p")}function _(e,t="https://assets.msn."+(I?"cn":"com"),n=!0){let i="/latest",r=t;A&&n?i=`/pr-${A}`:k&&(i="",r=`https://${(0,y.zw)()}`);return`${r}/staticsb/statics${i}/${e}`}},72447:function(e,t,n){"use strict";n.d(t,{tE:function(){return z},bW:function(){return q},x4:function(){return Q},GQ:function(){return _},vW:function(){return W},IY:function(){return V}});var i,r=n(33940),o=n(79814),a=n(21050),s=n(33954),c=n(49972),d=n(98304),l=n(32164),u=n(27496),p=n(76323),h=n(41651),g=n(83977),m=n(1329),f=n(27583),v=n(64084),y=n(61091),S=n(62281),C=n(42821),b=n(56692),w=n(10877),T=n(3072),k=n(99347),P=n(67462),A=n(28803);function I(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=t&&t.accessToken,i="Acquire"===e;if(!n&&i){const e="Invalid access token in jwtSSOCore";return(0,T.Ov)(o.g4.jwtSSOService,e),void(0,A.h)(d.fvr,e)}let r,a;try{r=yield fetch(`https://api.msn.${b.jG.IsChinaCompliance?"cn":"com"}/auth/token/v2/jwtsso?apikey=${b.jG.OneServiceApiKey}&ocid=${k.GL}&activityId=${b.jG.ActivityId}`,{method:i?"POST":"DELETE",credentials:"include",body:JSON.stringify({userAccessToken:n})||void 0,headers:(0,f.me)(n)||void 0});i!==!!(0,P.ej)(w.cs)&&(a=new Error(`${i?"Expected":"Unexpected"} cookie ${w.cs} is ${i?"missing":"still present"} after ${e} JwtSSO call`))}catch(e){a=e}const s=!a&&r&&r.ok?null:`Error in ${e} mode in jwtSSO call. ${a||""}`;s&&(0,A.h)(d.fvr,s),(0,T.Ov)(o.g4.jwtSSOService,`${s||"Success"}`)}))}!function(e){e.Acquire="Acquire",e.Delete="Delete"}(i||(i={}));var E=n(56548),x=n(33799),M=n(33379),O=n(9791),L=n(61285),D=n(85305);const R=`apikey=${b.jG.OneServiceApiKey}&ocid=Peregrine&it=${(0,L.E)()}&activityId=${b.jG.ActivityId}`;function F(){return(0,a.fW)((()=>function(){return(0,r.mG)(this,void 0,void 0,(function*(){let e,t;try{e=yield fetch(`https://api.msn.${b.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/clearALCookies?${R}`,{method:"DELETE",credentials:"include"}),(0,D.EX)();if((0,D.u6)()){const e=decodeURIComponent((0,P.ej)(w.tX));t=new Error(`Account linking cookie ${e} indicates account is still linked after clearALCookies call`)}}catch(e){t=e}const n=!t&&e&&e.ok&&200===e.status?null:`Error in clearALCookies call. ${t||""}`;n&&(0,A.h)(d.L8S,n),(0,T.Ov)(o.g4.clearAccountLinkingCookies,`${n||"Success"}`)}))}()),"tryDelete1SAcctLnkCookies",(0,C.Z6)())}let B=!1;const N={acquireTokenStatus:0,accessTokenResult1S:null,currentAccountInfo:null};let U=new l.o;const $=(0,p.p)((()=>(0,r.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,S.Yu)(),t=yield(0,a.fW)((()=>e.handleRedirectPromise()),"handleRedirect",(0,C.Z6)());if(t)return s.k.log("dual-auth: Signing in through interactive login loginResponse: "+JSON.stringify(t,null,4)),W(t).finally((()=>{(0,h.dy)()})),(0,T.Ov)(o.g4.interactiveLogin,"Success"),t;(0,h.dy)()}))));function _(e){return(0,r.mG)(this,void 0,void 0,(function*(){const{userName:t,enforceTimeLimit:n}=e||{};B=!0;const i=yield $();if(i)return i;let r;return r=t?(0,y.Df)(yield(0,y.RH)(t))||t:(0,y.sA)()||(0,g.E1)()||(0,y.nt)(),!r&&(0,m.mb)()?(W(null,!0),void F()):yield Z((()=>H(r)),"ssoSilent",n?7e3:-1)}))}const H=(0,O.Z)((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){let t;e||s.k.log("dual-auth: login_hint is not available. ssoSilent may not work!");const n=yield(0,S.Yu)(),i=(0,C.Yb)("SSOSilentCoreAndToken"),r=(0,C.Z6)(),a=r&&r.startMeasure("ssoSilentCore").endMeasure,l=Object.assign(Object.assign({},(0,S.qW)(!0)),{loginHint:e}),u=(0,M.N)()&&(null===history||void 0===history?void 0:history.length);try{t=yield n.ssoSilent(l)}catch(t){s.k.log(`dual-auth: ssoSilent failed! : ${t}`),(0,T.Ov)(o.g4.ssoSilent,(0,c.n)(t));const i=(0,m.x6)();if(t.name===o.BS&&i){if((0,h.m5)(),!(0,h.jG)()||!(0,f.P8)())return void(yield j(null,!0));{const t=Object.assign(Object.assign({},(0,S.qW)()),{loginHint:e});n.acquireTokenRedirect(t)}}(i||(0,f.iG)())&&t.name!==o.BS&&t.name!==o.kQ&&(0,A.h)(d.WB4,"Error in ssoSilent call",t)}finally{s.k.log(`dual-auth: getAllAccounts AFTER ${t?"SUCCESSFUL":"UNSUCCESSFUL"} ssoSilent: ${JSON.stringify((0,y.LT)(),null,4)}`),t&&(s.k.log(`dual-auth: loginResponse AFTER SUCCESSFUL ssoSilent: ${JSON.stringify(t,null,4)}`),(0,T.Ov)(o.g4.ssoSilent,"Success. User: "+(0,y.vp)(t.account.username))),W(t).finally((()=>{i(),(0,h.bf)(),(0,h.bq)()})),a&&a({customSuffix:(t?t.fromCache&&"cache":"error")||void 0})}return u&&history.length===u+1&&dispatchEvent(new CustomEvent("ssoSilentHistChanged")),t}))));function W(e,t=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield j(e,t);yield G(n)}))}function j(e,t=!1){return(0,r.mG)(this,void 0,void 0,(function*(){if(e){const t=N.currentAccountInfo=e.account,n=(0,y.Df)(t),i=(0,y.lx)(t);return(0,y.nq)({login_hint:n,account_type:i}),t}t&&((0,y.nq)(),(0,v.tx)(null),(0,h.bf)(),(0,h.bq)(),(0,h.hq)(),yield Promise.all([(0,a.fW)((()=>I("Delete")),"tryDelete1SJwtCookies",(0,C.Z6)()),F()]),(0,y.sm)())}))}function G(e,t=!1,n=!1,i=!1){return(0,r.mG)(this,void 0,void 0,(function*(){let l=N.accessTokenResult1S;const u=new Date(l&&l.expiresOn),p=u&&u.getTime()&&u>new Date;if(l&&3===N.acquireTokenStatus&&p)return void s.k.log(`dual-auth: tryAcquire1STokenSilently: token is still valid - expiry: ${new Date(l&&l.extExpiresOn)}`);const g=(0,y.lx)(e)===x.Qm.AAD,m=g?["https://enterprisenews.microsoft.com/User.Read"]:["https://oneservice.microsoft.com/OneService.Read"];try{if(l=yield function(e,t,n=!1,i=!1){return(0,r.mG)(this,void 0,void 0,(function*(){if(!t)return void s.k.log("dual-auth: tryAcquireTokenSilently received empty account -- API calls may not be authenticated!");const r=yield(0,S.Yu)(),a=Object.assign(Object.assign({},(0,S.Bj)(e)),{forceRefresh:i,account:t});let l;const u=(0,C.Z6)(),p=u&&u.startMeasure("tryAcquireTokenSilently").endMeasure;try{l=yield Z((()=>r.acquireTokenSilent(a)),"acquireTokenSilent",n?7e3:-1)}catch(e){throw s.k.log(`dual-auth: acquireTokenSilent failed! : ${e}`),(0,T.Ov)(o.g4.acquireTokenSilent,(0,c.n)(e)),(0,A.h)(d.Bjk,"acquireTokenSilent call failed",e),e.name===o.BS&&(0,h.jG)()&&r.acquireTokenRedirect(a),l=null,e}finally{p&&p({customSuffix:(l?l.fromCache&&"cache":"error")||void 0}),l&&(0,T.Ov)(o.g4.acquireTokenSilent,"Success"),s.k.log(`dual-auth: acquireTokenSilent for scopes: ${e} was ${l?"SUCCESSFUL":"UNSUCCESSFUL"} accessTokenResult: ${JSON.stringify(l,null,4)}`)}return l}))}(m,e,n,i),l){if(N.acquireTokenStatus=3,N.accessTokenResult1S=l,(0,v.tx)(l),!l.fromCache){const e=+new Date;(0,C.w0)("OSATExpMins",Math.floor((+l.expiresOn-e)/6e4))}f=l,(0,a.fW)((()=>I("Acquire",f)),"tryAcquire1SJwtCookies",(0,C.Z6)()),g&&(0,E.qs)(l.accessToken)}}catch(e){if(l=N.accessTokenResult1S=null,e.name===o.BS&&e.errorCode===o.w6&&t)return void(N.acquireTokenStatus=2);N.acquireTokenStatus=1}var f;U.set(l);const b=function(e){if(!e)return null;const t=e&&e.extExpiresOn,n=t&&new Date(t),i=n&&n.getTime(),r=(new Date).getTime();let a;const s=6e4,c=1e3*(o.QL-o.Ic),d=1e3*o.Ic;i&&i>r?(a=i-r,a<=d&&(a=0)):a=c;return a+s}(l);b&&setTimeout((()=>G(e)),b)}))}function V(){return(0,r.mG)(this,void 0,void 0,(function*(){if(N.accessTokenResult1S)return N.accessTokenResult1S;if(!B){const e="Wait for 1SToken failed because auth flow was not started";return s.k.logError(`dual-auth:  ${e} -- so returning early without the 1S access token`),(0,T.Ov)(o.g4.waitFor1SToken,e),(0,A.h)(d.YHd,e),void U.set(null)}const e=(0,C.Yb)("Wait1SToken"),t=yield(0,a.fW)((()=>U.getResultAsync()),"waitFor1SToken",(0,C.Z6)());return e(),t}))}function q(){const{currentAccountInfo:e}=N;if(e)return(0,y.lx)(e);const t=(0,m.x6)();return t?t.account_type:void 0}function z(){return(0,y.lx)(N.currentAccountInfo)===x.Qm.AAD?N.currentAccountInfo.tenantId:""}function Q(e){return(0,r.mG)(this,void 0,void 0,(function*(){(0,S.Oo)();const{loginHint:t,forceLoginPrompt:n,tenantOptions:i,redirectStartPage:r}=e||{},a=yield(0,S.Yu)(i);if(!a)return;const s=n?"login":"select_account",c=Object.assign(Object.assign({},(0,S.qW)()),{prompt:s}),{tenantScope:d,tenantId:l}=i||{},u=!(!t||!d&&!l);u&&Object.assign(c,{prompt:void 0,loginHint:t,extraQueryParameters:{domain_hint:"MSA"===d||l===o.bc?"consumers":"organizations"}}),r&&(c.redirectStartPage=r),(0,T.Ov)(o.g4.interactiveLogin,"Redirect start"+(u?" with login hint":"")),yield a.loginRedirect(c)}))}function Z(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){let i,r=n,o=!1;return(0,M.N)()&&(location.search.includes(`${t}NoTimeout`)?r=999999999:location.search.includes(`${t}ForceDelay`)?(e=()=>(0,u.Kb)(1e4).then(e),r+=2e4):location.search.includes(`${t}ForceTimeout`)?(r=0,o=!0):n<0&&(r=-1)),r<0?yield e():(yield Promise.race([e().then((e=>i=e)),(0,u.Kb)(r).then((()=>Promise.reject(new Error(`Operation ${t} timed out after ${r}ms`))))]),o?void 0:i)}))}},18333:function(e,t,n){"use strict";var i;n.d(t,{cN:function(){return o},cq:function(){return r},pb:function(){return i}}),function(e){e[e.Immediately=0]="Immediately",e[e.OnPageLoad=1]="OnPageLoad",e[e.OnUserInteraction=2]="OnUserInteraction",e[e.OnBusinessSearchResultsReady=3]="OnBusinessSearchResultsReady"}(i||(i={}));const r="Search-AutoSuggest",o="q"},2348:function(e,t,n){"use strict";n.d(t,{fF:function(){return m}});var i=n(18333),r=n(56692),o=n(26007),a=n(45506),s=n(33379),c=n(12884),d=n(67462),l=n(85663);class u{constructor(e,t,n,i,r){this.autoSuggestProperties=e,this.osMarket=t,this.osLanguage=n,this.requestId=i,this.isDarkMode=r}addAutoSuggest(e){if(!(0,s.N)())return!1;if(r.jG.CurrentRequestTargetScope&&"kids"===r.jG.CurrentRequestTargetScope.audienceMode)return!1;const t=this.isDisabled(),n=window[u.globalObjectName];if(n)return n.enable(!t),this.updateAutoSuggestSessionId(),!0;if(t)return!1;const i=this.getCompleteUrl(),o=(0,c.b0)(i,void 0,!0,"use-credentials");o.onload=e;return document.getElementsByTagName("head")[0].appendChild(o),!0}invokeCookieSharing(){p((0,d.ej)(u.sharedCookieName),5)||(0,d.sq)(u.sharedCookieName,"SID=00",365,u.cookieDomain,"/")}isDisabled(){return new RegExp("\\b"+u.cookieCrumb+"=0\\b","i").test((0,d.ej)(u.cookieName))}updateAutoSuggestSessionId(){const e=/SID=[\da-z]+/i;if(!this.partnerSessionId){const t=(0,d.ej)(u.sharedCookieName);if(p(t,4)){const n=t.match(e);n&&p(n[0],5)&&(this.partnerSessionId=n[0].substr(4))}}const t=window[u.globalObjectName];if(t){const e=t["sid"];"function"==typeof e&&e(this.partnerSessionId)}}getCompleteUrl(){let e="";const t=o.c.getParamsFromUrl(location.search);return t.find((e=>"autosuggest_hook"===e.key))?this.getHookUrl(t):(e=this.autoSuggestProperties.useMarketBasedUrl?this.getMarketBasedUrl():this.getUrl(),this.shouldInitializeAutoSuggestOnPageLoad()&&(e+="&onload=1"),this.isDarkMode&&(e+="&rt=1"),(0,l.isNullOrUndefined)(this.autoSuggestProperties.zeroInputItemCount)||(e+=`&zict=${this.autoSuggestProperties.zeroInputItemCount}`),this.autoSuggestProperties.disableSearchHistory&&(e+="&shdis=1"),(0,l.isNullOrUndefined)(this.autoSuggestProperties.maxItemCount)||(e+=`&itemCount=${this.autoSuggestProperties.maxItemCount}`),e)}shouldInitializeAutoSuggestOnPageLoad(){return this.autoSuggestProperties.delayBind===i.pb.Immediately||this.autoSuggestProperties.delayBind===i.pb.OnPageLoad||this.autoSuggestProperties.delayBind===i.pb.OnBusinessSearchResultsReady&&this.autoSuggestProperties.businessSearchResultsEnabled}getMarketBasedUrl(){const e=this.osMarket||"US",t=this.osLanguage||"en-US",n=this.autoSuggestProperties.partnerEndpoint||"msnedgentp",i=(0,a.nP)().Locale;let r=["https","://www.bing.com/as/init?","pt="+n,this.osLanguage?"&setlang="+t:"",this.osMarket?"&cc="+e:"","&refig="+this.requestId].join("");return"en-us"!==t.toLowerCase()&&(r+="&endpt=1"),r+=this.getFeatures(),r+=this.autoSuggestProperties.businessSearchResultsEnabled?"&msbqf=true":"&msbqf=false",this.autoSuggestProperties.disableSuggestionFetchOnEmpty&&i&&"en-us"!==i.toLowerCase()&&(r+="&dfoe=1"),r+=this.getAutosuggestWCMobile(),r}getHookUrl(e){const t="muidflt9-ismsft",n=(0,a.nP)().CurrentFlights,i=e.find((e=>"fdhead"===e.key)),r=i?i.value:"",o=e.find((e=>"asinturl"===e.key)),s=o&&o.value;if((n.indexOf(t)>-1||r.indexOf(t)>-1)&&s){return decodeURIComponent(s)}return this.getUrl()}getUrl(){const e=(0,a.nP)().Locale||"en-us";let t=["https","://www.bing.com/as/init?mkt=",e,"&pt=",this.autoSuggestProperties.partnerEndpoint,"&refig=",this.requestId].join("");return this.autoSuggestProperties.enableNewSnrUrl||"en-us"===e.toLowerCase()||(t+="&endpt=1"),t+=this.getAutosuggestWCMobile(),t}getFeatures(){return this.autoSuggestProperties.enableFeatures&&(this.autoSuggestProperties.features||""===this.autoSuggestProperties.features)?"&features="+this.autoSuggestProperties.features:""}getAutosuggestWCMobile(){return this.autoSuggestProperties.enableAutoSuggestforWCMobile?"&asrt=1":""}}function p(e,t){return"string"==typeof e&&(!t||e.length>=t)}u.cookieCrumb="AS",u.globalObjectName="sa_inst",u.cookieName="SRCHHPGUSR",u.sharedCookieName="_SS",u.cookieDomain="msn.com";var h=n(18536),g=n(38156);function m(e){if(!e||e.disableAutoSuggest)return;const{autoSuggestProperties:t,requestId:n,isDarkMode:r,searchBoxContext:o,startPerfMarkerHandler:a}=e,{osMarket:s,osLanguage:c,useMarketBasedUrl:d,delayBind:l,businessSearchResultsEnabled:p,cookieSharingDelayInSeconds:h}=t,g=new u(t,d&&s,d&&c,n,r);if(l===i.pb.OnUserInteraction||l===i.pb.OnBusinessSearchResultsReady&&!p){o.autoSuggestEventHandler=f.bind(o,g),o.registerAutoSuggestOnSearchEventHandler=v.bind(o,e);const t=S(o.inputRef);null==t||t.addEventListener("keyup",o.autoSuggestEventHandler),null==t||t.addEventListener("click",o.autoSuggestEventHandler)}else l!==i.pb.Immediately&&l!==i.pb.OnPageLoad&&l!==i.pb.OnBusinessSearchResultsReady||(a&&a(i.cq),o.registerAutoSuggestOnSearchEventHandler=v.bind(o,e),g.addAutoSuggest(o.registerAutoSuggestOnSearchEventHandler));1===h&&g.invokeCookieSharing()}function f(e,t){if("keyup"===t.type){const e=t.key;if("Tab"===e||"Escape"===e)return}if(e.addAutoSuggest(this.registerAutoSuggestOnSearchEventHandler)){const e=S(this.inputRef);e.removeEventListener("click",this.autoSuggestEventHandler),e.removeEventListener("keyup",this.autoSuggestEventHandler)}}function v(e){const{autoSuggestProperties:t,endPerfMarkerHandler:n,searchBoxContext:r,searchOpenInNewWindow:o,action:a,telemetryCallback:s}=e,{delayBind:c}=t;if(c!==i.pb.OnUserInteraction&&c!==i.pb.OnPageLoad&&c!==i.pb.OnBusinessSearchResultsReady||n&&n(i.cq),o)return;const d=window.sj_evt,l=d&&d.fire;l&&(d.fire=function(...e){const[t,n]=e||[];if("AS.Navigate"===t){if(!n)return;const e=S(r.formRef);if(e&&e.attributes&&e.attributes["data-t"]){const t=h.u.get(e);t.contract.content.type=function(e){if(!e)return g.uH.Undefined;const t=e.toLowerCase();if("hs"===t)return g.uH.SearchHistory;if("pn"===t)return g.uH.TrendingSearch;return g.uH.AutoSuggestSearch}(n.stype),h.u.setAttribute(e,t.contract)}}"onSearch"===t&&(r.onAutoSuggestSuggestionClickHandler=y.bind(r,a,s),r.onAutoSuggestSuggestionClickHandler()),l.apply(r,e)})}function y(e,t){let n=e;const i=S(this.formRef);if(n){const e=(-1!==n.indexOf("?")?"&":"?")+"msnst=AS";if(n+=e,i.attributes&&i.attributes["data-t"]){const e=h.u.get(i);e.contract.overrideDestinationUrl=n,h.u.setAttribute(i,e.contract)}}t(i,g.Aw.Submit,g.wu.TextSearch)}function S(e){return e&&e.current?e.current:e}},25964:function(e,t,n){"use strict";n.d(t,{AZ:function(){return a},Gb:function(){return d},Od:function(){return o},hv:function(){return u},qR:function(){return r},rM:function(){return l},vM:function(){return s},wI:function(){return c}});var i=n(53899);const r="https://img-s-msn-com.akamaized.net/tenant/amp/entityid/",o="https://prod-streaming-video-msn-com.akamaized.net/",a="background_setting_preferences",s="ntp.background_image";var c;!function(e){e.changeBackgroundDaily="changeBackgroundDaily",e.includeVideoBackgroundsInRotation="includeVideoBackgroundsInRotation",e.showImageSpotlightText="showImageSpotlightText",e.selectedVideoSetting="selectedVideoSetting",e.imageLikes="imageLikes",e.imageDislikes="imageDislikes",e.videoLikes="videoLikes",e.videoDislikes="videoDislikes",e.backgroundSelectionMetadata="backgroundSelectionMetadata"}(c||(c={}));const d=850,l=new Map([["BrowserLocal",i.HX.custom],["Iris",i.HX.bing],["Theme",i.HX.theme],["Video",i.HX.imageAndVideo],["CMSImage",i.HX.imageAndVideo]]),u=new Map([[i.HX.imageAndVideo,["Video","CMSImage","Iris"]],[i.HX.bing,["Iris"]],[i.HX.custom,["BrowserLocal"]],[i.HX.theme,["Theme"]]])},3931:function(e,t,n){"use strict";n.d(t,{D:function(){return o},f:function(){return r}});var i=n(55067);class r{}function o(){r.backgroundDataStateLoaded.unregisterObservers(),r.backgroundDispositionUpdated.unregisterObservers(),r.hotSpotsDisplayStatusUpdated.unregisterObservers(),r.irisImageUpdated.unregisterObservers(),r.refreshBackgroundMetadata.unregisterObservers(),r.updateBackgroundGalleryDisplayed.unregisterObservers(),r.updateGallerySelectedBackground.unregisterObservers(),r.videoSettingsUpdated.unregisterObservers(),r.updateMarqueeAdDisplayStatus.unregisterObservers()}r.backgroundDataStateLoaded=new i.C("backgroundDataStateLoaded"),r.backgroundDispositionUpdated=new i.C("backgroundDispositionUpdated"),r.hotSpotsDisplayStatusUpdated=new i.C("hotSpotsDisplayStatusUpdated"),r.irisImageUpdated=new i.C("irisImageUpdated"),r.refreshBackgroundMetadata=new i.C("refreshBackgroundMetadata"),r.updateBackgroundGalleryDisplayed=new i.C("updateBackgroundGalleryDisplayed"),r.updateGallerySelectedBackground=new i.C("updateGallerySelectedBackground"),r.updateSelectionInGallery=new i.C("updateSelectionInGallery"),r.videoSettingsUpdated=new i.C("videoSettingsUpdated"),r.updateMarqueeAdDisplayStatus=new i.C("updateMarqueeAdDisplayStatus")},26068:function(e,t,n){"use strict";n.d(t,{z:function(){return h}});var i,r=n(33940),o=n(25964);!function(e){e.backgroundImageType="backgroundImageType",e.backgroundSettingPreferences="backgroundSettingPreferences",e.irisPreferences="irisPreferences"}(i||(i={}));const a=new Set(["Video","CMSImage"]);var s=n(17440),c=n(3931),d=n(63439),l=n(7781),u=n(33379),p=n(16614);class h extends d.e{constructor(e,t,n,i,r,a,s){super(e,t,n,i,r,a,s),this._backgroundSettingPreferencesState=null,this.config&&!this.config.disableBackgroundGallery&&(this.settingsAPI=(0,u.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate,this.initializePreferences(o.AZ,"backgroundSettingPreferencesState"),this.initializeIrisSurfaceInfoPreferences(),this.registerOnPrefsChangeCallback())}get backgroundSettingPreferencesState(){return this._backgroundSettingPreferencesState?JSON.parse(this._backgroundSettingPreferencesState):null}set backgroundSettingPreferencesState(e){this._backgroundSettingPreferencesState=e?JSON.stringify(e):null}backgroundDispositionUpdated(e){var t,n;null===(n=null===(t=null===c.f||void 0===c.f?void 0:c.f.backgroundDispositionUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}hotSpotsDisplayStatusUpdated(e){var t,n;null===(n=null===(t=null===c.f||void 0===c.f?void 0:c.f.hotSpotsDisplayStatusUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}updateBackgroundGalleryDisplayed(e){var t,n;null===(n=null===(t=null===c.f||void 0===c.f?void 0:c.f.updateBackgroundGalleryDisplayed)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}updateGallerySelectedBackground(e){var t,n;null===(n=null===(t=null===c.f||void 0===c.f?void 0:c.f.updateGallerySelectedBackground)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}videoSettingsUpdated(e){var t,n;null===(n=null===(t=null===c.f||void 0===c.f?void 0:c.f.videoSettingsUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}marqueAdDisplayStatusUpdated(e){var t,n;null===(n=null===(t=null===c.f||void 0===c.f?void 0:c.f.updateMarqueeAdDisplayStatus)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}initializePreferences(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(yield this.isNurturingApiAvailable()))return;const n=yield s.U.getPreferenceSetting(e,!0);this[t]=n&&n.value}))}initializeIrisSurfaceInfoPreferences(){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(yield this.isNurturingApiAvailable()))return;const e=yield s.U.getPreferenceSetting("campaigns");if(!e||!e.value||e.value.length<=0)return;const t=e.value;this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(t)}))}registerOnPrefsChangeCallback(){return(0,r.mG)(this,void 0,void 0,(function*(){this.settingsAPI&&this.settingsAPI.onPrefsChanged.addListener((e=>(0,r.mG)(this,void 0,void 0,(function*(){var t,n,r,o,s,d,u;const h=e[0],g=this.getModifiedPreference(h);if(g)if(g===i.backgroundSettingPreferences){const e=h.value,i=this.getPreferenceKeyIndex(e,"background_setting_preferences");if(i<0)return;const u=this.backgroundSettingPreferencesState;if(this.backgroundSettingPreferencesState=e[i].value,l.p.setBackgroundSettingsPreferencesCache(this.backgroundSettingPreferencesState),!u||!this.backgroundSettingPreferencesState)return;const g=u.backgroundSelectionMetadata,m=this.backgroundSettingPreferencesState.backgroundSelectionMetadata;if(!l.p.getShouldRerender())return void l.p.setShouldRerender(!0);u.selectedVideoSetting!==this.backgroundSettingPreferencesState.selectedVideoSetting?(null===(t=c.f.videoSettingsUpdated.getActionSender(this))||void 0===t||t.send(this.backgroundSettingPreferencesState.selectedVideoSetting),null===(n=c.f.refreshBackgroundMetadata.getActionSender(this))||void 0===n||n.send()):!g&&m?null===(r=c.f.updateGallerySelectedBackground.getActionSender(this))||void 0===r||r.send(m):g&&!m?(null===(o=c.f.refreshBackgroundMetadata.getActionSender(this))||void 0===o||o.send(),null===(s=c.f.updateSelectionInGallery.getActionSender(this))||void 0===s||s.send()):g&&m&&!(0,p.Z)(g,m)&&(g.provider===m.provider||a.has(g.provider)&&a.has(m.provider))&&(null===(d=c.f.updateGallerySelectedBackground.getActionSender(this))||void 0===d||d.send(m))}else if(g===i.irisPreferences){const e=h.value,t=this.getPreferenceKeyIndex(e,"campaigns");if(t<0)return;const n=this.irisBackgroundSurfaceInfo,i=e[t].value;if(this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(i),!n||!this.irisBackgroundSurfaceInfo)return;n.currentCreativeId!==this.irisBackgroundSurfaceInfo.currentCreativeId&&(null===(u=c.f.refreshBackgroundMetadata.getActionSender(this))||void 0===u||u.send())}}))))}))}getIrisBackgroundSurfaceInfo(e){if(e&&!(e.length<=0))return e.find((e=>"88000244"===e.placement))||void 0}getModifiedPreference(e){if("ntp.background_image_type"===e.key)return i.backgroundImageType;if("ntp.user_nurturing"===e.key){const t=e.value,n=this.getPreferenceByKey(t,o.AZ);if(!(0,p.Z)(this.backgroundSettingPreferencesState,n))return i.backgroundSettingPreferences}}getPreferenceByKey(e,t){const n=this.getPreferenceKeyIndex(e,t);return n>-1?e[n].value:{}}getPreferenceKeyIndex(e,t){return e.findIndex((e=>e.key===t))}isNurturingApiAvailable(){return(0,r.mG)(this,void 0,void 0,(function*(){return s.U.isApiAvailableToUse()}))}}},24528:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(30856),r=n(3931);class o{reduce(e,t){if(!e)return{backgroundGalleryDisplayed:!1};if(!t)return e;let n;return i.G.handleAction(t,r.f.backgroundDataStateLoaded,(t=>{n=Object.assign(Object.assign({},e),t)})),i.G.handleAction(t,r.f.updateBackgroundGalleryDisplayed,(t=>{n=Object.assign(Object.assign({},e),{backgroundGalleryDisplayed:t})})),i.G.handleAction(t,r.f.updateGallerySelectedBackground,(t=>{n=Object.assign(Object.assign({},e),{backgroundSelectionMetadata:t})})),i.G.handleAction(t,r.f.backgroundDispositionUpdated,(t=>{n=Object.assign(Object.assign({},e),{backgroundDispositionMetadata:t})})),i.G.handleAction(t,r.f.hotSpotsDisplayStatusUpdated,(t=>{n=Object.assign(Object.assign({},e),{shouldRenderHotSpots:t})})),i.G.handleAction(t,r.f.videoSettingsUpdated,(t=>{n=Object.assign(Object.assign({},e),{selectedVideoSetting:t})})),i.G.handleAction(t,r.f.updateMarqueeAdDisplayStatus,(t=>{n=Object.assign(Object.assign({},e),{displayMarqueeAd:t})})),n||e}}},66243:function(e,t,n){"use strict";n.r(t),n.d(t,{BackgroundDataActions:function(){return i.f},BackgroundDataConnector:function(){return r.z},BackgroundDataReducer:function(){return o.L},ToolingInfo:function(){return a},resetBackgroundDataActions:function(){return i.D}});var i=n(3931),r=n(26068),o=n(24528);const a={experienceConfigSchema:{}}},23586:function(e,t,n){"use strict";n.d(t,{$u:function(){return l},IG:function(){return a},Nf:function(){return h},Th:function(){return c},fZ:function(){return o},gf:function(){return s},rO:function(){return d},x$:function(){return p}});var i=n(25964),r=n(53899);const o="background_gallery_open_event",a="galleryToastCooldowns",s="irisBackgroundLiked",c=new Set(["overlay","positioning-region"]),d="https://assets.msn.com/staticsb/statics/latest/edgenext/bkgd/images/cms_images_20230301.json",l="https://assets.msn.com/staticsb/statics/latest/edgenext/bkgd/videos/cms_videos_20230301.json";var u;!function(e){e.reducedMotion="reducedMotion"}(u||(u={}));const p=[i.wI.imageLikes,i.wI.imageDislikes,i.wI.videoLikes,i.wI.videoDislikes],h=new Map([[i.wI.imageLikes,i.wI.imageDislikes],[i.wI.imageDislikes,i.wI.imageLikes],[i.wI.videoLikes,i.wI.videoDislikes],[i.wI.videoDislikes,i.wI.videoLikes]]);new Map([[r.HX.imageAndVideo,["Video","CMSImage","Iris"]],[r.HX.bing,["Iris"]],[r.HX.custom,["BrowserLocal"]],[r.HX.theme,["Theme"]]])},8783:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var i=n(68364),r=n(98304),o=n(43980),a=n(53899),s=n(4814),c=n(75192),d=n(53076),l=n(82423);const u=new class{get chromiumPageSettingsConnector(){return this._chromiumPageSettingsConnector||(this._chromiumPageSettingsConnector=(0,l.K0)(d.z.ChromiumPageSettings)),this._chromiumPageSettingsConnector}setLayoutFromPreset(e){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the setLayoutFromPreset method");const t=this.chromiumPageSettingsConnector.getCurrentState(),n=(0,o.j)(t.selectedFeedDisplaySetting,e,t.greetingEnabled,t.hideDefaultTopSites);if(t.currentLayout!==n){let e;if(n!==a.nP.custom){const i=a.Wi[n];e={currentBackgroundImageType:i.current_background_image_type,originalLayout:t.currentLayout,currentLayout:n,greetingEnabled:i.greeting,imageOfTheDayEnabled:i.current_background_image_type!==a.HX.off,quickLinksEnabled:i.quick_links,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:i.feeds_position}}else{const t=this.chromiumPageSettingsConnector.getCurrentState();e=Object.assign(Object.assign({},t),{originalLayout:t.currentLayout,currentLayout:n})}this.chromiumPageSettingsConnector.updateLayout(e),(0,s.qi)(c.nc.layout_mode,a.Uq[e.currentLayout])}}updateLayoutAndBackgroundImageType(e,t){this.chromiumPageSettingsConnector?(t?this.updateToCustomLayoutMode():this.setLayoutFromPreset(e),this.chromiumPageSettingsConnector.updateBackgroundImageType(e)):(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateLayoutAndBackgroundImageType method")}updateToCustomLayoutMode(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateToCustomLayoutMode method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=Object.assign(Object.assign({},e),{originalLayout:e.currentLayout,currentLayout:a.nP.custom});this.chromiumPageSettingsConnector.updateLayout(t),(0,s.qi)(c.nc.layout_mode,a.Uq[t.currentLayout])}isImageOfTheDayDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isImageOfTheDayDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(e.backgroundImageTypePolicy===a.gZ.disableAll||e.backgroundImageTypePolicy===a.gZ.disableImageOfTheDay);return void 0!==t&&0!==t&&t}isCustomImageDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isCustomImageDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(e.backgroundImageTypePolicy===a.gZ.disableAll||e.backgroundImageTypePolicy===a.gZ.disableCustomImage);return void 0!==t&&0!==t&&t}}},7781:function(e,t,n){"use strict";n.d(t,{p:function(){return k}});var i=n(33940),r=n(25964),o=n(33954),a=n(98304),s=n(53899),c=n(23586),d=n(4814),l=n(27003),u=n(33379),p=n(12884),h=n(99590),g=n(26007),m=n(987),f=n(75192),v=n(17440),y=n(24676),S=n(53076),C=n(65135),b=n(8783),w=n(82423);class T{constructor(){this.imageDislikes=new Set,this.imageLikes=new Set,this.hasSimpleImages=!1,this.dailyRotationIncludesImages=!1,this.shouldRerender=!0,this.videoLikes=new Set,this.videoDislikes=new Set,this.stateInited=!1}static getInstance(){return l.Gq.get("__BackgroundStorageHelper__",(()=>new T))}getCMSImageData(){return this.cmsImageData||this.loadCMSImageData(),this.cmsImageData}loadCMSImageData(){return(0,i.mG)(this,void 0,void 0,(function*(){this.cmsImageData||(yield fetch(c.rO).then((e=>e.json())).then((e=>this.cmsImageData=null==e?void 0:e.cmsImage)))}))}getCMSVideoData(){return this.cmsVideoData||this.loadCMSVideoData(),this.cmsVideoData}loadCMSVideoData(){return(0,i.mG)(this,void 0,void 0,(function*(){this.cmsVideoData||(yield fetch(c.$u).then((e=>e.json())).then((e=>this.cmsVideoData=null==e?void 0:e.cmsVideo)))}))}initState(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.stateInited)return;this.stateInited=!0,this.sponsoredBackground=yield(0,d.WH)(void 0,f.nc.enable_sponsored_content,!0);if(yield this.getBackgroundGalleryEligibilityAsync()){const t=(0,w.K0)(S.z.ChromiumPageSettings);if(!t)return;const n=yield t.getPageSettingsStateAsync();yield this.initialBackgroundPSLSetup(n);const i=yield this.checkAndRemoveApplicableBackgrounds(!1,n),r=yield this.getBackgroundPreferences();if(r){const t={backgroundGalleryDisplayed:!1,shouldRenderHotSpots:r.showImageSpotlightText,selectedVideoSetting:r.selectedVideoSetting,backgroundSelectionMetadata:r.backgroundSelectionMetadata};null==e||e.send(t),this.populateLikeAndDislikeCaches();const o=b.k.isImageOfTheDayDisabled(),a=b.k.isCustomImageDisabled();if(yield this.resetGalleryStorageForPolicyCompliance(r,o,a),o||a)return;i&&n.currentBackgroundImageType!==s.HX.off&&this.updateLayoutBasedOnBackgroundType(r)}}}))}getBackgroundGalleryEligibilityAsync(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=this.shouldDisableGalleryFeature(),t=yield v.U.isApiAvailableToUse(),n=(0,y.I9)();return this.isEligibleForTreatment=t&&!n&&!e,this.isEligibleForTreatment}))}getBackgroundGalleryEligibility(){return this.isEligibleForTreatment}setBackgroundSettingsPreferencesCache(e){this.backgroundSettingsPreferences=e}getBackgroundSettingsPreferencesCache(){return this.backgroundSettingsPreferences}getPreferenceByKeyFromFromPreferencesCache(e){const t=this.backgroundSettingsPreferences;return t?t[e]:void 0}setCurrentBackgroundPreferenceCache(e){this.currentBackgroundMetadata=e}getCurrentBackgroundPreferenceCache(){return this.currentBackgroundMetadata}populateLikeAndDislikeCaches(){for(const e of c.x$){const t=this.backgroundSettingsPreferences[e]||[],n=this.getLikeAndDislikeCacheByType(e);for(const e of t)n.add(e)}}getComplimetaryCacheName(e){return c.Nf.get(e)}getLikeAndDislikeCacheByType(e){switch(e){case r.wI.imageLikes:return this.imageLikes;case r.wI.imageDislikes:return this.imageDislikes;case r.wI.videoLikes:return this.videoLikes;case r.wI.videoDislikes:return this.videoDislikes}}setLikesAndDislikesCache(e,t){const n=this.getLikeAndDislikeCacheByType(e);this.getLikeAndDislikeCacheByType(this.getComplimetaryCacheName(e)).delete(t),n.add(t)}getShouldRerender(){return this.shouldRerender}setShouldRerender(e){this.shouldRerender=e}setSimpleImagesandCMSSize(e,t){this.hasSimpleImages=e,this.cmsImageSize=t}setDailyRotationIncludesImages(e){this.dailyRotationIncludesImages=e}getCMSImageSize(){return this.cmsImageSize}getBackgroundPreferences(){return(0,i.mG)(this,void 0,void 0,(function*(){return v.U.getPreferenceSetting(r.AZ,!0).then((e=>{const t=e&&e.value;if(t)return this.setBackgroundSettingsPreferencesCache(t),t;o.k.logError(`PSL: Preferences API does not have ${r.AZ}.`)})).catch((e=>{o.k.logError(`Exception ${e} occurred storing background setting preferences in persistent storage layer`)}))}))}getBackgroundPreferenceByKey(e){return(0,i.mG)(this,void 0,void 0,(function*(){return v.U.getPreferenceSetting(r.AZ,!0).then((t=>{const n=t&&t.value;if(n)return n[e];o.k.logError(`PSL: Preferences API does not have ${r.AZ}.`)})).catch((e=>{o.k.logError(`Exception ${e} occurred getting background setting preference by key in persistent storage layer`)}))}))}setBackgroundPreferences(e){return(0,i.mG)(this,void 0,void 0,(function*(){return v.U.savePreferenceSetting(r.AZ,e).then((t=>(t&&this.setBackgroundSettingsPreferencesCache(e),t))).catch((t=>(o.k.logError(`Exception ${t} occurred storing background settings preferences: ${e} in persistent storage layer`),!1)))}))}setBackgroundPreferenceByKey(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=yield v.U.getPreferenceSetting(r.AZ,!0).catch((e=>(o.k.logError(`Exception ${e} occurred getting background settings preferences in persistent storage layer`),this.getNurturingErrorObject())));let i=n&&n.value;return i!==this.getNurturingErrorObject()&&(i||(i={key:r.AZ,value:{}}),e==r.wI.backgroundSelectionMetadata&&(i[r.wI.changeBackgroundDaily]=!1),i[e]=t,v.U.savePreferenceSetting(r.AZ,i).then((e=>(e&&this.setBackgroundSettingsPreferencesCache(i),e))).catch((n=>(o.k.logError(`Exception ${n} occurred storing background preference ${e} and value ${t} in persistent storage layer`),!1))))}))}getCurrentBackgroundMetadata(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(e&&e.getPref)return new Promise((t=>{e.getPref(r.vM,(function(e){t(null==e?void 0:e.value)}))}))}))}setCurrentBackgroundMetadata(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;return!(!t||!t.getPref)&&(void 0===e.sponsoredBkgd&&(e.sponsoredBkgd=this.sponsoredBackground),t.setPref(r.vM,e),this.setCurrentBackgroundPreferenceCache(e),!0)}updateSponsoredBackgroundToggle(e){this.sponsoredBackground=e,this.currentBackgroundMetadata&&(this.currentBackgroundMetadata.sponsoredBkgd=e,this.setCurrentBackgroundMetadata(this.currentBackgroundMetadata),this.getCurrentBackgroundMetadata())}setSSRBackgroundMetadata(e){this.ssrBackgroundMetadata=e}checkAndRemoveApplicableBackgrounds(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.getBackgroundPreferences();if(!t)return!1;const i=this.overrideCacheAging(),r=t.changeBackgroundDaily||i||e,o=t.backgroundSelectionMetadata;if(!o)return!1;let a=-1;return i||n||(a=o.appliedTimestamp?o.appliedTimestamp+864e5:-1),!!(r&&a<Date.now())&&this.clearCachedBackground(t)}))}getBackgroundImageTypeFromSettings(e,t){return this.backgroundSettingsPreferences&&this.backgroundSettingsPreferences.backgroundSelectionMetadata?this.getProviderBackgroundType(this.backgroundSettingsPreferences.backgroundSelectionMetadata.provider):t?s.HX.off:e?s.HX.imageAndVideo:s.HX.bing}initialBackgroundPSLSetup(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(yield this.getBackgroundPreferences())return;if(!e)return;const t=this.createInitialStateFromChromiumPageSettings(e);if(!t)return void C.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.tvG),{message:"Initial state for background gallery is undefined",pb:Object.assign(Object.assign({},a.tvG.pb),{customMessage:`Initial state for background gallery is undefined. Current BackgroundImageType: ${e.currentBackgroundImageType}`})}));(yield this.setBackgroundPreferences(t))&&this.setBackgroundSettingsPreferencesCache(t)}))}createInitialStateFromChromiumPageSettings(e){switch(e.currentBackgroundImageType){case s.HX.off:case s.HX.custom:case s.HX.theme:return this.createInitialState(!1,!1,!1);case s.HX.bing:return this.createInitialState(!0,!1,!0);case s.HX.imageAndVideo:return this.createInitialState(!0,!0,!0);default:return}}isLowEndDevice(){if(!(0,u.N)())return!1;const e=window&&window.navigator,t=e?e.hardwareConcurrency:-1,n=e?e.deviceMemory:-1,i=e&&e.connection?e.connection.effectiveType:"4g";return t<=2||n<4||"4g"!==i}createInitialState(e,t,n){return{changeBackgroundDaily:e,includeVideoBackgroundsInRotation:t,showImageSpotlightText:n,selectedVideoSetting:this.shouldUseEnergySaverMode()?"energySaver":"balanced",imageLikes:[],imageDislikes:[],videoLikes:[],videoDislikes:[]}}shouldUseEnergySaverMode(){const e=window&&window.navigator;if(!e)return!0;const t=e?e.deviceMemory:-1;return!("4g"===e.connection.effectiveType)||!(t>=4)}getProviderBackgroundType(e){switch(e){case"BrowserLocal":return s.HX.custom;case"FREBackground":case"Iris":default:return s.HX.bing;case"Theme":return s.HX.theme;case"Video":case"CMSImage":return s.HX.imageAndVideo}}backgroundSelectionSet(){return(0,i.mG)(this,void 0,void 0,(function*(){return!!(yield this.getBackgroundPreferenceByKey(r.wI.backgroundSelectionMetadata))}))}overrideCacheAging(){return"true"===g.c.getQueryParameterByName("ageOutGalleryCache",(0,p.zp)())}handleRotationToggling(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return!!this.backgroundSettingsPreferences&&(e?(this.isCurrentAndCachedBackgroundIdentical(t)&&this.setShouldRerender(!1),this.checkAndRemoveApplicableBackgrounds(!0,t,!0)):!!this.backgroundSettingsPreferences.backgroundSelectionMetadata||this.getActiveBackgroundSelectionMetadata(t).then((e=>!!e&&(this.setShouldRerender(!1),this.setBackgroundPreferenceByKey(r.wI.backgroundSelectionMetadata,e)))).catch((e=>!1)))}))}isCurrentAndCachedBackgroundIdentical(e){const t=this.getVideoBackgroundProviderInfo(e);if(!t||!this.backgroundSettingsPreferences||!this.backgroundSettingsPreferences.backgroundSelectionMetadata)return!1;const n=this.backgroundSettingsPreferences.backgroundSelectionMetadata;return t.provider===n.provider&&t.configIndex===n.configIndex}getActiveBackgroundSelectionMetadata(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return;if(e.currentBackgroundImageType===s.HX.off)return this.buildBackgroundSelectionMetadata("Off");const t=yield this.getBackgroundPreferences();if(t){if(t.backgroundSelectionMetadata)return t.backgroundSelectionMetadata;switch(e.currentBackgroundImageType){case s.HX.bing:return this.buildBackgroundSelectionMetadata("Iris");case s.HX.imageAndVideo:return this.getVideoBackgroundProviderInfo(e);case s.HX.custom:return this.buildBackgroundSelectionMetadata("BrowserLocal");case s.HX.theme:return this.buildBackgroundSelectionMetadata("Theme");default:return this.buildBackgroundSelectionMetadata("Iris")}}}))}isVideoScheduled(){const e=(0,m.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}getVideoBackgroundProviderInfo(e){let t=this.isVideoScheduled();return this.ssrBackgroundMetadata&&this.ssrBackgroundMetadata.configIndex?t=this.ssrBackgroundMetadata.configIndex:this.ssrBackgroundMetadata&&!this.ssrBackgroundMetadata.configIndex&&(t=-1),(this.hasSimpleImages||this.dailyRotationIncludesImages)&&t>-1?e.currentLayout==s.nP.informational?this.buildBackgroundSelectionMetadata("CMSImage",(t+this.cmsImageSize).toString()):this.buildBackgroundSelectionMetadata("Video",t.toString()):t>-1?this.buildBackgroundSelectionMetadata("Video",t.toString()):this.buildBackgroundSelectionMetadata("Iris")}buildBackgroundSelectionMetadata(e,t,n){return{provider:e,configIndex:t||"-1",appliedTimestamp:n||Date.now()}}shouldOverrideLayoutToCustom(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.getBackgroundPreferences();return!!e&&(!!e.backgroundSelectionMetadata||!e.changeBackgroundDaily)}))}resetAppliedBackgroundAndToggleStorage(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(e===s.nP.informational||e===s.nP.inspirational){const e=yield this.getBackgroundPreferences();if(!e)return;e[r.wI.changeBackgroundDaily]=!0,e[r.wI.includeVideoBackgroundsInRotation]=!0,delete e[r.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(e)}}))}resetGalleryStorageForPolicyCompliance(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){return t&&n?this.resetStorageForImagesOff(e):t?this.resetStorageForImageOfTheDayDisabled(e):!n||this.resetStorageForCustomImageDisabled(e)}))}resetStorageForImagesOff(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const t=Object.assign(Object.assign({},e),{changeBackgroundDaily:!1,includeVideoBackgroundsInRotation:!1,showImageSpotlightText:!1});return delete t[r.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}))}resetStorageForImageOfTheDayDisabled(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const t=Object.assign(Object.assign({},e),{changeBackgroundDaily:!1,includeVideoBackgroundsInRotation:!1,showImageSpotlightText:!1}),n=t.backgroundSelectionMetadata;return n&&"BrowserLocal"!==n.provider&&"Theme"!==n.provider&&delete t[r.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}))}resetStorageForCustomImageDisabled(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const t=e.backgroundSelectionMetadata;return!t||("Theme"===t.provider||"BrowserLocal"===t.provider?(delete e[r.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(e)):this.setBackgroundPreferences(e))}))}clearCachedBackground(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=e||(yield this.getBackgroundPreferences());return!!t&&(!t.backgroundSelectionMetadata||(delete t[r.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)))}))}setToastCooldown(e,t){let n=(0,m.$o)().getObject(c.IG);n||(n={reducedMotionNextAvailableTimestamp:0});const i=Date.now()+this.calculateToastCooldown(t);"reducedMotion"===e&&(n.reducedMotionNextAvailableTimestamp=Date.now()+i),(0,m.$o)().setObject(c.IG,n)}toastCooldownExpired(e){const t=(0,m.$o)().getObject(c.IG);return!t||"reducedMotion"===e&&t.reducedMotionNextAvailableTimestamp<Date.now()}calculateToastCooldown(e){return 864e5*e}getNurturingErrorObject(){return{key:r.AZ,value:{isError:!0}}}shouldDisableGalleryFeature(){return"true"===g.c.getQueryParameterByName("disableBackgroundGallery",(0,p.zp)())}updateLayoutBasedOnBackgroundType(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(e=e||(yield this.getBackgroundPreferences())))return;const t=this.getBackgroundImageTypeFromSettings(e.includeVideoBackgroundsInRotation);b.k.updateLayoutAndBackgroundImageType(t)}))}}const k=(0,h.h)(T)},74942:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var i=n(55067);class r{}r.updateEnabledState=new i.C("UpdateEnabled"),r.updateHeaderExpandedState=new i.C("UpdateHeaderExpanded"),r.updateStickyState=new i.C("UpdateSticky"),r.updateLayoutStatus=new i.C("UpdateLayoutStatus")},81171:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var i=n(63439),r=n(74942);class o extends i.e{updateEnabledStatus(e){r.A.updateEnabledState.getActionSender(this).send(e)}updateHeaderExpandedStatus(e){r.A.updateHeaderExpandedState.getActionSender(this).send(e)}updateLayoutStatus(e){r.A.updateLayoutStatus.getActionSender(this).send(e)}updateStickyStatus(e){r.A.updateStickyState.getActionSender(this).send(e)}}},69152:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(30856),r=n(74942);class o{reduce(e,t){if(!e)return{isEnabled:!1,isExpanded:!1,isHeaderSticky:!1};if(!t)return e;let n;return i.G.handleAction(t,r.A.updateHeaderExpandedState,(t=>{n=Object.assign(Object.assign({},e),{isExpanded:t})})),i.G.handleAction(t,r.A.updateStickyState,(t=>{n=Object.assign(Object.assign({},e),{isHeaderSticky:t})})),i.G.handleAction(t,r.A.updateEnabledState,(t=>{n=Object.assign(Object.assign({},e),{isEnabled:t})})),i.G.handleAction(t,r.A.updateLayoutStatus,(t=>{n=Object.assign(Object.assign({},e),{feedDisplaySetting:t})})),n||e}}},74045:function(e,t,n){"use strict";var i,r;n.d(t,{O7:function(){return i},Us:function(){return r},XQ:function(){return o},_F:function(){return a},c0:function(){return s}}),function(e){e[e.none=0]="none",e[e.enabled=1]="enabled",e[e.saved=2]="saved",e[e.hide=4]="hide",e[e.showMore=8]="showMore",e[e.showFewer=16]="showFewer",e[e.mute=32]="mute",e[e.hidden=64]="hidden",e[e.report=128]="report",e[e.adFeedbackSubmitted=256]="adFeedbackSubmitted",e[e.hideTopic=512]="hideTopic",e[e.dismiss=1024]="dismiss",e[e.adPrivacy=2048]="adPrivacy",e[e.feedback=4096]="feedback",e[e.whyAmISee=8192]="whyAmISee",e[e.followedPublisher=16384]="followedPublisher"}(i||(i={})),function(e){e.Hide="Hide",e.Like="Like",e.Disabled="Disabled",e.Dislike="Dislike",e.Mute="Mute",e.Save="Save",e.Share="Share",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Divider="Divider",e.Report="Report",e.ManageInterests="ManageInterests",e.ReportAd="ReportAd",e.AdPrivacy="AdPrivacy",e.HideTopic="HideTopic",e.Feedback="Feedback",e.WhyAmISee="WhyAmISee",e.FollowPublisher="FollowPublisher",e.Upvote="Upvote"}(r||(r={}));const o=e=>{const t=[],n={AdultImage:"AdultImage",RacyImage:"RacyImage",TextProfanity:"TextProfanity",SubstanceAbuse:"SubstanceAbuse",Violence:"Violence",Misinformation:"Misinformation",Other:"Other"};return e&&Object.keys(e).forEach((i=>{e[i]&&t.push(n[i])})),t},a="/service/moderation/api/reportanissue",s="https://assets.msn.cn/service/moderation/api/reportanissue"},39935:function(e,t,n){"use strict";n.d(t,{DD:function(){return O},I3:function(){return R}});var i,r=n(33940),o=n(12108),a=n(83097),s=n(33799),c=n(74045),d=n(98304),l=n(68364),u=n(56692),p=n(45506),h=n(17612),g=n(38156),m=n(65135),f=n(63535),v=n(19809),y=n(87298),S=n(56698),C=n(94546),b=n(66925),w=n(85334);!function(e){e[e.feedbackDefault=2224]="feedbackDefault",e[e.windowsFeed=2475]="windowsFeed"}(i||(i={}));class T{constructor(){this.manifestType="Sas",this.appId=i.feedbackDefault,this.source="Client",this.type="Idea"}}var k=n(33379),P=n(98429),A=n(90351),I=n(67462),E=n(51671),x=n(51125);const M="https://petrol.office.microsoft.com/v1/feedback";class O{constructor(e,t){var n;this.fetchImpl=e,this.additionalHeaders=t,this.isWindowsDashboard="newsAndInterests"===u.jG.AppType||"windowsNewsPlus"===u.jG.AppType||"winWidgets"===u.jG.AppType,this.isWindowsNewsbar="windowsNewsbar"===u.jG.AppType,this.isStartGG="gaming"===u.jG.AppType,this.isTravelVertical="travel"===u.jG.AppType,this.providersServiceEndpointURL=(0,f.PH)("./Msn/Providers"),this.cardActionsServiceEndpointURL=(0,f.PH)("./Graph/Actions"),this.userFeedbackEventhubUrl="/labs/api/feedbackSignal",this.ocid="feeds",this.onChangePublisherFollowStatus=e=>{var t,n;const i=null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.id,r=null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.follow;i&&void 0!==r&&O.setPublisherFollowStatus(i,r)},this.isWindowsDashboard?this.ocid=(null===(n=p.Al.ClientSettings)||void 0===n?void 0:n.pagetype)===o.G.Sidebar?"shoreline":"winp2":this.isWindowsNewsbar?this.ocid="winp0dash":p.Al.IsBlendedEnterprise?this.ocid="entnewsntp":this.isStartGG?this.ocid="startgg-feeds":this.isTravelVertical&&(this.ocid="travel-verthp-feeds"),this.initPublisherServiceClientPromise(),this.addEventListeners()}static setPublisherFollowStatus(e,t){O.publisherFollowStatus[e]=t,O._publisherFollowStatusListeners.forEach((n=>{n({profileId:e,value:t})}))}static registerPublisherFollowStatusListener(e){const t=O.publisherFollowStatusListenerId;return O._publisherFollowStatusListeners.set(t,e),O.publisherFollowStatusListenerId+=1,()=>O._publisherFollowStatusListeners.delete(t)}initPublisherServiceClientPromise(){let e;this.publisherServiceClientPromise=new Promise((t=>{e=t}));(()=>{(0,r.mG)(this,void 0,void 0,(function*(){const{PublisherServiceClient:t}=yield Promise.resolve().then(n.bind(n,55128));e(new t((0,k.N)()?window.fetch.bind(window):fetch))}))})()}static getUndoCallbackParams(e,t){let n={status:e,action:null,sendRequest:!0};return e&c.O7.hidden?(e&c.O7.mute?(n.status=e^c.O7.mute,n.action=c.Us.Mute):e&c.O7.report?(n.status=e^c.O7.report,n.action=c.Us.Report):e&c.O7.showFewer&&e&c.O7.hide?(n.status=e^c.O7.showFewer,n.action=c.Us.ShowFewer):e&c.O7.showMore&&e&c.O7.hide?(n.status=e^c.O7.showMore,n.action=c.Us.ShowMore):"like-button"===t&&e&c.O7.hide&&e&c.O7.followedPublisher?(n.status=e^c.O7.followedPublisher,n.action=c.Us.FollowPublisher):e&c.O7.hideTopic?(n.status=e^c.O7.hideTopic,n.action=c.Us.HideTopic):e&c.O7.dismiss&&(n.status=e^c.O7.dismiss,n.sendRequest=!1),n.status=n.status^c.O7.hidden):n="like-button"===t?{status:e^c.O7.hide,action:"Like-TellUsMore",sendRequest:!1}:e&c.O7.hide?{status:e^c.O7.hide,action:c.Us.Hide,sendRequest:!0}:{status:e^c.O7.showFewer,action:c.Us.ShowFewer,sendRequest:!0},n}setAdditionalHeaders(e){this.additionalHeaders=e}ShowFewer(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,c.Us.Dislike,null)}))}UnshowFewer(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,c.Us.Dislike)}))}ShowMore(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,c.Us.Like,null,t)}))}UnshowMore(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,c.Us.Like)}))}Follow(e){return(0,r.mG)(this,void 0,void 0,(function*(){O.setPublisherFollowStatus(e,!0);const t=yield this.publisherServiceClientPromise;try{return yield t.updateSourceFollowState(e,!0)}catch(t){throw O.setPublisherFollowStatus(e,!1),t}}))}Unfollow(e){return(0,r.mG)(this,void 0,void 0,(function*(){O.setPublisherFollowStatus(e,!1);const t=yield this.publisherServiceClientPromise;try{return yield t.updateSourceFollowState(e,!1)}catch(t){throw O.setPublisherFollowStatus(e,!0),t}}))}Hide(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,c.Us.Dislike,null,t)}))}Unhide(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,c.Us.Dislike)}))}Mute(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,c.Us.Mute,"SourceProvider")}))}Unmute(e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,c.Us.Mute)}))}Disable(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,c.Us.Disabled,t)}))}Report(e,t,n,i,o,a,s,d,l,h=""){return(0,r.mG)(this,void 0,void 0,(function*(){const r=p.Al.ClientSettings?p.Al.ClientSettings.aid:"",m=u.jG&&u.jG.HostPage.topDomain,y=o===g.uH.WebContent?"web":"msn",S=(0,c.XQ)(l),C=(0,P.pW)(),b={serviceType:"oneservice",oneServiceTraceId:"",oneServiceActivityId:r},w=JSON.stringify({article:{id:e},canvas:{name:u.jG.AppType,version:navigator.userAgent,pageType:h||p.Al.ClientSettings.pagetype},data:{activityId:r,feedbackTags:t,feedbackText:n},appEnvironment:u.jG,clientSettings:p.Al.ClientSettings,extSchema:b}),T=JSON.stringify({activityId:C,market:u.jG&&u.jG.CurrentMarket||"",contentId:e,source:y,headlineImage:s&&F(s.src),headlineText:i,abstract:a,offensive:S,url:d}),k=(0,f.qQ)().origin+this.userFeedbackEventhubUrl,A="msn.cn"===m?c.c0:(0,f.qQ)().origin+c._F,I=Object.assign(Object.assign({},yield v.$D.getOneServiceHeaders()),this.additionalHeaders),E=Object.assign(Object.assign({},I),{"Content-Type":"application/json"});this.reportFeedbackService(w,k,I),0!=S.length&&this.reportFeedbackService(T,A,E)}))}reportFeedbackService(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const i={method:"POST",headers:n,body:e,credentials:"include"};let r;try{if(r=yield fetch(t,i),r.status>=400)throw new Error(r.statusText)}catch(e){m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.Kbm),{message:"Error while posting action for card action",pb:Object.assign(Object.assign({},d.Kbm.pb),{customMessage:`url: ${t}, error: ${e}`})}))}return r}))}reportNonCMS(e,t,n,i,o,a){return(0,r.mG)(this,void 0,void 0,(function*(){this.ReportOCV(e,t,n,i,o,a)}))}ReportOCV(e,t,n,i,o,a){return(0,r.mG)(this,void 0,void 0,(function*(){let r=!1;const s=this.createOcvFeedbackData(e,t,n,i,o,a),c={method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};try{const e=yield this.fetchImpl(M,c);if(e.ok)r=!0;else{const t=`Error code: ${e.status} Error message: ${e.statusText} Request params: ${c} Service url: ${M}`;(0,l.H)(d.Z7,"Request is not valid, it has no content, or the manifest is not formatted correctly",t)}}catch(e){const t=`Error code: ${e?e.code:"undefined"} Error message: ${e?e.message:"undefined"} Request params: ${c} Service url: ${M}`;(0,l.OO)(e,d.na5,"Exception reporting feedback to OCV",t)}}))}createOcvFeedbackData(e,t,n,i,r,o){var a,s,c,d;const l=new T,h=null===p.Al||void 0===p.Al?void 0:p.Al.ClientSettings,g=null===u.jG||void 0===u.jG?void 0:u.jG.HostPage,f=(null==h?void 0:h.aid)||"",v=[o?"1S":"","true"===((null==h?void 0:h.static_page)||"")?"PCS":""].join(" ").trim()||"None",y=(null===(s=null===(a=null===u.jG||void 0===u.jG?void 0:u.jG.CurrentRequestTargetScope)||void 0===a?void 0:a.pageExperiments)||void 0===s?void 0:s.join(","))||"",S=null===(c=null===u.jG||void 0===u.jG?void 0:u.jG.CurrentRequestTargetScope)||void 0===c?void 0:c.browser;let C="";if(r){const e=r.split("|");C=e&&e.length&&e[0]}else{const e=m.M0.getPageMetadata().JoinIdProps.IDXId;if(e){C=e.split(",").slice(0,10).toString()}r=(0,x.N)()}const b={serviceType:"oneservice",oneServiceTraceId:C,oneServiceActivityId:""},w=JSON.stringify({NotRelevant:t.NotRelevant,ImageQuality:t.BlurryImage,MisleadingTitle:t.Misleading,OutdatedArticle:t.Outdated,DuplicateArticle:t.Duplicate,OffensiveContent:t.Offensive,Vertical:i});return m.M0.sendTraceInfoEvent(b),l.submitTime=(new Date).toISOString(),l.clientFeedbackId=(0,P.pW)(),l.comment=n,l.rating=4,l.application={appData:JSON.stringify({ScreenResolution:window&&window.screen?[screen.width,screen.height].join("x"):"",articleId:e,debugId:r,activityID:f,staticFallback:v,vertical:g&&g.verticalKey||"Prod",errorClassification:w})},l.telemetry={audience:(null===u.jG||void 0===u.jG?void 0:u.jG.CurrentMarket)||"",audienceGroup:"Production",channel:(null==g?void 0:g.categoryKey)||"",deviceType:(null==h?void 0:h.deviceFormFactor)||"",errorClassification:w,featureArea:(null==h?void 0:h.pagetype)||"",flights:y,isUserSubscriber:(0,E.hC)(),platform:null===(d=u.jG.CurrentRequestTargetScope)||void 0===d?void 0:d.os,processSessionId:f,sourceContext:u.jG.AppType},l.web={browser:(null==S?void 0:S.browserType)||"",browserVersion:(null==S?void 0:S.version)||"",sourcePageName:(null==g?void 0:g.subcategoryKey)||"",sourcePageURI:""},l}ReportAd(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=e.concat(`&f=${t}`);let i=new Image(1,1);i.src=n,i=null}))}GetProviderIcon(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=yield this.GetPublisherDetails(e);return(0,A.Z)(t,"value[0].logos[0].imageLink.href",void 0)}))}PostCardActionEvent(e,t,n,i=(()=>null),o,a,s=!0,d,l=5e3,p=!1,g,m,f,v){return(0,r.mG)(this,void 0,void 0,(function*(){let r;switch(t){case c.Us.ShowMore:e&c.O7.showMore?(s&&b.h.renderToast({id:w.p.ShowMore+`-${n}`,toastType:w.p.ShowMore,expirationInMs:l,onClick:()=>{o?o(n,e^c.O7.showMore,t,!0):this.PostCardActionEvent(e^c.O7.showMore,t,n,i)},referrerButton:d}),r=yield this.ShowMore(n,m)):(b.h.expireToast(w.p.ShowMore+`-${n}`),r=yield this.UnshowMore(n)),i(n,e);break;case c.Us.ShowFewer:e&c.O7.showFewer?(s&&b.h.renderToast({id:w.p.ShowFewer+`-${n}`,toastType:w.p.ShowFewer,expirationInMs:l,onClick:()=>{o?o(n,e^c.O7.showFewer,t,!0):this.PostCardActionEvent(e^c.O7.showFewer,t,n,i)},referrerButton:d}),r=yield this.ShowFewer(n)):(b.h.expireToast(w.p.ShowFewer+`-${n}`),r=yield this.UnshowFewer(n)),i(n,e);break;case c.Us.FollowPublisher:r=e&c.O7.followedPublisher?yield this.Follow(a):yield this.Unfollow(a),i(n,e);break;case c.Us.Hide:r=e&c.O7.hide?yield this.Hide(n,m):yield this.Unhide(n),i(n,e);break;case c.Us.HideTopic:r=e&c.O7.hideTopic?yield this.PostCardActionRequest(a,c.Us.Mute,"TagBase"):yield this.DeleteCardActionRequest(a,c.Us.Mute);break;case c.Us.Mute:if(e&c.O7.mute){if((e&c.O7.followedPublisher||!0===O.publisherFollowStatus[v])&&this.Unfollow(a),r=yield this.Mute(a),r)i(n,e,c.Us.Mute,void 0,void 0,a);else if(f&&f(),u.jG.CurrentMarket===h.IY.ENUS)return void setTimeout((()=>{b.h.renderToast({id:`${w.p.MuteError}-${t}-${n}`,toastType:w.p.MuteError,expirationInMs:l,referrerButton:d,positionElRef:d.offsetParent})}),300)}else r=yield this.Unmute(a);break;case c.Us.ReportAd:i(n,e);break;default:return}p&&!r&&b.h.renderToast({id:`${w.p.ConnectionError}-${t}-${n}`,toastType:w.p.ConnectionError,inputText:g&&g.personalizationErrorText,expirationInMs:l,referrerButton:d})}))}GetPublisherDetails(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.providersServiceEndpointURL,n={method:"GET",headers:Object.assign(Object.assign({},yield v.$D.getOneServiceHeaders()),this.additionalHeaders)};[{key:"ids",value:e},...yield this.getOneServiceCommonParam()].forEach((e=>e.value&&t.searchParams.set(e.key,e.value)));try{const i=yield(0,y.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){return yield this.fetchImpl(t.href,n)}))),"getProviderDetails");if(!i.ok){const t=`OneService returned error response. Status: ${i.status} for providerId: ${e}`;throw new Error(t)}return i.json()}catch(e){m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.Xqh),{message:"Error while calling getPublisherDetails action for card action",pb:Object.assign(Object.assign({},d.G1z.pb),{customMessage:`url: ${t.href}, error: ${e}`})}))}}))}DeleteCardActionRequest(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=this.cardActionsServiceEndpointURL,i={method:"DELETE",credentials:"include",headers:Object.assign(Object.assign({},yield v.$D.getOneServiceHeaders()),this.additionalHeaders)};[{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`},...yield this.getOneServiceCommonParam()].forEach((e=>e.value&&n.searchParams.set(e.key,e.value)));try{const o=yield(0,y.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){return yield this.fetchImpl(n.href,i)}))),`deleteCardAction${t}`);if(o.status>=400){const n=`OneService returned error response. Status: ${o.status} for actionType: ${t} and targetId: ${e}`;throw new Error(n)}return(0,S.bY)(this.getPreloadReloadReason(t)),(0,x.j9)(),o}catch(e){m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.G1z),{message:"Error while calling delete action for card action",pb:Object.assign(Object.assign({},d.G1z.pb),{customMessage:`url: ${n.href}, error: ${e}`})}))}}))}PostCardActionRequest(e,t,n,i){return(0,r.mG)(this,void 0,void 0,(function*(){const o=this.cardActionsServiceEndpointURL,a={method:"POST",body:JSON.stringify({actionType:t,targetId:e,targetType:n,metadata:i}),headers:Object.assign(Object.assign({},yield v.$D.getOneServiceHeaders()),this.additionalHeaders),credentials:"include"};(yield this.getOneServiceCommonParam()).forEach((e=>e.value&&o.searchParams.set(e.key,e.value)));try{const i=yield(0,y.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){return yield this.fetchImpl(o.href,a)}))),`getCardAction${t}`);if(i.status>=400){const r=`OneService returned error response. Status: ${i.status} for actionType: ${t}, targetId: ${e} and targetType: ${n}`;throw new Error(r)}return(0,S.bY)(this.getPreloadReloadReason(t)),(0,x.j9)(),i.json()}catch(e){m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.Kbm),{message:"Error while posting action for card action",pb:Object.assign(Object.assign({},d.Kbm.pb),{customMessage:`url: ${o.href}, error: ${e}`})}))}}))}getOneServiceCommonParam(){return(0,r.mG)(this,void 0,void 0,(function*(){return this.isWindowsDashboard||this.isWindowsNewsbar||this.isStartGG||this.isTravelVertical?v.$D.getOneServiceParamsWithoutAuth(u.jG.UserId,this.ocid,!1):(yield this.isUserSignedIn())?v.$D.getOneServiceParamsWithAuth(u.jG.UserId,this.ocid,!p.Al.IsBlendedEnterprise):"edgeChromium"===u.jG.AppType&&(0,I.ej)("lt")&&(0,I.ej)(a.IR.AppAnonCookieExists)?(m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.lz),{message:"CardActionServiceClient: lt cookie present. "+a.IR.AppAnonCookieExists+" cookie present.",pb:Object.assign({},d.lz.pb)})),v.$D.getOneServiceParamsWithAuth(u.jG.UserId,this.ocid,!p.Al.IsBlendedEnterprise)):v.$D.getOneServiceParamsWithoutAuth(u.jG.UserId,this.ocid,!p.Al.IsBlendedEnterprise)}))}isUserSignedIn(){return(0,r.mG)(this,void 0,void 0,(function*(){if(p.Al.UserIsSignedIn)return!0;return(yield(0,E.XJ)())===s.Hy.SignedIn}))}getPreloadReloadReason(e){switch(e){case c.Us.Mute:return C.T.MutePublisher;case c.Us.Like:return C.T.Like;case c.Us.Dislike:return C.T.Dislike;case c.Us.Disabled:return C.T.Disabled;default:return C.T.SettingsChange}}addEventListeners(){window.addEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}removeEventListeners(){window.removeEventListener("trackPublisherFollowStatus",this.onChangePublisherFollowStatus)}}O.publisherFollowStatusListenerId=1,O.publisherFollowStatus={},O._publisherFollowStatusListeners=new Map;class L extends O{constructor(e,t){let n;n=e||((0,k.N)()?window.fetch.bind(window):fetch),super(n,t)}}let D;const R=(e,t)=>D?(t&&D.setAdditionalHeaders(t),D):(D=new L(e,t),D);function F(e){if(e&&e.startsWith("//")){return`${(0,k.N)()?window.location.protocol:"https:"}${e}`}return e}},41691:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(55067);class r{}r.loadLocalStorage=new i.C("loadLocalStorage"),r.marketUpdated=new i.C("marketUpdated"),r.pageLayoutStateLoaded=new i.C("PageLayoutStateLoaded"),r.updateConfigData=new i.C("updateConfigData"),r.updateConfigDataChanged=new i.C("updateConfigDataChanged"),r.updateTopSitesQuickLinkEndMarginUsedPadding=new i.C("updateTopSitesQuickLinkEndMarginUsedPadding"),r.updateLocalStorage=new i.C("updateLocalStorage"),r.updateNtpTheme=new i.C("updateNtpTheme"),r.updatePrimaryAccountInfo=new i.C("updatePrimaryAccountInfo"),r.updateWPOLayoutPromotion=new i.C("updateWPOLayoutPromotion"),r.updateWPOTopsitesPromotion=new i.C("updateWPOTopsitesPromotion")},7009:function(e,t,n){"use strict";var i,r,o;n.d(t,{AL:function(){return s},Aq:function(){return u},BC:function(){return h},HT:function(){return r},WT:function(){return o},_H:function(){return g},dK:function(){return c},gJ:function(){return m},h0:function(){return i},lA:function(){return a},lx:function(){return f},pY:function(){return p},r2:function(){return l},vs:function(){return d}}),function(e){e[e.BOOLEAN_AND_STRING_ENUM=0]="BOOLEAN_AND_STRING_ENUM",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING_ENUM=2]="STRING_ENUM"}(i||(i={})),function(e){e.redirect="redirect",e.bing="bing"}(r||(r={})),function(e){e[e.user=0]="user",e[e.wpoPrerenderTab=1]="wpoPrerenderTab",e[e.wpoVisibleTab=2]="wpoVisibleTab",e[e.adminPortalVisibleTab=3]="adminPortalVisibleTab",e[e.ntpVisibleTab=4]="ntpVisibleTab"}(o||(o={}));const a={enabledFeatures:"enabledFeatures",IsDefaultSearchProviderLocked:"isInLockdownMode",isEducationEnvironment:"isEducationEnvironment",isInYandexRegions:"isInYandexRegions",isNewTabGreetingEnabled:"isNewTabGreetingEnabled",inPageSearchBoxType:"inPageSearchBoxType",profileCreationTime:"profileCreationTime",showFeedSwitcher:"showFeedSwitcher",isChromePrimaryBrowserAtFre:"isChromePrimaryBrowserAtFre",isEnrolledInProjectEqual:"isEnrolledInProjectEqual",irisAttributes:"irisAttributes",isEdgeSignInAllowed:"isEdgeSignInAllowed",isShowMicrosoftRewardsEnabled:"isShowMicrosoftRewardsEnabled",maxQuickLinks:"maxQuickLinks",isQuickLinksFolderInFavoritesEnabled:"isQuickLinksFolderInFavoritesEnabled",channel:"channel"},s={hasImage:"has_image",resourceUrl:"resource_url",timestamp:"last_modified_time"},c="msQuickLinksDefaultOneRow",d="msQuickLinksDefaultTwoRow",l={accountType:"account_type",accountId:"account_id",email:"email",firstName:"first_name",lastName:"last_name"};var u;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CHROME=1]="CHROME",e[e.FIREFOX=2]="FIREFOX",e[e.IEXPLORER=4]="IEXPLORER",e[e.SAFARI=11]="SAFARI",e[e.EDGE=12]="EDGE",e[e.MSEDGE=13]="MSEDGE"}(u||(u={}));const p="quick_links_options",h={selected:94608e3,promoted:2592e3},g={STABLE:"",DEV:"dev",BETA:"beta",CANARY:"canary"},m="splitScreenToggle",f="tscollapsed_to_off"},4814:function(e,t,n){"use strict";n.d(t,{$W:function(){return C},BA:function(){return A},F0:function(){return I},HG:function(){return k},Mc:function(){return w},OS:function(){return x},U4:function(){return y},VT:function(){return E},WH:function(){return f},_u:function(){return m},eD:function(){return v},gC:function(){return L},k4:function(){return S},oB:function(){return P},qi:function(){return T},tv:function(){return M},zJ:function(){return b},zb:function(){return O}});var i=n(33940),r=n(33379),o=n(7009),a=n(53899),s=n(33954),c=n(65135),d=n(98304),l=n(987),u=n(11765),p=n(17440),h=n(75192),g=n(25964);function m(){return new Promise((e=>{const t=(0,r.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.getConfigData?t.getConfigData((t=>{if(void 0!==t){const n={enabledFeatures:t[o.lA.enabledFeatures],IsDefaultSearchProviderLocked:t[o.lA.IsDefaultSearchProviderLocked],isEducationEnvironment:t[o.lA.isEducationEnvironment],isInYandexRegions:t[o.lA.isInYandexRegions],isNewTabGreetingEnabled:t[o.lA.isNewTabGreetingEnabled],inPageSearchBoxType:t[o.lA.inPageSearchBoxType],profileCreationTime:t[o.lA.profileCreationTime],showFeedSwitcher:t[o.lA.showFeedSwitcher],isChromePrimaryBrowserAtFre:t[o.lA.isChromePrimaryBrowserAtFre],isEnrolledInProjectEqual:t[o.lA.isEnrolledInProjectEqual],irisAttributes:new URLSearchParams(t[o.lA.irisAttributes]),isEdgeSignInAllowed:t[o.lA.isEdgeSignInAllowed],isShowMicrosoftRewardsEnabled:t[o.lA.isShowMicrosoftRewardsEnabled],maxQuickLinks:t[o.lA.maxQuickLinks],isQuickLinksFolderInFavoritesEnabled:t[o.lA.isQuickLinksFolderInFavoritesEnabled],channel:t[o.lA.channel]};e(n)}else s.k.logError("Failed to get config data from Chromium API."),e({})})):e({})}))}function f(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){try{if((yield w())&&t){const e=yield u.L.getPreferenceSetting(t);if(e&&void 0!==e.value)return JSON.parse(e.value.toString())}if(e){const t=(0,l.$o)().getObject(e,void 0);if(void 0!==t)return JSON.parse(t)}return n}catch(e){return s.k.logError("Failed to parse the key."),!1}}))}function v(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(t=a._9.layout,new Promise((e=>{const n=window.chrome;if(n){const i=n.ntpSettingsPrivate;if(i&&"function"==typeof i.getPref)return void i.getPref(t,(n=>{e(n&&n.key===t?n.value:null)}))}e(null)})));var t;return null===e||isNaN(e)?null:a.F5[e]}))}function y(e,t,n,i,r,o){let s=[];i&&(s=i.split(","));return{recommendedLayout:e,tmpl:t,control:n,fromLayoutsArray:s.length>0?s:[a.nP.inspirational],reTargetRecommendedLayout:r,selectedFeedDisplaySetting:o}}function S(e,t){const n={message:e,type:"information",pb:Object.assign(Object.assign({},(0,d.mnt)()),{customMessage:t})};c.M0.sendClientLogEvent(n)}function C(e,t,n){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:n})}))}function b(e,t,n,i,r,o){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:n,customBackgroundImageInfo:JSON.stringify(i),ntpTheme:JSON.stringify(r),currentLayout:o})}))}function w(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield u.L.isApiAvailableToUse()}))}function T(e,t){const n={setting:e,source:"ntp",timestamp:(new Date).getTime(),value:t};u.L.savePreferenceSetting(e,n)}function k(e,t){if(e===a.HX.off||!t||!t.provider)return!1;const n=t.provider,i=g.hv.get(e);return!(i&&i.some((e=>e===n)))}function P(e){var t;if(!e||!e.ntpTheme)return!1;const n=e.ntpTheme.usingDefaultTheme,i=(null===(t=e.ntpTheme.backgroundColorRgba)||void 0===t?void 0:t.length)>3,r=!!e.ntpTheme.imageUrl;return!n&&!r&&i}function A(e){if(!e||!e.ntpTheme)return!1;const t=e.ntpTheme.usingDefaultTheme,n=!!e.ntpTheme.imageUrl;return!t&&n}function I(e){if(!e||!e.length)return;const t=e.find((e=>e&&"background_setting_preferences"===e.key));return t&&t.value?t.value:void 0}function E(e){return g.rM.get(e.provider)}function x(){const e=(0,l.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}function M(e){return e&&e.includeVideoBackgroundsInRotation?x():-1}function O(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;if(!(yield p.U.isApiAvailableToUse()))return!1;const n=t>=0?"Video":"Iris",i=Object.assign(Object.assign({},e),{backgroundSelectionMetadata:{provider:n,configIndex:t,appliedTimestamp:Date.now()}});return p.U.savePreferenceSetting("background_setting_preferences",i)}))}const L=(e,t)=>(0,i.mG)(void 0,void 0,void 0,(function*(){var n;null===(n=null==e?void 0:e.$emit)||void 0===n||n.call(e,o.gJ,{enabled:t}),(yield w())&&T(h.nc.enable_split_screen,t)}))},62526:function(e,t,n){"use strict";n.d(t,{A:function(){return a},z:function(){return o}});var i=n(53899);const r=new Map;function o(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(!e)return;if(!e.setPref)return;const t=e.setPref;e.setPref=function(e,n,i){if(t(e,n,i),d.has(e))return;let o="";const a=(new Error).stack;c.has(e)&&(o=function(e){if(!e)return"";const t=[],n=e.split(/\r?\n/);for(const e of n){const n=e.trim(),i=n.lastIndexOf(" ");if(!n||i<0||n.length<4)continue;const r=n.substring(3,i).split(".").slice(-1)[0];r&&l.has(r)&&t.push(r)}return t.slice(-1)[0]?t.slice(-1)[0]:""}(a)),function(e,t,n,i){if(!e||!i||!n)return;const o=r.get(t);if(!o)return;e(o,i+";"+n)}(t,e,n,o)}}function a(e){s.forEach(((t,n)=>{e[n]&&r.set(t,n)}))}const s=new Map([[i._9.layoutModeInstrumentation,i._9.layout],[i._9.newsFeedDsiplayInstrumentation,i._9.feeds]]),c=new Set(["ntp.layout_mode","ntp.background_image_type","ntp.show_image_of_day","ntp.news_feed_display"]),d=new Set(["ntp.record_user_choices","ntp.user_nurturing"]),l=new Set(["updateLayout","onUpdateFeedVisibility","onContentSelectChange","onLayoutModeSelectChange","updateToCustomLayoutMode","updateBackgroundImageType","updateLayoutAndBackgroundImageType","overrideLayoutPreferenceForPolicy","onCustomBackgroundRadioClick","migrateBackgroundPreference","wpoPromoteNewFeedDisplaySetting","wpoPromoteNewLayout"])},28178:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserBackgroundPrefSupport:function(){return r.h0},BrowserType:function(){return r.Aq},ChromiumPageSettingsActions:function(){return a.V},ChromiumPageSettingsConnector:function(){return ne},ChromiumPageSettingsReducer:function(){return re},EdgeChannel:function(){return r._H},EdgeFeatureFlag:function(){return i},InPageSearchBoxType:function(){return r.HT},LayoutChangeInitiator:function(){return r.WT},PrimaryAccountType:function(){return oe.l},SplitScreenEventKey:function(){return r.gJ},ToolingInfo:function(){return ae},configDataStringMap:function(){return r.lA},coolDownTimeMap:function(){return r.BC},createLayoutPromotionData:function(){return o.U4},customBackgroundImageInfoStringMap:function(){return r.AL},edgeNextLayoutOptimizer:function(){return j},getBackgroundImageTypeFromSelectionMetadata:function(){return o.VT},getBackgroundSettingsPreferences:function(){return o.F0},getConfigDataAsync:function(){return o._u},getCurrentConfigurationIndex:function(){return o.tv},getCurrentLayoutAsync:function(){return o.eD},getCurrentVideoIndex:function(){return o.OS},getUserSetting:function(){return o.WH},isBaseBackgroundPreferenceAndGallerySelectionMismatched:function(){return o.HG},isBundledThemeBackground:function(){return o.BA},isPersistentStorageAPIAvailable:function(){return o.Mc},isRGBThemeBackground:function(){return o.oB},logAppError:function(){return o.$W},logVerboseAppError:function(){return o.zJ},msQuickLinksDefaultOneRow:function(){return r.dK},msQuickLinksDefaultTwoRow:function(){return r.vs},overrideGallerySelectionCache:function(){return o.zb},overrideNtpSettingsPrivatePreferenceSetting:function(){return Z.z},primaryAccountInfoStringMap:function(){return r.r2},quickLinksOptionsKey:function(){return r.pY},recordAndNotifySplitScreenSettingsChange:function(){return o.gC},recordUserChoice:function(){return o.qi},sendClientLogEvent:function(){return o.k4},topsitesCollapsedToOff:function(){return r.lx}});var i,r=n(7009);!function(e){e.WinHPCustomBackButtonBehavior="msEnableWinHPNewTabBackButtonFocusAndClose"}(i||(i={}));var o=n(4814),a=n(41691),s=n(33940);const c={StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},CoachmarkUserPreference:{id:"cmp",maxRawLength:1,useCookie:!1,jsonEncoded:!1},LayoutOptimization:{id:"wpolo",maxRawLength:250,useCookie:!1,jsonEncoded:!0}};var d,l;!function(e){e.DefaultShowContent="DefaultShowContent",e.DisplayedCoachMarkWizards="DisplayedCoachMarkWizards",e.DynamicFeedFilters="DynamicFeedFilters",e.FreDialogExistingUser="FreDialogExistingUser",e.HasMsa="HasMsa",e.MarketSelection="MarketSelection",e.OutlookOptIn="OutlookOptIn",e.ProActiveCanvasFRE="ProActiveCanvasFRE",e.StructuredDataCardsUserPreference="StructuredDataCardsUserPreference",e.TopicSelection="TopicSelection",e.Layout="Layout",e.DhpHideNewsFeed="DhpHideNewsFeed",e.HideBingImage="HideBingImage"}(d||(d={})),function(e){e.DefaultShowContent="dsc",e.CoachMarkWizard="cmwr",e.DynamicFeedFilters="dff",e.MarketReset="mktreset",e.HasMsa="msa",e.MarketSelection="ntps",e.OutlookOptIn="olopt",e.ProActiveCanvasFRE="spnewpcfre",e.StructuredDataCardsUserPreference="scp",e.TopicSelection="epnff",e.DhpHideNewsFeed="iedo",e.HideBingImage="bingimage"}(l||(l={}));var u=n(987);class p{constructor(e=(0,u.$o)()){this.webStorage=e,this.loadSettingsFromStorage=()=>{},this.storage={}}fetchProperty(e){const t=c[e];return t&&this.storage[t.id]}clear(){Object.keys(c).forEach((e=>{const t=c[e];this.webStorage.removeItem(t.id),delete this.storage[t.id]}))}deleteProperty(e){const t=c[e];t&&(this.webStorage.removeItem(t.id),delete this.storage[t.id])}saveProperty(e,t){const n=c[e];if(n){const e=n.jsonEncoded,i=n.maxRawLength,r=typeof t,o=JSON.stringify(t),a=o.length;if(e?"object"===r&&a<=i:("string"===r||"number"===r)&&a<=i+2){const i=e?o:t;return this.webStorage.setItem(n.id,i),!0}}return!1}loadSynchronizedSettingsFromStorage(){Object.keys(c).forEach((e=>{const t=c[e].id,n=this.webStorage.getItem(t);n&&(this.storage[t]=JSON.parse(n))}))}}var h=n(63439),g=n(53899),m=n(35385),f=n(16614),v=n(68364),y=n(98304),S=n(33954),C=n(79941),b=n(51953),w=n(67462),T=n(26007),k=n(45506),P=n(56692),A=n(10877),I=n(92908),E=n(17440),x=n(75192),M=n(11765),O=n(16822),L=n(77331);var D=n(27003),R=n(33379),F=n(99590),B=n(24676);class N{}const U={0:g.nP.focused,1:g.nP.inspirational,2:g.nP.informational,3:g.nP.custom},$={focused:0,inspirational:1,informational:2,custom:3},_={0:"off",1:"headingsonly",2:"peek",3:"always",4:"onscroll"},H={off:0,headingsonly:1,peek:2,always:3,onscroll:4};class W{constructor(){this.recommendation=new N,this.getRecommendedLayout=(e,t,n)=>(0,s.mG)(this,void 0,void 0,(function*(){return new Promise((i=>(0,s.mG)(this,void 0,void 0,(function*(){var r;try{const{enableWpoLayoutPromoCoolDown:a,coolDownTimeInSecondsPromoted:s,coolDownTimeInSecondsSelected:c,enbWpoPromotionFromPSL:d}=e&&e.layoutPromotion||{};if(this.qualifyForPromotion&&!d)return this.recommendation.control?i(null):i(this.recommendation);let l=null;if(d){if(yield E.U.isApiAvailableToUse()){const e=null===(r=yield E.U.getPreferenceSetting(x.Xm.layoutPromotion))||void 0===r?void 0:r.value;this.layoutPromotionConfig=e||null}}else this.layoutPromotionConfig=function(){var e,t;try{const n=(null!==(e=O.k.getWpoTreatmentsWithType(L._h.layoutPromotion))&&void 0!==e?e:[]).filter((e=>{var t;return"PageContentLayout"===(null===(t=null==e?void 0:e.properties)||void 0===t?void 0:t.layoutType)}));return(null==n?void 0:n.length)>0?null===(t=n[0])||void 0===t?void 0:t.properties:null}catch(e){const t="Error in getting wpo layout promotion config";(0,v.H)(y.Od5,t,`error:${e}`)}return null}();if(this.layoutPromotionConfig&&(l=(0,o.U4)(this.layoutPromotionConfig.layoutRecommended,this.layoutPromotionConfig.tmpl,this.layoutPromotionConfig.isControl,this.layoutPromotionConfig.fromLayouts,this.layoutPromotionConfig.reTargetRecommendedLayout,this.layoutPromotionConfig.selectedFeedDisplaySetting)),!l||!l.recommendedLayout)return(0,o.k4)("There is no config to promote."),i(null);return(yield this.canBePromoted(l,t,n,a,s,c))?(l.selectedFeedDisplaySetting&&l.recommendedLayout===g.nP.custom&&(this.recommendation.recommendedFeedDisplaySetting=l.selectedFeedDisplaySetting),i(this.recommendation)):i(null)}catch(e){return(0,o.$W)(y.nab,"Applying recommended layout failed",`Error:${e}`),i(null)}}))))})),this.qualifyForPromotion=!1}static getInstance(){return D.Gq.get("__EdgeNextLayoutOptimizer__",(()=>new W))}isNurturingLimitsGood(e,t,n,i,a,s){if(a&&e&&e.recommendedLayoutAppliedTs){const t=(new Date).getTime(),n=null!=s?s:r.BC.promoted;if(t-e.recommendedLayoutAppliedTs>1e3*n)return(0,o.k4)("Promote again after a long gap"),!0}if(t&&!n){const t=`recommendedLayoutAppliedTs:${e&&e.recommendedLayoutAppliedTs}`;return(0,o.k4)("Recommended layout was already applied",t),!1}return!(n&&i>=1)||((0,o.k4)("Max retargeting threshold reached"),!1)}updateLayoutPromotionUserNurturing(e,t,n){return(0,s.mG)(this,void 0,void 0,(function*(){const i=(new Date).getTime(),r=yield E.U.getPreferenceSetting(x.Xm.wpo),a=r&&r.value,s=a&&a.recommendedLayoutRetargetHistory||[];n&&s.push(i);const c=a&&a.layoutHistory||[];c.push({time:i,from:e,to:t,reTarget:n||!1});const d={recommendedLayoutAppliedTs:i,recommendedLayoutRetargetHistory:s,layoutHistory:c};yield E.U.savePreferenceSetting(x.Xm.wpo,d),(0,o.k4)("Recommended layout applied")}))}canBePromoted(e,t,n,i,r,a){var c;return(0,s.mG)(this,void 0,void 0,(function*(){const n=(0,R.N)()&&(yield(0,B.jj)());if(n&&(n.includes("msNtpExp12")||n.includes("msNtpExp13")||n.includes("msNtpExp14")))return!1;if(t||(t=yield(0,o.eD)()),t===e.recommendedLayout&&t!==g.nP.custom)return(0,o.k4)("Current layout is same as recommended layout"),!1;if(this.areFeedsDisabledByAdmin())return(0,o.k4)("No promotion since this is an enterprise content off promotion and feeds are disabled by admin settings."),!1;const{fromLayoutsArray:s,reTargetRecommendedLayout:d}=e;if(s&&-1===s.indexOf(t))return(0,o.k4)(`Current layout ${t} is not one of the fromLayouts ${s.toString()}`),!1;if(!(yield E.U.isApiAvailableToUse()))return!1;if(yield this.isLayoutSelectedByUser(e.recommendedLayout,i,a))return!1;const l=yield E.U.getPreferenceSetting(x.Xm.wpo),u=l&&l.value,p=u&&u.recommendedLayoutAppliedTs,h=u&&u.recommendedLayoutRetargetHistory&&u.recommendedLayoutRetargetHistory.length;if(!this.isNurturingLimitsGood(u,p,d,h,i,r))return!1;if(this.recommendation={recommendedLayout:e.recommendedLayout,isRevertFlight:d,shouldReTarget:d,tmpl:e.tmpl,control:e.control},this.qualifyForPromotion=!0,d){const t=(null===(c=u.layoutHistory)||void 0===c?void 0:c.length)?u.layoutHistory.pop():null;t&&(this.recommendation.recommendedLayout=t.from||e.recommendedLayout)}return this.recommendation.recommendedLayout===g.nP.custom&&e.selectedFeedDisplaySetting&&(this.recommendation.recommendedFeedDisplaySetting=e.selectedFeedDisplaySetting),!this.recommendation.control||((0,o.k4)("About to promote, but did not since this is a control flight"),!1)}))}areFeedsDisabledByAdmin(){const e=(0,u.$o)().getObject("AdminPortalSettings");if(!e)return!1;const{isOfficeContentEnabled:t,isShowCompanyAndIndustry:n}=e;return!t&&!n}isLayoutSelectedByUser(e,t,n){return(0,s.mG)(this,void 0,void 0,(function*(){if(!(yield M.L.isApiAvailableToUse())){const e="ntp.record_user_choices pref is not present in this version of EDGE; Will try to promote user";return(0,o.k4)(e),!1}const i=yield M.L.getPreferenceSetting("layout_mode");if(i&&"ntp"===i.source){if(t&&i.timestamp){const e=(new Date).getTime(),t=null!=n?n:r.BC.selected;if(e-i.timestamp>1e3*t){const e="ntp.record_user_choices pref is present and can be promoted as selected time is larger than cooldowntime";return(0,o.k4)(e),!1}}return(0,o.k4)(`Did not promote layout to ${e} since user explicitly set layout to ${i.value}`),!0}return!1}))}getWpoLayoutPromotionFromBrowser(){return(0,s.mG)(this,void 0,void 0,(function*(){if(this.qualifyForPromotion)return this.recommendation.control?null:this.recommendation;if(!(yield E.U.isApiAvailableToUse()))return null;const e=yield E.U.getPreferenceSetting(x.Xm.wpo_nx);if(e&&void 0!==e.value){const t=e.value;return this.recommendation={recommendedLayout:t.isCtrl?null:U[t.proLayout],recommendedFeedDisplaySetting:t.isCtrl?null:_[t.proContent],isRevertFlight:t.isRvert,shouldReTarget:t.isRvert,tmpl:t.tmpl,control:t.isCtrl},this.qualifyForPromotion=!0,this.recommendation}return null}))}storeWpoLayoutPromotionToBrowser(e,t,n,i,r){return(0,s.mG)(this,void 0,void 0,(function*(){if(!(yield E.U.isApiAvailableToUse()))return;const o={isRvert:e,isCtrl:t,tmpl:r,proLayout:t?null:$[n],proContent:t?null:H[i]};E.U.savePreferenceSetting(x.Xm.wpo_nx,o)}))}}const j=(0,F.h)(W);var G=n(12884),V=n(9586),q=n(65135);class z{constructor(e){this.numberOfDaysToStoreTmpl=90,this.layoutTmplDataKey=x.Xm.wpoLytTmpl,this.userNurturingManager=e}static getInstance(){return D.Gq.get("__TmplManager__",(()=>new z(E.H.getInstance())))}persistTmplValueToNurturingPref(e){return(0,s.mG)(this,void 0,void 0,(function*(){if(e){const t=yield this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=t&&t.value||[];if(this.findTmpl(n,e))return;n.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)}),yield E.U.savePreferenceSetting(this.layoutTmplDataKey,n)}}))}persistTmplValueToNurturingPrefAndStampToTelemetry(e){return(0,s.mG)(this,void 0,void 0,(function*(){if(e){const t=yield this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=t&&t.value||[];this.findTmpl(n,e)||n.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)});const i=[...new Set(n)];yield this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,i),q.M0.addOrUpdateTmplProperty(e,"1")}}))}stampExistingTmplValueToTelemetry(){return(0,s.mG)(this,void 0,void 0,(function*(){const e=yield this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),t=e&&e.value||[];if(!t.length)return;let n=!1;const i=this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl),r=t.map((e=>"string"==typeof e?(n=!0,{value:e,expiryDate:i}):e)),o=(new Date).getTime(),a=r.filter((e=>e.expiryDate>o));a.forEach((e=>{e.value&&q.M0.addOrUpdateTmplProperty(e.value,"1")})),(n||r.length!=a.length)&&(yield this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,a))}))}findTmpl(e,t){return e&&-1!=e.findIndex((e=>e===t||e&&e.value===t))}getExpirationTimestamp(e){let t;try{t=(0,V.Z)(new Date,e)}catch(n){const i=new Date;t=i.setDate(i.getDate()+e)}return t.getTime()}}const Q=(0,F.h)(z);var Z=n(62526),K=n(55755);const J="myFeed",X=(e,t,n)=>{if(e===g._9.selectedFeedPivot&&""===t&&(t=J),e===g._9.selectedFeedPivot&&""===n&&(n=J),(e!==g._9.feeds||"onscroll"!==t||"headingsonly"!==n)&&t!==n){"true"===(0,K.L)().get("mock-ntp-header")||q.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.sFk),{message:"SSR - Edge header mismatch.",pb:Object.assign(Object.assign({},y.sFk.pb),{customMessage:`key: ${e}, header: ${t}, state: ${n}`,edgeHeader:`${k.Al.EdgeNTPHeader}`})}))}};var Y=n(1584);function ee(e,t=!0){const n=function(){var e,t;try{const n=O.k.getWpoTreatmentsWithType(L._h.searchBoxCollapse),i=(null==n?void 0:n.length)>0&&(null===(t=null===(e=n[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.searchBoxCollapsibleControlConfig);if(i)return i}catch(e){const t="Error in getting wpo search box collapsible config";(0,v.H)(y.Od5,t,`error:${e}`)}return null}(),i=n&&!0===n.collapseSearchBox;q.M0.addOrUpdateTmplProperty("hidableSearchBox",i?"1":"0");let r=null;return e&&e.length&&(r=e.find((e=>"hide_search_box"===e.setting))),!i||t&&r?!!r&&!!r.value:(q.M0.addOrUpdateTmplProperty("promotedSearchBoxCollapsed",n.collapseSearchBox?"1":"0"),!!n.collapseSearchBox)}const te=()=>{window.chrome.runtime.lastError};class ne extends h.e{constructor(e,t,n,i,s,c,l){super(e,t,n,i,s,c,l),this.preferenceChangeCallbacks=[],this.marketCookieName="ntps",this.cookieExpireInDays=182,this.didLayoutModeChangeInCurrentTab=!1,this.layoutChangeInitiatorKey="lytupdtinitiator",this.QSPLayoutOverride=null,this.QSPTopSitesOverride=null,this.shouldPromoteTs2Rows=!1,this.shouldPromoteTopsitesTop=!1,this.isPageLayoutStateReady=new Promise((e=>{this.resolvePageLayoutState=e})),this.getLayoutStateFromOverrideConfig=(e,t)=>{let n;if(e&&e!==g.nP.custom){const i=g.Wi[e];n={currentBackgroundImageType:i.current_background_image_type,originalLayout:t.currentLayout,currentLayout:e,greetingEnabled:i.greeting,imageOfTheDayEnabled:i.current_background_image_type!==g.HX.off,quickLinksEnabled:i.quick_links,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:i.feeds_position}}else n=Object.assign(Object.assign({},t),{originalLayout:t.currentLayout,currentLayout:g.nP.custom});return n},this.settingsAPI="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate,this._authPrivateApi="undefined"!=typeof window&&window&&window.chrome&&window.chrome.authPrivate,this.ntpApiHandle="undefined"!=typeof window&&window&&window.chrome&&window.chrome.embeddedSearch&&window.chrome.embeddedSearch.newTabPage,this.chromiumBackgroundPrefType=r.h0.BOOLEAN,this.registerOnConfigDataChangedCallback(),this.registerOnPrefsChangeCallback(),this.checkPromoteTopsites2Rows().then((e=>{this.shouldPromoteTs2Rows=e&&!0!==this.config.enableTopSitesMiddleOption})),this.checkPromoteTopsitesTop().then((e=>{this.shouldPromoteTopsitesTop=e})),this.edgeChromiumStorageProvider=new p,a.V.updateLocalStorage.registerObserver((e=>{const t=e.params[0];this.edgeChromiumStorageProvider.saveProperty(d.StructuredDataCardsUserPreference,function(e){return{bsk:{v:e.bingShoppingVisible?1:0,p:null},wsk:{v:e.weatherVisible?1:0,p:null},ssk:{v:e.sportsVisible?1:0,p:null},msk:{v:e.moneyVisible?1:0,p:null},hsk:{v:e.horoscopeVisible?1:0,p:null},osk:{v:e.onThisDayVisible?1:0,p:null},esk:{v:e.electionsVisible?1:0,p:null},essk:{v:e.esportsVisible?1:0,p:null},lsk:{v:e.lotteryVisible?1:0,p:null},qsk:{v:e.qnaVisible?1:0,p:null},rsk:{v:e.qnaVisible?1:0,p:null},amsk:{v:e.autosMarketplaceVisible?1:0,p:null},bhsk:{v:e.healthCardVisible?1:0,p:null}}}(t))})),a.V.marketUpdated.registerObserver((e=>{const t=e.params[0];if(t&&""!==t)try{this.updateMarketandRefresh(t)}catch(e){(0,v.OO)(e,y.sMt,"Failed to change the market, cookie doesn't drop from PCS")}})),this.getInitialState().then((e=>{a.V.loadLocalStorage.getActionSender(this).send(e)})),this.QSPLayoutOverride=T.c.getQueryParameterByName("setNTPLayout",(0,G.zp)()),this.QSPTopSitesOverride=T.c.getQueryParameterByName("setNTPTopSites",(0,G.zp)()),this.getPageLayoutStateAsync().then((e=>{var t;if(this.config&&this.config.promoFormParamList){const t=new URLSearchParams((0,G.zp)()).get("form");if(t){if(this.config.promoFormParamList.includes(t.toUpperCase())&&"always"!==e.selectedFeedDisplaySetting){const t=Object.assign(Object.assign(Object.assign({},e),{originalLayout:e.currentLayout}),g.YZ);this.updateLayout(t),e=Object.assign({},t),q.M0.addOrUpdateTmplProperty("formRecommendedLayout",e.currentLayout),q.M0.addOrUpdateTmplProperty("formRecommendedDisplay",e.selectedFeedDisplaySetting)}}}if(this.shouldPromoteTopsitesTop&&(this.saveTopSitesPromotionNurturing(e.selectedQuickLinksDisplaySetting,g.Z3.top),e.selectedQuickLinksDisplaySetting=g.Z3.top,a.V.updateWPOTopsitesPromotion.getActionSender(this).send(!0)),this.shouldPromoteTs2Rows&&(e.selectedQuickLinksDisplaySetting=g.Z3.tworows,this.executeSettingsChange(g._9.quickLinksDisplaySetting,g.VE[e.selectedQuickLinksDisplaySetting]),q.M0.addOrUpdateTmplProperty("ts2Rows","wpo")),window.isSSREnabled&&!(null===(t=this.config.layoutPromotion)||void 0===t?void 0:t.enbWpoPromotionFromPSL))return e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),void this.resolvePageLayoutState();this.applyWpoLayoutPromotion(e)})),this.getPrimaryAccountInfoAsync().then((e=>{a.V.updatePrimaryAccountInfo.getActionSender(this).send(e)})),this.getConfigDataAsync().then((e=>{a.V.updateConfigData.getActionSender(this).send(e)})),this.ntpApiHandle&&(this.ntpApiHandle.onthemechange=()=>{const e=this.ntpApiHandle.ntpTheme;a.V.updateNtpTheme.getActionSender(this).send(e),e||(0,o.$W)(y.BFw,"Missing theme information detected on theme change.",`ntpTheme: ${e}`)})}updateStateOnce(e){a.V.pageLayoutStateLoaded.getActionSender(this).send(e)}applyWpoLayoutPromotion(e){var t;(null===(t=this.config.layoutPromotion)||void 0===t?void 0:t.enbWpoPromotionFromPSL)?j.getWpoLayoutPromotionFromBrowser().then((t=>{const n=()=>{if((0,R.N)()){const e=this.getCurrentState();j.getRecommendedLayout(this.config,e.currentLayout,e.selectedFeedDisplaySetting).then((e=>{e?j.storeWpoLayoutPromotionToBrowser(e.isRevertFlight,e.control,e.recommendedLayout,e.recommendedFeedDisplaySetting,e.tmpl):E.U.savePreferenceSetting(x.Xm.wpo_nx,null)}))}};this.layoutPromotionFollowUp(e,t),n(),window.addEventListener("beforeunload",n,{once:!0})})):j.getRecommendedLayout(this.config,e.currentLayout,e.selectedFeedDisplaySetting).then((t=>{this.layoutPromotionFollowUp(e,t)}))}layoutPromotionFollowUp(e,t){var n,i;let o=(null===(n=this.config.layoutPromotion)||void 0===n?void 0:n.enbWpoPromotionFromPSL)?"psl":"ls";if(o+=(null==t?void 0:t.recommendedLayout)?"1":"0",q.M0.addOrUpdateTmplProperty("lpfut",o),((null===(i=this.config.layoutPromotion)||void 0===i?void 0:i.forceRegisterLayoutPromotionCoachMark)||t&&!t.isRevertFlight)&&a.V.updateWPOLayoutPromotion.getActionSender(this).send(!0),t&&t.tmpl&&Q.persistTmplValueToNurturingPref(t.tmpl),t){const{recommendedLayout:n,recommendedFeedDisplaySetting:i,shouldReTarget:o}=t;if(n){const t=k.Al.IsPrerender?r.WT.wpoPrerenderTab:r.WT.wpoVisibleTab,a=this.getLayoutStateFromOverrideConfig(n,e),s=e.currentLayout;this.wpoPromoteNewLayout(a,t),i&&this.wpoPromoteNewFeedDisplaySetting(i,e.selectedFeedDisplaySetting),(0,u.$o)().setObject("previousLayoutState",{currentLayout:e.currentLayout,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting,currentBackgroundImageType:e.currentBackgroundImageType,greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,quickLinksEnabled:e.quickLinksEnabled,hideDefaultTopSites:e.hideDefaultTopSites});const c=i||a.selectedFeedDisplaySetting;e=Object.assign(Object.assign({},e),{currentLayout:n,selectedFeedDisplaySetting:c,currentBackgroundImageType:a.currentBackgroundImageType,greetingEnabled:a.greetingEnabled,imageOfTheDayEnabled:a.imageOfTheDayEnabled,quickLinksEnabled:a.quickLinksEnabled,hideDefaultTopSites:a.hideDefaultTopSites}),q.M0.addOrUpdateTmplProperty("recommendedLayout",n),q.M0.addOrUpdateTmplProperty("recommendedDisplay",c),j.updateLayoutPromotionUserNurturing(s,n,o)}}(0,R.N)()&&Q.stampExistingTmplValueToTelemetry(),e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),this.resolvePageLayoutState()}updateMarketandRefresh(e){return(0,s.mG)(this,void 0,void 0,(function*(){(0,w.sq)(this.marketCookieName,void 0,-1),(0,w.sq)(this.marketCookieName,void 0,-1,void 0,"/edge");const t=JSON.stringify({m:e});(0,w.sq)(this.marketCookieName,t,this.cookieExpireInDays,P.jG.HostPage.topDomain,"/"),yield M.L.savePreferenceSetting(this.marketCookieName,{setting:this.marketCookieName,source:"ntp",timestamp:(new Date).getTime(),value:t}),q.M0.addOrUpdateTmplProperty("marketSetToExplicitSelection","1");const n=`/${P.jG.CurrentMarket}/`;if(!location.pathname.startsWith(n))return void(0,C.Z)();const i=new URL(location.href);i.pathname=i.pathname.replace(n,`/${e}/`),(0,C.Z)({newUrl:i.href})}))}checkAuthApiIsAvailable(){return!!(window&&window.chrome&&window.chrome.authPrivate)&&!!window.chrome.authPrivate.startEdgeSignIn}getPrimaryAccountInfoAsync(e=!0){return new Promise((t=>{const n=this.getCurrentState();e&&n.primaryAccountInfo?t(n.primaryAccountInfo):this._authPrivateApi&&this._authPrivateApi.getPrimaryAccountInfo?this._authPrivateApi.getPrimaryAccountInfo((e=>{if(e){const n={accountId:e[r.r2.accountId],accountType:e[r.r2.accountType],firstName:e[r.r2.firstName],lastName:e[r.r2.lastName],email:e[r.r2.email]};t(n)}else q.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.bKp),{message:"Failed to get response from Chromium API.",pb:Object.assign({},y.bKp.pb)})),t({})})):(S.k.logError("Failed to get auth private api data from Chromium API."),t({}))}))}getConfigDataAsync(){return(0,s.mG)(this,void 0,void 0,(function*(){const e=this.getCurrentState();return e.configData?e.configData:(0,o._u)()}))}getPageSettingsStateAsync(){const e=this.getCurrentState(),t=this.config&&this.config.forceDisableContent;if(k.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,R.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted){const n=Object.assign({},e,window.ssrLayoutState);return t&&this.setContentDisabled(n),Promise.resolve(n)}return t&&this.setContentDisabled(e),new Promise(((n,i)=>this.settingsAPI?e.isLoadCompleted?(t&&!e&&this.setContentDisabled(e),n(e)):void a.V.pageLayoutStateLoaded.registerObserver((e=>{const r=e&&e.params;if(!r||r.length<1)return i("Load action didn't send any params");const o=r[0];return t&&!o&&this.setContentDisabled(o),o?n(o):i("Chromium Load action params type does not match with expected state type")})):n(e)))}getThemeTextColor(){let e=null;const t=this.getThemeLayoutColor();if(t){const n={r:t[0],g:t[1],b:t[2],a:t[3]};e=b.g.rgbNumberToCssHexColor(b.g.parsedColorToNumber(n))}return e}getThemeLayoutColor(){const e=this.getCurrentState(),t=e.ntpTheme;if(e.currentBackgroundImageType!==g.HX.theme||!t||t.imageUrl||t.usingDefaultTheme||!t.backgroundColorRgba)return null;if(t&&!t.usingDefaultTheme){if(t&&t.isNtpBackgroundDark&&t.textColorRgba&&t.textColorRgba.length>3)return t.textColorRgba;if(t&&!t.isNtpBackgroundDark&&t.textColorLightRgba&&t.textColorLightRgba.length>3)return t.textColorLightRgba}return null}getLayoutStateAsync(){return this.getPageSettingsStateAsync()}addSettingChangeListener(e){this.preferenceChangeCallbacks.push(e)}updateLayout(e,t=r.WT.user,n=!0){var i;if(!(0,R.N)()||!this.settingsAPI||this.config&&this.config.forceDisableContent)return;if(k.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,R.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted){const i=D.Gq.get("__hydrationPromise__");if(i)return void i.getResultAsync().then((()=>{this.updateLayout(e,t,n)}))}const o=this.getCurrentState();t!==r.WT.user&&"off"===e.selectedFeedDisplaySetting&&"off"!==o.selectedFeedDisplaySetting&&q.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.MRy),{message:`Feed layout is set to content-off by initiator: ${t}`,pb:Object.assign({},y.MRy.pb)}));let a=g.$B[o.selectedQuickLinksDisplaySetting];e.selectedQuickLinksDisplaySetting&&(a=g.$B[e.selectedQuickLinksDisplaySetting]),this.didLayoutModeChangeInCurrentTab=!0,(0,u.$o)().setObject(this.layoutChangeInitiatorKey,t);T.c.getQueryParameterByName("isFREModalBackground",(0,G.zp)())?q.M0.addOrUpdateTmplString("FREModalBackgroundLayoutNotSaved:1"):((0,B.LC)(t===r.WT.user?x.st.User:x.st.Wpo,"layout",g.Uq[null!==(i=e.originalLayout)&&void 0!==i?i:e.currentLayout],g.Uq[e.currentLayout],(new Date).getTime()),n?this.executeSettingsChange(g._9.layout,g.Uq[e.currentLayout]):this.settingsAPI.setPref(g._9.layout,g.Uq[e.currentLayout],te)),e.isContentFeedManagedByAdminPortal&&this.updateContentFeedAdminPortalSetting(!0),a?this.settingsAPI.setPref(g._9.quickLinksDisplaySetting,a,te):this.settingsAPI.setPref(g._9.quickLinks,e.quickLinksEnabled,te),this.settingsAPI.setPref(g._9.hideDefaultTopSites,e.hideDefaultTopSites,te),this.settingsAPI.setPref(g._9.imageOfTheDay,e.imageOfTheDayEnabled,te),this.settingsAPI.setPref(g._9.currentBackgroundImageType,e.imageOfTheDayEnabled?g.HX.imageAndVideo:g.HX.off,te),this.settingsAPI.setPref(g._9.greeting,e.greetingEnabled,te),this.settingsAPI.setPref(g._9.feeds,e.selectedFeedDisplaySetting,te),void 0!==e.selectedFeedPivot&&this.settingsAPI.setPref(g._9.selectedFeedPivot,e.selectedFeedPivot,te)}updateQuickLinks(e){const t=this.getCurrentState();if(t&&t.selectedQuickLinksDisplaySetting){const t=e?g.VE.onerow:g.VE.off;this.executeSettingsChange(g._9.quickLinksDisplaySetting,t)}else this.executeSettingsChange(g._9.quickLinks,e)}updateQuickLinksDisplayOption(e,t=!1){this.QSPTopSitesOverride=null;const n=this.getCurrentState();n&&n.configData&&n.configData.enabledFeatures&&(n.configData.enabledFeatures.includes(r.dK)||n.configData.enabledFeatures.includes(r.vs))&&(this.executeSettingsChange(g._9.quickLinksDisplaySetting,g.VE[e]),M.L.savePreferenceSetting(x.nc.tscollapsed,{setting:x.nc.tscollapsed,source:r.lx,timestamp:(new Date).getTime(),value:0}),t?e===g.Z3.off&&E.U.savePreferenceSetting(r.lx,{selectedQuickLinksDisplaySetting:n.selectedQuickLinksDisplaySetting,quickLinkSettingsChanged:!1}):E.U.getPreferenceSetting(r.lx).then((e=>{const t=null==e?void 0:e.value;t&&E.U.savePreferenceSetting(r.lx,Object.assign(Object.assign({},t),{quickLinkSettingsChanged:!0}))}))),this.shouldPromoteTopsitesTop&&n.selectedQuickLinksDisplaySetting===g.Z3.top&&e===g.Z3.onerow&&this.updateUIForSettingsChange(g._9.quickLinksDisplaySetting,g.VE[e])}updateHideDefaultLinksOption(e){this.executeSettingsChange(g._9.hideDefaultTopSites,e)}updateBackgroundImageType(e){this.executeSettingsChange(g._9.currentBackgroundImageType,e),this.executeSettingsChange(g._9.imageOfTheDay,e!==g.HX.off)}updateTopSitesQuickLinkEndMarginUsedPadding(e){a.V.updateTopSitesQuickLinkEndMarginUsedPadding.getActionSender(this).send(e)}updateGreeting(e){this.executeSettingsChange(g._9.greeting,e)}updateFeeds(e,t,n=x.st.User){(0,B.LC)(n,"feeds",g.gp[t],g.gp[e],(new Date).getTime()),n!==x.st.User&&"off"===e&&"off"!==t&&q.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.MRy),{message:`Feed is set to off by initiator: ${n}`,pb:Object.assign({},y.MRy.pb)})),this.executeSettingsChange(g._9.feeds,e)}updateOfficeLeftRail(e){(0,u.$o)().setItem(A.JJ,e.toString())}officeLeftRailEnabled(){return(0,u.$o)().getObject(A.JJ,!1)}isContentFeedManagedByAdminPortal(){return(0,u.$o)().getObject("isContentFeedManagedByAdminPortal",!1)}updateContentFeedAdminPortalSetting(e){(0,u.$o)().setItem("isContentFeedManagedByAdminPortal",e.toString())}updatePageSetting(e,t){(0,u.$o)().setItem(e,t.toString())}isPageSettingEnabled(e,t){return(0,u.$o)().getObject(e,t)}executeSettingsChange(e,t){this.settingsAPI&&this.settingsAPI.setPref&&this.settingsAPI.setPref(e,t,te)}getInitialState(){return(0,s.mG)(this,void 0,void 0,(function*(){this.edgeChromiumStorageProvider.loadSynchronizedSettingsFromStorage();const e=this.edgeChromiumStorageProvider.fetchProperty(d.StructuredDataCardsUserPreference)||{};if(e){return{weatherVisible:!e.wsk||!!e.wsk.v,sportsVisible:!e.ssk||!!e.ssk.v,moneyVisible:!e.msk||!!e.msk.v,bingShoppingVisible:!e.bsk||!!e.bsk.v,horoscopeVisible:!e.hsk||!!e.hsk.v,onThisDayVisible:!e.osk||!!e.osk.v,electionsVisible:!e.esk||!!e.esk.v,esportsVisible:!e.essk||!!e.essk.v,lotteryVisible:!e.lsk||!!e.lsk.v,qnaVisible:!e.qsk||!!e.qsk.v,recipesVisible:!e.rsk||!!e.rsk.v,autosMarketplaceVisible:!e.amsk||!!e.amsk.v,healthCardVisible:!e.bhsk||!!e.bhsk.v}}return null}))}getPageLayoutStateAsync(){const e=this.getCurrentState();return new Promise((t=>{this.ntpApiHandle&&(e.ntpTheme=this.ntpApiHandle.ntpTheme);const n=e;if(this.settingsAPI){let i,a=!1;window.chrome.ntpSettingsPrivate.getAllPrefs((c=>(0,s.mG)(this,void 0,void 0,(function*(){var s,d,l,u,p,h;if(void 0!==c){i=this.defineChromiumKeys(c),(0,Z.A)(i),n.currentLayout=null!==(s=this.QSPLayoutOverride)&&void 0!==s?s:g.F5[i[g._9.layout]],k.Al.SelectedFeedPivot=i[g._9.selectedFeedPivot];const m=new URLSearchParams(location.search);m.has("feedPivot")&&(k.Al.SelectedFeedPivot=m.get("feedPivot"));const f=i[g._9.gamerModeEnabled];if(void 0!==f){const e=this.getGroupPolicy(c,g._9.gamerModeEnabled);I.X.UpsellGamerMode=!1===f&&!("USER_POLICY"===e.controlledBy&&"ENFORCED"===e.enforcement)}else I.X.UpsellGamerMode=!1;n.prefDerivedBrowserFeatures={isCustomBackgroundImageFeatureFlightOn:g._9.customBackgroundImageInfo in i};const v=g._9.currentBackgroundImageType in i,S=g._9.imageOfTheDay in i;let C;if(v&&!this.config.disableBackgroundGallery&&!P.jG.IsFrePage){const e=i[g._9.userNurturingUpdated];C=(0,o.F0)(e)}if(v&&S){this.chromiumBackgroundPrefType=r.h0.BOOLEAN_AND_STRING_ENUM;const t=i[g._9.imageOfTheDay],o=i[g._9.currentBackgroundImageType];t||o===g.HX.off||o===g.HX.theme?t&&o===g.HX.off?(n.currentBackgroundImageType=g.HX.imageAndVideo,a=!0):i[g._9.currentBackgroundImageType]===g.HX.custom&&i[g._9.customBackgroundImageInfo]&&!i[g._9.customBackgroundImageInfo].has_image||i[g._9.currentBackgroundImageType]===g.HX.theme&&e.ntpTheme&&e.ntpTheme.usingDefaultTheme?n.currentBackgroundImageType=g.HX.imageAndVideo:n.currentBackgroundImageType=i[g._9.currentBackgroundImageType]:(n.currentBackgroundImageType=g.HX.off,a=!0)}else if(S){this.chromiumBackgroundPrefType=r.h0.BOOLEAN;const e=i[g._9.imageOfTheDay];n.currentBackgroundImageType=e?g.HX.imageAndVideo:g.HX.off}else v&&(this.chromiumBackgroundPrefType=r.h0.STRING_ENUM,n.currentBackgroundImageType=i[g._9.currentBackgroundImageType]);if(v&&g._9.customBackgroundImageInfo in i){const e=i[g._9.customBackgroundImageInfo],t={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};n.customBackgroundImageInfo=t}let b;const w=i[g._9.currentBackgroundImageType];w!==g.HX.off&&C&&C.backgroundSelectionMetadata&&(b=(0,o.VT)(C.backgroundSelectionMetadata)),!C||C.backgroundSelectionMetadata||C.changeBackgroundDaily||(0,o.$W)(y.LxB,"Rotate Image daily is off with no selection in the gallery cache",`Current background image type (pref): ${i[g._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(C)}, current layout: ${g.F5[i[g._9.layout]]}`);const A=i[g._9.customBackgroundImageInfo];if((0,o.HG)(w,null==C?void 0:C.backgroundSelectionMetadata)&&(0,o.zJ)(y.DnN,"Preference for current background image type and gallery selection do not match.",`Current background image type (pref): ${i[g._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(C)}`,A,e.ntpTheme,g.F5[i[g._9.layout]]),C&&w===g.HX.custom&&!A)(0,o.zJ)(y.qP4,"Current BackgroundImageType is custom and custom background information is missing.",`Current background image type (pref): ${i[g._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(C)}`,A,e.ntpTheme,g.F5[i[g._9.layout]]);else if(C&&w===g.HX.custom&&A&&!A.has_image){(0,o.zJ)(y.qP4,"Current BackgroundImageType is custom and has image flag is false.",`Current background image type (pref): ${i[g._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(C)}`,A,e.ntpTheme,g.F5[i[g._9.layout]]);const t=(0,o.tv)(C),r=t>=0?g.HX.imageAndVideo:g.HX.bing;n.currentBackgroundImageType=r,C.changeBackgroundDaily||"BrowserLocal"!==(null===(d=null==C?void 0:C.backgroundSelectionMetadata)||void 0===d?void 0:d.provider)||(0,o.zb)(C,t)}if(C&&w===g.HX.theme&&!e.ntpTheme)(0,o.zJ)(y.BFw,"Current Background Image type is theme and theme information is missing",`Current background image type (pref): ${i[g._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(C)}`,A,e.ntpTheme,g.F5[i[g._9.layout]]);else if(C&&w===g.HX.theme&&e.ntpTheme&&e.ntpTheme.usingDefaultTheme){(0,o.zJ)(y.Ibk,"Current Background Image type is theme and theme is default. Switching to background in rotation in cache.",`Current background image type (pref): ${i[g._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(C)}`,A,e.ntpTheme,g.F5[i[g._9.layout]]);const t=(0,o.tv)(C),r=t>=0?g.HX.imageAndVideo:g.HX.bing;n.currentBackgroundImageType=r,"Theme"===(null===(l=null==C?void 0:C.backgroundSelectionMetadata)||void 0===l?void 0:l.provider)&&(0,o.zb)(C,t)}n.currentBackgroundImageType===g.HX.theme&&(0,o.oB)(n)?(0,o.$W)(y.KY$,"RGB Theme background detected",`Current theme info: ${JSON.stringify(e.ntpTheme)}`):n.currentBackgroundImageType===g.HX.theme&&(0,o.BA)(n)&&(0,o.$W)(y.qkz,"Bundled Theme background detected",`Current theme info: ${JSON.stringify(e.ntpTheme)}`);const E=null!==(u=this.QSPTopSitesOverride)&&void 0!==u?u:g._U[i[g._9.quickLinksDisplaySetting]];if(n.ntpPrefOptionApiAvailability=!!E,n.currentLayout!==g.nP.custom)n.quickLinksEnabled=E?E!==g.Z3.off:g.Wi[n.currentLayout].quick_links,n.selectedQuickLinksDisplaySetting=E,n.currentBackgroundImageType=g.Wi[n.currentLayout].current_background_image_type,n.selectedFeedDisplaySetting=g.Wi[n.currentLayout].feeds_position,n.hideDefaultTopSites=g.Wi[n.currentLayout].hide_promoted_links;else{n.quickLinksEnabled=E?E!==g.Z3.off:i[g._9.quickLinks],n.selectedQuickLinksDisplaySetting=E,n.greetingEnabled=i[g._9.greeting];const e=i[g._9.feeds];n.selectedFeedDisplaySetting=e,n.hideDefaultTopSites=i[g._9.hideDefaultTopSites]}let M=!1;const O=this.getGroupPolicy(c,g._9.feeds);if((O.isEnabled&&"ENFORCED"===O.enforcement||this.isContentFeedManagedByAdminPortal())&&(n.isContentFeedManagedByPolicy=!0,M=!0,n.currentLayout!==g.nP.custom&&(n.selectedFeedDisplaySetting=i[g._9.feeds])),g._9.quickLinksDisplaySetting in i){const e=this.getGroupPolicy(c,g._9.quickLinksDisplaySetting);e.isEnabled&&"ENFORCED"===e.enforcement&&(n.isQuickLinksManagedByPolicy=!0,M=!0,n.currentLayout!==g.nP.custom&&(n.selectedQuickLinksDisplaySetting=E,n.quickLinksEnabled=E!==g.Z3.off))}if(g._9.defaultBrowserSettingEnabled in i){const e=this.getGroupPolicy(c,g._9.defaultBrowserSettingEnabled);n.defaultBrowserSettingPolicyEnforced="ENFORCED"===e.enforcement}if(g._9.backgroundImageTypePolicy in i){const e=this.getGroupPolicy(c,g._9.backgroundImageTypePolicy);n.backgroundImageTypePolicy=i[g._9.backgroundImageTypePolicy],"ENFORCED"!=e.enforcement&&(n.backgroundImageTypePolicy=g.gZ.allowAll),n.backgroundImageTypePolicy===g.gZ.disableAll&&n.currentBackgroundImageType!==g.HX.off?(n.currentBackgroundImageType=g.HX.off,a=!0):n.backgroundImageTypePolicy!==g.gZ.disableImageOfTheDay||n.currentBackgroundImageType!==g.HX.imageAndVideo&&n.currentBackgroundImageType!==g.HX.bing?n.backgroundImageTypePolicy===g.gZ.disableCustomImage&&n.currentBackgroundImageType===g.HX.custom&&(n.currentBackgroundImageType=g.HX.imageAndVideo,a=!0):(n.currentBackgroundImageType=g.HX.off,a=!0),M=M||n.backgroundImageTypePolicy!==g.gZ.allowAll}if(M&&n.currentLayout!==g.nP.custom&&(n.currentLayout=g.nP.custom,this.overrideLayoutPreferenceForPolicy()),n.imageOfTheDayEnabled=n.currentBackgroundImageType!==g.HX.off,n.currentBackgroundImageType===g.HX.theme&&e.ntpTheme){const t=e.ntpTheme;t.imageUrl||t.backgroundColorRgba||(n.imageOfTheDayEnabled=!1),!t.usingDefaultTheme&&t.isNtpBackgroundDark?n.isNtpThemeBackgroundDark=!0:n.isNtpThemeBackgroundDark=!1}if(a&&this.migrateBackgroundPreference(n.currentBackgroundImageType),n.openSettingsDialogFlyout=i[g._9.showSettings],n.market=k.Al.Locale,n.isAppLauncherEnabledByPolicy=i[g._9.showAppLauncher],n.isCodexBingUpsellEnabledByPolicy=i[g._9.codexBingUpsellEnabled],n.isCompanyLogoEnabledByPolicy=void 0===i[g._9.companyLogoEnabled]||i[g._9.companyLogoEnabled],g._9.verticalTabsCollapsed in i&&(n.verticalTabsCollapsed=i[g._9.verticalTabsCollapsed]),g._9.verticalTabsOpened in i&&(n.verticalTabsOpened=i[g._9.verticalTabsOpened]),g._9.hideDefaultTopSites in i){n.hideDefaultTopSites=i[g._9.hideDefaultTopSites];const e=this.getGroupPolicy(c,g._9.hideDefaultTopSites);e.isEnabled&&"ENFORCED"===e.enforcement&&(n.hideDefaultTopSitesManagedByPolicy=!0)}if("onscroll"===n.selectedFeedDisplaySetting&&(n.selectedFeedDisplaySetting="headingsonly",setTimeout((()=>{const e=window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.setPref(g._9.feeds,n.selectedFeedDisplaySetting,(()=>{}))}))),this.config.dailyDiscoveryInSearchBox){const e=i[g._9.userChoices],t=null==e?void 0:e.find((e=>e.setting===x.nc.daily_discovery_in_search_box));n.dailyDiscoveryInSearchBoxEnabled=!t||t.value}if(this.config.enableMarqueeAd){const e=i[g._9.userChoices];if(e&&e.length){const t=e.find((e=>e.setting===x.nc.enable_sponsored_content));n.sponsoredContentEnabled=!t||t.value}}T.c.getQueryParameterByName("isFREModalBackground",(0,G.zp)())&&(n.selectedFeedDisplaySetting="headingsonly",q.M0.addOrUpdateTmplString("FREModalBackgroundLoaded:1"));const L=T.c.getQueryParameterByName("feedDisplay",(0,G.zp)());if(L&&["always","peek","headingsonly","onscroll","off"].indexOf(L)>-1&&(n.selectedFeedDisplaySetting=L,q.M0.addOrUpdateTmplString("feedDisplay:1")),this.config.onScrollDownButtonFlight&&"headingsonly"===n.selectedFeedDisplaySetting){const e=i[g._9.userChoices],t=null==e?void 0:e.find((e=>e.setting===x.nc.dismiss_scroll_down_button));t&&(n.isScrollDownButtonDismissed=!!t.value)}if((0,R.N)()&&!window.isSSREnabled&&this.config&&this.config.promotedHidableSearchBox){const e=i[g._9.userChoices];if("always"===n.selectedFeedDisplaySetting&&"off"!==n.selectedQuickLinksDisplaySetting&&"top"!==n.selectedQuickLinksDisplaySetting&&!(0,Y.r4)(e,this.config.enableTopsitesTopWithWPO)){const t=ee(e,!(null===(p=this.config)||void 0===p?void 0:p.scrollToHideSearchBox));this.config&&(this.config.hidableSearchBox||this.config.scrollToHideSearchBox)&&(n.hideSearchBox=t)}}const D=window.location&&(null===(h=window.location.search)||void 0===h?void 0:h.includes("mock-ntp-header=1"));(0,R.N)()||D||(e=>{const t=k.Al.EdgeNTPHeader;t&&(X(g._9.selectedFeedPivot,t.selectedFeedPivot,e.selectedFeedPivot||J),X(g._9.quickLinksDisplaySetting,g._U[t.quickLinkOption],e.selectedQuickLinksDisplaySetting),X(g._9.backgroundImageTypePolicy,g.MT[t.backgroundImageTypePolicy],g.MT[e.backgroundImageTypePolicy]),X(g._9.layout,g.F5[t.layoutMode],e.currentLayout),X(g._9.feeds,t.newsFeedDisplay,e.selectedFeedDisplaySetting))})(n),!this.config.enableTopSitesMiddleOption||n.selectedQuickLinksDisplaySetting!==g.Z3.onerow&&n.selectedQuickLinksDisplaySetting!==g.Z3.tworows||(n.selectedQuickLinksDisplaySetting="always"===n.selectedFeedDisplaySetting?g.Z3.onerow:g.Z3.tworows),t(n),(0,R.N)()||q.M0.addOrUpdateTmplProperty("ssrChromiumSettingLayout",n.selectedFeedDisplaySetting)}else S.k.logError("Failed to get saved layout preferences."),t(e)}))))}else t(e)}))}registerOnConfigDataChangedCallback(){this.settingsAPI&&this.settingsAPI.onConfigDataChanged&&this.settingsAPI.onConfigDataChanged.addListener((e=>{if(e){const t=e[r.lA.inPageSearchBoxType];t!==r.HT.redirect&&t!==r.HT.bing||a.V.updateConfigDataChanged.getActionSender(this).send(t)}}))}registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged&&this.settingsAPI.onPrefsChanged.addListener((e=>{if(!this.didLayoutModeChangeInCurrentTab){const e=(0,u.$o)().getObject(this.layoutChangeInitiatorKey);if(e===r.WT.wpoPrerenderTab||e===r.WT.ntpVisibleTab)return}const t=e[0];if(window.isSSREnabled&&t.key===g._9.userChoices){const e=t.value;if(e.sort(((e,t)=>t.timestamp-e.timestamp)),e[0].setting===x.nc.tscollapsed&&"wpo"===e[0].source)return}this.updateUIForSettingsChange(t.key,t.value,e)}))}updateUIForSettingsChange(e,t,n){return(0,s.mG)(this,void 0,void 0,(function*(){const i=yield this.getPageSettingsStateAsync(),o=Object.assign({},i);if(e===g._9.backgroundImageTypePolicy&&(0,C.Z)(),e===g._9.feeds){const t=this.getGroupPolicy(n,e);t.isEnabled&&"ENFORCED"===t.enforcement||this.isContentFeedManagedByAdminPortal()?o.isContentFeedManagedByPolicy=!0:o.isContentFeedManagedByPolicy=!1}if(e===g._9.layout){const e=g.F5[t];if(o.currentLayout=e,t!==g.Uq.custom&&(o.quickLinksEnabled=g.Wi[e].quick_links,o.hideDefaultTopSites=!!o.hideDefaultTopSitesManagedByPolicy||g.Wi[e].hide_promoted_links,o.currentBackgroundImageType=g.Wi[e].current_background_image_type,o.selectedFeedDisplaySetting=g.Wi[e].feeds_position,o.selectedQuickLinksDisplaySetting=i.selectedQuickLinksDisplaySetting,(yield this.checkPromoteTopsites2Rows())&&(o.selectedQuickLinksDisplaySetting=g.Z3.tworows,this.executeSettingsChange(g._9.quickLinksDisplaySetting,g.VE[o.selectedQuickLinksDisplaySetting]),q.M0.addOrUpdateTmplProperty("ts2Rows","wpo")),(yield this.checkPromoteTopsitesTop(o))&&(o.selectedQuickLinksDisplaySetting=g.Z3.top,a.V.updateWPOTopsitesPromotion.getActionSender(this).send(!0)),o.imageOfTheDayEnabled=o.currentBackgroundImageType!==g.HX.off),!this.config.enableTopSitesMiddleOption||o.selectedQuickLinksDisplaySetting!==g.Z3.onerow&&o.selectedQuickLinksDisplaySetting!==g.Z3.tworows||(o.selectedQuickLinksDisplaySetting="always"===o.selectedFeedDisplaySetting?g.Z3.onerow:g.Z3.tworows),"visible"===document.visibilityState&&n)for(const e of this.preferenceChangeCallbacks)e(n,o)}else{switch(e){case g._9.quickLinks:o.quickLinksEnabled=t;break;case g._9.hideDefaultTopSites:{const e=this.getGroupPolicy(n,g._9.hideDefaultTopSites),i=e.isEnabled&&"ENFORCED"===e.enforcement;o.hideDefaultTopSites=t,o.hideDefaultTopSitesManagedByPolicy=i;break}case g._9.quickLinksDisplaySetting:o.selectedQuickLinksDisplaySetting=g._U[t],o.quickLinksEnabled=g._U[t]!==g.Z3.off;break;case g._9.imageOfTheDay:this.chromiumBackgroundPrefType===r.h0.BOOLEAN&&(o.currentBackgroundImageType=t?g.HX.imageAndVideo:g.HX.off,o.imageOfTheDayEnabled=o.currentBackgroundImageType!==g.HX.off);break;case g._9.currentBackgroundImageType:if(o.currentBackgroundImageType=t,o.imageOfTheDayEnabled=o.currentBackgroundImageType!==g.HX.off,o.isNtpThemeBackgroundDark=void 0,o.currentBackgroundImageType===g.HX.theme&&i.ntpTheme){const e=i.ntpTheme;e.imageUrl||e.backgroundColorRgba||(o.imageOfTheDayEnabled=!1),!e.usingDefaultTheme&&e.isNtpBackgroundDark?o.isNtpThemeBackgroundDark=!0:o.isNtpThemeBackgroundDark=!1}break;case g._9.customBackgroundImageInfo:{const e=t,n={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};o.customBackgroundImageInfo=n;break}case g._9.feeds:o.selectedFeedDisplaySetting=t;break;case g._9.greeting:o.greetingEnabled=t;break;case g._9.showSettings:o.openSettingsDialogFlyout=t;break;case g._9.showAppLauncher:o.isAppLauncherEnabledByPolicy=t}if("visible"===document.visibilityState&&n)for(const e of this.preferenceChangeCallbacks)e(n,o)}if(e===g._9.verticalTabsCollapsed&&(o.verticalTabsCollapsed=t),e===g._9.verticalTabsOpened&&(o.verticalTabsOpened=t),e===g._9.userChoices&&this.config.hidableSearchBox){const e=t.find((e=>"hide_search_box"===e.setting));e&&(o.hideSearchBox=!!e.value)}if(e===g._9.userChoices&&this.config.dailyDiscoveryInSearchBox){const e=t.find((e=>e.setting===x.nc.daily_discovery_in_search_box));e&&(o.dailyDiscoveryInSearchBoxEnabled=!!e.value)}if(e===g._9.userChoices&&this.config.enableMarqueeAd){const e=t.find((e=>e.setting===x.nc.enable_sponsored_content));e&&(o.sponsoredContentEnabled=!!e.value)}if(e===g._9.userChoices&&this.config.onScrollDownButtonFlight){const e=t.find((e=>e.setting===x.nc.dismiss_scroll_down_button));e&&(o.isScrollDownButtonDismissed=!!e.value)}e===g._9.quickLinksDisplaySetting&&(o.selectedQuickLinksDisplaySetting=g._U[t],o.quickLinksEnabled=g._U[t]!==g.Z3.off),e===g._9.companyLogoEnabled&&(o.isCompanyLogoEnabledByPolicy=t),(0,f.Z)(o,i)||(!this.config.enableTopSitesMiddleOption||o.selectedQuickLinksDisplaySetting!==g.Z3.onerow&&o.selectedQuickLinksDisplaySetting!==g.Z3.tworows||(o.selectedQuickLinksDisplaySetting="always"===o.selectedFeedDisplaySetting?g.Z3.onerow:g.Z3.tworows),m.J.updateLayout.getActionSender(this).send(o))}))}defineChromiumKeys(e){const t={};let n;for(n of e)t[n.key]=n.value;return t}getGroupPolicy(e,t){const n=e.find((e=>e.key===t)),i={key:n.key,value:n.value,type:n.type};return n&&n.controlledBy&&n.enforcement?(i.isEnabled=!0,i.enforcement=n.enforcement,i.controlledBy=n.controlledBy):i.isEnabled=!1,i}getPromoFormParamList(){return this.config&&this.config.promoFormParamList?this.config.promoFormParamList:null}setContentDisabled(e){e.greetingEnabled=!1,e.selectedFeedDisplaySetting="off",e.currentLayout=g.nP.custom,e.imageOfTheDayEnabled=!1,e.currentBackgroundImageType=g.HX.off}checkPromoteTopsitesTop(e){return(0,s.mG)(this,void 0,void 0,(function*(){if(!this.config.enableTopsitesTopOnlyInformational&&!this.config.enableTopsitesTopAsDefault&&!this.config.enableTopsitesTopWithWPO)return!1;const t=e||this.getCurrentState();if(this.config.enableTopsitesTopWithWPO)return(0,Y.VL)(t);if(t.selectedQuickLinksDisplaySetting===g.Z3.top||t.currentLayout===g.nP.custom)return!1;if(this.config.enableTopsitesTopOnlyInformational&&t.currentLayout!==g.nP.informational)return!1;return!!!(yield M.L.getPreferenceSetting(r.pY))}))}saveTopSitesPromotionNurturing(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){const n=yield E.U.isApiAvailableToUse();if(!this.shouldPromoteTopsitesTop||!n)return;const i={promotedTime:(new Date).getTime(),promotedFrom:e,promotedTo:t};E.U.savePreferenceSetting(x.Xm.topSites,i)}))}checkPromoteTopsites2Rows(){return(0,s.mG)(this,void 0,void 0,(function*(){return!!this.config.enableTsDefault2Rows&&(0,Y.LC)()}))}migrateBackgroundPreference(e){this.settingsAPI.setPref(g._9.imageOfTheDay,e!==g.HX.off,te),this.settingsAPI.setPref(g._9.currentBackgroundImageType,e,te)}overrideLayoutPreferenceForPolicy(){this.settingsAPI.setPref(g._9.layout,g.Uq.custom,te)}wpoPromoteNewLayout(e,t){this.updateLayout(e,t)}wpoPromoteNewFeedDisplaySetting(e,t){this.updateFeeds(e,t,x.st.Wpo)}}var ie=n(30856);class re{reduce(e,t){if(!e)return Object.assign(Object.assign({},g.L_),{contentSource:g.iz.MicrosoftNews,isLoadCompleted:!1,greetingEnabled:!0,openSettingsDialogFlyout:!1,inPageSearchBoxType:null,market:k.Al.Locale});if(!t)return e;let n;return ie.G.handleAction(t,a.V.pageLayoutStateLoaded,(t=>{n=Object.assign(Object.assign(Object.assign({},e),t),{isLoadCompleted:!0})})),ie.G.handleAction(t,m.J.updateLayout,(t=>{n=Object.assign(Object.assign({},e),t)})),ie.G.handleAction(t,a.V.updateLocalStorage,(t=>{n=Object.assign(Object.assign({},e),{sdCardSettings:t})})),ie.G.handleAction(t,a.V.loadLocalStorage,(t=>{n=Object.assign(Object.assign({},e),{sdCardSettings:t})})),ie.G.handleAction(t,a.V.updatePrimaryAccountInfo,(t=>{n=Object.assign(Object.assign({},e),{primaryAccountInfo:t})})),ie.G.handleAction(t,a.V.updateConfigData,(t=>{n=Object.assign(Object.assign({},e),{configData:t})})),ie.G.handleAction(t,a.V.updateConfigDataChanged,(t=>{n=Object.assign(Object.assign({},e),{inPageSearchBoxType:t})})),ie.G.handleAction(t,a.V.updateTopSitesQuickLinkEndMarginUsedPadding,(t=>{n=Object.assign(Object.assign({},e),{topSitesQuickLinkEndMarginUsedPadding:t})})),ie.G.handleAction(t,a.V.marketUpdated,(t=>{n=Object.assign(Object.assign({},e),{market:t})})),ie.G.handleAction(t,a.V.updateNtpTheme,(t=>{n=Object.assign(Object.assign({},e),{ntpTheme:t})})),ie.G.handleAction(t,a.V.updateWPOLayoutPromotion,(t=>{n=Object.assign(Object.assign({},e),{isLayoutWPOPromoted:t})})),ie.G.handleAction(t,a.V.updateWPOTopsitesPromotion,(t=>{n=Object.assign(Object.assign({},e),{isTopsitesWPOPromoted:t})})),n||e}}var oe=n(7029);const ae={experienceConfigSchema:{}}},503:function(e,t,n){"use strict";n.d(t,{CR:function(){return i},Mx:function(){return r},_Y:function(){return o}});const i=8,r=2*i,o="coachmarks"},86331:function(e,t,n){"use strict";n.d(t,{Er:function(){return p},Jt:function(){return l},OD:function(){return u},RC:function(){return i},dm:function(){return o},gz:function(){return a},ln:function(){return c},no:function(){return d},p4:function(){return h},pY:function(){return r}});var i,r,o,a,s=n(503);!function(e){e.Above="Above",e.Below="Below",e.Left="Left",e.Right="Right"}(i||(i={})),function(e){e.TopStart="TopStart",e.TopEnd="TopEnd",e.BottomStart="BottomStart",e.BottomEnd="BottomEnd"}(r||(r={})),function(e){e.Mini="Mini",e.Small="Small",e.Medium="Medium",e.Large="Large"}(o||(o={})),function(e){e.BinaryReactionPromotion="binaryReactionPromotion",e.BinaryReactionControl="binaryReactionControl",e.BingIntlUpsellPromotion="bingIntlUpsellPromotion",e.ChinaLanguageMismatch="chinaLanguageMismatch",e.bingChatDallePromotion="bingChatDallePromotion",e.FollowingFeedPromotion="followingFeedPromotion",e.PersonalizeManageText="personalizeManageText",e.PersonalizeManageImage="personalizeManageImage",e.GamingFeedPromotion="gamingFeedPromotion",e.LayoutPromotion="layoutPromotion",e.LocationAccuracyRevIP="locationAccuracyRevIP",e.MarketLanguage="marketLanguage",e.multiLocationsCarousel="multiLocationsCarousel",e.multiLocationsCarouselV2="multiLocationsCarouselV2",e.NotificationBellPromotion="notificationBellPromotion",e.NotificationBellPromotionWinHP="notificationBellPromotionWinHP",e.PersonalizeFeedControl="personalizeFeedControl",e.PersonalizeFeedPromotion="personalizeFeedPromotion",e.recommendedSitesPromotionNewLine="recommendedSitesPromotionNewLine",e.recommendedSitesPromotionOff="recommendedSitesPromotionOff",e.RecommendedSitesSelection="recommendedSitesSelection",e.TopQuestionsPromotion="topQuestionsPromotion",e.TopSitesPromotion="topSitesPromotion",e.topSites2Rows="topSites2Rows",e.informationalSwitchOffer="informationalSwitchOffer",e.informationalSwitchCompletion="informationalSwitchCompletion",e.informationalKeepCompletion="informationalKeepCompletion",e.OfficeCoachmarkO365Tab="o365tab2_psl",e.OfficeCoachmarkO365Layout="OfficeCoachmarkO365Layout",e.WeatherPromotion="weatherPromotion",e.SplitScreen="splitScreen",e.OfficeCoachmarkWorkFeed="OfficeCoachmarkWorkFeed",e.EdgeFeedBelowTheFoldCoachmark="EdgeFeedBelowTheFoldCoachmark",e.SignInUpsellPromotionSignIn="signInUpsellPromotionSignIn",e.SignInUpsellPromotionToJoin="signInUpsellPromotionToJoin",e.SignInUpsellPromotionClaimed="signInUpsellPromotionClaimed",e.BackgroundImageEditPromotion="backgroundImageEditPromotion",e.BackgroundImagePromotion="backgroundImagePromotion",e.BackgroundImageVideoPromotion="backgroundImageVideoPromotion",e.PinProng1Flyout="pinProng1Flyout",e.prong1RotationSettingsButton="prong1RotationSettingsButton",e.Prong1SettingsButtonDialog="prong1SettingsButtonDialog",e.prong1ShuffleButton="prong1ShuffleButton",e.RefreshAnimationCoarchmarkKey="prong1RefreshButton",e.prong2RefreshButton="prong2RefreshButton",e.prong2ProfileMigration="prong2ProfileMigration",e.prong2PersonalizedButton="prong2PersonalizedButton",e.NurturingPlacementManagerTestKey="nurturingPlacementManagerTestKey",e.actionTrayComment="actionTrayComment",e.actionTrayCommentControl="actionTrayCommentControl",e.actionTrayCommentFirst="actionTrayCommentFirst",e.actionTrayCommentFirstControl="actionTrayCommentFirstControl",e.consumptionTopicTag="consumptionTopicTag"}(a||(a={}));const c={[a.FollowingFeedPromotion]:0,[a.GamingFeedPromotion]:1,[a.LayoutPromotion]:2,[a.LocationAccuracyRevIP]:6,[a.MarketLanguage]:7,[a.multiLocationsCarousel]:8,[a.multiLocationsCarouselV2]:9,[a.NotificationBellPromotion]:10,[a.NotificationBellPromotionWinHP]:11,[a.recommendedSitesPromotionNewLine]:13,[a.recommendedSitesPromotionOff]:14,[a.RecommendedSitesSelection]:15,[a.TopSitesPromotion]:16,[a.informationalSwitchOffer]:17,[a.informationalSwitchCompletion]:18,[a.informationalKeepCompletion]:19,[a.prong1RotationSettingsButton]:20,[a.Prong1SettingsButtonDialog]:21,[a.prong1ShuffleButton]:22,[a.RefreshAnimationCoarchmarkKey]:23,[a.prong2RefreshButton]:24,[a.prong2ProfileMigration]:25,[a.NurturingPlacementManagerTestKey]:26,[a.WeatherPromotion]:27,[a.OfficeCoachmarkO365Tab]:28,[a.OfficeCoachmarkO365Layout]:29,[a.PersonalizeFeedPromotion]:31,[a.PersonalizeFeedControl]:32,[a.BinaryReactionPromotion]:33,[a.BinaryReactionControl]:34,[a.actionTrayComment]:35,[a.actionTrayCommentControl]:36,[a.ChinaLanguageMismatch]:37,[a.consumptionTopicTag]:38,[a.TopQuestionsPromotion]:39,[a.SplitScreen]:40,[a.topSites2Rows]:44,[a.PersonalizeManageText]:46,[a.PersonalizeManageImage]:47,[a.OfficeCoachmarkWorkFeed]:48,[a.SignInUpsellPromotionSignIn]:49,[a.SignInUpsellPromotionToJoin]:50,[a.SignInUpsellPromotionClaimed]:51,[a.bingChatDallePromotion]:52,[a.BackgroundImageEditPromotion]:53,[a.BackgroundImagePromotion]:54,[a.BackgroundImageVideoPromotion]:55,[a.PinProng1Flyout]:56,[a.prong2PersonalizedButton]:57,[a.EdgeFeedBelowTheFoldCoachmark]:58,[a.actionTrayCommentFirst]:59,[a.BingIntlUpsellPromotion]:60,[a.actionTrayCommentFirstControl]:61};function d(e){switch(e){case o.Mini:return 228;case o.Small:return 256;case o.Medium:return 288;case o.Large:return 312;default:return 288}}var l,u;function p(e,t=!0){const n=`0,0 ${s.CR},${s.CR} ${s.Mx},0`,r=`0,${s.CR} ${s.CR},0 ${s.Mx},${s.CR}`,o=`0,0 ${s.CR},${s.CR} 0,${s.Mx}`,a=`${s.CR},0 0,${s.CR} ${s.CR},${s.Mx}`;switch(e){case i.Above:return n;case i.Below:return r;case i.Left:return t?a:o;case i.Right:return t?o:a;default:return""}}function h(e,t=!0){const n="drop-shadow(2.2px 1px 1px rgba(0, 0, 0, 15%))",r="drop-shadow(-1.5px 2px 1px rgba(0, 0, 0, 15%))";switch(e){case i.Above:return"drop-shadow(-1px 4px 1px rgba(0, 0, 0, 15%))";case i.Below:return"drop-shadow(0px -1px 1px rgba(0, 0, 0, 15%))";case i.Left:return t?r:n;case i.Right:return t?n:r;default:return""}}!function(e){e.Adjacent="Adjacent",e.Center="Center",e.Opposite="Opposite"}(l||(l={})),function(e){e.Outside="Outside",e.Target="Target",e.OutsideAndTarget="OutsideAndTarget"}(u||(u={}))},29993:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(55067);class r{}r.addCoachmark=new i.C("AddCoachmark"),r.updateCoachmarkHeight=new i.C("UpdateCoachmarkHeight"),r.updateCoachmarkName=new i.C("UpdateCoachmarkName"),r.updateCoachmarkVisibleStatus=new i.C("UpdateCoachmarkVisibleStatus")},62257:function(e,t,n){"use strict";n.d(t,{y:function(){return H}});var i=n(33940),r=n(98304),o=n(73231),a=n(6660),s=n(81765),c=n(33954),d=n(68364),l=n(26007),u=n(56692),p=n(33799),h=n(18769),g=n(65135);function m(e){let t;try{t=JSON.parse(e)}catch(e){g.M0.sendAppErrorEvent((0,d.Tr)(r.Cy3,"Fail to parse beaconsJson in Coachmark AmplifyHandler"))}return!!(null==t?void 0:t.e)}function f(e){const t=new h.A;e.forEach((e=>{var n;(null===(n=null==e?void 0:e.beaconUrls)||void 0===n?void 0:n.length)&&e.beaconUrls.forEach((n=>{try{t.fireTrackingBeacon(n,e.beaconType,e.encoded)}catch(t){g.M0.sendAppErrorEvent((0,d.Tr)(r.Vpp,`Fail to send ${e.beaconType} beacon  in Coachmark AmplifyHandler`))}}))}))}var v=n(987),y=n(17440);const S="amplify_campaigns",C="amplifyLocalStorage";class b{isStrategyAvailable(){return y.U.isApiAvailableToUse()}persistToCache(e){return y.U.savePreferenceSetting(S,e).catch((e=>(c.k.logError(`Exception ${e} occurred storing user nurturing campaigns in persistent storage layer`),!1)))}restoreFromCache(){return y.U.getPreferenceSetting(S).then((e=>{const t=e&&e.value;return t||c.k.logError("PSL: window.chrome.ntpSettingsPrivate.getPref does not have amplify_campaigns."),t})).catch((e=>{c.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from persistent storage layer`)}))}}class w{isStrategyAvailable(){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,v.$o)().supported}))}persistToCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){try{(0,v.$o)().setObject(C,e)}catch(e){return c.k.logError(`Exception ${e} occurred storing user nurturing campaigns in local storage`),!1}return!0}))}restoreFromCache(){return(0,i.mG)(this,void 0,void 0,(function*(){let e=null;try{e=(0,v.$o)().getObject(C)}catch(e){return void c.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from local storage`)}return e||c.k.logError("LocalStore: does not have amplifyLocalStorage."),e}))}}var T;!function(e){e[e.Viewed=0]="Viewed",e[e.Clicked=1]="Clicked",e[e.Dismissed=2]="Dismissed"}(T||(T={}));class k extends class{constructor(e,t,n=[]){this.data=e,this.serviceTimeStamp=t,this._interactionLog=n,this.isFresh=!1,t||(this.serviceTimeStamp=Date.now(),this.isFresh=!0)}get interactionLog(){return this._interactionLog}set interactionLog(e){e&&(this._interactionLog=e)}logInteraction(e){this._interactionLog.push({key:e,value:Date.now()})}}{get id(){var e,t,n;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.items)||void 0===t?void 0:t.length)&&(null===(n=this.data)||void 0===n?void 0:n.items[0].createId)}isEligibleToShow(e,t){if(function(){const e=l.c.getQueryParameterByName("ignoreEligibilityRules",window.location.search);return!!e&&"true"===e.toLocaleLowerCase()}())return!0;const n=e=>Date.now()-e<this.serviceTimeStamp,i=()=>this.isFresh,r=(e,t)=>this.interactionLog.filter((t=>t.key===e)).length<t,o=(e,t)=>{const n=this.interactionLog.filter((t=>t.key===e)).sort((e=>e.value)).pop();return Date.now()-((null==n?void 0:n.value)||0)>t};return[()=>!t,()=>{return t=603e6,!!e&&Date.now()-e>t;var t},()=>n(36e5),()=>i(),()=>r(T.Viewed,2),()=>o(T.Viewed,12096e5),()=>r(T.Clicked,1)].every((e=>e()))}}var P=n(97662),A=n(45506);const I={w:320,h:166};class E{constructor(){this.samAdService=new P.B}getPlacementsFromService(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=this.createAdRequest(),t=yield this.samAdService.fetchSAMAds(e);if(!(null==t?void 0:t.placements))return[];return f(t.placements.map((e=>({beaconUrls:e.adServedUrls,beaconType:s.hE.BeaconTypeAdServed,encoded:m(e.beaconsJson)})))),t.placements}))}createAdRequest(){return{pageType:"edgechrntp",locale:A.Al.Locale,placements:[{region:"coachmark_amp",indices:[1],img:Object.assign({},I)}]}}}class x{constructor(){this.serviceClient=new E,this.schemaVersion=1,this.profileCreationTimeInMs=0,this.isAadAccount=!1}getPlacementItems(){return(0,i.mG)(this,void 0,void 0,(function*(){return this.itemsMap||(yield this.initStorage())?Object.values(this.itemsMap):[]}))}getPlacementItemByCreativeId(e){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield this.getPlacementItems()).find((t=>{if(t.data.items.find((t=>t.createId===e)))return t}))}))}updateStorageItem(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(null==e?void 0:e.data)return this.itemsMap[e.id]=e,this.persistToCache()}))}initStorage(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.cacheStrategy=[new b,new w].find((e=>e.isStrategyAvailable())),!this.cacheStrategy)return!1;if(this.profileCreationTimeInMs=yield function(){return new Promise((e=>(0,i.mG)(this,void 0,void 0,(function*(){var t,n;try{"function"==typeof(null===(n=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.ntpSettingsPrivate)||void 0===n?void 0:n.getConfigData)?window.chrome.ntpSettingsPrivate.getConfigData((t=>{e(t.profileCreationTime)})):e(0)}catch(t){c.k.logError(t),e(0)}}))))}(),this.isAadAccount=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){yield u.jG.AccountInfoPromise;const e=u.jG.ResolvedAccountInfo;return p.Qm.AAD===(e&&e.account_type)}))}(),(yield this.restoreFromCache())||(this.updateTime=-1,this.itemsMap={}),this.schemaVersion<1&&(this.updateTime=-1,this.itemsMap={}),!this.isStorageRequireUpdate())return!0;return(yield this.serviceClient.getPlacementsFromService()).map((e=>new k(e))).forEach((e=>{var t;e.interactionLog=null===(t=this.itemsMap[e.id])||void 0===t?void 0:t.interactionLog,this.itemsMap[e.id]=e})),this.updateTime=Date.now(),this.persistToCache(),!0}))}isStorageRequireUpdate(){return!!function(){const e=l.c.getQueryParameterByName("forceAmplifyStorageUpdate",window.location.search);return!!e&&"true"===e.toLocaleLowerCase()}()||this.updateTime+864e5<=Date.now()}persistToCache(){return this.cacheStrategy.persistToCache(this)}restoreFromCache(){return(0,i.mG)(this,void 0,void 0,(function*(){return!function(){const e=l.c.getQueryParameterByName("ignoreAmplifyCache",window.location.search);return!!e&&"true"===e.toLocaleLowerCase()}()&&this.cacheStrategy.restoreFromCache().then((e=>{if(!e)return!1;this.itemsMap={};for(const[t,n]of Object.entries(e.itemsMap))this.itemsMap[t]=new k(n.data,n.serviceTimeStamp,n._interactionLog);return this.updateTime=e.updateTime,this.schemaVersion=e.schemaVersion,!0}))}))}}var M=n(23547);class O{getCoachmarksFromDataConnector(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.amplifyStorage||(this.amplifyStorage=new x);let t=yield this.amplifyStorage.getPlacementItems();e&&(t=t.filter((t=>e.includes(t.id))));const n=t.filter((e=>e.isEligibleToShow(this.amplifyStorage.profileCreationTimeInMs,this.amplifyStorage.isAadAccount))),i=n.length&&n[0].data;return this.validateAmplifyCoachmark(i)?this.extractCoachmarkCreativeMessages(i):null}))}fireBeacon(e,t,n,r,o){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.amplifyStorage.getPlacementItemByCreativeId(r),i=null==t?void 0:t.data,o=null==i?void 0:i.items.find((e=>e.createId===r)),c=[];if(o){if(e===a.R.Impression)c.push({beaconUrls:i.visibilityUrls,beaconType:s.hE.BeaconTypeVisibility,encoded:m(i.beaconsJson)}),t.logInteraction(T.Viewed),this.amplifyStorage.updateStorageItem(t);else if(n===a.M.Click)c.push({beaconUrls:o.clickUrls,beaconType:s.hE.BeaconTypeClick,encoded:m(i.beaconsJson)}),t.logInteraction(T.Clicked),this.amplifyStorage.updateStorageItem(t);else{if(!a.M.Dismiss)return;{const e=new M.h(o.url),n=null==e?void 0:e.get("rlink");c.push({beaconUrls:[`https://g.bing.com/neg/0?rlink=${n}`],beaconType:s.hE.UserActionEvent,encoded:!1}),t.logInteraction(T.Dismissed),this.amplifyStorage.updateStorageItem(t)}}f(c)}}))}validateAmplifyCoachmark(e){return!!e}extractCoachmarkCreativeMessages(e){var t;const n=[];if(!(null===(t=null==e?void 0:e.items)||void 0===t?void 0:t.length))return n;const{items:i,visibilityUrls:r}=e,{title:a,description:s,images:c,clickBeacons:d,url:l,createId:u}=i[0],p=(null==c?void 0:c.length)&&c[0]||null,h={coachmarkSource:o.jX.Amplify,creativeId:u,ctaList:[{ctaButtonText:"Learn More",ctaType:"Navigate",ctaButtonURL:l},{ctaButtonText:"Maybe Later",ctaType:"Close"}],displayDismissX:"true",displayType:o.dm.Medium,eventUrl:{actionUrl:d,impressionUrl:(null==r?void 0:r.length)?r[0]:""},headline:a,leadText:s,mainImage:p.url,mainImageAltText:p.alt,name:"Amplify",nonTargetPlacement:o.HJ.BottomEnd,positionId:"Coachmark",timeoutMilliseconds:1e4};return n.push(h),n}}var L=n(29993),D=n(63439),R=n(91881),F=n(62985),B=n(53076),N=n(93450),U=n(38130);class ${getCoachmarksFromDataConnector(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.irisDataConnector=yield N._.getInstance().rootReducer.getDataConnector(B.z.IrisData),!this.irisDataConnector)return U.i.trackAppErrorEvent(Object.assign(Object.assign({},r.oUn),{message:"No Iris data connector"})),null;const t=yield this.irisDataConnector.getPayload(R._l.MSNNewsCoachmark);if(!this.validateSurface(t,R._l.MSNNewsCoachmark))return null;let n=t.creatives;if((null==e?void 0:e.length)&&(n=n.filter((t=>e.includes(t.creativeId)))),!n||!n.length)return null;const i=n[Math.floor(Math.random()*n.length)];return this.extractCoachmarkCreativeMessages(i,t.placement)}))}fireBeacon(e,t,n,o,a){return(0,i.mG)(this,void 0,void 0,(function*(){this.irisDataConnector=yield N._.getInstance().rootReducer.getDataConnector(B.z.IrisData),this.irisDataConnector?this.irisDataConnector.sendActionUpdate(a,o,e,t,n):U.i.trackAppErrorEvent(Object.assign(Object.assign({},r.oUn),{message:"No Iris data connector",pb:Object.assign(Object.assign({},r.bKI.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${t}, irisAction: ${n}, creativeId: ${o}, positionId:${a}`})}))}))}validateSurface(e,t){return e?!F.S.infoHasErrors(e)||(e.errors.forEach((e=>{2040!=(e&&e.code?e.code:e.errors&&e.errors.length>0&&e.errors[0].code)&&U.i.trackAppErrorEvent(Object.assign(Object.assign({},r.Hfw),{message:"Surface errors discovered",pb:Object.assign(Object.assign({},r.Hfw.pb),{customMessage:"Error with surface: "+R._l.MSNNewsCoachmark+" Code: "+e.code+" Message: "+e.msg})}))})),!1):(c.k.log(`IrisHandler: Iris surface not found for the campaign: ${e}`),!1)}extractCoachmarkCreativeMessages(e,t){const n=[];let i;return e&&e.content&&e.content.cm&&!e.content.rewards&&e.telemetry&&e.creativeId&&t&&e.content.cm.forEach((r=>{i=Object.assign(Object.assign({},r),{ctaList:r.cta,showPointer:!("true"===r.disablePointer),frequency:Number(e.content.frequency),frequencyInterval:Number(e.content.frequencyInterval),ecsFeatureFlags:e.content.ecsFeatureFlags,isEcsExperiment:"true"===e.content.isEcsExperiment,creativeId:e.creativeId,creativeName:e.creativeName,creativeNamespace:e.creativeNamespace,storageInfo:e.storageInfo,eventUrl:e.telemetry,positionId:t,coachmarkSource:o.jX.Iris}),n.push(i)})),n}}var _=n(12574);class H extends D.e{constructor(e,t,n,i,r,a,s){super(e,t,n,i,r,a,s),this.coachmarkServiceHandler=new $,this.coachmarkServiceHandler=(null==a?void 0:a.coachmarkDataSource)===o.jX.Amplify?new O:new $,this.campaignsIdFilter=null==a?void 0:a.campaignsIdFilter}addCoachmark(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){let n=!1;if(yield(0,_.XA)(t)){const t=o.kE.extractMessages(e);if(!t||0===t.length)return!1;const i=new Promise((e=>{L.$.updateCoachmarkVisibleStatus.registerObserver((()=>{n=this.getCurrentState().isCoachmarkOnScreen,e()}))}));L.$.addCoachmark.getActionSender(this).send(t),yield i}return n}))}reportEvent(e,t,n,i,o){e?t?e!==a.R.Action||n?this.coachmarkServiceHandler.fireBeacon(e,t,n,i,o):U.i.trackAppErrorEvent(Object.assign(Object.assign({},r.DBH),{message:"Iris action undefined",pb:Object.assign(Object.assign({},r.bKI.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${JSON.stringify(t)}, irisAction: ${n}, creativeId: ${i}, positionId: ${o}`})})):U.i.trackAppErrorEvent(Object.assign(Object.assign({},r.EjM),{message:"Iris telemetry info not found",pb:Object.assign(Object.assign({},r.bKI.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${JSON.stringify(t)}, irisAction: ${n}, creativeId: ${i}, positionId: ${o}`})})):U.i.trackAppErrorEvent(Object.assign(Object.assign({},r.bKI),{message:"Event type is undefined",pb:Object.assign(Object.assign({},r.bKI.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${JSON.stringify(t)}, irisAction: ${n}, creativeId: ${i}, positionId: ${o}`})}))}getCoachmarks(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.coachmarkServiceHandler.getCoachmarksFromDataConnector(this.campaignsIdFilter)}))}}},21343:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var i=n(30856),r=n(29993);class o{reduce(e,t){if(!e)return{coachmarkMessages:void 0,isCoachmarkOnScreen:void 0,coachmarkHeight:void 0,coachmarkName:void 0};if(!t)return e;let n,o=!1;return o=o||i.G.handleAction(t,r.$.addCoachmark,(t=>{n=Object.assign(Object.assign({},e),{coachmarkMessages:t})})),o=o||i.G.handleAction(t,r.$.updateCoachmarkHeight,(t=>{n=Object.assign(Object.assign({},e),{coachmarkHeight:t})})),o=o||i.G.handleAction(t,r.$.updateCoachmarkName,(t=>{n=Object.assign(Object.assign({},e),{coachmarkName:t})})),o=o||i.G.handleAction(t,r.$.updateCoachmarkVisibleStatus,(t=>{n=Object.assign(Object.assign({},e),{isCoachmarkOnScreen:t})})),n||e}}},73231:function(e,t,n){"use strict";n.d(t,{HJ:function(){return o},M_:function(){return r},dm:function(){return s},jX:function(){return a},kE:function(){return l},ur:function(){return i}});var i,r,o,a,s,c=n(98304),d=n(38130);!function(e){e.Above="Above",e.Below="Below",e.Left="Left",e.Right="Right"}(i||(i={})),function(e){e.Adjacent="Adjacent",e.Center="Center",e.Opposite="Opposite"}(r||(r={})),function(e){e.TopStart="TopStart",e.TopEnd="TopEnd",e.BottomStart="BottomStart",e.BottomEnd="BottomEnd"}(o||(o={})),function(e){e.Iris="Iris",e.Amplify="Amplify",e.Experience="Experience"}(a||(a={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(s||(s={}));class l{static extractMessages(e){const t=new Array;let n;return e?(e.forEach((e=>{l.hasMessageData(e)?(n=l.mapMessageResponseForProps(e),t.push(n)):d.i.trackAppErrorEvent(Object.assign(Object.assign({},c.qLy),{message:`Coachmark message passed is invalid or malformed: coachmark: ${e.name}`,pb:Object.assign(Object.assign({},c.qLy.pb),{customMessage:`creativeId: ${e.creativeId} positionId: ${e.positionId} Malformed coachmark message: ${JSON.stringify(e)}`})}))})),t):t}static hasMessageData(e){return null!=(e&&(e.targetElement&&e.position||e.nonTargetPlacement)&&e.headline&&e.leadText&&e.timeoutMilliseconds&&e.coachmarkSource)}static mapMessageResponseForProps(e){if(!e)return null;return{actionPauseInMs:e.actionPauseInMs,body:e.leadText,cancelText:e.cancelText,ctaList:e.ctaList,showPointer:e.showPointer,coachmarkSize:l.getDisplayType(e.displayType),floatingPosition:e.nonTargetPlacement&&l.getNonTargetPlacement(e.nonTargetPlacement),head:e.headline,leadImage:e.leadImage,leadImageAltText:e.leadImageAltText,mainImage:e.mainImage,mainImageAltText:e.mainImageAltText,name:e.name,pointerPosition:e.pointerPlacement&&l.getPointerPosition(e.pointerPlacement),coachmarkPosition:e.position&&l.getPlacement(e.position),showDismissalX:e.displayDismissX,targetElement:e.targetElement,timeoutInMs:e.timeoutMilliseconds,zIndex:1,ecsFeatureFlags:e.ecsFeatureFlags,isEcsExperiment:e.isEcsExperiment,creativeId:e.creativeId,creativeNamespace:e.creativeNamespace,rewardsInfo:e.rewardsInfo,eventUrl:e.eventUrl?e.eventUrl:void 0,positionId:e.positionId,coachmarkSource:e.coachmarkSource,edgeNurturingAPICampaignName:e.edgeNurturingAPICampaignName}}static getPointerPosition(e){switch(r[e]){case r.Adjacent:return r.Adjacent;case r.Center:return r.Center;case r.Opposite:return r.Opposite;default:return null}}static getPlacement(e){switch(i[e]){case i.Above:return i.Above;case i.Below:return i.Below;case i.Left:return i.Left;case i.Right:return i.Right;default:return null}}static getDisplayType(e){switch(s[e]){case s.Small:return s.Small;case s.Medium:return s.Medium;case s.Large:return s.Large;default:return s.Medium}}static getNonTargetPlacement(e){switch(e){case o.TopStart:return o.TopStart;case o.TopEnd:return o.TopEnd;case o.BottomStart:return o.BottomStart;case o.BottomEnd:return o.BottomEnd;default:return null}}}},38130:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(65135);class r{static registerTrackAppErrorEventCallback(e){e&&(this.trackAppErrorEventCallback=e)}static trackAppErrorEvent(e){this.trackAppErrorEventCallback&&this.trackAppErrorEventCallback(e)}}r.trackAppErrorEventCallback=e=>{i.M0.sendAppErrorEvent(e)}},61366:function(e,t,n){"use strict";var i;n.d(t,{F:function(){return i}}),function(e){e.Adult="adult",e.Enterprise="enterprise",e.Kids="kids"}(i||(i={}))},20126:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.Android="android",e.Ios="ios",e.Linux="linux",e.Macos="macos",e.Windows="windows",e.Xbox="xbox"}(i||(i={}))},57967:function(e,t,n){"use strict";n.d(t,{GB:function(){return d},Km:function(){return l},Sp:function(){return m},Wc:function(){return p},_d:function(){return u},cm:function(){return g},e_:function(){return v},kJ:function(){return c},oH:function(){return f},r7:function(){return a},yG:function(){return s},yL:function(){return h}});var i=n(79664);const r=i.z.Alert,o={build:""};function a(e){Object.assign(o,e)}const s={id:22010,severity:r,pb:o},c={id:22011,severity:r,pb:o},d={id:22012,severity:r,pb:o},l={id:22014,severity:i.z.Critical,pb:o},u=(i.z.NoAlert,{id:22021,severity:r,pb:o}),p=(i.z.NoAlert,i.z.NoAlert,i.z.NoAlert,i.z.NoAlert,i.z.NoAlert,{id:22027,severity:i.z.Critical,pb:o}),h=(i.z.Critical,i.z.Critical,{id:22031,severity:r,pb:o}),g={id:22032,severity:r,pb:o},m={id:22033,severity:r,pb:o},f={id:22050,severity:r,pb:o},v={id:22051,severity:i.z.NoAlert,pb:o};i.z.NoAlert,i.z.NoAlert,i.z.HighImpact},63598:function(e,t,n){"use strict";n.d(t,{ph:function(){return l}});var i,r=n(56692),o=n(26007),a=n(45506),s=n(65135),c=n(98304);!function(e){e[e.linksPointToPartner=2]="linksPointToPartner"}(i||(i={}));n(89526);const d={ArticlePreview:"ar",SlideshowPreview:"ss",VideoPreview:"vi"};function l(e,t,n,l){if(e.renderingRestriction===i.linksPointToPartner){if(e.sourceHref)return e.sourceHref;s.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.QzW),{message:"Content with rendering restriction 'link to partner' is missing source HREF",pb:Object.assign(Object.assign({},c.QzW.pb),{customMessage:`Content Id: ${e.id}`})}))}if(e.destinationUrl)return e.destinationUrl;const u=(0,r.Yq)().NavTargetHostName,p=d[e.type]||"xx";n=o.c.encodeURIComponentForPrime(n||""),l=o.c.encodeURIComponentForPrime(l||"");const h=encodeURIComponent(e.uriTitle||"");let g="";return a.Al&&a.Al.ClientSettings&&a.Al.ClientSettings.forwardablequeryparams&&(g=`?${a.Al.ClientSettings.forwardablequeryparams}`),`https://${u}/${t}/${n}/${l}/${h}/${p}-${e.id}${g}`}},21712:function(e,t,n){"use strict";n.d(t,{id:function(){return i},ks:function(){return o},pA:function(){return r}});const i="MSCC",r="MUID",o="eupubconsent-v2"},37299:function(e,t,n){"use strict";n.d(t,{e:function(){return r},n:function(){return i}});const i="consent-banner-container",r="onetrust-sdk"},71443:function(e,t,n){"use strict";n.d(t,{C:function(){return i},H:function(){return r}});const i="consent.onetrust",r="widgetHost.cookieConsent"},29815:function(e,t,n){"use strict";var i;n.d(t,{i:function(){return i}}),function(e){e.MSCCBanner="mscc",e.OneTrustBanner="onetrust",e.WidgetHost="widgethost",e.None="none"}(i||(i={}))},72344:function(e,t,n){"use strict";var i;n.d(t,{_:function(){return i}}),function(e){e[e.Unknown=0]="Unknown",e[e.Required=1]="Required",e[e.NotRequired=2]="NotRequired"}(i||(i={}))},85497:function(e,t,n){"use strict";var i;n.d(t,{o:function(){return i}}),function(e){e.Essential="ES",e.Advertising="AD",e.SocialMedia="SM",e.ThirdPartyAnalytics="AL"}(i||(i={}))},42640:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.C0001="C0001",e.C0002="C0002",e.C0003="C0003",e.C0004="C0004"}(i||(i={}))},76668:function(e,t,n){"use strict";var i;n.d(t,{f:function(){return i}}),function(e){e.Lax="lax",e.Strict="strict",e.None="none"}(i||(i={}))},35357:function(e,t,n){"use strict";n.d(t,{hI:function(){return l},iF:function(){return d},o4:function(){return s},rv:function(){return c}});var i=n(37299),r=n(21712),o=n(33379),a=n(67462);function s(){return(0,o.N)()&&null!=document.getElementById(i.n)}function c(){return s()&&null===(0,a.ej)(r.id)}function d(){return(0,o.N)()&&null!=document.getElementById(i.e)}function l(){const e=JSON.parse(document.head.getAttribute("data-client-settings")),{locale:t={},geo_country:n,geo_subdivision:i}=e||{},{language:o="",market:s=""}=t;return("ca"!==s.toLowerCase()||"fr"!==o.toLowerCase()&&"en"!==o.toLowerCase()||"CA"!==n||"Quebec"===i)&&(d()&&null===(0,a.ej)(r.ks))}},52144:function(e,t,n){"use strict";n.d(t,{A:function(){return a},U:function(){return i}});var i,r=n(72344),o=n(56474);!function(e){e[e.Initialized=1]="Initialized",e[e.CookieConsentProvider=2]="CookieConsentProvider",e[e.CookieConsentStatus=3]="CookieConsentStatus",e[e.ActiveCookieCategories=4]="ActiveCookieCategories"}(i||(i={}));const a=new o.v("CookieManagementStateKey");a.set(i.Initialized,!1),a.set(i.CookieConsentStatus,r._.Unknown)},36478:function(e,t,n){"use strict";n.d(t,{Q:function(){return p}});var i=n(29815),r=n(72344),o=n(71443),a=n(85497),s=n(42640);const c={[s.Q.C0001]:a.o.Essential,[s.Q.C0002]:a.o.Advertising,[s.Q.C0003]:a.o.SocialMedia,[s.Q.C0004]:a.o.ThirdPartyAnalytics};var d=n(52144),l=n(35357),u=n(33379);function p(e){if(d.A.get(d.U.Initialized))return;let t=i.i.None,n=r._.NotRequired;(0,u.N)()&&(e&&e.required?(t=i.i.WidgetHost,n=e.categories?r._.NotRequired:r._.Required,h(e.categories),window.addEventListener(o.H,(e=>h(e.detail)))):(0,l.o4)()?(t=i.i.MSCCBanner,n=(0,l.rv)()?r._.Required:r._.NotRequired,n===r._.Required?d.A.set(d.U.ActiveCookieCategories,[a.o.Essential]):d.A.set(d.U.ActiveCookieCategories,[...Object.values(a.o)])):(0,l.iF)()&&(t=i.i.OneTrustBanner,n=(0,l.hI)()?r._.Required:r._.NotRequired,g(),window.addEventListener(o.C,g))),d.A.set(d.U.CookieConsentStatus,n),d.A.set(d.U.CookieConsentProvider,t),d.A.set(d.U.Initialized,!0)}function h(e){const t=e&&Object.keys(e).filter((t=>Object.values(a.o).includes(t)&&1===e[t]))||new Array;t.includes(a.o.Essential)||t.unshift(a.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}function g(){const e=window.OnetrustActiveGroups,t=e&&e.trim().split(",").filter((e=>{const t=e&&e.trim();return Object.values(s.Q).includes(t)})).map((e=>{const t=e.trim();return c[t]}))||new Array;t.includes(a.o.Essential)||t.unshift(a.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}},67462:function(e,t,n){"use strict";n.d(t,{ej:function(){return f},jG:function(){return v},aW:function(){return y},sq:function(){return S}});var i=n(21712),r=n(29815),o=n(72344),a=n(85497);const s={[a.o.Essential]:["AL","ALS","AL_ANON","AL_APP_ANNON","AL_STATE","ANON","ANONCKNM","APP_ANON","BFB","BFBUSR","DefaultLocation","Edgecac","FreWv","GalleryMode","MC1","MS0","MSCC","MSFPC","MSPRequ","MUID","MUIDB","MicrosoftApplicationsTelemetryDeviceId","OSAT","OSATE","OptanonAlertBoxClosed","OptanonConsent","OvrlyTrf","PreferencesMsn","RC","RUM","RecentStocks","SRCHD","SRCHHPGUSR","SRCHUID","SRCHUSR","Sample","TOptOut","UMH2E","WLMMAC","_EDGE_S","_EDGE_V","_SS","_U","_cb","_cb_ls","_cb_svref","aace","ace","ahs-dismissed","ahs-installed","ahs-showings","ai_session","aqp","at-bing","bcookie","bingimage","bwssoc","cac","cb","cbypass","cfrecnt","child","cmdisp","cmwr","currentaccount","ddlcur","df","ecasession","elt","eub","eupubconsent","eupubconsent-v2","gfrecnt","hidebn","i18next","ipt","ipv6","isdomainmigrated","lt","marketPref","mktreset","mniotd","mnmarket","msaOptout","msaoptout","nactk","no_read_more","ntps","numac","orfc_feeds","pbmi","pglt-edgeChromium-dhp","pglt-edgeChromium-ntp","pglt-microsoftNews-msnews","pglt-microsoftNews-startpage","pop","refresh-reason","sbc-dismissed","sbc-installed","sbc-showings","smd","sptmarket","theme","timeZoneOffsetInMins","uaid","videoCookiesLastCategory","videoerrorcount","vjsusrpref","w10rp","w10rpls"],[a.o.Advertising]:["BizoID","adslrid","dub_downlevel","eAPID","ecadprovider","ecisession","ecmsession","ecsession"],[a.o.SocialMedia]:["promptDisplayCount"],[a.o.ThirdPartyAnalytics]:[]};var c=n(76668),d=n(98304),l=n(52144),u=n(12884),p=n(33379);const h=["at-bing","elt","eupubconsent-v2","lt","AL","ALS","MSNRPSSecAuth","OSAT"],g=[";",","," "];var m=n(65135);function f(e){const t=(0,u.G8)();if(t){const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return n&&n.length>1?n[1]:null}return null}function v(){return f(i.pA)}function y(){return f(i.ks)}function S(e,t,n,i,u,f,v){try{if(!l.A.get(l.U.Initialized))return(0,p.N)()&&m.M0.sendAppErrorEvent(d.lIV),!1;if(void 0===n||n>0){if(!function(e){if(!(0,p.N)())return!1;const t=l.A.get(l.U.CookieConsentStatus),n=l.A.get(l.U.CookieConsentProvider),i=l.A.get(l.U.ActiveCookieCategories);let c=!1;switch(n){case r.i.MSCCBanner:case r.i.OneTrustBanner:case r.i.WidgetHost:return function(e,t){for(const n of t){if(s[n].includes(e))return!0}let n=!1;const i=Object.keys(s).filter((e=>!t.includes(a.o[e])));for(const t of i){if(s[t].includes(e)){n=!0;break}}n||m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.sGX),{message:`Attempting to write a cookie: "${e}" not present in the cookie category mapping.`}));return!1}(e,i);default:c=t===o._.NotRequired,c||m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.fU5),{message:`Consent status should be '2' (NotRequired), but is set to '${t}'`}))}return c}(e))return!1;if(null==t)return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.AvP),{message:`Cookie value is being set to either 'undefined' or 'null'. cookie name: "${e}", cookie value: "${t}"`})),!1;const i=typeof t;"string"!==i&&(t=JSON.stringify(t),m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.bAs),{message:`Cookie value is not of string type. observed type: "${i}". cookie name: "${e}"`})));for(const n of g)if(e.includes(n)||t.includes(n))return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.AvP),{message:`Cookie name and/or value contains invalid character: '${n}'. cookie name: "${e}"`})),!1;n>365&&m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.Vwf),{message:`Cookie expiration time: ${n} days is greater than suggested max duration of 365 days (1 year). cookie name: "${e}"`}));const c=e.length+(t&&t.length||0);c>1e3&&!h.includes(e)&&m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.HFn),{message:`Cookie size: "${c} Bytes" is too big (> 1000 Bytes). cookie name: "${e}"`}))}return function(e,t,n,i,r,o,a){let s;const d=[e,"=",t];if(n<0)s="Fri, 31 Dec 1999 23:59:59 GMT";else if(n){const e=new Date;e.setTime(e.getTime()+864e5*n),s=e.toUTCString()}s&&d.push(";expires=",s);i&&d.push(";domain=",i);r&&d.push(";path=",r);o&&d.push(";secure");a&&a!==c.f.Lax&&(d.push(";samesite=",a.toString()),a!==c.f.None||o||d.push(";secure"));document&&(document.cookie=d.join(""))}(e,t,n,i,u,f,v),!0}catch(t){return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.sX$),{message:`trySetCookie() failed with error: "${t.message}". cookie name: "${e}"`})),!1}}},68679:function(e,t,n){"use strict";var i;n.d(t,{C:function(){return i}}),function(e){e[e.Exceptional=0]="Exceptional",e[e.Fallback=1]="Fallback"}(i||(i={}))},79664:function(e,t,n){"use strict";var i;n.d(t,{z:function(){return i}}),function(e){e[e.Alert=0]="Alert",e[e.NoAlert=1]="NoAlert",e[e.HighImpact=2]="HighImpact",e[e.Critical=3]="Critical"}(i||(i={}))},63045:function(e,t,n){"use strict";var i;n.d(t,{w:function(){return i}}),function(e){e[e.Production=0]="Production",e[e.Local=1]="Local"}(i||(i={}))},49972:function(e,t,n){"use strict";function i(e,t){if(e instanceof Error){const n=e.toString();return t&&e.stack?`${n}, Stack: ${e.stack}`:n}return"string"==typeof e?e:function(e){try{return JSON.stringify(e)}catch(e){return""}}(e)}n.d(t,{n:function(){return i}})},76323:function(e,t,n){"use strict";function i(e){let t,n=!1;const i=function(){return n||(n=!0,t=e()),t};return i.cache={clear:()=>{n=!1,t=void 0}},i}n.d(t,{p:function(){return i}})},83130:function(e,t,n){"use strict";function i(e,t,n=!1){return!e||r(e,t)&&o(e,t)&&a(e,t)&&s(e,t)&&c(e,t)&&l(e,t,n)&&u(e,t)&&p(e,t)&&h(e,t)&&g(e,t)}function r(e,t){return!e.audienceMode||t.audienceMode===e.audienceMode}function o(e,t){if(!e.browser)return!0;if(!t.browser)return!1;const{browserType:n,version:i}=t.browser,{browserType:r,version:o}=e.browser;if(r&&r!==n)return!1;if(!o)return!0;if("string"==typeof o)return i===o;if("object"==typeof o){const e=parseInt(i);let t;for(t in o){const n=o[t];if(null!=n)switch(t){case"equals":if(e!==n)return!1;break;case"greaterThan":if(!(e>n))return!1;break;case"lessThan":if(!(e<n))return!1;break;case"notEquals":if(e===n)return!1;break;case"oneOf":if(-1===n.indexOf(e))return!1;break;default:return!1}}return!0}return!1}function a(e,t){return!e.deviceFormFactor||t.deviceFormFactor===e.deviceFormFactor}function s(e,t){return!e.domain||t.domain===e.domain}function c(e,t){return t.pageExperiments=t.pageExperiments||[],"string"!=typeof e.experimentId||0===Object.keys(e.experimentId).length||t.pageExperiments.indexOf(e.experimentId)>=0}function d(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}function l(e,t,n){const i=e.locale;if(!i)return!0;let r;return t.locale&&(r=n?t.locale.display:t.locale.content),!!r&&!(i.language&&!d(i.language,r.language)||i.market&&!d(i.market,r.market)||i.script&&!d(i.script,r.script))}function u(e,t){return function(e,t){if(!e)return!0;if(!t)return!1;if("string"==typeof e&&d(e,t))return!0;if("object"!=typeof e)return!1;const n=t.toLowerCase();if(e.startsWith&&!n.startsWith(e.startsWith.toLowerCase()))return!1;if(e.endsWith&&!n.endsWith(e.endsWith.toLowerCase()))return!1;if(e.equals&&!d(e.equals,t))return!1;if(e.notEquals&&d(e.notEquals,t))return!1;if(e.contains&&!n.includes(e.contains.toLowerCase()))return!1;if(e.oneOf&&-1===e.oneOf.indexOf(t))return!1;return!0}(e.ocid,t.ocid)}function p(e,t){return!e.os||t.os===e.os}function h(e,t){const n=e.pageType;if(!n)return!0;const i=t.pageType;if(!i)return!1;if("string"==typeof n)return n===i;if(n.exact&&n.exact.toUpperCase()===i.toUpperCase())return!0;if(n.segments){const e=n.segments,t=i.split("::");if(t&&t.length>0){for(const n in e){const i=parseInt(n),r=e[n];if(!r||isNaN(i)||"string"!=typeof r||i>=t.length||r.toUpperCase()!==t[i].toUpperCase())return!1}return!0}}return!1}function g(e,t){return!e.platform||t.platform===e.platform}n.d(t,{Ev:function(){return a},J4:function(){return i},K3:function(){return u},K4:function(){return o},Sh:function(){return d},Uc:function(){return r},W9:function(){return c},fb:function(){return l},hI:function(){return s},jF:function(){return g},oM:function(){return h},zu:function(){return p}})},8158:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});var i,r=n(33940);!function(e){const t={};e.loadExperience=e=>(0,r.mG)(this,void 0,void 0,(function*(){const n=t[e];if(!n)throw new Error(`Attempted to load unknown dynamic bundle "${e}". Make sure it's a registered dynamic experience bundle.`);return n()})),e.registerExperience=(e,n)=>{t[e]=n},e.hasExperienceRegistered=e=>!!t[e]}(i||(i={}))},89638:function(e,t,n){"use strict";n.d(t,{U:function(){return ke}});var i=n(33940),r=n(21050),o=n(33954),a=n(98304),s=n(68364),c=n(56692),d=n(26974),l=n(32181),u=n(17873),p=n(98878),h=n(26007),g=n(32005),m=n(99038),f=n(987),v=n(27003),y=n(99590),S=n(12884),C=n(33379),b=n(30291),w=n(79022),T=n(13578),k=n(92170),P=n(82855);class A extends Error{constructor(e,t){super(e),this.isNetworkFailure=t}}var I=n(65135);const E="-start",x="-end",M={},O={};let L;function D(e){if(e.endsWith(E)){e=e.slice(0,e.length-E.length);const t={endMeasure:L&&L.startMeasure(e).endMeasure,startTime:performance.now()};M[e]=t}else if(e.endsWith(x)){if(e=e.slice(0,e.length-x.length),M[e]){const{endMeasure:t,startTime:n}=M[e],i=Math.round(performance.now()-n);return O[e]=i,t&&t(),{name:e,timeTaken:i}}}else;}var R=n(68848),F=n(63045),B=n(38895);const N="feature-manifests",U="loc-manifests",$="feature-configs",_="loc-configs",H="default";var W,j;!function(e){e.idbStoreName="Configurations_12",e.idbName="wwConfigs",e.configStalenessDuration=6048e5,e.serverLruConfigCacheMax=10240,e.idbInitPromiseNameKey="initializeIdbKey",e.idbReadPromiseNameKey="readConfigsFromIdbKey",e.idbWritePromiseNameKey="writeConfigsToIndexedDbKey"}(W||(W={})),function(e){e.fromInMemoryCache="config.memory",e.fromServerCache="config.server",e.fromNetwork="config.network"}(j||(j={}));const G=new class{constructor(){this._mocksEnabled=!1,this._shouldInitializeMockMgrConfig=!1,this._mockConfigDictionary={},this._mocksEnabled=this.areMocksEnabled(),this._shouldInitializeMockMgrConfig&&(this._mockConfigDictionary["MockManager/default"]="MockManager/default")}get mockConfigDictionary(){return this._mockConfigDictionary}get mocksEnabled(){return this._mocksEnabled}initialize(e){if(!e)return void this.addMockQspToDictionary();const t=[];if(new URLSearchParams((0,S.zp)()).getAll("mock").forEach((e=>{e.trim().split(",").forEach((e=>{t.indexOf(e)<0&&t.push(e)}))})),0===t.length)return;const n=e&&e.scenarios;for(const e in n)if(n[e]&&t.indexOf(e)>-1){n[e].forEach((e=>{const{experienceType:t,instanceSrc:n}=e.source.configLink,{experienceType:i,instanceSrc:r}=e.target.configRef;this._mockConfigDictionary[`${t}/${n}`]=`${i}/${r}`}))}this.addMockQspToDictionary()}areMocksEnabled(){const e=new URLSearchParams((0,S.zp)());return this._shouldInitializeMockMgrConfig=!!e.get("mock"),this._shouldInitializeMockMgrConfig||e.getAll("item").some((e=>/^mock:/.test(e)))}addMockQspToDictionary(){new URLSearchParams((0,S.zp)()).getAll("item").filter((e=>/^mock:/.test(e))).forEach((e=>{const[t,n]=e.split(":"),[i,r]=n.split("|");this._mockConfigDictionary[i]=r}))}},V=/^\d{8}\.\d+$/;function q(e,t){if(!e)return;const{experienceType:n,instanceSrc:i,sharedNs:r}=e,o=[t,n,i];return r&&o.push(r),o.map((e=>e||"")).join("/").toLowerCase()}function z(e){if(!e)return null;if(e.match("^shared/")){const[t,n,i,r]=e.split("/");return{experienceType:i,instanceSrc:r,sharedNs:n}}{const[t,n]=e.split("/");return{experienceType:t,instanceSrc:n}}}function Q(e){const t=new Set;if(e&&e.properties)try{Z(e.properties,t)}catch(e){}return t}function Z(e,t){const n=e.configRef;n&&n.experienceType&&t.add(n);for(const n of Object.values(e))"object"==typeof n&&n&&Z(n,t)}function K(e,t=!1){if(!e)return;const n=(t?H:e.instanceSrc)||H;return!e.sharedNs||t?`${e.experienceType}/${n}`:`shared/${e.sharedNs}/${e.experienceType}/${n}`}function J(e,t){e&&e(t)}function X(e,t){return function(e){return e===$||e===N}(e)?Y(t&&t.feature):Y(t&&t.loc)}function Y(e){return e===F.w.Local}function ee(e,t,n){let i=!1;const r=G.mocksEnabled&&G.mockConfigDictionary&&G.mockConfigDictionary[t];let o;r&&(t=r,i=!0),o=i?"mock":e===_?"dev/loc":"prod";return`${o}/${/^shared/.test(t)?t:`${n}/${t}`}`}var te=n(57967);function ne(e,t,n){return Object.assign(Object.assign({},e),{message:t||e.message,pb:n?Object.assign(Object.assign({},e.pb),{customMessage:n}):e.pb})}class ie{constructor(){this.idb=indexedDB}get supported(){return!!this.idb}get isGetAllAllowed(){return!(!IDBObjectStore.prototype||!IDBObjectStore.prototype.getAll)}_setIndexedDb(e){this.idb=e}_getIdbPromise(){return this.idbPromise}getObject(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t;return yield this.withIdbStore("readonly","getObject",(n=>{t=n.get(e)})),t.result}))}getAll(){return(0,i.mG)(this,void 0,void 0,(function*(){let e;return yield this.withIdbStore("readonly","getAll",(t=>{e=t.getAll()})),e.result}))}getAllObjects(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.isGetAllAllowed)return this.getAll();const e=[];return yield this.withIdbStore("readonly","getAllObjects",(t=>{t.openCursor().onsuccess=function(t){const n=t.target&&t.target.result?t.target.result:void 0;n&&n.value&&(e.push(n.value),n.continue())}})),e}))}setObject(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.withIdbStore("readwrite","setObject",(n=>{n.put(t,e)}))}))}removeObject(e){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.withIdbStore("readwrite","removeObject",(t=>{t.delete(e)}))}))}clearObjects(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.withIdbStore("readwrite","clearObjects",(e=>{e.clear()}))}))}initializeIndexedDb(e=1,t="Default",n="MicrosoftNews",r=null){return(0,i.mG)(this,void 0,void 0,(function*(){this.storeName=t,this.idbPromise=r||new Promise(((i,r)=>{const o=this.idb.open(n,e);o.onerror=()=>{r(o.error)},o.onsuccess=()=>{i(o.result)},o.onupgradeneeded=()=>{o.result.createObjectStore(t)}}))}))}withIdbStore(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){return this.idbPromise.then((t=>new Promise(((i,r)=>{const o=t.transaction(this.storeName,e);o.oncomplete=()=>{i()},o.onabort=o.onerror=()=>r(o.error),n(o.objectStore(this.storeName))}))))}))}}var re=n(9791);class oe{constructor(e,t=!1){if(this.environment=e,this.enableConfigCaching=this.useConfigCaching(),this.stalenessCheckTimestamp=(new Date).getTime(),this.indexedDbMap=new Map,this.readConfigsFromIdb=(0,re.Z)(this._readConfigsFromIdb),!e||!e.targetScope||!e.appType)throw new Error("ResolverEnvironment or targetScope or appType does not exist.");this.initializeIdb=(0,re.Z)(this.initializeIdb),this.resolverEnvironment=e,this.indexedDb=new ie,t&&this.initializeIdb()}useConfigCaching(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;return!e||!e.enableConfigCaching||"true"===e.enableConfigCaching}tryGetConfigSync(e){if(e){const t=q(e,this.resolverEnvironment.appType);return this.indexedDbMap.get(t)}}getConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return;const t=q(e,this.resolverEnvironment.appType);return this.indexedDbMap.has(t)||(yield this.readConfigsFromIdb()),this.indexedDbMap.get(t)}))}updateCache(e){return(0,i.mG)(this,void 0,void 0,(function*(){e&&(e.forEach(((e,t)=>{if(e){const n={storageTimestamp:this.stalenessCheckTimestamp,configRefCacheKey:t,properties:e.properties};this.indexedDbMap.set(t,n)}})),yield this.writeConfigMapToIdb())}))}initializeIdb(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.enableConfigCaching)try{const e=this.resolverEnvironment.configCacheProperties&&this.resolverEnvironment.configCacheProperties.idbConfigOpenPromise;yield this.indexedDb.initializeIndexedDb(1,W.idbStoreName,W.idbName,e),this.indexedDbInitialized=!0,this.logMessage("IndexedDB initialized.")}catch(e){this.enableConfigCaching=!1,this.sendAppError(ne(te._d,"Failed to init configs IndexedDB",e))}}))}_readConfigsFromIdb(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.enableConfigCaching){this.indexedDbInitialized||(yield this.initializeIdb());try{const e=this.generateIdbKey();let t,n;const{idbConfigLookup:i=null,idbConfigReadPromise:r=null}=this.resolverEnvironment.configCacheProperties||{};t=(i||{})[e],t?n="pre-initialized config cache":r?(n="pre-initialized IndexedDb read",yield r,t=(i||{})[e]):(n="IndexedDb bulk read",t=yield this.indexedDb.getObject(e)),t?(t.forEach((e=>{e.configRefCacheKey&&!this.isConfigStale(e.storageTimestamp)&&this.indexedDbMap.set(e.configRefCacheKey,e)})),this.logMessage(`readConfigsFromIdb: Configs in IndexedDB: ${t.size}. Configs in memory: ${this.indexedDbMap.size}. CacheSource: ${n}.`)):this.logMessage(`readConfigsFromIdb: Didn't find any config in IndexedDB. CacheSource: ${n}`)}catch(e){this.sendAppError(ne(te.kJ,"IndexedDb Configs read failed",e))}}}))}writeConfigMapToIdb(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.enableConfigCaching&&this.indexedDbMap){this.indexedDbInitialized||(yield this.initializeIdb());try{const e=this.generateIdbKey();yield this.indexedDb.setObject(e,this.indexedDbMap),this.logMessage("writeConfigMapToIdb: completed")}catch(e){this.sendAppError(ne(te.yG,"Failed to write configMap to indexedDb",e))}}}))}generateIdbKey(){const{audienceMode:e="",locale:t={},pageType:n=""}=this.resolverEnvironment.targetScope||{},i=t.content||t,{language:r,market:o}=i;return[e,r,o,n,this.resolverEnvironment.appType||""].map((e=>e||"")).join("|").toLowerCase()}isConfigStale(e){return!e||this.stalenessCheckTimestamp-e>W.configStalenessDuration}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}logMessage(e){this.resolverEnvironment.loggerCallback&&this.resolverEnvironment.loggerCallback(e)}}var ae=n(68679),se=n(16614);class ce{constructor(e){if(this.resolverEnvironment=e,this.configMap=new Map,this.enableConfigService=!0,this.skipBelowTheFold=!1,this.configPromiseMap=new Map,this._shouldTryFallbackResolver=!1,this._hadNetworkError=!1,this._shouldUseCdnFallback=!1,this._initialCrsFetch=!0,this._useAkamaiLogic=!1,this.getCacheKeyFromConfigRef=e=>q(e,this.resolverEnvironment.appType),!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw this.enableConfigService=!1,new Error("ResolverEnvironment or configServiceParameters or targetScope does not exist.");e.segmentPlugins&&e.segmentPlugins.skipBelowTheFold&&(this.skipBelowTheFold=!0)}get hadNetworkError(){return this._hadNetworkError}get shouldTryFallbackResolver(){return this._shouldTryFallbackResolver}get configServiceEnabled(){return this.enableConfigService}get configServiceQueryParams(){return this.configServiceParams}get crsActivityId(){return this._crsActivityId}initialize(){return(0,i.mG)(this,void 0,void 0,(function*(){this.shouldUseConfigService(),yield this.setConfigServiceParams()}))}setConfigServiceParams(){return(0,i.mG)(this,void 0,void 0,(function*(){const{appType:e,configServiceParameters:t,targetScope:n}=this.resolverEnvironment,{maxDepth:i}=t;let{buildVersion:r}=t,o=`apptype=${e}`;o+=`&v=${r}`;const a=function(e,t){try{if(e&&e.pageExperiments&&e.pageExperiments.includes("prg-crsfdheadrem")&&"weather"!==t&&"finance"!==t){const t=Object.assign({},e);return t.pageExperiments=[],t}}catch(e){}return e}(n,e);o+="&targetScope="+JSON.stringify(a),i&&(o+=`&maxDepth=${i}`),this.skipBelowTheFold&&(o+="&skipBelowTheFold=true"),this.containsDevOnlyQueryParameters()&&(o+="&citem=dev:true"),this.configServiceParams=o}))}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}shouldUseConfigService(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;e&&e.enableConfigService&&(this.enableConfigService="true"===e.enableConfigService)}containsDevOnlyQueryParameters(){const e=this.resolverEnvironment.queryParams;if(!e)return!1;const t=e.item;if(t&&t.length>0)return!0;if(e.citem)return!0;return!!e.pcsonly}getConfigMap(){return this.configMap}tryGetConfigSync(e){if(e){const t=this.getCacheKeyFromConfigRef(e);return this.configMap.get(t)}}getConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){const{appType:t,configServiceParameters:n,targetScope:r}=this.resolverEnvironment;if(!n||!r||!e)return Promise.reject(Error("Either of configServiceParameters, targetScope or configRef is not set correctly."));if(!this.enableConfigService)return void(this._shouldTryFallbackResolver=!0);const o=this.getCacheKeyFromConfigRef(e);if(this.configMap.has(o))return this.configMap.get(o);if(this.configPromiseMap.has(o))return this.configPromiseMap.get(o);const a=new Promise(((n,a)=>(0,i.mG)(this,void 0,void 0,(function*(){try{this._useAkamaiLogic=function(e,t){const{pageExperiments:n,locale:i}=e||{};return i&&i.market&&"cn"===i.market.toLowerCase()||"edgeChromium"===t||"newsAndInterests"===t||"windowsNewsPlus"===t||"winWidgets"===t||function(e,t){return e&&e.length>0&&e.includes(t)}(n,B.XW)}(r,t),this._useAkamaiLogic&&this._initialCrsFetch&&this.sendPerfMarker("AkCrsConfig-start"),yield this.getConfigTreeFromCrs(e),this._useAkamaiLogic&&this._initialCrsFetch&&this.sendPerfMarker("AkCrsConfig-end"),this._shouldTryFallbackResolver&&this._useAkamaiLogic&&(this._shouldUseCdnFallback=!0,this._shouldTryFallbackResolver=!1,this._initialCrsFetch&&this.sendPerfMarker("FDCrsConfig-start"),yield this.getConfigTreeFromCrs(e),this._initialCrsFetch&&this.sendPerfMarker("FDCrsConfig-end"),this.sendAppError(ne(te.Sp,"CRS-AFD Retry",`Retryring to call CRS-AFD with ConfigRef ${this.getCacheKeyFromConfigRef(e)} because Akamai call had an error.`))),this._initialCrsFetch=!1,n(this.configMap.get(o))}catch(e){this.sendAppError(ne(te.Km,`Exception in getConfig for ${o}`,e)),a(e)}finally{this.configPromiseMap.delete(o)}}))));return this.configPromiseMap.set(o,a),a}))}getConfigTreeFromCrs(e){var t;return(0,i.mG)(this,void 0,void 0,(function*(){let n="";try{let i;const r=this.getCrsTimeout(),o=performance.now(),a=new Promise((t=>{i=setTimeout((()=>{const i=Object.assign(Object.assign({},te.yL),{pb:Object.assign(Object.assign({},te.yL.pb),{errorBehavior:ae.C.Fallback,isWebWorker:this.resolverEnvironment.isThisWebWorkerThread})});return this.sendAppError(ne(i,"CRS fetch timeout",`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsUrl: ${n||""}, timeElapsed: ${performance.now()-o}`)),t(null)}),r)}));n=this.generateCrsUrl(e),!(0,C.N)()&&"edgeChromium"===this.resolverEnvironment.appType&&this.resolverEnvironment.targetScope.pageExperiments.includes("prg-earlycrs")&&(0,se.Z)(e,{experienceType:"AppConfig",instanceSrc:"default"})&&v.Gq.set(de,{url:n});const s=((0,C.N)()&&window.crsPromise&&(null===(t=window.crsRequestData)||void 0===t?void 0:t.url)&&(0,se.Z)(e,{experienceType:"AppConfig",instanceSrc:"default"})?this.getConfigFromEarlyCrsPromise():this.downloadFromCrs(n,r)).then((e=>(i&&clearTimeout(i),e))),c=yield Promise.race([s,a]),d=c&&c.configs;if(!d||(0,T.Z)(d))return void(this._shouldTryFallbackResolver=!0);this._shouldTryFallbackResolver=!1;for(const e in d){const t=d[e];if(t&&t.properties){const n=this.getCacheKeyFromConfigRef(z(e));this.configMap.set(n,t)}}}catch(t){this._shouldTryFallbackResolver=!0,this.sendAppError(ne(te.GB,"CRS fetch network error",`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsFetchNetworkError: ${this._hadNetworkError}. Error: ${t}. CrsUrl: ${n||""}`))}}))}setDownloadFromCrsBeforeNetwork(e){this.downloadFromCrsBeforeNetwork=e}downloadFromCrs(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.downloadFromCrsBeforeNetwork){const t=yield this.downloadFromCrsBeforeNetwork(e);if(t)return t}const{abortableFetchCallback:n,hostHeaderOverride:i}=this.resolverEnvironment,r=!(0,C.N)()&&i?{headers:{host:i}}:void 0;return(n?n(e,t,r):fetch(e)).then((t=>this.processCrsResponse(e,t))).catch((e=>this.handleCrsDownloadError(e)))}))}handleCrsDownloadError(e){throw this._shouldTryFallbackResolver=!1,this._hadNetworkError=!0,e}processCrsResponse(e,t){if(this._crsActivityId=function(e){try{if(e&&"string"==typeof e)return e.match(/Ref A: [A-Z0-9]+/)[0].substring(7)}catch(e){}return""}(t.headers.get("x-msedge-ref")||""),t.ok)return t.json();const{isWebWorkerPresent:n,isThisWebWorkerThread:i}=this.resolverEnvironment,r=t.headers.get("X-Crs-BuildVersion")||"",o=t.headers.get("X-Crs-Env")||"",a=t.headers.get("x-msedge-ref")||"",s=`Url: ${e}, CRS Version: ${r}, CRS Env: ${o}, isWebWorkerPresent: ${n}`,c=Object.assign(Object.assign({},te.Wc),{pb:Object.assign(Object.assign({},te.Wc.pb),{userImpacting:!0,errorBehavior:ae.C.Fallback,isWebWorker:i,fetchNetworkResponse:{activityId:a,statusCode:t.status}})});return this.sendAppError(ne(c,"CRS returned non-200 response",s)),Promise.resolve()}generateCrsUrl(e){const t=e.sharedNs?`&sharedNs=${e.sharedNs}`:"",n=`?${`expType=${e.experienceType}&expInstance=${e.instanceSrc}${t}`}&${this.configServiceParams}`;return(this._shouldUseCdnFallback?new URL(n,this.resolverEnvironment.crsRetryBaseUrl):new URL(n,this.resolverEnvironment.configServiceParameters.configServiceBaseUrl)).toString()}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}getCrsTimeout(){return!this._shouldUseCdnFallback&&this._useAkamaiLogic&&(0,C.N)()?5e3:(0,C.N)()?1e4:2e3}getConfigFromEarlyCrsPromise(){const{crsPromise:e,crsRequestData:t}=window;return delete window.crsPromise,delete window.crsRequestData,e.then((e=>this.processCrsResponse(t.url,e))).catch((e=>this.handleCrsDownloadError(e)))}}const de="crs-request-data";let le=(e,t,n,r)=>(0,i.mG)(void 0,void 0,void 0,(function*(){if(!e)throw new Error("BlobFetcher.ts: Fetch Error: Relative Url is null or undefined.");const i=X(t,n)?"https://localhost.msn.com:9000/"+e:"https://assets.msn.com/periconfigs/"+e.toLowerCase();return(r?r(i,900,undefined):fetch(i)).then((e=>{if(e.ok)return e.json();throw new Error(`Non-200 response, Status: ${e.status}, StatusText: ${e.statusText}, fetch url: ${i}`)})).catch((e=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${i}, error: ${e}.`)}))})),ue=(0,re.Z)(le);class pe{constructor(e,t,n){this.failedConfigIndexFetches=[],this.appType=e,this.configOrigins=t,this.fetchAndParseConfigIndex=(0,re.Z)(this.fetchAndParseConfigIndex,((...e)=>e.join("/"))),this.resolverEnvironment=n}fetchAndParseConfigIndex(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const i=X(e,this.configOrigins);if(!n&&!i)return;const r=i?`${ee(e,t,this.appType)}/index.json`:`${e}/${t}/index.json/${n}`;try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return yield ue(r,e,this.configOrigins,t)}catch(e){i||this.failedConfigIndexFetches.push(e)}}))}getFailedConfigIndexFetches(){return this.failedConfigIndexFetches}}class he{constructor(e,t,n){this.failedConfigFetches=[],this.appType=e,this.configOrigins=t,this.fetchAndParseConfig=(0,re.Z)(this.fetchAndParseConfig,((...e)=>e.join("/"))),this.resolverEnvironment=n}fetchAndParseConfig(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function*(){const i=X(e,this.configOrigins);if(!r&&!i)return;const o=i?`${ee(e,t,this.appType)}/${n}`:`${e}/${t}/${n}/${r}`;try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return yield ue(o,e,this.configOrigins,t)}catch(e){i||this.failedConfigFetches.push(e)}}))}getFailedConfigFetches(){return this.failedConfigFetches}}class ge{constructor(e,t,n){this.manifestsMap=new Map,this.appType=e,this.configOrigins=t,this.resolverEnvironment=n}fetchAndParseManifest(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(X(e,this.configOrigins))return;const n=`${e}/${this.appType}/${t}.json`;if(!this.manifestsMap.has(e))try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback,i=yield ue(n,void 0,void 0,t);if(this.manifestsMap.set(e,i),(0,T.Z)(i))throw new Error(`Manifest response is ok but empty or undefined, relative url: ${n}`)}catch(t){throw this.manifestsMap.set(e,null),new Error(`ManifestService.ts: ${t}`)}return this.manifestsMap.get(e)}))}getConfigIndexHashedFileName(e,t){if(X(t,this.configOrigins))return;const n=`${e}/index.json`;return this.getFromManifest(n,t)}getConfigHashedFileName(e,t,n){if(X(n,this.configOrigins))return;const i=`${e}/${t}`;return this.getFromManifest(i,n)}getFromManifest(e,t){if(!this.manifestsMap||!this.manifestsMap.get(t))return;const n=this.manifestsMap.get(t);if(n&&n.fileHashes)return n.fileHashes[e.toLowerCase()];throw new Error(`ManifestService.ts: Manifest is defined but does not have fileHashes: ${e}: cacheKey snippet of manifest: ${JSON.stringify(n).substr(0,100)}`)}}function me(e,t){if((0,k.Z)(e))return t}var fe=n(83130);class ve{constructor(e){if(!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("SingleConfigResolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.appType=e.appType,this.targetScope=e.targetScope,this.buildVersion=e.configServiceParameters.buildVersion,this.configOrigins=e.configOrigins,this.manifestService=new ge(this.appType,this.configOrigins,e),this.configIndexService=new pe(this.appType,this.configOrigins,e),this.configService=new he(this.appType,this.configOrigins,e)}resolveConfigAsync(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=K(e),n=K(e,!0);this.buildNumber=this.tryGetBuildNumber()||(yield function(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){let n;const i=new URLSearchParams((0,S.zp)()).getAll("item"),r=i?i.find((e=>e&&0===e.indexOf("spalink:"))):void 0;r&&(n=r.replace("spalink:","").replace("/debug",""));const o=n||e;if(!o||!t||"latest"!==o&&"rolling"!==o&&!V.test(o))throw new Error(`Arguments are incorrect. Check buildVersion: ${o} appType: ${t}`);const a=`https://assets.msn.com/bundles/v1/${t}/${o}/v?${(new Date).getTime()}`;let s;try{if(s=yield fetch(a),!s||!s.ok)throw new Error(`Response not OK, Status: ${s.status}, StatusText: ${s.statusText}`);return(yield s.text()).trim()}catch(e){throw new Error(`getBuildNumberAsync Fetch Url: ${a}, ${e}`)}}))}(this.buildVersion,this.appType));const r=this.manifestService.fetchAndParseManifest(N,this.buildNumber),o=this.manifestService.fetchAndParseManifest(U,this.buildNumber);yield Promise.all([r,o]);const a=this.manifestService.getConfigIndexHashedFileName(t,N),s=this.manifestService.getConfigIndexHashedFileName(n,U),c=this.configIndexService.fetchAndParseConfigIndex($,t,a),d=this.configIndexService.fetchAndParseConfigIndex(_,n,s),l=yield Promise.all([c,d]).then((e=>({featureIndex:e[0],localizationIndex:e[1]}))),u=l.featureIndex&&l.featureIndex.configs||void 0,p=l.localizationIndex&&l.localizationIndex.configs||void 0,h=[];if(this.fetchMathingConfigs(h,u,N,$,t),this.fetchMathingConfigs(h,p,U,_,n),this.fetchMathingConfigs(h,p,U,_,n,!0),0==h.length)return;return function(e){if(!e||e.length<1)return null;const t=e[0];for(let n=1;n<e.length;n++)t.properties=(0,b.Z)(t.properties,e[n].properties,me);return t}((yield Promise.all(h).then((e=>e))).filter((e=>null!=e)))}))}fetchMathingConfigs(e,t,n,i,r,o=!1){t&&0!=t.length&&t.forEach((t=>{if((0,fe.J4)(t.targetScope,this.targetScope,o)){const o=t.src,a=this.manifestService.getConfigHashedFileName(r,o,n);e.push(this.configService.fetchAndParseConfig(i,r,o,a))}}))}getFailedFetches(){const e=[],t=this.configService.getFailedConfigFetches();t.length>0&&e.push(...t);const n=this.configIndexService.getFailedConfigIndexFetches();return n.length>0&&e.push(...n),e}get buildNumber(){return this._buildNumber}set buildNumber(e){this._buildNumber=e}tryGetBuildNumber(){return this.buildNumber?this.buildNumber:this.configOrigins.feature===F.w.Local&&this.configOrigins.loc===F.w.Production?null:this.buildVersion}}class ye{constructor(e){if(this.mergedConfigMap=new Map,this.mockManagerInitialized=!1,!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("Resolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.resolverEnvironment=e,this.appType=e.appType,this.singleConfigResolver=new ve(e)}getConfig(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const n=q(e,this.appType),{mockManager:i}=this.resolverEnvironment;if(i.mocksEnabled&&!this.mockManagerInitialized){this.mockManagerInitialized=!0;const e={scenarios:(yield this.getConfig({experienceType:"MockManager",instanceSrc:"default"})).properties.scenarios};i.initialize(e)}if(!this.mergedConfigMap.has(n)){yield this.getConfigRecursive(e,t);const n=this.singleConfigResolver.getFailedFetches();n.length>0&&n.forEach((e=>{J(this.resolverEnvironment.appErrorCallback,Object.assign(Object.assign({},te.e_),{message:"Fetch failed for a config",pb:Object.assign(Object.assign({},te.e_.pb),{customMessage:`Failed fetch url: ${e}`})}))}))}return this.mergedConfigMap.get(n)}))}getConfigMap(){return this.mergedConfigMap}getConfigRecursive(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const n=q(e,this.appType);if(n&&!this.mergedConfigMap.has(n))try{const i=yield this.singleConfigResolver.resolveConfigAsync(e);if(this.mergedConfigMap.set(n,i),t){const e=Q(i);if(0==e.size)return;const n=[];e.forEach((e=>{n.push(this.getConfigRecursive(e,t))})),yield Promise.all(n)}}catch(e){J(this.resolverEnvironment.appErrorCallback,Object.assign(Object.assign({},te.oH),{message:"Exception in getConfig.",pb:Object.assign(Object.assign({},te.oH.pb),{customMessage:`CacheKey: ${n} / Error: ${e}`})}))}}))}}class Se{constructor(e){if(this.resolverEnvironment=e,this.fallbackResolverCalled=!1,this.crsInitComplete=!1,this.enableIdbCaching=!1,this.configResolverMap=new Map,this.configResolverMapSet=!1,!e||!e.targetScope)throw new Error("ResolverEnvironment or targetScope does not exist.");var t;this.configService=new ce(e),this.enableIdbCaching=(t=e.targetScope.pageExperiments)&&t.indexOf("prg-gitconfigs-t")>-1,this.configCache=new oe(e,this.enableIdbCaching),this.fallbackResolver=new ye(e)}get crsHadNetworkError(){return this.configService.hadNetworkError}get crsActivityId(){return this.configService.crsActivityId}tryGetConfigSync(e){if(e)return this.configService.tryGetConfigSync(e)||this.tryToGetFromInMemory(e)||this.configCache.tryGetConfigSync(e)}getConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.resolverEnvironment.configOrigins.feature===F.w.Local||this.resolverEnvironment.mockManager.mocksEnabled){const t="function"==typeof this.resolverEnvironment.loggerCallback;try{const n=yield this.fallbackResolver.getConfig(e);return n?Promise.resolve(n):(t&&this.resolverEnvironment.loggerCallback(`ConfigResolver: Failed to fetch configs from local configs. Config: ${q(e)}`),Promise.resolve(null))}catch(e){return t&&this.resolverEnvironment.loggerCallback(`${e.message}`),Promise.reject(e)}}if(!this.configResolverMapSet&&!this.crsInitComplete&&(null==e?void 0:e.properties)){const t=e.properties;t&&t.configs&&(this.setConfigResolverMap(t.configs),this.configResolverMapSet=!0)}const t=this.configResolverMapSet&&e?this.tryToGetFromInMemory(e):null;if(t)return t;this.crsInitComplete||(this.sendPerfMarker("CrsConfig-start"),yield this.initiateConfigService(),this.crsInitComplete=!0,this.sendPerfMarker("CrsConfig-end")),this.configResolverMapSet&&this.crsInitComplete&&this.sendAppError(ne(te.cm,"Fallback to network call",`Config Ref ${this.getCacheKeyFromConfigRef(e)} not found in prefetched configs. Network Fallback`));const n=e?this.configService.tryGetConfigSync(e):null;if(n)return n;const r=new Promise((t=>(0,i.mG)(this,void 0,void 0,(function*(){if(this.configService.shouldTryFallbackResolver){this.fallbackResolverCalled=!0;const n=yield this.fallbackResolver.getConfig(e);if(n)return t(n)}else{const n=yield this.configService.getConfig(e);if(n)return t(n)}return t(null)})))),o=new Promise((t=>(0,i.mG)(this,void 0,void 0,(function*(){if(this.enableIdbCaching){const n=yield this.configCache.getConfig(e);if(n)return t(n)}}))));return Promise.race([o,r])}))}getConfigServiceObject(){return this.configService}initiateConfigService(){return(0,i.mG)(this,void 0,void 0,(function*(){yield this.configService.initialize(),yield this.configService.getConfig({experienceType:"AppConfig",instanceSrc:"default"})}))}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}setConfigResolverMap(e){for(const t in e){const n=e[t];if(n&&n.properties){const e=this.getCacheKeyFromConfigRef(z(t));this.configResolverMap.set(e,n)}}}tryToGetFromInMemory(e){const t=this.getCacheKeyFromConfigRef(e);return this.configResolverMap.get(t)}getCacheKeyFromConfigRef(e){return q(e,this.resolverEnvironment.appType)}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}}const Ce=864e5,be="__ResolverInstance__";class we{constructor(){this.currentTargetScope=c.jG.CurrentRequestTargetScope,this.configMap=new Map,this.env=c.jG.Environment||d.q.prod,this.promiseMap=new Map,this.refreshServerCachePromiseMap=new Map,this.stalenessCheckTimestamp=(new Date).getTime(),this.isMultiConfigRetrievalEnabled=!1,this.localOverrideMap={},this.peregrineFlightsKey="prgflights",this.isInitialized=!1,this.initializeCaching()}static getInstance(){return v.Gq.get(be,(()=>new we))}static resetResolverInstance(){const e=new we;v.Gq.set(be,e),Te=(0,y.h)(we)}getConfigResolver(){return this.configResolver}initializeCaching(){this.cdnConfigBaseUrl=c.jG.ConfigRootUrl||c.jG.EnvironmentConfigUrl,this.configServiceBaseUrl=c.jG.ConfigServiceBaseUrl,this.resolverErrors=[],this.configTimings=[],this.useWebWorkerToCache=u.yb;const e=c.jG.EnableCMSPPEConfigs;this.useServerCache=null!==p.o&&!e,this.setTargetScopeAndConfigServiceParams()}setTargetScopeAndConfigServiceParams(){const e=c.jG.EnableCMSPPEConfigs;this.currentTargetScope=this.currentTargetScopeOverride||c.jG.CurrentRequestTargetScope,!c.jG.IsGitConfigs&&this.currentTargetScope&&(this.currentTargetScope.locale=c.jG.LocaleContentMarket);const{AppType:t,WidgetAttributes:n}=c.jG,i=n&&n.clientPerf&&n.clientPerf.shouldUsePWOnlyFlights||"distribution"===t,r=this.currentTargetScope&&(i?(0,P.Kd)(this.currentTargetScope.pageExperiments):(0,P.Mx)(this.currentTargetScope.pageExperiments));if(r&&r.length>0&&(this.peregrineFlights=r.join(",")),this.scopeWithPeregrineFlights=Object.assign(Object.assign({},this.currentTargetScope),{domain:n&&(0,S.Dp)()||this.currentTargetScope&&this.currentTargetScope.domain,pageExperiments:r}),this.enableConfigService=this.useConfigService(),this.enableConfigService){this.configServiceParameters="?targetScope="+JSON.stringify(this.scopeWithPeregrineFlights),this.configServiceParameters+=`&apptype=${t}`;const{IsMultiConfigRetrievalEnabled:n,CacheBustingIdentifier:i}=c.jG;this.isMultiConfigRetrievalEnabled=n,this.isMultiConfigRetrievalEnabled&&(this.configServiceParameters+=`&maxDepth=${this.getConfigRetrievalMaxDepth()}`);const r=(0,C.N)()&&window._cbid||i;r&&(this.configServiceParameters+=`&cbid=${r}`),this.containsDevOnlyQueryParameters()&&(this.configServiceParameters+="&item=dev:true"),e&&(this.configServiceParameters+="&item=cms:ppe")}this.storageKey=this.generateKey()}initialize(e,t){if(this.isInitialized)return;var n;if(this.perfTimeline=(0,r.oA)("Resolver","Resolver",!0),n=this.perfTimeline,L=n,!c.jG.IsGitConfigs)return;const{_idbConfigOpenPromise:i=null,_idbConfigReadPromise:a=null,_idbConfigLookup:s=null}=(0,C.N)()?window:{},d={idbConfigOpenPromise:i,idbConfigReadPromise:a,idbConfigLookup:s},l={buildVersion:c.jG.BuildVersion,configServiceBaseUrl:c.jG.ConfigServiceBaseUrl.toString()},u=c.jG.CrsRetryBaseUrl,{pageExperiments:p}=this.currentTargetScope,m={appType:c.jG.AppType,configServiceParameters:l,targetScope:this.scopeWithPeregrineFlights,env:c.jG.Environment.toString(),featureFlags:c.jG.FeatureFlags,isThisWebWorkerThread:!1,isWebWorkerPresent:this.useWebWorkerToCache,queryParams:h.c.getParamsObj((0,S.zp)()),appErrorCallback:e,perfMarkerCallback:D,loggerCallback:o.k.log.bind(o.k),logObjectsCallback:o.k.logObjects.bind(o.k),isDebug:o.k.isDebug(),configCacheProperties:d,configOrigins:c.jG.ConfigOrigins,segmentPlugins:t,mockManager:G,crsRetryBaseUrl:u,crsDisableServerCache:c.jG.CrsDisableServerCache,abortableFetchCallback:p&&(p.includes("useabortfetch")||p.includes("prg-1sw-abtfetch"))||!(0,C.N)()?g.Sm:void 0,hostHeaderOverride:c.jG.HostHeaderOverride};this.configResolver=new Se(m),this.isInitialized=!0}mergeConfig(e){if(!e||e.length<1)return null;const t=e[0];for(let n=1;n<e.length;n++)t.properties=(0,b.Z)(t.properties,e[n].properties,this.customizer);return t}resolveConfigIndex(e){if(!e)return null;const t=[];return e.configs.forEach((e=>{this.targetScopeMatched(e)&&t.push(e.href)})),e.overrideConfig&&m.b.stringHasData(e.overrideConfig.href)&&t.push(e.overrideConfig.href),t}targetScopeMatched(e){const t=e.targetScope;return!t||this.audienceModeMatched(t)&&this.browserTypeMatched(t)&&this.deviceTypeMatched(t)&&this.domainMatched(t)&&this.experimentMatched(t)&&this.marketMatched(t)&&this.osMatched(t)&&this.pageTypeMatched(t)&&this.platformMatched(t)}audienceModeMatched(e){return!e.audienceMode||this.currentTargetScope.audienceMode===e.audienceMode}browserTypeMatched(e){return!e.browser||!e.browser.browserType||!(!this.currentTargetScope.browser||this.currentTargetScope.browser.browserType!==e.browser.browserType||e.browser.version&&this.currentTargetScope.browser.version!==e.browser.version)}deviceTypeMatched(e){return!e.deviceFormFactor||this.currentTargetScope.deviceFormFactor===e.deviceFormFactor}domainMatched(e){return!e.domain||this.currentTargetScope.domain===e.domain}experimentMatched(e){return this.currentTargetScope.pageExperiments=this.currentTargetScope.pageExperiments||[],!!(!(0,w.Z)(e.experimentId)||(0,T.Z)(e.experimentId)||this.currentTargetScope.pageExperiments.indexOf(e.experimentId)>=0)}stringsEqualCaseInsensitive(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}marketMatched(e){const t=e.locale||e.locale;if(!t)return!0;const n=this.currentTargetScope.locale;return!(t.language&&!this.stringsEqualCaseInsensitive(t.language,n.language)||t.market&&!this.stringsEqualCaseInsensitive(t.market,n.market)||t.script&&!this.stringsEqualCaseInsensitive(t.script,n.script))}osMatched(e){return!e.os||this.currentTargetScope.os===e.os}pageTypeMatched(e){return!e.pageType||this.currentTargetScope.pageType===e.pageType}platformMatched(e){return!e.platform||this.currentTargetScope.platform===e.platform}customizer(e,t){if((0,k.Z)(e))return t}clearInternalState(){this.configMap.clear()}overrideCurrentRequestTargetScope(e){this.currentTargetScopeOverride=e,this.currentTargetScopeOverride&&(this.currentTargetScope=this.currentTargetScopeOverride)}overrideCurrentRequestEnvironment(e){this.env=e||d.q.prod}overrideConfig(e,t,n){if(this.env!==d.q.prod){const i="string"==typeof e?e:(0,l.B5)(e);this.localOverrideMap[i]={experienceType:t,properties:n,typeVersion:"1.0.0",_name:"index"}}}getRootConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!c.jG.IsGitConfigs)return yield this.getConfig(e);const t=yield this.getEntryPointConfigRef();return yield this.getConfig(t.configRef)}))}getEntryPointConfigRef(){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield this.getConfig({experienceType:"AppConfig",instanceSrc:"default"})).properties.rootExperience}))}getConfigSync(e){if(!e||!this.currentTargetScope||!c.jG.IsGitConfigs)return;const t=(0,l.B5)(e),n=t&&this.localOverrideMap[t];if(n)return n;const i=this.configResolver&&this.configResolver.tryGetConfigSync(e);return i?{experienceType:e.experienceType,properties:i.properties||{},typeVersion:"Git",_name:t}:void 0}getConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!this.currentTargetScope)return Promise.reject(new Error(`getConfig: Invalid target scope when fetching config ${JSON.stringify(e)}`));const t=performance.now();if(c.jG.IsGitConfigs){if("string"==typeof e){const t="Invalid config Id for Git configs flight";return this.resolverErrors.push(Object.assign(Object.assign({},a.lu7),{message:t,pb:Object.assign(Object.assign({},a.lu7.pb),{userImpacting:!0,customMessage:e})})),Promise.reject(new Error(`${t}: ${e}`))}if(!this.configResolver){const t="Invalid configResolver object for Git configs flight";return this.resolverErrors.push(Object.assign(Object.assign({},a.ASE),{message:t,pb:Object.assign(Object.assign({},a.ASE.pb),{userImpacting:!0,customMessage:JSON.stringify(e)})})),Promise.reject(new Error(`${t}: ${JSON.stringify(e)}`))}const n=(0,l.B5)(e),i=this.localOverrideMap[n];if(i)return i;const r=this.perfTimeline&&this.perfTimeline.startMeasure("config",n).endMeasure;let o,s;try{s=this.configResolver.tryGetConfigSync(e);let i=s;if(!i){this.addConfigTiming(e.experienceType,t,"network"),i=yield this.configResolver.getConfig(e);const n=this.configResolver.crsActivityId;n&&I.M0.addOrUpdateCustomProperty("crsActivityId",n)}return i?o={experienceType:e.experienceType,properties:i.properties||{},typeVersion:"Git",_name:(0,l.B5)(e)}:Promise.reject(new A(`Could not fetch Git config id ${JSON.stringify(e)}`,this.configResolver.crsHadNetworkError))}finally{if(r){r({customSuffix:`${n}-${(s?"memory":o&&"network")||"error"}`})}}}const n=e;if(!n||!(0,w.Z)(n)||(0,T.Z)(n))throw new Error("getConfig: Invalid relativeUrl");const r=this.localOverrideMap[n];if(r)return r;const s=this.getCacheKey(n),d=this.configMap.get(s);if(d)return this.addConfigTiming(d.experienceType,t,"cache"),d;const u=this.promiseMap.get(s);if(u)return u;let h=!1;const g=this.perfTimeline&&this.perfTimeline.startMeasure("config",n).endMeasure;let m,f;const v=new Promise(((e,r)=>(0,i.mG)(this,void 0,void 0,(function*(){try{if(this.useServerCache){let i=!1,r=!1;const c=yield p.o.has(s);if(c){const a=yield p.o.get(s),c=a?JSON.parse(a):null;c?(this.configTimings.push({experienceType:c.experienceType,cacheFetchDuration:performance.now()-t}),r=!!c.relatedConfigIndexHref,h=!0,this.promiseMap.delete(s),e(c),this.isServerCacheConfigStale(c.storageTimestamp)&&(yield this.updateServerCache(n,c))):(o.k.log(`Resolver: cacheKey=${s} Undefined from server cache`),i=!0)}if(o.k.logObjects({serverCacheGetConfig:{cacheKey:s,isHeadConfig:r,isCached:c,hasCacheError:i}}),c&&i){const e="Sever Cache key exists but server cache is undefined. Usually due to timeout when server cache IPC is busy.",t=`cacheKey=${s}`,n=new Error(e);throw I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.pay),{message:e,pb:Object.assign(Object.assign({},a.pay.pb),{customMessage:t})})),n}if(c)return;const d=this.getConfigFromNetwork(n),l=(yield d).get(s);m=l.experienceType,this.addConfigTiming(m,t,f="network"),e(l)}else{const i=(yield yield this.getConfigFromNetwork(n)).get(s);m=i.experienceType,this.addConfigTiming(m,t,f="network"),e(i)}}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},a.Sp_),{message:"Exception in getConfig",pb:Object.assign(Object.assign({},a.Sp_.pb),{customMessage:`Relative Url: ${n}. Error ${e.message||e}`})})),r(e)}finally{h=!0,this.promiseMap.delete(s),g&&g({customSuffix:`${m}-${n}-${f}`})}}))));return h||this.promiseMap.set(s,v),v}))}getConfigFromNetwork(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const n=this.getCacheKey(e),i=new Map;if(this.enableConfigService){const r=this.removeCmsPathFromRelativeUrl(e)+this.configServiceParameters;try{if(this.isMultiConfigRetrievalEnabled){const t=yield this.downloadFile(new URL(`${r}${this.configServiceBaseUrl.search}`,this.configServiceBaseUrl),!0);if(t&&t.rootConfigIndexId&&t.configs){const n=Object.keys(t.configs).map((e=>t.configs[e]));for(const t of n)if(t&&t.configIndexHref){const r=t.configIndexHref,a=r===e;yield this.addConfigToConfigMap(r,t,a?n:null),i.set(this.getCacheKey(r),t),(0,C.N)()&&o.k.log(`Resolver: ${r} config for ${t.experienceType} fetched from network using CRS url with multi config support.`)}return i}}else{const t=yield this.downloadFile(new URL(`${r}${this.configServiceBaseUrl.search}`,this.configServiceBaseUrl),!0);if(t)return yield this.addConfigToConfigMap(e,t),i.set(n,t),(0,C.N)()&&o.k.log(`Resolver: ${n} config for ${t.experienceType} fetched from network using CRS url.`),i}}catch(n){const i=`CRS fetch failed for ${e}.`,o=`CRS relative Url: ${r} Error: ${n}`;t?I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.VI5),{message:i,pb:Object.assign(Object.assign({},a.VI5.pb),{customMessage:o})})):this.resolverErrors.push(Object.assign(Object.assign({},a.GB_),{message:i,pb:Object.assign(Object.assign({},a.GB_.pb),{customMessage:o})}))}}if(i&&!i.has(n)){const t=yield this.downloadMergeConfig(e);t&&(yield this.addConfigToConfigMap(e,t),i.set(n,t),(0,C.N)()&&o.k.log(`Resolver: ${n} config fetched from network using Akamai url.`),this.enableConfigService&&this.resolverErrors.push(Object.assign(Object.assign({},a.CS7),{message:"Configs served from CDN after CRS fetch failed",pb:Object.assign(Object.assign({},a.CS7.pb),{customMessage:`Relative Url: ${e} CRS Params: ${this.configServiceParameters}`})})))}return i}))}addConfigToConfigMap(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){t.storageTimestamp=this.stalenessCheckTimestamp,t.configIndexHref=e;const i=this.getCacheKey(e);if(this.useServerCache){n&&(t.relatedConfigIndexHref=n.map((e=>e.configIndexHref)));const e=JSON.stringify(t);yield p.o.set(i,e,Ce)}else this.configMap.set(i,t)}))}updateServerCache(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.useServerCache)try{if(!this.refreshServerCachePromiseMap.get(e)){if(t.relatedConfigIndexHref){yield Promise.all(t.relatedConfigIndexHref.map((n=>{const i=n===e?this.refreshConfigServerCache(e,t):this.refreshConfigServerCache(n);return this.refreshServerCachePromiseMap.set(n,i),i})));for(let e=0;e<t.relatedConfigIndexHref.length;e++)this.refreshServerCachePromiseMap.delete(t.relatedConfigIndexHref[e])}else{const n=this.refreshConfigServerCache(e,t);this.refreshServerCachePromiseMap.set(e,n),yield n,this.refreshServerCachePromiseMap.delete(e)}this.getConfigFromNetwork(e)}}catch(t){const n=`Update server cache failed for ${e}.`,i=`Error: ${t}`;I.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.VI5),{message:n,pb:Object.assign(Object.assign({},a.VI5.pb),{customMessage:i})}))}}))}refreshConfigServerCache(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(!this.useServerCache)return;const n=this.getCacheKey(e);if(!t){const e=yield p.o.get(n);t=e?JSON.parse(e):null}if(t){t.storageTimestamp=this.stalenessCheckTimestamp;const e=JSON.stringify(t);yield p.o.set(n,e,Ce)}}))}purgeRenderCacheUponConfigChanges(e){if(!e)try{(0,f.$o)().removeSubstringKeys("lastKnown_"),(0,f.$o)().removeSubstringKeys("timestamp_"),(0,f.$o)().removeSubstringKeys("keys_")}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},a.GLL),{message:"Failed to purge render cache when cached config and network config is not same.",pb:Object.assign(Object.assign({},a.GLL.pb),{customMessage:e})}))}}downloadMergeConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.downloadFile(new URL(`${e}${this.cdnConfigBaseUrl.search}`,this.cdnConfigBaseUrl),!1),n=this.resolveConfigIndex(t),i=yield this.downloadExperienceConfig(this.cdnConfigBaseUrl,n),r=this.mergeConfig(i);return r.experienceType=t.experienceType,r}))}downloadExperienceConfig(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=[];return t.forEach((t=>{n.push(this.downloadFile(new URL(`${t}${e.search}`,e),!1))})),yield Promise.all(n)}))}downloadFile(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=(0,C.N)()?1e4:900,i=e.toString();return(0,g.Sm)(i,n).then((e=>{if(e.ok)return e.json();let n="";if(t){const t=e.headers.get("X-Crs-BuildVersion")||"";n=`msedge ref: ${e.headers.get("x-msedge-ref")||""} Status: ${e.status}, Status Text: ${e.statusText}, Url: ${i} and CRS Version: ${t}`,this.resolverErrors.push((0,s.Tr)(a.Wct,"CRS sent non-200 response",n))}else n=`Status: ${e.status}, Status Text: ${e.statusText}, Url: ${i}`,this.resolverErrors.push((0,s.Tr)(a.h6w,"Cdn config fetch received non-200 response",n));return Promise.resolve()}))}))}generateKey(){if((0,C.N)()){const{audienceMode:e="",locale:t={},pageType:n=""}=this.currentTargetScope||{},i=t.content||t,r=i?(0,R.p)(i):"",o=t.display||i;return[e,r,o?(0,R.p)(o):"",n,c.jG.AppType||""].map((e=>e||"")).join("|").toLowerCase()}{let{audienceMode:e="",browser:t=null,deviceFormFactor:n="",locale:i={},os:r={},pageType:o="",platform:a="",pageExperiments:s=null}=this.currentTargetScope||{};const d=i.content||i,{language:l,market:u}=d,{browserType:p="",version:h=""}=t||{};s=(0,P.Mx)(s);return[e,p,h,n,l,u,r,o,a,s?s.join():"",c.jG.AppType||""].map((e=>e||"")).join("|").toLowerCase()}}useConfigService(){const e=(0,S.zp)();if(e){const t=h.c.getQueryParameterByName("enableConfigService",e);if(t)return"true"===t.toLocaleLowerCase()}return c.jG.EnableConfigService}getConfigRetrievalMaxDepth(){const e=h.c.getQueryParameterByName("maxDepth",(0,S.l4)());return e||(c.jG.FeatureFlags&&c.jG.FeatureFlags.crsMaxDepth?c.jG.FeatureFlags.crsMaxDepth:"10")}containsDevOnlyQueryParameters(){const e=(0,S.zp)(),t=h.c.getQueryParameterByName("item",e);if(t&&t.length>0)return!0;const n=h.c.getQueryParameterByName("pcsonly",e);return!!(n&&n.length>0)}getResolverErrors(){return this.resolverErrors}refreshConfigCache(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.useWebWorkerToCache)try{const e=yield(0,u.ot)({id:"refreshconfigs"});if(e&&e.fetched&&void 0!==e.payload&&null!==e.payload){const t=e.payload;this.purgeRenderCacheUponConfigChanges(t.configsEqual);try{(0,f.$o)().setItem(this.peregrineFlightsKey,this.peregrineFlights)}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},a.g_9),{message:"Error writing prg flights to ",pb:Object.assign(Object.assign({},a.g_9.pb),{customMessage:e})}))}if(t.liveCbId){const e=t.liveCbId.toString();this.writeCbidInLocalStorage(e);const n=c.jG.CacheBustingIdentifier||"",i=window._cbid||"";c.jG.IsGitConfigs||e===n&&e===i||this.resolverErrors.push(Object.assign(Object.assign({},a.N1V),{message:"Different Cbid detected than configured.",pb:Object.assign(Object.assign({},a.N1V.pb),{customMessage:`PcsCbid = ${n}. HighestCbid = ${i}. LiveCbid = ${e}.`})}))}}}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},a.rP7),{message:"refreshConfigCache error",pb:Object.assign(Object.assign({},a.rP7.pb),{customMessage:e})}))}}))}isConfigStale(e){return!e||this.stalenessCheckTimestamp-e>2592e5}isServerCacheConfigStale(e){return!e||this.stalenessCheckTimestamp-e>3e5}removeCmsPathFromRelativeUrl(e){return e.replace("cms/api/amp/experienceConfigIndex/","")}getConfigServiceParameters(){return this.configServiceParameters}addConfigTiming(e,t,n){this.configTimings.push({experienceType:e,[n+"FetchDuration"]:performance.now()-t})}getConfigTimings(e={},t=!1){if(c.jG.IsGitConfigs)return void Object.assign(e,O);if(!this.configTimings)return;let n=0,i=0;for(const r of this.configTimings){const o=r.experienceType.toLowerCase(),a=r.cacheFetchDuration,s=r.networkFetchDuration;("entrypoint"===o||"river"===o||"contentpreview"===o||c.jG.IsDebug||t)&&(void 0!==s&&(e["ConfigFetch."+o]=Math.round(s)),void 0!==a&&(e["ConfigCache."+o]=Math.round(a))),void 0!==a&&(n+=a),void 0!==s&&(i+=s)}n&&(e["ConfigCache.All"]=Math.round(n)),i&&(e["ConfigFetch.All"]=Math.round(i))}setConfigTimingsObject(e){this.configTimings=e}getCacheKey(e){return null===e?null:this.removeCmsPathFromRelativeUrl(e)+"_"+this.storageKey}prgFlightsSameAsLocalStorage(){try{const e=(0,f.$o)().getItem(this.peregrineFlightsKey);return e&&this.peregrineFlights&&e===this.peregrineFlights}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},a.A5T),{message:"Error reading prg flights from localStorage",pb:Object.assign(Object.assign({},a.A5T.pb),{customMessage:e})}))}return!1}getConfigsCacheLocalStorageKey(){const{audienceMode:e,pageType:t}=this.currentTargetScope||{},n=c.jG.LocaleContentMarket||{};return`config_hash_${e}_${n.language}_${n.market}_${t}_${c.jG.AppType}`}writeCbidInLocalStorage(e){const t=`cbid_${c.jG.AppType||""}`;try{(0,f.$o)().setItem(t,e)}catch(n){throw`Error writing cbid: ${e} to local storage with key ${t}. Error: ${n}`}}}let Te=(0,y.h)(we);const ke={getRootConfig:e=>Te.getRootConfig(e),getEntryPointConfigRef:()=>Te.getEntryPointConfigRef(),getConfig:e=>Te.getConfig(e),getConfigSync:e=>Te.getConfigSync(e),mergeConfig:e=>Te.mergeConfig(e),resolveConfigIndex:e=>Te.resolveConfigIndex(e),targetScopeMatched:e=>Te.targetScopeMatched(e),getConfigTimings:(e={},t=!1)=>Te.getConfigTimings(e,t),getResolverErrors:()=>Te.getResolverErrors(),refreshConfigCache:()=>Te.refreshConfigCache(),getInstance:()=>Te,setTargetScopeAndConfigServiceParams:()=>Te.setTargetScopeAndConfigServiceParams(),initialize:(e,t)=>Te.initialize(e,t),getUseConfigService:()=>Te.useConfigService(),overrideConfig:(e,t,n)=>Te.overrideConfig(e,t,n),overrideCurrentRequestTargetScope:e=>Te.overrideCurrentRequestTargetScope(e),overrideCurrentRequestEnvironment:e=>Te.overrideCurrentRequestEnvironment(e),generateKey:()=>Te.generateKey(),clearInternalState:()=>Te.clearInternalState(),initializeCaching:()=>Te.initializeCaching(),getConfigServiceParameters:()=>Te.getConfigServiceParameters(),setConfigTimingsObject:e=>Te.setConfigTimingsObject(e),getCacheKey:e=>Te.getCacheKey(e),updateServerCache:(e,t)=>Te.updateServerCache(e,t)}},32181:function(e,t,n){"use strict";function i(e){return s(e,(e=>e.configRef.experienceType),(e=>e.experienceType),null)}function r(e){return s(e,(e=>e.configRef),(e=>e.href),(e=>e))}function o(e){return`${e.experienceType}_${e.instanceSrc}_${e.sharedNs||""}`}function a(e){return e&&null!=e.instanceId&&!!s(e,(e=>e.configRef&&e.configRef.experienceType&&e.configRef.instanceSrc),(e=>e.experienceType&&null!=e.href),null)}function s(e,t,n,i,r){if(void 0===r&&(r=null),null!=e){if("string"==typeof e)return i&&i(e)||r;const o=e;if(o.configRef)return t&&t(o)||r;const a=e;if(n)return n(a)||r}return r}n.d(t,{B5:function(){return o},Fr:function(){return r},M:function(){return i},oO:function(){return a}})},26769:function(e,t,n){"use strict";n.d(t,{Uq:function(){return a},YO:function(){return r},ds:function(){return i},k6:function(){return o},vC:function(){return c},w5:function(){return s}});const i="csux_evt",r="csux_evt-",o=9e5,a=new Map([["BackgroundImageWC",864e5],["SuperNav",9e5]]),s=new Map([["BackgroundImageWC",12096e5],["SuperNav",12096e5]]),c={start_year:2023,start_month:1,start_day:31,end_year:2099,end_month:12,end_day:31}},83216:function(e,t,n){"use strict";n.d(t,{Q:function(){return h},Y:function(){return g}});var i=n(33940),r=n(98304),o=n(19388),a=n(68364),s=n(33954),c=n(26769),d=n(33379),l=n(27003),u=n(987),p=n(85663);class h{constructor(){(0,d.N)()&&(this.localstorage_get(null,r.J_l),(0,o.b1)().then((()=>{this.autoCleanup()})))}autoCleanup(){if(!(0,d.N)())return;if(!this.eventData)return;let e;for(e in this.eventData){const t=e;let n;for(n in this.eventData[t]){const e=n,i=this.eventData[t][e],r=(new Date).getTime();i.timestamp_EventStart+c.w5.get(t)<r&&delete this.eventData[t][e]}}this.localstorage_save(null)}dismissCreative(e,t,n,i){if((0,d.N)())if(e&&t&&n){for(const i in this.eventData[t][e].expiredCreatives)if(i===n)return;this.eventData[t][e].expiredCreatives.push(n),this.localstorage_save(e,i)}else{const r=`Missing data to save creative dismissal. Event ID: ${e}, Experience ID: ${t}, Creative ID: ${n}`;i?(0,a.H)(i,r):s.k.logError(r)}}getCMSContent(e,t,n,i){if(!e||!t||!n){const r=`Missing data to return current cms content. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${n}`;return i?(0,a.H)(i,r):s.k.logError(r),null}return this.eventData&&this.eventData[t]&&this.eventData[t][e]&&this.eventData[t][e].cmsData?this.eventData[t][e].cmsData:null}static getInstance(){return h.instance||(h.instance=new h),h.instance}getCurrentCreativeId(e,t,n,r,o,c){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(0,d.N)())return null;if(!e||!t||!n){const i=`Missing data to return current creative. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${n}`;return c?(0,a.H)(c,i):s.k.logError(i),null}let i;if(!(this.eventData&&this.eventData[t]&&this.eventData[t][e]))return null;i=this.eventData[t][e].currentCreative;return yield this.selectCreative(n,e,t,r,o,i,c)}))}localstorage_get(e,t){if((0,d.N)())try{this.eventData=(0,u.$o)().getObject(c.ds)}catch(n){t?(0,a.H)(t,`Get local storage operation failed for event - ${e}.`):s.k.logError(n)}}localstorage_save(e,t){if((0,d.N)())try{(0,u.$o)().setObject(c.ds,this.eventData)}catch(n){return void(t?(0,a.H)(t,`Save local storage operation failed for event - ${e}.`):s.k.logError(n))}}selectCreative(e,t,n,r,o,l,u,h){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e||0===e.length)return null;if(r){const e=new Date,t=new Date(r.start_year,r.start_month-1,r.start_day);t.setDate(t.getDate()-1);const n=new Date(r.end_year,r.end_month-1,r.end_day);if(n.setDate(n.getDate()+1),!(t<=e&&e<=n))return null}const i=(0,p.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].timestamp_EventStart);if(!l&&i&&!o)return e[0];if(o){const i=(new Date).getTime(),r=this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].timestamp_EventLastUpdate?this.eventData[n][t].timestamp_EventLastUpdate:0;if(!(0,d.N)()||r+c.k6<i){const i=()=>fetch(o),r=i=>{switch(n){case"BackgroundImageWC":this.eventData[n][t]={cmsData:{attribution:i.headlines[0].subtitle,imageSource:i.headlines[1].title,imageHref:i.headlines[2].title,title:i.headlines[0].title},currentCreative:e[0],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,u);break;case"SuperNav":this.eventData[n][t]={cmsData:{display:i.headlines[1].title,id:i.headlines[0].title,url:i.headlines[1].subtitle},currentCreative:e[0],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,u)}};if(!(0,d.N)()){try{const e=yield i(),t=yield e.json();r(t)}catch(e){u?(0,a.H)(u,`Failed to call CMS data - ${n} - ${t}. url ${o}`,e):s.k.logError(e)}return e[0]}if(h){const t=h.href,n=h.innerText,i=h.id;return r({headlines:[{title:i},{title:n,subtitle:t}]}),e[0]}if(i().then((e=>{e.json().then((e=>{r(e)}))})).catch((e=>{u?(0,a.H)(u,`Failed to call CMS data - ${n} - ${t}. url ${o}`,e):s.k.logError(e)})),(0,p.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].cmsData))return null}}let g=-1;for(let t=0;t<e.length;t++)if(e[t]===l){g=t;break}if(-1===g)return g=0,this.eventData[n][t]={currentCreative:e[g],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,u),e[g];const m=(new Date).getTime();if(this.eventData[n][t].timestamp_EventLastUpdate+c.Uq.get(n)<m&&!r){if(g<e.length-1){const i=e[g+1];return this.dismissCreative(t,n,l,u),this.eventData[n][t]=Object.assign(Object.assign({},this.eventData[n][t]),{currentCreative:i,timestamp_EventLastUpdate:m}),this.localstorage_save(t,u),i}return this.dismissCreative(t,n,e[g],u),null}for(let i=0;i<this.eventData[n][t].expiredCreatives.length;i++)if(this.eventData[n][t].expiredCreatives[i]===e[g])return null;return e[g]}))}shouldShowEvent(e,t,n,r,o,a,s){return(0,i.mG)(this,void 0,void 0,(function*(){const i=(0,p.isNullOrUndefined)(this.eventData),c=this.eventData&&(0,p.isNullOrUndefined)(this.eventData[t]),d=this.eventData&&this.eventData[t]&&(0,p.isNullOrUndefined)(this.eventData[t][e]);if(i||c||d){i?(this.eventData={},this.eventData[t]={},this.eventData[t][e]={}):c&&(this.eventData[t]={},this.eventData[t][e]={});const d=yield this.selectCreative(n,e,t,r,o,null,null,s);return!!d&&(this.eventData[t][e].currentCreative=d,this.localstorage_save(e,a),!0)}const l=this.eventData[t][e].currentCreative;return!!(yield this.selectCreative(n,e,t,r,o,l,a,s))}))}}const g=()=>{const e="__eventLocalStorage__";let t=l.Gq.get(e);return t||(t=new h,l.Gq.set(e,t)),t}},1334:function(e,t,n){"use strict";n.d(t,{Gg:function(){return s},St:function(){return d},WW:function(){return c},YN:function(){return l},tk:function(){return i}});var i,r=n(27003),o=n(52058);!function(e){e.actionMenuOpen="actionMenuOpen",e.addTopSite="addTopSite",e.coachmark="coachmark",e.dailyDiscovery="dailyDiscovery",e.editTopSite="editTopSite",e.editWelcomeGreeting="editWelcomeGreeting",e.hamburgerMenu="hamburgerMenu",e.imageSearch="imageSearch",e.locationMarkerCard="locationMarkerCard",e.mobileAppUpsell="mobileAppUpsell",e.msRewards="msRewards",e.museumCard="museumCard",e.navOverflow="navOverflow",e.notificationBell="notificationBell",e.pivot="pivot",e.search="search",e.searchHistoryMoreOptions="searchHistoryMoreOptions",e.settings="settings",e.signInControl="signInControl",e.toast="toast",e.topSiteOverflowPanel="topSiteOverflowPanel",e.voiceSearchWC="voiceSearchWC",e.waffle="waffle",e.recommendedSitesSetting="recommendedSitesSetting",e.newsHeadlineBelowSearchboxMoreOptions="newsHeadlineBelowSearchboxMoreOptions"}(i||(i={}));class a{constructor(){this.flyoutOpen=!1,this.openFlyouts=new Set,this.registeredCallbacks=[]}static getInstance(){return r.Gq.get("__FlyoutCoordinationInstance__",(()=>new a))}reportFlyoutOpen(e,t){t?this.openFlyouts.add(e):this.openFlyouts.delete(e),this.flyoutOpen=this.openFlyouts.size>0;for(const n of this.registeredCallbacks)n(e,t)}registerFlyoutListener(e){this.registeredCallbacks.push(e)}unregisterFlyoutListener(e){(0,o.Z)(this.registeredCallbacks,(t=>e===t))}isFlyoutOpen(){return this.flyoutOpen}}function s(e,t){return a.getInstance().reportFlyoutOpen(e,t)}function c(e){return a.getInstance().registerFlyoutListener(e)}function d(e){return a.getInstance().unregisterFlyoutListener(e)}function l(e){return a.getInstance().openFlyouts.has(e)}},2278:function(e,t,n){"use strict";n.d(t,{HB:function(){return v}});var i=n(23547),r=n(26007),o=n(56692),a=n(45506),s=n(33379),c=n(12884);const d="//assets.msn.com",l="//assets.msn.cn",u=e=>"localhost.msn.com"===e.split(":",1)[0];function p(e){if(/^\/[\w.-]+(\/[\w.-]+)*$/.test(e))return!(e.includes("/../")||e.includes("/./")||e.endsWith("/..")||e.endsWith("/."))}function h(e){return e.startsWith("/")?e:"/"+e}function g(e){return e.endsWith("/")?e:e+"/"}function m(e){return e.startsWith("/")?e.slice(1):e}const f=(e,t,n)=>{const c=new URLSearchParams(e),f="true"===c.get("renderWidget"),v="true"===c.get("useDeployedBundles"),y=((e,t)=>t?d:u(e)?`//${e}`:o.jG.IsChinaCompliance?l:d)(t,f||v);if(c.has("entry")){const e=h(c.get("entry").split("/").slice(0,-1).join("/"));return y&&p(e)&&(u(t)||e.startsWith("/bundles"))?g(y+e):g(y)}if(y&&u(t)&&!v){if((0,s.N)())return n?y+n:n;return y+__WEBPACK_LOCAL_STATICS_PATH__}if(y){const t=a.Al.ClientSettings&&a.Al.ClientSettings.queryparams,o=(e||"").substring(1),s=(t||"").substring(1);let c=o+"&"+s;c=decodeURIComponent(c);let d=new i.h(c).get("bundles");d&&(d=p(h(d))?m(d):null);const l=r.c.getParamsWithItems(c).find((e=>"spalink"===e.key));let u=l&&l.value;if(u&&(u=p(h(u))?m(u):null,u=u?u.split("/")[0]:null),n){const e=n.split("/");return e[4]=u||(d||"latest"),y+e.join("/")}}return n},v=()=>{n.p=f((0,c.zp)(),(0,c.zw)(),n.p)}},44979:function(e,t,n){"use strict";n.d(t,{DO:function(){return c},Nd:function(){return s},fH:function(){return a}});var i=n(56692),r=n(43488),o=n(70587);class a{constructor({params:e,qspPrefix:t,spec:n}={},i){this.requestData=new r.m4(n||o.j4,t||o.mx),e&&this.requestData.loadQueryParams(e),i&&(this.RequestId=i)}get requestId(){return this.RequestId||this.app.ActivityId}get app(){return i.jG}get data(){return this.requestData.data}}function s(e,t,n=!0){if("function"==typeof e){const t=e();if(t||0===t)return t}if(n)throw new Error("Expected "+t+" to return value. Possible invalid RequestContext spec used or the spec doesn't contain this data.")}function c(e){return s(e.data.locationHref,"locationHref",!1)}},78468:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});const i={prod:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/"}},17769:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i,r=n(7124);const o=null===(i=n(45506).Al.CurrentFlightSet)||void 0===i?void 0:i.has("prg-scrolldbc");function a(e,t=50,n=!0){return o?n?(0,r.Z)(e,t):(0,r.Z)(e,t,{leading:!0,trailing:!1}):e}},40537:function(e,t){"use strict";t.Z=function(e,...t){if(e){const n=/{([\d]+)}/g,i=[];let r=n.exec(e),o=0,a=0;for(;null!==r;)a=r.index,i.push(e.substring(o,a)),i.push(t[r[1]]),o=n.lastIndex,r=n.exec(e);return i.push(e.substring(o)),i}}},21858:function(e,t,n){"use strict";n.d(t,{Go:function(){return a},TR:function(){return c},Y6:function(){return d},Yw:function(){return l}});var i=n(94516);const r=new RegExp("\\:([\\d]{2})");function o(){return new Date}function a(e){return(o().getTime()-e.getTime())/1e3}function s(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function c(e,t){return new Date(e.valueOf()+60*t*60*1e3)}function d(e,t){const n=parseInt(t),i=parseInt(r.exec(t)[1]),o=n<0?-1:1,a=new Date(e.getTime()+60*(60*n+o*i)*1e3),s=`0${Math.abs(n)}`.substr(-2)+":"+`0${Math.abs(i)}`.substr(-2);return a.toISOString().replace("Z",(o<0?"-":"+")+s)}function l(e){const t=a(e),n=function(){const e=o();return e.setHours(0,0,0,0),e}(),r=s(n,-1),c=s(n,-6),d=function(){const e=o();return new Date(e.getFullYear(),0,0,0,0,0,0)}();return t>=-3300&&t<-60?i.i.InMinutes:t<0?i.i.None:t<120?i.i.JustNow:t<3600?i.i.LessThanOneHour:e>=n?i.i.Today:e>=r?i.i.Yesterday:e>=c?i.i.ThisWeek:e>=d?i.i.ThisYear:i.i.FullDate}},79703:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i,r=n(19628);!function(e){e[e.Default=0]="Default",e[e.Medium=1]="Medium",e[e.MonthDate=2]="MonthDate",e[e.Weekday=3]="Weekday",e[e.Time=4]="Time"}(i||(i={}));class o{constructor(){this.dateFormatOptionsMap=new Map,this.setSupportsLocaleSpecifiers(),this.dateFormatOptionsMap.set(i.Medium,{year:"numeric",month:"short",day:"numeric"}),this.dateFormatOptionsMap.set(i.MonthDate,{month:"short",day:"numeric"}),this.dateFormatOptionsMap.set(i.Weekday,{weekday:"short"}),this.dateFormatOptionsMap.set(i.Time,{hour:"numeric",minute:"numeric"})}overrideDateFormat(e,t){e&&t&&this.dateFormatOptionsMap.set(e,t)}localizedDateString(e,t){return this.formatDate(e,i.Default,t)}localizedDateStringMedium(e,t){return this.formatDate(e,i.Medium,t)}localizedMonthDate(e,t){return this.formatDate(e,i.MonthDate,t)}localizedWeekday(e,t){return this.formatDate(e,i.Weekday,t)}formatTimeFromDate(e,t){return this.supportsLocaleSpecifiers&&this.dateFormatOptionsMap?e.toLocaleTimeString(t,this.dateFormatOptionsMap.get(i.Time)):e.toTimeString()}format(e,...t){return e?r.Ld.Format(e,...t):""}localizedNumberString(e,t){return this.supportsLocaleSpecifiers?e.toLocaleString(t):e.toString()}formatDate(e,t,n){let r=null;if(this.supportsLocaleSpecifiers)if(t===i.Default)r=e.toLocaleDateString(n);else if(this.dateFormatOptionsMap){const i=this.dateFormatOptionsMap.get(t);r=e.toLocaleDateString(n,i)}return null===r&&(r=e.toDateString()),null!==r?r.replace(/\u200E/g,"").replace(/\u200F/g,""):r}setSupportsLocaleSpecifiers(){this.supportsLocaleSpecifiers=(()=>{try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1})()}}},94516:function(e,t,n){"use strict";var i;n.d(t,{i:function(){return i}}),function(e){e[e.None=0]="None",e[e.JustNow=1]="JustNow",e[e.LessThanOneHour=2]="LessThanOneHour",e[e.Today=3]="Today",e[e.Yesterday=4]="Yesterday",e[e.ThisWeek=5]="ThisWeek",e[e.ThisYear=6]="ThisYear",e[e.FullDate=7]="FullDate",e[e.InMinutes=8]="InMinutes"}(i||(i={}))},11363:function(e,t,n){"use strict";n.d(t,{fh:function(){return l},Xk:function(){return u},ch:function(){return h}});var i=n(79703),r=n(94516),o=n(21858);class a{constructor(e,t,n){this.timeLocStrings=e,this.locale=t,this.locUtility=n}transform(e,t,n){const i=3600,a=86400;if(!e)return"";if(!this.locUtility.supportsLocaleSpecifiers)return t;const s=(0,o.Go)(e);switch((0,o.Yw)(e)){case r.i.None:return"";case r.i.JustNow:return this.timeLocStrings.JustNow;case r.i.LessThanOneHour:return this.timespanString(s,s<120?this.timeLocStrings.NumberMinuteAgo:this.timeLocStrings.NumberMinutesAgo,60);case r.i.Today:return this.timespanString(s,s<7200?this.timeLocStrings.NumberHourAgo:this.timeLocStrings.NumberHoursAgo,i);case r.i.Yesterday:if(0===n){const t=this.timeLocStrings.TimeYesterday;return this.locUtility.format(t,this.locUtility.formatTimeFromDate(e,this.locale))}return s<a?this.timespanString(s,s<7200?this.timeLocStrings.NumberHourAgo:this.timeLocStrings.NumberHoursAgo,i):this.timespanString(s,s<172800?this.timeLocStrings.NumberDayAgo:this.timeLocStrings.NumberDaysAgo,a);case r.i.ThisWeek:return 0===n?this.locUtility.format(this.timeLocStrings.TimeDayOfWeek,this.locUtility.localizedWeekday(e,this.locale),this.locUtility.formatTimeFromDate(e,this.locale)):this.timespanString(s,s<172800?this.timeLocStrings.NumberDayAgo:this.timeLocStrings.NumberDaysAgo,a);case r.i.ThisYear:return this.locUtility.localizedMonthDate(e,this.locale);default:return this.locUtility.localizedDateStringMedium(e,this.locale)}}timespanString(e,t,n){const i=Math.floor(e/n);return this.locUtility.format(t,this.locUtility.localizedNumberString(i,this.locale))}}const s={JustNow:"Just Now",JustNowSimple:"now",NumberMinuteAgo:"{0} minute ago",NumberMinutesAgo:"{0} minutes ago",NumberMinutesAgoSimple:"{0}m",NumberHourAgo:"{0} hour ago",NumberHoursAgo:"{0} hours ago",NumberHoursAgoSimple:"{0}h",NumberDayAgo:"{0} day ago",NumberDaysAgo:"{0} days ago",NumberDaysAgoSimple:"{0}d",NumberWeekAgo:"{0} week",NumberWeeksAgo:"{0} weeks",NumberWeeksAgoSimple:"{0}w",NumberMonthAgo:"{0} month",NumberMonthsAgo:"{0} months",NumberMonthsAgoSimple:"{0}mo",NumberYearAgo:"{0} year",NumberYearsAgo:"{0} years",NumberYearsAgoSimple:"{0}y",TimeYesterday:"Yesterday at {0}",TimeDayOfWeek:"{0} at {1}"},c={Minute:{one:"{0} ",two:"",threeToTen:"{0} ",elevenPlus:"{0} "},Hour:{one:"{0} ",two:"",threeToTen:"{0} ",elevenPlus:"{0} "},Day:{one:"{0} ",two:"",threeToTen:"{0} ",elevenPlus:"{0} "},Week:{one:"{0} ",two:"{0} ",threeToTen:"{0} ",elevenPlus:"{0} "},Month:{one:"{0} ",two:"{0} ",threeToTen:"{0} ",elevenPlus:"{0} "},Year:{one:"{0} ",two:"{0} ",threeToTen:"{0} ",elevenPlus:"{0} "}},d={Week:{one:"{0} ",two:"{0} ",three:"{0} "},Month:{one:"{0} ",two:"{0} ",three:"{0} "},Year:{one:"{0} ",two:"{0} ",three:"{0} "}};function l(e,t,n,r,o,l,u){const h=t&&t.toLowerCase();if(!(e instanceof Date)||isNaN(e.valueOf()))return"";if(l&&n)return function(e,t,n,i,r){if(!(e instanceof Date)||isNaN(e.valueOf()))return"";const o=p.MsPerMinute,a=p.MsPerHour,s=p.MsPerDay,l=p.MsPerWeek,u=p.MsPerMonth,h=p.MsPerYear,g=t.getTime()-e.getTime();if(g<o)return r?n.JustNowSimple||"":n.JustNow||"";let m=h,f="Year";g<a?(m=o,f="Minute"):g<s?(m=a,f="Hour"):g<l?(m=s,f="Day"):g<u?(m=l,f="Week"):g<h&&(m=u,f="Month");const v=/^[Aa][Rr]-/.test(i),y=/^[Hh][Ee]-/.test(i),S=Math.floor(g/m);let C=null;C=v?function(e,t){if(e<2)return c[t].one;if(e<3)return c[t].two;if(e<11)return c[t].threeToTen;return c[t].elevenPlus}(S,f):y?function(e,t,n){if("Minute"==n||"Hour"==n||"Day"==n)return e[`Number${n}${t>1?"s":""}Ago`];if(t<2)return d[n].one;if(t<3)return d[n].two;return d[n].three}(n,S,f):n[`Number${f}${S>1||r?"s":""}Ago${r?"Simple":""}`];return C?C.replace("{0}",S):""}(e,new Date,n,h,u);if(!n&&"zh-cn"===h)return"";n||(n=s);const g=(o=o||new i.$).localizedDateString(e,h);r||(r=0);return new a(n,h,o).transform(e,g,r)}function u(e){return e.toLocaleString("ja-JP",{hour12:!1,hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",timeZone:"Asia/Tokyo"}).replace("","").replace("","")}const p={MsPerMinute:6e4,MsPerHour:36e5,MsPerDay:864e5,MsPerWeek:6048e5,MsPerMonth:2592e6,MsPerYear:31104e6};function h(e){try{if(!e)return!0;const t=new Date(e);if(isNaN(t.getTime()))return!0;const n=(new Date).getTime()-t.getTime();return Math.ceil(n/p.MsPerDay)>=30}catch(e){return!0}}},24066:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var i=n(33940),r=n(65135),o=n(75384),a=n(73),s=n(33379);function c(e,t,c,d){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(0,s.N)())return;const i=yield n.e("diagnostic-web-vitals").then(n.bind(n,45436));(0,o.lr)().then((()=>{const n=c?{timeToPageReveal:e[a.Y5],timeToPageVisible:e[a.U4]}:void 0;i.initDiagnosticsWebVitals((e=>{d?d({markers:e}):r.M0.sendLoadTimeEvent({markers:e}),Object.entries(e).forEach((([e,n])=>{t[e]=n}))}),e&&e[a.dd]||-1,n)}))}))}},98304:function(e,t,n){"use strict";n.d(t,{zzx:function(){return mw},bQI:function(){return gw},K_t:function(){return Sw},j_y:function(){return yw},XcO:function(){return fw},Was:function(){return vw},vn7:function(){return Cw},X4G:function(){return bw},etM:function(){return os},N1G:function(){return as},iVH:function(){return vi},oSM:function(){return eu},rBK:function(){return tu},etb:function(){return zl},ps7:function(){return Kl},HuD:function(){return Zl},Q48:function(){return Ql},Evv:function(){return ti},EoX:function(){return ei},Eh0:function(){return li},d1d:function(){return pi},Vpp:function(){return ui},NMS:function(){return Yn},iJb:function(){return ai},Es0:function(){return oi},AWv:function(){return di},eL$:function(){return gi},a4J:function(){return ii},a2y:function(){return La},s51:function(){return ja},S2e:function(){return Wa},_ig:function(){return Pa},hnc:function(){return Aa},ZHI:function(){return Ma},CBH:function(){return Oa},LIN:function(){return ka},N6m:function(){return Fa},yyJ:function(){return Ha},YSG:function(){return Ua},cL8:function(){return Na},gAu:function(){return xa},MRH:function(){return Ea},bUp:function(){return Da},EhB:function(){return Ra},EXN:function(){return _a},Vsq:function(){return $a},CPU:function(){return Ia},FQ3:function(){return Ba},oEq:function(){return Eh},nab:function(){return oh},lr$:function(){return rw},LeM:function(){return nw},qI3:function(){return iw},sNr:function(){return Pi},Y57:function(){return Ai},bvO:function(){return ki},evM:function(){return ua},amS:function(){return Qo},YHd:function(){return la},sNU:function(){return ea},gZU:function(){return da},c$P:function(){return Ko},PAZ:function(){return ia},npG:function(){return Jo},u8h:function(){return Xo},Mef:function(){return Yo},L8S:function(){return pa},G0e:function(){return Zo},FWA:function(){return ha},lz:function(){return ta},fvr:function(){return sa},Bjk:function(){return oa},ydI:function(){return ca},D1F:function(){return aa},WB4:function(){return ra},ja9:function(){return na},nrW:function(){return ma},FTS:function(){return ga},Zfy:function(){return iC},cpH:function(){return oC},HCR:function(){return aC},Ia3:function(){return nC},Mw:function(){return rC},BfX:function(){return sC},Emt:function(){return tC},m9g:function(){return Kn},yb9:function(){return vy},qkz:function(){return jy},IIV:function(){return My},LnJ:function(){return Oy},EuY:function(){return Ly},Ibk:function(){return Ny},hNw:function(){return Fy},qP4:function(){return _y},BFw:function(){return $y},SqC:function(){return Dy},KY$:function(){return Wy},gjV:function(){return Uy},LxB:function(){return Hy},DnN:function(){return By},tvG:function(){return Ry},B5f:function(){return Cy},CgS:function(){return by},LWq:function(){return Ty},FtH:function(){return ky},N1Y:function(){return Py},$qz:function(){return wy},FEC:function(){return xy},W91:function(){return Ey},Cy3:function(){return si},c$g:function(){return mv},$eW:function(){return iv},UDB:function(){return lC},Hrk:function(){return dC},MW5:function(){return uC},CLx:function(){return Kk},aB8:function(){return Jk},a8F:function(){return mi},yMR:function(){return _f},jSE:function(){return G},A49:function(){return rp},hj1:function(){return dp},sqX:function(){return cp},gZr:function(){return sp},eqK:function(){return ip},Eny:function(){return lp},X66:function(){return ep},CBr:function(){return tp},N4n:function(){return np},odB:function(){return op},a8G:function(){return ap},Z7:function(){return be},G1z:function(){return Se},na5:function(){return we},Xqh:function(){return Ce},Kbm:function(){return ye},eto:function(){return nc},UpF:function(){return pr},tfk:function(){return mr},tSD:function(){return hr},XFJ:function(){return gr},SPE:function(){return Fk},i0u:function(){return xk},beD:function(){return Tk},Xpg:function(){return Ak},_Pi:function(){return wk},x1P:function(){return kk},oz3:function(){return Nk},wyy:function(){return kl},AWk:function(){return bl},Uf3:function(){return wl},nZQ:function(){return vl},kAq:function(){return ml},ODl:function(){return Tl},czP:function(){return Cl},k2Y:function(){return Pl},mmd:function(){return Al},DJm:function(){return yl},T4Y:function(){return fl},xEV:function(){return Sl},PLs:function(){return Dk},BOw:function(){return Ik},ip_:function(){return Yy},AA5:function(){return tS},lo6:function(){return eS},V61:function(){return iS},eHj:function(){return nS},tt_:function(){return rS},tCY:function(){return oS},BOM:function(){return cS},ZXu:function(){return sS},cg0:function(){return aS},lCC:function(){return $k},jNX:function(){return Bk},RZW:function(){return Rk},GOz:function(){return Uk},j7$:function(){return oA},ATu:function(){return aA},z48:function(){return rA},L_b:function(){return iA},oAH:function(){return Ok},Un$:function(){return Mk},vfM:function(){return Pk},XuA:function(){return Ek},i2m:function(){return Lk},Mqi:function(){return Uh},y7V:function(){return $h},Kp5:function(){return _h},Hvj:function(){return Hh},uyV:function(){return Wh},hPq:function(){return se},gwt:function(){return oe},Hfw:function(){return pe},bKI:function(){return ge},qLy:function(){return le},DBH:function(){return me},oUn:function(){return ue},EjM:function(){return he},kVR:function(){return ce},NH8:function(){return ie},$$1:function(){return ae},wuy:function(){return re},jf8:function(){return de},o25:function(){return cA},_7Q:function(){return hh},b2C:function(){return uA},Mn5:function(){return lA},CVs:function(){return pA},WSY:function(){return hA},oTO:function(){return FS},qXP:function(){return DS},HKp:function(){return BS},gEw:function(){return LS},B$y:function(){return RS},YVm:function(){return tP},SWs:function(){return $f},e1u:function(){return Uf},h6w:function(){return Bi},Wct:function(){return Fi},Zt_:function(){return Za},Rqk:function(){return Ue},BMt:function(){return Gb},OAw:function(){return Nb},Tdm:function(){return Ub},a0I:function(){return qb},xeh:function(){return jb},ht:function(){return _b},rnG:function(){return Hb},tJi:function(){return Vb},PKn:function(){return Kb},P2p:function(){return Jb},ygS:function(){return zb},QzW:function(){return R},gX:function(){return Ae},iS2:function(){return Ie},SBd:function(){return Te},SEf:function(){return ke},gbr:function(){return Pe},fU5:function(){return Re},Vwf:function(){return Le},lIV:function(){return De},sGX:function(){return xe},HFn:function(){return Oe},FvO:function(){return Si},F0_:function(){return Ci},Qsh:function(){return Ti},if_:function(){return wi},EIi:function(){return bi},hMS:function(){return rv},TVf:function(){return Va},gS$:function(){return wm},ZHJ:function(){return D},UGs:function(){return L},Lzl:function(){return Yk},g8u:function(){return eP},MmB:function(){return Br},NqK:function(){return xh},YVg:function(){return lh},Sp0:function(){return rt},ZZK:function(){return fC},Ggm:function(){return cn},lWE:function(){return sn},MRy:function(){return mn},Jtn:function(){return dn},Wzw:function(){return ln},v7z:function(){return gn},aF1:function(){return pn},u4m:function(){return un},u6c:function(){return hn},jhM:function(){return Rh},F1V:function(){return vA},hii:function(){return yA},X9Z:function(){return fv},MD5:function(){return Js},dTs:function(){return yr},huq:function(){return ec},L90:function(){return Xs},V3_:function(){return Ys},Cn7:function(){return xs},xXe:function(){return xA},fDq:function(){return MA},GrI:function(){return ve},WXX:function(){return fe},jWk:function(){return za},ifI:function(){return lv},f$k:function(){return sv},yB4:function(){return cv},ReU:function(){return dv},I8d:function(){return av},bKC:function(){return ov},IIT:function(){return Xy},XD:function(){return f},J_l:function(){return Ay},LXY:function(){return Iy},fUc:function(){return PT},C35:function(){return AT},lE3:function(){return xT},KwY:function(){return ET},ZJy:function(){return MT},$n1:function(){return IT},OeS:function(){return V},Rln:function(){return jo},u4l:function(){return Go},fCp:function(){return Vo},_bN:function(){return Ja},EUJ:function(){return ee},IrA:function(){return Ya},OcW:function(){return Ky},f7W:function(){return gh},H5g:function(){return $t},IEE:function(){return fT},Ez4:function(){return Ka},Zwk:function(){return gT},jzM:function(){return dh},dyx:function(){return Lh},Qhy:function(){return Xa},ZSB:function(){return fr},Zj1:function(){return vr},kPC:function(){return xt},aKV:function(){return Bt},l35:function(){return Mt},aO:function(){return wt},Psw:function(){return ci},aFk:function(){return yv},Hc7:function(){return X},THK:function(){return Y},y7Z:function(){return Ld},Q$4:function(){return pd},Ecq:function(){return id},Bxi:function(){return tm},aAG:function(){return Wm},V3R:function(){return Bm},DjB:function(){return Dm},Lbg:function(){return Rm},IKj:function(){return Fm},bOf:function(){return Lm},SNZ:function(){return dc},ITJ:function(){return uc},TyC:function(){return lc},sqY:function(){return $c},XY_:function(){return td},pcX:function(){return nd},gPB:function(){return bm},zok:function(){return cf},rrV:function(){return of},vZx:function(){return sf},YNO:function(){return af},hhM:function(){return rf},cz_:function(){return ef},wnd:function(){return nf},Oin:function(){return tf},m96:function(){return Jm},jvv:function(){return Ym},W7q:function(){return Xm},VUW:function(){return pf},OlW:function(){return df},ofB:function(){return uf},kyJ:function(){return lf},mlD:function(){return Vc},bcY:function(){return Dd},RgZ:function(){return hd},$0o:function(){return od},i$H:function(){return cd},hos:function(){return ld},qri:function(){return lm},r3t:function(){return pm},_J:function(){return um},LP6:function(){return jc},H_Z:function(){return bc},IWG:function(){return Tc},rHL:function(){return wc},VQZ:function(){return Gc},IS6:function(){return kc},SI$:function(){return Ac},rct:function(){return Pc},Uls:function(){return Em},XyK:function(){return Mm},dkq:function(){return xm},RfH:function(){return Om},TXn:function(){return km},Uwk:function(){return Am},NTN:function(){return Pm},tM3:function(){return Im},pd7:function(){return Zc},gfJ:function(){return md},HxT:function(){return vd},Ytj:function(){return fd},wAW:function(){return mc},TGz:function(){return vc},z$g:function(){return fc},La3:function(){return Hc},G9t:function(){return Od},SFF:function(){return Bd},hrj:function(){return qc},R9Y:function(){return Xc},pgv:function(){return Ic},a5R:function(){return xc},mmY:function(){return Ec},Vak:function(){return tv},jx_:function(){return wf},ulx:function(){return Xf},EB:function(){return ev},S5P:function(){return Zf},AC$:function(){return qf},QAb:function(){return zc},zW$:function(){return Mc},OEA:function(){return Lc},CtU:function(){return Oc},S3W:function(){return Qc},JDK:function(){return Dc},kN4:function(){return Fc},cyG:function(){return Rc},dSt:function(){return Jf},$We:function(){return Wc},Jus:function(){return yc},O3:function(){return Cc},M_5:function(){return Sc},phA:function(){return cm},o7M:function(){return dm},c8$:function(){return em},pc7:function(){return Yg},sjI:function(){return Jg},WlJ:function(){return Zg},h7C:function(){return Xg},DzU:function(){return Kg},UbG:function(){return Yf},jGe:function(){return Jc},fNC:function(){return bd},Q9A:function(){return Td},VLw:function(){return wd},Kfe:function(){return Kc},e1y:function(){return yd},OpM:function(){return Cd},W39:function(){return Sd},GeL:function(){return oc},rbA:function(){return sc},nvX:function(){return ac},blf:function(){return _c},OLX:function(){return Fd},OqK:function(){return Nd},M11:function(){return Cm},Poh:function(){return vm},EVj:function(){return Sm},dej:function(){return ym},OFV:function(){return Bc},T2w:function(){return sd},X81:function(){return ad},Y_C:function(){return Ef},_xu:function(){return Mf},LFG:function(){return xf},ftv:function(){return Of},Hhi:function(){return Tf},Ng:function(){return $m},Iyc:function(){return Hm},WuF:function(){return _m},O5R:function(){return pc},U:function(){return gc},Knl:function(){return hc},VpT:function(){return Uc},L9M:function(){return hm},g75:function(){return zm},Nlf:function(){return Zm},dYy:function(){return Qm},Obu:function(){return Km},$zm:function(){return bf},EOy:function(){return Kf},KZG:function(){return kf},tuA:function(){return Af},bY9:function(){return Pf},QLu:function(){return If},Kh5:function(){return qm},Ajh:function(){return jm},_NS:function(){return Vm},SHM:function(){return Gm},bkE:function(){return gm},AdE:function(){return fm},HXH:function(){return mm},z_8:function(){return zf},sTZ:function(){return om},MXT:function(){return sm},sEi:function(){return am},jjl:function(){return ed},w9b:function(){return nm},_kV:function(){return rm},shi:function(){return im},fIV:function(){return Yc},bWr:function(){return Um},uZq:function(){return gd},DaG:function(){return rd},XAT:function(){return kd},MN8:function(){return vf},MAP:function(){return Sf},eF:function(){return yf},YwH:function(){return Cf},Mm$:function(){return Id},EeU:function(){return Ad},JTZ:function(){return xd},SIq:function(){return Ed},bc5:function(){return Pd},mjh:function(){return hf},EFm:function(){return mf},YlQ:function(){return gf},a0p:function(){return ff},Akr:function(){return Rd},KXt:function(){return dd},uFt:function(){return ud},GAO:function(){return cc},mOy:function(){return Nc},J_3:function(){return Md},rNk:function(){return uh},tCQ:function(){return Sh},yRR:function(){return yh},EF$:function(){return mh},GJW:function(){return ph},bH3:function(){return fh},AaR:function(){return hp},tvO:function(){return pp},eb9:function(){return vp},tNl:function(){return yp},bBT:function(){return Sp},d6P:function(){return up},yLQ:function(){return fp},Gjj:function(){return gp},CxA:function(){return mp},NNq:function(){return bp},_GR:function(){return Cp},UjD:function(){return wp},$RK:function(){return Tp},wxO:function(){return ST},jA_:function(){return CT},neE:function(){return bT},dqy:function(){return wT},AVH:function(){return kT},ZIZ:function(){return TT},lHZ:function(){return yT},wBi:function(){return LT},aaS:function(){return DT},F0i:function(){return OT},tPj:function(){return vT},j3p:function(){return Nt},OjJ:function(){return Hl},Cfk:function(){return Gn},ldC:function(){return Tm},Zmj:function(){return Wn},v73:function(){return jn},rmC:function(){return qn},I2B:function(){return zn},vvT:function(){return Vn},ryt:function(){return Zn},K8d:function(){return Qn},IfP:function(){return Cs},tkb:function(){return ys},OWM:function(){return Ss},HpJ:function(){return sh},lu7:function(){return Ni},ASE:function(){return Ui},iWd:function(){return nh},h0:function(){return th},EYh:function(){return rh},O1E:function(){return ih},Z1Q:function(){return kw},nCk:function(){return ww},qut:function(){return Tw},JH9:function(){return Ph},NFm:function(){return wh},Z$l:function(){return Th},$YQ:function(){return kh},drd:function(){return q},_c7:function(){return z},sd_:function(){return Q},ML7:function(){return Rf},sHL:function(){return Df},yVj:function(){return PP},Oz9:function(){return tA},l8i:function(){return eA},R9p:function(){return nA},YJ7:function(){return bt},U4N:function(){return Ct},fNQ:function(){return ut},dxF:function(){return Dt},aPD:function(){return Ft},mXp:function(){return vt},ABv:function(){return yt},BnB:function(){return St},SSg:function(){return kt},DE1:function(){return ct},udk:function(){return Lt},yf9:function(){return dt},qQi:function(){return ft},oxX:function(){return gt},jCZ:function(){return ht},Q3G:function(){return st},QW8:function(){return ot},wXh:function(){return at},sf4:function(){return lt},T4K:function(){return mt},jns:function(){return pt},Gm$:function(){return Rt},lNW:function(){return It},AIp:function(){return fi},GyY:function(){return jS},AvP:function(){return Me},MaG:function(){return j},TBk:function(){return Xn},CBf:function(){return rs},f_s:function(){return is},RLb:function(){return ns},VkE:function(){return Fh},dSm:function(){return Bh},fzU:function(){return Nh},jD$:function(){return Er},i8g:function(){return Lf},gzO:function(){return Ht},NGC:function(){return _t},KKn:function(){return Ks},hTy:function(){return HS},JGn:function(){return _S},h2c:function(){return fP},agd:function(){return lP},JNv:function(){return dP},i05:function(){return gA},Xa2:function(){return fA},zm9:function(){return mA},hNX:function(){return jh},c6N:function(){return lw},VzI:function(){return dw},KPf:function(){return Gy},Q0n:function(){return Vy},HbY:function(){return _v},gqg:function(){return Gv},_PV:function(){return Rv},$L2:function(){return Uv},jTi:function(){return Fv},j12:function(){return Nv},BY9:function(){return Ev},DH3:function(){return xv},wgD:function(){return Vv},qCY:function(){return wv},sn3:function(){return Tv},_dv:function(){return Av},waU:function(){return Iv},oCM:function(){return Mv},xvO:function(){return Ov},Ur5:function(){return kv},Puo:function(){return Pv},J8c:function(){return Bv},xSe:function(){return Lv},I78:function(){return Wv},yv9:function(){return py},hrR:function(){return ay},P6F:function(){return ly},wCW:function(){return sy},KwC:function(){return dy},eAv:function(){return ey},sZO:function(){return ty},WJD:function(){return my},o89:function(){return Qv},egn:function(){return Zv},XOt:function(){return Xv},$Vh:function(){return Yv},mJA:function(){return ny},Xeo:function(){return iy},TYO:function(){return Kv},tIl:function(){return Jv},drJ:function(){return cy},mxb:function(){return ry},xTj:function(){return fy},SKM:function(){return gy},c2h:function(){return uy},F93:function(){return hy},bPD:function(){return oy},P84:function(){return qv},lbM:function(){return zv},lsj:function(){return $v},ymf:function(){return Hv},Z3I:function(){return Dv},sao:function(){return Cv},D5c:function(){return bv},Quo:function(){return jv},f3z:function(){return ch},UX3:function(){return es},MWq:function(){return qa},hq4:function(){return bk},CR1:function(){return nP},Oee:function(){return fn},jjQ:function(){return yn},xz5:function(){return vn},ylR:function(){return bn},xsK:function(){return Cn},Lyo:function(){return xn},wuF:function(){return wn},bvM:function(){return kn},yj8:function(){return En},ELf:function(){return Pn},$$P:function(){return Tn},is$:function(){return Sn},lxu:function(){return An},_qL:function(){return Mn},t7r:function(){return In},pa7:function(){return Ln},FER:function(){return On},Mc7:function(){return Dn},XWd:function(){return Bn},_nz:function(){return Fn},jSV:function(){return $n},qok:function(){return _n},yL3:function(){return Un},Z6e:function(){return Hn},nZ_:function(){return Rn},C$l:function(){return Nn},XUn:function(){return bA},TnD:function(){return wA},gDO:function(){return SA},BCc:function(){return TA},e7R:function(){return MS},gsz:function(){return hS},hhW:function(){return AS},pf:function(){return CS},gvI:function(){return uS},i04:function(){return pS},I9d:function(){return IS},Yr5:function(){return SS},Kz0:function(){return vS},O0V:function(){return fS},PwI:function(){return mS},pGg:function(){return yS},H1V:function(){return TS},RzE:function(){return wS},A9I:function(){return ES},tpK:function(){return gS},ViJ:function(){return PS},Dzt:function(){return bS},QoC:function(){return xS},PUT:function(){return kS},rQV:function(){return _e},w5f:function(){return $e},v8C:function(){return ri},yJ4:function(){return hi},rEw:function(){return ni},MnT:function(){return oT},xC8:function(){return tT},IHe:function(){return cT},Fyv:function(){return dT},Pq3:function(){return nT},Lux:function(){return aT},PwA:function(){return sT},rlX:function(){return iT},hi0:function(){return rT},a7b:function(){return dr},oQG:function(){return Xb},WDJ:function(){return ew},GF9:function(){return Wb},Iyk:function(){return Qb},_kh:function(){return Zb},GZ7:function(){return tw},c_I:function(){return $b},BlG:function(){return Yb},bAs:function(){return Fe},apB:function(){return Pr},Kuw:function(){return Cr},eE5:function(){return br},g52:function(){return wr},gTq:function(){return Tr},Ub$:function(){return kr},clq:function(){return Ir},l0m:function(){return Ar},Qc1:function(){return OS},Qv4:function(){return ak},k8J:function(){return ju},T5b:function(){return Wu},pCD:function(){return Hu},M6I:function(){return JS},t1k:function(){return XS},ubC:function(){return ZS},Mej:function(){return KS},l8W:function(){return YS},Gri:function(){return qS},hd1:function(){return eC},Erc:function(){return QS},CiN:function(){return zS},VyK:function(){return VS},vHJ:function(){return Vk},ydb:function(){return Qk},ldR:function(){return zk},ejn:function(){return qk},QRr:function(){return Gk},dYp:function(){return _k},gY$:function(){return jk},JtN:function(){return Hk},Dwv:function(){return Zk},adY:function(){return Wk},EDA:function(){return m},K73:function(){return cs},jj$:function(){return ss},idU:function(){return eT},tbV:function(){return Yw},TTr:function(){return Rs},WBP:function(){return Fs},Me0:function(){return Ls},MOe:function(){return Ds},QQk:function(){return Is},arc:function(){return Es},GYz:function(){return Gh},BlE:function(){return k},u45:function(){return A},yWd:function(){return E},XFR:function(){return I},US9:function(){return M},n82:function(){return T},p3y:function(){return P},pIg:function(){return x},ovB:function(){return O},gX7:function(){return ll},mjE:function(){return pl},SyQ:function(){return dl},Abn:function(){return hl},qst:function(){return ul},bid:function(){return Ee},IA3:function(){return Ne},VHu:function(){return Gf},Llr:function(){return ne},IU$:function(){return Fr},PQq:function(){return ur},NkG:function(){return Nm},mFi:function(){return Jn},bfJ:function(){return tn},T16:function(){return nn},A_P:function(){return rn},GH8:function(){return on},EoU:function(){return Kt},AKH:function(){return Jt},TXH:function(){return Xt},RwL:function(){return Zt},lrn:function(){return an},$2m:function(){return Yt},eEO:function(){return en},u$4:function(){return gv},MA5:function(){return te},QCU:function(){return LP},HB9:function(){return FP},OSS:function(){return DP},ViC:function(){return MP},VwB:function(){return NP},ffw:function(){return RP},sTd:function(){return BP},X2x:function(){return OP},me0:function(){return zu},MFQ:function(){return Gu},nS9:function(){return qu},Fe_:function(){return Qu},Aps:function(){return Vu},$9$:function(){return Zu},Hif:function(){return ls},sEv:function(){return ps},vAF:function(){return ds},vwD:function(){return us},GI7:function(){return ws},smA:function(){return ks},NKp:function(){return vs},aay:function(){return bs},DxP:function(){return Ts},bor:function(){return fs},HYO:function(){return gs},lFV:function(){return hs},Cab:function(){return ms},fDI:function(){return uP},MTg:function(){return pP},a7O:function(){return Hp},jet:function(){return Wp},kGJ:function(){return Fp},yn8:function(){return Dp},qH0:function(){return Rp},ynR:function(){return zp},fGi:function(){return Bp},g$R:function(){return $p},oxc:function(){return Kp},Xt4:function(){return Gp},sce:function(){return Yp},e_W:function(){return jp},Qq4:function(){return Xp},UPy:function(){return Vp},H5m:function(){return eh},RmK:function(){return Up},mHh:function(){return Zp},vq2:function(){return _p},sKq:function(){return Jp},nlU:function(){return Op},VPx:function(){return qp},DgT:function(){return Lp},$G7:function(){return Np},Ioz:function(){return Qp},H8e:function(){return Ot},Y9r:function(){return cC},fV1:function(){return mo},AUI:function(){return qo},zwp:function(){return Qy},HWG:function(){return Zy},_ni:function(){return Pt},_5e:function(){return aw},O0T:function(){return At},fcE:function(){return Ps},M7L:function(){return As},sC4:function(){return CP},Cf4:function(){return yP},lfg:function(){return vP},WdF:function(){return SP},pG8:function(){return wP},IyT:function(){return bP},RHO:function(){return TP},KWF:function(){return sP},CTB:function(){return cP},ox:function(){return Tg},ak3:function(){return Mp},sF7:function(){return kp},E$N:function(){return Ep},ChW:function(){return xp},dLP:function(){return Pp},piY:function(){return Ip},rqG:function(){return Ap},SJe:function(){return Ch},lub:function(){return bh},od1:function(){return lr},GAh:function(){return qt},dB7:function(){return jt},Blh:function(){return Wt},nQj:function(){return Gt},SmR:function(){return Vt},zeR:function(){return uw},CqX:function(){return pw},tkv:function(){return CA},GB_:function(){return Ii},N1V:function(){return Oi},CS7:function(){return Ri},GLL:function(){return xi},Sp_:function(){return Ei},A5T:function(){return Di},g_9:function(){return Li},rP7:function(){return Mi},_8J:function(){return yC},de3:function(){return vC},bKp:function(){return Dh},oyE:function(){return EP},zxc:function(){return xP},WYS:function(){return IP},Yym:function(){return hT},Scz:function(){return pT},l$d:function(){return lT},hJt:function(){return uT},hh6:function(){return dk},m8v:function(){return lk},$h:function(){return sk},oww:function(){return ck},cg9:function(){return Qe},UHb:function(){return qe},o6C:function(){return We},bwz:function(){return je},r_t:function(){return Ge},A31:function(){return Ve},MmD:function(){return nt},lZX:function(){return Ze},Ue9:function(){return He},q6p:function(){return Xe},gr5:function(){return ze},I2u:function(){return Ye},P8E:function(){return et},ZKD:function(){return it},QUT:function(){return Je},Aeb:function(){return Ke},oPt:function(){return tt},$t:function(){return mT},O1e:function(){return lS},_5V:function(){return dS},paG:function(){return yi},Yg3:function(){return nu},ItM:function(){return Fg},ViL:function(){return Rg},_I9:function(){return Dg},ZAB:function(){return Ta},XDw:function(){return wa},pay:function(){return fa},VI5:function(){return va},v8K:function(){return ba},sFk:function(){return ya},qbM:function(){return Sa},O5q:function(){return Ca},Yon:function(){return Hf},ILq:function(){return iu},IgS:function(){return zw},_tv:function(){return Et},N4g:function(){return or},DnH:function(){return Yi},Z1G:function(){return er},t5z:function(){return ir},hgm:function(){return rr},Krs:function(){return tr},MMt:function(){return nr},Y6E:function(){return kg},Q0t:function(){return xg},dAd:function(){return Mg},RDJ:function(){return Pg},zo9:function(){return Og},npe:function(){return Eg},Vm4:function(){return Ig},Nyv:function(){return Ag},F14:function(){return WP},IXH:function(){return JP},Mr7:function(){return _P},uAr:function(){return $P},rqK:function(){return KP},cJZ:function(){return ZP},ePs:function(){return QP},K1E:function(){return zP},RD7:function(){return VP},npY:function(){return GP},T93:function(){return jP},D7p:function(){return UP},Bi$:function(){return qP},Ins:function(){return HP},a6r:function(){return Qf},Fst:function(){return nv},sX$:function(){return Be},WQV:function(){return Ah},DKZ:function(){return Ih},G7x:function(){return ah},vp2:function(){return J},sMt:function(){return Z},FtB:function(){return K},xpu:function(){return Zw},uIr:function(){return Jw},d7f:function(){return Xw},LPj:function(){return Kw},qAf:function(){return Qw},ozy:function(){return Nf},hFn:function(){return Ff},GJQ:function(){return Bf},fcH:function(){return Ms},OxM:function(){return Os},cJy:function(){return Zi},Agr:function(){return Qi},obn:function(){return gP},AEH:function(){return hP},IJ8:function(){return mP},plI:function(){return Gi},MpL:function(){return _i},Ldg:function(){return $i},Nb$:function(){return Wi},sd7:function(){return Hi},bd4:function(){return ji},zGF:function(){return qi},C4I:function(){return gC},rVt:function(){return mC},BPe:function(){return hC},Sky:function(){return pC},ADY:function(){return zi},E7H:function(){return Hd},ic4:function(){return _d},xdR:function(){return el},tLx:function(){return Xd},Fyn:function(){return Yd},tN1:function(){return Vd},daM:function(){return jd},HPv:function(){return Kd},Ead:function(){return zd},Ely:function(){return qd},jyo:function(){return tl},pjz:function(){return Gd},XDS:function(){return Zd},rVI:function(){return Jd},nvG:function(){return Qd},xQV:function(){return $d},VWS:function(){return Wd},BXO:function(){return il},s22:function(){return nl},h8f:function(){return Ud},KyA:function(){return hv},_yq:function(){return uv},lnl:function(){return pv},$rl:function(){return IA},vHQ:function(){return PA},_dh:function(){return AA},sVY:function(){return EA},L9E:function(){return uu},Ms:function(){return xu},JaT:function(){return Iu},Qc7:function(){return Mu},t0C:function(){return Du},EWv:function(){return Ou},e5O:function(){return KT},NvH:function(){return Su},hnd:function(){return yu},oYh:function(){return Au},HkJ:function(){return bu},l$l:function(){return Pu},eBj:function(){return ku},bfG:function(){return wu},U4S:function(){return Lu},$mw:function(){return Eu},PTG:function(){return Cu},uSd:function(){return Tu},wAt:function(){return vu},yOL:function(){return pu},tFh:function(){return hu},zl4:function(){return du},v3e:function(){return cu},QXe:function(){return gu},TmC:function(){return lu},w9g:function(){return mu},RTd:function(){return fu},oiw:function(){return _u},HN$:function(){return Ru},mkE:function(){return Fu},nIM:function(){return Uu},RD:function(){return Nu},DWC:function(){return $u},iNb:function(){return Bu},dhI:function(){return zT},$eE:function(){return QT},W56:function(){return ZT},HKi:function(){return $T},Nh3:function(){return _T},bV8:function(){return HT},hig:function(){return jT},bIr:function(){return WT},QQY:function(){return GT},rfm:function(){return qT},S8$:function(){return VT},_X1:function(){return UT},I4h:function(){return BT},jhV:function(){return NT},KWu:function(){return FT},Cm8:function(){return RT},nlN:function(){return dA},i29:function(){return Ga},LRf:function(){return Qa},fG_:function(){return Sv},K_X:function(){return Yu},h5L:function(){return Ju},yLG:function(){return Ku},LO8:function(){return Xu},XI8:function(){return _r},EDN:function(){return kP},sJW:function(){return Rb},f2c:function(){return zC},Lfo:function(){return qC},dp6:function(){return Lb},NF_:function(){return CC},uW3:function(){return xC},Dt$:function(){return RC},np9:function(){return ib},M6G:function(){return sb},RaX:function(){return NC},MWw:function(){return ob},XbP:function(){return GC},erD:function(){return sw},hOL:function(){return Sb},rYN:function(){return wb},Akl:function(){return bb},R5h:function(){return cb},EkS:function(){return db},zVA:function(){return Cb},FDi:function(){return lb},wNN:function(){return Tb},Jmv:function(){return JC},KJ$:function(){return fb},md3:function(){return mb},lCX:function(){return ZC},_yJ:function(){return pb},w0e:function(){return ub},Kzw:function(){return KC},tYD:function(){return Ab},zYr:function(){return gb},Ps3:function(){return hb},N1:function(){return vb},uI4:function(){return yb},z5u:function(){return Pb},NXh:function(){return QC},sDN:function(){return MC},K0D:function(){return PC},AeD:function(){return kC},RGj:function(){return AC},jkn:function(){return IC},vpZ:function(){return UC},CH5:function(){return VC},vPg:function(){return YC},G78:function(){return eb},xPu:function(){return tb},R0M:function(){return bC},Fid:function(){return Ib},kkF:function(){return Db},O6X:function(){return FC},Ipv:function(){return jC},gu7:function(){return XC},AP6:function(){return $C},RHM:function(){return Bb},Mcu:function(){return ab},ey$:function(){return rb},K4A:function(){return HC},XCT:function(){return _C},uJS:function(){return WC},Ehx:function(){return SC},IHr:function(){return Eb},lsA:function(){return xb},UNp:function(){return wC},kyM:function(){return TC},A4x:function(){return kb},iLP:function(){return BC},Z49:function(){return Ob},DAc:function(){return OC},EvM:function(){return LC},WNm:function(){return DC},RtG:function(){return nb},Uq0:function(){return Mb},ds2:function(){return EC},Vdp:function(){return GS},kzg:function(){return hw},cZM:function(){return ts},$Ej:function(){return ic},eQj:function(){return JT},MYh:function(){return ok},WJE:function(){return XT},Oat:function(){return ik},WKi:function(){return rk},mBS:function(){return YT},qXI:function(){return ek},sFl:function(){return nk},STX:function(){return tk},a3w:function(){return rc},Iye:function(){return XP},E4i:function(){return YP},Yfz:function(){return _g},wD3:function(){return Ng},ecn:function(){return Bg},hAd:function(){return Ug},F_w:function(){return Hg},sgf:function(){return $g},dR$:function(){return Vg},Nrs:function(){return jg},$N1:function(){return Wg},U85:function(){return Qg},UCw:function(){return qg},IHw:function(){return zg},Fi:function(){return Gg},RJh:function(){return sA},OF8:function(){return C},xKE:function(){return S},bhC:function(){return uk},$Mx:function(){return hk},V5U:function(){return pk},lqy:function(){return y},pqC:function(){return v},A$C:function(){return w},VKG:function(){return b},vlt:function(){return ar},pL3:function(){return sr},pHN:function(){return cr},fDR:function(){return ow},A9S:function(){return Ut},Php:function(){return Tt},c7c:function(){return Ol},S5R:function(){return Rl},ujK:function(){return Gl},m_L:function(){return Fl},Y2u:function(){return Bl},J5c:function(){return El},q$m:function(){return xl},q4q:function(){return Dl},PFH:function(){return Wl},H79:function(){return Vl},lou:function(){return ql},Nol:function(){return Nl},IE6:function(){return jl},KzX:function(){return Ml},$AQ:function(){return Il},bdf:function(){return Ll},om$:function(){return _l},GKo:function(){return $l},wke:function(){return Ul},vYO:function(){return qy},cXq:function(){return Pw},c$4:function(){return jw},QYr:function(){return Ww},wop:function(){return Gw},Kdh:function(){return Rw},Pc$:function(){return Dw},xPl:function(){return Iw},LCb:function(){return Uw},R9m:function(){return Aw},v2K:function(){return Bw},oHd:function(){return Mw},EuH:function(){return $w},oy8:function(){return Lw},Wtq:function(){return Ew},rHl:function(){return Vw},cNQ:function(){return Nw},jGO:function(){return Ow},R4R:function(){return Fw},UKl:function(){return qw},k6j:function(){return _w},M4n:function(){return xw},EIL:function(){return Hw},COO:function(){return zy},dhV:function(){return zt},p_L:function(){return oP},eUy:function(){return aP},m8X:function(){return rP},vo0:function(){return cw},qS2:function(){return kA},Ay$:function(){return vh},w5E:function(){return Lg},THd:function(){return tc},hxo:function(){return US},PMq:function(){return NS},srQ:function(){return rl},dw4:function(){return iP},WiH:function(){return $S},c4Q:function(){return Xl},EOu:function(){return Yl},SpS:function(){return Jl},Hx8:function(){return WS},eEQ:function(){return yy},ybt:function(){return Sy},h1Z:function(){return AP},KX1:function(){return ou},lyH:function(){return ru},n_f:function(){return su},UWM:function(){return au},yaB:function(){return Qt},FsZ:function(){return gl},LwW:function(){return Dr},Nxj:function(){return Rr},zis:function(){return Nr},My6:function(){return Fb},xuo:function(){return vv},H4x:function(){return W},hT$:function(){return qr},vQw:function(){return LA},E9T:function(){return DA},TNq:function(){return OA},RPe:function(){return ro},WCL:function(){return Kr},ruE:function(){return to},f7t:function(){return no},sq0:function(){return jf},dlb:function(){return Gr},gJK:function(){return so},JIJ:function(){return Ur},_Y2:function(){return _},OPi:function(){return B},s$v:function(){return Zr},A0i:function(){return jr},S6L:function(){return zr},kgv:function(){return oo},sCZ:function(){return ao},TyD:function(){return io},_Rg:function(){return Qr},nTL:function(){return $},G1Z:function(){return U},_lB:function(){return N},AYT:function(){return H},DyR:function(){return $r},ib1:function(){return Vf},XM_:function(){return Yr},z$F:function(){return F},pBE:function(){return co},zEz:function(){return Wr},kKw:function(){return Hr},jUm:function(){return eo},zpf:function(){return Vr},qq_:function(){return Xr},OLe:function(){return Jr},mNl:function(){return Oh},WNM:function(){return Mh},ZI3:function(){return xr},ckW:function(){return Lr},s7S:function(){return Or},Z3R:function(){return Mr},FLG:function(){return Wf},F$$:function(){return Jy},oo_:function(){return Xk},U7j:function(){return sl},IVG:function(){return al},mfB:function(){return ol},kiM:function(){return cl},Q3R:function(){return Ho},j0J:function(){return Fo},Kdk:function(){return xo},uBh:function(){return _o},m3w:function(){return Uo},OrY:function(){return Ro},sg4:function(){return Lo},B0A:function(){return $o},I9w:function(){return zo},nDr:function(){return Oo},Uqx:function(){return No},Ijl:function(){return Bo},Vl:function(){return Do},e8l:function(){return Mo},nFE:function(){return Wo},nnD:function(){return Ao},IX6:function(){return Xi},Zsh:function(){return Ji},B70:function(){return ho},pzZ:function(){return uo},v1x:function(){return po},nWA:function(){return vo},dZj:function(){return Eo},YlS:function(){return lo},NYk:function(){return yo},uIb:function(){return Co},cFY:function(){return go},fSk:function(){return Io},G0I:function(){return wo},sep:function(){return To},u$0:function(){return ko},LP$:function(){return fo},YhM:function(){return So},uth:function(){return Po},M3l:function(){return bo},Rgo:function(){return vg},Smg:function(){return fg},W1B:function(){return Sg},jQb:function(){return mg},QJe:function(){return lg},CDI:function(){return cg},eD0:function(){return qh},y6M:function(){return yg},KEP:function(){return Vh},YLV:function(){return hg},VPR:function(){return tg},LLm:function(){return ng},vCG:function(){return Qh},V_e:function(){return ig},ck_:function(){return dg},iB1:function(){return sg},vxy:function(){return rg},YVN:function(){return Cg},jAy:function(){return zh},vif:function(){return bg},a$Z:function(){return gg},v5s:function(){return wg},RSD:function(){return Zh},bri:function(){return Xh},e88:function(){return eg},TRT:function(){return ug},TzH:function(){return pg},Fh_:function(){return og},hqX:function(){return ag},vas:function(){return Jh},azB:function(){return Yh},MUC:function(){return Kh},$HJ:function(){return qs},Od5:function(){return Bs},lG7:function(){return Zs},yPw:function(){return Qs},pOl:function(){return Ns},lGs:function(){return Vs},OnJ:function(){return js},X1V:function(){return _s},rUV:function(){return Gs},k28:function(){return zs},_wC:function(){return Ws},OE6:function(){return Hs},nsS:function(){return Us},uSS:function(){return $s},oq6:function(){return Sr},mnt:function(){return p},EYX:function(){return Ck},huY:function(){return mk},hy5:function(){return gk},NNy:function(){return yk},rey:function(){return Sk},czH:function(){return fk},uzv:function(){return vk},GQ:function(){return u}});var i=n(79664),r=n(68679);const o=i.z.Alert,a=i.z.NoAlert,s=i.z.HighImpact,c=i.z.Critical,d=r.C.Fallback,l=(r.C.Exceptional,{build:""});function u(e){Object.assign(l,e)}function p(){return l}function h(e,t=i.z.Alert,n,r,o){const a={id:e,severity:t,pb:void 0===n?l:n};return void 0!==r&&(a.message=r),void 0!==o&&(a.source=o),a}function g(e,t){return{build:"",userImpacting:e,errorBehavior:t}}const m=h(1399,a),f=h(1405,a),v=h(8017,a),y=h(8018,a),S=h(8021,a),C=h(8022),b=h(8027,a),w=h(8028),T=h(8029),k=h(8030),P=h(8031),A=h(8032,s),I=h(8033,s),E=h(8034),x=h(8035),M=h(8036),O=h(8037),L=h(8038),D=h(8039),R=h(8047),F=h(8100,s,g(!0)),B=h(8101,a),N=h(8102,a),U=h(8103,o,g(!0)),$=h(8104,o,g(!0)),_=h(8105,a),H=h(8107,a),W=h(8109,a),j=h(8183),G=h(8184),V=h(8185),q=h(8186),z=h(8187),Q=h(8189),Z=h(8190),K=h(8191),J=h(8192),X=h(8214),Y=h(8215),ee=h(8219),te=h(8230),ne=h(8291,a),ie=h(8320),re=h(8321,a),oe=h(8323),ae=h(8324),se=h(8325),ce=h(8329),de=h(8330),le=h(8331),ue=h(8332),pe=h(8334),he=h(8335),ge=h(8336),me=h(8337),fe=h(8380),ve=h(8381),ye=h(8601),Se=h(8602),Ce=h(8603),be=h(8604),we=h(8605),Te=h(8810,s),ke=h(8811,s),Pe=h(8812,s),Ae=h(8813,s),Ie=h(8814,s),Ee=h(8815,c,l,"Cookie Banner Element is missing"),xe=h(8841,s),Me=h(8842,c),Oe=h(8843),Le=h(8844),De=h(8845,c),Re=h(8846,c),Fe=h(8847),Be=h(8848,s),Ne={LoadExperienceError:h(8941)},Ue=h(9300),$e=h(9408),_e=h(9409),He=h(9421),We=h(9424),je=h(9425),Ge=h(9426),Ve=h(9427),qe=h(9428),ze=h(9429),Qe=h(9430),Ze=h(9431),Ke=h(9432),Je=h(9433),Xe=h(9434),Ye=h(9435),et=h(9436),tt=h(9437),nt=h(9438),it=h(9439),rt=h(11103),ot=h(13e3),at=h(13001),st=h(13100),ct=h(13101),dt=h(13102),lt=h(13103),ut=h(13104),pt=h(13105),ht=h(13108),gt=h(13114),mt=h(13115),ft=h(13116),vt=h(13117),yt=h(13119),St=h(13120),Ct=h(13121),bt=h(13122,s),wt=h(13125),Tt=h(13126),kt=h(13127),Pt=h(13128),At=h(13129),It=h(13131),Et=h(13132),xt=h(13133),Mt=h(13134),Ot=h(13135),Lt=h(13136),Dt=h(13137),Rt=h(13138),Ft=h(13140),Bt=h(13141),Nt=h(13142),Ut=h(13143,a),$t=h(13144),_t=h(14007),Ht=h(14102),Wt=h(15200,a),jt=h(15201,a),Gt=h(15202,a),Vt=h(15204,a),qt=h(15205),zt=h(15250),Qt=h(15303),Zt=h(18100),Kt=h(18103),Jt=h(18104),Xt=h(18105),Yt=h(18106),en=h(18107),tn=h(18108),nn=h(18109),rn=h(18110),on=h(18111),an=h(18113),sn=h(19e3),cn=h(19001),dn=h(19004,c,g(!0)),ln=h(19006),un=h(19010),pn=h(19013),hn=h(19014),gn=h(19016,a),mn=h(19019),fn=h(20007,a),vn=h(20008),yn=h(20009),Sn=h(20018),Cn=h(20051),bn=h(20053),wn=h(20054),Tn=h(20061),kn=h(20062),Pn=h(20063),An=h(20066),In=h(20068),En=(i.z.NoAlert,h(20071,a)),xn=h(20072,a),Mn=h(20074),On=h(20075),Ln=h(20076),Dn=h(20078),Rn=h(20079),Fn=h(20080),Bn=h(20081),Nn=h(20082,a),Un=h(20083),$n=h(20084),_n=h(20085),Hn=h(20086),Wn=h(20150),jn=h(20151),Gn=h(20152),Vn=h(20153),qn=h(20154),zn=h(20155),Qn=h(20156),Zn=h(20157),Kn=h(20158),Jn=h(20159),Xn=h(20162,s),Yn=h(20171),ei=h(20172),ti=h(20173),ni=h(20174),ii=h(20175),ri=h(20176),oi=h(20177),ai=h(20178),si=h(20179),ci=h(20180),di=h(20181),li=h(20182),ui=h(20183,a),pi=h(20184),hi=h(20186),gi=h(20187),mi=h(20188),fi=h(20189),vi=h(20190,a),yi=h(20191,a),Si=h(20203),Ci=h(20204,a),bi=h(20205,a),wi=h(20209,a,l,"Service request failed"),Ti=h(20210,a,l,"1S request (assets.msn.*) failed. Retrying using backup domain (assets2.msn.*)"),ki=h(20302),Pi=h(20303),Ai=h(20304),Ii=h(22012),Ei=h(22014,c,g(!0)),xi=h(22019),Mi=h(22020),Oi=h(22022,a),Li=h(22023,a),Di=h(22024,a),Ri=h(22025,a),Fi=h(22027),Bi=h(22028),Ni=h(22029,c),Ui=h(22030,c),$i=h(24520),_i=h(24521),Hi=h(24522),Wi=h(24523),ji=h(24524),Gi=h(24526),Vi="shopping-page-content/ShoppingPageContentClient/Live.ts",qi=h(24563,o,l,void 0,Vi),zi=h(24571),Qi=h(24573),Zi=h(24574),Ki="WindowsShellAccountManager.connector.ts",Ji=h(24580,a,l,void 0,Ki),Xi=h(24583,o,l,void 0,Ki),Yi=h(24601),er=h(24602),tr=h(24603),nr=h(24604),ir=h(24606),rr=h(24607),or=h(24608),ar=h(24611),sr=h(24612),cr=h(24613),dr=h(24660,c),lr=h(24700),ur=h(24800),pr=h(28100,a),hr=h(28101),gr=h(28102),mr=h(28103),fr=h(28213,a),vr=h(28215),yr=h(28216),Sr=h(28217),Cr=h(28401,a),br=h(28410),wr=h(28411,a),Tr=h(28414),kr=h(28415),Pr=h(28416),Ar=h(28420),Ir=h(28421),Er=h(28500),xr=h(29e3),Mr=h(29001),Or=h(29002,a),Lr=h(29003),Dr=h(29100),Rr=h(29101),Fr=h(29102),Br=h(29103),Nr=h(29104,a),Ur=h(29503,a),$r=h(29507,o,g(!0)),_r=h(29526,o,g(!0)),Hr=h(29530,a),Wr=h(29532,a,g(!1)),jr=h(29533,o,g(!0)),Gr=h(29534,a,g(!1)),Vr=h(29535,s,g(!0)),qr=h(29541,a,g(!1)),zr=h(29543,o,g(!0)),Qr=h(29544,a,g(!0)),Zr=h(29545,s,g(!0)),Kr=h(29547,o,g(!0)),Jr=h(29557,o,g(!0)),Xr=h(29566,a,g(!1)),Yr=h(29567,a,g(!1,d)),eo=h(29569,o,g(!0)),to=h(29580,s,g(!0)),no=h(29582,o,g(!0)),io=h(29585,a,g(!1)),ro=h(29586,o,g(!0)),oo=h(29590,a,g(!0)),ao=h(29591,a,g(!0)),so=h(29593,a,g(!1)),co=h(29599,a,g(!0)),lo=h(29603),uo=h(29604),po=h(29605),ho=h(29606,a),go=h(29608,a),mo=h(29625,a),fo=h(29690),vo=h(29716),yo=h(29719),So=h(29729,a),Co=h(29734,a),bo=h(29744,a),wo=h(29751),To=h(29752),ko=h(29753),Po=h(29754),Ao=h(29756,a),Io=h(29757),Eo=h(29758),xo=h(29854),Mo=h(29855),Oo=h(29856),Lo=h(29857),Do=h(29858),Ro=h(29859),Fo=h(29860),Bo=h(29861),No=h(29862),Uo=h(29863),$o=h(29864),_o=h(29865),Ho=h(29866),Wo=h(29867),jo=h(29901),Go=h(29903),Vo=h(29923),qo=h(29961),zo=h(29972),Qo=h(33e3,a),Zo=h(33012),Ko=h(33013,a),Jo=h(33014),Xo=h(33015,a),Yo=h(33016,a),ea=h(33017,a),ta=h(33018,a),na=h(33020),ia=h(33021),ra=h(33100),oa=h(33102),aa=h(33103),sa=h(33105),ca=h(33110),da=h(33113,a),la=h(33130,c,g(!0)),ua=h(33140),pa=h(33151),ha=h(33152),ga=h(33160,c,g(!0)),ma=h(33161,c,g(!0)),fa=h(34005,a),va=h(34009,a),ya=h(34013,a),Sa=h(34014,s),Ca=h(34015,s),ba=h(34016,a),wa=h(34022,s),Ta=h(34024),ka=h(35001),Pa=h(35003,a),Aa=h(35004),Ia=h(35006),Ea=h(35007),xa=h(35008),Ma=h(35009),Oa=h(35010),La=h(35013,a),Da=h(35014),Ra=h(35015),Fa=h(35016),Ba=h(35018),Na=h(35019),Ua=h(35020),$a=h(35022,a),_a=h(35023),Ha=h(35024,a),Wa=h(35025,a),ja=h(35026),Ga=h(35117),Va=h(35118),qa=h(35119,a),za=h(35120),Qa=h(35121),Za=h(35122),Ka=h(35123),Ja=h(35124),Xa=h(35125),Ya=h(35128),es=h(35129,a),ts=h(35130),ns=h(35131),is=h(35132),rs=h(35133),os=h(35201),as=h(35203,a),ss=h(35401,a),cs=h(35402),ds=h(35600,a),ls=h(35601,a),us=h(35602,a),ps=h(35603,a),hs=h(35604,a),gs=h(35605,a),ms=h(35606,a),fs=h(35607,a),vs=h(35608,a),ys=h(35609,a),Ss=h(35610,a),Cs=h(35611,a),bs=h(35613,a),ws=h(35614,a),Ts=h(35615,a),ks=h(35616,a),Ps=h(35700),As=h(35701),Is=h(36105),Es=h(36106),xs=h(36107),Ms=h(36108),Os=h(36109,a),Ls=h(36111),Ds=h(36113),Rs=h(36121,a),Fs=h(36122),Bs=h(36300),Ns=h(36302),Us=h(36309),$s=h(36311),_s=h(36313),Hs=h(36314,a),Ws=h(36315),js=h(36317,a),Gs=h(36319,a),Vs=h(36320,a),qs=h(36321),zs=h(36322),Qs=h(36323,a),Zs=h(36324,a),Ks=h(36500),Js=h(36600),Xs=h(36601),Ys=h(36602),ec=h(36603),tc=h(36604),nc=h(36605),ic=h(36606),rc=h(36607),oc=h(36904),ac=h(36905),sc=h(36906),cc=h(36907),dc=h(36908),lc=h(36909),uc=h(36910),pc=h(36911),hc=h(36912),gc=h(36913),mc=h(36914),fc=h(36915),vc=h(36916),yc=h(36917),Sc=h(36918),Cc=h(36919),bc=h(36920),wc=h(36921),Tc=h(36922),kc=h(36923),Pc=h(36924),Ac=h(36925),Ic=h(36927),Ec=h(36928),xc=h(36929),Mc=h(36930),Oc=h(36931),Lc=h(36932),Dc=h(36933),Rc=h(36934),Fc=h(36935),Bc=h(36936),Nc=h(36940,c,g(!0)),Uc=h(36941,c,g(!0)),$c=h(36942,c,g(!0)),_c=h(36943,c,g(!0)),Hc=h(36944,c,g(!0)),Wc=h(36945,c,g(!0)),jc=h(36946,c,g(!0)),Gc=h(36947,c,g(!0)),Vc=h(36948,c,g(!0)),qc=h(36949,c,g(!0)),zc=h(36950,c,g(!0)),Qc=h(36951,c,g(!0)),Zc=h(36953,c,g(!0)),Kc=h(36954,c,g(!0)),Jc=h(36956,c,g(!0)),Xc=h(36957,c,g(!0)),Yc=h(36958,c,g(!0)),ed=h(36959,c,g(!0)),td=h(36960,c,g(!0)),nd=h(36961,c,g(!0)),id=h(36962,c,g(!0)),rd=h(36963,c,g(!0)),od=h(36964,c,g(!0)),ad=h(36965,c,g(!0)),sd=h(36966,c,g(!0)),cd=h(36967,c,g(!0)),dd=h(36968,c,g(!0)),ld=h(36969,c,g(!0)),ud=h(36970,c,g(!0)),pd=h(36971,c,g(!0)),hd=h(36972,c,g(!0)),gd=h(36973,c,g(!0)),md=h(36974),fd=h(36975),vd=h(36976),yd=h(36977),Sd=h(36978),Cd=h(36979),bd=h(36980),wd=h(36981),Td=h(36982),kd=h(36983,c,g(!0)),Pd=h(36984,c,g(!0)),Ad=h(36985,c,g(!0)),Id=h(36986,c,g(!0)),Ed=h(36987,c,g(!0)),xd=h(36988,c,g(!0)),Md=h(36990,o,g(!1)),Od=h(36991,o,g(!1)),Ld=h(36992,c,g(!0)),Dd=h(36993,c,g(!0)),Rd=h(36994,c,g(!0)),Fd=h(36995,c,g(!0)),Bd=h(36996,c,g(!0)),Nd=h(36997,o,g(!0)),Ud=h(37001),$d=h(37020),_d=h(37021),Hd=h(37022),Wd=h(37023),jd=h(37024),Gd=h(37025),Vd=h(37026),qd=h(37028),zd=h(37029),Qd=h(37030),Zd=h(37031),Kd=h(37032),Jd=h(37033),Xd=h(37035),Yd=h(37036),el=h(37037),tl=h(37038),nl=h(37074),il=h(37075),rl=h(37300,a),ol=h(37550),al=h(37551),sl=h(37552),cl=h(37553),dl=h(37560),ll=h(37561),ul=h(37562),pl=h(37563),hl=h(37566),gl=h(37568),ml=h(37571,o,g(!0)),fl=h(37573,o,g(!0)),vl=h(37576),yl=h(37577,o,g(!0)),Sl=h(37578,a),Cl=h(37579),bl=h(37580),wl=h(37581),Tl=h(37582),kl=h(37583,a),Pl=h(37584),Al=h(37585,a),Il=h(37601),El=h(37604),xl=h(37605),Ml=h(37609),Ol=h(37610),Ll=h(37611),Dl=h(37612,o,g(!0)),Rl=h(37613),Fl=h(37614),Bl=h(37629),Nl=h(37631),Ul=h(37634,a),$l=h(37635,a),_l=h(37636,a),Hl=h(37637),Wl=h(37638),jl=h(37639),Gl=h(37640),Vl=h(37641),ql=h(37642),zl=h(38e3),Ql=h(38001,a),Zl=h(38002,a),Kl=h(38003,a),Jl=h(38005),Xl=h(38006,a),Yl=h(38007,a),eu=h(38008,a),tu=h(38009,a),nu=h(38046,c),iu=h(38055),ru=h(38105),ou=h(38116),au=h(38119),su=h(38120),cu=h(38300,s,g(!0)),du=h(38301,s,g(!0)),lu=h(38302),uu=h(38303),pu=h(38304),hu=h(38305),gu=h(38306),mu=h(38307),fu=h(38318),vu=h(38319,s,g(!0)),yu=h(38320),Su=h(38321,s,g(!0)),Cu=h(38322,s,g(!0)),bu=h(38323),wu=h(38324),Tu=h(38325),ku=h(38327,s),Pu=h(38328),Au=h(38329),Iu=h(38331,s,g(!0)),Eu=h(38342),xu=h(38344),Mu=h(38345),Ou=h(38346),Lu=h(38347),Du=h(38348),Ru=h(38360),Fu=h(38362),Bu=h(38363),Nu=h(38364),Uu=h(38365,c),$u=h(38366),_u=h(38367),Hu=h(38600),Wu=h(38601),ju=h(38602),Gu=h(38603),Vu=h(38604),qu=h(38605),zu=h(38606),Qu=h(38607,a),Zu=h(38608,a),Ku=h(38800),Ju=h(38801),Xu=h(38802),Yu=h(38803),ep=h(38903),tp=h(38904),np=h(38905),ip=h(38906),rp=h(38907),op=h(38908),ap=h(38909),sp=h(38910),cp=h(38911),dp=h(38912),lp=h(38913),up=h(39e3),pp=h(39001),hp=h(39002),gp=h(39003),mp=h(39004,a),fp=h(39005),vp=h(39006),yp=h(39007),Sp=h(39008),Cp=h(39009),bp=h(39010),wp=h(39011),Tp=h(39012),kp=h(39102),Pp=h(39104),Ap=h(39106),Ip=h(39107),Ep=h(39109),xp=h(39110),Mp=h(39111),Op=h(39200),Lp=h(39201),Dp=h(39202),Rp=h(39203),Fp=h(39204),Bp=h(39205),Np=h(39206),Up=h(39207),$p=h(39208),_p=h(39209),Hp=h(39210),Wp=h(39211),jp=h(39212),Gp=h(39213),Vp=h(39214),qp=h(39215,a),zp=h(39216,a),Qp=h(39217,a),Zp=h(39218),Kp=h(39219),Jp=h(39220),Xp=h(39221),Yp=h(39222),eh=h(39223),th=h(39230),nh=h(39231),ih=h(39232,a),rh=h(39233),oh=h(39300),ah=h(39500),sh=h(39501),ch=h(39502),dh=h(39508),lh=h(39509),uh=h(39510),ph=h(39511),hh=h(39512),gh=h(39513),mh=h(39514),fh=h(39515),vh=h(39517),yh=h(39518),Sh=h(39519),Ch=h(39520),bh=h(39521),wh=h(39600),Th=h(39601),kh=h(39602),Ph=h(39603),Ah=h(39700),Ih=h(39701),Eh=h(39702),xh=h(39703),Mh=h(39704),Oh=h(39705),Lh=h(39706),Dh=h(39708,a),Rh=h(39710,a),Fh=h(39712),Bh=h(39713,a),Nh=h(39714),Uh=h(39715),$h=h(39716,a),_h=h(39717),Hh=h(39718),Wh=h(39719),jh=h(39720),Gh=h(39901),Vh=h(40301,s),qh=h(40302,s),zh=h(40303,a),Qh=h(40304,s),Zh=h(40308),Kh=h(40310,a),Jh=h(40312,s),Xh=h(40313,s),Yh=h(40314),eg=h(40315),tg=h(40318),ng=h(40319,a),ig=h(40320,a),rg=h(40321,a),og=h(40322,s),ag=h(40323,s),sg=h(40324,a),cg=h(40325,a),dg=h(40326,s),lg=h(40327,s),ug=h(40328,a),pg=h(40329,a),hg=h(40331),gg=h(40332),mg=h(40333,a),fg=h(40334,a),vg=h(40335,a),yg=h(40336,s),Sg=h(40337,s),Cg=h(40338,a),bg=h(40339,a),wg=h(40340,a),Tg=h(40520,a),kg=h(40600,a),Pg=h(40601,a),Ag=h(40604,a),Ig=h(40605,a),Eg=h(40606,a),xg=h(40607,a),Mg=h(40608,a),Og=h(40609,a),Lg=h(40610),Dg=h(40700),Rg=h(40701),Fg=h(40702),Bg=h(41e3),Ng=h(41001),Ug=h(41002),$g=h(41003),_g=h(41005),Hg=h(41006),Wg=h(41007),jg=h(41009),Gg=h(41010,a),Vg=h(41011,a),qg=h(41012,a),zg=h(41013,a),Qg=h(41014),Zg=h(41109,c,g(!0)),Kg=h(41110,c,g(!0)),Jg=h(41111,c,g(!0)),Xg=h(41112,c,g(!0)),Yg=h(41113,c,g(!0)),em=h(41114,c,g(!0)),tm=h(41115,c,g(!0)),nm=h(41140,c,g(!0)),im=h(41141,c,g(!0)),rm=h(41142,c,g(!0)),om=h(41143,c,g(!0)),am=h(41144,c,g(!0)),sm=h(41145,c,g(!0)),cm=h(41147,c,g(!0)),dm=h(41148,c,g(!0)),lm=h(41149),um=h(41150),pm=h(41151),hm=h(41152,c,g(!0)),gm=h(41153),mm=h(41154),fm=h(41155),vm=h(41156),ym=h(41157),Sm=h(41158),Cm=h(41159,c,g(!0)),bm=h(41160,c),wm=h(41161,c),Tm=h(41162,c),km=h(41163,c),Pm=h(41164,c),Am=h(41165,c),Im=h(41166,c),Em=h(41167,c),xm=h(41168,c),Mm=h(41169,c),Om=h(41170,c),Lm=h(41172,c),Dm=h(41174,c),Rm=h(41175,c),Fm=h(41176,c),Bm=h(41177,c),Nm=h(41184,c),Um=h(41185,c),$m=h(41186),_m=h(41187),Hm=h(41188),Wm=h(41190,c),jm=h(41208),Gm=h(41209),Vm=h(41210),qm=h(41211,c,g(!0)),zm=h(41212),Qm=h(41213),Zm=h(41214),Km=h(41215,c,g(!0)),Jm=h(41216),Xm=h(41217),Ym=h(41218),ef=h(41220),tf=h(41221),nf=h(41222),rf=h(41223,c,g(!0)),of=h(41224),af=h(41225),sf=h(41226),cf=h(41227,c,g(!0)),df=h(41228),lf=h(41229),uf=h(41230),pf=h(41231,c,g(!0)),hf=h(41232,c),gf=h(41233,c),mf=h(41234,c),ff=h(41235,c),vf=h(41236,c),yf=h(41237,c),Sf=h(41238,c),Cf=h(41239,c),bf=h(41245,a),wf=h(41247,a),Tf=h(41251,a),kf=h(41253,c),Pf=h(41254,c),Af=h(41255,c),If=h(41256,c),Ef=h(41258,c),xf=h(41259,c),Mf=h(41260,c),Of=h(41261,c),Lf=h(41350),Df=h(41402),Rf=h(41405),Ff=h(41415),Bf=h(41416),Nf=h(41417,a),Uf=h(41420),$f=h(41421),_f=h(41601),Hf=h(41900),Wf=h(42601),jf=h(42602),Gf=h(42603),Vf=h(42604),qf=h(42707),zf=h(42708),Qf=h(43e3),Zf=h(43001),Kf=h(43002),Jf=h(43005),Xf=h(43006),Yf=h(43007,c),ev=h(43008),tv=h(43011),nv=h(43012,a),iv=h(43500),rv=h(43511),ov=h(43600),av=h(43601),sv=h(43602),cv=h(43603,a),dv=h(43604,c),lv=h(43605),uv=h(43968),pv=h(43970),hv=h(43985),gv=h(43991),mv=h(44e3),fv=h(44003),vv=h(44200),yv=h(44201,c),Sv=h(44300),Cv=h(44500),bv=h(44501),wv=h(44502),Tv=h(44503),kv=h(44504),Pv=h(44505),Av=h(44506),Iv=h(44507),Ev=h(44508),xv=h(44509),Mv=h(44510),Ov=h(44511),Lv=h(44512),Dv=h(44513),Rv=h(44514),Fv=h(44515),Bv=h(44516),Nv=h(44517),Uv=h(44518),$v=h(44519),_v=h(44520),Hv=h(44521),Wv=h(44522),jv=h(44523,a),Gv=h(44524,a),Vv=h(44525),qv=h(44530),zv=h(44531,a),Qv=h(44532),Zv=h(44533,a),Kv=h(44534),Jv=h(44535,a),Xv=h(44536),Yv=h(44537,a),ey=h(44538),ty=h(44539,a),ny=h(44540,a),iy=h(44541,a),ry=h(44542),oy=h(44543),ay=h(44544,a),sy=h(44545),cy=h(44546),dy=h(44547),ly=h(44548,a),uy=h(44549),py=h(44550),hy=h(44551),gy=h(44552),my=h(44555),fy=h(44556),vy=h(44700),yy=h(44701),Sy=h(44702),Cy=h(44703),by=h(44704),wy=h(44705),Ty=h(44706),ky=h(44707),Py=h(44708),Ay=h(44709),Iy=h(44710),Ey=h(44711),xy=h(44712),My=h(44720),Oy=h(44721),Ly=h(44722),Dy=h(44724),Ry=h(44725),Fy=h(44726),By=h(44727,a),Ny=h(44728,a),Uy=h(44729,a),$y=h(44730,a),_y=h(44731,a),Hy=h(44732,a),Wy=h(44733,a),jy=h(44734,a),Gy=h(44750),Vy=h(44752),qy=h(45700),zy=h(45706,o,g(!0)),Qy=h(46e3),Zy=h(46001),Ky=h(46216,c),Jy=h(46222,c),Xy=h(47101),Yy=h(47601),eS=h(47602),tS=h(47603),nS=h(47604),iS=h(47605),rS=h(47606),oS=h(47607),aS=h(47608),sS=h(47609),cS=h(47610),dS=h(47701),lS=h(47702),uS=h(50001),pS=h(50005),hS=h(50008),gS=h(50009),mS=h(50011,c),fS=h(50013),vS=h(50014),yS=h(50017),SS=h(50025,c),CS=h(50027),bS=h(50030),wS=h(50031),TS=h(50032),kS=h(50033),PS=h(50041),AS=h(50042),IS=h(50043),ES=h(50045),xS=h(50046),MS=h(50048),OS=h(50050),LS=h(50053,c),DS=h(50054),RS=h(50061),FS=h(50062),BS=h(50063),NS=h(50100),US=h(50101),$S=h(50400,a),_S=h(50401),HS=h(50402),WS=h(50403),jS=h(52100),GS=h(52101),VS=h(53101),qS=h(53102),zS=h(53103),QS=h(53104,a),ZS=h(53105),KS=h(53106,a),JS=h(53107),XS=h(53108),YS=h(53111),eC=h(53112,a),tC=h(53320),nC=h(53321),iC=h(53322),rC=h(53323),oC=h(53324),aC=h(53325),sC=h(53326),cC=h(53700),dC=h(53800,o,l,void 0,"libs/feed-layout/.../healthFitnessCardDataMapper.ts"),lC=h(53801),uC=h(53802),pC=h(53944),hC=h(53952),gC=h(53972),mC=h(54401),fC=h(60004),vC=h(60020),yC=h(60021),SC=h(60100,a),CC=h(60101),bC=h(60102),wC=h(60103),TC=h(60104),kC=h(60105),PC=h(60106),AC=h(60107),IC=h(60108),EC=h(60109),xC=h(60110),MC=h(60111),OC=h(60112),LC=h(60113),DC=h(60114),RC=h(60115),FC=h(60116),BC=h(60117,a),NC=h(60118,a),UC=h(60119),$C=h(60120),_C=h(60125),HC=h(60126),WC=h(60127),jC=h(60128),GC=h(60129),VC=h(60130),qC=h(60131,a),zC=h(60132,a),QC=h(60134,a),ZC=h(60135,a),KC=h(60136,a),JC=h(60137,a),XC=h(60138,c),YC=h(60139,a),eb=h(60140,a),tb=h(60141,a),nb=h(60142,s),ib=h(60143),rb=h(60144),ob=h(60145,a),ab=h(60146,a),sb=h(60147),cb=h(60148),db=h(60149),lb=h(60150),ub=h(60151,s),pb=h(60152,s),hb=h(60153,a),gb=h(60154,s),mb=h(60155,a),fb=h(60156,s),vb=h(60157,a),yb=h(60158,a),Sb=h(60160,a),Cb=h(60161,s),bb=h(60162,a),wb=h(60163,a),Tb=h(60164),kb=h(60239),Pb=h(60240),Ab=h(60241,a),Ib=h(60242),Eb=h(60243),xb=h(60244),Mb=h(60245),Ob=h(60246),Lb=h(60247,c),Db=h(60248,a),Rb=h(60250,a),Fb=h(60252,a),Bb=h(60259),Nb=h(60400),Ub=h(60401),$b=h(60402),_b=h(60403),Hb=h(60404),Wb=h(60405,a),jb=h(60406),Gb=h(60407),Vb=h(60408),qb=h(60409),zb=h(60410),Qb=h(60411),Zb=h(60412),Kb=h(60413),Jb=h(60414),Xb=h(60416),Yb=h(60417),ew=h(60418),tw=h(60419),nw=h(60420),iw=h(60421),rw=h(60422),ow=h(60430),aw=h(60475),sw=h(60500),cw=h(60600),dw=h(60800),lw=h(60801),uw=h(60900),pw=h(60901),hw=h(61e3),gw=h(7e4,s),mw=h(70001,s),fw=h(70010),vw=h(70011),yw=h(70012),Sw=h(70013),Cw=h(70014,c),bw=h(70015,c),ww=h(70100),Tw=h(70101),kw=h(70104),Pw=h(70202),Aw=h(70203),Iw=h(70204),Ew=h(70205),xw=h(70206),Mw=h(70207),Ow=h(70208),Lw=h(70209),Dw=h(70210),Rw=h(70211),Fw=h(70212),Bw=h(70213),Nw=h(70214),Uw=h(70216),$w=h(70217),_w=h(70218),Hw=h(70219),Ww=h(70221),jw=h(70222),Gw=h(70223),Vw=h(70224),qw=h(70225),zw=h(70300),Qw=h(70400),Zw=h(70401),Kw=h(70402),Jw=h(70403),Xw=h(70404),Yw=h(70600),eT=h(70601),tT=h(70700),nT=h(70701),iT=h(70702),rT=h(70703),oT=h(70704),aT=h(70705),sT=h(70706),cT=h(70707),dT=h(70708),lT=h(71001),uT=h(71002),pT=h(71003),hT=h(71005,i.z.NoAlert),gT=h(72e3),mT=h(72100),fT=h(72101),vT=h(73011),yT=h(73012),ST=h(73013),CT=h(73021),bT=h(73040),wT=h(73052),TT=h(73053),kT=h(73054),PT=h(73100),AT=h(73101),IT=h(73102),ET=h(73103),xT=h(73104),MT=h(73105),OT=h(73106),LT=h(73107),DT=h(73108),RT=h(73210,o,g(!0)),FT=h(73211),BT=h(73212,s),NT=h(73213,s),UT=h(73215,o,g(!0)),$T=h(73255,s,g(!0)),_T=h(73256,s,g(!0)),HT=h(73257,s,g(!0)),WT=h(73258,s,g(!0)),jT=h(73259,s,g(!1)),GT=h(73260),VT=h(73261,o,g(!0)),qT=h(73262,s,g(!0)),zT=h(73263,s,g(!0)),QT=h(73264,s,g(!1)),ZT=h(73265),KT=(i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,h(77002,o,g(!0))),JT=h(80050),XT=h(80051),YT=h(80052),ek=h(80053),tk=h(80054,a),nk=h(80055,a),ik=h(80056),rk=h(80057),ok=h(80058),ak=h(80105),sk=h(85e3),ck=h(85001),dk=h(85002),lk=h(85003),uk=h(90003),pk=h(90004),hk=h(90005,a),gk=h(90300),mk=h(90301),fk=h(90303),vk=h(90305),yk=h(90306),Sk=h(90307),Ck=h(90308,a),bk=h(95001),wk=h(1e5),Tk=h(100002),kk=h(100004),Pk=h(100006),Ak=h(100011),Ik=h(100013,o,g(!0)),Ek=h(100014),xk=h(100017,o,g(!0)),Mk=h(100018,o,g(!0)),Ok=h(100019,o,g(!0)),Lk=h(100022),Dk=h(100024),Rk=h(100032),Fk=h(100036),Bk=h(100040),Nk=h(100042),Uk=h(100046),$k=h(100047),_k=h(111001,a),Hk=h(111010,a),Wk=h(111020,a),jk=h(111030,a),Gk=h(111041,a),Vk=h(111042,a),qk=h(111043,a),zk=h(111050,a),Qk=h(111051,a),Zk=h(111061,a),Kk=h(111100),Jk=h(111103),Xk=h(111106),Yk=h(111200),eP=h(111201),tP=h(111300),nP=h(111402),iP=h(112001,a),rP=h(120001),oP=h(120002),aP=h(120003),sP=h(120010),cP=h(120011),dP=h(125001),lP=h(125002),uP=h(130002),pP=h(130003),hP=h(133100),gP=h(133200),mP={id:133300,severity:o,pb:l},fP=h(134e3),vP=h(135e3),yP=h(135001),SP=h(135002),CP=h(135003),bP=h(135004),wP=h(135005),TP=h(135006),kP=h(135020),PP=h(135021),AP=h(135022),IP=h(135040),EP=h(135042),xP=h(135043),MP=h(135100),OP=h(135101),LP=h(135102,o,g(!0)),DP=h(135103,o,g(!0)),RP=h(135104,s,g(!0)),FP=h(135105),BP=h(135106,o,g(!0)),NP=h(135107,o,g(!0)),UP=h(136e3),$P=h(136001),_P=h(136002),HP=h(136003,a),WP=h(136004),jP=h(136005),GP=h(136006),VP=h(136007),qP=h(136008),zP=h(136009),QP=h(136010,a),ZP=h(136011,a),KP=h(136013,a),JP=h(136014,a),XP=h(140010,a),YP=h(140011,a),eA=(i.z.NoAlert,h(140100)),tA=h(140101),nA=h(140104),iA=h(143e3,a),rA=h(143001,c),oA=h(143002,c),aA=h(143003,c,g(!0)),sA=h(144e3),cA=h(222201,a),dA=h(222223),lA=h(223e3),uA=h(223001),pA=h(223002),hA=h(223003,a),gA=h(223060),mA=h(223061),fA=h(223062,a),vA=h(223100),yA=h(223101),SA=h(223200),CA=h(223201),bA=h(223202),wA=h(223203,c),TA=h(223204),kA=h(223300,a),PA=h(224100,c,g(!0)),AA=h(224101),IA=h(224102),EA=h(224103),xA=h(224200),MA=h(224201),OA=h(295100,a),LA=h(295101,a),DA=h(295102,a)},20390:function(e,t,n){"use strict";n.d(t,{M:function(){return p}});var i=n(1970),r=n(84147),o=n(26482),a=n(95912),s=n(53723);class c extends s.i{constructor(e,t,n,i,r,o,a){super(t,n,i,r,o,a),this.RequestId=e}set isMetrics(e){this._isMetrics=e}get isMetrics(){return this._isMetrics}}var d=n(67509),l=n(33379),u=n(34449);class p{constructor(e,t=""){this.requestId=t,(0,l.N)()?(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.Browser),this.isDebugEnabled=((0,u._)(e,"debug")||"").toLowerCase()in{1:1,true:1},this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.NodeJs),this.isDebugEnabled=!1),this.setupLogLevel()}getLoggingService(){return this.logger}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e,this.setupLogLevel()}setTags(e){this.tags=e}log(e,t){if(!this.tags||!this.tags.length||t&&t.length&&t.filter((e=>this.tags.includes(e))).length>0){const t=new c(this.requestId,e);this.logger.info(t)}}logError(e){const t=new c(this.requestId,e);this.logger.error(t)}logCallback(e){this.logger.infoCallback(e)}logObjects(...e){const t=new c(this.requestId,null,e);this.logger.info(t)}logSingleObject(e,t=!1){const n=new c(this.requestId,null,e);n.isMetrics=t,this.logger.info(n)}setupLogLevel(){this.logger.setLevel(this.isDebug()?r.i.Info:r.i.Error),this.setupAppenders()}setupAppenders(){this.logger.removeAllAppenders(),(0,l.N)()?this.logger.addAppender(new i.N(this.logger.getLevel())):this.logger.addAppender(new a.m(this.logger.getLevel()))}}},68364:function(e,t,n){"use strict";n.d(t,{H:function(){return s},OO:function(){return a},Tr:function(){return c}});var i=n(65135),r=n(98304),o=n(49972);function a(e,t,n,r,a={}){const s=c(t,n,r||(0,o.n)(e),a);s.pb.stack=e&&e.stack||void 0,i.M0&&i.M0.sendAppErrorEvent(s)}function s(e,t,n,r={},o=!0){i.M0&&i.M0.sendAppErrorEvent(c(e,t,n,r),o)}function c(e,t,n,i={}){const o=(0,r.mnt)();return Object.assign(Object.assign({},e),{message:t||e.message,pb:n?Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),e.pb),{customMessage:n}),i),{w:1}):Object.assign(Object.assign(Object.assign(Object.assign({},o),e.pb),i),{w:1})})}},86969:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(34449),r=n(33379);class o{constructor(){(0,r.N)()?(this.isDebugEnabled=((0,i._)(window.location.href,"debug")||"").toLowerCase()in{1:1,true:1},this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):this.isDebugEnabled=!1}getLoggingService(){return null}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e}setTags(e){}log(e,t){this.isDebug()&&console.info(e)}logError(e){console.error(e)}logCallback(e){this.isDebug()&&console.info(e())}logObjects(...e){this.isDebug()&&console.log(...e)}logSingleObject(e,t){this.isDebug()&&console.log(e)}}},33954:function(e,t,n){"use strict";function i(e){r=e}n.d(t,{E:function(){return i},k:function(){return r}});let r=new(n(86969).C)},34449:function(e,t,n){"use strict";function i(e,t){const n=t.replace(/[[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e);if(!i)return null;const r=i[2];return decodeURIComponent(r.replace(/\+/g," "))||""}n.d(t,{_:function(){return i}})},30876:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},c:function(){return o}});var i,r=n(33954);function o(e){try{const t=new URL(e).searchParams,n=t.get("expPerf"),r=t.get("expPerfSkip");if("all"==r)return{enablePerfTimeline:!1};if(!r&&!n)return{};const o={enablePerfTimeline:!0,uploadTrace:!1,sampleRate:1,uploadCriteria:{minimumTTVR:0}};if("all"===n)o.trackAllExp=!0,o.experiencesExcludedForPerf={};else if(n){const e=o.experiencesForPerf={};n.split(",").forEach((t=>e[t]=!0))}if(r){const e=o.experiencesExcludedForPerf={};r.split(",").forEach((t=>e[t]=!0))}"true"===t.get("expPerfMarks")&&(o.addPerformanceMarks=!0),"true"===t.get("expPerfTimings")&&(o.addPageTimings=!0);const a=parseInt(t.get("expPerfLevel"));return o.traceLevel=null!=i[a]?a:i.default,o}catch(e){return r.k.logError("Error parsing URL for detecting experience diagnostic switches: "+e),{}}}!function(e){e[e.default=0]="default",e[e.medium=1]="medium",e[e.high=2]="high"}(i||(i={}))},54533:function(e,t,n){"use strict";n.d(t,{Xn:function(){return x},dj:function(){return P},iG:function(){return E},g7:function(){return k},FH:function(){return A},Im:function(){return I}});var i=n(30876),r=n(21050),o=n(52575),a=n(59815),s=n(58281),c=n(22704),d=n(73898);const l=(0,c.Ou)(),u=new s.K,p="-start",h="-end";class g{constructor(e,t,n,i,r){this.timelineName=e,this.instanceId=t,this.addPerfMarks=n,this.addPageTimings=i,this.async=r,this.measures=new v,this.timeRange=[1/0,-1/0],this.timelineName=u.qualifyKey(e)}get timeSpan(){const[e,t]=this.timeRange;if(e!==1/0&&t!==-1/0)return[e,t-e]}startMeasure(e,t,n){const{async:i,startTime:r}=n||{},o=S(r);if(null==o)return{endMeasure:d.Z};const{timeRange:a}=this;o<a[0]&&(a[0]=o);const s=f(e,t),c=this.measures.add({coreName:s,from:o,async:null!=i?i:this.async,idSuffix:""},n);return{endMeasure:n=>{const{customSuffix:i,customData:r,endTime:s}=n||{},d=S(s);if(null==d||d<o)return;if(i&&t!==i){const t=f(e,i);this.measures.rename(c,t)}c.to=d,c.customData=r,d>a[1]&&(a[1]=d);!function(e,t,n,i){if(!n&&!i)return;const{from:r,to:o}=t;if(null!=r){const t=e+p;if(n&&(l[t]=r),i&&performance.mark(t,{startTime:r}),null!=o&&(n&&(l[e]=o-r),i)){const n=e+h;performance.mark(n,{startTime:o}),performance.measure(e,t,n)}}}(y(this.timelineName,c),c,this.addPageTimings,this.addPerfMarks)}}}rename(e){if(this.timelineName!==e){if(this.addPageTimings){const t=this.timelineName;this.measures.get().forEach((n=>{const i=y(t,n);delete l[i+p],delete l[i];const r=y(e,n);l[r+p]=n.from,l[r]=n.to-n.from}))}this.timelineName=e}}getPageMeasures(){return this.measures.get().map((e=>Object.assign(Object.assign({},e),{timelineName:this.timelineName})))}getMeasureValues(e){return this.measures.get(e)}instrumentFunc(e,t,n){return(...i)=>{const r=this.startMeasure(e).endMeasure;try{const o=t.apply(n,i);return o instanceof Promise?m(o,e,r):r(),o}catch(e){r({customSuffix:"error"})}}}instrumentPromise(e,t,n){const i=this.startMeasure(e,null,n).endMeasure;return m(t(),e,i)}}function m(e,t,n){return e.then((()=>n())).catch((()=>n({customSuffix:"error"}))),e}function f(e,t){return t?`${e}-${t}`:e}class v{constructor(){this.list=[],this.map=new Map,this.entIndices=[]}add(e,t){const{list:n}=this;return t&&t.entityMeasure&&this.entIndices.push(n.length),n.push(e),this.addToMap(e)}addToMap(e){const t=e.coreName;let n=this.map.get(t);return n||this.map.set(t,n=[]),e.idSuffix=(0,s.p)(n.length),n.push(e),e}get(e){const{list:t}=this;if(!e)return t;const{coreName:n}=e;let i=t;return n?i=this.map.get(n)||[]:e.entityMeasures&&(i=this.entIndices.map((e=>t[e]))),i}rename(e,t){const n=e.coreName;if(n==t)return;const i=this.map.get(n),r=i.indexOf(e);if(r>=0){i.splice(r,1);for(let e=r,t=i.length;e<t;e++)i[e].idSuffix=(0,s.p)(e);e.coreName=t,this.addToMap(e)}}}function y(e,t){return`${e}-${t.coreName}${t.idSuffix}`}function S(e){return"number"==typeof e?e>=0?e:null:null!=e?null:performance.now()}var C=n(33379),b=n(58796);let w;const T={};function k(e,t){(0,r.S4)(t),function(e){Object.assign(T,w=(0,i.c)(e))}(e)}function P(){return T}function A(e){T.enablePerfTimeline=e,T.trackAllExp=e,T.enableEntityMetricsTimeline=e,T.traceLevel=i.Y.default}const I=(e,t,n)=>function(e){if(!T.enablePerfTimeline)return!1;const{experiencesForPerf:t}=T;if(t&&t[e])return!0;const{experiencesExcludedForPerf:n}=T;if(n&&n[e])return!1;return T.trackAllExp}(e)?function(e,t,n){const i=M(e,t);return b.U[i]||(b.U[i]=(0,r.uk)(g,e,t,T.addPerformanceMarks,T.addPageTimings,n))}(e,t,n):void 0;function E(){const e=[];return Object.keys(b.U).forEach((t=>e.push(...b.U[t].getPageMeasures()))),e}function x(e){T.enableEntityMetricsTimeline&&(0,a.Yt)(e)}function M(e,t){return`${e}-${t||"0"}`}(0,C.N)()&&(window._getEntityMetricsCollection=e=>(0,a.HK)(Object.values(b.U),(0,o.At)(e)))},30874:function(e,t,n){"use strict";n.d(t,{z:function(){return T}});var i=n(22704),r=n(54533),o=n(11923);function a(e={}){const t=Object.assign(Object.assign({},(0,i.Ou)()),(0,i.Y9)()),n=[],o={WW:{pid:0},Resolver:{pid:1},Ads:{pid:2},Telemetry:{pid:3},"Content Preview":{pid:4},Images:{pid:5},JS:{pid:6},Statics:{pid:7},Configs:{pid:8},Services:{pid:9},nextPID:{pid:20}},a=100;!function(e,t,n){const i=[{name:"Ads",regex:/(\/srtb\.|taboola|outbrain)/i},{name:"Telemetry",regex:/(otf\.|\/c\.gif)/i},{name:"Content Preview",regex:/\/content\/view\/v[0-9]\/Preview\//i},{name:"Images",regex:/(img-s-msn-com|\.svg)/i},{name:"JS",regex:/\.js/i},{name:"Statics",regex:/statics/i},{name:"Configs",regex:/\/config/i},{name:"Services",regex:/(\/service\/|api|\/getappanoncookie|content|microsoftonline)/i}];let r=performance.getEntriesByType("resource").filter((t=>{const{duration:n,startTime:i}=t;return g(e,i,i+n)}));i.forEach((e=>{p(e.name,n);const i=[];r.filter((t=>{const n=t.name.match(e.regex);return n||i.push(t),n})).forEach(((n,i)=>{const r=new URL(n.name),o=r.pathname.length>1?r.pathname:r.hostname;t.push({async:!0,timelineName:e.name,coreName:o,idSuffix:`-${i}`,from:n.startTime,to:n.startTime+n.duration})})),r=i}))}(e,n,o),function(e,t,n,i){n.forEach((n=>{const{async:r,timelineName:o}=n;r&&p(o,i),g(e,n.from,n.to)&&t.push(n)}))}(e,n,(0,r.iG)(),o),u(e,n,t,o,/^WW\./,"WW");const m=Object.assign({},window._appTimings||{});u(e,n,m,o,/.*/);const f=[];f.push(c(e,"Global","NavStart",a,0,"g")),Object.keys(t).filter((n=>n.match(/TT/)&&g(e,t[n]))).sort(((e,n)=>t[e]-t[n])).forEach((n=>f.push(c(e,"Global",n,a,t[n],"g")))),Object.keys(t).filter((n=>n.match(/^WW\./i)&&g(e,t[n]))).sort(((e,n)=>t[e]-t[n])).forEach((n=>f.push(c(e,"WW",n,o.WW.pid,t[n],"p")))),f.push(s("process_name",a,{name:"Main"})),f.push(s("process_sort_index",a,{sort_index:a}));const{uploadTrace:v}=e;return l(e,n,!0).forEach(((t,n)=>{const{pid:i}=o[t.name];t.measures.forEach(((t,r)=>{const{timelineName:o,coreName:a,idSuffix:s,from:c,to:l,customData:u}=t,p=("000"+r).substr(-3,3),h=a+s,g=v?function(e){const t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(h):h,m=`${p}-${g}`;f.push(...function(e,t,n,i,r,o,a,s,c,l){return[d(e,t,n,l?"B":"b",i,r,a,{id:o}),d(e,t,n,l?"E":"e",i,r,s,{id:o,args:JSON.stringify(c)})]}(e,o,m,i,n,r,c,l,u))})),f.push(s("process_name",i,{name:t.name})),f.push(s("process_sort_index",i,{sort_index:i})),f.push(s("thread_name",i,{name:t.name},n)),f.push(s("thread_sort_index",i,{sort_index:n},n))})),l(e,n,!1).forEach(((t,n)=>{t.measures.forEach((t=>{const{timelineName:i,coreName:r,idSuffix:o,from:a,to:s,customData:c}=t,l=r+o;f.push(function(e,t,n,i,r,o,a,s){const c=h(a-o);return d(e,t,n,"X",i,r,o,{dur:c,args:JSON.stringify(s)})}(e,i,l,100,n,a,s,c))})),f.push(s("thread_name",100,{name:t.name},n)),f.push(s("thread_sort_index",100,{sort_index:n},n))})),f}function s(e,t,n,i){const r={name:e,ph:"M",pid:t,args:n};return null!=i&&(r.tid=i),r}function c(e,t,n,i,r,o){return d(e,t,n,"i",i,null,r,{s:o})}function d(e,t,n,i,r,o=null,a,s){const c=Object.assign({cat:t,name:n,ph:i,pid:r,tid:o,ts:h(a)},s);return null!=o&&(c.tid=o),c}function l(e,t,n){const i=(0,o.Z)(t.filter((t=>!!t.async===n&&g(e,t.from,t.to))),(e=>e.timelineName)),r=[];let a=0;return Object.keys(i).forEach((e=>{const t=i[e].sort(((e,t)=>e.from-t.from));a=Math.max(a,t[t.length-1].to),r.push({name:e,measures:t})})),r.sort(((e,t)=>e.measures[0].from-t.measures[0].from))}function u(e,t,n,i,r,o){const a=/-?[Ss]tart$/,s={"-Start":"-End","-start":"-end",Start:"End",start:"end"},c=[];Object.keys(n).filter((e=>e.match(r))).forEach((r=>{const d=r.match(a);if(!d)return;let l=r.replace(a,"");const u=`${l}${s[d[0]]}`,p=d&&n[u];if(!p)return;c.push(r),c.push(u);let h=o;if(!h){const e=l.match(/(.+)\.(.+)/);if(!e)return;h=e[1],l=e[2]}const m=n[r];g(e,m,p)&&t.push({async:!!i[h],timelineName:h,coreName:l,idSuffix:"",from:m,to:p})}));for(const e of c)delete n[e]}function p(e,t){if(!t[e])return t[e]={pid:t.nextPID.pid++},!0}function h(e){return Math.round(1e3*e)}function g(e,t,n){return!e.uploadTrace||!e.maxTime||(!t||t<=e.maxTime)&&(!n||n<=e.maxTime)}var m=n(21050),f=n(33379),v=n(79278),y=n(30876),S=n(14675),C=n(59902),b=n(59815),w=n(61502);function T(e,t,n,i,o){(0,r.g7)(e,t),(0,v.n1)(),function(e,t,n,i,r){(0,b.TG)(e,n,t,i,r),(0,w.ny)((0,m.oA)("fetch","fetch",!0)),(0,C.DY)((0,m.oA)("custom-em","custom-em",!0))}(o,i,n,(()=>(0,r.FH)(!0)),(()=>(0,r.FH)(!1))),(0,r.dj)().traceLevel>=y.Y.high&&(k("RAF",requestAnimationFrame),k("RAFTimer",S.c)),(0,f.N)()&&(window._getAppPerfTrace=a)}function k(e,t){const n=(0,m.oA)(e,e);n&&function e(){const{endMeasure:i}=n.startMeasure("frame");t((()=>{i(),e()}))}()}},58281:function(e,t,n){"use strict";n.d(t,{K:function(){return i},p:function(){return r}});class i{constructor(){this.counts={}}qualifyKey(e){e||(e="NA");return e+this.qualifySuffix(e)}qualifySuffix(e){return r(this.addCount(e)-1)}reset(){this.counts={}}addCount(e){return this.counts[e]=(this.counts[e]||0)+1}}function r(e){return e<=0?"":"-"+(e+1)}},23163:function(e,t,n){"use strict";n.d(t,{Am:function(){return g},F$:function(){return h},H7:function(){return a},Oq:function(){return s},bg:function(){return o},dw:function(){return d},iA:function(){return l},zV:function(){return c}});var i=n(33379);const r=["vendors","microsoft","common","experience"];function o(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource").filter((e=>"script"===e.initiatorType));for(const n of r){const i=t.find((e=>e.name.indexOf(n)>=0));i&&u(e,i,n+"JS")}}}function a(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource").filter((e=>"script"===e.initiatorType));for(const n of r){const i=t.find((e=>e.name.indexOf(n)>=0));i&&p(e,i,n+"JS")}}}function s(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t&&t.length){const n=t[0];n&&u(e,n,"html")}}}function c(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource");if(t&&t.length){const n=t.find((e=>e.name.indexOf("/Feed/me")>=0));n&&u(e,n,"feed")}}}function d(e){if(!(0,i.N)()||!e)return;const t=navigator;if(t.connection){const n=t.connection;"rtt"in n&&(e.rtt=n.rtt),"downlink"in n&&(e.downlink=n.downlink)}"hardwareConcurrency"in navigator&&(e.hardwareConcurrency=navigator.hardwareConcurrency)}function l(e){e&&(e.isIDBSupported=window.indexedDB?1:0,e.isSWSupported=window.navigator.serviceWorker?1:0,e.isWWPresent=window._isWebWorkerPresent?1:0)}function u(e,t,n){const i=h(t);null!=i&&(e[n+"Cached"]=i?1:0)}function p(e,t,n){const{responseEnd:i,responseStart:r}=t;e[n+"ResponseTime"]=Math.round(i-r),e[n+"ResponseStart"]=Math.round(r),e[n+"ResponseEnd"]=Math.round(i)}function h(e){return void 0!==e.transferSize?!(0!==e.transferSize&&300!==e.transferSize):void 0!==e.nextHopProtocol?!(""!==e.nextHopProtocol):void 0}function g(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t.length){const n=t[0],i="useragent_launch";"type"in n&&(e.isBrowserLaunch=n.type===i?1:0)}}}},22704:function(e,t,n){"use strict";n.d(t,{A1:function(){return l},O8:function(){return c},Ou:function(){return o},Th:function(){return u},UE:function(){return d},WP:function(){return s},Y9:function(){return a}});var i=n(33379),r=n(27003);function o(){return(0,i.N)()?window._pageTimings||(window._pageTimings={}):r.Gq.get("__diagnostics_pageTimings",(()=>({})))}function a(){return(0,i.N)()?window._secondaryPageTimings||(window._secondaryPageTimings={}):r.Gq.get("__diagnostics_secondaryPageTimings",(()=>({})))}function s(){return(0,i.N)()?window._webVitalsPageTimings||(window._webVitalsPageTimings={}):r.Gq.get("__diagnostics_webVitalsPageTimings",(()=>({})))}function c(e,t=!0){const n=o();if(!e||!n||t&&n.TTVR)return;const i=n[e]||(n[e]=0);n[e]=i+1}function d(){return(0,i.N)()?performance.now():performance.now()-o().ssrTimeOrigin}function l(){if((0,i.N)()&&navigator)return{memory:navigator.deviceMemory,cpu:navigator.hardwareConcurrency,networkSpeed:navigator.connection&&navigator.connection.effectiveType}}function u(){if(!(0,i.N)())return;const e=(performance.getEntriesByType("navigation")||[])[0],t={};for(const n in e){const i=e[n];t[n]="number"==typeof i?Math.round(i):i}return t}},89696:function(e,t,n){"use strict";n.d(t,{FF:function(){return a},hf:function(){return s},v0:function(){return c}});var i=n(22704),r=n(19388),o=n(62676);function a(e,t){const n=performance.now(),i=t&&t.firstTimeOnly;t&&t.logStart&&s(`${e}-start`,n,i);const r=t&&t.perfTimeline,o=r&&r.startMeasure(e).endMeasure;return function(){const r=performance.now();t&&t.logEnd&&s(`${e}-end`,r,i),t&&!t.logDuration||s(e,r-n,i),o&&o()}}function s(e,t=performance.now(),n){const r=(0,i.Ou)();return n&&void 0!==r[e]?r[e]:(r[e]=Math.round(10*t)/10,t)}function c(e,t=performance.now()){const n=e&&(0,r.TZ)(o.DB)||0;return t+(n>0?-n:0)}},14752:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var i=n(33940),r=n(33954);const o="-start";class a{constructor(){this.endMarkSuffix="-end","undefined"!=typeof window&&this.initialize(window.performance)}static getInstance(){return a.instance||(a.instance=new a),a.instance}initialize(e){this.performance=e}startMark(e){this.singleMark(e+o)}endMark(e){this.singleMark(e+this.endMarkSuffix),this.measureStartEnd(e)}singleMark(e){const t=this.performance;t&&t.mark&&t.mark(e)}clearMark(e){const t=this.performance;t&&t.clearMarks&&t.clearMarks(e)}clearMeasures(e){const t=this.performance;t&&t.clearMeasures&&t.clearMeasures(e)}measurePromise(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){this.startMark(e);const n=yield t();return this.endMark(e),n}))}measurePerfMarker(e){if(!this.performance)return;const t={},n=this.performance.getEntriesByType("mark");if(!n)return t;for(let i=0;i<n.length;i++){let r=n[i].name;if(!r||null==n[i].startTime)continue;if(r=r.replace(/-(end|start)$/i,""),!r.startsWith(e))continue;const o=t[r]||new c(r);o.processPerfEntry(n[i]),o.isValid&&(t[r]=o)}return t}measureStartEnd(e){const t=this.performance;if(t&&t.measure)try{t.measure(e,e+o,e+this.endMarkSuffix)}catch(t){r.k.logError(`Error while attempting to measure start/end of '${e}'. Error: ${t}`)}}}const s=a.getInstance();class c{constructor(e){this.duration=0,this.markerName=e}get isValid(){return null!=this.startTime}processPerfEntry(e){e.name.endsWith(o)?(this.firstStartTime||(this.firstStartTime=e.startTime),this.startTime=e.startTime):null!=this.startTime&&(this.duration+=e.startTime-this.startTime,this.startTime=null)}}},62676:function(e,t,n){"use strict";n.d(t,{Ak:function(){return c},DB:function(){return d},Fz:function(){return f},Hm:function(){return m},IP:function(){return h},MV:function(){return o},O6:function(){return l},OM:function(){return u},P9:function(){return C},T8:function(){return i},U4:function(){return r},V4:function(){return b},Wk:function(){return S},fR:function(){return g},iL:function(){return v},kc:function(){return s},pJ:function(){return p},qh:function(){return a},w:function(){return y},zJ:function(){return w}});const i="E2E",r="TTPV",o="TTVR",a="TTVS",s="htmlCached",c="feedCached",d="pageRevealStart",l="pageRevealComplete",u="getTabTimingsTime",p="protocolLaunchStart",h="FromProtocolLaunchStart",g="userAgentStart",m="FromUserAgentStart",f="PCSToJSStart",v="JSStartToOnLoad",y="TTJSStart",S="timeToOnLoad",C="timeToFirstByte",b="prerender",w="FCP_Old"},19388:function(e,t,n){"use strict";n.d(t,{BW:function(){return j},EV:function(){return Z},Gb:function(){return W},IJ:function(){return Q},IO:function(){return Y},Nv:function(){return ie},O0:function(){return ve},OB:function(){return ae},OZ:function(){return ye},O_:function(){return K},Sc:function(){return ue},TZ:function(){return fe},Xl:function(){return ee},YJ:function(){return ne},a8:function(){return L},aR:function(){return be},b1:function(){return oe},bO:function(){return de},bP:function(){return se},cd:function(){return q},e3:function(){return re},gh:function(){return ce},hy:function(){return we},l6:function(){return Se},mb:function(){return V},nz:function(){return F},oN:function(){return i},o_:function(){return G},su:function(){return J},sx:function(){return Te},tW:function(){return te},v9:function(){return Ce}});var i,r=n(62676),o=n(33379),a=n(59902),s=n(22704),c=n(85663),d=n(14752),l=n(14675);let u,p,h,g,m,f,v;!function(e){e.Primary="primary",e.Secondary="secondary"}(i||(i={}));const y=new Map,S=new Map,C=new Map;let b,w,T,k,P,A,I,E=new Map,x=new Map,M=[];const O="TTF.",L="TTVR.",D="TTVS.",R="TTPR.",F="TTSR.";let B="",N=!1,U=!1,$="";const _={};let H;function W(){return _}function j(e="",t=!1,n){if((0,o.N)())return n=n||performance.now(),X(O,e,t,n)}function G(e="",t=!1,n){if((0,o.N)())return n=n||performance.now(),X(L,e,t,n),z(e),n}function V(e){M.push(e)}function q(e){M=M.filter((t=>t!==e))}function z(e){if(M.length)try{M.map((t=>t(e)))}catch(e){}}function Q(e="",t=!1,n){(0,l.c)((()=>G(e,t,n)))}function Z(e=""){const t=fe(r.DB),n=-1===t?-1:performance.now()-t;X(R,e,!1,n)}function K(e,t,n){J(e,n-t)&&(0,a.QP)({name:e,startTime:t,endTime:n})}function J(e,t){if(x.get(e))return!1;const n=performance.getEntriesByName&&performance.getEntriesByName(e);let i;return Boolean(n&&n.length)?x.has(e)||(x.set(e,Math.round(n[0].startTime)),i=!0):(d.A.singleMark(e),x.set(e,(0,c.isNullOrUndefined)(t)?-1:Math.round(t)),i=!0),p&&p.delete(e)&&0===p.size&&A&&A(ce()),i}function X(e,t,n,i){if(!t||!t.length)return;if(!e||!e.length)return;const o=e+t;if(o.startsWith(L)&&(!m||!m.has(o))&&f&&f.has(o))return void J(o,n?-1:i);if(C.has(o)&&C.get(o)(o),E.get(o))return;const a=performance.getEntriesByName&&performance.getEntriesByName(o);Boolean(a&&a.length)?E.set(o,Math.round(a[0].startTime)):(d.A.singleMark(o),n?E.set(o,-1):E.set(o,Math.round(i))),o.startsWith(L)&&(_.marker=o,_.value=E.get(o)),h&&h.delete(o)&&0===h.size&&w&&w(he()),u&&u.delete(o)&&0===u.size&&k&&k(ae()),e===D&&I&&I(ge(D,r.qh))}function Y(e){u=le(e),h=le(e,"TTVR"),g=le(e,"TTPR"),m=new Set(me(e,"TTVR")),w&&0===h.size&&k(he()),k&&0===u.size&&k(ae()),N=!0}function ee(e){p||(p=new Set,f=new Set,e.forEach((e=>{x.get(e)||p.add(e),e.startsWith(L)&&f.add(e)})),0===p.size&&A&&A(ce()))}function te(e){v||(v=e)}function ne(e){e&&N&&u&&h&&(e.startsWith(L)||(e=L+e),u.add(e),h.add(e),m.add(e))}function ie(){return(0,o.N)()?function(){if(!(0,o.N)())return null;if(T)return T;if(u&&0===u.size)return Promise.resolve(ae());return T=new Promise((e=>{k=e})),T}():null}function re(){return(0,o.N)()?P||(p&&0!==p.size?(P=new Promise((e=>{A=e})),P):Promise.resolve(ce())):null}function oe(){return(0,o.N)()?b||(h&&0===h.size?Promise.resolve(he()):(b=new Promise((e=>{w=e})),b)):Promise.resolve([])}function ae(){return[...he(),...pe()]}function se(){return[...he(!1),...pe()]}function ce(){return[...x]}function de(e){return e===i.Primary?Array.from(u||[]):Array.from(p||[])}function le(e,t){const n=new Set;for(const i of me(e,t))E.get(i)||n.add(i);return n}function ue(e){return E.get(R+e)}function pe(){return ge(O)}function he(e=!0){return e&&!1!==H?ge(L,r.MV,!0):ge(L)}function ge(e,t,n){const i=[];let o=0;if(E.forEach(((t,n)=>{if(n.startsWith(e)){i.push([n,t]);const e=n.startsWith("TTVR");t>o&&(!e||m.has(n))&&(o=t,e&&(B=n));const r=y.get(n);(null==r?void 0:r.name)&&(S.get(r.name)<t&&S.set(r.name,t),r.preserve||i.pop())}})),S.forEach(((t,n)=>{n.startsWith(e)&&i.push([n,t])})),t&&i.push([t,o]),n&&t===r.MV){const e=(0,s.Ou)().refreshDelay||0;i.push(["TTVR.WithRefreshDelay",o+e])}return i}function me(e,t){let n=[],i=[],r=[];return!e||!e.TTVR||t&&"TTVR"!==t||(n=e.TTVR.map((e=>L+e))),!e||!e.TTF||t&&"TTF"!==t||(r=e.TTF.map((e=>O+e))),e&&e.TTPR&&"TTPR"===t&&(i=e.TTPR.map((e=>R+e))),[...n,...r,...i]}function fe(e){const t=performance.getEntriesByName(e);return t&&t[0]&&t[0].startTime?t[0].startTime:-1}function ve(e){const t=x.get(e);return null!=t?t:-1}function ye(){return v}function Se(e="",t=!1,n){let i=e;i.startsWith(L)||(i=L+e),N&&(m.has(i)||U)&&""!==e?G(e,t,n):z(e)}function Ce(e="",t=!1,n){let i=e;i.startsWith(L)||(i=L+e),N&&(m.has(i)||U)&&""!==e?Q(e,t,n):z(e)}function be(e="",t="",n=!1,i){let r=e,o=t;N&&""!==e&&""!==t&&(U||t!==$)&&(r.startsWith(L)||(r=L+e),o.startsWith(L)||(o=L+t),u.has(r)||E.has(r)||m.has(r)||(ne(r),y.set(r,{name:o,preserve:n}),S.set(o,-1),i&&C.set(r,i)))}function we(e=!1,t=""){U=e,$=t}function Te(){return B}},21050:function(e,t,n){"use strict";function i(e,t,n,i=!1,r=!1,o){return new e(t,n,i,r,o)}n.d(t,{S4:function(){return o},fW:function(){return s},oA:function(){return a},uk:function(){return i}});let r=null;function o(e){r=e}const a=(e,t,n)=>r?r(e,t,n):null;function s(e,t,n){return n?n.instrumentPromise(t,e):e()}},58796:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});let i={}},14675:function(e,t,n){"use strict";n.d(t,{c:function(){return o},u:function(){return a}});var i=n(33940),r=n(33379);function o(e){(0,r.N)()&&requestAnimationFrame((()=>setTimeout((()=>e()),0)))}function a(){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise((e=>o(e)))}))}},79278:function(e,t,n){"use strict";n.d(t,{Dd:function(){return h},d0:function(){return g},n1:function(){return p}});var i=n(21050),r=n(14675),o=n(30876),a=n(33379),s=n(54533),c=n(22704),d=n(8114);const l={},u=new WeakMap;function p(){if(!(0,a.N)())return;const{enablePerfTimeline:e,traceLevel:t}=(0,s.dj)();if(!e||"undefined"==typeof customElements||t<o.Y.high)return;const n=customElements.define;customElements.define=function(...e){const[t,i]=e,r=i.prototype.connectedCallback;return"function"!=typeof r||"getExperienceType"in i.prototype||(i.prototype.connectedCallback=function(...e){const t=h(this.localName,this.instanceId),n=t&&t.startMeasure("init").endMeasure,i=r.apply(this,e);return n&&n(),g(this,t),(0,c.O8)("WC.Count"),i}),n.apply(customElements,e)}}function h(e,t){const n=1===(l[e]=(l[e]||0)+1)?t:(0,d.Z)(t);return(0,i.oA)(e,n)}function g(e,t,n=r.u){if(!e||!e.shadowRoot||!t)return;const i=new m("update",t);i.tryStartMeasure(),n().then((()=>i.tryEndMeasure()));const{traceLevel:o}=(0,s.dj)();o&&function(e,t,n){let i=u.get(e);if(i)return;let r=0;i=new MutationObserver((e=>{t.tryStartMeasure();const i=e.reduce(((e,t)=>(t.addedNodes.forEach((t=>e.added.push(t.nodeName))),t.removedNodes.forEach((t=>e.removed.push(t.nodeName))),t.attributeName&&e.attrs.push(t.attributeName),e)),{added:[],removed:[],attrs:[]}),o={added:i.added.length?i.added.join(","):void 0,removed:i.removed.length?i.removed.join(","):void 0,attrs:i.attrs.length?i.attrs.join(","):void 0};t.addCustomData("mutation"+ ++r,o),n().then((()=>t.tryEndMeasure()))})),i.observe(e.shadowRoot,{childList:!0,subtree:!0,attributes:!0}),i.observe(e,{attributes:!0}),u.set(e,i)}(e,i,n||v)}class m{constructor(e,t){this.measureName=e,this.perfTimeline=t,this.customData={}}tryStartMeasure(){if(!this.coreEndMeasure){const e=this.perfTimeline.startMeasure(this.measureName).endMeasure;this.coreEndMeasure=()=>e({customData:this.customData})}}addCustomData(e,t){this.customData[e]=t}tryEndMeasure(){this.coreEndMeasure&&(this.coreEndMeasure(),this.customData={},this.coreEndMeasure=null)}}let f;function v(){return f||(f=new Promise((e=>(0,r.c)((()=>{f=null,e()})))))}},13999:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var i=n(59902),r=n(22704),o=n(49972);function a(){const e=performance.now();return{end:t=>{const n=performance.now(),a="ClientInit";try{if(!t){(0,r.Ou)().ClientInit=Math.round(n-e)}(0,i.QP)({name:a,startTime:e,endTime:n,customSuffix:t?"error":void 0})}catch(e){console.error("ClientInit span error: "+(0,o.n)(e))}}}}},59902:function(e,t,n){"use strict";n.d(t,{DY:function(){return s},Ep:function(){return u},QP:function(){return c},ee:function(){return d},el:function(){return h},m8:function(){return p},zI:function(){return l}});var i=n(52575);let r,o,a;function s(e){o=a=[],r=e}function c(e){r&&r.startMeasure(e.name,void 0,{entityMeasure:!0,startTime:g(e.startTime,-1)}).endMeasure({endTime:g(e.endTime,-1)})}function d(e){return r?(0,i.fJ)(r.getMeasureValues({entityMeasures:!0}),e,"from",!1):[]}function l(e){let t;o&&null!=(t=m(e.duration))&&o.push({time:performance.now(),name:e.name,duration:t})}function u(e){let t;a&&null!=(t=m(e.time))&&a.push({name:e.name,time:t})}function p(e){return o?(0,i.fJ)(o,e,"time",!0):[]}function h(e){return a?(0,i.fJ)(a,e,"time",!1):[]}function g(e,t){return null!=e?e:t}function m(e){if("number"==typeof e&&e>=0)return e}},62325:function(e,t,n){"use strict";n.d(t,{j:function(){return c},o:function(){return s}});var i=n(82890),r=n(59902),o=n(22704),a=n(62676);function s(e){const t=(0,o.Ou)();for(const[n,i]of e)for(const e of i){const i=t[e];if(null!=i){t[n]=i;break}}}function c(){const e=`${a.MV}.${i.p.basicFeed}`;s([[e,["TTVR.River","TTVR.GridViewFeed","TTVR.StripeFeed"]]]);const t=(e,t,i)=>{const o=i&&t?i-t:-1;n[e]=o,(0,r.QP)({name:e,startTime:t,endTime:i})},n=(0,o.Ou)(),c=n[e],d=n[`${a.MV}.${i.p.searchBox}`],l=n[`${a.MV}.${i.p.sdCards}`],u=n[i.p.wpoResponseBack];t(i.p.searchBoxToFeed,d,c),t(i.p.feedSDRender,c,l),t(i.p.feedBasicRender,u,c)}},59815:function(e,t,n){"use strict";n.d(t,{TG:function(){return ae},Yt:function(){return ce},HK:function(){return se}});var i=n(52575),r=n(65135),o=n(10273),a=n(98304);const s=Object.freeze({experience:"e",page:"p",other:"o",script:"js",service:"s",container:"c",custom:"x"});var c;!function(e){e[e.keepPrevious=1]="keepPrevious",e[e.keepThis=2]="keepThis",e[e.keepAll=3]="keepAll"}(c||(c={}));var d=n(61502),l=n(59902),u=n(62676),p=n(58281),h=n(12884),g=n(22704),m=n(23163),f=n(33954);const v=new Map([["min",e=>e.length?e.reduce(((e,t)=>Math.min(e,t)),1/0):void 0],["max",e=>e.length?e.reduce(((e,t)=>Math.max(e,t)),-1/0):void 0],["first",e=>{for(const t of e)if(null!=t)return t}]]),y={clientrtt:"tcp",origin:"origin",cdntime:"self"},S=/\/\/([^/]+)\/([^?&#]+)/,C=/^assets\.msn\.(com|cn)/i,b=/^(ent-)?api\.msn\.(com|cn)/i,w="[cdn]/",T="[self]/",k="[self]/[root]",P="[1s-cdn]/";let A;function I(e,t,n,r){const o=performance.now(),a=function(e){const t=new Map,n=e=>function(e,t){const{name:n}=t;let i=e.get(n);i||e.set(n,i=[]);i.push(t)}(t,e);performance.getEntriesByType("navigation").forEach((e=>{n(function(e,t){return Object.assign({name:e.name,startTime:e.startTime,requestStart:e.requestStart,responseEnd:e.responseEnd,transferSize:e.transferSize,duration:e.duration,serverTiming:e.serverTiming,initiatorType:e.initiatorType,nextHopProtocol:e.nextHopProtocol},t)}(e,{name:k}))}));return(0,i.fJ)(performance.getEntriesByType("resource"),e,"startTime",true).forEach(n),t}(r),c={networkCounter:new p.K,networkMap:a,filterContext:r},h=function(e,t){const n={name:"experiences",data:{type:s.container}};return e&&e.forEach((e=>{const i=function(e,t){const{filterContext:n,networkMap:i}=t,r=H(e,["min",[["first","scripts","from"],["first","config","from"]]]),o=r?H(e,["max",[["first","scripts","to"],["first","config","to"]]]):void 0,a=r&&o?F(r,o,void 0,n):void 0;let c=W(e,["first","render","to"]);j(c)||(c=W(e,["first","update","to"]),c&&f.k.log(`${e.timelineName} is missing 'render' mark`));const l=c&&H(e,["min",[["first","render","from"],["first","update","from"]]]),u=l?F(l,c,void 0,n):void 0;if(!a&&!u)return;const p={name:e.timelineName,data:{type:s.experience}};R(p,"init",a),R(p,"render",u),a&&u&&R(p,"_self",F(r,c,void 0,n));e.getMeasureValues({coreName:d.JS}).forEach((e=>{const n=e.customData,r=function(e,t,n){const i=e&&t.get(e);if(!i)return;const r=L(i,(e=>Math.abs(e.startTime-n.from)));if(r>=0){const n=i.splice(r,1)[0];return i.length||t.delete(e),n}}(n&&n.url,i,e);M(x(e)||d.JS,s.service,p,r,e,t)}));const h=e.getMeasureValues({entityMeasures:!0});if(h.length){const e=D(p,{name:"custom",data:{type:s.custom}});h.forEach((t=>{O(e,t,n)}))}return p}(e,t);i&&D(n,i)})),n}(t,c),m=function(e){const t={name:"scripts",data:{type:s.container}},n={name:"services",data:{type:s.container}},i={name:"other",data:{type:s.container}},{networkMap:r}=e;return r.forEach((o=>{o.forEach((o=>{const{initiatorType:a,name:c}=o;if("img"===a)return;let l,u,p,h;const g=E(c);if(g&&g.endsWith(".js")){u=g.replace(/(\.[0-9a-f]{20})?\.js$/,"").replace(/bundles\/v1\/\w+\/[\w.]+\//,""),l=t,p=s.script}else if("css"===a||"iframe"===a||"other"===a||"beacon"===a)l=i,p=s.other;else{l=n,p=s.service;const e=d.ms&&d.ms.getMeasureValues({coreName:c});if(e&&e.length){const{startTime:t}=o;h=e[L(e,(({from:e})=>Math.abs(e-t)))],u=x(h)}}let m=u||g;m&&(m=m.toLowerCase(),M(m,p,l,o,h,e),r.delete(c))}))})),[t,n,i]}(c),v=function(e){const t={name:"custom",data:{type:s.custom}};if((0,l.ee)(e).forEach((n=>O(t,n,e))),(0,l.m8)(e).forEach((({name:e,duration:n})=>function(e,t,n){B(e,t,n)}(t,e,n))),(0,l.el)(e).forEach((({name:n,time:i})=>N(t,n,i,e))),e===i.d9){const n=(0,g.Ou)();N(t,u.P9,n[u.P9],e),N(t,u.MV,n[u.MV],e),1===n[u.V4]&&U(t,u.V4,n[u.V4])}else N(t,u.MV,e.timeFilter.end,e);return t}(r),y={name:"",data:{type:s.container}};R(y,"calc",F(o,performance.now(),void 0,i.d9));const S=Object.assign({metrics:y.data},e||{}),C={_meta:S};let b=!1;if([v,h,...m].forEach((e=>{const{data:t}=e;(t.children||t.spans||t.durations||t.scalars||t.instants)&&(C[e.name]=t,b=!0)})),b)return n&&n.length&&(S.pivots=n.map((e=>e.key)),S.pivots64=n.map((e=>e.key64))),C}function E(e){if(e){const t=e.match(S);if(t){let[,e,n]=t;return n=n.toLowerCase(),e.match(C)?n=(n.startsWith("service")?P:w)+n:e.match(b)?n="[1s]/"+n:e===A&&(n=T+n),n}return e.toLowerCase()}}function x(e){const t=e&&e.customData;if(t){const{requestName:e,url:n,mappedUrl:i}=t;return e||E(i||n)}}function M(e,t,n,i,r,o){const{networkCounter:a,filterContext:s}=o,c=a.qualifyKey(e),d={name:c,data:{type:t}},l=function(e,t){if(!t)return;const{startTime:n,requestStart:i,responseEnd:r,transferSize:o,duration:a,serverTiming:s}=t,c=!!i,d={name:e,hasFullTimings:c,networkDur:a,networkStart:n};if(c){d.connectDur=i-n,d.requestDur=r-i;const e=(0,m.F$)(t);null!=e&&(d.cached=e?1:0,e||(d.transferSize=o))}if(!d.cached&&(e.startsWith(w)||e.startsWith(P))&&s&&s.length){const e=d.cdn={};s.forEach((({name:t,duration:n})=>{const i=y[t];i&&(e[i]=n)}))}return d}(c,i);if(l){const{cdn:e,networkStart:t,networkDur:n}=l;R(d,"network",F(t,void 0,n,s))&&(l.hasFullTimings&&(B(d,"connect",l.connectDur),B(d,"request",l.requestDur),U(d,"size",l.transferSize),U(d,"cache",l.cached)),e&&(B(d,"cdnTCP",e.tcp),B(d,"cdnSelf",e.self),B(d,"cdnOrigin",e.origin)))}if(r&&R(d,"app",F(r.from,r.to,void 0,s))){const e=r.customData,{perfCritical:t,error:n}=e||{};t&&U(d,"critical",1),n&&U(d,"error",1)}d.data.spans&&D(n,d)}function O(e,t,n){const i=F(t.from,t.to,void 0,n);if(i){R(e,t.coreName+t.idSuffix,i)}}function L(e,t){const n=e&&e.length||0;if(n<=1)return n-1;let i=1/0,r=0;return e.length>1&&e.forEach(((e,n)=>{const o=t(e);o<i&&(i=o,r=n)})),r}function D(e,t){return _(e,"children",t.name,t.data),t}function R(e,t,n){return n?_(e,"spans",t,n):void 0}function F(e,t,n,{spanMapperFn:i}){return i(e,t,n)}function B(e,t,n){return $(e,t,n,"durations")}function N(e,t,n,{timeFilterFn:i,timeMapperFn:r}){if(i(n))return $(e,t,r(n),"instants")}function U(e,t,n){return $(e,t,n,"scalars")}function $(e,t,n,r){if(j(n)){return _(e,r,t,(0,i.NM)(n))}}function _(e,t,n,i){return(e.data[t]||(e.data[t]={}))[n]=i,i}function H(e,t){const[n,i]=t,r=[];for(const t of i){const n=W(e,t);null!=n&&r.push(n)}const o=v.get(n),a=o&&o(r);return j(a)?a:void 0}function W(e,t){const[n,i,r]=t,o=e.getMeasureValues({coreName:i});if(o&&o.length){const t=v.get(n);if(t){const n=function(e,t,n){return e.getMeasureValues({coreName:t}).map((e=>e[n])).filter((e=>null!=e))}(e,i,r),o=t(n);if(j(o))return o}}}function j(e){return null!=e&&!isNaN(e)}A=(0,h.zw)();var G=n(33379),V=n(13672),q=n(68364),z=n(73898),Q=n(58796),Z=n(71130);let K,J,X,Y,ee,te;const ne=()=>{},ie=new Map,re=new Map,oe=new Map;function ae(e,t,n,i,r){if(ie.clear(),re.clear(),oe.clear(),J=K=void 0,te=ee=void 0,Y=i||z.Z,X=r||z.Z,!((0,G.N)()&&i&&r&&t))return;const{bundleInfo:a,pcsInfo:s}=t.ClientSettings||{};te={buildAlias:a&&a.alias,env:s&&s.env};const{pivotsFinalized:c}=(0,o.MB)(e,t,n),d=!e&&(0,Z.g)(),l=e&&(0,o._P)();ee=!0,l&&c.then((()=>{(0,o._P)()||de()})),(d||l)&&(J=!0,K=le({props:{},dedupeBehavior:2,startTime:0,getMatches:()=>l?(0,o.aM)():[]}))}function se(e,t,n){if(ee)return n=n||(0,o.aM)(),I(te,e,n,t)}function ce(e){if(de()&&e){pe(e,Object.values(Q.U),(0,i.At)())}}function de(){if(K)return K(!0),J=K=void 0,!0}function le(e){0===ie.size&&(!J&&performance.clearResourceTimings(),Y());const{props:t,dedupeBehavior:n,groupId:o,traceId:s}=e,c=(0,V.s)(t)+`|${s||""}|${o||""}`,d=ie.get(c);if(d&&d.size)if(n&&2!==n){if(1===n)return ne}else{const e=o&&oe.get(o);e&&e.size&&d.forEach((t=>e.delete(t)));const t=s&&re.get(s);t&&t.size&&d.forEach((e=>t.delete(e))),d.clear()}let l;return l=t=>{const n=ie.get(c);if(n&&n.delete(l)){const d=s&&re.get(s);d&&d.delete(l);const u=o&&oe.get(o);u&&(t?u.delete(l):(u.forEach((e=>e!==l&&e(!0))),u.clear())),n.size||!ie.delete(c)||ie.size||X(),t||function(e){const t=(0,i.At)({start:e.startTime,end:performance.now()}),{spanFilterFn:n}=t,o=Object.values(Q.U).filter((e=>{const{timeSpan:t}=e;return t&&n(t[0],void 0,t[1])})),s={},c=e.getMatches();if(!pe(s,o,t,c))return;try{r.M0.sendLoadTimeEvent({markers:s})}catch(e){(0,q.H)(a.GrI,"Failed to upload entity-metrics for manual trace",`Matches: ${c.map((e=>e.key)).join("|")}`)}}(e)}},ue(ie,c,l),ue(re,s,l),ue(oe,o,l),setTimeout((()=>l(!0)),e.stopTimeout||6e4),l}function ue(e,t,n){if(t){let i=e.get(t);!i&&e.set(t,i=new Set),void 0!==n&&i.add(n)}}function pe(e,t,n,i){if(ee&&e){const r=se(t,n,i);if(r)return e.entityMetrics=r,!0}}},10273:function(e,t,n){"use strict";n.d(t,{aM:function(){return P},_P:function(){return k},MB:function(){return T},nm:function(){return I},Pj:function(){return E}});var i=n(76323),r=n(83130),o=n(33379),a=n(23163);const s=/^winp(\d)/i;function c(e){if(!(0,o.N)())return;const{referrer:t}=document;if(t){if(t===location.href)return"self";const e=function(e){try{return new URL(e)}catch(e){return}}(t);if(e){const{host:t,pathname:n}=e,{host:i,pathname:r}=window.location;let o,a;if(a=t.match(/^([a-z]+)\.msn\.(com|cn)$/)){const[,e]=a;if("ntp"===e)return"edge-hp";if("www"===e){let e;if(!n||"/"===n)return"msn-hp";if(e=n.match(/^\/[a-z]{2}-[a-z]{2}(\/feed)?\/?$/i))return e[1]?"win-hp":"msn-hp";if(n.match(/\/(ar|ss|vi)-[A-Za-z0-9]+$/))return"msn-views"}return t===i&&d(n)===d(r)?"same-seg1-seg2":"msn-other"}if(o=t.match(/\.(bing|google|yahoo)\.com$/))return"search-engine"}}else{const{ocid:t}=e;let n;if(t&&(n=t.match(s)))return`prong-${n[1]}`}return"unknown"}function d(e){const t=e&&e.match(/^\/([^/]+(\/[^/]+)?)?/);return t&&t[0]}var l=n(13672),u=n(98304),p=n(22704),h=n(68364),g=n(71130);const m=new Map,f=new Map,v=new Map,y=new Set,S=null;let C,b,w=new Promise((e=>b=e));function T(e,t,n){const{pivots:d,manualPivots:l}=e||{},u={pivotsFinalized:w};if(!((0,o.N)()&&e&&(d&&d.length||l&&l.length)&&t&&n))return u;const h=(0,p.A1)()||{},m=function(e){if(e){const{cpu:t}=e;if(t>=1&&t<=4)return"1-4";if(t>=6&&t<=8)return"6-8";if(t>=10)return"10+"}}(h),f=(0,i.p)((()=>c(n))),v=(0,i.p)((()=>function(e){const{ocid:t}=e;return t&&("windirect"===t||t.match(s))?"winfeed":"default"}(n))),y=(0,i.p)((()=>function(){let e,t=0,n=0;const i=/\/(vendors|microsoft|experience|common)\./,r=performance.getEntriesByType("resource");for(const o of r)if("script"===o.initiatorType&&(e=o.name.match(i))&&((0,a.F$)(o)?t++:n++,t+n>=4))break;return 4===t?"warm":4===n?"cold":n+t===4?"partial":void 0}()));R("audienceMode",(e=>(0,r.Uc)({audienceMode:e},n))),R("browser",(e=>(0,r.K4)({browser:e},n))),R("deviceFormFactor",(e=>(0,r.Ev)({deviceFormFactor:e},n))),R("displayLocale",(e=>(0,r.fb)({locale:e},n,!0))),R("domain",(e=>(0,r.hI)({domain:e},n))),R("experimentId",(e=>(0,r.W9)({experimentId:e},n))),R("locale",(e=>(0,r.fb)({locale:e},n,!1))),R("ocid",(e=>(0,r.K3)({ocid:e},n))),R("os",(e=>(0,r.zu)({os:e},n))),R("platform",(e=>(0,r.jF)({platform:e},n))),R("referrer",(e=>e===f())),R("ocidGroup",(e=>e===v())),R("network",(e=>e===h.networkSpeed)),R("cpu",(e=>e===h.cpu)),R("cpuGroup",(e=>e===m)),R("memory",(e=>e===h.memory)),R("coreJSCache",(e=>e===y()));const{pcsInfo:b,bundleInfo:T}=t.ClientSettings;return R("env",(e=>(0,r.Sh)(e,b&&b.env))),R("buildAlias",(e=>(0,r.Sh)(e,T&&T.alias))),D("pageType",((e,t)=>(0,r.oM)({pageType:t},{pageType:e}))),D("pageProduct",r.Sh),D("pageName",r.Sh),E("preRender",!!t.IsPrerender),C=function(e){const t=[],n=[],{pivots:i,manualPivots:r,_sampleRate:o}=e,a=(e,t)=>{e&&e.forEach((e=>{e&&(0,g.g)(e._sampleRate||o)&&t(e)}))},s=e=>{for(const{key:t,matcher:n}of O(e))n||F(t)};return a(i,(e=>{s(e);const n={config:e},i=A(n);(i||i===S)&&t.push(n)})),a(r,(e=>{s(e),n.push(e)})),{defaultPivots:t,manualPivotConfigs:n}}(e),M(),u}function k(){return!(!C||!C.defaultPivots.some((e=>e.success||e.success===S)))}function P(){if(!C)return[];const e=[];for(const t of C.defaultPivots)A(t)&&e.push(L(t.config));return y.size&&(0,h.H)(u.WXX,"Missing pivot field values",[...y].toString()),e}function A(e){let{success:t}=e;if(null!=t)return t;t=!0;for(const{key:n,value:i,matcher:r}of O(e.config)){const e=r&&r.matchFn(i);if(e===S)t=S,y.add(n);else if(!e){t=!1;break}}return e.success=t}function I(e,t){v.set(e,t),x(e)}function E(e,t){null!=t&&(f.set(e,t),x(e))}function x(e){C&&y.delete(e)&&M()}function M(){if(C&&y.size<=0){for(const e of C.defaultPivots)A(e);b()}}function*O(e){for(const t in e)if((0,l.L)(t)){const n=m.get(t);yield{key:t,value:e[t],matcher:n}}}function L(e){const t=(0,l.s)(e);return{key:t,key64:btoa(t)}}function D(e,t){R(e,(n=>{const i=v.get(e);return i==S?S:t(i,n)}))}function R(e,t){B(e,(()=>t))}function F(e){B(e,(()=>function(e){return t=>{const n=f.get(e);return n==S?S:n===t}}(e)))}function B(e,t){m.get(e)||m.set(e,{matchFn:t()})}},61502:function(e,t,n){"use strict";n.d(t,{JS:function(){return s},Ud:function(){return c},ms:function(){return o},ny:function(){return a}});var i=n(33940),r=n(33379);let o;function a(e){o=e}const s="service";function c(e={}){const{perfTimeline:t=o,fetchImpl:n}=e;return t?(e,r)=>(0,i.mG)(this,void 0,void 0,(function*(){const i=(e.url||e).toString(),a={url:i};if(r){a.requestName=r.requestName,a.perfCritical=r.perfCritical,delete r.requestName,delete r.perfCritical;const{urlMapper:e}=r;e&&(a.mappedUrl=e(i),delete r.urlMapper)}const c=t===o?i:s,l=t&&t.startMeasure(c).endMeasure;let u;try{const t=n||d(),i=yield t(e,r);return u=!i||!i.ok,i}catch(e){throw u=!0,e}finally{u&&(a.error=!0),l&&l({customData:a})}})):n||d()}function d(){return(0,r.N)()?window.fetch.bind(window):globalThis.fetch.bind(globalThis)}},71130:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(33379);let r;r=(0,i.N)()&&parseInt((location.href.match(/ems=([\d]+)/)||[null,"0"])[1])||5;const o=e=>Math.floor(101*Math.random())<=(e||r)},13672:function(e,t,n){"use strict";n.d(t,{L:function(){return o},s:function(){return r}});var i=n(33954);function r(e){const t=[];return e&&a(e,t),t.join(",")}function o(e){return e&&!e.startsWith("_")}function a(e,t,n=""){const r=Object.keys(e).filter(o).sort();for(const o of r){const r=e[o];if(null==r)continue;const s=`${n}${n?".":""}${o}`;if("object"==typeof r)a(r,t,s);else{if(!(t.length<100)){i.k.logError("getSortedObjectKeyValuesDeep: circular reference suspect");break}t.push(`${s}=${r.toString().toLowerCase()}`)}}}},52575:function(e,t,n){"use strict";n.d(t,{At:function(){return p},NM:function(){return h},d9:function(){return s},fJ:function(){return d}});var i=n(51727),r=n(37641);const o=(e,t)=>n=>n>=e&&n<=t,a={start:-1/0,end:1/0},s={timeFilter:a,spanFilterFn:()=>!0,spanMapperFn:(e,t,n)=>l(e,t,n),timeMapperFn:e=>e,timeFilterFn:()=>!0},c={timeFilter:{start:1/0,end:-1/0},spanFilterFn:()=>!1,spanMapperFn:()=>{},timeMapperFn:()=>{},timeFilterFn:()=>!1};function d(e,{timeFilter:t},n,s){if(e&&n&&t!==a){const{start:a,end:c}=t;if(s){const t=(0,i.Z)(e,{[n]:a},n),o=(0,r.Z)(e,{[n]:c},n);e=e.slice(t,o)}else{const t=o(a,c);e=e.filter((e=>t(e[n])))}}return e}function l(e,t,n,i){if(null!=e&&(null!=t&&(n=t-e),null!=n&&n>=0)){if(i&&null==(e=i(e)))return;return[h(e),h(n)]}}function u(e,t){return(n,i,r)=>{if(e(n,i,r))return l(n,i,r,t)}}function p(e){if(!e)return s;const{start:t,end:n}=e;if(null==t||null==n||t>n)return c;const i=o(t,n),r=e=>h(e-t),a=function(e){const{start:t,end:n}=e;return(e,i,r)=>{if(null==e)return!1;let o;if(null!=i)o=i;else{if(null==r)return!1;o=e+r}return!(o<e)&&e<=n&&o>=t}}(e);return{timeFilter:e,spanFilterFn:a,spanMapperFn:u(a,r),timeMapperFn:r,timeFilterFn:e=>i(e)}}const h=e=>e<5?Math.round(10*e)/10:Math.round(e)},28817:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var i=n(33940),r=n(98304),o=n(65135),a=n(33379);class s{constructor(e,t,n,i){this.chromiumApiRetryCount=5,this.isNtpPrivateApiAvailable=e=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[e],this.prefSettingKey=e,this.searchForKeyName=t,this.targetKeyName=n,this.defaultItem=i}getPreferenceSetting(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){try{const n=yield this.getPreferenceSettingValueArray(t),i=n.findIndex((t=>t[this.searchForKeyName]===e));return i>-1?n[i]:null}catch(t){const n=`Failed to find user preference key: ${e}`;return this.logAppError(r.Aps,n,t),null}}))}savePreferenceSetting(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){try{const n=(yield this.getPreferenceSettingValueArray())||[],i=n.findIndex((t=>t[this.searchForKeyName]===e));if(i>-1){const e=Object.assign(Object.assign({},n[i]),t);n[i]=e}else{const i=Object.assign(Object.assign({},this.defaultItem),t);i[this.searchForKeyName]=e,n.push(i)}return this.setAndSavePreferenceSetting(n)}catch(t){const n="Failed to store user preference setting";return this.logAppError(r.nS9,n,`Key:${e}.Error:${t}`),!1}}))}isApiAvailableToUse(){return new Promise((e=>{const t="Error in isApiAvailableToUse";try{this.isGoodToUseNtpSettingsPrivate("getAllPrefs")?void 0===this.isPrefSettingKeyAvailable?window.chrome.ntpSettingsPrivate.getAllPrefs((n=>{if(this.isPrefSettingKeyAvailable=n&&n.findIndex((e=>e.key===this.prefSettingKey))>-1,!this.isPrefSettingKeyAvailable){let e="";try{n&&n.forEach((t=>e+=`${t.key}+`))}catch(e){this.logAppError(r.Aps,"Error: Can not log keylist from preference setting",e)}this.logAppError(r.me0,t,`missing preference key: ${this.prefSettingKey}, available keys: ${e}`)}e(this.isPrefSettingKeyAvailable)})):e(this.isPrefSettingKeyAvailable):(this.logAppError(r.MFQ,t,"getAllPrefs not present"),e(!1))}catch(t){this.logAppError(r.MFQ,"Error: Unexpected throw in isApiAvailableToUse",t),e(!1)}}))}logAppError(e,t,n){null===o.M0||void 0===o.M0||o.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:n})}))}getPreferenceSettingValueArray(e){return(0,i.mG)(this,void 0,void 0,(function*(){try{if(this.settingValuesArray&&!e)return this.settingValuesArray;{const e=yield this.getPreferenceValueFromBrowser();return this.settingValuesArray=e||[],this.settingValuesArray}}catch(e){const t=`Failed to read ${this.prefSettingKey} preference setting`;return this.logAppError(r.k8J,t,e),[]}}))}setAndSavePreferenceSetting(e){if(!(0,a.N)())return!1;try{if(this.isGoodToUseNtpSettingsPrivate("setPref"))return this.settingValuesArray=e,window.chrome.ntpSettingsPrivate.setPref(this.prefSettingKey,this.settingValuesArray),!0;{const e="window.chrome.ntpSettingsPrivate.setPref does not exist.";return this.logAppError(r.T5b,e,`Key:${this.prefSettingKey}`),!1}}catch(e){return!1}}isGoodToUseNtpSettingsPrivate(e){let t=this.isNtpPrivateApiAvailable(e),n=0;for(;n<this.chromiumApiRetryCount&&!t;)n++,setTimeout((()=>{t=this.isNtpPrivateApiAvailable(e),t&&o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.$9$),{message:`Chromium API retry succeed after ${n} retry`}))}),50);if(!t){const t=`functionName: ${e},\n            canUseDOM: ${(0,a.N)()},\n            windows: ${window},\n            document: ${window&&window.document},\n            createElement: ${window&&window.document&&window.document.createElement},\n            chrome: ${window&&window.chrome},\n            ntpSettingsPrivate: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate},\n            ntpSettingsPrivate funtions: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate&&Object.getOwnPropertyNames(window.chrome.ntpSettingsPrivate).toString()}\n            `;o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Fe_),{message:"Failed to get funtion from window.chrome.ntpSettingsPrivate.",pb:Object.assign(Object.assign({},r.Fe_.pb),{customMessage:t})}))}return t}getPreferenceValueFromBrowser(){return new Promise(((e,t)=>{if(this.isGoodToUseNtpSettingsPrivate("getPref"))window.chrome.ntpSettingsPrivate.getPref(this.prefSettingKey,(function(t){t&&t.value?e(t.value):e(null)}));else{const e="window.chrome.ntpSettingsPrivate.getPref does not exist.";this.logAppError(r.pCD,e,""),t(e)}}))}}},24676:function(e,t,n){"use strict";n.d(t,{Wt:function(){return F},jL:function(){return H},_W:function(){return P},jj:function(){return w},x5:function(){return _},ZE:function(){return R},UU:function(){return L},H1:function(){return $},aT:function(){return k},a:function(){return T},VS:function(){return A},OM:function(){return I},Tr:function(){return M},Xq:function(){return O},I9:function(){return E},nz:function(){return q},Vx:function(){return D},eq:function(){return B},mY:function(){return V},LC:function(){return N}});var i=n(33940),r=n(56692),o=n(81428),a=n(27212),s=n(75192),c=n(75384),d=n(49786),l=n(65135),u=n(98304),p=n(68364),h=n(33379),g=n(45506),m=n(17440),f=n(11765),v=n(4734);const y={};function S(e){if("undefined"==typeof window||!window.document||window.isRenderServiceEnv)return;const t=window.trustedTypes;if(!t||!t.createPolicy)return;if(y[e])return y[e];const n=t.createPolicy(e,{createScriptURL:e=>{const t=function(e){const t=["ntp.msn.com","ntp.msn.cn","assets.msn.cn","assets.msn.com","www.bing.com","assets2.msn.com","www.clarity.ms","assets2.msn.cn","int.msn.com","r.bing.com","business.bing.com",document.location.hostname];let n;try{n=new URL(e,location.origin)}catch(t){return(0,p.OO)(new Error("URL violates Trusted Types"),u.w5E,"URL is invalid",`Invalid URL: ${e}`),null}if(n.hostname&&!t.includes(n.hostname))return(0,p.OO)(new Error("URL violates Trusted Types"),u.w5E,"URL hostname is not allowed",`Invalid URL hostname: ${n.hostname}`),null;return e}(e);return t},createHTML:()=>null,createScript:()=>null});return y[e]=n,n}let C=!1;const b=[];function w(){return new Promise((e=>{const t=window.chrome;if(t){const n=t.ntpSettingsPrivate;if(n&&"function"==typeof n.getConfigData)return void n.getConfigData((t=>{e((null==t?void 0:t.enabledFeatures)||[])}))}e([])}))}function T(){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield w()).filter((e=>e.includes("msNtpExp")))}))}function k(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=[];return e.forEach((e=>{if(e.startsWith("m")){const n=e.replace("msNtpExp",""),i=Number.parseInt(n);i>=0&&t.push(i)}})),t}))}function P(e){let t=0;return e.forEach((e=>{e<31&&(t|=1<<e)})),0===t?"":t.toString()}function A(){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield w()).includes("msReducedNtpAdsForNewDevice_stage1")}))}function I(){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield w()).includes("msReducedNtpAdsForNewDevice_stage2")}))}function E(){const e=window&&window.navigator;if(!e)return!1;const{hardwareConcurrency:t=-1,deviceMemory:n=-1}=e;return t<=2||n<4}function x(){return window&&window.navigator&&window.navigator.deviceMemory&&window.navigator.deviceMemory<=4}function M(){return"1"===new URLSearchParams(window.location.search).get("startpage")&&x()}function O(){const e="1"!==new URLSearchParams(window.location.search).get("startpage"),t=window&&window.navigator&&window.navigator.deviceMemory&&window.navigator.deviceMemory<4;return e&&t}function L(){let e=!1;const t="os-sku";if(!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv))try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const n=JSON.parse(window.external.getHostEnvironmentValue(t));e=n&&"192"===n[t]}}catch(e){}return e}function D(e){C=e}function R(){return C}function F(e){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onPrerenderConversionFromDhpToNtp&&window.chrome.ntpSettingsPrivate.onPrerenderConversionFromDhpToNtp.addListener(e)}function B(e){var t,n;return(0,i.mG)(this,void 0,void 0,(function*(){if(!(x()||(null===(n=null===(t=null===r.jG||void 0===r.jG?void 0:r.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.pageExperiments)||void 0===n?void 0:n.includes("prg-lowmemdhp"))))return;const i=()=>{setTimeout((()=>{(0,c.oc)(),(0,d.Yc)(!1)}),5e3)};e?i():F(i)}))}function N(e,t,n,r,o){n!==r&&(l.M0.addOrUpdateTmplProperty("layoutchange",`${e}|${t}|${n}|${r}|${o}`),function(e,t,n,r,o){(0,i.mG)(this,void 0,void 0,(function*(){const i=(yield U())||{};e==s.st.User?i.userLayoutHistory={time:o,changeKey:t,from:n,to:r}:i.wpoLayoutHistory={time:o,changeKey:t,from:n,to:r},yield m.U.savePreferenceSetting(s.Xm.layoutHistory,i)}))}(e,t,n,r,o))}function U(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield m.U.getPreferenceSetting(s.Xm.layoutHistory,!0);return e&&e.value}))}function $(){return(0,i.mG)(this,void 0,void 0,(function*(){try{const e=yield U();let t=e&&e.wpoLayoutHistory,n=e&&e.userLayoutHistory;const r={};return t||(t=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield m.U.getPreferenceSetting(s.Xm.wpo),t=e&&e.value,n=t&&t.layoutHistory;if(n&&n.length){const e=n[0];return{time:e.time,changeKey:"layout",from:s.Uq[e.from],to:s.Uq[e.to]}}return null}))}()),n||(n=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield f.L.getPreferenceSetting(s.nc.layout_mode,!0),t=e&&e;return t?{time:t.timestamp,changeKey:"layout",from:8,to:t.value}:null}))}()),(null==t?void 0:t.time)&&(r.promotion=`${t.time}_${"layout"==t.changeKey?"l":"f"}_${t.from}_${t.to}`),(null==n?void 0:n.time)&&(r.selection=`${n.time}_${"layout"==n.changeKey?"l":"f"}_${n.from}_${n.to}`),r}catch(e){return{}}}))}function _(){return(0,i.mG)(this,void 0,void 0,(function*(){if((0,h.N)()&&window.caches){return(yield window.caches.open("edgenext-pre-V1").then((e=>e.matchAll()))).find((e=>e.url.includes("/common.")))}}))}function H(){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted.addListener((()=>{W()}))}const W=()=>(0,i.mG)(void 0,void 0,void 0,(function*(){const e=g.Al.ClientSettings?g.Al.ClientSettings.aid:"";let t=l.M0.getPageMetadata().JoinIdProps.IDXId;if(t){const n=t.split(",");t=n.slice(0,10).toString();const i={serviceType:"oneservice",oneServiceTraceId:t,oneServiceActivityId:e};l.M0.sendTraceInfoEvent(i)}}));function j(){const e=g.Al&&g.Al.Diagnostics||{};return e&&(0,o.fB)(JSON.stringify(e))}function G(){const e=G;return new Promise((t=>{void 0!==e.cache&&t(e.cache);const n=i=>{i>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(i++,setTimeout((()=>n(++i)),3e3))};n(0)}))}function V(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function*(){try{(e||t)&&b.push({id:e,debug:t}),yield Promise.all([(0,v.F_)(),(0,c.lr)()]);const i=yield G();if(i&&i.innerText){const e=JSON.parse(i.innerText);Object.assign(e,{traceInfo:b}),Object.assign(e,{prgDiagnostics:j()}),Object.assign(e,{authTrail:n}),Object.assign(e,{countryConfidenceFactor:(0,a.q)()}),r&&Object.assign(e,{ocvSource:r}),i.innerText=JSON.stringify(e)}}catch(e){l.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.vxy),{message:"Error throwed during update idxid into diagnostic element"}))}}))}function q(e,t){const n=S(t);return n?n.createScriptURL(e):((0,p.OO)(new Error("Trusted Types policy creation error"),u.qS2,"Trusted Types policy creation failed, Trusted Types API is unavailable."),e)}},82209:function(e,t,n){"use strict";n.d(t,{M:function(){return o},j:function(){return i}});var i,r=n(33379);!function(e){e.NTP_TOP_SITES_CLICK="NTP_TopSites_Click"}(i||(i={}));class o{static isEdgeNurturingAvailable(){var e;return(0,r.N)()&&(null===(e=window.chrome)||void 0===e?void 0:e.edgeNurturingPrivate)}static getToken(e){return new Promise((t=>{var n,i;(0,r.N)()?"function"==typeof(null===(i=null===(n=window.chrome)||void 0===n?void 0:n.edgeNurturingPrivate)||void 0===i?void 0:i.GetToken)?window.chrome.edgeNurturingPrivate.GetToken(e,(e=>{t(e)})):t({Message:"window.chrome.edgeNurturingPrivate.GetToken API Unavailable"}):t({Message:"Cannot use DOM"})}))}static updateCTA(e,t){var n,i;(0,r.N)()&&"function"==typeof(null===(i=null===(n=window.chrome)||void 0===n?void 0:n.edgeNurturingPrivate)||void 0===i?void 0:i.UpdateCTA)&&window.chrome.edgeNurturingPrivate.UpdateCTA(e,t)}static notifyTriggerEvent(e){return new Promise((t=>{var n,i;(0,r.N)()&&"function"==typeof(null===(i=null===(n=window.chrome)||void 0===n?void 0:n.edgeNurturingPrivate)||void 0===i?void 0:i.NotifyTriggerEvent)&&window.chrome.edgeNurturingPrivate.NotifyTriggerEvent(e,(e=>{t(e)}))}))}}},39439:function(e,t,n){"use strict";n.d(t,{F:function(){return c}});var i=n(65135),r=n(20424),o=n(56692);const a=`reloadCount_${"undefined"!=typeof window?window.location.href:""}`;function s(e,t,n){if(i.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:"Navigating to local ntp page on exception.",pb:Object.assign(Object.assign({},e.pb),{customMessage:t,stack:n&&n.stack})})),o.jG.IsDebug)return;const r=new URLSearchParams;e&&r.set("ntperror",e.id);const a=i.M0.getRequestId();a&&r.set("rid",a),i.M0.flush(!0,"AppError"),setTimeout((()=>{location.replace("chrome-search://local-ntp/local-ntp.html?"+r.toString())}),2e3)}const c={tryReloadNtpPage:function(e,t,n,o){if(!r.y7.supported)return void s(t,`sessionStorage is not supported. ${n}`);if(r.y7.getItem(a)){const e=r.y7.getItem(a),i=e&&parseInt(e)||0;if(!(i<2))return void s(t,`Max reload count (2) reached. ${n}`,o);r.y7.setItem(a,i+1+"")}else r.y7.setItem(a,"1");i.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:"Reloading NTP page on exception.",pb:Object.assign(Object.assign({},e.pb),{customMessage:n,stack:o&&o.stack})})),i.M0.flush(!0,"AppError"),setTimeout((()=>{location.reload()}),2e3)},redirectToLocalNtp:s}},34955:function(e,t,n){"use strict";var i;n.d(t,{H:function(){return r},v:function(){return i}}),function(e){e[e.NTP_ALL_TILES_LOADED=11]="NTP_ALL_TILES_LOADED",e[e.NTP_SHORTCUT_CUSTOMIZED=39]="NTP_SHORTCUT_CUSTOMIZED",e[e.NTP_CUSTOMIZE_ADD_SHORTCUT_CLICKED=44]="NTP_CUSTOMIZE_ADD_SHORTCUT_CLICKED",e[e.NTP_CUSTOMIZE_SHORTCUT_REMOVE=53]="NTP_CUSTOMIZE_SHORTCUT_REMOVE",e[e.NTP_CUSTOMIZE_SHORTCUT_CANCEL=54]="NTP_CUSTOMIZE_SHORTCUT_CANCEL",e[e.NTP_CUSTOMIZE_SHORTCUT_DONE=55]="NTP_CUSTOMIZE_SHORTCUT_DONE",e[e.NTP_CUSTOMIZE_SHORTCUT_ADD=58]="NTP_CUSTOMIZE_SHORTCUT_ADD",e[e.NTP_CUSTOMIZE_SHORTCUT_UPDATE=59]="NTP_CUSTOMIZE_SHORTCUT_UPDATE",e[e.NTP_BACKGROUND_IMAGE_LOADED=60]="NTP_BACKGROUND_IMAGE_LOADED",e[e.NTP_VISUALLY_READY=62]="NTP_VISUALLY_READY",e[e.NTP_SMARTLIST_ENABLED=63]="NTP_SMARTLIST_ENABLED",e[e.NTP_SMARTLIST_DISABLED=64]="NTP_SMARTLIST_DISABLED"}(i||(i={}));const r={logEvent:function(e){const t=window.chrome,n=t&&t.embeddedSearch&&t.embeddedSearch.newTabPage;n&&n.logEvent(e)},logEventWithTimestamp:function(e,t){const n=window.chrome,i=n&&n.embeddedSearch&&n.embeddedSearch.newTabPage;i&&(i.logEventWithTimestamp?i.logEventWithTimestamp(e,performance.now(),t):i.logEvent(e))}}},13553:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var i=n(22704),r=n(45506),o=n(96361),a=n(24676);let s=!1;function c(){if(!s&&((0,a.ZE)()||r.Al&&r.Al.CurrentFlightSet&&r.Al.CurrentFlightSet.has("prg-lowmemdhp"))){const e=(0,i.Ou)();Object.prototype.hasOwnProperty.call(e,"Auth.GetSignInStateAsync-start")&&(e["Auth.GetSignInStateAsync-start"]-=(0,o.my)(),s=!0)}}},11765:function(e,t,n){"use strict";n.d(t,{L:function(){return d}});var i=n(33940),r=n(27003),o=n(99590),a=n(28817),s=n(98304);class c extends a.N{constructor(){super("ntp.record_user_choices","setting","value",{setting:"default",source:"default layout",timestamp:0,value:-1})}static getInstance(){return r.Gq.get("__RecordUserChoicesManager__",(()=>new c))}deleteKeyValueFromPSL(e){return(0,i.mG)(this,void 0,void 0,(function*(){try{let t=(yield this.getPreferenceSettingValueArray())||[];return t=t.filter((t=>t&&t[this.searchForKeyName]!==e)),this.setAndSavePreferenceSetting(t)}catch(t){const n="Failed to delete user preference setting";return this.logAppError(s.nS9,n,`Key:${e}.Error:${t}`),!1}}))}}const d=(0,o.h)(c)},17440:function(e,t,n){"use strict";n.d(t,{H:function(){return h},U:function(){return g}});var i=n(33940),r=n(27003),o=n(99590),a=n(98304),s=n(28817),c=n(32164),d=n(33379),l=n(52965);function u(e,t){return(e||[]).find((e=>(null==e?void 0:e.key)===t))||null}function p(e,t){const{key:n,value:i,deleteKey:r=!1}=t;let o=e||[];if(r)o=o.filter((e=>e&&(null==e?void 0:e.key)!==n));else{const e=o.findIndex((e=>(null==e?void 0:e.key)===n));if(e>-1)o[e]=Object.assign(Object.assign({},o[e]),{value:i});else{const e={key:n,value:i};o.push(e)}}return o}class h extends s.N{constructor(){super("ntp.user_nurturing","key","value",{key:"default",value:"none"}),this._latestItems=[],this._initializeCachedItemsPromise=new c.o}static getInstance(){return r.Gq.get("__UserNurturingManager__",(()=>new h))}savePreferenceSetting(e,t,n=!1){return(0,i.mG)(this,void 0,void 0,(function*(){try{return yield this._initializeCachedItems(),this._updateCachedItems({key:e,value:t,deleteKey:n}),yield this._updatePersistedItems({key:e,value:t,deleteKey:n})}catch(t){const n="Failed to store user nurturing preference";return this.logAppError(a.nS9,n,`Key:${e}.Error:${t}`),!1}}))}getPreferenceSetting(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){try{if(yield this._initializeCachedItems(),t){const t=yield this._getPersistedItemByKey(e);return this._updateCachedItems({key:e,value:null==t?void 0:t.value,deleteKey:!1}),t}return this._getCachedItemByKey(e)}catch(t){const n=`Failed to find user preference key: ${e}`;return this.logAppError(a.Aps,n,t),null}}))}_initializeCachedItems(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this._initializeCachedItemsPromise.wasSet())return this._initializeCachedItemsPromise.getResultAsync();try{this._items=(yield this.getPreferenceValueFromBrowser())||[],this._latestItems=(0,l.Z)(this._items)}catch(e){const t="Failed to initialize cached items for UserNurturingManager";this.logAppError(a.Aps,t,e)}this._initializeCachedItemsPromise.set(),this._listenToPreferenceChange()}))}_getCachedItemByKey(e){return u(this._items,e)}_getPersistedItemByKey(e){return(0,i.mG)(this,void 0,void 0,(function*(){return u(this._latestItems,e)}))}_updateCachedItems(e){this._items=p(this._items,e)}_updatePersistedItems(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=this._latestItems;return this.setAndSavePreferenceSetting(p(t,(0,l.Z)(e)))}))}deleteKeyValueFromPSL(e){this.savePreferenceSetting(e,null,!0)}_listenToPreferenceChange(){(0,d.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onPrefsChanged.addListener((e=>{const t=(e||[]).find((e=>(null==e?void 0:e.key)===this.prefSettingKey));t&&(this._latestItems=(0,l.Z)(t.value||[]))}))}}const g=(0,o.h)(h)},75192:function(e,t,n){"use strict";n.d(t,{Nn:function(){return d},Uq:function(){return u},Xm:function(){return i},nc:function(){return s},rr:function(){return a},sj:function(){return o},st:function(){return c},ui:function(){return l}});const i={campaigns:"campaigns",feedLayout:"feed_layout",renderSingleColumn:"render_single_column",wpo:"wpo",wpoLytTmpl:"wpo_lyt_tmpl",topSites:"top_sites",recommendedSites:"recommended_sites",viewport:"viewport",wpo_nx:"wpo_nx",layoutPromotion:"layoutPromotion",layoutHistory:"layoutHistory"};var r,o,a;!function(e){e.Ntp="ntp",e.Wpo="wpo"}(r||(r={})),function(e){e.MultiColumn="multi",e.SingleColumn="single"}(o||(o={})),function(e){e.apiError="api_error"}(a||(a={}));const s={tscollapsed:"tscollapsed",layout_mode:"layout_mode",left_rail:"left_rail",quick_links_options:"quick_links_options",single_column:"single_column",recommended_sites:"recommended_sites",daily_discovery_in_search_box:"daily_discovery_in_search_box",news_below_searchbox:"news_below_searchbox",ntp_tips:"ntp_tips",search_history:"search_history",current_location_enabled:"current_location_enabled",enable_sponsored_content:"enable_sponsored_content",enable_split_screen:"enable_split_screen",hide_search_box:"hide_search_box",seen_interest_fre_count:"seen_interest_fre_count",visited_following_feed:"visited_following_feed",dismiss_scroll_down_button:"dismiss_scroll_down_button",bing_intl_upsell:"bing_intl_upsell"};var c;!function(e){e.User="user",e.Wpo="wpo"}(c||(c={}));const d="_split";var l,u;!function(e){e.NotInChinaCoachMarkButton="notInChinaCoachMarkButton",e.FeedbackLink="feedbackLink"}(l||(l={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(u||(u={}))},68793:function(e,t,n){"use strict";n.d(t,{P6:function(){return v},YZ:function(){return S},vT:function(){return y}});var i=n(33940),r=n(77331),o=n(68364),a=n(98304),s=n(65135),c=n(16822),d=n(53899),l=n(86331),u=n(11765),p=n(75192),h=n(17440),g=n(27003);const m="__storedRecommendedSitesState__",f="__storedRecommendedSitesCoachMarkState__";function v(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t=g.Gq.get(m);if(t)return t;if(t=d.yR.tworows,e.enableRecommendedSitesSelection){const n=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(yield u.L.isApiAvailableToUse()))return null;const e=yield u.L.getPreferenceSetting(p.nc.recommended_sites);return e&&void 0!==e.value?d.$_[e.value]:null}))}();if(n)t=n;else{const n=function(){var e,t;try{const n=c.k.getWpoTreatmentsWithType(r._h.recommendedsitesCollapse),i=(null==n?void 0:n.length)>0&&(null===(t=null===(e=n[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.recommendedSitesCollapsibleControlConfig);if(i)return i}catch(e){const t="Error in getting wpo recommended sites config";(0,o.H)(a.Od5,t,`error:${e}`)}return null}(),u=e.enableWpoRecommededSitesConfigOverride?n:null;if(u&&u.recommendedSiteStatus){const e=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(yield h.U.isApiAvailableToUse()))return null;const e=yield h.U.getPreferenceSetting(p.nc.recommended_sites);return e&&e.value&&void 0!==e.value.type?d.$_[e.value.type]:null}))}();e&&e===u.recommendedSiteStatus?t=e:(t=u.recommendedSiteStatus,s.M0.addOrUpdateTmplProperty("WpoPromRecSite","1"),t===d.yR.off?g.Gq.set(f,l.gz.recommendedSitesPromotionOff):g.Gq.set(f,l.gz.recommendedSitesPromotionNewLine),function(e){(0,i.mG)(this,void 0,void 0,(function*(){if(!(yield h.U.isApiAvailableToUse()))return;const t={source:"wpo",timestamp:(new Date).getTime(),type:d.$N[e]};h.U.savePreferenceSetting(p.Xm.recommendedSites,t)}))}(t))}}}return t!==d.yR.onerow||e.enableRS1Row||(t=d.yR.tworows),e.enableRS2RowsOnly&&(t!==d.yR.onerow&&t!==d.yR.threerows||(t=d.yR.tworows)),s.M0.addOrUpdateTmplProperty("RecommendedSites",t.toString()),g.Gq.set(m,t),t}))}function y(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(yield u.L.isApiAvailableToUse()))return;const t={setting:p.nc.recommended_sites,source:"ntp",timestamp:(new Date).getTime(),value:d.$N[e]};u.L.savePreferenceSetting(p.nc.recommended_sites,t)}))}function S(){const e=g.Gq.get(f);return e||null}},1584:function(e,t,n){"use strict";n.d(t,{DU:function(){return b},LC:function(){return T},NU:function(){return w},R:function(){return C},VL:function(){return k},jt:function(){return S},r4:function(){return P}});var i=n(33940),r=n(27003),o=n(33379),a=n(53899),s=n(68364),c=n(98304),d=n(77331),l=n(45506),u=n(55755),p=n(65135),h=n(11765),g=n(75192),m=n(16822);const f="__StoredTopSitesState__",v="__StoredTopSitesQuickLinkOptions__",y="__TopSitesCollapsibleControlConfig__";function S(e,t){if(t&&r.Gq.set(y,t),e){const e=C();e&&r.Gq.set(y,e)}}function C(){var e,t;try{const n=m.k.getWpoTreatmentsWithType(d._h.topsitesCollapse),i=m.k.getWpoTreatmentsWithType(d._h.topSites),o=[...n||[],...i||[]],a=(null==o?void 0:o.length)>0&&(null===(t=null===(e=o[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.topSitesCollapsibleControlConfig)||void 0;return((null==a?void 0:a.promoteTopSitesTop)||(null==a?void 0:a.promoteTopSites2Row))&&window.isSSREnabled&&(a.promoteTopSitesTop=!1,a.promoteTopSites2Row=!1),r.Gq.set(y,a),a||null}catch(e){const t="Error in getting wpo topSites config";(0,s.H)(c.Od5,t,`error:${e}`)}return null}function b(){try{const e=m.k.getWpoTreatmentsWithType(d._h.topSitesPromotion),t=m.k.getWpoTreatmentsWithType(d._h.topSites),n=[...e||[],...t||[]];if((null==n?void 0:n.length)>0&&n[0].properties)return n[0].properties}catch(e){const t="Error in getting wpo topSites config";(0,s.H)(c.Od5,t,`error:${e}`)}return null}function w(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield h.L.getPreferenceSetting(g.nc.tscollapsed),n=null==t?void 0:t.value;(0,o.N)()||function(e){var t;const n=null===(t=l.Al.EdgeNTPHeader)||void 0===t?void 0:t.tscollapsed;if(void 0!==n&&n!==e){"true"===(0,u.L)().get("mock-ntp-header")||p.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.sFk),{message:"SSR - Edge header mismatch.",pb:Object.assign(Object.assign({},c.sFk.pb),{customMessage:`key: tsCollapsed, header: ${n}, state: ${e}`})}))}}(n);const i=r.Gq.get(y)||C();if(void 0!==n||!i)return 1===n;const s=r.Gq.get(f);if(void 0!==s)return s;let d=i.collapsibleControlIsDefaultCollapsed;return d&&i.collapseForDefaultInformational&&(d=e.currentLayout===a.nP.informational),r.Gq.set(f,!!d),!!d}))}function T(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield h.L.getPreferenceSetting(g.nc.quick_links_options),t=null==e?void 0:e.value,n=r.Gq.get(y)||C();if(void 0!==t||!n)return t===a.Z3.tworows;const i=r.Gq.get(v);if(void 0!==i)return i===a.Z3.tworows;const o=!!n.promoteTopSites2Row;return r.Gq.set(v,o?a.Z3.tworows:a.Z3.onerow),o}))}function k(e){return(0,i.mG)(this,void 0,void 0,(function*(){if((null==e?void 0:e.selectedQuickLinksDisplaySetting)===a.Z3.top)return!1;const t=yield h.L.getPreferenceSetting(g.nc.quick_links_options);let n=!1,i="";if(!!(null==t?void 0:t.value))n=t.value===a.Z3.top,i="user";else{const e=r.Gq.get(y)||C();n=!!(null==e?void 0:e.promoteTopSitesTop),i="wpo"}return n&&p.M0.addOrUpdateTmplProperty("promoteTopsitesTopFrom",i),n}))}function P(e,t=!1){let n=null,i=null;if(e&&e.length)for(const t of e)t.setting===g.nc.tscollapsed&&(n=t),t.setting===g.nc.quick_links_options&&(i=t);const o=r.Gq.get(y)||C();if(n&&1===n.value)return!0;if(void 0===(null==n?void 0:n.value)){if(!0===r.Gq.get(f))return!0;if(o&&o.collapsibleControlIsDefaultCollapsed)return!0}return!(!i||i.value!==a.Z3.top)||!(!t||i||!o||!o.promoteTopSitesTop)}},95084:function(e,t,n){"use strict";n.d(t,{h:function(){return N}});var i=n(88828),r=n(14989),o=n(29815),a=n(71443),s=n(52144),c=n(56692),d=n(45506),l=n(44979),u=n(65135),p=n(82357),h=n(93048),g=n(7282),m=n(75816),f=n(98429);f.kP&&(window.telemetryEventsClear=()=>{window.telemetryEvents=[]},window.telemetryEventsFlush=()=>{const e=Object.assign({},window.telemetryEvents);return window.telemetryEventsClear(),e});const v=function(e){f.kP&&(window.telemetryEvents=window.telemetryEvents||[],window.telemetryEvents.push(e))},y=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],S=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],C=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],b=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],w=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],T=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],k=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],P=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],A=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],I=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],E=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],x=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],M=[{type:m.G.SuperApp,transporterConfig:{enableConsoleLog:!0}}],O=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}}],L={};L.enterprise=k,L.enterpriseCN=P,L.enterpriseMicrosoftStart=E,L.enterpriseCNMicrosoftStart=x,L.int=y,L.intCN=S,L.intMicrosoftStart=C,L.intCNMicrosoftStart=b,L.prod=w,L.prodCN=T,L.prodMicrosoftStart=A,L.prodCNMicrosoftStart=I,L.superApp=M,L.superAppWeb=O;var D=n(33379),R=n(82855),F=n(85663),B=n(19388);class N{static initPage(e,t,n){u.M0.initPage(e,n||c.jG.ActivityIdLowerCaseNoHypens,c.jG.BuildVersion,c.jG.FrontDoorMuid),t&&(0,B.b1)().then((()=>u.M0.initScrollPerformanceTrackers())),s.A.subscribe(s.U.Initialized,U)}static getAppTypeTelemetryContract(e,t,n,i){const r=d.Al&&d.Al.ClientSettings||{},o=r.browser&&"true"===r.browser.ismobile||"phone"===r.deviceFormFactor,a="true"===r.static_page;let s,u,p,h,g=c.jG&&c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments&&c.jG.CurrentRequestTargetScope.pageExperiments.join(",");i.flights&&(g=i.flights),"edgeChromium"===c.jG.AppType&&g&&g.includes("remfltfromtel")&&(g=void 0),s=i.pageType?i.pageType:r.pagetype,u=i.pageContentTitle?i.pageContentTitle:(0,D.N)()?document.title:"",p=i.pageUrl?i.pageUrl:(0,D.N)()?document.URL:(0,l.DO)(t),h=i.pageViewType?i.pageViewType:N.trackCallbacks(n);let m=c.jG.CurrentMarket;i.locale&&(m=i.locale);return Object.assign({browser:{isMobile:o},flight:{id:g},locale:{mkt:m,lang:c.jG.MarketRequestInputLanguage,region:c.jG.MarketRequestInputRegion,geo_cc:c.jG.MarketRequestInputGeoCountry,mktReason:c.jG.MarketDetectionType},page:Object.assign(Object.assign({appType:c.jG.AppType,canvas:e.pageCanvas,config:e.pageConfiguration,content:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({title:u},!(0,F.isNullOrUndefined)(e.pageContentCategory)&&{category:e.pageContentCategory}),!(0,F.isNullOrUndefined)(e.pageContentSubCategory)&&{subcategory:e.pageContentSubCategory}),!(0,F.isNullOrUndefined)(e.pageContentDomainId)&&{domainId:e.pageContentDomainId}),!(0,F.isNullOrUndefined)(e.pageContentId)&&{id:e.pageContentId}),!(0,F.isNullOrUndefined)(e.pageContentVertical)&&{vertical:e.pageContentVertical}),isAdEnabled:!1,isAutoRefresh:!1,isJSEnabled:!0,isStatic:a,name:e.pageName,ocid:e.pageOcid,product:e.pageProduct,type:s,url:p,viewType:h},!(0,F.isNullOrUndefined)(e.pageTheme)&&{theme:e.pageTheme}),!(0,F.isNullOrUndefined)(e.pageHas3PSearch)&&{has3PSearch:e.pageHas3PSearch})},(!(0,F.isNullOrUndefined)(e.userSignInStatus)||!(0,F.isNullOrUndefined)(e.userSsoStatus)||!(0,F.isNullOrUndefined)(e.userAadState))&&{user:Object.assign(Object.assign(Object.assign({},!(0,F.isNullOrUndefined)(e.userSignInStatus)&&{isSignedIn:e.userSignInStatus}),!(0,F.isNullOrUndefined)(e.userSsoStatus)&&{isSso:e.userSsoStatus}),!(0,F.isNullOrUndefined)(e.userAadState)&&{aadState:e.userAadState})})}static getAppTypeTrackingSystemConfig(e){return function(e,t,n,i){const r=e&&e.includes("microsoftstart.com")?"MicrosoftStart":"";let o;return o="prod"===t?i?"enterprise":"prod":"int",L[`${o}${n?"CN":""}${r}`]}(d.Al&&d.Al.ClientSettings&&d.Al.ClientSettings.domain,c.jG.Environment,c.jG.IsChinaCompliance,e)}static trackCallbacks(e){let t="";switch((0,i.Bn)().currentColumnArrangement){case e.singleColSupported&&r.K$.c1:t="size1column";break;case!e.singleColSupported&&r.K$.c1:case r.K$.c2:t="size2column";break;case r.K$.c3:t="size3column";break;case r.K$.c4:t="size4column";break;case e.fiveColSupported&&r.K$.c5:t="size5column"}return t}static hasFlight(e){const t=c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments,n=(0,R.Mx)(t);return n&&n.includes(e)}}function U(e){if(e){s.A.get(s.U.CookieConsentProvider)===o.i.OneTrustBanner&&window.addEventListener(a.C,(()=>{const e=u.M0.getPageMetadata();e&&e.contract&&e.contract.page&&(e.contract.page.consentChanged="occ")}))}}},61109:function(e,t,n){"use strict";n.d(t,{sG:function(){return F},ql:function(){return B},If:function(){return R}});var i=n(33940),r=n(19388),o=n(22704),a=n(98304),s=n(68364),c=n(62676),d=n(59902);var l=n(23163);function u(e){window.windowsPerfMarker&&window.windowsPerfMarker(e)}var p=n(62325),h=n(4734),g=n(53301),m=n(32509),f=n(89638),v=n(17873),y=n(56692),S=n(6719),C=n(56698),b=n(53076),w=n(93450),T=n(28781),k=n(45506);const P={didPreload:!1,timeTakenForRevealInMs:0,pageRevealed:!0};function A(){const e=w._.getInstance().rootReducer.connector(b.z.Preload);if(!e||!k.Al.IsPreload)return Promise.resolve(P);const t=e.getCurrentState();if(t&&t.pageRevealedData){const e=t.pageRevealedData;return Promise.resolve(e)}return new Promise((e=>{T.X.pageVisibilityChange.registerObserver((t=>{const n=t.params[0];e(n)}))}))}var I=n(75384),E=n(82890),x=n(65135),M=n(89123),O=n(33379),L=n(63158),D=n(97736);function R(e,t,n){if(!(0,O.N)())return;const i=(0,h.S0)();i&&t===r.oN.Primary&&g.g.updateAboveTheFoldVisuallyReady.getActionSender(i).send(performance.now());const c=t===r.oN.Primary,d=(0,r.bO)(t);if((0,o.Ou)().IncompleteMarkers=null==d?void 0:d.join(","),(0,m.L)())return void e([]);let l=[];const u=c?a.LwW:a.Nxj;l=c?(0,r.bP)():(0,r.gh)();const p=(0,r.Gb)(),f=p.marker||"None",v=p.value||"None";let y=", Visual dependency callback was unavailable.";if(n){const e=n();y=e.length?`, Incomplete visual dependencies: ${JSON.stringify(e)}.`:", No pending visual dependencies."}(0,s.H)(u,"Missing perf markers",`Missing perf markers: ${JSON.stringify(d)}${y} Last Marked: ${f} ${v}`);const S=(0,r.OZ)();S&&c&&d.includes(`TTVR.${S}`)&&(0,s.H)(a.MmB,"Expected feed timed out while loading",`Expected feed timed out while loading: ${S}`),window.renderCacheEnabled&&c&&(0,L.cB)(),e(l)}function F(e,t={}){return(0,i.mG)(this,void 0,void 0,(function*(){const n=(0,o.Ou)(),{onAfterPageTimingsUpdated:i,disableLoadTimeEvent:a,reportEntityMetrics:s}=t,h=(0,o.Th)();if(h){const{domComplete:e,loadEventStart:t,responseStart:i,domainLookupEnd:r,domainLookupStart:o,domInteractive:a,domContentLoadedEventStart:s,domContentLoadedEventEnd:u,fetchStart:p,connectEnd:g,connectStart:m,workerStart:f,responseEnd:v,requestStart:S,unloadEventStart:C,unloadEventEnd:b,type:w,systemEntropy:T,secureConnectionStart:k}=h;n.timeToFirstByte=i,n.timeToDomComplete=e,n.timeToOnLoad=t,n.domainLookupTime=r-o,n.timeToFetchStart=p,n.timeToWorkerStart=f,n.connectStart=m,n.connectTime=g-m,n.requestStart=S,n.requestTime=i-S,n.responseStart=i,n.responseTime=v-i,n.requestResponseTime=v-S,n.fetchTime=v-p,n.swInitTime=p-f,n.swFetchTime=o-p,n.timeToUnload=b-C,n.timeToInteractive=a,n.domContentLoadedEventStart=s,n.domContentLoadedEventEnd=u,n.navigationType=w,n.systemEntropy=T,n.timeToSecureConnection=k-m,function(e){e.buildVer=y.jG.BuildVersion||-1}(n),function(e){if(performance.getEntriesByType){const t=performance.getEntriesByType("paint").filter((e=>"first-contentful-paint"===e.name));t.length>0&&(e[c.zJ]=Math.round(t[0].startTime))}}(n),(0,l.Oq)(n),(0,l.bg)(n),(0,l.H7)(n),(0,l.zV)(n),(0,l.Am)(n),(e=>{let t=-1;const n=e[c.w],i=e[c.P9];n&&i&&(t=n-i),e[c.Fz]=t,(0,d.QP)({name:c.Fz,startTime:i,endTime:n})})(n),(e=>{let t=-1;const n=e[c.w],i=e[c.Wk];i&&n&&(t=i-n),e[c.iL]=t,(0,d.QP)({name:c.iL,startTime:n,endTime:i})})(n)}(0,l.dw)(n),(0,l.iA)(n);for(const t of e){const e=t[0];n[e]||(n[e]=t[1])}const g=(0,r.sx)();g&&(n.ReasonForTTVR=g);const b=n[S.dd];b&&(u(S.jh),u(S.H$),(0,C.Eu)(b),function(e){if(performance&&performance.getEntriesByType&&e&&e[c.MV]){const t=performance.getEntriesByType("navigation");if(t.length){const n=t[0];let i=0,r=0;c.pJ in n&&c.fR in n&&(i=n[c.pJ],r=n[c.fR]),i<0&&r<0&&(e["TTVR."+c.IP]=Math.round(e[c.MV]-i),e["TTVR."+c.Hm]=Math.round(e[c.MV]-r))}}}(n)),f.U.getConfigTimings(n),(0,M.J)(n),n.wasBrowserHiddenAtLeastOnce=(0,m.L)(),(0,p.j)(),i&&i(),(0,I.wY)(),Promise.all([A(),(0,I.lr)()]).then((()=>{(0,C.fv)(n),a||(0,D.J)(window,{reportEntityMetrics:s})})),f.U.refreshConfigCache().then((()=>{!function(){const e=f.U.getResolverErrors();e&&e.length>0&&e.forEach((e=>{x.M0.sendAppErrorEvent(e)}))}()})),(0,v.mS)({id:"PostTtvr",type:"command"})}))}function B(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const i=(0,o.Ou)(),r=(0,o.Y9)();if((e=e.filter((e=>!(e[0]in i)))).forEach((e=>{const t=e[0];t in i||(r[t]=e[1],i[t]=e[1])})),v.yb){const e=yield(0,v.ot)({id:"perfmarkers"},4e3);if(e&&e.fetched){const t=e.payload;t&&t["WW.MyFeed"]&&(t[E.p.feedRequest]=t["WW.MyFeed"]),Object.assign(r,e.payload),Object.assign(i,e.payload)}}r.TimeToSendSecondaryPerfMarkers=Math.round(performance.now()),t&&t(),n||Promise.all([A(),(0,I.lr)()]).then((()=>{(0,D.J)(window,{isSecondaryBeacon:!0})}))}))}},63263:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var i=n(33940),r=n(61109),o=n(19388),a=n(65135),s=n(75559),c=n(32164),d=n(33379);function l(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(0,d.N)())return;e=e||{};let t=!1;const n=setTimeout((()=>{t=!0,(0,r.If)((e=>u(e)),o.oN.Primary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);(0,o.Nv)().then((e=>{t||u(e)}));const l=new c.o;return yield l.getResultAsync();function u(t){return(0,i.mG)(this,void 0,void 0,(function*(){n&&clearTimeout(n),a.M0.config.autoCaptureContentView=!0,a.M0.observeElementTree(document);const i=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();i||a.M0.scheduleContentViewEvent(s.NS.Load);const{contentViewTimeoutOverride:o,onBeforeNotifyCallback:c,reportEntityMetrics:d}=e;o&&a.M0.setContentViewTimeout(o),(0,r.sG)(t,{onAfterPageTimingsUpdated:c&&(()=>{c(t)}),disableLoadTimeEvent:i,reportEntityMetrics:d}),l.set()}))}}))}},97736:function(e,t,n){"use strict";n.d(t,{J:function(){return u},O:function(){return c}});var i=n(65135),r=n(22704),o=n(54533),a=n(98304),s=n(73713);const c={};let d=!1;function l(){c.primaryLoadTimeEventSent=!1,c.secondaryLoadTimeEventSent=!1,d=!1}function u(e,t={}){const{isSecondaryBeacon:n,reportEntityMetrics:s}=t,l=Object.assign({},n?(0,r.Y9)():(0,r.Ou)());d||!s&&!n||((0,o.Xn)(l),d=!0),Object.keys(l).length&&(n?c.primaryLoadTimeEventSent||(l.isPrimaryLoadTimeEventSent=!1):l.TimeToSendPrimaryPageTimings=Math.round(performance.now()),function t(){try{if(i.M0&&i.M0.getPageMetadata()){const e=(0,r.A1)()||{};if(n){if(c.secondaryLoadTimeEventSent)return;c.secondaryLoadTimeEventSent=!0}else{if(c.primaryLoadTimeEventSent)return;c.primaryLoadTimeEventSent=!0}i.M0.sendLoadTimeEvent({markers:l,deviceCapabilities:e});const t=(0,r.Ou)();t&&n&&(t.telemetryBeaconFireTime=Math.round(performance.now()))}else e.setTimeout(t,500)}catch(e){i.M0&&i.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.IU$),{message:"Unable to send load time event"}))}}())}l(),(0,s.U)(l)},94800:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var i=n(55067);class r{}r.voiceSearchLoaded=new i.C("VoiceSearchLoaded"),r.imageSearchLoaded=new i.C("ImageSearchLoaded")},22746:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var i=n(63439),r=n(94800);class o extends i.e{voiceSearchLoaded(){r.f.voiceSearchLoaded.getActionSender(this).send()}imageSearchLoaded(){r.f.imageSearchLoaded.getActionSender(this).send()}}},26540:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var i=n(30856),r=n(94800);class o{reduce(e,t){if(!e)return{voiceSearchIsLoaded:!1,imageSearchIsLoaded:!1};if(!t)return e;let n;return i.G.handleAction(t,r.f.voiceSearchLoaded,(()=>{n=Object.assign(Object.assign({},e),{voiceSearchIsLoaded:!0})})),i.G.handleAction(t,r.f.imageSearchLoaded,(()=>{n=Object.assign(Object.assign({},e),{imageSearchIsLoaded:!0})})),n||e}}},72358:function(e,t,n){"use strict";n.r(t),n.d(t,{ExperienceTrackerEdgeNextDataConnector:function(){return U},ExperienceTrackerEdgeNextDataReducer:function(){return _},ToolingInfo:function(){return H}});var i,r=n(33940),o=n(53899),a=n(53076),s=n(82890),c=n(83227),d=n(12108),l=n(68917),u=n(4734),p=n(53301),h=n(19388),g=n(2820);!function(e){e.VISUALLY_READY_WILL_FIRE="visuallyReadyWillFire",e.VISUALLY_READY_DID_FIRE="visuallyReadyDidFire",e.PAGE_REVEAL_START_WILL_FIRE="pageRevealStartWillFire",e.PAGE_REVEAL_START_DID_FIRE="pageRevealStartDidFire",e.PAGE_REVEAL_COMPLETE_WILL_FIRE="pageRevealCompleteWillFire",e.PAGE_REVEAL_COMPLETE_DID_FIRE="pageRevealCompleteDidFire"}(i||(i={}));var m=n(63439),f=n(55067);class v{}v.addVisuallyReadyDependencies=new f.C("AddVisuallyReadyDependencies"),v.markVisuallyReadyComplete=new f.C("MarkVisuallyReadyComplete");class y extends m.e{constructor(){super(...arguments),this.ttvrMarkers=[],this.getIncompleteVisualDependencies=()=>{const{visuallyReadyDependencies:e}=this.getCurrentState(),t=[];return e.forEach((e=>{e.visuallyReady||t.push(e.experienceType)})),t}}addVisuallyReadyDependencies(e){v.addVisuallyReadyDependencies.getActionSender(this).send(e),e.forEach((e=>{this.ttvrMarkers.push(e),(0,g.w)(e,!0)}))}registerVisuallyReadyObserver(){p.g.updateVisuallyReadyTiming.registerObserver((e=>{const t=e.params[0];if(!t)return;const{experienceType:n,endTime:i}=t;if(null!=i){this.getCurrentState().visuallyReadyDependencies.has(n)&&this.markVisuallyReadyComplete(n)}}))}registerMarkersIfNecessary(e,t,n=!1){if(!(this.ttvrMarkers&&0!==this.ttvrMarkers.length||e&&0!==e.length||t&&0!==t.length))return;const i={};i.TTVR=t?[...this.ttvrMarkers,...t]:this.ttvrMarkers,e&&(i.TTF=e),n&&(i.TTPR=[...this.ttvrMarkers],i.TTPR.push("OverlayRemoval")),(0,h.IO)(i)}registerSecondaryPerfMarkers(e){(0,h.Xl)(e)}registerFeedPerfMarker(e){(0,h.tW)(e)}markVisuallyReadyComplete(e){return(0,r.mG)(this,void 0,void 0,(function*(){const{visuallyReadyDependencies:t}=this.getCurrentState();if(t.get(e).visuallyReady)return;v.markVisuallyReadyComplete.getActionSender(this).send(e);for(const e of t.values())if(!e.visuallyReady)return;const n=(0,u.S0)();n&&(yield(0,u.FQ)(i.VISUALLY_READY_WILL_FIRE),performance.measure("VisuallyReady"),p.g.updateAboveTheFoldVisuallyReady.getActionSender(n).send(performance.now()),yield(0,u.FQ)(i.VISUALLY_READY_DID_FIRE))}))}}var S=n(93450);const C=()=>{const e=S._.getInstance().rootReducer.connectors().find((e=>e.namespace.indexOf("ExperienceTracker")>=0));if(!e)return null;const t=e.getCurrentState().visuallyReadyDependencies;return t&&0!==t.size?[...t.keys()]:null};var b=n(24676),w=n(17612),T=n(3900),k=n(45506),P=n(56692),A=n(15213),I=n(91470),E=n(85663),x=n(75384),M=n(82423),O=n(20126),L=n(33379);const D={eventType:l.Gg.aboveTheFoldVisuallyReady},R={eventType:l.Gg.visuallyReady},F={eventType:l.Gg.belowTheFoldTransitionStart},B="prg-gamingfeed",N=[w.IY.ENUS,w.IY.ENGB,w.IY.ENAU,w.IY.ENCA,w.IY.ENIN];class U extends y{constructor(e,t,n,i,r,o,a){super(e,t,n,i,r,o,a),this.initializePromise=this.initialize()}waitForInitialize(){return this.initializePromise}initialize(){var e,t;return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield(0,M.oU)(a.z.ChromiumPageSettings),i=yield n.getLayoutStateAsync();this.milestoneDataConnector=(0,u.S0)();const r=[],h=[],g=["TTF"],m=[s.p.searchBox];let{renderCacheConfig:f,feedContentSourceMap:v,enableWaterfallViewFeed:y}=this.config||{};f=f||{};const S=(0,T.$z)(),w=y&&("myFeed"===S||""===S)?c.x.waterfallViewFeed:c.x.gridViewFeed,U=!(0,E.isNullOrUndefined)(i.customBackgroundImageInfo)&&i.customBackgroundImageInfo.hasImage,$=i.imageOfTheDayEnabled&&i.currentBackgroundImageType!==o.HX.custom||i.currentBackgroundImageType===o.HX.custom&&U,_={eventType:l.Gg.visuallyReady,experienceType:c.x.commonSearchBoxEdgeNext};h.push(c.x.edgeChromiumPageWC),h.push(c.x.commonSearchBoxEdgeNext),i.quickLinksEnabled&&i.selectedQuickLinksDisplaySetting!==o.Z3.off&&h.push(c.x.topSitesEdgeNextWC),$&&h.push(c.x.backgroundImageWC),r.push((0,u.Qz)(_,c.x.topSitesEdgeNextWC)),r.push((0,u.Qz)(_,c.x.backgroundImageWC)),this.config.measureWatchTTVR&&h.push(c.x.watch);const H=(null===(e=null===k.Al||void 0===k.Al?void 0:k.Al.ClientSettings)||void 0===e?void 0:e.audienceMode)===d.F.Enterprise,W=(null===(t=null===k.Al||void 0===k.Al?void 0:k.Al.ClientSettings)||void 0===t?void 0:t.audienceMode)===d.F.Kids,j="always"===i.selectedFeedDisplaySetting||"peek"===i.selectedFeedDisplaySetting&&!H,G=v&&(0,I.f)(v)===o.iz.Office365,V=P.jG&&P.jG.CurrentRequestTargetScope&&P.jG.CurrentRequestTargetScope.os===O.Q.Xbox,q=(0,I.f)({gaming:o.iz.Gaming})===o.iz.Gaming,z=(0,I.f)({play:o.iz.Play})===o.iz.Play;if(j&&!W){const e=yield P.jG.unsupportedEnterpriseCloud;if(G&&!e)h.push(c.x.productivityHub),h.push(c.x.frequentSitesCardWC),h.push(c.x.calendarCard),h.push(c.x.todoCardWC),this.isFlightActive("prg-rmvemailcard-t")||h.push(c.x.nudgeSpotlightCard),h.push("FlagshipFeed.render"),r.push((0,u.Qz)(_,c.x.productivityHub));else if(V&&q)this.isFlightActive(B)||N.includes(P.jG.CurrentMarket)?h.push(c.x.gridViewFeed):h.push(c.x.xboxFeedWC);else if(z);else{const e=w;h.push(e),this.registerFeedPerfMarker(e),g.push("InfopaneFullyRendered");const t=(0,L.N)()&&window.ntpSSRData&&window.ntpSSRData.samAd;this.config.disableAdsPerfMarkers||t||(g.push(A.q.TimeToRequestAd),g.push(A.q.TimeToServeAd),g.push(A.q.ApiDuration),g.push(A.q.RenderReady),g.push(A.q.TimeToRenderAd))}}const Q={eventType:l.Gg.visuallyReady,experienceType:w},Z={eventType:l.Gg.visuallyReady,experienceType:c.x.xboxFeedWC},K={eventType:l.Gg.visuallyReady,experienceType:c.x.casualGamesLanding};let J,X,Y;switch(J=V&&q&&!this.isFlightActive(B)?Z:z?K:Q,i.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":r.push((0,u.Qz)(D,c.x.breakingNewsWC)),r.push((0,u.Qz)(D,c.x.superBreakingNews)),r.push((0,u.Qz)(F,c.x.cardActionWC));break;default:r.push((0,u.Qz)(D,c.x.breakingNewsWC)),r.push((0,u.Qz)(D,c.x.superBreakingNews)),r.push((0,u.Qz)(J,c.x.cardActionWC))}if(j?(X=_,Y=G?D:J):(X=D,Y=D),this.config.delayLoadPoweredByLegend){const e=j?D:F;r.push((0,u.Qz)(e,c.x.poweredByLegendWC))}const ee=[c.x.articleFre,c.x.autosCarousel,c.x.autosMarketplaceCard,c.x.casualGamesCard,c.x.channelFilterCard,c.x.companyNewsCard,c.x.contentGroupCard,c.x.digestCard,c.x.entertainmentPremierCard,c.x.esportsCard,c.x.esportsStreamsCard,c.x.followingFreFullWidth,c.x.gamingCompeteCard,c.x.gamingDiscoverStrip,c.x.gamingGamerModeUpsellCard,c.x.gamingMatchCard,c.x.gamingMediaCarousel,c.x.gamingPersonalizationCard,c.x.gamingRecentlyPlayedCard,c.x.gamingRecommendedCard,c.x.gamingRedditCard,c.x.gamingRewardsCard,c.x.gamingStreamCard,c.x.gamingTournamentCard,c.x.gamingUpcomingCard,c.x.gamingVideoCard,c.x.generalElections,c.x.horoscopeAnswerCardWC,c.x.hotListCard,c.x.mangaCard,c.x.moneyInfoCardWC,c.x.newsGroupsCard,c.x.onThisDayCardWC,c.x.prayerTimesCard,c.x.prismCarouselCard,c.x.prismSdCard,c.x.qna,c.x.realEstateCard,c.x.recommendedSearchesCard,c.x.rewardsDailySetCard,c.x.shoppingCardWC,c.x.shoppingEdgeInsightsCard,c.x.shoppingEventsDealCard,c.x.shoppingSdCard,c.x.shoppingVerticalListsCard,c.x.sportsCardWC,c.x.sportsOlympicCardWC,c.x.sportsWorldCupCardWC,c.x.spotlightCardWC,c.x.travelDestination,c.x.travelSdThemesCard,c.x.trendingNowWC,c.x.trendingSearchCard,c.x.videoShoppingCard,c.x.videoShoppingCarouselCard,c.x.weatherCardWC];for(const e of ee)r.push((0,u.Qz)(X,e));const te=[c.x.articleRelatedStories,c.x.articleTopComment,c.x.backgroundGallery,c.x.coachmarkWC,c.x.conditionalBannerWC,c.x.dailyBriefWC,c.x.devTools,c.x.dailyDiscovery,c.x.feedbackLinkWC,c.x.interestFreCard,c.x.locationMarker,c.x.signInControlWC,c.x.signInFlyoutWC,c.x.msRewardsWC,c.x.mobileAppUpsell,c.x.nextdoorCard,c.x.officeCoachmark,c.x.officeLeftRail,c.x.personalizeNavButton,c.x.pillWC,c.x.promoBanner,c.x.socialAvatar,c.x.socialBarWC,c.x.superCoachMarkWC,c.x.superNavCoachMark,c.x.viewsNativeAd,c.x.waffleWC,c.x.welcomeGreetingLight,c.x.commonSettingsEdgeNext,c.x.marketLanguageToggleWC,c.x.testBingNudge,c.x.feedLevelFeedbackWC,c.x.codexBingChat,c.x.channelSuggestedSidebar,c.x.publisherSubscribeFollowButton,c.x.contextualFeedbackWC,c.x.bingIntlUpsell];this.config.disableDelayLoadNotification||te.push(c.x.notificationBellWC),this.config.disableDelayLoadRecommendedSites||te.push(c.x.recommendedSitesWC);for(const e of te)r.push((0,u.Qz)(Y,e));if(this.config&&this.config.delayLoadStickyPeek){const e=c.x.commonSettingsEdgeNext,t={eventType:l.Gg.rendered,experienceType:e};r.push((0,u.Qz)(t,c.x.stickyPeek))}r.push((0,u.Qz)(D,c.x.toastWC)),r.push((0,u.Qz)(D,c.x.voiceSearchWC)),r.push((0,u.Qz)(D,c.x.imageSearchWC)),r.push((0,u.Qz)(D,c.x.searchHistoryEdgeNextWC)),r.push((0,u.Qz)(D,c.x.newsHeadlineBelowSearchbox)),r.push((0,u.Qz)(D,c.x.recommendedSearchCarouselWC)),r.push((0,u.Qz)(D,c.x.coldStart)),r.push((0,u.Qz)(R,c.x.edgeShopping)),this.addVisuallyReadyDependencies(h);const ne=P.jG&&P.jG.CurrentRequestTargetScope&&P.jG.CurrentRequestTargetScope.pageType==d.G.DHP?this.config.entireRiverStaleMinutes:this.config.dhpEntireRiverStaleMinutes,ie=this.disableFeedPrerender();if((0,b.Vx)(ie),(0,x.Qc)(C(),this.config.prerenderForceRefresh,ne,this.config.sdCardStaleMinutes,ie),this.registerSecondaryPerfMarkers(g),(0,L.N)()){const e=(null===window||void 0===window?void 0:window.isSSREnabled)?r.filter((e=>e.deferralInfo!==D&&e.deferralInfo!==_&&e.deferralInfo!==J)):r;p.g.updateExperienceLoadDeferralState.getActionSender(this.milestoneDataConnector).send(e)}this.registerVisuallyReadyObserver(),this.registerMarkersIfNecessary([s.p.searchBox],m,k.Al.IsPrerender)}))}isFlightActive(e){var t;return!!(null===(t=null===k.Al||void 0===k.Al?void 0:k.Al.CurrentFlightSet)||void 0===t?void 0:t.has(e))}disableFeedPrerender(){return!(!(null===k.Al||void 0===k.Al?void 0:k.Al.IsPrerender)||this.config.noDisablePrerenderFeed)&&((0,b.Tr)()||this.config.disableFeedPrerender||this.isFlightActive("prg-prerendoff")&&(0,b.Xq)())}}var $=n(30856);class _{reduce(e,t){if(!e)return{visuallyReadyDependencies:new Map};if(!t)return e;let n=!1;const i=Object.assign({},e);return n=n||$.G.handleAction(t,v.addVisuallyReadyDependencies,(e=>{e&&e.forEach((e=>{e&&!i.visuallyReadyDependencies.has(e)&&i.visuallyReadyDependencies.set(e,{experienceType:e,visuallyReady:!1})}))})),n=n||$.G.handleAction(t,v.markVisuallyReadyComplete,((e,t)=>{if(e){const t=i.visuallyReadyDependencies.get(e);t&&(t.visuallyReady=!0,"GridViewFeed"===e&&(0,x.Bj)())}})),n?i:e}}const H={experienceConfigSchema:{}}},58958:function(e,t,n){"use strict";n.d(t,{S:function(){return o},Y:function(){return r}});var i=n(56692);function r(){var e,t;if(!(null===window||void 0===window?void 0:window.matchMedia))return;const n=null===(t=null===(e=(0,i.Yq)().WidgetAttributes)||void 0===e?void 0:e.propertyBag)||void 0===t?void 0:t.theme;if(n)return"dark"===n;const r=window.matchMedia("(prefers-color-scheme: dark)");return r?!!r.matches:void 0}function o(e){return!(!(null==e?void 0:e.useMobile)||!(null==e?void 0:e.isDarkModeForMobile))}},18544:function(e,t,n){"use strict";n.d(t,{P5:function(){return d},Ve:function(){return c},Yw:function(){return s},dw:function(){return a},m0:function(){return o}});var i=n(33442),r=n(92531);const o="#000000",a="#FFFFFF",s=(0,i.l$)((()=>o))(r.ZP),c=(0,i.s5)((()=>o))(r.ZP),d=(0,i.$B)((()=>a))(r.ZP)},14989:function(e,t,n){"use strict";n.d(t,{K$:function(){return i},SX:function(){return p},eH:function(){return v},hg:function(){return l},q7:function(){return d},vW:function(){return f}});var i,r=n(14165),o=n(27003),a=n(62371),s=n(42166);!function(e){e.c1="c1",e.c2="c2",e.c3="c3",e.c4="c4",e.c5="c5"}(i||(i={}));const c="__minViewportWidthOverrides__";function d(e){o.Gq.set(c,e)}function l(){if(a.p.fiveColSupported()&&4===p.length){const e=new u(i.c5,r.sc);p.push(e),h[i.c5]=e}}class u{constructor(e,t,n){this.arrangement=e,this.contentSizePx=t,this.isFirstBreakpoint=n}get minViewportWidthPx(){if(this.isFirstBreakpoint)return 0;const e=o.Gq.get(c);if(e){const t=e.get(this.arrangement);if(t)return t}return this.contentSizePx+g}}const p=[new u(i.c1,r.xs,!0),new u(i.c2,r._3),new u(i.c3,r.Xn),new u(i.c4,r.xX)];a.p.fiveColSupported()&&p.push(new u(i.c5,r.sc));const h={};for(const e of p)h[e.arrangement]=e;const g=32;!function(){var e;const t=[0];for(let n=1;n<p.length;n++)t.push(null===(e=p[n])||void 0===e?void 0:e.minViewportWidthPx)}();function m(e,t){var n;const i=[];if(e){const t=h[e],n=null==t?void 0:t.minViewportWidthPx;n>0&&i.push(`(min-width: ${(0,s.a)(n)})`)}if(t){const e=h[t],r=p.indexOf(e);r<p.length-1&&i.push(`(max-width: ${(0,s.a)((null===(n=p[r+1])||void 0===n?void 0:n.minViewportWidthPx)-1)})`)}return i.join(" and ")}function f(e,t){const n=m(e,t);return n?"@media "+n:""}function v(e){return f(e,e)}},51953:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});const i=1<<24,r=/\s+/g;const o=new class{rgbNumberToCssHexColor(e){let t=null;return"number"==typeof e&&e>=0&&e<i&&(t=this.rgbNumberToCssHexColorCore(e)),t}parseColor(e){if(e)return this.parseHexColor(e)||this.parseRgbaColor(e)}parsedColorToNumber(e,t){return e&&e.r<<16|e.g<<8|e.b||t}grayScale(e){const t=e.r,n=e.g,i=e.b;return this.isValidColorValue(t)&&this.isValidColorValue(n)&&this.isValidColorValue(i)?Math.min(255,Math.round(.299*t+.587*n+.114*i)):255}isValidColorValue(e){return!isNaN(e)&&null!=e&&e>=0&&e<=255}rgbNumberToCssHexColorCore(e){return"#"+(i|e).toString(16).slice(1)}parseHexColor(e){const t=e&&e.replace("#",""),n=parseInt(t,16);if(isNaN(n))return null;const i=t.length;return 3===i?{r:17*(n>>8),g:17*(n>>4&15),b:17*(15&n),a:1}:6===i||8===i?{r:n>>16&255,g:n>>8&255,b:255&n,a:6===i?1:(n>>24&255)/255}:null}parseRgbaColor(e){if(!e)return null;const t=e.replace(r,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/);if(t){const e=t[4];return{r:this.normalizeColor(t[1],255,!0),g:this.normalizeColor(t[2],255,!0),b:this.normalizeColor(t[3],255,!0),a:e?this.normalizeColor(e,1,!1):1}}return null}normalizeColor(e,t,n){let i=parseFloat(e);return isNaN(i)?0:(i=e.indexOf("%")>=0?Math.max(0,Math.min(100,i))*t/100:Math.max(0,Math.min(t,i)),n?Math.round(i):Math.round(100*i)/100)}}},14165:function(e,t,n){"use strict";n.d(t,{Xn:function(){return o},_3:function(){return r},gf:function(){return l},iN:function(){return d},jU:function(){return u},lE:function(){return p},sc:function(){return s},xX:function(){return a},xs:function(){return i}});const i=300;let r=624,o=948,a=1272,s=1596,c=null,d=24;const l=2200;function u(e){d=e;const t=function(e){return{Size1ColumnWidth:i,Size2ColumnWidth:2*i+e,Size3ColumnWidth:3*i+2*e,Size4ColumnWidth:4*i+3*e,Size5ColumnWidth:5*i+4*e,Size6ColumnWidth:6*i+5*e}}(e);c=t.Size6ColumnWidth,s=t.Size5ColumnWidth,a=t.Size4ColumnWidth,o=t.Size3ColumnWidth,r=t.Size2ColumnWidth}function p(){d=24,r=624,o=948,a=1272,s=1596,c=1900}},88828:function(e,t,n){"use strict";n.d(t,{Bn:function(){return u},sZ:function(){return g},vi:function(){return h}});var i=n(14989),r=n(80329),o=n(20654),a=n(44979),s=n(33379),c=n(27003);const d="__FastBreakpointManager__";class l{constructor(e){this.useRequestIsolatedTracker=!1,this.callbackMap=new Map,this.refreshBreakpoints(e)}get currentColumnArrangement(){return this.indexToStandardConverter(this.breakpointTracker.currentBreakpoint())}refreshBreakpoints(e){var t;const n=[0];(0,i.hg)();for(let e=1;e<i.SX.length;e++)n.push(null===(t=i.SX[e])||void 0===t?void 0:t.minViewportWidthPx);this.breakpointTracker.breakpoints=n,this.breakpointTracker.defaultBreakpoint=void 0!==e?(0,a.Nd)(e.data.breakpoint,"breakpoint"):0}set breakpoints(e){if(this.breakpointTracker.breakpoints=e,r.R1&&Array.isArray(r.R1)){const t=r.R1.length;for(let e=0;e<t;e++)r.R1.pop();e.forEach((e=>r.R1.push(e)))}}get breakpoints(){return this.breakpointTracker.breakpoints}updateBreakpointsBasedFromContainerWidth(e){if(e>=i.SX[3].contentSizePx)return;const t=[];for(let n=0;n<this.breakpoints.length;n++)(0===n||e>=i.SX[n].contentSizePx)&&t.push(i.SX[n].contentSizePx);this.breakpoints=t}subscribe(e){const t=t=>{e(this.indexToStandardConverter(t))};this.callbackMap.set(e,t),this.breakpointTracker.subscribe(t)}unsubscribe(e){this.breakpointTracker.unsubscribe(this.callbackMap.get(e)),this.callbackMap.delete(e)}indexToStandardConverter(e=0){return i.SX&&e>=i.SX.length&&i.SX[i.SX.length-1]?i.SX[i.SX.length-1].arrangement:i.SX[e].arrangement}get breakpointTracker(){return!(0,s.N)()&&this.useRequestIsolatedTracker?c.Gq.get("__FastBreakpointManager_breakpointTracker__",(()=>new o.Z.constructor)):o.Z}}const u=(e,t)=>(t&&c.Gq.set(d,new l(e)),c.Gq.get(d,(()=>new l(e)))),p="__FastBreakpointManager_viewType__",h=()=>{let e=null;switch(u().currentColumnArrangement){case i.K$.c1:e="size1column";break;case i.K$.c2:e="size2column";break;case i.K$.c3:e="size3column";break;case i.K$.c4:e="size4column";break;case i.K$.c5:e="size5column";break;default:return c.Gq.get(p,(()=>null))}return c.Gq.set(p,e),e};function g(e){var t;return e&&(null===(t=u())||void 0===t?void 0:t.breakpoints[e])||0}},92402:function(e,t,n){"use strict";n.d(t,{$L:function(){return y},Bg:function(){return c},NU:function(){return f},ZH:function(){return p},_U:function(){return l},bE:function(){return g},iA:function(){return d},l_:function(){return h},po:function(){return v},zb:function(){return S}});var i=n(33940),r=n(22704),o=n(32164),a=n(33379);const s="defer-hydration",c="needs-hydration",d=window.location.search.includes("ssrhydrateperf"),l=new Map,u=e=>t=>{if(!t.hasAttribute(e))return Promise.resolve();const n=new o.o;return new MutationObserver(((i,r)=>{t.hasAttribute(e)||(n.set(),r.disconnect())})).observe(t,{attributeFilter:[e]}),n.getResultAsync()},p=u(s),h=u(c),g=(e,t=!1)=>{if(!(0,a.N)())return{start:()=>{},markEnd:()=>{}};const n=`${e}.start`;return{start:()=>null===performance||void 0===performance?void 0:performance.mark(n),markEnd:(i="end",o=t)=>{const a=`${e}.${i}`;null===performance||void 0===performance||performance.mark(a),null===performance||void 0===performance||performance.measure(`${e}.${i}:duration`,n,a),o&&((0,r.Ou)()[`${e}.${i}:duration`]=null===performance||void 0===performance?void 0:performance.getEntriesByName(`${e}.${i}:duration`)[0].duration)}}};let m=new Set;const f=e=>m=new Set(e.map((e=>e.toLocaleLowerCase()))),v=e=>{l.clear(),e.forEach((e=>{l.set(e.toLocaleLowerCase(),{selfHydrationComplete:new o.o,topDownHydrateComplete:new o.o})}))},y=e=>{e.forEach((e=>{var t,n;const i=e.toLocaleLowerCase();null===(t=l.get(i))||void 0===t||t.selfHydrationComplete.set(),null===(n=l.get(i))||void 0===n||n.topDownHydrateComplete.set()}))};function S(e,t){var n;return(0,i.mG)(this,void 0,void 0,(function*(){null==t||t.start(),e.removeAttribute(s),yield h(e).then((()=>null==t?void 0:t.markEnd("selfHydrationComplete")));const i=e.tagName.toLocaleLowerCase();null===(n=l.get(i))||void 0===n||n.selfHydrationComplete.set();const r=Promise.all(((e,t)=>{const n=Array.from(e.querySelectorAll(t));return e.shadowRoot?n.concat(Array.from(e.shadowRoot.querySelectorAll(t))):n})(e,"*[defer-hydration]").map(((t,n)=>{let i;const r=t.tagName.toLocaleLowerCase();return m.has(r)?i=g(`${r}:hydration`,!0):d&&(i=g(`${e.tagName.toLocaleLowerCase()}>${r}[${n}]`,!1)),S(t,i)})));return r.then((()=>{var e;null==t||t.markEnd("topDownHydrateComplete"),null===(e=l.get(i))||void 0===e||e.topDownHydrateComplete.set()}))}))}},81765:function(e,t,n){"use strict";n.d(t,{Bs:function(){return g},E7:function(){return h},EH:function(){return m},Eg:function(){return p},Lr:function(){return i},S7:function(){return u},WX:function(){return f},Wi:function(){return l},ZG:function(){return s},d5:function(){return r},hE:function(){return o},il:function(){return c},kO:function(){return y},mw:function(){return v},pt:function(){return a},yV:function(){return d}});const i={PrivacyUrl:"https://go.microsoft.com/fwlink/?LinkID=286759",SamDomain:"https://srtb.msn.com/",SamEndpoint:"auction",SamOpenRtbEndpoint:"auctionopenrtb",AppId:"msnappid",PublisherId:"msn",Ecasession:"init",RiverRegion:"river",RiverDoubleWide:"river-dbl",RiverHalfTextOnly:"river-half-textonly",RiverHalf:"river-half",ReservedRiver:"resriver",UserOptOut:"userOptOut",UserOptOutOptions:"userOptOutOptions",DefaultPartnerCookieSyncTimeout:500,BulkCookieSyncTimeout:1e3,WaitForAdResponseAfterWPOResponseTimeout:1500,DefaultContentServiceBaseUrl:"https://assets.msn.com/content/",WaitForAdResponseToRenderAdsEarly:700,SamOpenRTBMinTimeout:800},r={river:"oneriver.main",infopane:"oneriver.spartan.infopane","infopane-tab":"oneriver.spartan.tabinfopane",rivert:"oneriver.maint"},o={BeaconFormatDecoded:"decoded",BeaconFormatEncoded:"encoded",BeaconTypeAdServed:"adserved",BeaconTypeClick:"click",BeaconTypeJsTracker:"jsTracker",BeaconTypeVisibility:"visibility",BeaconTypeVideoProgress:"videoProgress",StartEvent:"start",FirstQuartileEvent:"firstquartile",ThirdQuartileEvent:"thirdquartile",MidPointEvent:"midpoint",CompleteEvent:"complete",ProgressEvent:"progress",UserActionEvent:"userAction"};var a;!function(e){e.Click="click",e.Ready="ready",e.Play="play",e.Pause="pause",e.Ended="ended",e.Telemetry="telemetry",e.VolumeChange="volumechange",e.TimeUpdate="timeupdate",e.Error="error",e.CanPlay="canplay",e.CanPlayThrough="canplaythrough"}(a||(a={}));const s={CMSListServiceUrl:"v1/cms/api/amp/Document/",CMSContentServiceURl:"view/v1/Preview/",DefaultProviderName:"Microsoft"},c={ContentType:"application/json",Method:"POST",CacheControl:"no-cache",Skipsessioncall:"false",ContentTypeKey:"Content-Type",FlightIdKey:"x-ms-flightId",CacheControlKey:"Cache-Control",ClientIdKey:"X-MSEdge-ClientID",MarketKey:"X-MSEdge-Market",AuthCookieNameKey:"x-ms-authCookieName",Timeout:3e3,BCPCookieKey:"BCP",UserAgent:"User-Agent"},d={MSAOptOut:"msaoptout",BrowserOptOut:"TOptOut",AppAnonCookieExist:"aace",TaboolaSessionCookieName:"ecasession",CookieDomain:"msn.com",AnonCookieName:"ANON",LiverampEnvelopeId:"adslrid"},l={"de-de":"BBGgbuP","en-gb":"BBI4NMr","en-us":"BBI4MeJ","it-it":"BBH0fea","de-at":"BBIbKRf","de-ch":"BBH6mkD","pl-pl":"BBGgsgw","tr-tr":"BBH3vBx","es-es":"BBGdmuQ","en-au":"BBGfT6j","es-ar":"BBH69zf","es-cl":"BBH6qTU","es-co":"BBH3TQV","es-pe":"BBIbVzn","es-mx":"BBGg7xs","pt-br":"BBI4jJ6","en-ca":"BBI4FN9","he-il":"BBIbHNd","fr-ch":"BBIfDNl","nl-be":"BBH6zcN","fr-be":"BBIclrE","fr-fr":"BBI4XBF","nl-nl":"BBGgoUg","pt-pt":"BBH3qlj","zh-cn":"BBPRWnl","ja-jp":"AAvs5xw","ko-kr":"AAvrTXp","en-xl":"AAxzSQi","es-us":"AAuAfA8","fr-ca":"BBH6Awm","es-xl":"BBIfH5i","cs-cz":"BBPwecC","da-dk":"BBGKGmb","el-gr":"BBIc8WA","fi-fi":"BBH6Cse","hu-hu":"BBPw6XX","nb-no":"BBI4EVt","ru-ru":"BBH3gvW","sv-se":"BBH3vHp","ar-ae":"BBIf1cG","ar-eg":"BBIcggw","ar-sa":"BBIc6wN","en-ae":"BBIbBRO","en-ie":"BBIclgh","en-za":"BBIc5NR","en-in":"BBGeThK","en-sg":"BBIfqX9","en-nz":"BBIc483","zh-hk":"BBIbPBb","hi-in":"BBH85g2","mr-in":"BBU7J93","te-in":"BBU7JcP","bn-in":"BBU7Qw4","id-id":"BBIc9Ls","th-th":"BBIbPH4","vi-vn":"BBIcbQS","es-ve":"BBIcaTp","fr-xl":"AAD4nFo","en-my":"BBIclH7","en-ph":"BBIcbaP","zh-tw":"BBH3qpv"},u={"de-de":"Anzeige","en-gb":"Ad","en-us":"Ad","it-it":"Ann.","de-at":"Anzeige","de-ch":"Anzeige","pl-pl":"Reklama","tr-tr":"R","es-es":"Publicidad","en-au":"Ad","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Publicidade","en-ca":"Ad","he-il":"","fr-ch":"Sponsoris","nl-be":"Advertentie","fr-be":"Sponsoris","fr-fr":"Sponsoris","nl-nl":"Advertentie","pt-pt":"Pub","zh-cn":"","ja-jp":"PR","ko-kr":"AD","en-xl":"Ad","es-us":"Patrocinado","fr-ca":"Pub","es-xl":"Patrocinado","cs-cz":"Reklama","da-dk":"Annonce","el-gr":"Ad","fi-fi":"Mainos","hu-hu":"Hird.","nb-no":"Annonse","ru-ru":"","sv-se":"Annons","ar-ae":"","ar-eg":"","ar-sa":"","en-ae":"Ad","en-ie":"Ad","en-za":"Ad","en-in":"Ad","en-sg":"Ad","en-nz":"Ad","zh-hk":"","hi-in":"","mr-in":"","te-in":"","bn-in":"","id-id":"Ad","th-th":"Ad","vi-vn":"Ad","es-ve":"Patrocinado","fr-xl":"Sponsoris","en-my":"Ad","en-ph":"Ad","zh-tw":""},p=["ja-jp","ko-kr","zh-cn"],h={MyFeedPivotId:"oneriver.myfeed",StripeMyFeedPivotId:"stripe.myfeed",EditInterestPivotId:"oneriver.editinterests"};var g;!function(e){e[e.AdBuffering=1]="AdBuffering",e[e.ContentBuffering=2]="ContentBuffering",e[e.AdError=10]="AdError",e[e.AdPlayStarted=11]="AdPlayStarted",e[e.AdPlayCompleted=13]="AdPlayCompleted",e[e.AdSkipped=15]="AdSkipped",e[e.AdTimeout=16]="AdTimeout",e[e.AdPause=17]="AdPause",e[e.AdResume=18]="AdResume",e[e.ContentError=20]="ContentError",e[e.ContentStart=21]="ContentStart",e[e.ContentContinue=22]="ContentContinue",e[e.ContentComplete=23]="ContentComplete",e[e.CC=30]="CC",e[e.Pause=31]="Pause",e[e.Seek=32]="Seek",e[e.Mute=33]="Mute",e[e.FullScreenEnter=34]="FullScreenEnter",e[e.Info=35]="Info",e[e.VideoQuality=36]="VideoQuality",e[e.Resume=37]="Resume",e[e.FullScreenExit=38]="FullScreenExit",e[e.Replay=39]="Replay",e[e.Unmute=40]="Unmute",e[e.ContentImpression3PP=41]="ContentImpression3PP",e[e.Facebook=51]="Facebook",e[e.Twitter=52]="Twitter",e[e.Email=53]="Email",e[e.CommonPlayerImpression=61]="CommonPlayerImpression",e[e.EndslateVideos=64]="EndslateVideos",e[e.EndslateContinuous=65]="EndslateContinuous",e[e.EndslateCancelCountdown=66]="EndslateCancelCountdown",e[e.EndslateShown=67]="EndslateShown",e[e.PlayerStarting=90]="PlayerStarting",e[e.AdLoading=91]="AdLoading",e[e.AdLoaded=92]="AdLoaded",e[e.VideoLoading=93]="VideoLoading",e[e.ContentOpen=101]="ContentOpen",e[e.Content25Percent=102]="Content25Percent",e[e.Content50Percent=103]="Content50Percent",e[e.Content75Percent=104]="Content75Percent",e[e.Canplay=105]="Canplay",e[e.Canplaythrough=106]="Canplaythrough"}(g||(g={}));const m=["en-it","de-at","fr-be","nl-be","cs-cz","da-dk","fi-fi","fr-fr","de-de","el-gr","hu-hu","it-it","nl-nl","no-no","pl-pl","pt-pt","es-es","sv-se","de-ch","de-fr","en-gb"],f=["cs-cz","da-dk","de-at","de-ch","de-de","en-gb","el-gr","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-br","pt-pt","ru-ru","sv-se","tr-tr","zh-cn"],v=["en-us","es-us"],y=["en-au","en-nz"]},29666:function(e,t,n){"use strict";n.d(t,{SI:function(){return o},di:function(){return r},hb:function(){return i},j3:function(){return s}});const i={_lowerBound:"invalid",_1by191:"1x1.91",_9by16:"9x16",_3by4:"3x4",_1by1:"1x1",_4by3:"4x3",_16by9:"16x9",_191by1:"1.91x1"};var r,o,a;!function(e){e.Adult="adult",e.Enterprise="enterprise"}(r||(r={})),function(e){e.AdFeedV2="feedv2-template",e.Default="msft-content-card",e.PatternOverlay="msn-pattern-overlay-card",e.PseudoVideo="msn-pseudo-video-card",e.Slideshow="msn-slideshow-card",e.ZIndex="msn-z-index-card",e.AdCarousel="msn-ad-carousel",e.AnimatedImagery="msn-animated-imagery",e.InfopaneHorizontal_1by1="msn-info-pane-horizontal-1-by-1",e.InfopaneHorizontal_3by4="msn-info-pane-horizontal-3-by-4",e.InfopaneHorizontal_4by3="msn-info-pane-horizontal-4-by-3",e.InfopaneHorizontal_9by16="msn-info-pane-horizontal-9-by-16",e.InfopanePatternOverlay_1by1="msn-info-pane-pattern-overlay-1-by-1",e.InfopanePatternOverlay_4by3="msn-info-pane-pattern-overlay-4-by-3",e.InfopaneDoubleCard_19by10="msn-card-19-by-10",e.RiverAnimatedImagery_9by16="msn-river-animated-imagery-9-by-16",e.RiverZIndex_9by16="msn-river-z-index-9-by-16",e.RiverZIndex_3by4="msn-river-z-index-3-by-4",e.HotspotSingle="msn-hotspot-single",e.BrandStory="msn-brand-story",e.CallToAction="msn-ad-cta",e.CallToActionLearnMore="msn-ad-cta-learn-more",e.CallToActionDarkMode="msn-ad-cta-learn-more-dark-mode",e.CallToActionIcon="msn-ad-cta-icon",e.CallToActionShortTitle="msn-ad-cta-short-title",e.CallToActionMaskMode="msn-ad-cta-mask-mode",e.ContentReveal="msn-content-reveal",e.DiscountScribble="msn-discount-scribble",e.BrandStoryNoDeco="msn-brand-story-no-deco",e.BrandStoryNoProgressiveDisplay="msn-brand-story-no-progressive-display",e.Gamification="msn-gamification",e.HighlightRating="msn-highlight-rating-card",e.DecorationDynamic="msn-decoration-dynamic",e.TitleMaxLine2="msn-title-max-line-2",e.TitleMaxLine2C="msn-title-max-line-2-c",e.InfopaneDynamicRendering="msn-info-pane-dynamic-rendering",e.Logo="msn-native-ad-logo",e.LogoWithBorderRadius="msn-native-ad-logo-radius",e.ShortTitle="msn-native-ad-short-title",e.Spotlight="msn-spotlight-image",e.Disclaimer="msn-ad-disclaimer",e.ZIndexV2Original="msn-ad-zindex-v2-original",e.ZIndexV2Polygon="msn-ad-zindex-v2-polygon",e.AdSlugV3="msn-ad-slug-v3",e.AdSlugV4="msn-ad-slug-v4",e.DrPerf="msn-ad-dr-perf",e.Video="msn-video",e.VideoIAS="msn-video-ias",e.Amplify="msn-amplify",e.SpecialOfferNonDR="msn-special-offer-nondr",e.SpecialOfferNonDRWithExp="msn-special-offer-nondr-with-exp",e.RatingHighlightRedNonDR="msn-highlight-rating-nondr-red",e.RatingHighlightYellowNonDR="msn-highlight-rating-nondr-yellow",e.RatingHighlightYellowNonDRStatic="msn-highlight-rating-nondr-yellow-static",e.RatingDefaultYellowNonDRStatic="msn-default-rating-nondr-yellow-static",e.FreeShippingPlainTextNonDR="msn-freeshipping-plain-text-nondr",e.FreeShippingInlineNonDR="msn-freeshipping-inline-nondr",e.FreeShippingTopLeftNonDR="msn-freeshipping-top-left-nondr",e.FreeShippingTopRightNonDR="msn-freeshipping-top-right-nondr",e.FreeShippingDR="msn-freeshipping-dr",e.ConditionNonDR="msn-condition-nondr",e.ConditionNonDRControl="msn-condition-nondr-c",e.ReturnPolicyNonDR="msn-return-policy-nondr",e.ReturnPolicyNonDRControl="msn-return-policy-nondr-c",e.SoldNonDR="msn-sold-nondr",e.SoldNonDRControl="msn-sold-nondr-c",e.EliteBadge="msn-elite-badge",e.RatingDR="msn-rating-dr",e.Trending="msn-trending",e.LikeButton="msn-like-button",e.SaleHighlightV1="msn-sale-highlight-v1",e.SaleHighlightV1Control="msn-sale-highlight-v1-c",e.SaleHighlightV3="msn-sale-highlight-v3",e.SaleHighlightV4="msn-sale-highlight-v4",e.SaleHighlightV3V4Control="msn-sale-highlight-v3v4-c",e.ShortTitleControl="msn-short-title-c",e.SpecialOfferControl="msn-special-offer-c",e.LogoControl="msn-logo-c",e.FreeShippingControl="msn-freeshipping-c",e.ZIndexControl="msn-z-index-c",e.RatingControl="msn-rating-c",e.TrendingControl="msn-trending-c",e.CallToActionControl="msn-cta-c",e.HoverEffectControl="msn-hover-effect-c",e.HoverEffect="msn-hover-effect",e.ComboRating="msn-combo-rating",e.ComboFreeShipping="msn-combo-freeshipping",e.ComboSpecialOffer="msn-combo-special-offer",e.ComboRatingNonDR="msn-combo-rating-nondr",e.ComboFreeShippingNonDR="msn-combo-freeshipping-nondr",e.ComboSpecialOfferNonDR="msn-combo-special-offer-nondr",e.ComboSaleHighlightNonDR="msn-combo-sale-highlight-nondr",e.ComboRatingNonDRControl="msn-combo-rating-nondr-c",e.ComboFreeShippingNonDRControl="msn-combo-freeshipping-nondr-c",e.ComboSpecialOfferNonDRControl="msn-combo-special-offer-nondr-c",e.ComboSaleHighlightNonDRControl="msn-combo-sale-highlight-nondr-c",e.CallToActionV2="msn-call-to-action-v2",e.CallToActionV3="msn-call-to-action-v3",e.CallToActionV3PA="msn-call-to-action-v3-pa",e.PESeasonalAds="msn-pe-seasonal",e.PESeasonalAdsV1="msn-pe-seasonal-v1",e.PESeasonalAdsV1P="msn-pe-seasonal-v1p",e.PESeasonalAdsControl="msn-pe-seasonal-control",e.ComboSoldNonDR="msn-combo-sold-nondr",e.ComboReturnPolicyNonDR="msn-combo-return-policy-nondr",e.ComboConditionNonDR="msn-combo-condition-nondr",e.ComboSoldNonDRControl="msn-combo-sold-nondr-c",e.ComboReturnPolicyNonDRControl="msn-combo-return-policy-nondr-c",e.ComboConditionNonDRControl="msn-combo-condition-nondr-c",e.ResponsiveImageSizing="msn-responsive-image-sizing",e.ResponsiveDescription="msn-responsive-description",e.GeometricAdWaves1="msn-geometric-ad-waves-1",e.GeometricAdWaves3="msn-geometric-ad-waves-3",e.GeometricAdWaves4="msn-geometric-ad-waves-4",e.GeometricAdNature3="msn-geometric-ad-nature-3",e.GeometricAdSparkles1="msn-geometric-ad-sparkles-1",e.GeometricAdSparkles2="msn-geometric-ad-sparkles-2",e.GeometricAdSparkles3="msn-geometric-ad-sparkles-3",e.GeometricAdSparkles4="msn-geometric-ad-sparkles-4",e.GeometricAdSparkles5="msn-geometric-ad-sparkles-5",e.GPTTitle="msn-native-ad-gpt-title",e.AlignmentRF="msn-native-ad-align-rf",e.AIImg="msn-native-ad-ai-img"}(o||(o={})),function(e){e.ScaleUp="scale-up",e.ScaleDown="scale-down",e.ScaleUpDown="scale-up-down"}(a||(a={}));const s={templateType:o.Default,animatedImage:"",landscapeOverlay:!1,allowedAssets:null,nativeAdMode:r.Adult,adCarousel:!1,progressiveDisplay:!1,discountThreshold:1,imageSizeConfig:{infopane:{w:604,h:296},river:{w:300,h:174}},badgeStyle:"blendedIn",useClickInGamify:!0,configType:void 0}},88875:function(e,t,n){"use strict";n.d(t,{XY:function(){return c},aT:function(){return s},bZ:function(){return i},fs:function(){return l},g2:function(){return r},hy:function(){return o},ih:function(){return a},xs:function(){return d}});const i=["HotelAd"],r={city:"location.svg"},o=Object.assign(Object.assign({},{img:{required:1,img:{type:3}},title:{required:1,title:{len:100}},providerName:{required:1,data:{type:1}},logo:{required:0,img:{w:16,h:16,type:1}}}),{city:{required:0,data:{type:9}},price:{required:0,data:{type:6}},callout:{required:0,data:{type:517}}}),a={price:e=>e.split(".")[0]},s={providerName:"data-1",rating:"data-3",likes:"data-4",price:"data-6",salePrice:"data-7",city:"data-9",installmentPrice:"data-500",priceDrop:"data-501",freeShipping:"data-502",viewed:"data-503",sold:"data-504",specialOffer:"data-505",eliteBadge:"data-506",condition:"data-507",localInventory:"data-508",curbsidePickup:"data-509",review:"data-510",shortTitle:"data-511",returnPolicy:"data-512",disclaimer:"data-513",callout:"data 517",discount:"data-600",title:"data-601",logo:"image-1",img:"image-3",transparentImage:"image-500"},c={font:"p1",shipping:"p2",ratings:"p3"},d=["specialOffer"],l=[s.disclaimer]},57846:function(e,t,n){"use strict";var i;n.d(t,{r:function(){return i}}),function(e){e[e.Logo=1]="Logo",e[e.HighResolution4K=3]="HighResolution4K",e[e.C1=2e4]="C1",e[e.C2=20001]="C2",e[e.C3=20002]="C3",e[e.C4=20003]="C4",e[e.C5=20004]="C5"}(i||(i={}))},29020:function(e,t,n){"use strict";var i;n.d(t,{x:function(){return i}}),function(e){e.Prong1="11730608",e.Prong2="11730609",e.NtpFeed="11726288"}(i||(i={}))},83097:function(e,t,n){"use strict";var i,r;n.d(t,{IR:function(){return r}}),function(e){e.Anon="ANON",e.AppAnon="APP_ANON",e.Unknown=""}(i||(i={})),function(e){e.AnonCookieExists="ace",e.AppAnonCookieExists="aace"}(r||(r={}))},7029:function(e,t,n){"use strict";var i;n.d(t,{l:function(){return i}}),function(e){e.NO_ACCOUNT="NO_ACCOUNT",e.MSA="MSA",e.AAD="AAD"}(i||(i={}))},53076:function(e,t,n){"use strict";var i;n.d(t,{z:function(){return i}}),function(e){e.AdminPortalData="AdminPortalData",e.AdService="AdService",e.AdsManager="AdsManager",e.BackgroundData="BackgroundData",e.BingAdsManager="BingAdsManager",e.BingAdsService="BingAdsService",e.BingImageData="BingImageData",e.CasualGamesData="CasualGamesData",e.CategoryData="CategoryData",e.ChannelData="ChannelData",e.ChromiumPageSettings="ChromiumPageSettings",e.CoachmarkData="CoachmarkData",e.CommunityEditorData="CommunityEditorData",e.ConditionalBannerData="ConditionalBannerData",e.DailyBriefServiceClient="DailyBriefServiceClient",e.DisplayAdsManager="DisplayAdsManager",e.Esports="Esports",e.ExperienceLoadedData="ExperienceLoadedData",e.ExperienceLoadedDataConnector="ExperienceLoadedDataConnector",e.ExperienceTrackerCasualGamesLandingData="ExperienceTrackerCasualGamesLandingData",e.ExperienceTrackerChannelData="ExperienceTrackerChannelData",e.ExperienceTrackerCommunityData="ExperienceTrackerCommunityData",e.ExperienceTrackerContentToolsData="ExperienceTrackerContentToolsData",e.ExperienceTrackerData="ExperienceTrackerData",e.ExperienceTrackerEdgeData="ExperienceTrackerEdgeData",e.ExperienceTrackerEdgeNextData="ExperienceTrackerEdgeNextData",e.ExperienceTrackerFinanceData="ExperienceTrackerFinanceData",e.ExperienceTrackerFirstPartyData="ExperienceTrackerFirstPartyData",e.ExperienceTrackerGamingFeedData="ExperienceTrackerGamingFeedData",e.ExperienceTrackerHomePageData="ExperienceTrackerHomePageData",e.ExperienceTrackerHubData="ExperienceTrackerHubData",e.ExperienceTrackerMicrosoftNewsData="ExperienceTrackerMicrosoftNewsData",e.ExperienceTrackerMMXData="ExperienceTrackerMMXData",e.ExperienceTrackerPrismData="ExperienceTrackerPrismData",e.ExperienceTrackerQnaData="ExperienceTrackerQnaData",e.ExperienceTrackerRecipesData="ExperienceTrackerRecipesData",e.ExperienceTrackerWidgets="ExperienceTrackerWidgets",e.ExperienceTrackerShoppingData="ExperienceTrackerShoppingData",e.ExperienceTrackerSportsData="ExperienceTrackerSportsData",e.ExperienceTrackerSuperAppData="ExperienceTrackerSuperAppData",e.ExperienceTrackerTrafficData="ExperienceTrackerTrafficData",e.ExperienceTrackerTravelData="ExperienceTrackerTravelData",e.ExperienceTrackerHealthData="ExperienceTrackerHealthData",e.ExperienceTrackerUgcData="ExperienceTrackerUgcData",e.ExperienceTrackerViewsData="ExperienceTrackerViewsData",e.ExperienceTrackerWeatherData="ExperienceTrackerWeatherData",e.ExperienceTrackerWeatherDataConnector="ExperienceTrackerWeatherDataConnector",e.ExperienceTrackerWindowsNewsAndInterestsData="ExperienceTrackerWindowsNewsAndInterestsData",e.ExperienceTrackerWindowsData="ExperienceTrackerWindowsData",e.ExperienceTrackerSuperWindowsData="ExperienceTrackerSuperWindowsData",e.ExperienceTrackerWindowsShellData="ExperienceTrackerWindowsShellData",e.ExperienceTrackerWindowsShellV2Data="ExperienceTrackerWindowsShellV2Data",e.ExperienceTrackerWindowsWidgetsData="ExperienceTrackerWindowsWidgetsData",e.FeedbackData="FeedbackData",e.GamingChannelData="GamingChannelData",e.HubPageSettings="HubPageSettings",e.IrisData="IrisData",e.LayoutPreferenceData="LayoutPreferenceData",e.LocationFeed="LocationFeed",e.MarketSelector="MarketSelector",e.MilestoneData="MilestoneData",e.MsccCookieBannerData="MsccCookieBannerData",e.MsNewsPageSettings="MsNewsPageSettings",e.NavigationData="NavigationData",e.NurturingPlacementManager="NurturingPlacementManager",e.OfficeSharedData="OfficeSharedData",e.OneTrustCookieConsentData="OneTrustCookieConsentData",e.PageClickTrackerData="PageClickTrackerData",e.PageLayout="PageLayout",e.PageSettingsData="PageSettingsData",e.PlacementManager="PlacementManager",e.PollsService="PollsService",e.PoweredByData="PoweredByData",e.Preload="Preload",e.QnaFeedService="QnaFeedService",e.RewardsData="RewardsData",e.RewardsCoachmarkData="RewardsCoachmarkData",e.SearchHistoryEdgenextData="SearchHistoryEdgenextData",e.SharedState="SharedState",e.SharedTimestampUtil="SharedTimestampUtil",e.SignInData="SignInData",e.SocialPostData="SocialPostData",e.SportsAroundTheLeagueData="SportsAroundTheLeagueData",e.SportsData="SportsData",e.SportsDataUtils="SportsDataUtils",e.SportsGameSummaryData="SportsGameSummaryData",e.SportsInfoSharedState="SportsInfoSharedState",e.SportsOlympicData="SportsOlympicData",e.SportsPersonalizationData="SportsPersonalizationData",e.SportsPreviousMatchupsData="SportsPreviousMatchupsData",e.SportsWorldCupData="SportsWorldCupData",e.SuperComponentData="SuperComponentData",e.Telemetry="Telemetry",e.ShellNewTabData="ShellNewTabData",e.SmartListSharedData="SmartListSharedData",e.TelemetryData="TelemetryData",e.TelemetryDataEdgeChromium="TelemetryDataEdgeChromium",e.TelemetryEdgeChromium="TelemetryEdgeChromium",e.TopicData="TopicData",e.TopSitesLayoutData="TopSitesLayoutData",e.TravelData="TravelData",e.VerticalPropertyData="VerticalPropertyData",e.VideoDataManager="VideoDataManager",e.ViewsNativeAd="ViewsNativeAdConnector",e.ViewsFullPage="ViewsFullPage",e.WeatherActivityWatchlistData="WeatherActivityWatchlistData",e.WeatherData="WeatherData",e.WeatherCardData="WeatherCardData",e.WeatherFeedbackData="WeatherFeedbackData",e.WeatherPageMeta="WeatherPageMeta",e.WeatherPersonaData="WeatherPersonaData",e.WeatherMapData="WeatherMapData",e.FinanceData="FinanceData",e.MoneyInfoSharedState="MoneyInfoSharedState",e.SocialData="SocialData",e.WindowsNewsAndInterestsData="WindowsNewsAndInterestsData",e.WindowsShellData="WindowsShellData",e.WindowsPageSettings="WindowsPageSettings",e.HyperLocalPromotionCardClosedKey="weather-map-hyper-local-promotion-card-closed"}(i||(i={}))},8371:function(e,t,n){"use strict";var i;n.d(t,{g:function(){return i}}),function(e){e.backgroundThemeColorChange="backgroundThemeColorChange",e.trackValuesUpdated="trackvaluesupdated",e.desktopFeedFetchFailed="desktopFeedFetchFailed",e.pageContentViewportUpdated="pageContentViewportUpdated"}(i||(i={}))},83227:function(e,t,n){"use strict";var i;n.d(t,{x:function(){return i}}),function(e){e.ShoppingCategoryPage="ShoppingCategoryPage",e.aboveRiverBlock="AboveRiverBlock",e.actionTray="ActionTray",e.aiCharacterCard="AiCharacterCard",e.aicharacterLandingPage="AicharacterLandingPage",e.aicharacterPaintPage="AicharacterPaintPage",e.animator="Animator",e.articleCloseButton="ArticleCloseButton",e.articleFre="ArticleFre",e.articlePage="ArticlePage",e.articleRelatedStories="ArticleRelatedStories",e.articleTopComment="ArticleTopComment",e.autosCard="AutosCard",e.autosCarousel="AutosCarousel",e.autosEntityCardWC="AutosEntityCardWC",e.autosEntitySpan="AutosEntitySpan",e.autosMarketplaceCard="AutosMarketplaceCard",e.backToTopButton="BackToTopButton",e.backgroundGallery="BackgroundGallery",e.backgroundGradient="BackgroundGradient",e.backgroundImageCommon="BackgroundImageCommon",e.backgroundImageEdge="BackgroundImageEdge",e.backgroundImageWC="BackgroundImageWC",e.bannerManager="BannerManager",e.baseHeader="BaseHeader",e.bingAdsManager="BingAdsManager",e.bingAnswers="BingAnswers",e.bingCards="BingCardsExperience",e.bingDailyQuizCard="BingDailyQuizCard",e.bingHealthCard="BingHealthCard",e.bingHealthFitnessCard="BingHealthFitnessCard",e.bingHomepageFeed="BingHomepageFeed",e.bingIntlUpsell="BingIntlUpsell",e.bingMiniShopping="BingMiniShopping",e.bingShopping="BingShopping",e.bingShoppingLifestyleCard="BingShoppingLifestyleCard",e.bingShoppingMeStripe="BingShoppingMeStripe",e.bingThisOrThatCard="BingThisOrThatCard",e.bingWebSSO="BingWebSSO",e.boostAd="BoostAd",e.boostAdCard="BoostAdCard",e.brandZone="BrandZone",e.breakingNews="BreakingNews",e.breakingNewsWC="BreakingNewsWC",e.calendarCard="CalendarCard",e.cardAction="CardAction",e.cardActionV2="CardActionV2",e.cardActionWC="CardActionWC",e.cashbackCarouselCard="CashbackCarouselCard",e.casualGamesBanner="CasualGamesBanner",e.casualGamesCard="CasualGamesCard",e.casualGamesCarouselCard="CasualGamesCarouselCard",e.casualGamesEventCard="CasualGamesEventCard",e.casualGamesFeed="CasualGamesFeed",e.casualGamesFrame="CasualGamesFrame",e.casualGamesGameplay="CasualGamesGameplay",e.casualGamesHub="CasualGamesHub",e.casualGamesLanding="CasualGamesLanding",e.casualGamesLandingV2="CasualGamesLandingV2",e.casualGamesStripeCarouselCard="CasualGamesStripeCarouselCard",e.channelEntryPoint="ChannelEntryPoint",e.channelFilterCard="ChannelFilterCard",e.channelList="ChannelList",e.channelPage="ChannelPage",e.channelStore="ChannelStore",e.channelSuggestedSidebar="ChannelSuggestedSidebar",e.channelsNews="ChannelsNews",e.clarity="Clarity",e.cmsBaseExperience="CmsBaseExperience",e.cmsExperience="CmsExperience",e.coachmark="Coachmark",e.coachmarkWC="CoachmarkWC",e.codexBingChat="CodexBingChat",e.coldStart="ColdStart",e.coldStartWC="ColdStartWC",e.comboCard="ComboCard",e.comments="Comments",e.commonAutoSuggest="CommonAutoSuggest",e.commonHeader="CommonHeader",e.commonHeaderWC="CommonHeaderWC",e.commonSearchBoxEdgeNext="CommonSearchBoxEdgeNext",e.commonSettingsEdgeNext="CommonSettingsEdgeNext",e.communityCard="CommunityCard",e.communityComposeCopilotWC="CommunityComposeCopilotWC",e.communityEditorData="CommunityEditorData",e.communityInfoCard="CommunityInfoCard",e.commuteCard="CommuteCard",e.companyNewsCard="CompanyNewsCard",e.complexContentPreview="ComplexContentPreview",e.conditionalBanner="ConditionalBanner",e.conditionalBannerHpWC="ConditionalBannerHpWC",e.conditionalBannerWC="ConditionalBannerWC",e.consumptionFeed="ConsumptionFeed",e.consumptionFeedWC="ConsumptionFeedWC",e.consumptionPage="ConsumptionPage",e.contentActionsToolbar="ContentActionsToolbar",e.contentCarouselMultiple="ContentCarouselMultiple",e.contentFlexInfoPane="ContentFlexInfoPane",e.contentGroup="ContentGroup",e.contentGroupCard="ContentGroupCard",e.contentNavigationBar="ContentNavigationBar",e.contentPreview="ContentPreview",e.contentPreviewSlide="ContentPreviewSlide",e.contentProvider="ContentProvider",e.contentRelated="ContentRelated",e.contentSharingToolbar="ContentSharingToolbar",e.contentTts="ContentTts",e.contextualFeedback="ContextualFeedback",e.contextualFeedbackWC="ContextualFeedbackWC",e.covidChatBot="CovidChatBot",e.cpcMonetizationDashboard="CpcMonetizationDashboard",e.dailyBrief="DailyBrief",e.dailyBriefWC="DailyBriefWC",e.dailyDiscovery="DailyDiscovery",e.dashboardFallback="DashboardFallback",e.dashboardSettings="DashboardSettings",e.denseCard="DenseCard",e.desktopFeed="DesktopFeed",e.desktopFeedHubWC="DesktopFeedHubWC",e.desktopFeedViewsWC="DesktopFeedViewsWC",e.desktopFeedWC="DesktopFeedWC",e.devTools="DevTools",e.didYouKnowImageWCExperience="DidYouKnowImageWCExperience",e.didYouKnowWCExperience="DidYouKnowWCExperience",e.digestCard="DigestCard",e.displayAds="DisplayAds",e.displayAdsWC="DisplayAdsWC",e.displayAdsWithContentFallback="DisplayAdsWithContentFallback",e.distributionFeed="DistributionFeed",e.distributionHeader="DistributionHeader",e.distributionPage="DistributionPage",e.distributionPivotsNav="DistributionPivotsNav",e.edgeChromiumPageWC="EdgeChromiumPageWC",e.edgeHeader="EdgeHeader",e.edgeNextPage="EdgeNextPage",e.edgePage="EdgePage",e.edgePageSettings="PageSettings",e.edgeShopping="EdgeShopping",e.editorsChoicePromoCard="EditorsChoicePromoCard",e.electionCard="ElectionCard",e.elections="Elections",e.emmxEntrypoint="EmmxEntrypoint",e.enterpriseComplianceBanner="EnterpriseComplianceBanner",e.entertainmentCard="EntertainmentCard",e.entertainmentPremierCard="EntertainmentPremierCard",e.entryPoint="EntryPoint",e.entryPointEdgeNext="EntryPointEdgeNext",e.entryPointHpMobile="EntryPointHpMobile",e.entryPointHpWC="EntryPointHpWC",e.entryPointMobileHub="EntryPointMobileHub",e.entryPointViewsWC="EntryPointViewsWC",e.eoabViews="EoabViews",e.eoabViewsAutos="EoabViewsAutos",e.eoabViewsFinance="EoabViewsFinance",e.eoabViewsShopping="EoabViewsShopping",e.eoabViewsTravel="EoabViewsTravel",e.esportsCard="EsportsCard",e.esportsCasualGamesCard="EsportsCasualGamesCard",e.esportsLiveStreamCard="EsportsLiveStreamCard",e.esportsLivestreamCarouselWC="EsportsLivestreamCarouselWC",e.esportsStreamsCard="EsportsStreamsCard",e.eventHubFollowHeader="EventHubFollowHeader",e.eventHubHeroNav="EventHubHeroNav",e.eventHubPage="EventHubPage",e.exampleOfferCard="ExampleOfferCard",e.experiencePreviewCta="ExperiencePreviewCta",e.externalContentPreview="ExternalContentPreview",e.externalNativeAd="ExternalNativeAd",e.familyCard="FamilyCard",e.feedContainer="FeedContainer",e.feedLevelFeedbackWC="FeedLevelFeedbackWC",e.feedNavigationHp="FeedNavigationHp",e.feedToggle="FeedToggle",e.feedbackCard="FeedbackCard",e.feedbackDialog="FeedbackDialog",e.feedbackDialogWC="FeedbackDialogWC",e.feedbackLink="FeedbackLink",e.feedbackLinkWC="FeedbackLinkWC",e.financeAdvancedChart="FinanceAdvancedChart",e.financeAnalysisPage="FinanceAnalysisPage",e.financeAnalystRatingCard="FinanceAnalystRatingCard",e.financeAskLandingPage="FinanceAskLandingPage",e.financeBingAds="FinanceBingAds",e.financeCardCommon="FinanceCardCommon",e.financeCarousel="FinanceCarousel",e.financeChartPage="FinanceChartPage",e.financeCollectionDetailTable="FinanceCollectionDetailTable",e.financeCollectionPerformanceCard="FinanceCollectionPerformanceCard",e.financeCombinationCard="FinanceCombinationCard",e.financeCompanyPage="FinanceCompanyPage",e.financeCompanyProfileCard="FinanceCompanyProfileCard",e.financeCompareAdd="FinanceCompareAdd",e.financeCompareChartView="FinanceCompareChartView",e.financeCompareHeader="FinanceCompareHeader",e.financeComparePage="FinanceComparePage",e.financeCompareTable="FinanceCompareTable",e.financeCompositionTemplate="FinanceCompositionTemplate",e.financeCrashCourseFeed="FinanceCrashCourseFeed",e.financeCrashCourseViewer="FinanceCrashCourseViewer",e.financeCryptoInsights="FinanceCryptoInsights",e.financeCryptoLearnCard="FinanceCryptoLearnCard",e.financeCryptoMarketHighlight="FinanceCryptoMarketHighlight",e.financeCryptoQnA="FinanceCryptoQnA",e.financeCryptoTable="FinanceCryptoTable",e.financeCurrencyConverter="FinanceCurrencyConverter",e.financeDetailComposition="FinanceDetailComposition",e.financeDetailHeader="FinanceDetailHeader",e.financeDetailNavigation="FinanceDetailNavigation",e.financeDetailPageV2="FinanceDetailPageV2",e.financeDetailsCard="FinanceDetailsCard",e.financeDetailsCardV2="FinanceDetailsCardV2",e.financeDianomiAds="FinanceDianomiAds",e.financeDiscoverySection="FinanceDiscoverySection",e.financeEarningChart="FinanceEarningChart",e.financeEarningGameCard="FinanceEarningGameCard",e.financeEarningsCalendarCard="FinanceEarningsCalendarCard",e.financeEarningsCard="FinanceEarningsCard",e.financeEarningsEventCard="FinanceEarningsEventCard",e.financeEarningsForecast="FinanceEarningsForecast",e.financeEarningsReport="FinanceEarningsReport",e.financeEconomicIndicator="FinanceEconomicIndicator",e.financeEtfInvestors="FinanceEtfInvestors",e.financeEtfL3Holdings="FinanceEtfL3Holdings",e.financeEtfProfile="FinanceEtfProfile",e.financeEventBrief="FinanceEventBrief",e.financeEventLandingPage="FinanceEventLandingPage",e.financeEventsCalendarCard="FinanceEventsCalendarCard",e.financeEventsComposition="FinanceEventsComposition",e.financeEventsTimeline="FinanceEventsTimeline",e.financeExploreCenter="FinanceExploreCenter",e.financeFeeds="FinanceFeeds",e.financeFeedsSection="FinanceFeedsSection",e.financeFinancialsCard="FinanceFinancialsCard",e.financeFinancialsChartCard="FinanceFinancialsChartCard",e.financeFinancialsKeyratiosComposition="FinanceFinancialsKeyratiosComposition",e.financeFinancialsLineChart="FinanceFinancialsLineChart",e.financeFollowButton="FinanceFollowButton",e.financeFundCard="FinanceFundCard",e.financeFundCardWrapper="FinanceFundCardWrapper",e.financeGamificationCard="FinanceGamificationCard",e.financeGradeChart="FinanceGradeChart",e.financeIndicesCard="FinanceIndicesCard",e.financeInsiderTrades="FinanceInsiderTrades",e.financeInsights="FinanceInsights",e.financeInvestorBioCard="FinanceInvestorBioCard",e.financeInvestorDetailPage="FinanceInvestorDetailPage",e.financeInvestorHoldingsHighlight="FinanceInvestorHoldingsHighlight",e.financeInvestorHoldingsTable="FinanceInvestorHoldingsTable",e.financeInvestorNavigationRail="FinanceInvestorNavigationRail",e.financeInvestorPerformanceCard="FinanceInvestorPerformanceCard",e.financeInvestorPerformanceGraph="FinanceInvestorPerformanceGraph",e.financeInvestorPortfolioSectors="FinanceInvestorPortfolioSectors",e.financeInvestorProfileHeader="FinanceInvestorProfileHeader",e.financeKeyFactsCard="FinanceKeyFactsCard",e.financeL1TopStories="FinanceL1TopStories",e.financeL2NewsCard="FinanceL2NewsCard",e.financeL3FinancialsNavigation="FinanceL3FinancialsNavigation",e.financeL3HistoryTab="FinanceL3HistoryTab",e.financeL3OptionsPage="FinanceL3OptionsPage",e.financeL3OwnershipBasic="FinanceL3OwnershipBasic",e.financeL3OwnershipEventsList="FinanceL3OwnershipEventsList",e.financeL3OwnershipGraph="FinanceL3OwnershipGraph",e.financeL3OwnershipHoldersTable="FinanceL3OwnershipHoldersTable",e.financeL3PageComposition="FinanceL3PageComposition",e.financeL3RelatedPage="FinanceL3RelatedPage",e.financeL4IncomeStatementTable="FinanceL4IncomeStatementTable",e.financeL4KeyRatiosTable="FinanceL4KeyRatiosTable",e.financeL4PageComposition="FinanceL4PageComposition",e.financeLandingPageV2="FinanceLandingPageV2",e.financeLearnPage="FinanceLearnPage",e.financeListDetailHeader="FinanceListDetailHeader",e.financeListDetailPage="FinanceListDetailPage",e.financeListLandingPage="FinanceListLandingPage",e.financeMarketCard="FinanceMarketCard",e.financeMarketDescription="FinanceMarketDescription",e.financeMarketMoversCard="FinanceMarketMoversCard",e.financeMarketStatus="FinanceMarketStatus",e.financeMarketSummaryTrend="FinanceMarketSummaryTrend",e.financeMarketsPageComposition="FinanceMarketsPageComposition",e.financeMergeWatchlist="FinanceMergeWatchlist",e.financeMiddleLayer="FinanceMiddleLayer",e.financeNewInvestorQuickStarter="FinanceNewInvestorQuickStarter",e.financeNewsCard="FinanceNewsCard",e.financeNewsContent="FinanceNewsContent",e.financeNewsLandingpage="FinanceNewsLandingpage",e.financeNotificationBar="FinanceNotificationBar",e.financePerfRankCard="FinancePerfRankCard",e.financePortfolioList="FinancePortfolioList",e.financeProjectionPromoteCard="FinanceProjectionPromoteCard",e.financePwaTip="FinancePwaTip",e.financeRecentlyViewedCard="FinanceRecentlyViewedCard",e.financeRecommendationCard="FinanceRecommendationCard",e.financeRecommendationCardV2="FinanceRecommendationCardV2",e.financeRedLine="FinanceRedLine",e.financeRelatedEarnings="FinanceRelatedEarnings",e.financeReturnCalculator="FinanceReturnCalculator",e.financeScreener="FinanceScreener",e.financeSearchBox="FinanceSearchBox",e.financeSectionEarningsCard="FinanceSectionEarningsCard",e.financeSectionHealthCard="FinanceSectionHealthCard",e.financeSectionInvestorsCard="FinanceSectionInvestorsCard",e.financeSectionPerformanceCard="FinanceSectionPerformanceCard",e.financeSectionValuationCard="FinanceSectionValuationCard",e.financeSentimentChart="FinanceSentimentChart",e.financeSentimentWizard="FinanceSentimentWizard",e.financeStockL2="FinanceStockL2",e.financeTitleCard="FinanceTitleCard",e.financeTopRated="FinanceTopRated",e.financeTrendCard="FinanceTrendCard",e.financeTrendingRelated="FinanceTrendingRelated",e.financeUserNavigation="FinanceUserNavigation",e.financeVideosFeed="FinanceVideosFeed",e.financeWalkthrough="FinanceWalkthrough",e.financeWatchlistCard="FinanceWatchlistCard",e.financeWatchlistListView="FinanceWatchlistListView",e.financeWatchlistManagement="FinanceWatchlistManagement",e.financeWatchlistMiniView="FinanceWatchlistMiniView",e.financeWatchlistPage="FinanceWatchlistPage",e.financeWatchlistPageV2="FinanceWatchlistPageV2",e.financeWatchlistStart="FinanceWatchlistStart",e.financeWatchlistSuggestion="FinanceWatchlistSuggestion",e.financeWatchlistSummary="FinanceWatchlistSummary",e.firstPartyPage="FirstPartyPage",e.fitnessCard="FitnessCard",e.fitnessSingleVideo="FitnessSingleVideo",e.fitnessSingleVideoHealthapp="FitnessSingleVideoHealthapp",e.floatButtonGroupWC="FloatButtonGroupWC",e.flyoutCard="FlyoutCard",e.followingFreConfirmation="FollowingFreConfirmation",e.followingFreFullWidth="FollowingFreFullWidth",e.foodSimilarItems="FoodSimilarItems",e.forumDealsPage="ForumDealsPage",e.freMarketSelector="FreMarketSelector",e.frequentSitesCardWC="FrequentSitesCardWC",e.galleryPage="GalleryPage",e.gameCard="GameCard",e.gamingChannel="GamingChannel",e.gamingCompeteCard="GamingCompeteCard",e.gamingDiscoverStrip="GamingDiscoverStrip",e.gamingGamerModeUpsellCard="GamingGamerModeUpsellCard",e.gamingInterestGroupCard="GamingInterestGroupCard",e.gamingMatchCard="GamingMatchCard",e.gamingMediaCarousel="GamingMediaCarousel",e.gamingPage="GamingPage",e.gamingPersonalizationCard="GamingPersonalizationCard",e.gamingRecentlyPlayedCard="GamingRecentlyPlayedCard",e.gamingRecommendedCard="GamingRecommendedCard",e.gamingRedditCard="GamingRedditCard",e.gamingRewardsCard="GamingRewardsCard",e.gamingStreamCard="GamingStreamCard",e.gamingTournamentCard="GamingTournamentCard",e.gamingUpcomingCard="GamingUpcomingCard",e.gamingVideoCard="GamingVideoCard",e.generalElections="GeneralElections",e.gmailEmailPreview="GmailEmailPreview",e.gridViewFeed="GridViewFeed",e.groceryCouponSdCard="GroceryCouponSdCard",e.headerMenuWindowsShell="HeaderMenuWindowsShell",e.headerNavigationLogo="HeaderNavigationLogo",e.headerWindowsShellV2="HeaderWindowsShellV2",e.headerWindowsShellWC="HeaderWindowsShellWC",e.healthArticlesCardWC="HealthArticlesCardWC",e.healthDietPlanScheduleWC="HealthDietPlanScheduleWC",e.healthDietPlansPage="HealthDietPlansPage",e.healthExpertCommunity="HealthExpertCommunity",e.healthExpertCreation="HealthExpertCreation",e.healthExpertTermsConditions="HealthExpertTermsConditions",e.healthFeedbackWC="HealthFeedbackWC",e.healthFitnessCarousel="HealthFitnessCarousel",e.healthFitnessChallengePage="HealthFitnessChallengePage",e.healthFoodAtoz="HealthFoodAtoz",e.healthFoodHealtheffectsWC="HealthFoodHealtheffectsWC",e.healthFoodRecipesWC="HealthFoodRecipesWC",e.healthHub="HealthHub",e.healthHubAskProfessionals="HealthHubAskProfessionals",e.healthHubCondition="HealthHubCondition",e.healthHubDiagnostics="HealthHubDiagnostics",e.healthHubDrugs="HealthHubDrugs",e.healthHubHealthapp="HealthHubHealthapp",e.healthHubHealthappShell="HealthHubHealthappShell",e.healthHubPage="HealthHubPage",e.healthHubProcedures="HealthHubProcedures",e.healthHubSymptoms="HealthHubSymptoms",e.healthInterestsManager="HealthInterestsManager",e.healthInterestsManagerShell="HealthInterestsManagerShell",e.healthQnAWCExperience="HealthQnAWCExperience",e.healthRiverWC="HealthRiverWC",e.healthTipReact="HealthTipReact",e.healthTipWC="HealthTipWC",e.healthTopSpan="HealthTopSpan",e.healthTopicFlyout="HealthTopicFlyout",e.healthTopicFlyoutShell="HealthTopicFlyoutShell",e.healthTranslationWC="HealthTranslationWC",e.healthWidget="HealthWidget",e.hiddenContent="HiddenContent",e.holidayEffects="HolidayEffects",e.homePage="HomePage",e.homepageFooter="HomepageFooter",e.homepageHeader="HomepageHeader",e.horoscopeAnswerCard="HoroscopeAnswerCard",e.horoscopeAnswerCardWC="HoroscopeAnswerCardWC",e.horoscopeCard="HoroscopeCard",e.hotListCard="HotListCard",e.iframe="IFrame",e.imageSearch="ImageSearch",e.imageSearchWC="ImageSearchWC",e.immersiveFullscreen="ImmersiveFullscreen",e.industryNewsCard="IndustryNewsCard",e.infopane="Infopane",e.inspirationCard="InspirationCard",e.interestFreCard="InterestFreCard",e.interestManagementCard="InterestManagementCard",e.interests="Interests",e.interestsLeftRail="InterestsLeftRail",e.interestsManager="InterestsManager",e.interestsSearch="InterestsSearch",e.interestsV1Wrapper="InterestsV1Wrapper",e.interestsV2="InterestsV2",e.interestsV3="InterestsV3",e.interestsWC="InterestsWC",e.languageToggle="LanguageToggle",e.languageToggleWC="LanguageToggleWC",e.layoutSwitcher="LayoutSwitcher",e.legacySharingToolbar="LegacySharingToolbar",e.linkedInCard="LinkedInCard",e.linkedInNewsCard="LinkedInNewsCard",e.localGuideCard="LocalGuideCard",e.localHubHeader="LocalHubHeader",e.localNews="LocalNews",e.localNewsViewCard="LocalNewsViewCard",e.localizeStringsTempExperience="LocalizeStringsTempExperience",e.locationContentCard="LocationContentCard",e.locationEditorDialog="LocationEditorDialog",e.locationMarker="LocationMarker",e.locationSelector="LocationSelector",e.locationTime="LocationTime",e.lottery="Lottery",e.mailSignoutBanner="MailSignoutBanner",e.mangaCard="MangaCard",e.mangaHub="MangaHub",e.mangaPage="MangaPage",e.mangaSlideShow="MangaSlideShow",e.marketAggregator="MarketAggregator",e.marketLanguageToggleWC="MarketLanguageToggleWC",e.marketSelector="MarketSelector",e.marketplaceCardWC="MarketplaceCardWC",e.meControl="MeControl",e.meControlWC="MeControlWC",e.meStripe="MeStripe",e.meStripeWC="MeStripeWC",e.mediaServices="MediaServices",e.meetNow="MeetNow",e.microsoftEdgeWidget="MicrosoftEdgeWidget",e.microsoftFeedCard="MicrosoftFeedCard",e.microsoftLogo="MicrosoftLogo",e.microsoftNewsPage="MicrosoftNewsPage",e.migrationConsent="MigrationConsent",e.miniHeader="MiniHeader",e.mmxPage="MMXPage",e.mns="Mns",e.mnsCreatorDashboard="MnsCreatorDashboard",e.mobileAppUpsell="MobileAppUpsell",e.mobileChannelSlider="MobileChannelSlider",e.mobileConsumptionPage="MobileConsumptionPage",e.mobileFeed="MobileFeed",e.mobileFeedHub="MobileFeedHub",e.mobileFeedWC="MobileFeedWC",e.mobileFooter="MobileFooter",e.mobileHeader="MobileHeader",e.mobileMarketSelector="MobileMarketSelector",e.mobileNotification="MobileNotification",e.mobilePopupWindow="MobilePopupWindow",e.mobileRewardsCard="MobileRewardsCard",e.mobileShoppingCard="MobileShoppingCard",e.mobileStoryViewer="MobileStoryViewer",e.mobileTip="MobileTip",e.mobileWidget="MobileWidget",e.modernRightRail="ModernRightRail",e.moneyAugmentCard="MoneyAugmentCard",e.moneyCard="MoneyCard",e.moneyInfo="MoneyInfo",e.moneyInfoCard="MoneyInfoCard",e.moneyInfoCardWC="MoneyInfoCardWC",e.moneyInfoSpan="MoneyInfoSpan",e.msRewards="MsRewards",e.msRewardsWC="MsRewardsWC",e.msaAddressForm="MsaAddressForm",e.msnSettingMenu="MsnSettingMenu",e.myBriefRiverCard="MyBriefRiverCard",e.nativeAd="NativeAd",e.nativeTopAd="NativeTopAd",e.nativeAdWC="NativeAdWC",e.navigationPageExperience="NavigationPageExperience",e.newsFlipperCard="NewsFlipperCard",e.newsGroupsCard="NewsGroupsCard",e.newsGuard="NewsGuard",e.newsHeadlineBelowSearchbox="NewsHeadlineBelowSearchbox",e.newsSegmentCarousel="NewsSegmentCarousel",e.newsbarFeedFooter="NewsbarFeedFooter",e.newsbarFeedWC="NewsbarFeedWC",e.newsbarUpsell="NewsbarUpsell",e.newsbarUpsellWC="NewsbarUpsellWC",e.newsletterSignup="NewsletterSignup",e.newsletterSignupPage="NewsletterSignupPage",e.nextdoorCard="NextdoorCard",e.nextdoorPage="NextdoorPage",e.notificationBell="NotificationBell",e.notificationBellWC="NotificationBellWC",e.notificationMiniCard="NotificationMiniCard",e.nudgeSpotlightCard="NudgeSpotlightCard",e.office="Office",e.officeCoachmark="OfficeCoachmark",e.officeDocumentsTableWC="OfficeDocumentsTableWC",e.officeLeftRail="OfficeLeftRail",e.onThisDayCard="OnThisDayCard",e.onThisDayCardSmall="OnThisDayCardSmall",e.onThisDayCardWC="OnThisDayCardWC",e.oneFooter="OneFooter",e.overlay="Overlay",e.overlayWC="OverlayWC",e.pageRefresh="PageRefresh",e.pageRefreshWC="PageRefreshWC",e.panoPage="PanoPage",e.partnerUpsellCard="PartnerUpsellCard",e.partnerWidget="PartnerWidget",e.personalFinanceExpenseDistribution="PersonalFinanceExpenseDistribution",e.personalFinanceTransactionsCard="PersonalFinanceTransactionsCard",e.personalizeNavButton="PersonalizeNavButton",e.photoCard="PhotoCard",e.pillWC="PillWC",e.pivotContent="PivotContent",e.pivotContentV2="PivotContentV2",e.pivotsMobileWC="PivotsMobileWC",e.pivotsNav="PivotsNav",e.pollsCard="PollsCard",e.pollsCardWC="PollsCardWC",e.portugueseElectionExperience="PortugueseElectionExperience",e.poweredByLegend="PoweredbyLegend",e.poweredByLegendWC="PoweredbyLegendWC",e.prayerTimesCard="PrayerTimesCard",e.premiumProfilePromoCard="PremiumProfilePromoCard",e.prideEventCard="PrideEventCard",e.prismCards="PrismCards",e.prismCarouselCard="PrismCarouselCard",e.prismFeed="PrismFeed",e.prismSdCard="PrismSdCard",e.proactiveCanvas="ProactiveCanvas",e.productivityHub="ProductivityHub",e.profileArticles="ProfileArticles",e.profilePromoCard="ProfilePromoCard",e.promoBanner="PromoBanner",e.promoBannerWC="PromoBannerWC",e.publisherCarousel="PublisherCarousel",e.publisherList="PublisherList",e.publisherSubscribeFollowButton="PublisherSubscribeFollowButton",e.publishersManagement="PublishersManagement",e.pullToRefresh="PullToRefresh",e.qna="Qna",e.qnaFeed404Page="QnaFeed404Page",e.qnaFeedCard="QnaFeedCard",e.qnaFeedCardMenu="QnaFeedCardMenu",e.qnaFeedCarousel="QnaFeedCarousel",e.qnaFeedCategoriesMenu="QnaFeedCategoriesMenu",e.qnaFeedExploreTopics="QnaFeedExploreTopics",e.qnaFeedList="QnaFeedList",e.qnaFeedMyTopics="QnaFeedMyTopics",e.qnaFeedPage="QnaFeedPage",e.qnaFeedRelatedQuestions="QnaFeedRelatedQuestions",e.qnaFeedReportCard="QnaFeedReportCard",e.qnaFeedSuggestedTopics="QnaFeedSuggestedTopics",e.qnaFeedTopicDetail="QnaFeedTopicDetail",e.qnaFeedTrendingQuestions="QnaFeedTrendingQuestions",e.quizCard="QuizCard",e.reactionBreakdownDialog="ReactionBreakdownDialog",e.realEstateCard="RealEstateCard",e.recipesCards="RecipesCards",e.recipesFeed="RecipesFeed",e.recipesSdCard="RecipesSdCard",e.recipesSearch="RecipesSearch",e.recipesSingleDetail="RecipesSingleDetail",e.recipesSingleVideo="RecipesSingleVideo",e.recommendedCardFeed="RecommendedCardFeed",e.recommendedCardWC="RecommendedCardWC",e.recommendedInterests="RecommendedInterests",e.recommendedSearch="RecommendedSearch",e.recommendedSearchBelowSearchBox="RecommendedSearchBelowSearchBox",e.recommendedSearchCarousel="RecommendedSearchCarousel",e.recommendedSearchCarouselWC="RecommendedSearchCarouselWC",e.recommendedSearchesCard="RecommendedSearchesCard",e.recommendedSites="RecommendedSites",e.recommendedSitesWC="RecommendedSitesWC",e.recommendedTopics="RecommendedTopics",e.relatedSearchesCard="RelatedSearchesCard",e.rewardsCardWC="RewardsCardWC",e.rewardsDailyCheckinCard="RewardsDailyCheckinCard",e.rewardsDailySetCard="RewardsDailySetCard",e.richCalendarCard="RichCalendarCard",e.rightRailCarousel="RightRailCarousel",e.rightRailProviderCarousel="RightRailProviderCarousel",e.river="River",e.riverPlaceholder="RiverPlaceholder",e.scrollDownButton="ScrollDownButton",e.sdCardMaskWC="SdCardMaskWC",e.searchBoxCommon="SearchBoxCommon",e.searchBoxEdge="SearchBoxEdge",e.searchBoxWC="SearchBoxWC",e.searchBoxWindowsShell="SearchBoxWindowsShell",e.searchHistoryCommon="SearchHistoryCommon",e.searchHistoryEdge="SearchHistoryEdge",e.searchHistoryEdgeNextWC="SearchHistoryEdgeNextWC",e.seeMoreButtonWindowsShell="SeeMoreButtonWindowsShell",e.selectCarousel="SelectCarousel",e.settingsDialogMsNews="SettingsDialogMsNews",e.sharedLinks="SharedLinks",e.sharedState="SharedState",e.sharepointNewsCard="SharepointNewsCard",e.shopContentCarousel="ShopContentCarousel",e.shoppingAllStoresPage="ShoppingAllStoresPage",e.shoppingArticlePage="ShoppingArticlePage",e.shoppingAssistant="ShoppingAssistant",e.shoppingAugmentCard="ShoppingAugmentCard",e.shoppingBingProductDetails="ShoppingBingProductDetails",e.shoppingBlackjackDealPage="ShoppingBlackjackDealPage",e.shoppingBlackjackPage="ShoppingBlackjackPage",e.shoppingBuyingGuide="ShoppingBuyingGuide",e.shoppingBuyingGuidesCard="ShoppingBuyingGuidesCard",e.shoppingCardWC="ShoppingCardWC",e.shoppingCarousel="ShoppingCarousel",e.shoppingCarouselProngWC="ShoppingCarouselProngWC",e.shoppingCarouselWC="ShoppingCarouselWC",e.shoppingCart="ShoppingCart",e.shoppingCashback="ShoppingCashback",e.shoppingChatDetailPage="ShoppingChatDetailPage",e.shoppingCheckoutModal="ShoppingCheckoutModal",e.shoppingCheckoutPage="ShoppingCheckoutPage",e.shoppingColdStart="ShoppingColdStart",e.shoppingContentCard="ShoppingContentCard",e.shoppingCouponsPage="ShoppingCouponsPage",e.shoppingDealsHomePage="ShoppingDealsHomePage",e.shoppingDebugPage="ShoppingDebugPage",e.shoppingEdgeInsightsCard="ShoppingEdgeInsightsCard",e.shoppingEntryBaseExperience="ShoppingEntryBaseExperience",e.shoppingEventsDealCard="ShoppingEventsDealCard",e.shoppingFashionCarouselWC="ShoppingFashionCarouselWC",e.shoppingFeedCard="ShoppingFeedCard",e.shoppingForumFavorites="ShoppingForumFavorites",e.shoppingForumHome="ShoppingForumHome",e.shoppingForumLandingPage="ShoppingForumLandingPage",e.shoppingForumOrderCancelPage="ShoppingForumOrderCancelPage",e.shoppingForumOrderConfirmation="ShoppingForumOrderConfirmation",e.shoppingForumOrderDetails="ShoppingForumOrderDetails",e.shoppingForumOrdersPage="ShoppingForumOrdersPage",e.shoppingForumProductPage="ShoppingForumProductPage",e.shoppingForumRefundDetailsPage="ShoppingForumRefundDetailsPage",e.shoppingForumRefundOrderPage="ShoppingForumRefundOrderPage",e.shoppingForumReturnDetailsPage="ShoppingForumReturnDetailsPage",e.shoppingForumReturnOrderPage="ShoppingForumReturnOrderPage",e.shoppingForumSellerPage="ShoppingForumSellerPage",e.shoppingGrid="ShoppingGrid",e.shoppingGroupedCarousel="ShoppingGroupedCarousel",e.shoppingGuidesPage="ShoppingGuidesPage",e.shoppingHomepage="ShoppingHomepage",e.shoppingInspiration="ShoppingInspiration",e.shoppingLeaderboard="ShoppingLeaderboard",e.shoppingLiveBasePage="ShoppingLiveBasePage",e.shoppingLiveEmbedPage="ShoppingLiveEmbedPage",e.shoppingLiveFeedPage="ShoppingLiveFeedPage",e.shoppingLiveInmobiDetailsPage="ShoppingLiveInmobiDetailsPage",e.shoppingLiveProductDetailsPage="ShoppingLiveProductDetailsPage",e.shoppingLiveVideoPlayer="ShoppingLiveVideoPlayer",e.shoppingModal="ShoppingModal",e.shoppingModelOverlay="ShoppingModelOverlay",e.shoppingMomentInTimePage="ShoppingMomentInTimePage",e.shoppingMultiTabCarousel="ShoppingMultiTabCarousel",e.shoppingNotification="ShoppingNotification",e.shoppingPage="ShoppingPage",e.shoppingPageBase="ShoppingPageBase",e.shoppingPageContent="ShoppingPageContent",e.shoppingPivotFeed="ShoppingPivotFeed",e.shoppingProductDetailPage="ShoppingProductDetailPage",e.shoppingProductPage="ShoppingProductPage",e.shoppingSdCard="ShoppingSdCard",e.shoppingSearch="ShoppingSearch",e.shoppingSearchNav="ShoppingSearchNav",e.shoppingSearchResultPage="ShoppingSearchResultPage",e.shoppingShippingAddress="ShoppingShippingAddress",e.shoppingShopTheLookPage="ShoppingShopTheLookPage",e.shoppingSmartList="ShoppingSmartList",e.shoppingSpinWheel="ShoppingSpinWheel",e.shoppingTopSpan="ShoppingTopSpan",e.shoppingVerticalListsCard="ShoppingVerticalListsCard",e.shoppingVideoShortsCarousel="ShoppingVideoShortsCarousel",e.shoppingViewsCarousel="ShoppingViewsCarousel",e.showFeed="ShowFeed",e.signInControlWC="SignInControlWC",e.signInFlyoutWC="SignInFlyoutWC",e.simpleBanner="SimpleBanner",e.slideShow="SlideShow",e.slideshowWC="SlideshowWC",e.smartList="SmartList",e.social="Social",e.socialAvatar="SocialAvatar",e.socialBar="SocialBar",e.socialBarV2="SocialBarV2",e.socialBarWC="SocialBarWC",e.socialComment="SocialComment",e.socialCommentWC="SocialCommentWC",e.socialEntrypoint="SocialEntrypoint",e.socialGiveSupportButton="SocialGiveSupportButton",e.socialLeadGenInArticle="SocialLeadGenInArticle",e.socialNotification="SocialNotification",e.socialPost="SocialPost",e.socialPostCard="SocialPostCard",e.socialPostEditorWC="SocialPostEditorWC",e.socialProfile="SocialProfile",e.socialProfileActionMenu="SocialProfileActionMenu",e.socialProfileCard="SocialProfileCard",e.socialProfilePromo="SocialProfilePromotion",e.socialProfileRejectionDetails="SocialProfileRejectionDetails",e.socialProfileTopics="SocialProfileTopics",e.socialRelatedSources="SocialRelatedSources",e.socialReportMenu="SocialReportMenu",e.socialRewardsMedal="SocialRewardsMedal",e.socialRewardsPromotion="SocialRewardsPromotion",e.socialShareButton="SocialShareButton",e.socialStarRating="SocialStarRating",e.socialSubscriptionBanner="SocialSubscriptionBanner",e.socialSubscriptionNotification="SocialSubscriptionNotification",e.socialSubscriptionOverlay="SocialSubscriptionOverlay",e.socialSubscriptionOverlaySummary="SocialSubscriptionOverlaySummary",e.socialSubscriptionPaywall="SocialSubscriptionPaywall",e.socialSubscriptionUpsell="SocialSubscriptionUpsell",e.socialSupportResult="SocialSupportResult",e.socialTipHistory="SocialTipHistory",e.socialTipIntroduction="SocialTipIntroduction",e.socialTipPromotion="SocialTipPromotion",e.socialTipPromotionInArticle="SocialTipPromotionInArticle",e.socialTipSelection="SocialTipSelection",e.sportsAroundTheLeague="SportsAroundTheLeague",e.sportsAugmentCard="SportsAugmentCard",e.sportsBackgroundUx="SportsBackgroundUx",e.sportsBrackets="SportsBrackets",e.sportsCard="SportsCard",e.sportsCardWC="SportsCardWC",e.sportsCommentary="SportsCommentary",e.sportsCountdownTimer="SportsCountdownTimer",e.sportsCricketLayoutManager="SportsCricketLayoutManager",e.sportsCricketLeagueStats="SportsCricketLeagueStats",e.sportsCricketMatchRow="SportsCricketMatchRow",e.sportsCricketPartnerships="SportsCricketPartnerships",e.sportsCricketRankings="SportsCricketRankings",e.sportsCricketScorecard="SportsCricketScorecard",e.sportsCricketScoresAndSchedule="SportsCricketScoresAndSchedule",e.sportsEntityHeader="SportsEntityHeader",e.sportsFeaturedMatchesCard="SportsFeaturedMatchesCard",e.sportsFullStandings="SportsFullStandings",e.sportsGameInformation="SportsGameInformation",e.sportsGameScore="SportsGameScore",e.sportsGameSummary="SportsGameSummary",e.sportsGameSummaryFull="SportsGameSummaryFull",e.sportsGameTimeline="SportsGameTimeline",e.sportsGcPlayerStats="SportsGcPlayerStats",e.sportsGcTeamStats="SportsGcTeamStats",e.sportsGptAnalysis="SportsGptAnalysis",e.sportsHeadlinesTimelines="SportsHeadlinesTimelines",e.sportsInfo="SportsInfo",e.sportsInfoSpan="SportsInfoSpan",e.sportsLayoutRenderer="SportsLayoutRenderer",e.sportsMatchRow="SportsMatchRow",e.sportsMatchupCard="SportsMatchupCard",e.sportsMobileTabPanel="SportsMobileTabPanel",e.sportsOlympicCard="SportsOlympicCard",e.sportsOlympicCardWC="SportsOlympicCardWC",e.sportsPage="SportsPage",e.sportsPageContent="SportsPageContent",e.sportsPersonMatchRow="SportsPersonMatchRow",e.sportsPersonalizationStrip="SportsPersonalizationStrip",e.sportsPinLiveMatch="SportsPinLiveMatch",e.sportsPlayerBio="SportsPlayerBio",e.sportsPlayerInsights="SportsPlayerInsights",e.sportsPreviousMatchups="SportsPreviousMatchups",e.sportsRankingsFull="SportsRankingsFull",e.sportsScoresAndSchedule="SportsScoresAndSchedule",e.sportsScoresAndScheduleFull="SportsScoresAndScheduleFull",e.sportsSquad="SportsSquad",e.sportsStandings="SportsStandings",e.sportsStandingsList="SportsStandingsList",e.sportsStatLeaders="SportsStatLeaders",e.sportsStats="SportsStats",e.sportsTabLayout="SportsTabLayout",e.sportsTeamFormation="SportsTeamFormation",e.sportsTeamProbability="SportsTeamProbability",e.sportsTennisScoresAndScheduleFull="SportsTennisScoresAndScheduleFull",e.sportsTennisTournamentInfo="SportsTennisTournamentInfo",e.sportsTournamentInfo="SportsTournamentInfo",e.sportsTournamentLeaderboard="SportsTournamentLeaderboard",e.sportsTournamentMatchRow="SportsTournamentMatchRow",e.sportsTournamentResultsAndSchedule="SportsTournamentResultsAndSchedule",e.sportsTournamentSchedule="SportsTournamentSchedule",e.sportsTournamentStandings="SportsTournamentStandings";e.sportsUnavailablePlayers="SportsUnavailablePlayers",e.sportsVideoList="SportsVideoList",e.sportsWorldCupCard="SportsWorldCupCard",e.sportsWorldCupCardWC="SportsWorldCupCardWC",e.spotlightCard="SpotlightCard",e.spotlightCardWC="SpotlightCardWC",e.starterKit="StarterKit",e.starterKitWC="StarterKitWC",e.stickyPeek="StickyPeek",e.storyCarousel="StoryCarousel",e.storyPage="StoryPage",e.stripe="Stripe",e.stripeFeed="StripeFeed",e.stripeView="StripeView",e.stripeWC="StripeWC",e.summaryCardWC="SummaryCardWC",e.superAppPage="SuperAppHomepage",e.superBreakingNews="SuperBreakingNews",e.superCoachMark="SuperCoachMark",e.superCoachMarkWC="SuperCoachMarkWC",e.superListCard="SuperListCard",e.superNav="SuperNav",e.superNavCoachMark="SuperNavCoachMark",e.superappBannerWC="SuperappBannerWC",e.superappUpsellCardWC="SuperappUpsellCardWC",e.tabbedFeedWC="TabbedFeedWC",e.tabbedInfopane="TabbedInfopane",e.tabbedInfopaneTabPreview="TabbedInfopaneTabPreview",e.taboolaRiver="TaboolaRiver",e.testBingNudge="TestBingNudge",e.themePicker="ThemePicker",e.themePickerWC="ThemePickerWC",e.tipsCard="TipsCard",e.toast="Toast",e.toastWC="ToastWC",e.todoCardWC="TodoCardWC",e.topSites="TopSites",e.topSitesBookmarks="TopSitesBookmarks",e.topSitesCommon="TopSitesCommon",e.topSitesEdge="TopSitesEdge",e.topSitesEdgeNextWC="TopSitesEdgeNextWC",e.topSitesNewsbar="TopSitesNewsbar",e.topicTags="TopicTags",e.topicsHub="TopicsHub",e.trafficCard="TrafficCard",e.trafficCardWC="TrafficCardWC",e.trafficMap="TrafficMap",e.trafficPage="TrafficPage",e.translateTemporary="TranslateTemporary",e.travelArticleCard="TravelArticleCard",e.travelArticlePageCard="TravelArticlePageCard",e.travelArticlePill="TravelArticlePill",e.travelCard="TravelCard",e.travelCarousel="TravelCarousel",e.travelCollectionCard="TravelCollectionCard",e.travelDestination="TravelDestination",e.travelDestinationBanner="TravelDestinationBanner",e.travelDestinationDetailsBanner="TravelDestinationDetailsBanner",e.travelFeed="TravelFeed",e.travelInspirationCard="TravelInspirationCard",e.travelInspirationCardWC="TravelInspirationCardWC",e.travelLandingPage="TravelLandingPage",e.travelMsnHpCard="TravelMsnHpCard",e.travelPage="TravelPage",e.travelSaveButton="TravelSaveButton",e.travelSdDestinationsCard="TravelSdDestinationsCard",e.travelSdFlightsCard="TravelSdFlightsCard",e.travelSdHotelsCard="TravelSdHotelsCard",e.travelSdThemesCard="TravelSdThemesCard",e.travelTabCarousel="TravelTabCarousel",e.travelTourActivityCard="TravelTourActivityCard",e.trendingNews="TrendingNews",e.trendingNow="TrendingNow",e.trendingNowWC="TrendingNowWC",e.trendingSearchCard="TrendingSearchCard",e.trendingTopics="TrendingTopics",e.tripleCard="TripleCard",e.ugcCreator="UgcCreator",e.ugcCreatorHomepage="UgcCreatorHomepage",e.unifiedMobileFeed="UnifiedMobileFeed",e.userInitiatedPageRefresh="UserInitiatedPageRefresh",e.userProfileDisplay="UserProfileDisplay",e.verticalLeftNav="VerticalLeftNav",e.videoCard="VideoCard",e.videoCardWC="VideoCardWC",e.videoDetails="VideoDetails",e.videoList="VideoList",e.videoShoppingCard="VideoShoppingCard",e.videoShoppingCarouselCard="VideoShoppingCarouselCard",e.videosFeed="VideosFeed",e.viewsArticle="ViewsArticle",e.viewsCoachmark="ViewsCoachmark",e.viewsGallery="ViewsGallery",e.viewsNativeAd="ViewsNativeAd",e.viewsRail="ViewsRail",e.voiceSearch="VoiceSearch",e.voiceSearchWC="VoiceSearchWC",e.waffleWC="WaffleWC",e.walletPersonalizedOfferSdCardWC="WalletPersonalizedOfferSdCardWC",e.watch="Watch",e.watchWC="WatchWC",e.watchlistCard="WatchlistCard",e.watchlistView="WatchlistView",e.waterTrackerCard="WaterTrackerCard",e.waterfallViewFeed="WaterfallViewFeed",e.weatherActivityPlanner="WeatherActivityPlanner",e.weatherActivityWatchlist="WeatherActivityWatchlist",e.weatherAds="WeatherAds",e.weatherCard="WeatherCard",e.weatherCardData="WeatherCardData",e.weatherCardWC="WeatherCardWC",e.weatherCarousel="WeatherCarousel",e.weatherColdStartGuide="WeatherColdStartGuide",e.weatherCurrentWC="WeatherCurrentWC",e.weatherDailyTrendChart="WeatherDailyTrendChart",e.weatherData="WeatherData",e.weatherEplant="WeatherEplant",e.weatherEplantTasksPhone="WeatherEplantTasksPhone",e.weatherEventAlert="WeatherEventAlert",e.weatherEventBanner="WeatherEventBanner",e.weatherExtensionSection="WeatherExtensionSection",e.weatherFeedback="WeatherFeedback",e.weatherFloatButtons="WeatherFloatButtons",e.weatherForecast="WeatherForecast",e.weatherForecastDayNightWC="WeatherForecastDayNightWC",e.weatherForecastDayWC="WeatherForecastDayWC",e.weatherForecastHistoryWC="WeatherForecastHistoryWC",e.weatherForecastPerHourWC="WeatherForecastPerHourWC",e.weatherForecastSunMoonPhaseWC="WeatherForecastSunMoonPhaseWC",e.weatherForecastSunMoonWC="WeatherForecastSunMoonWC",e.weatherForecastTab="WeatherForecastTab",e.weatherForecastVideo="WeatherForecastVideo",e.weatherFreDialog="WeatherFreDialog",e.weatherFunFact="WeatherFunFact",e.weatherGuidedConversation="WeatherGuidedConversation",e.weatherHistoricalRecordWC="WeatherHistoricalRecordWC",e.weatherHistoricalTemperatureWC="WeatherHistoricalTemperatureWC",e.weatherHistoricalTrends="WeatherHistoricalTrends",e.weatherHolidayEffects="WeatherHolidayEffects",e.weatherHourlyHistogramWC="WeatherHourlyHistogramWC",e.weatherHourlyTab="WeatherHourlyTab",e.weatherImmersiveForecastWC="WeatherImmersiveForecastWC",e.weatherInfoCard="WeatherInfoCard",e.weatherInfoMini="WeatherInfoMini",e.weatherInfoSpan="WeatherInfoSpan",e.weatherInsightsSection="WeatherInsightsSection",e.weatherLifeAllQuiz="WeatherLifeAllQuiz",e.weatherLifeCurrent="WeatherLifeCurrent",e.weatherLifeCurrentV2="WeatherLifeCurrentV2",e.weatherLifeDayHourPanel="WeatherLifeDayHourPanel",e.weatherLifeEntryWC="WeatherLifeEntryWC",e.weatherLifeFactsCard="WeatherLifeFactsCard",e.weatherLifeHolidayCard="WeatherLifeHolidayCard",e.weatherLifeIndexEntry="WeatherLifeIndexEntry",e.weatherLifeNews="WeatherLifeNews",e.weatherLifeQuizCard="WeatherLifeQuizCard",e.weatherLifeSpecialToday="WeatherLifeSpecialToday",e.weatherLocationCardWC="WeatherLocationCardWC",e.weatherLocationPanel="WeatherLocationPanel",e.weatherLocationPopup="WeatherLocationPopup",e.weatherLocationSearch="WeatherLocationSearch",e.weatherLocationSearchPhoneWC="WeatherLocationSearchPhoneWC",e.weatherLocationWC="WeatherLocationWC",e.weatherMapAlertCard="WeatherMapAlertCard",e.weatherMapAnimationBox="WeatherMapAnimationBox",e.weatherMapCarousel="WeatherMapCarousel",e.weatherMapContentModal="WeatherMapContentModal",e.weatherMapControlBox="WeatherMapControlBox",e.weatherMapDataFilter="WeatherMapDataFilter",e.weatherMapForecastCard="WeatherMapForecastCard",e.weatherMapGroupSwitcher="WeatherMapGroupSwitcher",e.weatherMapGroupSwitcherButtonWC="WeatherMapGroupSwitcherButtonWC",e.weatherMapHurricanePane="WeatherMapHurricanePane",e.weatherMapLayerChooser="WeatherMapLayerChooser",e.weatherMapLegendIndicator="WeatherMapLegendIndicator",e.weatherMapLegendWC="WeatherMapLegendWC",e.weatherMapLifeIndex="WeatherMapLifeIndex",e.weatherMapLifeTips="WeatherMapLifeTips",e.weatherMapMini="WeatherMapMini",e.weatherMapNaviCard="WeatherMapNaviCard",e.weatherMapNews="WeatherMapNews",e.weatherMapPopup="WeatherMapPopup",e.weatherMapPromotionCard="WeatherMapPromotionCard",e.weatherMapSidebar="WeatherMapSidebar",e.weatherMapTimeline="WeatherMapTimeline",e.weatherMapTimelineWC="WeatherMapTimelineWC",e.weatherMapV2="WeatherMapV2",e.weatherMapWC="WeatherMapWC",e.weatherMapWeatherCard="WeatherMapWeatherCard",e.weatherMapsRotationWC="WeatherMapsRotationWC",e.weatherMinimapWC="WeatherMinimapWC",e.weatherMonthCalendar="WeatherMonthCalendar",e.weatherMonthlyForecastSummary="WeatherMonthlyForecastSummary",e.weatherMonthlySummaryWC="WeatherMonthlySummaryWC",e.weatherMonthlyTrendChart="WeatherMonthlyTrendChart",e.weatherNotification="WeatherNotification",e.weatherNowcastHistogram="WeatherNowcastHistogram",e.weatherNpsCard="WeatherNpsCard",e.weatherOverviewV2="WeatherOverviewV2",e.weatherOverviewWC="WeatherOverviewWC",e.weatherPageMeta="WeatherPageMeta",e.weatherPageRoot="WeatherPageRoot",e.weatherPageV2="WeatherPageV2",e.weatherPageWC="WeatherPageWC",e.weatherPersonaCard="WeatherPersonaCard",e.weatherPersonaSummary="WeatherPersonaSummary",e.weatherPollenCityList="WeatherPollenCityList",e.weatherPollenDailyInfo="WeatherPollenDailyInfo",e.weatherPollenImages="WeatherPollenImages",e.weatherPollenNodata="WeatherPollenNodata",e.weatherPollenTeaser="WeatherPollenTeaser",e.weatherPollenWeatherForecast="WeatherPollenWeatherForecast",e.weatherRecommendation="WeatherRecommendation",e.weatherRightRail="WeatherRightRail",e.weatherSettingCenter="WeatherSettingCenter",e.weatherSlideDrawer="WeatherSlideDrawer",e.weatherToast="WeatherToast",e.weatherTodayCard="WeatherTodayCard",e.weatherTodayHistoryWC="WeatherTodayHistoryWC",e.weatherTodayMini="WeatherTodayMini",e.weatherTodayMiniWC="WeatherTodayMiniWC",e.weatherTravelCarousel="WeatherTravelCarousel",e.weatherTrendOverview="WeatherTrendOverview",e.weatherVideoEntryWC="WeatherVideoEntryWC",e.welcomeGreetingLight="WelcomeGreetingLight",e.welcomeGreetingWC="WelcomeGreetingWC",e.widgetPickerWC="WidgetPickerWC",e.widgets="Widgets",e.widgetsDynamicFeed="WidgetsDynamicFeed",e.widgetsHomePage="WidgetsHomePage",e.winAppWC="WinAppWC",e.windowsOfficeFeed="WindowsOfficeFeed",e.windowsShellAccountManager="WindowsShellAccountManager",e.windowsShellBannerManager="WindowsShellBannerManager",e.windowsShellBannersManager="WindowsShellBannersManager",e.windowsShellColdStartBanner="WindowsShellColdStartBanner",e.windowsShellColdStartCard="WindowsShellColdStartCard",e.windowsShellContentPreview="WindowsShellContentPreview",e.windowsShellDialogBox="WindowsShellDialogBox",e.windowsShellEntry="WindowsShellEntry",e.windowsShellHeader="WindowsShellHeader",e.windowsShellHotList="WindowsShellHotList",e.windowsShellImportBrowserDataBanner="WindowsShellImportBrowserDataBanner",e.windowsShellInfopane="WindowsShellInfopane",e.windowsShellLocationDialog="WindowsShellLocationDialog",e.windowsShellMarketMismatchBanner="WindowsShellMarketMismatchBanner",e.windowsShellMorningDigest="WindowsShellMorningDigest",e.windowsShellNewsPromoCard="WindowsShellNewsPromoCard",e.windowsShellNotificationBanner="WindowsShellNotificationBanner",e.windowsShellNotificationSettings="WindowsShellNotificationSettings",e.windowsShellPinOverlay="WindowsShellPinOverlay",e.windowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.windowsShellRefreshAnimationBanner="WindowsShellRefreshAnimationBanner",e.windowsShellRefreshDiscoveryBanner="WindowsShellRefreshDiscoveryBanner",e.windowsShellRiver="WindowsShellRiver",e.windowsShellSettingsMenu="WindowsShellSettingsMenu",e.windowsShellShoppingBanner="WindowsShellShoppingBanner",e.windowsShellSoftLanding="WindowsShellSoftLanding",e.windowsShellTrendingTopics="WindowsShellTrendingTopics",e.windowsWidgetsHub="WindowsWidgetsHub",e.xboxFeedWC="XboxFeedWC",e.xfeed="Xfeed",e.xfeedWC="XfeedWC",e.yandexSearchBoxWC="YandexSearchBoxWC"}(i||(i={}))},25845:function(e,t,n){"use strict";var i,r;n.d(t,{V:function(){return i}}),function(e){e[e.init=0]="init",e[e.subsequent=1]="subsequent",e[e.refresh=2]="refresh"}(i||(i={})),function(e){e.Long="long",e.Short="short"}(r||(r={}))},38895:function(e,t,n){"use strict";n.d(t,{NH:function(){return l},PC:function(){return i},PQ:function(){return r},SL:function(){return o},XW:function(){return c},mX:function(){return a},my:function(){return s},pN:function(){return d}});const i="prg-",r="v3",o="v3.1",a="/resolver/api/resolve/",s="prg-crsfdheadrem",c="prg-callcrsfrakm",d="https://assets.msn.com",l="https://assets.msn.cn"},61104:function(e,t,n){"use strict";var i;n.d(t,{U:function(){return i}}),function(e){e.BackfillContentDueToSSRAdsFailed="__backfillContentDueToSSRAdsFailed__",e.HydrationPromise="__hydrationPromise__",e.IsSSRWpoFeedConsumed="__isSSRWpoFeedConsumed__",e.NavEventEnabled="__navEventEnabled__",e.PlaceHolderResponse="__placeHolderResponse__"}(i||(i={}))},82890:function(e,t,n){"use strict";var i;n.d(t,{X:function(){return r},p:function(){return i}}),function(e){e.basicFeed="BasicFeed",e.desktopFeedStart="DesktopFeedStart",e.discoverCarouselSection="FinanceDiscoverSection_carouselCard",e.discoverFirstSection="FinanceDiscoverSection_first",e.discoverFollowedSection="FinanceDiscoverSection_followedCard",e.discoverSecondSection="FinanceDiscoverSection_second",e.feed="Feed",e.feedBasicRender="FeedBasicRender",e.feedRequest="FeedRequest",e.feedRequestFG="FeedRequest.FG",e.feedSDRender="FeedSDRender",e.isPrerenderedAd="isPrerenderedAd",e.firstSectionRenderStart="FirstSectionRenderStart",e.riverFirstSection="RiverFirstSection",e.sdCards="SDCards",e.searchBox="SearchBox",e.searchBoxToFeed="SearchBoxToFeed",e.secondSectionRenderEnd="SecondSectionRenderEnd",e.secondSectionRenderStart="SecondSectionRenderStart",e.TTPR="TTPR",e.viewCards="ViewCards",e.wpoCallStart="WpoCallStart",e.wpoResponseBack="WpoResponseBack",e.feedCallStart="FeedCallStart",e.feedResponseBack="FeedResponseBack",e.feedParse="FeedParse",e.configEndToFeedStart="ConfigEndToFeedStart",e.feedResponseTo1SSectionProcessed="FeedResponseTo1SSectionProcessed",e.isSSREnabled="isSSREnabled",e.isSSRCompleted="isSSRCompleted",e.isSSRAborted="isSSRAborted",e.complete="Complete",e.sectionRenderStart="sectionRenderStart"}(i||(i={}));const r="WidgetsConfigsEnd"},9210:function(e,t,n){"use strict";n.d(t,{UH:function(){return i},lU:function(){return r}});const i="news",r="feed/personalize/settings"},32506:function(e,t,n){"use strict";var i;n.d(t,{d:function(){return i}}),function(e){e.InterestsNeedRefresh="interests-need-refresh",e.VideoGameInterestFollowed="video-game-interest-followed",e.GamingFeedEngagement="gaming-feed-engagement"}(i||(i={}))},15213:function(e,t,n){"use strict";var i,r;n.d(t,{q:function(){return i},t:function(){return r}}),function(e){e.TimeToRequestAd="TTNativeAd.Request",e.TimeToRequestAdBackground="TTNativeAd.Background.Request",e.TimeToServeAd="TTNativeAd.Serve",e.TimeToServeAdBackground="TTNativeAd.Background.Serve",e.TimeToRenderAd="TTVR.NativeAd",e.TimeToPrerenderAd="TTNativeAd.Prerender",e.TimeToAdResponse="TTNativeAd.Response",e.ApiDuration="NativeAd.ApiDuration",e.RenderReady="NativeAd.RenderReady",e.RequestInitiated="NAdInitiate",e.RequestSent="NAdInitiateToReq",e.AdFetched="NAdFetch",e.AdServerLatency="NAdServerLatency",e.AdProcessed="NAdProcess",e.RespToAdCallback="NAdRespToCallback",e.AdCallbackProcessed="NAdCallbackProcess",e.AdRendered="NAdRender",e.TimeToConsumeAds="TTNativeAd.Consume",e.TimeToConsumeAdsSSR="TTNativeAd.ConsumeSSR"}(i||(i={})),function(e){e.TimeToAdScriptRequest="TTDisplayAd.ScriptRequest",e.TimeToAdScriptLoaded="TTDisplayAd.ScriptLoaded",e.TimeToAdFetchStarted="TTDisplayAd.FetchStarted",e.TimeToAdFetchCompleted="TTDisplayAd.FetchCompleted",e.TimeToAdRenderCompleted="TTDisplayAd.RenderCompleted"}(r||(r={}))},12108:function(e,t,n){"use strict";var i,r;n.d(t,{F:function(){return r},G:function(){return i}}),function(e){e.Article="article",e.ArticleFullScreen="articlefullscreen",e.CasualGames="casualgames",e.CasualGamesPlay="casualgamesplay",e.ChannelSource="channel::source",e.ChannelTopic="channel::topic",e.CmsExperience="shopping::cms",e.CmsBaseExperience="shopping::cmsbase",e.DHP="dhp",e.EdgeWelcome="edgewelcome",e.ForumDealsPage="shopping::buydirect::superdeals",e.Gallery="gallery",e.GalleryFullScreen="galleryfullscreen",e.Homepage="hp",e.Launcher="launcher",e.Lenovo="lenovo",e.MMX="mmx",e.NewsAndInterests="newsandinterestshp",e.Newsbar="newsbar",e.NewsbarUpsell="newsbarupsell",e.NewsCoronavirus="news::coronavirus",e.NewsVLP="news",e.NTP="ntp",e.Sidebar="sidebar",e.Story="story",e.Shopping="shopping",e.ShoppingDealsCategory="shopping::deals-category",e.ShoppingProductDetails="shopping::product",e.ShoppingExpressCheckout="shopping::express-checkout",e.ShoppingForumCheckout="shopping::buydirect::checkout",e.ShoppingForumProductPage="shopping::buydirect::product",e.ShoppingForumcheckoutWidget="shopping::buydirect::checkout::widget",e.ShoppingForumProductDetails="shopping::buydirect::product1",e.ShoppingForumCancelOrder="shopping::buydirect::cancel-order",e.ShoppingForumReturnDetails="shopping::buydirect::return-details",e.ShoppingForumReturnOrder="shopping::buydirect::return-orders",e.ShoppingForumRefundDetails="shopping::buydirect::refund-details",e.ShoppingForumRefundOrder="shopping::buydirect::refund-orders",e.ShoppingLiveDetails="shoppinglivedetails",e.ShoppingLiveInmobiDetails="shoppingliveinmobidetails",e.ShoppingLiveEmbed="shopping::live::embed",e.ShoppingLiveFeed="shopping::live",e.ShoppingLiveBase="shopping::live",e.ShoppingMomentInTime="shopping::mit",e.ShoppingExplore="shopping::explore",e.ShoppingExploreHalloween="shopping::explore::halloween",e.ShoppingCouponsPage="shopping::coupons",e.ShoppingDealsHomePage="shopping::deals::coupons",e.ShoppingStoreCouponsPage="shopping::store-coupons",e.ShoppingStyles="shopping::styles",e.ShoppingStylesHomePage="shopping::style-ideas",e.ShoppingLanding="shopping::buydirect",e.ShoppingSearchResult="shopping::buydirect::search",e.ShoppingCart="shopping::buydirect::cart",e.ShoppingOrders="shopping::buydirect::orders",e.ShoppingForumOrderConfirmation="shopping::buydirect::order-confirmation",e.ShoppingForumOrderDetails="shopping::buydirect::order-details",e.ShoppingForumHome="shopping::buydirect::home",e.Source="source",e.Sports="sports",e.Topic="topic",e.Travel="travel",e.TravelPlaces="travel::places",e.TravelCollections="travel::collections",e.Video="video",e.VideoInf="videoinf",e.WebContent="webcontent",e.Widget="widget",e.Windows="windowshp",e.WindowsShellHP="windowsshellhp",e.ShoppingAllStoresPage="shopping::stores::popular",e.ShoppingLiveProductDetailsPage="shopping::live::product",e.ShoppingForumSellerPage="shopping::buydirect::stores",e.ShoppingForumFavorites="shopping::buydirect::favorites",e.ShoppingBlackjackPage="shopping::deals",e.ShoppingBlackjackDealPage="shopping::deals::product",e.ShoppingSearch="shopping::search",e.ShoppingBingProductDetails="shopping::product-details",e.ShoppingInspiration="shopping::inspire",e.ShoppingBuyingGuide="shopping::buying-guide",e.ShoppingAssistant="shopping::ai",e.ShoppingShopDeals="shopping::shopdeals",e.ShoppingArticlePage="shopping::shop-article",e.ShoppingGuidesPage="shopping::shop-guides",e.ShoppingDebugPage="shopping::debug"}(i||(i={})),function(e){e.Adult="adult",e.Enterprise="enterprise",e.Kids="kids"}(r||(r={}))},33799:function(e,t,n){"use strict";var i,r,o;n.d(t,{Hy:function(){return i},Qm:function(){return r}}),function(e){e[e.Unknown=0]="Unknown",e[e.NotSignedIn=1]="NotSignedIn",e[e.SignedIn=2]="SignedIn"}(i||(i={})),function(e){e.MSA="MSA",e.AAD="AAD",e.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(r||(r={})),function(e){e[e.NonAadAccount=0]="NonAadAccount",e[e.AadAccount=1]="AadAccount",e[e.Unknown=2]="Unknown"}(o||(o={}))},64893:function(e,t,n){"use strict";n.d(t,{$n:function(){return i},bT:function(){return r},cN:function(){return o}});const i=[{id:"ar-ae",value:"ar-ae",displayString:"   ()",direction:"rtl"},{id:"ar-eg",value:"ar-eg",displayString:" ()",direction:"rtl"},{id:"ar-sa",value:"ar-sa",displayString:"   ()",direction:"rtl"},{id:"bn-in",value:"bn-in",displayString:"India ()",direction:"ltr"},{id:"cs-cz",value:"cs-cz",displayString:"esk republika (etina)",direction:"ltr"},{id:"da-dk",value:"da-dk",displayString:"Danmark (Dansk)",direction:"ltr"},{id:"de-at",value:"de-at",displayString:"sterreich (Deutsch)",direction:"ltr"},{id:"de-ch",value:"de-ch",displayString:"Schweiz (Deutsch)",direction:"ltr"},{id:"de-de",value:"de-de",displayString:"Deutschland (Deutsch)",direction:"ltr"},{id:"el-gr",value:"el-gr",displayString:" ()",direction:"ltr"},{id:"en-ae",value:"en-ae",displayString:"United Arab Emirates (English)",direction:"ltr"},{id:"en-au",value:"en-au",displayString:"Australia (English)",direction:"ltr"},{id:"en-ca",value:"en-ca",displayString:"Canada (English)",direction:"ltr"},{id:"en-gb",value:"en-gb",displayString:"United Kingdom (English)",direction:"ltr"},{id:"en-ie",value:"en-ie",displayString:"Ireland (English)",direction:"ltr"},{id:"en-in",value:"en-in",displayString:"India (English)",direction:"ltr"},{id:"en-my",value:"en-my",displayString:"Malaysia (English)",direction:"ltr"},{id:"en-nz",value:"en-nz",displayString:"New Zealand (English)",direction:"ltr"},{id:"en-ph",value:"en-ph",displayString:"Philippines (English)",direction:"ltr"},{id:"en-sg",value:"en-sg",displayString:"Singapore (English)",direction:"ltr"},{id:"en-us",value:"en-us",displayString:"United States (English)",direction:"ltr"},{id:"en-xl",value:"en-xl",displayString:"International Edition (English)",direction:"ltr"},{id:"en-za",value:"en-za",displayString:"South Africa (English)",direction:"ltr"},{id:"es-ar",value:"es-ar",displayString:"Argentina (espaol)",direction:"ltr"},{id:"es-cl",value:"es-cl",displayString:"Chile (espaol)",direction:"ltr"},{id:"es-co",value:"es-co",displayString:"Colombia (espaol)",direction:"ltr"},{id:"es-es",value:"es-es",displayString:"Espaa (espaol)",direction:"ltr"},{id:"es-mx",value:"es-mx",displayString:"Mxico (espaol)",direction:"ltr"},{id:"es-pe",value:"es-pe",displayString:"Per (espaol)",direction:"ltr"},{id:"es-us",value:"es-us",displayString:"United States (espaol)",direction:"ltr"},{id:"es-ve",value:"es-ve",displayString:"Venezuela (espaol)",direction:"ltr"},{id:"es-xl",value:"es-xl",displayString:"Amrica Latina (espaol)",direction:"ltr"},{id:"fi-fi",value:"fi-fi",displayString:"Suomi (suomi)",direction:"ltr"},{id:"fr-be",value:"fr-be",displayString:"Belgique (franais)",direction:"ltr"},{id:"fr-ca",value:"fr-ca",displayString:"Canada (franais)",direction:"ltr"},{id:"fr-ch",value:"fr-ch",displayString:"Suisse (franais)",direction:"ltr"},{id:"fr-fr",value:"fr-fr",displayString:"France (franais)",direction:"ltr"},{id:"fr-xl",value:"fr-xl",displayString:"Afrique francophone (franais)",direction:"ltr"},{id:"he-il",value:"he-il",displayString:" ()",direction:"rtl"},{id:"hi-in",value:"hi-in",displayString:"India ()",direction:"ltr"},{id:"hu-hu",value:"hu-hu",displayString:"Magyarorszg (magyar)",direction:"ltr"},{id:"id-id",value:"id-id",displayString:"Indonesia (Bahasa Indonesia)",direction:"ltr"},{id:"it-it",value:"it-it",displayString:"Italia (italiano)",direction:"ltr"},{id:"ja-jp",value:"ja-jp",displayString:" ()",direction:"ltr"},{id:"ko-kr",value:"ko-kr",displayString:" ()",direction:"ltr"},{id:"mr-in",value:"mr-in",displayString:"India ()",direction:"ltr"},{id:"nb-no",value:"nb-no",displayString:"Norge (norsk, bokml)",direction:"ltr"},{id:"nl-be",value:"nl-be",displayString:"Belgi (Nederlands)",direction:"ltr"},{id:"nl-nl",value:"nl-nl",displayString:"Nederland (Nederlands)",direction:"ltr"},{id:"pl-pl",value:"pl-pl",displayString:"Polska (polski)",direction:"ltr"},{id:"pt-br",value:"pt-br",displayString:"Brasil (portugus)",direction:"ltr"},{id:"pt-pt",value:"pt-pt",displayString:"Portugal (Portugus)",direction:"ltr"},{id:"ru-xl",value:"ru-xl",displayString:"  (P)",direction:"ltr"},{id:"ru-ru",value:"ru-ru",displayString:" (P)",direction:"ltr"},{id:"sv-se",value:"sv-se",displayString:"Sverige (svenska)",direction:"ltr"},{id:"te-in",value:"te-in",displayString:"India ()",direction:"ltr"},{id:"th-th",value:"th-th",displayString:" ()",direction:"ltr"},{id:"tr-tr",value:"tr-tr",displayString:"Trkiye (Trke)",direction:"ltr"},{id:"vi-vn",value:"vi-vn",displayString:"Vit Nam (Ting Vit)",direction:"ltr"},{id:"zh-cn",value:"zh-cn",displayString:" ()",direction:"ltr"},{id:"zh-hk",value:"zh-hk",displayString:" ()",direction:"ltr"},{id:"zh-tw",value:"zh-tw",displayString:" ()",direction:"ltr"}];function r(e,t){return e.displayString<t.displayString?-1:e.displayString>t.displayString?1:0}function o(e){if(""!==document.dir)return"rtl"===document.dir;const t=i.find((t=>t.id===e));return t&&"rtl"===t.direction}},95527:function(e,t,n){"use strict";n.d(t,{Di:function(){return i},SD:function(){return o},fw:function(){return r}});const i="peregrine-widgets",r="peregrine-widget-settings",o="prg-pw-"},25568:function(e,t,n){"use strict";n.d(t,{$s:function(){return h},$v:function(){return L},CO:function(){return R},GR:function(){return r},H0:function(){return p},I1:function(){return g},IA:function(){return F},J8:function(){return d},L3:function(){return c},LJ:function(){return E},Mo:function(){return a},Mt:function(){return T},P$:function(){return A},Pg:function(){return v},Qn:function(){return b},Qs:function(){return w},S1:function(){return $},SO:function(){return x},Td:function(){return f},UW:function(){return l},YU:function(){return I},_O:function(){return _},bx:function(){return C},di:function(){return O},eK:function(){return S},gr:function(){return D},hE:function(){return i},hM:function(){return k},hZ:function(){return u},hk:function(){return s},i9:function(){return U},kJ:function(){return P},kX:function(){return y},lP:function(){return M},ly:function(){return m},os:function(){return N},vy:function(){return B},xE:function(){return o}});const i={activityId:"activityId",apiKey:"apikey",audienceMode:"audienceMode",bypassTrigger:"bypass_trigger",cm:"cm",complexInfoPaneEnabled:"cipenabled",contentType:"contentType",delta:"delta",disableContent:"disablecontent",disableTypeSerialization:"DisableTypeSerialization",duotone:"duotone",infopaneCount:"infopaneCount",fdhead:"fdhead",feedLayoutRequestType:"t",filter:"$filter",includeFollowingFilters:"iff",ids:"ids",interestIds:"InterestIds",location:"location",market:"market",newsSkip:"newsSkip",newsTop:"newsTop",ocid:"ocid",pageConfiguration:"pgc",parentContentId:"parent-content-id",parentNamespace:"parent-ns",parentTitle:"parent-title",providerId:"ProviderId",queryQ:"q",query:"query",queryType:"queryType",qScope:"qscope",requestId:"rid",responseSchema:"responseschema",select:"$select",session:"session",signInCookieName:"scn",skip:"$skip",source:"source",timeOut:"timeOut",top:"$top",type:"type",user:"user",wrapOData:"wrapodata",wpoitems:"wpoitems",wpoPageId:"wpopageid",wpoSchema:"wposchema",caller:"caller",dhp:"dhp",webWorker:"webWorker",edgeNoAds:"edgenoads",edgeReduceAds:"edgereduceads",column:"column",anaheimPageLayout:"anaheimPageLayout",adRefreshVariant:"adRefreshVariant",gdpr:"gdpr",verticalName:"verticalName"},r="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM",o="Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo",a="service/news/feed/pages/",s="serviceak/news/feed/pages/",c="news/feed/pages/",d="ntpxfeed",l="wpoxfeed",u="news/feed/pages/",p="winxfeed",h="wpodhp",g="gamingfeed",m="ntpfollowfeed",f="filteredfollowingchannels",v="prong1followfeed",y="prong2followfeed",S="followingxfeed",C="ntp",b="ntpxfeed",w="prong2xfeed",T="news/feed/Segments",k="https://api.msn.com",P="https://sf-ppe.oneservice-test.msn.com",A="wpo-usebasedomain",I="wpo-useintdomain",E="https://ppe-api.msn.com",x="news/feed/pages/ntpxfeed",M="news/feed/pages/",O=17,L="xbox-browser",D="jY4a3fYtgzb7PIcW0Kj6amp5k6LwDefg6RSnkmxjto",R="prg-useakmaipath",F="prg-ssr-ext1sdns",B="msnkids",N="dy0rQcQaYj5cKZ2Cy0cdaRDJcC5maS5hPj9w2SbeRf",U="anaheim-ntp-following",$="vevII5dbHfpd1fHIMlPxbas6GZQEFOm4CozFHehOgW";function _(e,t){t.set(i.wrapOData,"false").set(i.disableTypeSerialization,"true").set(i.queryType,e.queryType||"myfeed").set(i.timeOut,`${function(e){const{timeoutMs:t,query:n,customFeedTimeoutMs:i}=e;return n&&i?i:t}(e)}`).set(i.contentType,e.contentType).set(i.apiKey,r),(e.useDelta||e.sessionId)&&(t.set(i.delta,"true"),e.sessionId&&t.set(i.session,e.sessionId)),e.ocid&&t.set(i.ocid,e.ocid)}},65932:function(e,t,n){"use strict";n.d(t,{T3:function(){return c},Uo:function(){return a},q1:function(){return s},tz:function(){return o}});var i=n(27003);let r;function o(e){r=e}function a(e,t,n=!0){const i=d();let o=i[e];if(o||(o=[],i[e]=o),o.push(t),n){const n=r(e);if(n){const e=n.getCurrentState();e&&t(e)}}}function s(e,t){const n=d(),i=n[e];if(i&&i.length){for(let e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}n[e]=i}}function c(e,t){const n=d()[e];if(n&&t)for(const e of n)e(t)}function d(){return i.Gq.get("reducers__callbackMap",(()=>({})))}},93450:function(e,t,n){"use strict";n.d(t,{_:function(){return C}});var i=n(27670),r=n(93303),o=n(44446),a=n(90351),s=n(25514),c=n(46728),d=n(33379);const l=new Map;function u(e){return e+"."+r.B.connectorStateKey}const p={registerInjection:function(e,t){let n=l.get(t);n||(n=new Set,l.set(t,n)),n.add(u(e))},initializeExperience:function(e,t,n){const i=u(t),r=(0,a.Z)(e,i,void 0),o=(0,a.Z)(e,u(n),void 0),c=Object.assign(Object.assign({},r),{[n]:o});(0,s.Z)(e,i,c)},reportStateChange:function(e,t,n){const i=l.get(t);if(i)for(const r of i){const i=(0,a.Z)(e,r,void 0);i&&(0,s.Z)(e,r,Object.assign(Object.assign({},i),{[t]:n}))}}};var h=n(85663),g=n(65932);class m{constructor(){this._connectorMap={},this._globalConnectors=[],this._allConnectors=[],this._getDataConnectorPendingPromises=new Map,this.reduce=this.reduce.bind(this)}connectors(){return this._allConnectors}connector(e){return this._connectorMap[e]}globalConnectors(){return this._globalConnectors}getDataConnector(e){const t=this.connector(e);if(t)return Promise.resolve(t);const n=this._getDataConnectorPendingPromises.get(e);if(n)return n.promise;let i,r;const o=new Promise(((e,t)=>{i=e,r=t}));return this._getDataConnectorPendingPromises.set(e,{promise:o,resolve:i,reject:r}),o}reduce(e,t){(0,h.isNullOrUndefined)(e)&&(e={});let n=Object.assign({},e),i=!1;const l=t.key;if(void 0!==t&&void 0!==l){const u="string"==typeof t.type;if(u&&t.type.endsWith(r.B.renderAction)){const t=l+"."+r.B.connectorStateKey,c=(0,o.Z)({},(0,a.Z)(e,t,void 0));(0,s.Z)(n,t,c),i=!0}else if(u&&t.type.endsWith(r.B.dataConnectorMergeInitAction)){const e=l,r=t.params[0];r&&(p.initializeExperience(n,e,r),i=!0)}else{const e=this._connectorMap[l];if(e){e.isGlobal&&(n=(0,c.Z)({},n));const r=this.computeNextStateForConnector(n,l,t);i=r.stateChanged,i&&(p.reportStateChange(n,l,r.newState),(0,d.N)()&&(0,g.T3)(l,r.newState))}else if(!(0,d.N)())throw new Error("Reducer for: "+l+" must not return undefined.")}}else Object.keys(this._connectorMap).forEach((e=>{this.computeNextStateForConnector(n,e,t).stateChanged&&(i=!0)}));return i?n:e}addSubReducerForConnector(e){if(!e)throw new Error("The parameter 'connector' cannot be null.");const t=e.fullNamespace;if(this._connectorMap[t]=e,this._allConnectors.push(e),e.isGlobal&&this._globalConnectors.push(e),this._getDataConnectorPendingPromises.has(e.namespace)){const t=this._getDataConnectorPendingPromises.get(e.namespace);try{t.resolve(e)}catch(e){t.reject(e)}this._getDataConnectorPendingPromises.delete(e.namespace)}e.store.dispatch({key:t,type:"@@connector-view/INIT"})}computeNextStateForConnector(e,t,n){const i=this._connectorMap[t],o=t+"."+r.B.connectorStateKey,c=(0,a.Z)(e,o,void 0),d=this.subReduce(i.reducer,c,n);if(void 0===d)throw new Error("Reducer for: "+t+" must not return undefined.");const l=d!==c;return l&&(0,s.Z)(e,o,d),{newState:d,stateChanged:l}}subReduce(e,t,n){const i=e.reduce(t,n);return i!==t?i:t}}var f=n(11365),v=n(33954),y=n(27003);const S="__PageBaseInstance__";class C{constructor(e){let t;const n=[];if(void 0!==v.k&&v.k&&v.k.isDebug()){t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||i.qC)((0,f.md)(...n))}else t=(0,f.md)(...n);this._rootReducer=new m,this._store=(0,i.MT)(this.rootReducer.reduce,e,t)}static resetPageBaseInstance(e){y.Gq.set(S,new C(e))}static deletePageBaseInstance(){y.Gq.delete(S)}get store(){return this._store}get rootReducer(){return this._rootReducer}static getInstance(e){return y.Gq.get(S,(()=>new C(e)))}start(){this.rootReducer.connectors().forEach((e=>e.onApplicationStart()))}}},93303:function(e,t,n){"use strict";var i;n.d(t,{B:function(){return i}}),function(e){e.connectorStateKey="_@STATE@_",e.renderAction="@@connector-view/RENDER",e.dataConnectorMergeInitAction="@@data-connector/MERGE-INIT"}(i||(i={}))},63439:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var i=n(93303),r=n(65932),o=n(61502),a=n(21050),s=n(11365),c=n(25514),d=n(82423);(0,r.tz)(d.K0);class l{constructor(e,t,n,i,r,a,c,d=!1){this.namespace=e,this.parentNamespace=t,this.rootReducer=n,this.reducer=i,this.config=a,this.requestContext=c,this.isGlobal=d,this._fullNamespace=void 0!==t&&""!==t?t+"."+e:e,this.selectState=this.selectState.bind(this),this._subspace=(0,s.Z)(this.selectState,this.namespace)(r);const l=this.perfTimeline=this.tryGetPerfTimeline(e);this.fetch=(0,o.Ud)({perfTimeline:l}),n.addSubReducerForConnector(this)}get store(){return this._subspace}get fullNamespace(){return this._fullNamespace}get configHref(){return this._configHref}set configHref(e){this._configHref=e}getCurrentState(){const e=this.store.getState()[i.B.connectorStateKey];if(!this.isGlobal){const t=this.rootReducer.globalConnectors();0!==t.length&&t.forEach((t=>{(0,c.Z)(e,t.namespace,t.getCurrentState())}))}return e}onApplicationStart(){}selectState(e){return e[this.namespace]}tryGetPerfTimeline(e){const t=e.split("_"),[n]=t,i=t[t.length-1];return(0,a.oA)(n,i)}}},30856:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(58043),r=n(32771);class o{static handleAction(e,t,n){return!!o.endsWith(e.type+"",t.type)&&(n.apply(n,e.params),!0)}static handleActions(e,t,n){const r=e.type+"";return!!(0,i.Z)(t,(e=>o.endsWith(r,e.type)))&&(n.apply(n,e.params),!0)}static safeHandleAction(e,t,n){if(!o.endsWith(e.type+"",t.type))throw"The action payload does not match the action type.";return n.apply(n,e.params),!0}}o.endsWith=String.prototype.endsWith?function(e,t){return e.endsWith(t)}:r.Z},55067:function(e,t,n){"use strict";n.d(t,{C:function(){return h}});var i=n(93450);function r(e,t,n,i){let r;return e&&(r=e.parentNamespace?e.parentNamespace+"."+e.namespace:e.namespace),{key:r,experienceInstanceId:i,type:t,params:n}}function o(e,t){return e?e.store.dispatch(t):i._.getInstance().store.dispatch(t)}var a=n(93303);class s{constructor(e,t,n){this.type=e,this.observers=t,this.connector=n}get send(){return this.dispatchAction()}dispatchAction(){return function(...e){const t=this.tryGetPerfTimeline(),n=t&&t.startMeasure("action",this.type).endMeasure,{payload:i,result:s}=this.getDispatchResult(e);return this.observers.forEach((e=>{try{e.filterConnector&&this.connector!==e.filterConnector||e.observer(i)}catch(t){console.log(`Error calling observer: ${JSON.stringify(e.observer)}, with error: ${t}`)}if(e.dispatchConnector){const t=r(e.dispatchConnector,a.B.renderAction,[],void 0);o(e.dispatchConnector,t)}})),n&&n(),s}}}class c extends s{constructor(e,t,n){super(e,t,n)}getDispatchResult(e){const t=r(this.connector,this.type,e,void 0);return{payload:t,result:o(this.connector,t)}}tryGetPerfTimeline(){return this.connector.perfTimeline}}var d=n(21050);class l extends s{constructor(e,t,n){super(e,t,null),this.experienceInstanceId=n}getDispatchResult(e){const t=r(void 0,this.type,e,this.experienceInstanceId);return{payload:t,result:o(void 0,t)}}tryGetPerfTimeline(){return(0,d.oA)("GlobalActionSender",this.experienceInstanceId||"unknown")}}var u=n(27003);let p=1;class h{constructor(e){this.type=e,this.observerKey=`__ActionMap_${e}_${p++}`}get observers(){return u.Gq.get(this.observerKey,(()=>[]))}set observers(e){u.Gq.set(this.observerKey,e)}getActionSender(e){let t;if(t="string"==typeof e?i._.getInstance().rootReducer.connector(e):e,t)return new c(this.type,this.observers,t)}getGlobalActionSender(e){return new l(this.type,this.observers,e)}registerObserver(e,t){const{dispatchConnector:n,filterConnector:i}=t||{};this.observers.push({observer:e,dispatchConnector:n,filterConnector:i})}unregisterObserver(e){const t=this.observers.findIndex((t=>t.observer===e));t>-1&&this.observers.splice(t,1)}unregisterObservers(){this.observers=[]}}},82423:function(e,t,n){"use strict";n.d(t,{K0:function(){return v},Ki:function(){return y},oU:function(){return f}});var i=n(33940),r=n(32181),o=n(8158),a=n(89638),s=n(44979),c=n(98304),d=n(68364),l=n(93450),u=n(27003),p=n(33379),h=n(65932);const g="GetDataConnector.skippedConnectors",m={};function f(e){return(0,i.mG)(this,void 0,void 0,(function*(){return e?yield l._.getInstance().rootReducer.getDataConnector(e):null}))}function v(e){return l._.getInstance().rootReducer.connector(e)}function y(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=(0,r.M)(e);if(u.Gq.get(g,(()=>new Set)).has(t))return Promise.resolve();const n=u.Gq.get("dataConnectorLoadPromiseMap",(()=>({})));let f=n[t];if(f)return f;let v=m[t];return v||(v=o.n.loadExperience(t).catch((()=>{delete m[t]})),m[t]=v),f=new Promise((t=>(0,i.mG)(this,void 0,void 0,(function*(){try{const t=(0,r.M)(e),n=(0,r.Fr)(e),i=a.U.getConfig(n),o=yield Promise.all([i,v]),c=o[0].properties,d=o[1],u=d[t+"Connector"],g=d[t+"Reducer"],m=l._.getInstance(),f=new u(t,"",m.rootReducer,new g(c),m.store,c,new s.fH);(0,p.N)()&&(0,h.T3)(t,f.getCurrentState())}catch(e){const t=Object.assign({},c.NGC);(0,d.OO)(e,t,"Loading data connector failed.")}t()})))),n[t]=f,f}))}},41710:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(55067);class r{}r.signedInStatus=new i.C("SignedInStatus"),r.signedInStatusConfirmed=new i.C("SignedInStatusConfirmed"),r.useEnterpriseCompliance=new i.C("UseEnterpriseCompliance"),r.useHistory=new i.C("UseHistory"),r.updateLocation=new i.C("UpdateLocation")},16776:function(e,t,n){"use strict";n.d(t,{n:function(){return C}});var i=n(53076),r=n(63439),o=n(33799),a=n(83097),s=n(27583),c=n(68354),d=n(1329),l=n(56692),u=n(33379),p=n(2140),h=n(30856),g=n(41710),m=n(67462);class f{reduce(e,t){if(!e){return{signedIn:this.getSignInStatus(),useEnterpriseCompliance:!1,useHistory:!1}}if(!t)return e;let n,i=!1;return i=h.G.handleAction(t,g.s.signedInStatus,(t=>{n=Object.assign(Object.assign({},e),{signedIn:t})})),i=i||h.G.handleAction(t,g.s.useEnterpriseCompliance,(t=>{n=Object.assign(Object.assign({},e),{useEnterpriseCompliance:t})})),i=i||h.G.handleAction(t,g.s.useHistory,(t=>{n=Object.assign(Object.assign({},e),{useHistory:t})})),i=i||h.G.handleAction(t,g.s.updateLocation,(t=>{n=Object.assign(Object.assign({},e),{location:t})})),n||e}getSignInStatus(){if((0,s.TJ)()){return(0,c.XS)().isSignedIn}if(!(0,u.N)()){const{oneServiceHeaders:e}=(0,p.s)();if(e&&Object.keys(e).length>0&&e.authorization)return o.Hy.SignedIn}if((0,s.hk)())return o.Hy.Unknown;if((0,s.P8)())return(0,d.x6)()?o.Hy.SignedIn:o.Hy.NotSignedIn;const e=l.jG.AuthCookieName;if(""==e)return o.Hy.NotSignedIn;const t="app_anon"==e?a.IR.AppAnonCookieExists:a.IR.AnonCookieExists;return(0,m.ej)(t)?o.Hy.SignedIn:o.Hy.NotSignedIn}}var v=n(247),y=n(65135);class S extends r.e{constructor(e,t,n,i,r,o,a){super(e,t,n,i,r,o,a,!0),this.initOverrides=()=>{}}static initialize(e,t,n){let r=e.connector(i.z.SharedState);return r||(r=new S(i.z.SharedState,"",e,new f,t,void 0,n)),(0,v.A)(r),r}getSignInState(){return this.getCurrentState().signedIn}setSignInState(e){const t=this.getCurrentState().signedIn;t!==e?(g.s.signedInStatus.getActionSender(this).send(e),y.M0.addOrUpdateTmplString(`auth-stateChange-${t}-${e}`)):g.s.signedInStatusConfirmed.getActionSender(this).send()}useEnterpriseCompliance(){return this.getCurrentState().useEnterpriseCompliance}}const C=S.initialize},20479:function(e,t,n){"use strict";n.d(t,{B:function(){return o},c:function(){return a}});var i=n(44772);const r=new Map([["article","ArticlePreview"],["video","VideoPreview"],["slideshow","SlideshowPreview"],["webcontent","WebContentPreview"]]),o=(e,t)=>{const n=e||{},r=t||{},o=n.provider&&n.provider.name,s=r&&r.subCategory||n&&n.category&&n.category.label||n&&n.category,c=n.title,d=n.id,l=r&&r.category||n&&n.category&&n.category.product||n&&n.category,u=a(n.type),p=(0,i.ne)(u||n.type);return{brand:o,category:s,headline:c,id:d,isLocal:n.isLocalContent||r.isLocalContent,type:p,vertical:l}};function a(e){return r.get(e)||""}},82128:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(32181);function r(e){return"string"==typeof(t=(0,i.Fr)(e))?t:t.instanceSrc;var t}},76950:function(e,t,n){"use strict";n.d(t,{ITY:function(){return r}});const i={AboveRiverBlock:"above-river-block",ActionTray:"action-tray",AicharacterPaintPage:"aicharacter-paint-page",ArticleCloseButton:"article-close-button",ArticleFre:"article-fre",ArticleRelatedStories:"article-related-stories",ArticleTopComment:"article-top-comment",AutosCarousel:"autos-carousel",AutosEntityCardWC:"autos-entity-card-wc",AutosEntitySpan:"autos-entity-span",AutosMarketplaceCard:"autos-marketplace-card",BackToTopButton:"back-to-top-button",BackgroundGallery:"background-gallery",BackgroundImageWC:"background-image",BingDailyQuizCard:"bing-daily-quiz-card",BingHealthCard:"bing-health-card",BingHealthFitnessCard:"bing-health-fitness-card",BingHomepageFeed:"bing-homepage-feed",BingIntlUpsell:"bing-intl-upsell",BingThisOrThatCard:"bing-this-or-that-card",BoostAdCard:"boost-ad-card",BrandZone:"brand-zone",BreakingNewsWC:"breaking-news-wc",CalendarCard:"calendar-card",CardActionWC:"card-action",CashbackCarouselCard:"cashback-carousel-card",CasualGamesBanner:"casual-games-banner",CasualGamesCard:"casual-games-card",CasualGamesCarouselCard:"casual-games-carousel-card",CasualGamesFeed:"casual-games-feed",CasualGamesFrame:"casual-games-frame",CasualGamesGameplay:"casual-games-gameplay",CasualGamesHub:"casual-games-hub",CasualGamesLanding:"casual-games-landing",CasualGamesLandingV2:"casual-games-landing-v2",CasualGamesStripeCarouselCard:"casual-games-stripe-carousel-card",ChannelEntryPoint:"channel-entry-point",ChannelFilterCard:"channel-filter-card",ChannelList:"channel-list",ChannelPage:"channel-page",ChannelStore:"channel-store",ChannelSuggestedSidebar:"channel-suggested-sidebar",ChannelsNews:"channels-news",CmsBaseExperience:"cms-base-experience",CmsExperience:"shopping-cms",CoachmarkWC:"coachmark-elem",CodexBingChat:"codex-bing-chat",ColdStartWC:"cold-start",CommonAutoSuggest:"common-auto-suggest",CommonHeaderWC:"common-header",CommonSearchBoxEdgeNext:"common-search-box-edgenext",CommonSettingsEdgeNext:"common-settings-edgenext",CommunityCard:"community-card",CommunityComposeCopilotWC:"community-compose-copilot",CommuteCard:"commute-card",CompanyNewsCard:"company-news-card",ConditionalBannerHpWC:"conditional-banner-hp-wc",ConditionalBannerWC:"conditional-banner-wc",ConsumptionFeedWC:"consumption-feed-wc",ConsumptionPage:"consumption-page",ContentFlexInfoPane:"content-flex-info-pane",ContentGroup:"content-group",ContentGroupCard:"content-group-card",ContentTts:"content-tts",ContextualFeedbackWC:"contextual-feedback-wc",CpcMonetizationDashboard:"cpc-monetization-dashboard",DailyBriefWC:"daily-brief",DailyDiscovery:"daily-discovery",DashboardFallback:"dashboard-fallback",DashboardSettings:"dashboard-settings",DenseCard:"dense-card",DesktopFeedHubWC:"desktop-feed-hub",DesktopFeedViewsWC:"desktop-feed-views",DesktopFeedWC:"desktop-feed",DevTools:"dev-tools",DidYouKnowImageWCExperience:"did-you-know-image-wc-experience",DidYouKnowWCExperience:"did-you-know-wc-experience",DigestCard:"digest-card",DisplayAdsWC:"display-ads",DistributionFeed:"distribution-feed",DistributionHeader:"distribution-header",DistributionPage:"distribution-page",DistributionPivotsNav:"distribution-pivots-nav",EdgeChromiumPageWC:"edge-chromium-page",EdgeShopping:"edge-shopping",ElectionCard:"election-card",EmmxEntrypoint:"emmx-entrypoint",EntertainmentCard:"entertainment-card",EntertainmentPremierCard:"entertainment-premier-card",EntryPointHpMobile:"entry-point-hp-mobile",EntryPointHpWC:"entry-point",EntryPointMobileHub:"entry-point-mobile-hub",EntryPointViewsWC:"entry-point-views",EoabViews:"eoab-views",EoabViewsAutos:"eoab-views-autos",EoabViewsFinance:"eoab-views-finance",EoabViewsShopping:"eoab-views-shopping",EoabViewsTravel:"eoab-views-travel",EsportsCard:"esports-card",EsportsLivestreamCarouselWC:"esports-livestream-carousel-wc",EsportsStreamsCard:"esports-streams-card",EventHubFollowHeader:"event-hub-follow-header",ExampleOfferCard:"example-offer-card",ExperiencePreviewCta:"experience-preview-cta",FamilyCard:"family-card",FeedContainer:"feed-container",FeedLevelFeedbackWC:"feed-level-feedback-wc",FeedNavigationHp:"feed-navigation-hp",FeedbackCard:"feedback-card",FeedbackDialogWC:"feedback-dialog-wc",FeedbackLinkWC:"feedback-link",FinanceCarousel:"finance-carousel",FloatButtonGroupWC:"float-button-group",FollowingFreConfirmation:"following-fre-confirmation",FollowingFreFullWidth:"following-fre-full-width",FoodSimilarItems:"food-similar-items",ForumDealsPage:"forum-deals-page",FrequentSitesCardWC:"frequent-sites-card",GameCard:"game-card",GamingChannel:"gaming-channel",GamingCompeteCard:"gaming-compete-card",GamingDiscoverStrip:"gaming-discover-strip",GamingGamerModeUpsellCard:"gaming-gamer-mode-upsell-card",GamingInterestGroupCard:"gaming-interest-group-card",GamingMatchCard:"gaming-match-card",GamingMediaCarousel:"gaming-media-carousel",GamingPage:"gaming-page",GamingPersonalizationCard:"gaming-personalization-card",GamingRecentlyPlayedCard:"gaming-recentlyplayed-card",GamingRecommendedCard:"gaming-recommended-card",GamingRedditCard:"gaming-reddit-card",GamingRewardsCard:"gaming-rewards-card",GamingStreamCard:"gaming-stream-card",GamingTournamentCard:"gaming-tournament-card",GamingUpcomingCard:"gaming-upcoming-card",GamingVideoCard:"gaming-video-card",GeneralElections:"general-elections",GridViewFeed:"grid-view-feed",GroceryCouponSdCard:"grocery-coupon-sd-card",HeaderWindowsShellWC:"header-windows-shell-wc",HealthArticlesCardWC:"health-articles-card",HealthDietPlanScheduleWC:"health-diet-plan-schedule",HealthFeedbackWC:"health-feedback",HealthFitnessCarousel:"health-fitness-carousel",HealthFoodHealtheffectsWC:"health-food-healtheffects",HealthFoodRecipesWC:"health-food-recipes",HealthHubHealthapp:"healthhub-healthapp",HealthInterestsManager:"health-interests-manager",HealthQnAWCExperience:"health-qna-card-wc",HealthRiverWC:"health-river-wc",HealthTipWC:"health-tip-wc",HealthTopSpan:"health-top-span",HealthTopicFlyout:"health-topic-flyout",HealthTranslationWC:"health-translation",HealthWidget:"health-widget",HolidayEffects:"holiday-effects",HomepageFooter:"homepage-footer",HomepageHeader:"homepage-header",HoroscopeAnswerCardWC:"horoscope-answer-card",HotListCard:"hot-list-card",ImageSearchWC:"image-search-wc",ImmersiveFullscreen:"immersive-fullscreen",IndustryNewsCard:"industry-news-card",InspirationCard:"inspiration-card",InterestFreCard:"interest-fre-card",InterestManagementCard:"interest-management-card",InterestsManager:"interests-manager",InterestsWC:"interests-wc",LanguageToggleWC:"language-toggle",LinkedInCard:"linked-in-card",LocalHubHeader:"local-hub-header",LocalizeStringsTempExperience:"localize-strings-temp-experience",Lottery:"lottery-card",MailSignoutBanner:"mail-signout-banner",MangaCard:"manga-card",MarketLanguageToggleWC:"market-language-toggle",MarketplaceCardWC:"marketplace-card",MeControlWC:"me-control",MeStripeWC:"me-stripe",MicrosoftEdgeWidget:"microsoft-edge-widget",MicrosoftFeedCard:"microsoft-feed-card",MobileAppUpsell:"mobile-app-upsell",MobileChannelSlider:"mobile-channel-slider",MobileConsumptionPage:"mobile-consumption-page",MobileFeedHub:"mobile-feed-hub",MobileFeedWC:"mobile-feed-wc",MobileFooter:"mobile-footer",MobileHeader:"mobile-header",MobileMarketSelector:"mobile-market-selector",MobileNotification:"mobile-notification",MobilePopupWindow:"mobile-popup-window",MobileRewardsCard:"mobile-rewards-card",MobileShoppingCard:"mobile-shopping-card",MobileStoryViewer:"mobile-story-viewer",MobileTip:"mobile-tip",MobileWidget:"mobile-widget",MoneyAugmentCard:"money-augment-card",MoneyInfo:"money-info",MoneyInfoCardWC:"money-info-card",MoneyInfoSpan:"money-info-span",MsRewardsWC:"ms-rewards",MsaAddressForm:"msa-address-form",NativeAdWC:"native-ad-wc",NavigationPageExperience:"navigation-page-experience",NewsGroupsCard:"news-groups-card",NewsGuard:"news-guard",NewsHeadlineBelowSearchbox:"news-headline-below-searchbox",NewsSegmentCarousel:"news-segment-carousel",NewsbarFeedFooter:"newsbar-feed-footer",NewsbarFeedWC:"newsbar-feed",NewsbarUpsellWC:"newsbar-upsell",NewsletterSignup:"newsletter-signup",NewsletterSignupPage:"newsletter-signup-page",NextdoorCard:"nextdoor-card",NextdoorPage:"nextdoor-page",NotificationBellWC:"notification-bell",NotificationMiniCard:"notification-mini-card",NudgeSpotlightCard:"nudge-spotlight-card",OfficeCoachmark:"office-coachmark",OfficeDocumentsTableWC:"office-documents-table",OfficeLeftRail:"office-leftrail",OnThisDayCardSmall:"on-this-day-card-small",OnThisDayCardWC:"on-this-day-card",OverlayWC:"overlay-wc",PageRefreshWC:"page-refresh",PanoPage:"pano-page",PartnerUpsellCard:"partner-upsell-card",PersonalFinanceExpenseDistribution:"personal-finance-expense-distribution",PersonalFinanceTransactionsCard:"personal-finance-transactions-card",PersonalizeNavButton:"personalize-nav-button",PhotoCard:"photo-card",PillWC:"pill-wc",PivotsMobileWC:"pivots-mobile",PollsCardWC:"polls-card",PoweredbyLegendWC:"poweredby-legend",PrayerTimesCard:"prayer-times-card",PremiumProfilePromoCard:"premium-profile-promo-card",PrideEventCard:"pride-event-card",PrismCards:"prism-cards",PrismCarouselCard:"prism-carousel-card",PrismFeed:"prism-feed",PrismSdCard:"prism-sd-card",ProductivityHub:"productivity-hub",ProfileArticles:"profile-articles",ProfilePromoCard:"profile-promo-card",PromoBannerWC:"promo-banner",PublisherCarousel:"publisher-carousel",PublisherList:"publisher-list",PublisherSubscribeFollowButton:"publisher-subscribe-follow-button",PullToRefresh:"pull-to-refresh",Qna:"qna-card",QnaFeed404Page:"qna-feed-404-page",QnaFeedCard:"qna-feed-card",QnaFeedCardMenu:"qna-feed-card-menu",QnaFeedCarousel:"qna-feed-carousel",QnaFeedCategoriesMenu:"qna-feed-categories-menu",QnaFeedExploreTopics:"qna-feed-explore-topics",QnaFeedList:"qna-feed-list",QnaFeedMyTopics:"qna-feed-my-topics",QnaFeedRelatedQuestions:"qna-feed-related-questions",QnaFeedReportCard:"qna-feed-report-card",QnaFeedSuggestedTopics:"qna-feed-suggested-topics",QnaFeedTopicDetail:"qna-feed-topic-detail",QnaFeedTrendingQuestions:"qna-feed-trending-questions",QuizCard:"quiz-card",ReactionBreakdownDialog:"reaction-breakdown-dialog",RealEstateCard:"real-estate-card",RecipesSdCard:"recipes-sd-card",RecommendedCardFeed:"recommended-card-feed",RecommendedCardWC:"recommended-card",RecommendedInterests:"recommended-interests",RecommendedSearchCarouselWC:"recommended-search-carousel",RecommendedSearchesCard:"recommended-searches-card",RecommendedSitesWC:"recommended-sites",RewardsCardWC:"rewards-card",RewardsDailyCheckinCard:"rewards-daily-checkin-card",RewardsDailySetCard:"rewards-daily-set-card",RichCalendarCard:"rich-calendar-card",RightRailProviderCarousel:"right-rail-provider-carousel",ScrollDownButton:"scroll-down-button",SdCardMaskWC:"sd-card-mask",SearchBoxWC:"search-box-wc",SearchHistoryEdgeNextWC:"search-history-edgenext",SelectCarousel:"select-carousel",SharedLinks:"shared-links",SharepointNewsCard:"sharepoint-news-card",ShoppingAllStoresPage:"shopping-all-stores-page",ShoppingArticlePage:"shopping-article-page",ShoppingAugmentCard:"shopping-augment-card",ShoppingBingProductDetails:"shopping-bing-product-details",ShoppingBlackjackDealPage:"shopping-blackjack-deal-page",ShoppingBlackjackPage:"shopping-blackjack-page",ShoppingBuyingGuide:"shopping-buying-guide",ShoppingBuyingGuidesCard:"shopping-buying-guides-card",ShoppingCardWC:"shopping-card-wc",ShoppingCarouselProngWC:"shopping-carousel-prong-wc",ShoppingCarouselWC:"shopping-carousel",ShoppingCart:"shopping-cart",ShoppingCashback:"shopping-cashback",ShoppingCategoryPage:"shopping-category-page",ShoppingChatDetailPage:"shopping-chat-detail-page",ShoppingCheckoutModal:"shopping-checkout-modal",ShoppingCheckoutPage:"shopping-checkout-page",ShoppingColdStart:"shopping-cold-start",ShoppingCouponsPage:"shopping-coupons-page",ShoppingDealsHomePage:"shopping-deals-home-page",ShoppingDebugPage:"shopping-debug-page",ShoppingEdgeInsightsCard:"shopping-edge-insights-card",ShoppingEntryBaseExperience:"shopping-entry-base-experience",ShoppingEventsDealCard:"shopping-events-deal-card",ShoppingFashionCarouselWC:"shopping-fashion-carousel",ShoppingForumFavorites:"shopping-forum-favorites",ShoppingForumHome:"shopping-forum-home",ShoppingForumLandingPage:"shopping-forum-landing-page",ShoppingForumOrderCancelPage:"shopping-forum-order-cancel-page",ShoppingForumOrderConfirmation:"shopping-forum-order-confirmation",ShoppingForumOrderDetails:"shopping-forum-order-details",ShoppingForumOrdersPage:"shopping-forum-orders-page",ShoppingForumProductPage:"shopping-forum-product-page",ShoppingForumRefundDetailsPage:"shopping-forum-refund-details-page",ShoppingForumRefundOrderPage:"shopping-forum-refund-order-page",ShoppingForumReturnDetailsPage:"shopping-forum-return-details-page",ShoppingForumReturnOrderPage:"shopping-forum-return-order-page",ShoppingForumSellerPage:"shopping-forum-seller-page",ShoppingGrid:"shopping-grid",ShoppingGroupedCarousel:"shopping-grouped-carousel",ShoppingGuidesPage:"shopping-guides-page",ShoppingHomepage:"shopping-homepage",ShoppingInspiration:"shopping-inspiration",ShoppingLeaderboard:"shopping-leaderboard",ShoppingLiveBasePage:"shopping-live-base-page",ShoppingLiveEmbedPage:"shopping-live-embed-page",ShoppingLiveFeedPage:"shopping-live-feed-page",ShoppingLiveInmobiDetailsPage:"shopping-live-inmobi-details-page",ShoppingLiveProductDetailsPage:"shopping-live-product-details-page",ShoppingLiveVideoPlayer:"shopping-live-video-player",ShoppingModal:"shopping-modal",ShoppingModelOverlay:"shopping-model-overlay",ShoppingMomentInTimePage:"shopping-moment-in-time-page",ShoppingMultiTabCarousel:"shopping-multi-tab-carousel",ShoppingNotification:"shopping-notification",ShoppingPageBase:"shopping-page-base",ShoppingPageContent:"shopping-page-content",ShoppingPivotFeed:"shopping-pivot-feed",ShoppingProductDetailPage:"shopping-product-detail-page",ShoppingProductPage:"shopping-product-page",ShoppingSdCard:"shopping-sd-card",ShoppingSearch:"shopping-search",ShoppingSearchResultPage:"shopping-search-result-page",ShoppingShippingAddress:"shopping-shipping-address",ShoppingShopTheLookPage:"shopping-shopthelook-page",ShoppingTopSpan:"shopping-top-span",ShoppingVerticalListsCard:"shopping-vertical-lists-card",ShoppingVideoShortsCarousel:"shopping-video-shorts-carousel",ShoppingViewsCarousel:"shopping-views-carousel",SignInControlWC:"sign-in-control",SignInFlyoutWC:"sign-in-flyout",SocialAvatar:"social-avatar",SocialBarWC:"social-bar-wc",SocialCommentWC:"social-comment-wc",SocialEntrypoint:"social-entrypoint",SocialLeadGenInArticle:"social-lead-gen-in-article",SocialNotification:"social-notification",SocialPostEditorWC:"social-post-editor",SocialProfileActionMenu:"social-profile-action-menu",SocialProfileCard:"social-profile-card",SocialProfilePromotion:"social-profile-promotion",SocialProfileRejectionDetails:"social-profile-rejection-details",SocialProfileTopics:"social-profile-topics",SocialRelatedSources:"social-related-sources",SocialReportMenu:"social-report-menu",SocialRewardsMedal:"social-rewards-medal",SocialRewardsPromotion:"social-rewards-promotion",SocialStarRating:"social-star-rating",SocialSubscriptionBanner:"social-subscription-banner",SocialSubscriptionNotification:"social-subscription-notification",SocialSubscriptionOverlay:"social-subscription-overlay",SocialSubscriptionOverlaySummary:"social-subscription-overlay-summary",SocialSubscriptionPaywall:"social-subscription-paywall",SocialSubscriptionUpsell:"social-subscription-upsell",SocialSupportResult:"social-support-result",SocialTipHistory:"social-tip-history",SocialTipIntroduction:"social-tip-introduction",SocialTipPromotion:"social-tip-promotion",SocialTipPromotionInArticle:"social-tip-promotion-in-article",SocialTipSelection:"social-tip-selection",SportsAroundTheLeague:"sports-around-the-league",SportsAugmentCard:"sports-augment-card",SportsBackgroundUx:"sports-background-ux",SportsBrackets:"sports-brackets",SportsCardWC:"sports-card",SportsCommentary:"sports-commentary",SportsCountdownTimer:"sports-countdown-timer",SportsCricketLayoutManager:"sports-cricket-layout-manager",SportsCricketLeagueStats:"sports-cricket-league-stats",SportsCricketMatchRow:"sports-cricket-match-row",SportsCricketPartnerships:"sports-cricket-partnerships",SportsCricketRankings:"sports-cricket-rankings",SportsCricketScorecard:"sports-cricket-scorecard",SportsCricketScoresAndSchedule:"sports-cricket-scores-and-schedule",SportsEntityHeader:"sports-entity-header",SportsFeaturedMatchesCard:"sports-featured-matches-card",SportsFullStandings:"sports-full-standings",SportsGameInformation:"sports-game-information",SportsGameScore:"sports-game-score",SportsGameSummary:"sports-game-summary",SportsGameSummaryFull:"sports-game-summary-full",SportsGameTimeline:"sports-game-timeline",SportsGcPlayerStats:"sports-gc-player-stats",SportsGcTeamStats:"sports-gc-team-stats",SportsGptAnalysis:"sports-gpt-analysis",SportsHeadlinesTimelines:"sports-headlines-timelines",SportsInfo:"sports-info",SportsInfoSpan:"sports-info-span",SportsLayoutRenderer:"sports-layout-renderer",SportsMatchRow:"sports-match-row",SportsMobileTabPanel:"sports-mobile-tab-panel",SportsOlympicCardWC:"sports-olympic-card",SportsPersonMatchRow:"sports-person-match-row",SportsPersonalizationStrip:"sports-personalization-strip",SportsPinLiveMatch:"sports-pin-live-match",SportsPlayerBio:"sports-player-bio",SportsPlayerInsights:"sports-player-insights",SportsPreviousMatchups:"sports-previous-matchups",SportsRankingsFull:"sports-rankings-full",SportsScoresAndSchedule:"sports-scores-and-schedule",SportsScoresAndScheduleFull:"sports-scores-and-schedule-full",SportsSquad:"sports-squad",SportsStandings:"sports-standings",SportsStandingsList:"sports-standings-list",SportsStatLeaders:"sports-stat-leaders",SportsStats:"sports-stats",SportsTabLayout:"sports-tab-layout",SportsTeamFormation:"sports-team-formation",SportsTeamProbability:"sports-team-probability",SportsTennisScoresAndScheduleFull:"sports-tennis-scores-and-schedule-full",SportsTennisTournamentInfo:"sports-tennis-tournament-info",SportsTournamentInfo:"sports-tournament-info",SportsTournamentLeaderboard:"sports-tournament-leaderboard",SportsTournamentMatchRow:"sports-tournament-match-row",SportsTournamentResultsAndSchedule:"sports-tournament-result-and-schedule",SportsTournamentSchedule:"sports-tournament-schedule",SportsTournamentStandings:"sports-tournament-standings",SportsUnavailablePlayers:"sports-unavailable-players",SportsVideoList:"sports-video-list",SportsWorldCupCardWC:"sports-worldcup-card",SpotlightCardWC:"spotlight-card",StarterKitWC:"starter-kit",StickyPeek:"sticky-peek",StoryCarousel:"story-carousel",StripeWC:"stripe-wc",SummaryCardWC:"summary-card-wc",SuperBreakingNews:"super-breaking-news",SuperCoachMarkWC:"super-coach-mark",SuperListCard:"super-list-card",SuperNav:"super-nav",SuperNavCoachMark:"super-nav-coach-mark",SuperappBannerWC:"superapp-banner",SuperappUpsellCardWC:"superapp-upsell-card",TabbedFeedWC:"tabbed-feed-card",TestBingNudge:"test-bing-nudge",ThemePickerWC:"theme-picker",TipsCard:"tips-card",ToastWC:"ms-toast",TodoCardWC:"todo-card",TopSitesBookmarks:"top-sites-bookmarks",TopSitesEdgeNextWC:"top-sites-edgenext",TopSitesNewsbar:"top-sites-newsbar",TopicTags:"topic-tags",TrafficCardWC:"traffic-card",TranslateTemporary:"translate-temporary",TravelArticleCard:"travel-article-card",TravelArticlePageCard:"travel-article-page-card",TravelArticlePill:"travel-article-pill",TravelCard:"travel-card",TravelCarousel:"travel-carousel",TravelCollectionCard:"travel-collection-card",TravelDestination:"travel-destination",TravelDestinationBanner:"travel-destination-banner",TravelDestinationDetailsBanner:"travel-destination-details-banner",TravelFeed:"travel-feed",TravelInspirationCardWC:"travel-inspiration-card-wc",TravelLandingPage:"travel-landing-page",TravelMsnHpCard:"travel-msn-hp-card",TravelSaveButton:"travel-save-button",TravelSdDestinationsCard:"travel-sd-destinations-card",TravelSdFlightsCard:"travel-sd-flights-card",TravelSdHotelsCard:"travel-sd-hotels-card",TravelSdThemesCard:"travel-sd-themes-card",TravelTabCarousel:"travel-tab-carousel",TravelTourActivityCard:"travel-tour-activity-card",TrendingNowWC:"trending-now-card",TrendingSearchCard:"trending-search-card",TrendingTopics:"trending-topics-card",UgcCreatorHomepage:"ugc-creator-homepage",UnifiedMobileFeed:"unified-mobile-feed",VerticalLeftNav:"vertical-left-nav",VideoCardWC:"video-card",VideoDetails:"video-details",VideoShoppingCard:"video-shopping-card",VideoShoppingCarouselCard:"video-shopping-carousel-card",ViewsCoachmark:"views-coachmark",ViewsNativeAd:"views-native-ad",ViewsRail:"views-rail",VoiceSearchWC:"voice-search-wc",WaffleWC:"waffle-wc",WalletPersonalizedOfferSdCardWC:"wallet-personalized-offer-sd-card-wc",WatchWC:"watch-wc",WaterTrackerCard:"water-tracker-card",WaterfallViewFeed:"waterfall-view-feed",WeatherCardWC:"weather-card",WeatherCurrentWC:"weather-current",WeatherForecastDayNightWC:"weather-forecast-day-night",WeatherForecastDayWC:"weather-forecast-day",WeatherForecastHistoryWC:"weather-forecast-history",WeatherForecastPerHourWC:"weather-forecast-per-hour",WeatherForecastSunMoonPhaseWC:"weather-forecast-sun-moon-phase",WeatherForecastSunMoonWC:"weather-forecast-sun-moon",WeatherHistoricalRecordWC:"weather-historical-record",WeatherHistoricalTemperatureWC:"weather-historical-temperature",WeatherHourlyHistogramWC:"weather-hourly-histogram",WeatherImmersiveForecastWC:"weather-immersive-forecast-wc",WeatherInfoSpan:"weather-info-span",WeatherLifeEntryWC:"weather-life-entry",WeatherLocationCardWC:"weather-location-card",WeatherLocationSearchPhoneWC:"weather-location-search-phone",WeatherLocationWC:"weather-location",WeatherMapGroupSwitcherButtonWC:"weather-map-group-switcher-button",WeatherMapLegendWC:"weather-map-legend",WeatherMapTimelineWC:"weather-map-timeline",WeatherMapWC:"weather-map",WeatherMapsRotationWC:"weather-maps-rotation",WeatherMinimapWC:"weather-minimap",WeatherMonthlySummaryWC:"weather-monthly-summary",WeatherOverviewWC:"weather-overview",WeatherPageRoot:"weather-page-root",WeatherPageWC:"weather-page",WeatherTodayHistoryWC:"weather-today-history",WeatherTodayMiniWC:"weather-today-mini",WeatherTravelCarousel:"weather-travel-carousel",WeatherVideoEntryWC:"weather-video-entry",WelcomeGreetingLight:"welcome-greeting-light",WelcomeGreetingWC:"welcome-greeting",WidgetPickerWC:"widget-picker-wc",WidgetsDynamicFeed:"widgets-dynamic-feed",WidgetsHomePage:"widgets-home-page",WinAppWC:"win-app-wc",WindowsOfficeFeed:"windows-office-feed",WindowsShellBannersManager:"windows-shell-banners-manager",WindowsShellEntry:"windows-shell-entry",WindowsShellHeader:"windows-shell-header",WindowsShellLocationDialog:"windows-shell-location-dialog",WindowsShellNotificationSettings:"windows-shell-notification-settings",WindowsShellSettingsMenu:"windows-shell-settings-menu",WindowsShellSoftLanding:"windows-shell-soft-landing",WindowsWidgetsHub:"windows-widgets-hub",XboxFeedWC:"xbox-feed-wc",XfeedWC:"xfeed-wc",YandexSearchBoxWC:"yandex-search-box"};function r(e){return i[e]}},72488:function(e,t,n){"use strict";n.d(t,{Fg:function(){return M},pE:function(){return L}});var i,r,o,a,s=n(33940),c=n(21050),d=n(98304),l=n(68364),u=n(32181),p=n(8158),h=n(89638);!function(e){e.OneColumn="OneColumn",e.TwoColumn="TwoColumn",e.ThreeColumn="ThreeColumn",e.FourColumn="FourColumn",e.FiveColumn="FiveColumn",e.Any="Any"}(i||(i={})),function(e){e.grid="grid",e.horizontalStack="horizontalStack",e.layout="layout",e.verticalStack="verticalStack",e.customExperience="customExperience"}(r||(r={})),function(e){e.actionTrigger="ActionTrigger",e.button="Button",e.heading="Heading",e.peregrineExperience="PeregrineExperience",e.typography="Typography",e.webComponentExperience="WebComponentExperience"}(o||(o={})),function(e){e.riverGridChildren="riverGridChildren"}(a||(a={}));var g=n(88828),m=n(14989),f=n(52965),v=n(85663);class y{static registerAppValidator(e){this.expValidatorMap=e.getAllValidators()}static processConfig(e,t){if(!this.expValidatorMap||this.expValidatorMap.size<1||!e||!e.childExpValidatorMap)return e;const n=e.childExpValidatorMap;let i=null,r=null;for(const o in n){const a=n[o];if(this.expValidatorMap.has(o)){this.expValidatorMap.get(o)(a.validationArgs)&&(null===r&&(r=this.expConfigMap.get(t)||e),null===i&&(i=(0,f.Z)(r)),e=this.filterConfig(a,r))}}return i?this.expConfigMap.set(t,i):null===r&&this.expConfigMap.has(t)&&(e=this.expConfigMap.get(t)),e}static removeFromRiverGridChildren(e,t){const n=t.riverGridChildren;return n&&n.forEach((t=>{const n=t.children;if(n){const i=e.childExperienceConfigInfo,r=(0,u.M)(i);t.children=n.filter((e=>{const t=e.childExperienceConfigInfo;return!t||!i||i.instanceId!==t.instanceId||r!==(0,u.M)(t)}))}})),t}static getChildrenDataConnectorConfigInfos(e){const t=[];if(e&&e.dataConnectors&&e.dataConnectors.length>0){const n=y.getOrdinalObjectForCurrentBreakpoint(e.dataConnectors);n&&n.children&&n.children.length>0&&n.children.forEach((e=>{t.push(e)}))}return t}static getMetadataByScreenWidth(e,t){return t.find((t=>t.screenWidth===e))||t.find((e=>e.screenWidth===i.Any))}static getOrdinalObjectForCurrentBreakpoint(e){switch((0,g.Bn)().currentColumnArrangement){case m.K$.c1:return y.getMetadataByScreenWidth(i.OneColumn,e);case m.K$.c2:return y.getMetadataByScreenWidth(i.TwoColumn,e);case m.K$.c3:return y.getMetadataByScreenWidth(i.ThreeColumn,e);case m.K$.c4:return y.getMetadataByScreenWidth(i.FourColumn,e);case m.K$.c5:return y.getMetadataByScreenWidth(i.FiveColumn,e);default:return y.getMetadataByScreenWidth(i.Any,e)}}static compositionOverrideResolver(e,t){const{getCompositionIdOverride:n}=t||{},{composition:i,compositionOverrides:r}=e;return r&&(0,v.isFunction)(n)&&r[n()]||i}static getChildrenExperienceConfigInfos(e,t){const n=[];if(e&&e.composition){const i=y.compositionOverrideResolver(e,t);switch(i.type){case r.horizontalStack:case r.layout:i.page.children.forEach((e=>{void 0!==e.children&&e.children.forEach((e=>{if(!e.children)return;const{childType:t}=e.children;t?t===o.peregrineExperience&&n.push(e.children.child):n.push(e.children)}))}));break;case r.grid:i.grid.rows.forEach((e=>{void 0!==e.columns&&e.columns.forEach((e=>{const{itemType:t}=e.item;t&&t===o.peregrineExperience&&n.push(e.item.child)}))}));break;case r.customExperience:{const e=i;n.push(e.experience);break}}}return n}static filterConfig(e,t){return e&&"string"==typeof e.sectionName&&e.sectionName.toLowerCase()===a.riverGridChildren.toLowerCase()?this.removeFromRiverGridChildren(e,t):t}static resetValidatorMap(){this.expValidatorMap.clear()}static resetConfigMap(){this.expConfigMap.clear()}}y.expValidatorMap=new Map,y.expConfigMap=new Map;var S=n(4734),C=n(76950),b=n(82423),w=n(9791),T=n(70193);const k={DisplayAdsWC:(0,T.V8)("display-ads"),ViewsNativeAd:(0,T.V8)("views-native-ad")};var P=n(33379),A=n(27003);const I="WebComponentLoader.SkippedExperience",E="WebComponentLoader.LoadedExperience",x="WebComponentLoader.ModuleLoadPromiseMap",M=(0,P.N)()?(0,w.Z)(O,(e=>(0,u.B5)(e.configRef))):O;function O(e){return(0,s.mG)(this,void 0,void 0,(function*(){try{const{configRef:t,configRef:{experienceType:i}}=e;if(A.Gq.get(I,(()=>new Set)).has(i))return;const r=(0,S.gy)(i);r&&r.shouldResolve&&(yield r.shouldResolve());const o=(0,c.oA)(i,e.instanceId);if((0,P.N)()||A.Gq.get(E,(()=>[])).push(e),window.customElements.get((0,C.ITY)(i)))return void(yield D(t,o));const a=D(t,o),d=function(e,t){const n=A.Gq.get(x,(()=>({})));let i=n[e];if(i)return i;return i=(0,c.fW)((()=>p.n.loadExperience(e)),"scripts",t),n[e]=i,i}(i,o),l=(yield Promise.all([a,d]))[1];yield function(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){const i=t[e],r=t[e+"Template"];let o=t[e+"Styles"];if(!(0,P.N)()){const n=t[e+"SSRStyles"];o=n||o}const a=(0,C.ITY)(e),s=function(e,t){if(void 0!==t)return{DisplayAdsWC:(0,T.V8)("display-ads",t),ViewsNativeAd:(0,T.V8)("views-native-ad",t)}[e];return k[e]}(e),c=yield Promise.resolve().then(n.bind(n,89225));if(c.FASTElement.define(i,Object.assign({name:a,template:r,styles:o},i.definition)),s){class e extends i{}c.FASTElement.define(e,Object.assign({name:s,template:r,styles:o},i.definition))}}))}(i,l)}catch(t){const n=Object.assign({},d.gzO);(0,l.OO)(t,n,"Loading web component experience failed.",void 0,{configInfo:e})}}))}function L(e){return(0,s.mG)(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>M(e))))}))}function D(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){const n=yield(0,c.fW)((()=>h.U.getConfig(e)),"config",t);if(!n)return;const i=n.properties;if(!i||!i.dataConnectors||i.dataConnectors.length<=0)return;const r=t&&t.startMeasure("loadDataConnectors").endMeasure,o=y.getChildrenDataConnectorConfigInfos(i).map((e=>(0,b.Ki)(e)));yield Promise.all(o),r&&r()}))}},24169:function(e,t,n){"use strict";n.d(t,{l:function(){return I}});var i=n(33940),r=n(89638),o=n(56692),a=n(82890),s=n(28904),c=n(42590),d=n(68364),l=n(98304),u=n(79278),p=n(61502),h=n(22704),g=n(19388),m=n(14675),f=n(53301),v=n(4734),y=n(38156),S=n(92402);class C extends Event{constructor(e){super(C.type,{bubbles:!0,composed:!0}),this.complete=e}static isPendingTask(e){var t;return e.type===C.type&&"function"==typeof(null===(t=e.complete)||void 0===t?void 0:t.then)}}C.type="pending-task";var b=n(60483),w=n(33379);const T={};var k=n(49786),P=n(76858);const A="props-token";class I extends s.H{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!1,this.hydratable=!1,this.isSSRRendered=!1,this.needPendingTask=!1}connectedCallback(){if((0,w.N)())this.hydratable=this.hasAttribute("defer-hydration")||this.hasAttribute("needs-hydration"),this.isSSRRendered=this.hasAttribute("needs-hydration"),this.initializeAsync();else{const e=this.initializeOnServerSide();this.needPendingTask&&this.dispatchEvent(new C(e))}}initializeOnServerSide(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});var t;return(0,i.mG)(this,void 0,void 0,(function*(){this.needPendingTask=!1;const n=this.getExperienceType();try{const t=this.getConfigRef();if(!this.config){let e;if("string"!=typeof t)try{e=r.U.getConfigSync(t)}catch(e){}e||(this.needPendingTask=!0,e=yield r.U.getConfig(t)),this.config=e.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new b.D(e)}const n=this.experienceConnected();n&&(this.needPendingTask=!0,yield n),e.connectedCallback.call(this),this.shadowDomPopulated()}catch(e){(0,d.OO)(e,l.xuo,`Exception web component experience(${n}) initializeOnServerSide.`,`ssrLayout:${null===(t=window.ssrLayoutState)||void 0===t?void 0:t.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`)}}))}initializeAsync(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});var t;return(0,i.mG)(this,void 0,void 0,(function*(){this.hydratable&&(yield(0,S.ZH)(this));const n=this.getExperienceType(),i=this.perfTimeline=(0,u.Dd)(n,this.instanceId),o=i&&i.startMeasure("init").endMeasure;this.fetch=(0,p.Ud)({perfTimeline:i}),(0,h.O8)("WCE.Count"),this.reportStartTimeToMilestoneConnector(f.g.updateVisuallyReadyTiming);try{const t=this.getConfigRef();if(!this.config){const e=yield r.U.getConfig(t);this.config=e.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new b.D(e)}const{stalenessInfo:a}=this.config;a&&a.isStaleCheckRequired&&(0,k.MV)({experienceType:n,thresholdMinutes:a.staleThreshold,criticalCallback:()=>this.prerenderRefreshCritical(),delayCallback:()=>this.prerenderRefresh()}),this.ensureObservableBeforeConnect&&this.$fastController.bindObservables();const s=this.experienceConnected();if(s){const e=this.hydratable&&S.iA?(0,S.bE)(`${this.getExperienceType()}:experienceConnected`):void 0;null==e||e.start(),yield s,null==e||e.markEnd()}if(this.hydratable){const e=S.iA?(0,S.bE)(`${this.getExperienceType()}:beforeHydration`):void 0;null==e||e.start(),yield this.beforeHydration(),null==e||e.markEnd()}e.connectedCallback.call(this),this.shadowDomPopulated(),this.hydratable&&(yield this.afterHydration()),i&&(0,u.d0)(this,this.perfTimeline,P.y),o&&o()}catch(e){(0,d.OO)(e,l.xuo,`Exception web component experience initializeAsync. ExperienceType: ${n}`,`ssrLayout:${null===(t=window.ssrLayoutState)||void 0===t?void 0:t.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`),this.logCriticalException(),o&&o({customSuffix:"error"})}finally{this.initToVisuallyReadyEndMeasure=i&&i.startMeasure("render").endMeasure}}))}experienceConnected(){}beforeHydration(){}afterHydration(){}shadowDomPopulated(){}prerenderRefreshCritical(){return Promise.resolve(void 0)}prerenderRefresh(){}logCriticalException(){}getConfigRef(){return o.jG.IsGitConfigs?{instanceSrc:this.instanceSrc,experienceType:this.getExperienceType(),sharedNs:this.sharedNs}:this.instanceSrc}getTelemetryContract(){return{type:y.c9.Module,name:this.getExperienceType()}}getApproxTTVRValue(e){const t=(0,h.Ou)();if(this.isSSRRendered&&t[a.p.isSSRCompleted])return t[g.nz+(e||this.getExperienceType())]||t[g.nz+a.p.complete]}markVisuallyReady(e){e=this.getApproxTTVRValue()||e;const t=(0,g.o_)(this.getExperienceType(),!1,e);return this.reportEndTimeToMilestoneConnector(f.g.updateVisuallyReadyTiming,e),this.initToVisuallyReadyEndMeasure&&this.initToVisuallyReadyEndMeasure(),t}markVisuallyReadyRaf(e){(0,m.c)((()=>this.markVisuallyReady(e)))}reportStartTimeToMilestoneConnector(e){this.reportTimeToMilestoneConnector(e,performance.now())}reportEndTimeToMilestoneConnector(e,t){this.reportTimeToMilestoneConnector(e,void 0,t||performance.now())}reportTimeToMilestoneConnector(e,t,n){const i=(0,v.S0)();i&&e.getActionSender(i).send({experienceType:this.getExperienceType(),experienceInstance:this.instanceId,startTime:t,endTime:n})}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===A){const e=function(e){const t=T[e];return delete T[e],t}(n);Object.assign(this,e)}}}(0,i.gn)([(0,c.Lj)({attribute:"config-instance-src"})],I.prototype,"instanceSrc",void 0),(0,i.gn)([(0,c.Lj)({attribute:"config-shared-ns"})],I.prototype,"sharedNs",void 0),(0,i.gn)([(0,c.Lj)({attribute:"instance-id"})],I.prototype,"instanceId",void 0),(0,i.gn)([(0,c.Lj)({attribute:A})],I.prototype,"propsToken",void 0)},81563:function(e,t,n){"use strict";n.d(t,{Ot:function(){return b}});var i=n(31699),r=n(85594),o=n(49218),a=n(32181),s=n(82128),c=n(76950),d=n(72488),l=n(65135),u=n(38156),p=n(60483),h=n(98304),g=n(19388),m=n(27003),f=n(33379);const v={};function y(e,t){if(!t)return;const{properties:n,attributes:r}=t;if(n&&Object.assign(e,n),r)for(const[t,n]of Object.entries(r))"boolean"==typeof n?i.S.setBooleanAttribute(e,t,n):"number"==typeof n?e.setAttribute(t,n.toString()):e.setAttribute(t,n)}class S extends r.Pq{bind(e){e.onUnbind(this);const t=e.targets[this.targetNodeId],{events:n,properties:i,instanceKey:r}=this.options||{};if(n)for(const[e,i]of Object.entries(n))t.addEventListener(e,i);let o;if(r&&(o=v[r]),o)return o.elements.push(t),!t.telemetryObject&&(null==i?void 0:i.telemetryObject)&&(t.telemetryObject=i.telemetryObject),void y(t,o.options);Object.assign(t,i)}unbind(e){var t,n,i;const r=e.targets[this.targetNodeId];if(null===(t=this.options)||void 0===t?void 0:t.events)for(const[e,t]of Object.entries(null===(n=this.options)||void 0===n?void 0:n.events))r.removeEventListener(e,t);const o=null===(i=this.options)||void 0===i?void 0:i.instanceKey;if(o){const e=v[o];if(e){const t=e.elements.indexOf(r);t>=0&&e.elements.splice(t,1)}}}}r.m0.define(S);const C="__skippedExperienceRenderKey__";function b(e,t){if(!e)return;if(!e.configRef||!e.configRef.experienceType)return void l.M0.sendAppErrorEvent(Object.assign(Object.assign({},h.tkv),{message:`ConfigRef for InstanceId "${null==e?void 0:e.instanceId}" is ${(null==e?void 0:e.configRef)?"invalid":"missing"}`}));if(m.Gq.get(C,(()=>new Set)).has(e.configRef.experienceType))return;t&&t.ttvrMarkerAggregate&&(0,g.aR)(e.configRef.experienceType,t.ttvrMarkerAggregate,!0);const n=function(e,t){const{configRef:n}=e,i=function(e){const t=null==e?void 0:e.properties;return null==t?void 0:t.cardLayout}(t),r=function(e){const t=null==e?void 0:e.properties;return null==t?void 0:t.cardType}(t),o=r?`_${r}`:"";return`${n.experienceType}_${n.instanceSrc}_${n.sharedNs||""}_${e.instanceId}_${i||""}${o}`}(e,t);if(!1!==(null==t?void 0:t.memoize)&&(0,f.N)()){const i=v[n];let r;if(i){if(t)for(const e of i.elements)y(e,t);i.options=t,r=i.template}else r=w(e,n,t),v[n]={template:r,options:t,elements:[]};return r}return w(e,n,t)}function w(e,t,n){var i;let r=null==n?void 0:n.telemetryObject;if(!r){const t={type:u.c9.Module,name:e.configRef.experienceType};r=new p.D(t)}const l=Object.assign(Object.assign({},null==n?void 0:n.properties),{telemetryObject:r});let h;!1!==(null==n?void 0:n.includeTelemetryTag)&&(h=r.getMetadataTag());const g={instanceKey:t,events:null==n?void 0:n.events,properties:l},m=(0,a.M)(e),f=(0,s.g)(e),v=(0,c.ITY)(m);(0,d.Fg)(e);const y=Object.entries(null!==(i=null==n?void 0:n.attributes)&&void 0!==i?i:{}).map((([e,t])=>"boolean"==typeof t?t?e:"":`${e}=${t}`)).join(" ");return o.dy`<${o.dy.partial(v)} config-instance-src=${o.dy.partial(f)} config-shared-ns=${t=>{var n;return null===(n=e.configRef)||void 0===n?void 0:n.sharedNs}} instance-id=${o.dy.partial(e.instanceId)} data-t=${e=>h} ${function(e){return e?new S(e):""}(g)} ${o.dy.partial(y)}></${o.dy.partial(v)}>${null==n?void 0:n.eagerConnectableScriptTag}`}},76858:function(e,t,n){"use strict";n.d(t,{a:function(){return a},y:function(){return o}});var i=n(31699),r=n(49218);function o(){return new Promise((e=>i.S.queueUpdate((()=>e()))))}function a(e){return r.dy`<script nonce="${()=>window.NONCE_ID}">${r.dy.partial(`window.markTTSR("${e}");`)}</script>`}},82855:function(e,t,n){"use strict";n.d(t,{Bc:function(){return d},Kd:function(){return s},LB:function(){return a},Mx:function(){return o},W_:function(){return c},sW:function(){return l}});var i=n(38895),r=n(95527);function o(e){if(!e||0===e.length)return e;const t=[];return e.forEach((e=>{const n=e.toLocaleLowerCase().trim();n.startsWith(i.PC)&&t.push(n)})),t.sort()}function a(e,t,n){return"mmx"===n||!(!n||!e||e<i.PQ)&&!t}function s(e){if(!e||!e.length)return e;const t=[];return e.forEach((e=>{const n=e.trim();n.startsWith(r.SD)&&t.push(n)})),t.sort()}function c(e,t,n){try{return e&&t&&t.includes(i.my)&&"weather"!==n&&"finance"!==n?i.SL:e}catch(e){}return e}function d(e,t=!1){const{itemOverrides:n}=e||{},i=n&&n.find((e=>"should1sUseFdheadQsp"===e.key));if(i&&i.value)return"true"===i.value;if(t)return!1;const r=n&&n.find((e=>"flights"===e.key||"appendflights"===e.key.toLowerCase()));return!!(r&&r.value&&r.value.length>0)}function l(e,t,n){return t||"edgeChromium"===n||("newsAndInterests"===n||"windowsNewsPlus"===n||"winWidgets"===n)||function(e,t,n){return n&&e&&e.length>0&&e.includes(t)}(e,i.XW,!0)?t?i.NH:i.pN:null}},77316:function(e,t,n){"use strict";n.d(t,{q:function(){return D}});var i=n(33940),r=n(25568),o=n(12108),a=n(33799),s=n(99704),c=n(56692),d=n(23547),l=n(45506),u=n(26007),p=n(92908),h=n(19809),g=n(63535),m=n(15443),f=n(12884),v=n(33379),y=n(4875),S=n(51671),C=n(35357),b=n(65135),w=n(98304),T=n(51125),k=n(75384),P=n(24676),A=n(11765),I=n(75192);const E="gaming",x="following",M="filteredChannels",O="outlookchannels";function L(e){return!(null==e||""===e||"string"!=typeof e&&"number"!=typeof e||isNaN(e))}var D;!function(e){function t(e,t,g){var y;return(0,i.mG)(this,void 0,void 0,(function*(){const D=new d.h((0,f.zp)()),R=c.jG.UserId,{CurrentRequestTargetScope:F={},WidgetAttributes:B={},CurrentMarket:N}=c.jG;let U=t&&t.flightData;if(B.telemetry&&B.telemetry.tmpl&&B.telemetry.tmpl.includes("pwbingads2")){const e="prg-binghplite";U=U?`${U},${e}`:e}let $=new d.h(e);if(t.nextPageUrl){if($=new d.h(new URL(t.nextPageUrl).search),!c.jG.SendFeedCallActivityIdInHeader&&c.jG.ActivityId){const e=l.Al.CurrentFlightSet.has("prg-prsw");"channel"===c.jG.AppType||"winWidgets"===c.jG.AppType&&$.get("activityId")||e&&"edgeChromium"===c.jG.AppType&&$.get("activityId")||$.set("activityId",c.jG.ActivityId)}}else{const e=(yield(0,S.XJ)())===a.Hy.SignedIn;m.n.publish(m.j.userIsSignedIn,{isSignedIn:e,src:"main"});(e?h.$D.getOneServiceParamsWithAuth(R,t.ocid,!1,U||null):h.$D.getOneServiceParamsWithoutAuth(R||t.muidFallback&&`m-${c.jG.ActivityId}`,t.ocid,!1,U||null)).forEach((e=>e.value&&$.set(e.key,e.value))),$.set("contentType",t.contentType),t.requestType===s.xd.wpoService&&function(e,t,n,i){"startgg-feeds"===e.ocid?t.set("apikey",r.xE):t.set("apikey",r.GR);(e.useDelta||e.sessionId)&&(t.set("delta","true"),e.sessionId&&t.set("session",e.sessionId));t.get("newsTop")||"channel"===c.jG.AppType||t.set("newsTop",L(e.numberOfCards)?e.numberOfCards:"48");t.get("newsSkip")||"channel"===c.jG.AppType||t.set("newsSkip","0");e.feedId||t.get("infopaneCount")||"channel"===c.jG.AppType||t.set("infopaneCount",`${L(e.infopaneCount)?e.infopaneCount:r.di}`);if(!t.get("User")){const e=t.get("userid");e?t.set("User",`m-${e}`):(t.set("User",n),null===n&&function(e,t){b.M0.sendAppErrorEvent(Object.assign(Object.assign({},w.jAy),{message:"Cannot get MUID.",pb:Object.assign(Object.assign({},w.jAy.pb),{customMessage:`${e}; ProbableCause: cannot access cookie`,url:t,activityId:c.jG.ActivityId})}))}("Using OneServiceUrl",i))}t.delete("user")}(t,$,R,g);if(t.feedName&&"default"!=t.feedName&&t.feedName===E){const e=D.get("gamingInterestId");if(e)$.set("query",e);else{const e=null!==(y=window.widget__query)&&void 0!==y?y:t.query;$.set("query","string"==typeof e?e:"core gaming");const{pageType:n}=B;"gamingfeed-widget"===n&&$.set("wpopageid","wponoads");const i=window.widget__satoriId;"string"==typeof i&&$.set("satoriId",i)}}t.feedName===O&&($.set("channels","true"),$.set("followersCount","true"),$.set("iff","true")),t.feedName===x&&"skype-desktop-following"===t.ocid&&$.set("renderedSegments","FollowCarousel");const n="true"===u.c.getQueryParameterByName("channels_available",window.location.href);("osmhp"===t.pageScenario&&"1s-excludefc"===t.flightData||n)&&$.set("efc","true")}const _=(t.feedName===x||t.feedName===M)&&"skype-desktop-following"!==t.ocid;if(t.feedId){const e=t.useProviderKey||_&&!t.feedId.startsWith("Y_")?"ProviderId":"InterestIds";$.set(e,t.feedId)}_&&$.set("iff","true");const H=D.get("OneSvc-Uni-Feat-Tun");H&&$.set("OneSvc-Uni-Feat-Tun",H),!0===t.disableContent&&$.set("disablecontent","true"),t.edgExpMask&&$.set("edgExpMask",t.edgExpMask),t.timeoutMs&&$.set("timeOut",t.timeoutMs.toString());const W=(0,T.Ee)();W>0&&$.set("cbypass",W.toString()),t.wpoPageId&&("wpoads"===t.wpoPageId.toLowerCase()&&"en-us"!==(null==N?void 0:N.toLowerCase())?$.set("wpopageid","wponoads"):$.set("wpopageid",t.wpoPageId)),t.wpoSchema&&$.set("wposchema",t.wpoSchema),t.newsTop&&"channel"!==c.jG.AppType&&$.set("newsTop",t.newsTop.toString()),t.newsSkip&&null==t.nextPageUrl&&"channel"!==c.jG.AppType&&$.set("newsSkip",t.newsSkip.toString()),(t.enableRightRailColumn||t.renderSingleColumn||t.renderEnterpriseSingleColumn)&&$.set("wpopageid",t.wpoPageId),t.installedWidgets&&t.installedWidgets.length&&$.set("installedWidgets",t.installedWidgets.join(",")),t.clientLayoutVersion&&$.set("clv",t.clientLayoutVersion),t.layout&&$.set("layout",t.layout),c.jG.SendFeedCallActivityIdInHeader&&$.delete("activityId"),c.jG.SendUserIdInHeader&&$.delete("User"),(0,v.N)()?t.isRetry?$.set("caller","retryForTimeout"):t.refreshType&&$.set("caller",t.refreshType):$.set("caller","ssr"),t.isDhp&&$.set("dhp","1"),t.isXFeed&&$.set("rid",t.requestId),t.private&&$.set("private","1"),t.viewportSize&&$.set("vpSize",t.viewportSize),t.apiKey&&$.set("apikey",t.apiKey),t.audienceMode&&($.set("audienceMode",(null==F?void 0:F.audienceMode)||t.audienceMode),t.audienceMode===o.F.Kids&&n()&&($.set("apikey",r.os),$.set("ocid",r.vy))),t.feedId&&t.feedName===x&&n()&&($.set("ocid",r.i9),$.set("apikey",r.S1));const j=(0,P.UU)();if(t.feedName===E&&"anaheim-ntp-feeds"===t.ocid&&j&&($.set("ocid",r.$v),$.set("apikey",r.gr)),t.enableWpoAdPlacements){const e=l.Al.ClientSettings.browser&&"true"===l.Al.ClientSettings.browser.ismobile||"phone"===l.Al.ClientSettings.deviceFormFactor?"true":"false";$.set("mobile",e);const t=(0,C.rv)()||(0,C.hI)();$.set("cookieWallPresent",t.toString())}const G=D.get("wpoitems");G&&$.set("wpoitems",G.toString());const V=D.get("bypass_trigger");V&&!t.feedId&&$.set("bypass_trigger",V.toString());const q=p.X.UpsellGamerMode&&t.feedName===E,z="prg-gmode-upsell";c.jG.ShouldUseFdheadQsp&&q?$.set("fdhead",`${t.fdhead},prg-gmode-upsell`):c.jG.ShouldUseFdheadQsp||"mmx"===c.jG.AppType&&t.fdhead?$.set("fdhead",t.fdhead):q&&$.set("fdhead",z),(0,k.TR)()&&$.set("prerender","1"),t.adRefreshVariant&&$.set("adRefreshVariant",t.adRefreshVariant),t.anaheimPageLayout&&$.set("anaheimPageLayout",t.anaheimPageLayout),t.gdpr&&$.set("gdpr","1"),t.verticalName&&$.set("verticalName",t.verticalName),t.aver&&$.set("aver",t.aver),t.theme&&$.set("theme",t.theme),t.over&&$.set("over",t.over),t.oem&&$.set("oem",t.oem),t.devicetype&&$.set("devicetype",t.devicetype),t.smode&&$.set("smode",t.smode),t.usri&&$.set("usri",t.usri),t.duotone&&$.set("duotone",t.duotone.toString()),t.cardIds&&$.set("cardIds",t.cardIds),t.column&&$.set("column",t.column),t.fcl&&$.set("fcl","true"),t.layout&&$.set("layout",t.layout),t.colstatus&&$.set("colstatus",t.colstatus),t.colwidth&&$.set("colwidth",t.colwidth.toString()),"number"==typeof t.pageConfiguration&&$.set("pgc",t.pageConfiguration.toString());const Q=window&&window.navigator&&window.navigator.deviceMemory;Q&&"channel"!==c.jG.AppType&&$.set("memory",Q.toString());(l.Al.CurrentFlightSet.has("prg-forcenoads")||(yield(0,P.VS)()))&&$.set("edgenoads","1");(l.Al.CurrentFlightSet.has("prg-forceredads")||(yield(0,P.OM)()))&&$.set("edgereduceads","1"),t.anaheimLayoutPromotion&&$.set("promotion",t.anaheimLayoutPromotion),t.anaheimContentSelection&&$.set("selection",t.anaheimContentSelection);const Z=l.Al.ClientSettings&&l.Al.ClientSettings.queryparams?l.Al.ClientSettings.queryparams:"",K=new d.h(Z).get("canid");K&&$.set("triggerModules","promoxfeedupsell".concat(":",K)),yield function(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=e.feedName===x;n&&b.M0.addOrUpdateTmplProperty("following-feed","1");const i=n||"default"===e.feedName&&e.enableFREOverlayMyFeed;if("edgeChromium"===c.jG.AppType&&i&&(l.Al.EdgeNTPHeader||(yield A.L.isApiAvailableToUse()))){let n=l.Al.EdgeNTPHeader&&l.Al.EdgeNTPHeader.freSeenCount&&l.Al.EdgeNTPHeader.freSeenCount.toString();if(!n&&(yield A.L.isApiAvailableToUse())){const e=yield A.L.getPreferenceSetting(I.nc.seen_interest_fre_count,!0);n=e&&e.value?e.value.toString():"0"}const i=u.c.getQueryParameterByName("firstlaunch",window.location.href);(e.doNotTriggerFREInSession||"1"===i)&&(n="10"),b.M0.addOrUpdateTmplProperty("freoverlay-ux","1"),(e.sendFRESeenCount&&e.enableFREOverlayMyFeed&&"default"===e.feedName||e.feedName===x&&e.sendFRESeenCount)&&t.set("overlay",n)}}))}(t,$);const J=u.c.getParamsWithItems(location.search);if(J){const e=J.find((e=>e.key===s.VL));if(e){const n=t.contentType?t.contentType:"article,video,slideshow",i=[...new Set(`${n},${e.value}`.split(","))];$.set("contentType",i.join(","))}const n=J.find((e=>e.key===s.Ow));n&&n.value&&$.set("installedWidgets",n.value)}const X=new URLSearchParams((0,f.zp)()).get("feedParams");if(X){X.split(",").forEach((e=>{if(e.includes("=")){const[t,n]=e.split("=");$.set(t.trim(),n.trim())}}))}return $.toString()}))}function n(){return"channel"!==c.jG.AppType}e.requestInit=function(e){return(0,i.mG)(this,void 0,void 0,(function*(){e=e||{};const t={method:"GET"},n=yield h.$D.getOneServiceFeedCallHeaders((0,y.VQ)(),e.feedName,e.useXboxAccessToken);t.headers=Object.assign(Object.assign({},n),e.additionalHeaders),e.credentialsOverride?t.credentials=e.credentialsOverride:t.credentials="include",e.enableWpoAdPlacements&&(t.headers["ads-referer"]=location.href,t.headers["taboola-sessionId"]=e.taboolaSessionId||"init");const i=c.jG.UserId;return e.requestType!==s.xd.wpoService||i||(t.headers.MUID=c.jG.ActivityId),t}))},e.buildRequestURLForOneService=function(e){return(0,i.mG)(this,void 0,void 0,(function*(){let n,i;if((e=e||{}).feedName===x)i=e.feedId?r.eK:r.ly;else i=e.pageScenario;const o=`${r.lP}${i}`;return n=new d.h((0,f.zp)()).get(r.YU)?new URL(o,r.LJ):(0,g.fU)(o),n.search=yield t(n.search,e,n.href),n.searchParams.sort(),n}))},e.buildServiceRequestURL=function(e){var n,a,s,u;return(0,i.mG)(this,void 0,void 0,(function*(){let i;e=e||{};const{CurrentRequestTargetScope:p={},ConfigServiceBaseUrl:h}=c.jG,m=new d.h((0,f.zp)()),y=null!==(n=e.pageScenario)&&void 0!==n?n:e.shouldUseNewWpoEndpoint?r.bx:r.$s;let S=e.requestPathOverride?`${e.requestPathOverride}${y}`:`${r.Mo}${y}`;S=function(e){return e&&e===`${r.Mo}${r.bx}`&&l.Al&&l.Al.CurrentFlightSet&&l.Al.CurrentFlightSet.has(r.CO)&&"edgeChromium"===c.jG.AppType?`${r.hk}${r.bx}`:e}(S);const C=e.feedName&&"default"!=e.feedName;if(e.feedId||C)switch(e.feedName){case M:S=`${r.Mo}${r.Td}`;break;case x:e.feedId?(S=`${r.Mo}${r.eK}`,b.M0.addOrUpdateTmplProperty("filtered-feed","1"),!(null===(a=e.nextPageUrl)||void 0===a?void 0:a.includes(r.ly))&&(null===(s=e.nextPageUrl)||void 0===s?void 0:s.includes(e.feedId))||(e.nextPageUrl="")):(S=`${r.Mo}${r.ly}`,(null===(u=e.nextPageUrl)||void 0===u?void 0:u.includes(r.eK))&&(e.nextPageUrl=""));break;case E:S=`${r.Mo}${r.I1}`;break;case"sports":S=`${r.Mo}${r.Qn}`;break;case O:S=`${r.Mo}outlookchannels`;break;default:S="work"===e.feedSource?`${r.Mo}${r.UW}`:`${r.Mo}${r.J8}`}e.isXFeed&&e.xFeedPageScenario&&(S=`${r.Mo}${e.xFeedPageScenario}`);const w=(0,v.N)();if(w&&["enabled","true"].includes(m.get(r.YU)))e.audienceMode===o.F.Kids||(null==p?void 0:p.audienceMode)===o.F.Kids||e.feedId?i=new URL(r.SO,r.LJ):(S=`${r.lP}${y}`,i=new URL(S,r.LJ));else if(w&&"enabled"===m.get(r.P$))i=new URL(S,h.origin);else if(function(e){return!e&&"edgeChromium"===c.jG.AppType&&c.jG.OneServiceOverride&&l.Al&&l.Al.CurrentFlightSet&&l.Al.CurrentFlightSet.has(r.IA)}(w))S=`${r.L3}${r.bx}`,i=new URL(S,c.jG.OneServiceOverride);else{const t=e.domainOverride?e.domainOverride:(0,g.qQ)().origin;i=new URL(S,t)}return i.search=yield t(i.search,e,i.href),i.searchParams.sort(),i}))}}(D||(D={}))},15443:function(e,t,n){"use strict";n.d(t,{j:function(){return s},n:function(){return a}});var i=n(92805),r=n(99590),o=n(27003);const a=(0,r.h)({getInstance:()=>o.Gq.get("__feed-card-provider__serviceRequestAuthSubscription__",(()=>new i.X))}),s={userIsSignedIn:"userIsSignedIn"}},99704:function(e,t,n){"use strict";var i,r,o,a;n.d(t,{Ow:function(){return c},Rx:function(){return a},VL:function(){return s},xd:function(){return o}}),function(e){e.activityId="x-client-activityid",e.authorization="Authorization",e.entAuthorization="Ent-Authorization",e.muid="MUID",e.adsReferer="ads-referer",e.taboolaSessionId="taboola-sessionId"}(i||(i={})),function(e){e.actionType="actionType",e.activityId="activityId",e.apiKey="apikey",e.audienceMode="audienceMode",e.aver="aver",e.bypassTrigger="bypass_trigger",e.cacheBypassQueryStringParamName="cbypass",e.channel="channel",e.channels="channels",e.cm="cm",e.complexInfoPaneEnabled="cipenabled",e.contentType="contentType",e.delta="delta",e.devicetype="devicetype",e.disableContent="disablecontent",e.dhp="dhp",e.disableTypeSerialization="DisableTypeSerialization",e.duotone="duotone",e.edgExpMask="edgExpMask",e.gamingInterestId="gamingInterestId",e.infopaneCount="infopaneCount",e.fcl="fcl",e.fdhead="fdhead",e.feedParams="feedParams",e.feedLayoutRequestType="t",e.filter="$filter",e.followersCount="followersCount",e.ids="ids",e.infoPaneItemCount="t =InfoPane.itemCount",e.location="location",e.market="market",e.memory="memory",e.newsTop="newsTop",e.newsSkip="newsSkip",e.ocid="ocid",e.oem="oem",e.oneSvcUni="OneSvc-Uni-Feat-Tun",e.over="over",e.overlay="overlay",e.parentContentId="parent-content-id",e.parentNamespace="parent-ns",e.parentTitle="parent-title",e.queryQ="q",e.query="query",e.queryType="queryType",e.qScope="qscope",e.responseSchema="responseSchema",e.satoriId="satoriId",e.select="$select",e.session="session",e.signInCookieName="scn",e.skip="$skip",e.smode="smode",e.source="source",e.targetType="targetType",e.theme="theme",e.timeOut="timeOut",e.top="$top",e.type="type",e.User="User",e.user="user",e.userid="userid",e.usri="usri",e.wpoitems="wpoitems",e.wpoPageId="wpopageid",e.wpoSchema="wposchema",e.wrapOData="wrapodata",e.cookieWallPresent="cookieWallPresent",e.caller="caller",e.installedWidgets="installedWidgets",e.clientLayoutVersion="clv",e.pageConfiguration="pgc",e.requestId="rid",e.interestIds="InterestIds",e.providerId="ProviderId",e.includeFollowingFilters="iff",e.mobile="mobile",e.clientLocation="clientLocation",e.clientLocationProvider="clientLocationProvider",e.clientLocationAccuracy="clientLocationAccuracy",e.clientLocationTimeStamp="clientLocationTimeStamp",e.collectionIds="collectionIds",e.endTime="EndTime",e.eventType="EventType",e.exchangeCode="ExchangeCode",e.listIds="listIds",e.requireQuoteDetail="requireQuoteDetail",e.skipNum="skip",e.startTime="StartTime",e.topNum="top",e.prerender="prerender",e.layout="layout",e.triggerModules="triggerModules",e.promoXFeed="promoxfeedupsell",e.canid="canid",e.edgeNoAds="edgenoads",e.edgeReduceAds="edgereduceads",e.private="private",e.viewportSize="vpSize",e.removeStoryCarousel="efc",e.promotion="promotion",e.selection="selection",e.cardIds="cardIds",e.renderedSegments="renderedSegments",e.column="column",e.colstatus="colstatus",e.colwidth="colwidth",e.anaheimPageLayout="anaheimPageLayout",e.adRefreshVariant="adRefreshVariant",e.gdpr="gdpr",e.verticalName="verticalName"}(r||(r={})),function(e){e[e.oneService=0]="oneService",e[e.wpoService=1]="wpoService"}(o||(o={})),function(e){e.Bgtask="bgtask",e.Api="api",e.App="app",e.RetryFetch="retryFetch",e.Scroll="scroll"}(a||(a={}));const s="idxContentTypeOverride",c="installedWidgetsOverride"},84486:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var i=n(44772);const r=new class{constructor(){this.contentId="",this.allowedContentTypes=new Set([i.PL.Article,i.PL.Slideshow,i.PL.Video])}setContentIdCandidateIfNeeded(e,t,n){this.contentId||n||!this.allowedContentTypes.has(t)||(this.contentId=e)}getContentId(){return this.contentId}}},51873:function(e,t,n){"use strict";n.d(t,{$Y:function(){return i},Q8:function(){return s},jz:function(){return c},pj:function(){return a}});var i,r,o=n(56692);function a(e){return e?[{isDarkMode:!0,hexColor:r.imgDark},{isDarkMode:!1,hexColor:r.imgLight}]:[{isDarkMode:!0,hexColor:r.noImgDark},{isDarkMode:!1,hexColor:r.noImgLight}]}function s(e){return e.enableAnimatedShowMoreBtn?"animated":e.enableFilledIconOnHover?"fillediconhover":e.noBackPlateOnRest?"nobackplate":"default"}function c(e){return`https://www.msn.com/${o.jG.CurrentMarket}/community/channel/${e}`}!function(e){e.default="default",e.condensed="condensed",e.infoPane="infoPane",e.infoPane1x3y="infoPane1x3y",e.infoPaneSplitVertical="infoPaneSplitVertical",e.infoPaneSplitHorizontal="infoPaneSplitHorizontal"}(i||(i={})),function(e){e.imgLight="#F5F5F5",e.imgDark="#2E2E2E",e.noImgLight="#DEDEDE",e.noImgDark="#222"}(r||(r={}))},25295:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});const i={_60x60:{width:60,height:60},_82x82:{width:82,height:82},_104x84:{width:104,height:84},_141x250:{width:141,height:250},_180x88:{width:180,height:88},_203x114:{width:203,height:114},_216x114:{width:216,height:114},_220x124:{width:220,height:124},_220x178:{width:220,height:178},_238x120:{width:238,height:120},_240x129:{width:240,height:129},_240x253:{width:240,height:253},_242x144:{width:242,height:144},_242x176:{width:242,height:176},_300x156:{width:300,height:156},_300x169:{width:300,height:169},_300x174:{width:300,height:174},_300x179:{width:300,height:179},_300x180:{width:300,height:180},_300x200:{width:300,height:200},_300x225:{width:300,height:225},_300x282:{width:300,height:282},_300x304:{width:300,height:304},_300x326:{width:300,height:326},_300x462:{width:300,height:462},_306x197:{width:306,height:197},_385x225:{width:385,height:225},_362x272:{width:362,height:272},_406x304:{width:406,height:304},_486x304:{width:486,height:304},_468x304:{width:468,height:304},_604x296:{width:604,height:296},_612x304:{width:612,height:304},_612x326:{width:612,height:326},_612x328:{width:612,height:328},_612x462:{width:612,height:462},_628x372:{width:628,height:372}}},31886:function(e,t,n){"use strict";n.d(t,{MW:function(){return l},Z1:function(){return p},nj:function(){return u}});var i=n(38156),r=n(65135),o=n(34960),a=n(20479),s=n(60483);const c=void 0;function d(e,t,n,r,o){return function(e,t,n,i,r,o,a,c,d,l,u){let p=t||{name:n||""};p=Object.assign(Object.assign({},p),{action:o,behavior:i,content:d,destinationUrl:a,overrideDestinationUrl:c,name:n||"",type:r,feed:l,ext:u});const h=p;return e?e.addOrUpdateChild(h):new s.D(p)}(e,o,t,n,i.c9.ActionButton,c,c,c,r)}const l={articledestination:"articledestination",contentCardName:"ContentCard",destination:"destination",flexCard:"FlexCard",hideName:"Hide",whyAmISee:"WhyAmISee",topQuestionsBadge:"TopQuestionsBadge",highlightsBadge:"HighlightsBadge",relatedStories:"RelatedStories",showRelatedStories:"ShowRelatedStories",saveName:"Save",seeMoreName:"Card Action Ellipsis",showFewerName:"Fewer stories like this",showMoreName:"More stories like this",undoShowFewer:"Undo fewer stories like this",undoShowMore:"Undo more stories like this",undoSaveName:"UndoSave",webCardName:"WebCard",webContentName:"WebContent",clickableProviderIcon:"Provider Icon",commentsButton:"Comments",image:"Image",sydneySummary:"SydneySummary",mutePublisher:"MutePublisher",feedback:"Feedback",share:"Share",sydneyMenu:"SydneyMenu",summarize:"Summarize",topQuestions:"TopQuestions",keyTakeaways:"KeyTakeaways",degreeOverview:"DegreeOverview",factCheck:"FactCheck",shoppingArticleCard:"ShoppingArticleCard",cardHeaderTitle:"cardHeaderTitle"},u=(e,t,n,r,o,s=l,c)=>{if(!e)return;const u=(0,a.B)(t,n);let p,g,m={};if(null==t?void 0:t.destinationUrl){const e=h(t.destinationUrl);e!==t.destinationUrl&&(m={overrideDestinationUrl:e})}if(o)p=e.addOrUpdateChild({name:s.webCardName,content:u}),g=p.addOrUpdateChild(Object.assign(Object.assign({},m),{name:s.webContentName,type:i.c9.Headline,behavior:i.wu.Navigate,content:u,ext:r}));else{let n=s.contentCardName;(null==t?void 0:t.isPanoCard)?n="NewsPanoCard":t.isShoppingArticleCard&&(n=s.shoppingArticleCard),p=e.addOrUpdateChild({name:n,type:i.c9.ContentCard,content:u}),g=p.addOrUpdateChild(Object.assign(Object.assign({},m),{name:s.destination,type:i.c9.Headline,behavior:i.wu.Navigate,content:u,ext:r}))}const f=d(p,s.seeMoreName,i.wu.More,u),v=d(p,s.saveName,i.wu.Save,u),y=p.addOrUpdateChild({name:s.undoSaveName,type:i.c9.ActionButton,behavior:i.wu.UndoSave,content:u}),S=p.addOrUpdateChild({name:s.hideName,type:i.c9.ActionButton,behavior:i.wu.Hide,content:u}),C=p.addOrUpdateChild({name:s.whyAmISee,type:i.c9.ActionButton,behavior:i.wu.Show,content:u}),b=p.addOrUpdateChild({name:s.showMoreName,type:i.c9.ActionButton,behavior:i.wu.Like,content:u}),w=p.addOrUpdateChild({name:s.showFewerName,type:i.c9.ActionButton,behavior:i.wu.Dislike,content:u}),T=p.addOrUpdateChild({name:s.undoShowMore,type:i.c9.ActionButton,behavior:i.wu.Unlike,content:u}),k=p.addOrUpdateChild({name:s.undoShowFewer,type:i.c9.ActionButton,behavior:i.wu.Undislike,content:u}),P=e.addOrUpdateChild({name:l.relatedStories,type:i.c9.ContentCard,content:u}),A=e.addOrUpdateChild({name:l.showRelatedStories,type:i.c9.ActionButton,behavior:i.wu.Show,content:u}),I=e.addOrUpdateChild({name:l.flexCard,type:i.c9.ContentCard,content:u}),E=e.addOrUpdateChild({name:s.clickableProviderIcon,type:i.c9.ActionButton,behavior:i.wu.Navigate,content:u}),x=e.addOrUpdateChild({name:s.commentsButton,type:i.c9.ActionButton,behavior:i.wu.Navigate,content:u}),M=e.addOrUpdateChild({name:s.image,type:i.c9.Headline,behavior:i.wu.Navigate,content:u,ext:r}),O=e.addOrUpdateChild({name:s.mutePublisher,type:i.c9.ActionButton,behavior:i.wu.Mute,content:u}),L=e.addOrUpdateChild({name:s.feedback,type:i.c9.ActionButton,behavior:i.wu.Feedback,content:u}),D=e.addOrUpdateChild({name:s.share,type:i.c9.ActionButton,behavior:i.wu.Share,content:u}),R=e.addOrUpdateChild({name:s.sydneySummary,type:i.c9.ActionButton,behavior:i.wu.SydneySummary,content:u}),F=e.addOrUpdateChild({name:s.sydneyMenu,type:i.c9.ActionButton,behavior:i.wu.SydneyMore,content:u}),B=e.addOrUpdateChild({name:s.summarize,type:i.c9.ActionButton,behavior:i.wu.SydneySummary,content:u}),N=e.addOrUpdateChild({name:s.topQuestions,type:i.c9.ActionButton,behavior:i.wu.SydneyTopQuestions,content:u}),U=e.addOrUpdateChild({name:s.keyTakeaways,type:i.c9.ActionButton,behavior:i.wu.SydneyKeyTakeaways,content:u}),$=e.addOrUpdateChild({name:s.degreeOverview,type:i.c9.ActionButton,behavior:i.wu.SydneyDegreeOverview,content:u}),_=e.addOrUpdateChild({name:s.factCheck,type:i.c9.ActionButton,behavior:i.wu.SydneyFactCheck,content:u}),H=e.addOrUpdateChild({name:s.cardHeaderTitle,type:i.c9.ActionButton,behavior:i.wu.More,content:{headline:"cardHeaderTitle"}});let W,j,G;if((null==t?void 0:t.isPanoCard)&&(W=p.addOrUpdateChild({name:s.articledestination,type:i.c9.Headline,behavior:i.wu.Navigate,content:u})),t&&t.destinationUrl&&n.topQuestions&&Array.isArray(n.topQuestions)&&n.topQuestions.length){const e=new URL(t.destinationUrl);e.searchParams.set("questionId",n.topQuestions[0].id),j=p.addOrUpdateChild({overrideDestinationUrl:h(e),name:s.topQuestionsBadge,type:i.c9.ActionButton,behavior:i.wu.Hover,content:u})}if(t&&t.destinationUrl&&n.highlights&&Array.isArray(n.highlights)&&n.highlights.length){const e=new URL(t.destinationUrl);e.searchParams.set("showHighlights","true"),G=p.addOrUpdateChild({overrideDestinationUrl:h(e),name:s.highlightsBadge,type:i.c9.ActionButton,behavior:i.wu.Hover,content:u})}const{zone:V}=e.contract||{};V&&(p.contract.zone=V,g.contract.zone=V);let q={componentRoot:e,contentCard:p,destination:g,seeMore:f,save:v,showMore:b,showFewer:w,undoShowMore:T,undoShowFewer:k,undoSave:y,hide:S,whyAmISee:C,topQuestionsBadge:j,highlightsBadge:G,relatedStories:P,showRelatedStories:A,clickableProviderIcon:E,commentsButton:x,image:M,sydneySummary:R,mute:O,feedback:L,share:D,sydneyMenu:F,summarize:B,topQuestions:N,keyTakeaways:U,degreeOverview:$,factCheck:_,articledestination:W,cardHeaderTitle:H};return c&&(q=Object.assign(Object.assign({},q),{flexcard:I})),q};function p(e){if(!e)return;const t=new URL(e),n=r.M0&&"function"==typeof r.M0.getRequestId?r.M0.getRequestId():null;return n&&t.searchParams.set("cvid",n),t.toString()}function h(e){if(!e)return;const t=new URL(p(e)),n=(0,o.ku)();return n&&t.searchParams.set("ocid",n),t.toString()}},76859:function(e,t,n){"use strict";n.d(t,{C7:function(){return a},Nv:function(){return i},OO:function(){return s},X9:function(){return c},sn:function(){return o}});var i,r=n(9791);!function(e){e._halfx_2y="_.5x_2y",e._1x_1y="_1x_1y",e._1x_2y="_1x_2y",e._1x_3y="_1x_3y",e._1x_4y="_1x_4y",e._1x_5y="_1x_5y",e._2x_1y="_2x_1y",e._2x_2y="_2x_2y",e._2x_3y="_2x_3y",e._2x_4y="_2x_4y",e._2x_6y="_2x_6y",e._3x_1y="_3x_1y",e._3x_2y="_3x_2y",e._4x_1y="_4x_1y",e._4x_2y="_4x_2y",e._5x_1y="_5x_1y",e._5x_2y="_5x_2y",e._05u="0.5u",e._075u="0.75u",e._1u="1u",e._125u="1.25u",e._175u="1.75u",e._2c="_2x_2y"}(i||(i={}));const o=146,a=300,s=12,c=(0,r.Z)((e=>Array(e).fill(o)))},73756:function(e,t,n){"use strict";n.d(t,{SA:function(){return l},XX:function(){return d},c9:function(){return u}});var i=n(38156),r=n(5535),o=n(76859),a=n(60483),s=n(10920),c=n(14764);function d(e){const{cardSlot:t,layoutTemplateName:n,rowCount:c,rowHeightPx:d,colWidthPx:l,gutterPx:u,parentTelemetryObject:p,colOverride:h,cardMetadata:g,prevCardCount:m}=e.mapperArgs,{grid_area:f,layouts:v,cardDomOrder:y,telemetryRowCol:S}=t,C=v[e.columnArrangement],b=y&&y[e.columnArrangement],w=g&&g.id!==e.contentId?g.id:void 0,T=function(e,t,n,i,a,c,d,l,u,p,h,g,m,f,v,y,S,C){const b=i&&i.length?i[0]-1:0,w=e&&~~e.substr(e===o.Nv._halfx_2y?5:4,1),T=c&&c.slice(b,b+w);let k=T&&T.reduce(((e,t)=>e+t))+(w-1)*l,P=e&&(e===o.Nv._halfx_2y?1:~~e.substr(1,1)),A=i&&i.length?(i[0]+1)/2:1;if(s.re.includes(t)&&r.tY[e]){const t=r.tY[e].height;k=t&&parseInt(t.substring(0,t.length-2)),P=r.tY[e].width,p=0,A=i&&i[0]}const I=u||n&&n.substr(4)&&parseInt(n.substr(4)),E=I?(v||0)+I:void 0,x=Number.isInteger(y)&&y>-1?y+1:void 0,M=E?`${E}${x?`.${x}`:""}`:void 0;return{width:P&&d&&P*d+(P-1)*l,height:k,slot:I,template:t,row:a||0===a?a+A:void 0,col:p>0?p:i&&i[1],badgeType:h,traceIdIndex:g,recoId:m,ri:f,co:E,sco:x,cid:M,ct1s:S,cid1s:C}}(C,n,f,S&&S[e.columnArrangement],c&&c[e.columnArrangement],d&&d[e.columnArrangement],l,u,b,h,e.badgeType,g&&g.traceIdIndex,e.recoId,e.ri,m,e.subCardIndex,g&&g.type,w),k=new a.D({type:i.c9.Module,name:e.experienceType,zone:e.zone,ext:T});let P=Object.assign({},p);return p&&P&&(P=p.addOrUpdateChild(Object.assign(Object.assign({},P.contract),{ext:T}))),{id:e.id,childDOMOrder:b,cardSize:C,parentTelemetryObject:P,telemetryExt:T,telemetryObject:k}}function l(e,t){if(!t)return t;const{cardSlot:n}=e.mapperArgs,{layouts:i}=n;return Object.keys(i).forEach((n=>{const i=d({id:e.id,experienceType:e.experienceType,mapperArgs:e.mapperArgs,columnArrangement:n});t[n].push(i)})),t}function u(e,t){const{id:n,experienceType:i,mapperArgs:r}=e;return(0,c.z$)(r,t,(e=>d({id:n,experienceType:i,mapperArgs:r,columnArrangement:e})))}},86294:function(e,t,n){"use strict";var i;n.d(t,{U:function(){return i}}),function(e){e.TopicFeedCard="topic-feed-card",e.articleFreCard="article-fre-card",e.autosCarouselCard="autos-carousel-card",e.autosMarketplaceCard="autos-marketplace-card",e.bingDailyQuizCard="bing-daily-quiz-card",e.bingThisOrThatCard="bing-this-or-that-card",e.bingVideoCarousel="bing-video-carousel",e.boostAdCard="boost-ad-card",e.cashbackCarouselCard="cashback-carousel-card",e.casualGamesCard="casual-games-card",e.casualGamesCarouselCard="casual-games-carousel-card",e.casualGamesStripeCarouselCard="casual-games-stripe-carousel-card",e.channelCarouselCard="channel-carousel-card",e.channelFilterCard="channel-filter-card",e.coldStartCard="cold-start-card",e.comicsCarouselCard="comics-carousel-card",e.communityCard="community-card",e.commuteCard="commute-card",e.companyNewsCard="company-news-card",e.contentCard="content-card",e.contentCardPreview1x="content-card-preview-1x",e.contentGroup="content-group",e.contentGroupCard="content-group-card",e.dailyFixGamesCarouselCard="daily-fix-games-carousel-card",e.denseCard="dense-card",e.digestCard="digest-card",e.displayAdCard="display-ad-card",e.edgeShoppingCard="edge-shopping-card",e.editorsPickCarouselCard="editors-pick-carousel-card",e.electionCard="election-card",e.electionsCard="elections-card",e.entertainmentPremierCard="entertainment-premier-card",e.esportsCard="esports-card",e.esportsStreamsCard="esports-streams-card",e.flexArticleCard="flex-article-card",e.followingFREInlineCard="following-fre-inline-card",e.gamingCompeteCard="gaming-compete-card",e.gamingGamerModeUpsellCard="gaming-gamer-mode-upsell-card",e.gamingInterestGroupCard="gaming-interest-group-card",e.gamingMatchCard="gaming-match-card",e.gamingMediaCarouselCard="gaming-media-carousel-card",e.gamingPersonalizationCard="gaming-personalization-card",e.gamingRecentlyPlayedCard="gaming-recentlyplayed-card",e.gamingRecommendedCard="gaming-recommended-card",e.gamingRedditCard="gaming-reddit-card",e.gamingRewardsCard="gaming-rewards-card",e.gamingStreamCard="gaming-stream-card",e.gamingTournamentCard="gaming-tournament-card",e.gamingUpcomingCard="gaming-upcoming-card",e.gamingVideoCard="gaming-video-card",e.groceryCouponSdCard="grocery-coupon-sd-card",e.healthArticlesCard="health-articles-card",e.healthCard="health-card",e.healthFitnessCard="health-fitness-card",e.healthRiverCard="health-river-card",e.healthTipCard="health-tip-card",e.hideStoryCard="hide-story-card",e.horoscopeAnswerCard="horoscope-card",e.hotListCard="hot-list-card",e.industryNewsCard="industry-news-card",e.infopaneCard="infopane-card",e.infopaneSlideCard="infopane-slide-card",e.interestManagementCard="interest-management-card",e.linkedInCard="linked-in-card",e.localNewsCarCard="local-news-carousel-card",e.lotteryCard="lottery-card",e.mangaCard="manga-card",e.marketplaceCard="marketplace-card",e.microsoftFeedCard="microsoft-feed-card",e.mobileRewardsCard="mobile-rewards-card",e.mobileShoppingCard="mobile-shopping-card",e.moneyAddWatchlistCard="money-add-watchlist-card",e.moneyCard="money-card",e.moneyEdgeCard="money-edge-card",e.moneyInfoCardWC="money-info-card",e.moneyTopicStripeCarouselCard="money-topic-stripe-carousel-card",e.nativeAdCard="native-ad-card",e.nativeTopAdCard="native-top-ad-card",e.newsGroupsCard="news-groups-card",e.newsSegmentCarousel="news-segment-carousel",e.onThisDayCard="on-this-day-card",e.panoCard="pano-card",e.partnerUpsellCard="partner-upsell",e.perspectiveCard="perspective-card",e.placeholderCard="placeholder-card",e.pollsCard="polls-card",e.prayerTimesCard="prayer-times-card",e.prismCard="prism-card",e.prismCarouselCard="prism-carousel-card",e.profileCarouselCard="profile-carousel-card",e.publisherCarouselCard="publisher-carousel-card",e.publisherListCard="publisher-list-card",e.qnaCard="qna-card",e.quizCard="quiz-card",e.realEstateCard="real-estate-card",e.recipesCard="recipes-card",e.recommendedCardFeed="recommended-card-feed",e.recommendedInterestsCard="recommended-interests-card",e.recommendedSearchCarousel="recommended-search-carousel",e.recommendedSearchesCard="recommended-searches-card",e.responsiveAdCard="responsive-ad-card",e.responsiveCard="responsive-card",e.rewardsCard="rewards-card",e.rewardsDailyCheckinCard="rewards-daily-checkin-card",e.rewardsDailySetCard="rewards-daily-set-card",e.richCalendarCard="rich-calendar-card",e.sectionHeaderCard="section-header-card",e.selectCarouselCard="select-carousel-card",e.serendipityCard="serendipity-card",e.shoppingCard="shopping-card",e.shoppingCarouselCard="shopping-carousel-card",e.shoppingCarouselProngWC="shopping-carousel-prong-wc",e.shoppingEventsDealCard="shopping-events-deal-card",e.shoppingFashionCarouselWC="shopping-fashion-carousel-wc",e.shoppingSdCard="shopping-sd-card",e.shoppingVideoCarouselCard="shopping-video-carousel-card",e.sportsCard="sports-card",e.sportsOlympicCard="sports-olympic-card",e.sportsTopicStripeCarouselCard="sports-topic-stripe-carousel-card",e.sportsWorldCupCard="sports-worldcup-card",e.spotlightCard="spotlight-card",e.superListCard="super-list-card",e.superappUpsellCard="superapp-upsell-card",e.tabbedFeedCard="tabbed-feed-card",e.tabbedInfopaneCard="tabbed-infopane-card",e.topPicksCard="top-picks-card",e.topSitesCard="top-sites-card",e.topStoriesCard="top-stories-card",e.trafficCard="traffic-card",e.travelDestinationCard="travel-destination-card",e.travelDestinationCarouselCard="travel-destination-carousel-card",e.trendingNowCard="trending-now-card",e.trendingSearchCard="trending-search-card",e.trendingTopicsCard="trending-topics-card",e.videoCard="video-card",e.videoShoppingCard="video-shopping-card",e.videoShoppingCarouselCard="video-shopping-carousel-card",e.weatherCard="weather-card",e.webContentCard="web-content-card",e.widgetPlaceholderCard="widget-placeholder-card",e.winAppCard="win-app-card"}(i||(i={}))},9753:function(e,t,n){"use strict";n.d(t,{J:function(){return yt},Q:function(){return St}});var i=n(86294),r=n(44772),o=n(76323);const{TopicFeedCard:a,articleFreCard:s,autosCarouselCard:c,autosMarketplaceCard:d,bingDailyQuizCard:l,bingThisOrThatCard:u,bingVideoCarousel:p,boostAdCard:h,cashbackCarouselCard:g,casualGamesCard:m,casualGamesCarouselCard:f,casualGamesStripeCarouselCard:v,channelCarouselCard:y,channelFilterCard:S,comicsCarouselCard:C,communityCard:b,commuteCard:w,companyNewsCard:T,contentCard:k,contentGroupCard:P,dailyFixGamesCarouselCard:A,denseCard:I,digestCard:E,editorsPickCarouselCard:x,electionCard:M,electionsCard:O,entertainmentPremierCard:L,esportsCard:D,esportsStreamsCard:R,followingFREInlineCard:F,gamingCompeteCard:B,gamingGamerModeUpsellCard:N,gamingInterestGroupCard:U,gamingMatchCard:$,gamingMediaCarouselCard:_,gamingPersonalizationCard:H,gamingRecentlyPlayedCard:W,gamingRecommendedCard:j,gamingRedditCard:G,gamingRewardsCard:V,gamingStreamCard:q,gamingTournamentCard:z,gamingUpcomingCard:Q,groceryCouponSdCard:Z,healthCard:K,healthFitnessCard:J,healthRiverCard:X,healthTipCard:Y,horoscopeAnswerCard:ee,industryNewsCard:te,infopaneCard:ne,interestManagementCard:ie,localNewsCarCard:re,lotteryCard:oe,mangaCard:ae,marketplaceCard:se,microsoftFeedCard:ce,mobileRewardsCard:de,mobileShoppingCard:le,moneyCard:ue,moneyInfoCardWC:pe,moneyTopicStripeCarouselCard:he,nativeAdCard:ge,nativeTopAdCard:me,newsGroupsCard:fe,newsSegmentCarousel:ve,onThisDayCard:ye,partnerUpsellCard:Se,placeholderCard:Ce,pollsCard:be,prayerTimesCard:we,prismCard:Te,prismCarouselCard:ke,profileCarouselCard:Pe,publisherCarouselCard:Ae,publisherListCard:Ie,qnaCard:Ee,quizCard:xe,realEstateCard:Me,recipesCard:Oe,recommendedCardFeed:Le,recommendedInterestsCard:De,recommendedSearchCarousel:Re,recommendedSearchesCard:Fe,rewardsCard:Be,rewardsDailyCheckinCard:Ne,rewardsDailySetCard:Ue,richCalendarCard:$e,sectionHeaderCard:_e,selectCarouselCard:He,serendipityCard:We,shoppingCard:je,shoppingCarouselCard:Ge,shoppingCarouselProngWC:Ve,shoppingEventsDealCard:qe,shoppingFashionCarouselWC:ze,shoppingSdCard:Qe,shoppingVideoCarouselCard:Ze,sportsCard:Ke,sportsOlympicCard:Je,sportsTopicStripeCarouselCard:Xe,sportsWorldCupCard:Ye,spotlightCard:et,superListCard:tt,tabbedFeedCard:nt,tabbedInfopaneCard:it,topPicksCard:rt,topStoriesCard:ot,trafficCard:at,travelDestinationCard:st,travelDestinationCarouselCard:ct,trendingNowCard:dt,trendingSearchCard:lt,trendingTopicsCard:ut,videoShoppingCard:pt,videoShoppingCarouselCard:ht,weatherCard:gt,webContentCard:mt,widgetPlaceholderCard:ft,winAppCard:vt}=i.U,yt={[r.PL.EntertainmentPremierCard]:L,[r.PL.BingThisOrThatCard]:u,[r.PL.BingDailyQuizCard]:l,[r.PL.GamingGamerModeUpsellCard]:N,[r.PL.RewardsDailyCheckinCard]:Ne,[r.PL.EventSDCardElectionMIT1]:M,[r.PL.EventSDCardElectionMIT2]:M,[r.PL.EventSDCardElectionMIT3]:M,[r.PL.RichCalendarCard]:$e,[r.PL.CommunityCard]:b,[r.PL.MobileRewardsCard]:de,[r.PL.TabbedInfopaneCard]:it,[r.PL.MangaCard]:ae,[r.PL.MobileShoppingCard]:le,[r.PL.MobileShoppingCard2]:le,[r.PL.MobileShoppingCard3]:le,[r.PL.MobileShoppingCard4]:le,[r.PL.VideoShoppingCard]:pt,[r.PL.VideoShoppingCarouselCard]:ht,[r.PL.SuperListCard]:tt,[r.PL.RealEstateCard]:Me,[r.PL.PrismCarouselCard]:ke,[r.PL.PrayerTimesCard]:we,[r.PL.TrendingSearchCard]:lt,[r.PL.CommuteCard]:w,[r.PL.DigestCard]:E,[r.PL.Article]:k,[r.PL.Slideshow]:k,[r.PL.Video]:k,[r.PL.Infopane]:ne,[r.PL.PartnerUpsell]:Se,[r.PL.GroupedContent]:P,[r.PL.UserInterestTopic]:P,[r.PL.UserInterestNTPProvider]:P,[r.PL.UserInterestTopicAndProvider]:F,[r.PL.ColdStartArticleFreCard]:s,[r.PL.HalfPane]:null,[r.PL.HeadToHead]:null,[r.PL.Mosaic]:null,[r.PL.Triptych]:null,[r.PL.DenseList]:null,[r.PL.WebContent]:mt,[r.PL.ExternalLink]:null,[r.PL.TabbedInfopane]:null,[r.PL.TabbedInfopaneTab]:null,[r.PL.PlaceholderCard]:Ce,[r.PL.BingHealthCovid19StatsCard]:K,[r.PL.BingHealthFitnessCard]:J,[r.PL.HealthTipCard]:Y,[r.PL.HealthRiverCard]:X,[r.PL.AutosCarousel]:c,[r.PL.AutosEntityList]:d,[r.PL.BingVideoCarousel]:p,[r.PL.CashbackAds]:g,[r.PL.CasualGamesCarousel]:f,[r.PL.CasualGamesStripeCarousel]:v,[r.PL.ChannelCarousel]:y,[r.PL.ChannelFilterCard]:S,[r.PL.TabbedFeedCard]:nt,[r.PL.EsportsMatch]:D,[r.PL.EsportsCasualGames]:m,[r.PL.EsportsLiveStream]:R,[r.PL.GamingClip]:q,[r.PL.GamingClipsCarousel]:_,[r.PL.GamingHighlightClipsCarousel]:_,[r.PL.GamingCompete]:B,[r.PL.GamingHighlight]:q,[r.PL.GamingHighlightsCarousel]:_,[r.PL.GamingInterestGroup]:U,[r.PL.GamingLiveStream]:q,[r.PL.GamingLiveStreamCarousel]:_,[r.PL.GamingMatch]:$,[r.PL.GamingPersonalize]:H,[r.PL.GamingRecentlyPlayed]:W,[r.PL.GamingRecommendedGames]:j,[r.PL.GamingReddit]:G,[r.PL.GamingRewards]:V,[r.PL.GamingTournament]:z,[r.PL.GamingUpcomingGames]:Q,[r.PL.GamingVideoCarousel]:_,[r.PL.GamingVod]:q,[r.PL.GroceryCouponSdCard]:Z,[r.PL.StockQuote]:ue,[r.PL.MoneyInfo]:pe,[r.PL.MoneyTopicStripe]:he,[r.PL.SportsTopicStripe]:Xe,[r.PL.MoneyPreWL]:pe,[r.PL.MoneyCrypto]:pe,[r.PL.MoneyMarketBrief]:pe,[r.PL.MoneyMoreForYouCard]:pe,[r.PL.SportsMatch]:Ke,[r.PL.SportsOlympics]:Je,[r.PL.EventSDCardSportsMIT1]:Ke,[r.PL.EventSDCardSportsMIT2]:Ke,[r.PL.EventSDCardSportsMIT3]:Ke,[r.PL.EventSDCardWorldCup]:Ye,[r.PL.EventSDCardWorldCup2]:Ye,[r.PL.MyBriefRiverCard]:rt,[r.PL.TrafficDelays]:at,[r.PL.TrafficInfo]:at,[r.PL.Transit]:at,[r.PL.WeatherSummary]:gt,[r.PL.ShoppingCard]:Qe,[r.PL.EdgeShoppingCard]:Ge,[r.PL.ShoppingCarousel]:Ge,[r.PL.ShoppingVideoCarousel]:Ze,[r.PL.ShoppingRiver]:Ge,[r.PL.EventSDCardShopping]:qe,[r.PL.ComicsCarousel]:C,[r.PL.SelectCarousel]:He,[r.PL.EditorsPickCarousel]:x,[r.PL.DailyFixGamesCarousel]:A,[r.PL.SageGroupedFeed]:E,[r.PL.TopicFeed]:a,[r.PL.NewsSegmentCarousel]:ve,[r.PL.ShoppingMerchantCategoryDeals]:je,[r.PL.ShoppingProngCardResponse]:Ve,[r.PL.ShoppingProngCarousel]:ze,[r.PL.ShoppingProngTracking]:Ve,[r.PL.SectionHeader]:_e,[r.PL.TrendingInTenMinutes]:dt,[r.PL.TopicFeedTrendingNow]:dt,[r.PL.TopicFeedTopStories]:dt,[r.PL.TrendingTopics]:ut,[r.PL.TopStories]:ot,[r.PL.WorkHeadlines]:ot,[r.PL.Trending]:We,[r.PL.Horoscope]:ee,[r.PL.Elections]:O,[r.PL.RecommendedInterests]:De,[r.PL.RecommendedSearchCarousel]:Re,[r.PL.RecommendedSearchesCard]:Fe,[r.PL.OnThisDay]:ye,[r.PL.Lottery]:oe,[r.PL.Dense]:I,[r.PL.Qna]:Ee,[r.PL.quizcard]:xe,[r.PL.Recipes]:Oe,[r.PL.Inspiration]:Te,[r.PL.InterestManagementCard]:ie,[r.PL.Rewards]:Be,[r.PL.SubscriptionCarousel]:Ae,[r.PL.TravelDestinationCard]:st,[r.PL.TravelDestinationCarouselCard]:ct,[r.PL.LocalNews]:tt,[r.PL.LocalNewsFeed]:re,[r.PL.BeaconProviderUpsell]:Pe,[r.PL.Marketplace]:se,[r.PL.MarketplaceEvent]:se,[r.PL.PollsCard]:be,[r.PL.NewsGroups]:fe,[r.PL.NewsAnswerModule]:fe,[r.PL.TopicFeedWeekends]:E,[r.PL.TopicFeedMomentInTime1]:et,[r.PL.TopicFeedShopping]:et,[r.PL.TopicFeedWeather]:et,[r.PL.WinAppAds]:vt,[r.PL.NativeAd]:ge,[r.PL.CmsAd]:ge,[r.PL.AmplifyAd]:ge,[r.PL.EventSDCardAmplifyAds]:ge,[r.PL.NativeTopAd]:me,[r.PL.BoostAd]:h,[r.PL.Promotion]:g,[r.PL.IndustryNewsCard]:te,[r.PL.MicrosoftFeedCard]:ce,[r.PL.RecommendedCardFeed]:Le,[r.PL.CompanyNewsCard]:T,[r.PL.Calendar]:ft,[r.PL.Entertainment]:ft,[r.PL.Family]:ft,[r.PL.M365]:ft,[r.PL.Photos]:ft,[r.PL.ThirdPartyWidget]:ft,[r.PL.Tips]:ft,[r.PL.ToDo]:ft,[r.PL.XboxGamePass]:ft,[r.PL.Tombstone]:ft,[r.PL.RewardsDailySet]:Ue,[r.PL.UserInterestProvider]:Ie},St=(0,o.p)((()=>{const e=new Ct;for(const[t,n]of Object.entries(yt))e.set(t,n);return e}));class Ct extends Map{set(e,t){return super.set(e.toLowerCase(),t)}get(e){return super.get(e.toLowerCase())}}},14764:function(e,t,n){"use strict";function i(e){return!e.mapRawData}function r(e,t,n){const i=o(t),{columnLayout:r,cardSlot:a}=e,s=a.layouts;return Object.keys(s).forEach((e=>{if(r&&r!==e)i[e].push({mapRawData:()=>n(e)});else{const t=n(e);i[e].push(t)}})),i}n.d(t,{BV:function(){return o},G6:function(){return i},z$:function(){return r}});const o=e=>({defaultLayout:e?[e]:[],C6:[],C5:[],C4:[],C3:[],C2:[],C1:[]})},10920:function(e,t,n){"use strict";n.d(t,{GO:function(){return a},re:function(){return o},uP:function(){return s}});var i=n(86294);const r=[i.U.contentCard,i.U.webContentCard],o=["msft-fifteen-card-five-col-w2","msft-nineteen-card-five-col-w3","msft-nineteen-card-five-col-w4","msft-twenty-card-five-col-w5","msft-twentyone-card-five-col-w6","msft-sixteen-card-five-col-w7","msft-twentyone-card-five-col-w8","msft-seventeen-card-five-col-w9","msft-twentytwo-card-five-col-w10","msft-twentythree-card-five-col-w11","msft-seventeen-card-five-col-w12","msft-eighteen-card-five-col-w13","2c6r-13cards-w6","2c6r-12cards-w5","2c6r-14cards-w4","2c6r-13cards-w1","2c5r-10cards-w9","2c5r-9cards-w8","2c5r-9cards-w7","2c5r-10cards-w2","2c6r-12cards-w12","2c6r-12cards-w11","2c6r-12cards-w10","2c6r-11cards-w3"];function a(e,t,n){return(o.includes(e)||n)&&r.includes(t)?i.U.responsiveCard:(o.includes(e)||n)&&i.U.nativeAdCard===t?i.U.responsiveAdCard:t}function s(e){return r.includes(e)?i.U.responsiveCard:i.U.nativeAdCard===e?i.U.responsiveAdCard:e}},71149:function(e,t,n){"use strict";n.d(t,{oJ:function(){return he},vp:function(){return Q},ro:function(){return ie},e_:function(){return V},CI:function(){return F},LP:function(){return Y},dM:function(){return ge},nA:function(){return X},PM:function(){return ne},UN:function(){return N},Jl:function(){return q},PZ:function(){return W},so:function(){return j},P9:function(){return J},Xe:function(){return $},ny:function(){return U},d0:function(){return K},sA:function(){return z},_g:function(){return B},Tb:function(){return G},AO:function(){return H}});var i=n(74045),r=n(64893),o=n(44772),a=n(6371),s=n(31886),c=n(76859),d=n(25295),l=n(51873),u=n(73543),p=n(5020),h=n(11363),g=n(65135),m=n(38156),f=n(987),v=n(56692),y=n(45506),S=n(26007),C=n(53909),b=n(55849),w=n(92431),T=n(73756),k=n(91483),P=n(60483),A='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" slot="icon"><g filter="url(#filter0_b_30_15226)"><circle cx="12" cy="12" r="11" fill="url(#paint0_linear_30_15226)"/><circle cx="12" cy="12" r="11.5" stroke="url(#paint1_linear_30_15226)"/></g><path d="M10.5 8a1 1 0 0 0-1.5.86v6.28a1 1 0 0 0 1.5.87l5.49-3.14a1 1 0 0 0 0-1.74L10.49 8Z" fill="#fff"/><defs><linearGradient id="paint0_linear_30_15226" x1="1" y1="1" x2="23" y2="23" gradientUnits="userSpaceOnUse"><stop stop-opacity=".5"/><stop offset="1" stop-opacity=".7"/></linearGradient><linearGradient id="paint1_linear_30_15226" x1="12" y1="1" x2="12" y2="23" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" stop-opacity=".4"/><stop offset="1" stop-color="#fff" stop-opacity=".2"/></linearGradient><filter id="filter0_b_30_15226" x="-10" y="-10" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feGaussianBlur in="BackgroundImage" stdDeviation="5"/><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_30_15226"/><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_30_15226" result="shape"/></filter></defs></svg>',I=n(52965),E=n(84486),x=n(62512),M=n(12884),O=n(26680),L=n(14764),D=n(63598),R=n(21263);function F(e){var t,n,r;const{feedName:a,additionalHeaders:l,cardActionBitMask:S,cardActionClickHandler:k,cardMetadata:x,cardSlot:M,configOptions:O={},enableRichSocialReaction:F,getReplacementCardsCallback:N,reactionCallback:_,shareActionHandler:j,initCardAction:ee,isAnaheimDesign:te,isBlurred:ae,isHubDesign:ce,immersiveCard:le,isNarrowTitleFooterGap:pe,isProviderInFooter:me,isPublisherPage:fe,hideCardCallback:ve,layoutGap:ye,localizedStrings:Se,mouseenterHandler:Ce,mouseleaveHandler:be,openLinksInNewTab:we,parentTelemetryObject:Te,refreshFeedCallback:ke,sdCardActionClickHandler:Pe,stockImageData:Ae,userSubscriptionData:Ie,visualReadinessCallback:Ee,displaySettings:xe,mobileCardClickCallback:Me,setShouldScrollToComments:Oe,actionMenuLocalizedStrings:Le,cardActionMenuClickCallback:De,cardAIDigestMenuClickCallback:Re,isDarkModeForMobile:Fe,isEdge:Be,isLauncher:Ne,isThirdParty:Ue,feedbackHandler:$e,shareHandler:_e,hideComments:He=!1,summaryArticleClickHandler:We,notificationMetadata:je}=e,Ge=$(x),{cardContent:Ve,metadata:qe,isFirstSectionCard:ze,type:Qe}=Ge,{grid_area:Ze,layouts:Ke}=M,{abstract:Je,colorSamples:Xe,id:Ye,destinationUrl:et,locale:tt,title:nt,publishedDateTime:it,provider:rt,badges:ot,defaultAnchorTarget:at,videoFiles:st,isWorkNewsContent:ct,aiComments:dt,source:lt}=Ve,ut=(0,b.Ae)(Ge),pt=W(x,S),ht=J(Se,O),gt=Qe===o.PL.WebContent,mt=gt&&Boolean(qe&&qe.videoMetadata),{alignFooters:ft,availableActions:vt,breakingNewsTagVersion:yt,childExperienceReferences:St={},childExperienceReferencesWC:Ct={},disableCardTitleTooltip:bt,disableHideOnHover:wt,disableSeeMoreButton:Tt,enableAnimatedShowMoreBtn:kt,enableArticleCardHoverContrast:Pt,enableArticleTimestamps:At,enable2CFlexCard:It,enabledBadgeTypes:Et,enabledReasonBadgeTypes:xt,enableEverGreenWebContent:Mt=!1,enableFeedSuperCards:Ot,enableFilledIconOnHover:Lt,enableFlexCard:Dt,enableCardHideStoryIcon:Rt,enableWhyAmISeeIcon:Ft,enableHideStoryFeedback:Bt,enableImageHoverZoom:Nt,enableInfopaneLike2cCard:Ut,enableLinearFeed2cVerticalGradientCard:$t,enableNeutralFilledShowMoreIcon:_t,enableNewTimestampFormatForJAJP:Ht,enableSaveButton:Wt,enableSuperVideoCard:jt,enableTitleClickableOnly:Gt,enableTopQuestions:Vt,enableTopQuestionsEdgeCopilot:qt,enableHighlight:zt,enableEdgeCopilotSummarize:Qt,showSpecificTqBadgeText:Zt,showSpecificTqTitleText:Kt,enableVerticalGradientCard:Jt,enableVideo2uVerticalGradient:Xt=!1,enableWCCardAction:Yt,enableWCSaveButton:en,enableWebContentSocialReactions:tn,feedFontSize:nn,fixedCardHeight:rn,flexCardExpandedByDefault:on,gradientType:an,headingLineHeight:sn,hideNewsAbstract:cn,isDynamicFeed:dn,isImage32:ln,isImage43:un,isMsnHpExternalLinkCard:pn,isProviderIconClickable:hn,enablePanocard:gn,panocardType:mn,largeFeedFontSize:fn,miniMediaIndicatorsIcons:vn,noBackPlateOnRest:yn,noImageFeedFontSize:Sn,openArticleInNewTab:Cn,openPersonalizeWithoutRouter:bn,preconsumptionCardConfig:wn,previewModeEnableLayouts:Tn,shouldOpenArticlesInOverlay:kn,showCardInfoWhenHover:Pn=!1,showColorfulHalfUContentCard:An,showRelatedStoriesOnHover:In=!1,telemetryConstants:En={},twoColumnFeedFontSize:xn,twoColumnHeadingLineHeight:Mn,useArticleCardTemplate:On,useGamingMediaTemplateInRiver:Ln,useHighQualityImage:Dn,useLowQualityImage:Rn,useHomepageTelemetry:Fn=!1,useInfopaneSlideTemplate:Bn=!1,useLargeFontSize:Nn,useMobile:Un,usePerspectiveCardTemplate:$n=!1,usePreviewCardTemplate:_n=!1,useSmallFontSize:Hn,useWinSystemMode:Wn,useTitleFontSize:jn,useVideoPreviewTemplate:Gn=!1,isMsnMobile:Vn,disableCardActionMenu:qn,disableColorSampling:zn,enableFeedSuperCardsSolidColor:Qn,enableFeedSuperCardsSingleColor:Zn,enableSuperVideoCardImmersive:Kn,disableSaveButton:Jn,useArrowIcons:Xn,useLightShadow:Yn,lightShadowVal:ei,doubleWideArticleCardTitleSize:ti,enableHover:ni,addExtToNewsContainer:ii,enableDynamicHeightCard:ri,enableLazyImage:oi,enableLargeImgDualtoneCard:ai,enableMediumImgQuality:si,enableNetworkImgQuality:ci,enableNoArticleTimestamp:di,enableLightDensefeedMobile:li,enableSimpleArticleTimestamp:ui,enable1UImmersiveArticleCards:pi,enableDenseCarouselCard:hi,enableRenderFirst2Subcards:gi,enableSplitScreen:mi,enableBreakingNewsSpotlight:fi,enableHalfUCardForAll:vi,enableSydneySummary:yi,enableAttrOversizing:Si,useFullQualityImage:Ci,enableLargerSizeSocialBar:bi,enableSmallerMarginBottom:wi,enableSmallerContentPadding:Ti,enableSydneyFeaturesMenu:ki}=O,Pi=(0,s.nj)(Te,Ve,qe||Ge,void 0,gt,Object.assign(Object.assign({},s.MW),En),Dt),Ai=Ct.socialBarWC||St.socialBarWC,Ii=Ct.publisherFollowButton||St.publisherFollowButton,Ei=Ct.overlayWC,xi=Ct.videoCardWC||St.videoCard,Mi=Ct.gamingStreamCard,Oi=Ct.articleTopComment,Li=Ct.articleRelatedStories;G(pt,Pi);const Di=!Ne&&!Ue&&(0!=(pt&i.O7.hide)||Bt&&(0!=(pt&i.O7.showFewer)||0!=(pt&i.O7.hidden)));let Ri;On&&(Ri=Q(null==ut?void 0:ut.colorSamples,Xe,null==ut?void 0:ut.url));const Fi=ge(Ge,Se,gn,mn),Bi=mt||Qe===o.PL.Video,Ni=Bi&&Gn,Ui=qe?!qe.reactionSummary:x&&!x.reactionSummary,$i=!Tn||Tn.includes(c.Nv._1x_2y),_i=!Tn||Tn.includes(c.Nv._2x_2y),Hi=gt&&x&&x.subType===o.PL.GamingVideo;let Wi=ot;const ji="true"===(0,f.$o)().getItem("enableUndersideAutoOpenFromEdge"),Gi="disabled"===String(null==qe?void 0:qe.commentStatus).toLowerCase();let Vi=!1;if(!Gi&&Vt&&(!qt||ji)){const e=he(qe,null==Pi?void 0:Pi.contentCard);Vi=Array.isArray(e)&&e.length>0,Vi&&(qe.topQuestions=e,Wi=[{type:"topQuestions"}])}let qi=!1;Gi||!zt||Qt&&!ji||Vi||(qi=Array.isArray(qe.highlights)&&qe.highlights.length>0,qi&&(Wi=[{type:"highlights"}]));const zi="following"===a||null===(t=null==Ge?void 0:Ge.metadata)||void 0===t?void 0:t.reasons,{badge:Qi,reasonBadge:Zi}=ie(Se,Wi,Et,zi,xt,Zt,Fi),Ki=ne(Se,Kt);let Ji=et;mt&&(Ji=(0,R.sn)(encodeURIComponent(Ye),Ji)),"winWidgets"!==v.jG.AppType&&"windowsNewsPlus"!==v.jG.AppType||(Ji=(0,s.Z1)(Ji)),(null==Ve?void 0:Ve.isPanoCard)&&1==(null==Fi?void 0:Fi.type)&&(Fi.articleDestinationUrl=Ji,Ji=Fi.destinationUrl);let Xi,Yi,er=!1,tr=!1,nr="";qe&&qe.relatedCards&&qe.relatedCards.length>=3&&(tr=!0,Xi=function(e,t,n,i,r,a,c,d,l={},u,p,h){if(!e)return[];return e.map((e=>{const{locale:g,provider:m,publishedDateTime:f,title:v,url:y,id:S,abstract:C,type:w,category:T,relatedContentSource:k}=e;if(!v||!m)return{id:S,relatedContentSource:k,gridArea:null,childTemplateType:null};let P;if(a){const t=(0,s.nj)(a,e,null);t&&(P={contentCard:t.contentCard,contentCardTelemetryObject:t.contentCard,button:t.seeMore&&t.seeMore.getMetadataTag(),destination:t.destination,buttonTelemetryObject:t.seeMore,seeMore:t.seeMore})}const A=W(e,n),{cardActionsTooltips:I,crawledContentLabel:E}=t,x=w===o.PL.WebContent,M=y||(0,D.ph)(e,g,T.product,T.label),{enableArticleTimestamps:O,enableNewTimestampFormatForJAJP:L,openPersonalizeWithoutRouter:R,openArticleInNewTab:F,isProviderIconClickable:B,useArrowIcons:N,enableFilledIconOnHover:U,disableCardTitleTooltip:$,disableColorSampling:_,enableFeedSuperCardsSolidColor:j,enableLazyImage:G,enableSplitScreen:z}=l;return{id:S,abstract:C,gridArea:null,childTemplateType:null,cardActionStatus:!x&&A,cardActionClickHandler:i,cardActionsTooltips:I,crawledContentLabel:E,isWebContent:x,destinationUrl:V(M),enableRichSocialReaction:!x&&c,isProviderIconClickable:B,useArrowIcons:N,locale:g,title:v,providerData:(0,b.i2)(m,x,l.svgLogoCards&&l.publisherSVGLogosHeight),publishedDateTime:O&&`${X(L,new Date(f),g,t)}`,toggleCardActionMenu:(e,t,n)=>H(e,t,i,r,!0,!0,u,R,null,n),telemetryContext:P,openLinksInNewTab:d,openArticleInNewTab:F,ariaLabel:q(v,m,t),actionsArrayOverride:p,socialBarWCConfigInfo:h,metadata:e,enableFilledIconOnHover:U,relatedContentSource:k,disableCardTitleTooltip:$,disableColorSampling:_,enableFeedSuperCardsSolidColor:j,enableLazyImage:G,enableSplitScreen:z}}))}(qe.relatedCards,Se,S,k,ee,Pi&&Pi.relatedStories,F,we,O,ke,void 0,Ai),er=$n,nr=Xi[0].relatedContentSource),de()&&!se().includes("pspux:")&&g.M0.addOrUpdateTmplProperty("pspux","0"),qe&&qe.topComments&&qe.topComments.length>0&&(Yi=null===(n=qe.topComments[0])||void 0===n?void 0:n.id);let ir=null;if(At){const{disable1MonPlusTimestamp:e}=w.k.getConfig()||{},t=(0,h.ch)(it);e&&t||(ir=(0,w.O)(it,tt,void 0,Ht,ui))}const rr=["microphone_3d.png","loudspeaker_3d.png","backhand_index_pointing_right_3d_default.png","eyes_3d.png","face_in_clouds_3d.png","face_without_mouth_3d.png","face_with_monocle_3d.png","left_speech_bubble_3d.png"];ir=gt&&Mt&&(0,b.Xh)(it)?null:ir;const or=""!==y.Al.MarketDir?y.Al.MarketDir:"ltr",ar=!!(O.enableAiComment&&(null==dt?void 0:dt.length)>0),sr=Un&&!Vn&&!Be&&!Ne&&!Ue,cr=Di?(0,u.to)(e,pt,Ye,Te):{id:Ye,isWorkNewsContent:ct,showAicomment:ar,aiComments:dt,aiCommentIconUrl:function(){let e="";const t=Math.floor(Math.random()*rr.length)||1;return e=rr[t],e||(e=rr[1]),e="https://www.msn.cn/staticsb/statics/latest/views/aicomment/"+e,e}(),gridArea:Ze,telemetryContext:Pi,defaultAnchorTarget:at,childTemplateType:ue(O,gt&&!mt,Hi,!!je),abstract:Je,cardActionStatus:(!gt||Yt||en)&&pt,cardActionClickHandler:k,cardActionsTooltips:ht,colorSamples:Z(Xe,null==ut?void 0:ut.url),externalVideoFiles:Bi?st:void 0,destinationUrl:Ji,dir:or,title:nt,contentType:Qe,immersiveCard:le,hideCardCallback:ve,sdCardActionClickHandler:Pe,imagePriority:!1,isWebContent:gt,isFirstSectionCard:ze,contentTypeLabel:null===(r=z(Se,Qe))||void 0===r?void 0:r.toLocaleUpperCase(),contentIndicator:ut||Bi?K(Qe,te&&vn,Ye):void 0,metadata:qe||x,openLinksInNewTab:we&&!Ue,openArticleInNewTab:Cn,crawledContentLabel:null==Se?void 0:Se.crawledContentLabel,setDisplacementHandler:re,removeDisplacementHandler:oe,providerData:(0,b.i2)(rt,gt,O.svgLogoCards&&O.publisherSVGLogosHeight),handleContentCardClickOverride:e=>B(kn,Ji,e),toggleCardActionMenu:(e,t,n)=>H(e,t,k,ee,null,!Bt,ke,bn,Ui,n),disableSeeMoreButton:Tt,enableAnimatedShowMoreBtn:kt,enableRichSocialReaction:(!gt||tn||Yt||en)&&F,isProviderIconClickable:hn,optedOutOfReactions:Ui,isAnaheimDesign:!!te,isHubDesign:!!ce,userSubscriptionData:Ie,isPublisherPage:fe,usePreviewCardTemplate:_n,useVideoPreviewTemplate:Gn,enableVideo2uVerticalGradient:Xt,enableHover:ni,showCardInfoWhenHover:Pn,useInfopaneSlideTemplate:Bn,useHomepageTelemetry:Fn,locale:tt,articleCardBackgroundColor:Ri,shouldOpenInOverlay:kn,disableHideOnHover:wt,publishedDateTime:ir,useSmallFontSize:Hn,useLargeFontSize:Nn,feedFontSize:nn,noImageFeedFontSize:Sn,largeFeedFontSize:fn,twoColumnFeedFontSize:xn,twoColumnHeadingLineHeight:Mn,enableVerticalGradientCard:Jt,gradientType:an,gradientDeg:te||un?Y():void 0,ariaLabel:q(nt,rt,Se,Qe),isProviderInFooter:me,isNarrowTitleFooterGap:pe,mouseenterHandler:Ce,mouseleaveHandler:be,layoutGap:ye,socialBarWCConfigInfo:Ai,publisherFollowButtonConfigInfo:Ii&&Object.assign(Object.assign({},Ii),{instanceId:`${Ii.instanceId}-${Ye}`}),overlayConfigInfo:Ei,fixedCardHeight:rn,preconsumptionCardConfig:wn,enableImageHoverZoom:Nt,enableTitleClickableOnly:Gt,noBackPlateOnRest:yn,alignFooters:ft,showColorfulHalfUContentCard:An,isImage32:ln,isImage43:un,headingLineHeight:sn,useTitleFontSize:jn,enable2CFlexCard:It,enableFilledIconOnHover:Lt,enableNeutralFilledShowMoreIcon:_t,enableInfopaneLike2cCard:Ut,enableLinearFeed2cVerticalGradientCard:$t,enableArticleCardHoverContrast:Pt,enableTopQuestions:Vi,enableHighlight:qi,topQuestionsHeading:Se&&Se.topQuestionsHeading,topQuestionsNote:Se&&Se.topQuestionsNote,topQuestionsBadgeTooltips:Se&&Se.topQuestionsBadgeTooltips,highlightsHeading:Se&&Se.highlightsBadgeLabel,highlightsNote:Se&&Se.highlightsNote,highlightsBadgeTooltips:Se&&Se.highlightsBadgeTooltips,isDynamicFeed:dn,hideNewsAbstract:cn,flexCardExpandedByDefault:on,disableCardTitleTooltip:bt,videoCardConfigInfo:xi,gamingStreamCardConfigInfo:Mi,enableSaveButton:!1!==Wt||gt&&en,showMoreAnimationTitle:Se&&Se.showMoreAnimationTitle,isBlurred:ae,useArrowIcons:Xn,relatedStoriesHeadingLabel:Se&&("cf"===nr?Se.relatedStoriesCfHeading:Se.relatedStoriesHeading),showRelatedStoriesOnHover:In,enabledBadgeTypes:Et,enabledReasonBadgeTypes:xt,subCardDataMappers:er||Dt?{mapAriaLabel:(e,t)=>q(e,t,Se),mapCardActionStatus:e=>W(e,S),mapPublishedDateTime:e=>At&&`${X(Ht,e,tt,Se)}`}:void 0,badge:Qi,reasonBadge:Zi,topQuestionsTitleText:Ki,articleTopCommentConfigInfo:Oi,articleTopCommentId:Yi,articleRelatedStoriesConfigInfo:Li,relatedCardData:Xi&&Xi,enableWCSaveButton:!gt||en,enableWCCardAction:Vn?Yt:!gt||Yt,additionalHeaders:l,actionsArrayOverride:gt&&vt||void 0,visualReadinessCallback:Ee,displaySettings:xe,actionMenuLocalizedStrings:Le,useMobile:Un,useWinSystemMode:Wn,isMsnMobile:Vn,disableCardActionMenu:qn||Ue,refreshFeedCallback:ke,disableColorSampling:zn,enableFeedSuperCardsSolidColor:Qn,enableFeedSuperCardsSingleColor:Zn,disableSaveButton:!gt&&Jn,useLightShadow:Yn,lightShadowVal:ei,doubleWideArticleCardTitleSize:ti,getReplacementCardsCallback:N,reactionCallback:_,shareActionHandler:j,enableLazyImage:oi,enableDynamicHeightCard:ri,mobileCardClickCallback:Me,setShouldScrollToComments:Oe,cardActionMenuClickCallback:De,cardAIDigestMenuClickCallback:Re,isDarkModeForMobile:Fe,isLauncher:Ne,isThirdParty:Ue,feedbackHandler:$e,shareHandler:_e,hideComments:He,enableLargeImgDualtoneCard:ai,enableMediumImgQuality:si,enableNoArticleTimestamp:di,enableSimpleArticleTimestamp:ui,isSpotlightUX:qe&&qe.isSpotlightUX,spotlightBreakingNewsTagString:(()=>{if(!Se)return;let e=Se.topStoriesBreakingNewsTagString;switch(yt){case 1:e=Se.topStoriesBreakingNewsTagString;break;case 2:e=Se.topStoriesBreakingNewsTagStr2;break;case 3:e=Se.topStoriesBreakingNewsTagStr3;break;case 4:e=Se.topStoriesBreakingNewsTagStr4}return e})(),breakingNewsTagVersion:null==O?void 0:O.breakingNewsTagVersion,enableLightDensefeedMobile:li,wpoMetadata:qe&&qe.wpoMetadata||x&&x.wpoMetadata,enableDenseCarouselCard:hi,enableRenderFirst2Subcards:gi,enableSplitScreen:mi,enableCardHideStoryIcon:Rt,enableWhyAmISeeIcon:Ft,enableBreakingNewsSpotlight:fi,enableHalfUCardForAll:vi,enableSydneySummary:sr&&yi,summaryLabel:Se&&Se.summary,aiMagicBadgeLabel:Se&&Se.aiMagicBadgeLabel,summaryArticleClickHandler:We,enableAttrOversizing:Si,enableLargerSizeSocialBar:bi,enableSmallerMarginBottom:wi,enableSmallerContentPadding:Ti,panoCaption:Fi,isPanoCard:Fi&&Ve.isPanoCard,clickPanocardFooterHandler:(e,t)=>(0,b.ji)(e,t),clickPanocardArticleHandler:(e,t)=>(0,b.lP)(e,t),cardTitle:null==je?void 0:je.spotlightCardTitle,enableSydneyFeaturesMenu:sr&&ki,enableSydneyBadge:yi||"top-right"===ki};E.H.setContentIdCandidateIfNeeded(Ye,Qe,Ui||!Xn);const dr=O&&O;let lr=!1;const ur=x&&x.ri||qe&&qe.ri,pr=x&&x.recoId||qe&&qe.recoId;return(0,L.z$)(e,cr,(t=>{var n;const i=Ke[t],r=(0,T.XX)({id:Ye,columnArrangement:t,experienceType:null===(n=null==dr?void 0:dr.configRef)||void 0===n?void 0:n.experienceType,mapperArgs:e,badgeType:Qi&&Qi.type,recoId:pr,ri:ur,contentId:Ye}),o=r.telemetryExt;if(Di){const e=(0,p.df)(cr&&cr.telemetryContext,o);return Object.assign(Object.assign({},r),{gridArea:Ze,telemetryContext:e})}const a=Object.assign({},Pi);let s;a&&a.contentCard&&((ni||Un&&!Vn||ii)&&(a.contentCard=new P.D(Object.assign(Object.assign({},a.contentCard.contract),{ext:o}))),a.destination&&(a.destination=a.contentCard.addOrUpdateChild(Object.assign(Object.assign({},a.destination.contract),{type:m.c9.Headline,ext:o})))),Xi&&a&&a.relatedStories&&(s=Xi.map((e=>Object.assign(Object.assign({},e),{telemetryContext:Object.assign(Object.assign({},a),{relatedStories:Object.assign(Object.assign({},a.relatedStories),{ext:o})})})))),Fn&&(a.contentCard=null,a.destination.contract.name="HeadlineItemViewModel");const l=Object.assign(Object.assign({},r),{gridArea:Ze,isProviderInFooter:me,isNarrowTitleFooterGap:pe,telemetryContext:a});if(i===c.Nv._1x_1y&&(Bn?(ut&&(l.imageData=U(Ge,d.B._300x225,Ee,te,Un,Dn,si,ci,Rn,!1,li,Ci)),l.abstract=void 0,l.childTemplateType="infopane-slide-card"):_n?(ut&&(l.imageData=U(Ge,d.B._104x84,Ee,te,Un,Dn,si,ci,Rn,!1,li,Ci)),l.abstract=void 0,l.childTemplateType="content-card-preview-1x"):(ut&&(l.imageData=U(Ge,d.B._82x82,Ee,te,Un,Dn,si,ci,Rn,ae,li,Ci)),Bi&&(l.contentIndicator=A,O.disableVideoCard1x1yTemplate||(l.childTemplateType="video-card")),l.abstract=gt&&!O.hideHalfUAbstract?Je:void 0,l.ariaLabel=gt&&!O.hideHalfUAbstract&&q(nt,rt,Se))),i===c.Nv._1x_2y)if(Bn)ut&&(l.imageData=U(Ge,d.B._300x225,Ee,te,Un,Dn,si,ci,Rn,!1,!1,Ci)),l.abstract=void 0,l.childTemplateType="infopane-slide-card";else if(ut)if(Ni&&$i){l.abstract=void 0,l.articleCardBackgroundColor=Q(null==ut?void 0:ut.colorSamples,Xe,!1),l.childTemplateType="video-card";let e=d.B._300x225;Ot&&xe?e={width:xe.cardWidth,height:xe.imageHeight}:Ot&&jt&&Kn&&!xe?e=d.B._300x304:Ot&&jt&&!xe&&(e=d.B._300x156),l.imageData=U(Ge,e,Ee,te,Un&&!Ne&&!Vn,!1,!1,!1,!1,!1,!1,Ci)}else if(On){let e=d.B._300x225;if(ln)e=d.B._300x200;else if(Ot&&pi)e=d.B._300x304;else if(Ve.isPanoCard)e=d.B._300x304;else if(Ot&&!xe)e=d.B._300x156;else if(Ot&&xe){const t=xe.cardWidth;let n=Math.round(xe.cardWidth/1.33);Un&&(n=le?xe.cardHeight:xe.imageHeight),e={width:t,height:n}}ut.width>=e.width&&ut.height>=e.height?(l.abstract=void 0,l.imageData=U(Ge,e,Ee,te,Un,Dn,si,ci,Rn,ae,!1,Ci)):l.articleCardBackgroundColor=Q(null==ut?void 0:ut.colorSamples,Xe,!1),In&&(tr&&de()&&se().includes("pspux:0")&&g.M0.addOrUpdateTmplProperty("pspux","1"),er&&(l.relatedCardData=s,l.childTemplateType="perspective-card"))}else if(_n){const e=d.B._306x197;l.imageData=U(Ge,e,Ee,te),l.abstract=void 0,l.childTemplateType="content-card",l.imagePriority=!0}else{l.childTemplateType="content-card";let e=d.B._300x156;ln&&(e=d.B._300x200),ut.width>=e.width&&ut.height>=e.height?(l.abstract=void 0,l.imagePriority=!0,l.imageData=U(Ge,e,Ee,te,Un,Dn,si,ci,Rn,!1,!1,Ci)):l.imageData=null}if(i===c.Nv._1x_3y&&_n){if(ut){let e=d.B._300x174;ln&&(e=d.B._306x197),l.imageData=U(Ge,e,Ee,te,Un,Dn,si,ci,Rn,!1,!1,Ci),pn?l.isMsnHpExternalLinkCard=pn:l.abstract=void 0,l.imagePriority=!0}else l.isProviderInFooter=!1;l.childTemplateType="content-card"}if(i===c.Nv._2x_2y){let e=d.B._82x82,t=ue(O,gt,Hi,Ge.isFeatured),n=Ge;ut&&(Ni&&_i?(e=d.B._612x304,Tn&&Tn.includes(c.Nv._2x_2y)&&(e=d.B._468x304),l.articleCardBackgroundColor=Q(null==ut?void 0:ut.colorSamples,Xe,!1),t="video-card",l.abstract=void 0):On?It?(e=d.B._362x272,l.abstract=Je):$t?(e=d.B._612x304,l.abstract=void 0):te&&(Jt||un)?Jt?ut.width>=d.B._612x304.width&&ut.height>=d.B._612x304.height&&(e=d.B._612x304,l.abstract=void 0):un&&(e=d.B._406x304):un?e=d.B._406x304:ut.width>=d.B._468x304.width&&ut.height>=d.B._468x304.height&&(e=d.B._468x304):ut.width>=d.B._612x304.width&&ut.height>=d.B._612x304.height&&(e=d.B._612x304,t="infopane-slide-card",l.abstract=void 0));const i=!(ut&&ut.url)||e===d.B._82x82;if(i&&!On&&Ae){let i;e=d.B._612x304,t="infopane-slide-card",n=(0,I.Z)(Ge),i=(null==O?void 0:O.useImgGenerator)?[{url:(0,C.zz)(Ae.id,{width:0,height:0,enableDpiScaling:!1}),width:Ae.width,height:Ae.height}]:[Ae],n.cardContent.images=i,l.abstract=void 0}i&&On&&(n=(0,I.Z)(Ge),n.cardContent.images=void 0,l.articleCardBackgroundColor=Q(null==ut?void 0:ut.colorSamples,Xe,!1)),tr&&de()&&se().includes("pspux:0")&&g.M0.addOrUpdateTmplProperty("pspux","1"),er&&(l.relatedCardData=s,t="perspective-card"),(Yi||(null==Xi?void 0:Xi.length)>0)&&(lr||(g.M0.addOrUpdateTmplProperty("LinearFeedFlexCardViewed","1"),lr=!0),Dt&&(t="flex-article-card")),l.childTemplateType=t,l.imageData=U(n,e,Ee,te,Un,Dn,si,ci,Rn,ae,!1,Ci),l.imagePriority=!1}if(i===c.Nv._2x_1y){if(ut){const e=d.B._216x114;l.imageData=U(Ge,e,Ee,te,Un,Dn,si,ci,Rn),l.abstract=void 0}zn?(l.articleCardBackgroundColor=void 0,l.colorSamples=void 0):l.articleCardBackgroundColor=Q(null==ut?void 0:ut.colorSamples,Xe,null==ut?void 0:ut.url)}return Hi&&Ln&&(l.childTemplateType="gaming-stream-card"),l}))}function B(e,t,n){const i=e&&(0,O.jI)(t);if(window.dispatchEvent(new CustomEvent("article-link-invoked",{bubbles:!1,cancelable:!0,composed:!i,detail:{destinationUrl:t,shouldOpenOverlay:i}})),!i)return!0;n.preventDefault()}function N(e){return e&&e.images&&e.images.length&&e.images[0]&&e.images[0].url?e.images[0]:null}function U(e,t,n,i,r,o,a,s,c,d,l,u){const p=(0,b.Ae)(e);if(!p)return null;const{attribution:h,title:g=e.cardContent.title,url:m,focalRegion:f}=p||{};if(!m)return null;const v="BuyDirectCard"==e.id,y=[];let w,T;g&&y.push(g),h&&y.push(h),y.length&&(w=y.join(" - ")),T=l?30:c?20:r?function(e,t,n){const i=window&&window.navigator,r=null==i?void 0:i.connection,o=null==r?void 0:r.effectiveType;if(t&&o){return{"slow-2g":20,"2g":40,"3g":60,"4g":80}[o]}if(le())return 60;if(e||function(){const e=window.location.href,t=S.c.getQueryParameterByName("edge",e);return null!==t}()||function(){const e=window.location.href,t=S.c.getQueryParameterByName("launcher",e);return null!==t}()||pe())return 70;if(n)return 100;return 90}(a,s,u):i&&le()?60:90;const k=(0,C.mL)(m,{width:t.width,height:t.height,focalRegion:f,enableDpiScaling:i&&!v,quality:T,devicePixelRatio:r&&!l?1:(0,M.x_)(),crop:v?5:null});let P;return d&&(P=(0,C.mL)(m,{width:t.width,height:t.height,focalRegion:f,enableDpiScaling:!1,quality:1})),{imageWidth:t.width.toString(),imageHeight:t.height.toString(),source:k,blurredSource:P,altText:w,visualReadinessCallback:n}}function $(e){if(e&&e.cardContent){const t=e.cardContent.destinationUrl;return e.type===o.PL.EventInfopaneShoppingAI&&(e.cardContent.isShoppingArticleCard=!0),t&&(e.cardContent.destinationUrl=V(t)),e}const t=e;let n;n=t.type===o.PL.Slideshow?"SlideshowPreview":t.type===o.PL.Video?"VideoPreview":t.type===o.PL.WebContent?"WebContentPreview":"ArticlePreview",t.cardContent={id:t.id,destinationUrl:V(t.url),type:n,title:t.title,aiComments:t.aiComments,abstract:t.abstract,provider:t.provider,locale:t.locale,images:t.images,publishedDateTime:t.publishedDateTime,colorSamples:t.colorSamples,badges:t.badges,topics:t.topics,videoFiles:t.externalVideoFiles||{},isLocalContent:t.isLocalContent};const i=t.type;return t.metadata||i===o.PL.AmplifyAd||i===o.PL.NativeAd||i===o.PL.CmsAd||(t.metadata=function(e){var t,n,i,r,a,s,c,d;if(e&&e.metadata)return e.metadata;const l=e;if(!l)return null;const u=l.type===o.PL.EventInfopaneShoppingAI?/[/?]/:"/",p=null===(n=null===(t=l.cardContent)||void 0===t?void 0:t.destinationUrl)||void 0===n?void 0:n.split(u);return{abstract:l.abstract,abstractLength:null===(i=l.abstract)||void 0===i?void 0:i.length,titleLength:null===(r=l.title)||void 0===r?void 0:r.length,category:l.category||(null==p?void 0:p.length)>=5&&p[4],subCategory:(null==p?void 0:p.length)>=6&&p[5],primaryImage:{height:l.images&&(null===(a=l.images[0])||void 0===a?void 0:a.height),width:l.images&&(null===(s=l.images[0])||void 0===s?void 0:s.width)},locale:l.locale,feed:{id:null===(c=l.feed)||void 0===c?void 0:c.id},kicker:[l.feed],actions:null===(d=l.actions)||void 0===d?void 0:d.map((e=>_[e]||e)),reactionStatus:l.reactionStatus,commentStatus:l.commentStatus,reactionSummary:l.reactionSummary,commentSummary:l.commentSummary,topComments:l.topComments,reasons:l.reasons,ref:l.ref,relatedCards:l.relatedCards,topics:l.topics,topQuestions:l.topQuestions,highlights:l.highlights,debugId:l.debugId,isFirstSectionCard:l.isFirstSectionCard,videoMetadata:l.videoMetadata}}(t)),t}const _={liked:"like",unliked:"unlike",saved:"save",followedPublisher:"followedPublisher"};function H(e,t,n,r,o=!1,a=!1,s,c,d,l){let u=t,p=e;t.detail&&t.detail.event&&t.detail.data&&(u=t.detail.event,p=this.getListCardMetadata(t.detail.data),o=!0),(p.isLauncher||p.isThirdParty)&&p.useMobile&&(u.preventDefault(),u.stopPropagation());const{cardSize:h,id:g,title:m,destinationUrl:f,imageData:v,providerData:y,cardActionStatus:S,telemetryContext:{seeMore:C},actionsArrayOverride:b,metadata:w,isLauncher:T,isThirdParty:k,shareHandler:P,feedbackHandler:A,panoCaption:I,isShoppingArticleCard:E}=p,x={cardSize:h,enabled:!0,buttonElement:u.currentTarget,article:{id:g,headlineTitle:m,href:f,image:{alt:v&&v.altText,src:v&&v.source},provider:{id:y.id,profileId:y.profileId,name:y.name,image:{alt:y.name,src:y.logoImage}},abstract:w.abstract,reasons:w.reasons},parentTelemetryObject:C,onStatusChange:n,cardStatus:S,updateFeedOnHide:o,showToast:a,refreshFeedCallback:s,openPersonalizeWithoutRouter:c,actionsArrayOverride:b,isReactionsOptedOut:d,isLauncher:T,isThirdParty:k,shareHandler:P,feedbackHandler:A,debugId:w.debugId,dialogToOpen:l};(I||E)&&(x.actionsArrayOverride=[i.Us.ManageInterests,i.Us.Divider,i.Us.Report]),r(x)}function W(e,t){if(e&&e.placement&&(e.placement.region&&["rightRail","rightrail"].includes(e.placement.region)||e.placement.isAdFeedbackEnabled)&&(t|=i.O7.enabled),!(t&&t&i.O7.enabled))return i.O7.none;let{actions:n=[]}=e.metadata||e;const r=e.cardContent?e.cardContent.badges:e.badges,o=e.metadata?e.metadata.reasons:e.reasons;(r&&r.some((e=>"followedPublisher"===e.type))||o&&o.some((e=>"followPublisher"===e.type)))&&(n=[...n||[],_.followedPublisher]);let a=i.O7.enabled;return n.forEach((e=>{"save"===e&&(e="saved"),"liked"!==e&&"like"!==e||(e="showMore");const n=i.O7[e];n&t&&(a|=n)})),a}function j(e){const t=[];return Object.keys(i.O7).forEach((n=>{i.O7[n]&e&&t.push(n)})),t}function G(e,t){t&&t.contentCard&&0!=(e&i.O7.enabled)&&0!=(e&i.O7.saved)&&t.contentCard.addOrUpdateChild({name:s.MW.undoSaveName,type:m.c9.ActionButton,behavior:m.wu.UndoSave,content:t.save.contract.content},t.save)}function V(e){if(!e)return;const t=new URLSearchParams(window.location.search),n=new URL(e);if(pe()){const e=t.get("ocid");if(e){const t=new URLSearchParams(n.search);t.set("ocid",e),n.search=`?${t.toString()}`}}const i=t.getAll("item");return i&&i.length?(i.forEach((e=>{const t=n.search?"&":"?";-1===n.search.indexOf(e)&&(n.search+=`${t}item=${e}`)})),n.toString()):n.toString()}function q(e,t,n,i){if(!e||!(null==t?void 0:t.name)||!(null==n?void 0:n.contentProviderAttributionLabel)||i&&!(null==n?void 0:n.contentTypeFormattingAriaLabel))return null;const r=z(n,i);return r?(0,x.WU)(null==n?void 0:n.contentTypeFormattingAriaLabel,r,e,t.name):(0,x.WU)(n.contentProviderAttributionLabel,e,t.name)}function z(e,t){return t===o.PL.Slideshow?null==e?void 0:e.galleryAriaLabel:t===o.PL.Video?null==e?void 0:e.videoAriaLabel:t===o.PL.WebContent?null==e?void 0:e.crawledContentLabel:void 0}function Q(e,t,n){var i,r,o,a;return(null===(i=null==e?void 0:e.find((e=>e.isDarkMode)))||void 0===i?void 0:i.hexColor)&&(null===(r=null==e?void 0:e.find((e=>!e.isDarkMode)))||void 0===r?void 0:r.hexColor)?e:(null===(o=null==t?void 0:t.find((e=>e.isDarkMode)))||void 0===o?void 0:o.hexColor)&&(null===(a=null==t?void 0:t.find((e=>!e.isDarkMode)))||void 0===a?void 0:a.hexColor)?t:(0,l.pj)(n)}function Z(e,t){var n,i;return(null===(n=null==e?void 0:e.find((e=>e.isDarkMode)))||void 0===n?void 0:n.hexColor)&&(null===(i=null==e?void 0:e.find((e=>!e.isDarkMode)))||void 0===i?void 0:i.hexColor)?e:(0,l.pj)(t)}function K(e,t,n){return e===o.PL.Slideshow?t?'<svg width="12" height="12" viewBox="0 0 12 12" slot="icon"><path d="M8 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM2.5 0A2.5 2.5 0 0 0 0 2.5v5A2.5 2.5 0 0 0 2.5 10h5A2.5 2.5 0 0 0 10 7.5v-5A2.5 2.5 0 0 0 7.5 0h-5ZM1 2.5C1 1.67 1.67 1 2.5 1h5C8.33 1 9 1.67 9 2.5v5c0 .23-.05.45-.15.65L6.21 5.5a1.71 1.71 0 0 0-2.42 0L1.15 8.15A1.5 1.5 0 0 1 1 7.5v-5Zm.85 6.35L4.5 6.21a.71.71 0 0 1 1 0l2.65 2.64c-.2.1-.42.15-.65.15h-5a1.5 1.5 0 0 1-.65-.15ZM5 12a2.5 2.5 0 0 1-2-1h4.5A3.5 3.5 0 0 0 11 7.5V2c.6.46 1 1.18 1 2v3.5A4.5 4.5 0 0 1 7.5 12H5Z"/></svg>':k.Z:e===o.PL.Video?t?A:((e="")=>`<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" slot="icon">\n        <g filter="url(#filter0_${e})">\n            <circle cx="20" cy="20" r="19" fill="url(#paint0_${e})" />\n            <circle cx="20" cy="20" r="19.5" stroke="url(#paint1_${e})" />\n        </g>\n        <path d="M27.2221 18.6846C28.2586 19.2544 28.2586 20.7437 27.2221 21.3135L17.2226 26.8105C16.2229 27.36 15 26.6367 15 25.496L15 14.5021C15 13.3614 16.2229 12.6381 17.2226 13.1877L27.2221 18.6846Z" fill="white" />\n        <defs>\n            <filter id="filter0_${e}" x="-10" y="-10" width="60" height="60" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                <feFlood flood-opacity="0" result="BackgroundImageFix" />\n                <feGaussianBlur in="BackgroundImage" stdDeviation="5" />\n                <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_30_15226" />\n                <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_30_15226" result="shape" />\n            </filter>\n            <linearGradient id="paint0_${e}" x1="1" y1="1" x2="39" y2="39" gradientUnits="userSpaceOnUse">\n                <stop stop-opacity="0.5" />\n                <stop offset="1" stop-opacity="0.7" />\n            </linearGradient>\n            <linearGradient id="paint1_${e}" x1="20" y1="1" x2="20" y2="39" gradientUnits="userSpaceOnUse">\n                <stop stop-color="white" stop-opacity="0.4" />\n                <stop offset="1" stop-color="white" stop-opacity="0.2" />\n            </linearGradient>\n        </defs>\n    </svg>`)(n):void 0}function J(e,t){if(!e)return;if(!t)return e.cardActionsTooltips;const{cardActionsTooltips:n,showMoreV2:i,showFewerV2:r,undoShowMoreV2:o}=e,a=n&&(t.enableSaveButton||!i);return Object.assign(Object.assign({},n),{showMore:a?n.showMore:i,showFewer:a?n.showFewer:r,undoShowMore:a?n.undoShowMore:o})}function X(e,t,n,i,r){return e?(0,h.Xk)(t):(0,h.fh)(t,n,i,null,null,!0,r)}function Y(){return(0,r.cN)(v.jG.CurrentMarket)?90:270}var ee,te;function ne(e,t){if(e)return t===ee.YouMayWantToKnow?e.topQuestionsWantToKnowTitle:t===ee.PeopleAlsoAsk?e.topQuestionsPeopleAskTitle:void 0}function ie(e,t,n,i,r,o,s){const c=function(e,t,n,i){if(!e||!t||!n)return;const r=(0,a.wc)(t,n);if(r)switch(r.type){case a.gZ.LOCAL:r.value?r.localizedLabel=r.value:r.localizedLabel=e[r.type+"BadgeLabel"];break;case a.gZ.TOPQUESTIONS:i===te.KeyInsights?r.localizedLabel=e.keyInsightsBadgeLabel:i===te.AIInsights?r.localizedLabel=e.aiInsightsBadgeLabel:i===te.ExploreMore?r.localizedLabel=e.exploreMoreBadgeLabel:i===te.QnA?r.localizedLabel=e.qnaBadgeLabel:r.localizedLabel=e[r.type+"BadgeLabel"];break;case a.gZ.VIEWS:case a.gZ.TRENDING:case a.gZ.HOT:case a.gZ.OPINION:case a.gZ.EXPLICITLIKE:case a.gZ.FOLLOWEDTREATMENT:case a.gZ.FOLLOWEDTREATMENTTOPIC:case a.gZ.FOLLOWEDTREATMENTPUBLISHER:case a.gZ.HIGHLIGHTS:default:r.localizedLabel=e[r.type+"BadgeLabel"]}return r}(e,t,n,o),d=(null==c?void 0:c.type)===a.gZ.OPINION?void 0:function(e,t,n){if(!e||!t||!n)return;const i=(0,a.LZ)(t,n);if(!i)return;let r;switch(i.type){case a.pR.FOLLOWEDTOPIC:case a.pR.FOLLOWEDPUBLISHER:r=e.followingText;break;case a.pR.TRENDING:r=e.trendingBadgeLabel;break;case a.pR.LOCAL:r=e.localBadgeLabel;break;default:r=e[i.type+"BadgeLabel"]}return Object.assign(Object.assign({},i),{localizedLabel:r})}(e,i,r);return s?{badge:void 0,reasonBadge:void 0}:d?{badge:void 0,reasonBadge:d}:{badge:c,reasonBadge:d}}function re(e,t){if(ae(e.event.target,"MSFT-ATTRIBUTION"))for(const n of ae(e.event.target,"MSFT-ATTRIBUTION").children)if("attribution_container"===n.id){const e=null==n?void 0:n.clientWidth,i=null==n?void 0:n.children[0].clientWidth,r=null==n?void 0:n.children[0],o=e-i<0?e-i:0;"ltr"===t?r.style.left=o+"px":r.style.right=o+"px"}}function oe(e,t){if(ae(e.event.target,"MSFT-ATTRIBUTION"))for(const n of ae(e.event.target,"MSFT-ATTRIBUTION").children)if("attribution_container"===n.id){const e=n.children[0];"ltr"===t?e.style.left="0px":e.style.right="0px"}}function ae(e,t){if(!e.children||0===e.children.length)return null;let n=null;const i=function(e,t){if(e.children&&0!==e.children.length)for(const r of e.children)r.nodeName===t&&(n=r),i(r,t)};return i(e,t),n}function se(){const e=g.M0.getPageMetadata();return e&&e.combinedContract&&e.combinedContract.flight&&e.combinedContract.flight.tmpl||""}function ce(e){const t=v.jG.CurrentRequestTargetScope&&v.jG.CurrentRequestTargetScope.pageExperiments;return t&&t.includes(e)}function de(){return ce("prg-persp2u")||ce("prg-persp2u-c")||ce("prg-persph")||ce("prg-persph-c")}function le(){const e=window&&window.navigator;if(!e)return!1;const t=e.deviceMemory,n=e.hardwareConcurrency;return t<=2&&n<=2}function ue(e,t,n,i){return e.useGamingMediaTemplateInRiver&&n?"gaming-stream-card":e.enableFeedSuperCards&&t?"web-content-card":i&&e.enableBreakingNewsSpotlight?"article-breaking-news-card":e.useArticleCardTemplate?"article-card":"content-card"}function pe(){const e=window.location.href;return null!==S.c.getQueryParameterByName("disti",e)}function he(e,t){if(e&&Array.isArray(e.topQuestions)&&e.topQuestions.length){const n=e.topQuestions.filter((e=>e.id&&e.q));return n.length&&n.map(((e,n)=>{let i="";return t&&(i=t.addOrUpdateChild({name:`topQuestions_${n+1}`,behavior:m.wu.Navigate,content:{id:e.id,headline:e.q}}).getMetadataTag()),Object.assign(Object.assign({},e),{telemetryTag:i})}))}}function ge(e,t,n,i){var r,o;if((0,b.wZ)(e,n)){const n=null==e?void 0:e.cardContent,a=null===(r=null==e?void 0:e.cardContent)||void 0===r?void 0:r.panoCaption,{eventId:s,title:c}=null==n?void 0:n.panoCaption,d=(null==n?void 0:n.locale)||"en-us";return a.destinationUrl=V(`https://www.msn.com/${d}/news/pano/${c}/pa-${s}`),n.isPanoCard=!0,n.panocardType=i,a.MorePublishersLoalizedString=null==t?void 0:t.morePublishers,a.NewsDigestLoalizedString=(o=null==t?void 0:t.newsDigest,ce("prg-pr2-pano-w1")?"All Coverage":ce("prg-pr2-pano-w2")?"360 Coverage":ce("prg-pr2-pano-w3")?"News 360":o),a.NewsDigestDescriptionLoalizedString=null==t?void 0:t.newsDigestDescription,a.DigestAllLoalizedString="See all",a.type=i,a}return null}!function(e){e[e.YouMayWantToKnow=1]="YouMayWantToKnow",e[e.PeopleAlsoAsk=2]="PeopleAlsoAsk"}(ee||(ee={})),function(e){e[e.KeyInsights=1]="KeyInsights",e[e.AIInsights=2]="AIInsights",e[e.ExploreMore=3]="ExploreMore",e[e.QnA=4]="QnA"}(te||(te={}))},55849:function(e,t,n){"use strict";n.d(t,{Ae:function(){return l},Xh:function(){return s},i2:function(){return c},ji:function(){return p},lP:function(){return h},wZ:function(){return u}});var i=n(58958),r=n(44772),o=n(53909),a=n(65135);function s(e){try{const t=new Date(e),n=(new Date).getTime()-t.getTime();return Math.ceil(n/864e5)>3}catch(e){return!0}}function c(e,t,n){if(!e)return{logoImage:"",name:void 0};let r="";const a={width:16,height:16,enableDpiScaling:!1,quality:100,format:o.D3.PNG};!t&&e.logo&&e.logo.id?r=(0,o.zz)(e.logo.id,a):(e.logoUrl||e.logo&&e.logo.url)&&(r=(0,o.mL)(e.logoUrl||e.logo.url,a));const s={logoImage:r,id:e.id,name:e.name,profileId:e.profileId};return n&&(s.immersiveCardSvgLogo=d(n,e.darkThemeSVGLogo),s.svgLogo=(0,i.Y)()?s.immersiveCardSvgLogo:d(n,e.lightThemeSVGLogo)),s}function d(e,t){if(!t)return t;const n=t.width&&t.height?e*t.width/t.height:void 0;return{url:t.url,height:e,width:n}}function l(e){var t,n,i,r,o,a,s,c,d;if((null===(t=null==e?void 0:e.cardContent)||void 0===t?void 0:t.isPanoCard)&&1==(null===(n=null==e?void 0:e.cardContent)||void 0===n?void 0:n.panocardType))e.cardContent.images=[{url:null===(o=null===(r=null===(i=e.cardContent)||void 0===i?void 0:i.panoCaption)||void 0===r?void 0:r.thumbnail)||void 0===o?void 0:o.url,title:null===(s=null===(a=e.cardContent)||void 0===a?void 0:a.panoCaption)||void 0===s?void 0:s.title,width:2e3,height:3e3}];else if(!(e&&e.cardContent&&e.cardContent.images&&e.cardContent.images.length&&e.cardContent.images[0]&&e.cardContent.images[0].url))return(null===(c=null==e?void 0:e.cardContent)||void 0===c?void 0:c.isPanoCard)&&2==(null===(d=null==e?void 0:e.cardContent)||void 0===d?void 0:d.panocardType)&&(e.cardContent.isPanoCard=!1,e.cardContent.panoCaption=null),null;return e.cardContent.images[0]}function u(e,t){var n,i,o;const{type:a,cardContent:s}=e;return t&&a==r.PL.Article&&s&&(null===(i=null===(n=null==s?void 0:s.panoCaption)||void 0===n?void 0:n.publishers)||void 0===i?void 0:i.length)&&(null===(o=null==s?void 0:s.panoCaption)||void 0===o?void 0:o.eventId)}function p(e,t){null==t||t.preventDefault(),e&&e.panoCaption&&window.open(e.panoCaption.destinationUrl.toString(),"_blank"),(null==t?void 0:t.currentTarget)&&(t.currentTarget.classList.add("clicked"),a.M0.sendActionEvent(null==t?void 0:t.currentTarget))}function h(e,t){e.panoCaption.articleDestinationUrl&&(e&&e.panoCaption&&window.open(e.panoCaption.articleDestinationUrl.toString(),"_blank"),a.M0.sendActionEvent(null==t?void 0:t.currentTarget))}},73543:function(e,t,n){"use strict";n.d(t,{to:function(){return h}});var i,r=n(39935),o=n(74045),a=n(88828),s=n(14989),c=n(65135),d=n(76859),l=n(62512),u=n(5020),p=n(56692);function h(e,t,n,i,h,m){const{hasRightRail:f,cardMetadata:v,cardSlot:y,localizedStrings:S,initCardAction:C,cardActionClickHandler:b,cardActionDismissCallback:w,hideStoryEntryPointMap:T,refreshFeedCallback:k,goToPersonalizeCallback:P,configOptions:A}=e,{grid_area:I,layouts:E}=y||{},x=n||v.id,{enableInstantHide:M,enableHideTopics:O,enableDismissCallback:L,useHideConfirmationNewStoryText:D,useHideStoryFeedbackAlternativeStrings:R}=A,{undoHideButtonText:F,refreshFeedButtonText:B,reportButtonText:N,dislikeButtonText:U,hideFeedbackCancelText:$,hideFeedbackMuteText:_,hideFeedbackTitle:H,hideConfirmationUpdatingFeedText:W,hideConfirmationDoneText:j,reportButtonAlternativeText:G,goodRecommendationButtonText:V,hideConfirmationManageInterestsText:q}=S;let z=T?T[x]:void 0;!z&&R&&(z="hide-button");const Q=A.enableHideStoryFeedback||z,Z=v.subItems?(v.subItems||[]).filter((e=>e.id===n))[0]:v,K=(0,u.aU)(i,Z,t,M,z),J="hide-button"===z&&R,X=(0,a.Bn)().currentColumnArrangement;let Y=d.Nv._1x_2y;if(f&&X){let e=s.K$.c4;switch(X){case s.K$.c5:e=s.K$.c4;break;case s.K$.c4:e=s.K$.c3;break;case s.K$.c3:e=s.K$.c2;break;case s.K$.c2:e=s.K$.c1;break;default:e=s.K$.c4}Y=E[e.toUpperCase()]}else E&&X?Y=E[X.toUpperCase()]:Object.values(E)&&Object.values(E).length&&(Y=Object.values(E)[0]);const ee=Z&&Z.cardContent&&Z.cardContent.topics,te=ee&&ee.length&&ee.reduce(((e,t)=>t.weight>e.weight?t:e))||null,ne=O&&te&&S.hideOptionCardNotInterestedInNamedTopic?(0,l.WU)(S.hideOptionCardNotInterestedInNamedTopic,te.label):null;te&&c.M0.addOrUpdateTmplString("hidetopic");const ie=Z&&Z.cardContent&&Z.cardContent.provider,re=ie&&ie.id,oe=ie&&ie.profileId,ae=S.mutePublisherButtonText?(0,l.WU)(S.mutePublisherButtonText,null==ie?void 0:ie.name):null,se=S.followPublisherButtonText?(0,l.WU)(S.followPublisherButtonText,null==ie?void 0:ie.name):null,ce=!Q||"infopane"===v.type&&Y===d.Nv._2x_3y,de=r.DD.getUndoCallbackParams(t,z),le=g(t,S,ie,Q,!0,ce,M,O,te,D,J,z),ue=g(t,S,ie,Q,!1,ce,M,O,te,D,J,z);let pe;return void 0!==r.DD.publisherFollowStatus[oe]?pe=r.DD.publisherFollowStatus[oe]:(t&&(t&o.O7.followedPublisher)>0||Z&&Z.cardContent&&Z.cardContent.badges&&Z.cardContent.badges.some((e=>"followedPublisher"===e.type)))&&(pe=!0),{id:x,gridArea:I,cardSize:Y,cardActionStatus:t,cardActionClickHandler:b,cardActionDismissCallback:L&&w,childTemplateType:"hide-story-card",dislikeButtonText:U,enableHideStoryFeedback:Q,enableInstantHide:M,enableHideTopics:O,showAdFeedback:h,hideStoryTitleData:le,hideStorySubtitle:O&&H,isFollowingPublisher:pe,mutePublisherButtonText:ae,openReportDialog:e=>function(e,t,n,i){const{id:r,title:o,url:a,images:s,metadata:c}=e,d={enabled:!0,article:{id:r,headlineTitle:o,href:a,image:{alt:s&&s.length&&s[0].title,src:s&&s.length&&s[0].url},abstract:c.abstract},onStatusChange:n,parentTelemetryObject:i,dialogToOpen:"report"};t(d)}(e,C,b,K.reportButton),onGoodRecommendationButtonClick:()=>{const e=t|o.O7.showMore|o.O7.hidden;b(x,e,o.Us.ShowMore,!0,null,null,!1,void 0,void 0,z)},onFollowPublisherButtonClick:()=>{const e=t|o.O7.followedPublisher|o.O7.hidden;b(x,e,o.Us.FollowPublisher,!0,void 0,oe,!1,void 0,void 0,z)},personalizeButtonCallback:(e,t)=>function(e,t,n,i){const r=["en-au","en-ca","en-gb","en-in","en-us"],o=p.jG&&r.find((e=>{var t;return e==(null===(t=p.jG.CurrentMarket)||void 0===t?void 0:t.toLowerCase())}));if(e&&c.M0.sendActionEvent(e.target),c.M0.addOrUpdateTmplProperty("ChannelStoreLaunched","1"),!p.jG.isWindowsDashboard&&"channel"!==p.jG.AppType&&o)return void window.dispatchEvent(new CustomEvent("launchChannelStore"));i&&i(n)}(t,0,e,P),personalizeButtonTextData:ue,providerId:re,refreshFeedButtonText:B,refreshFeedCallback:k,reportButtonText:J?G:N,undoHideButtonCallback:e=>{let n;return n=t&o.O7.hideTopic?te&&te.feedId:de.action==o.Us.FollowPublisher?oe:re,e&&setTimeout((()=>function(e,t){if(!e.shadowRoot)return;let n;const i=e.shadowRoot.children;for(let e=0;e<i.length;e++){const r=i.item(e).data;if(r&&r.id===t){n=i.item(e);break}}if(n){const e=n.shadowRoot.querySelector("button[class='card-hide']");e&&e.focus()}}(e,x))),b(x,de.status,de.action,de.sendRequest,void 0,n,!1,void 0,void 0,z)},undoHideButtonText:F,hideConfirmationDoneText:j,hideConfirmationUpdatingFeedText:W,hideFeedbackMuteText:_,hideFeedbackCancelText:J?F:$,telemetryContext:K,entryPoint:z,adFeedbackProps:m,notInterestedInNamedTopicText:ne,associatedTopic:te,currentCardData:Z,goodRecommendationButtonText:V,followPublisherButtonText:se,manageInterestsButtonText:q,likeEntryPointSpinnerCompleteCallback:()=>setTimeout((()=>b(x,t^o.O7.hide^o.O7.hidden)),1e3)}}function g(e,t,n,r,a,s,c,d,u,p,h,g){const{hideConfirmationMuteText:m,hideStoryMuteConfirmationTitle:f,hideConfirmationFewerStoriesText:v,hideStoryDislikeConfirmationTitle:y,hideFeedbackTitle:S,hideStoryFeedbackTitle:C,hideConfirmationManageInterestsText:b,manageTopicsText:w,hideOptionCardTitleText:T,hideStoryFeedbackAlternativeTitle:k,hideStoryFeedbackLikeTitle:P,hideConfirmationMoreStoriesText:A,hideConfirmationFollowText:I}=t;if(r&&e&o.O7.hidden){const r=c?b:w,s=n&&n.name;if(e&o.O7.mute){const e=c?m:f;return a?{text:(0,l.WU)(e,s),dataTag:i.muteConfirmationText}:{text:t.viewMutedPublishersText,dataTag:i.viewMutedPublishersText}}if(e&o.O7.report)return a?{text:t.hideStoryReportConfirmationTitle,dataTag:i.reportConfirmationText}:{text:r,dataTag:i.manageTopicsText};if(e&o.O7.showFewer){const e=c?v:y;return a?{text:e,dataTag:i.dislikeConfirmationText}:{text:r,dataTag:i.manageTopicsText}}if(e&o.O7.showMore)return a?{text:A,dataTag:i.likeConfirmationText}:{text:b,dataTag:i.manageTopicsText};if(!("like-button"!==g||e&o.O7.showMore))return a?{text:(0,l.WU)(I,s),dataTag:i.followConfirmationText}:{text:b,dataTag:i.manageTopicsText};if(e&o.O7.dismiss)return a?p?{text:t.hideConfirmationNewStoryText||v,dataTag:i.newStoryConfirmationText}:{text:t.hideConfirmationDismissText||t.hideConfirmationNewStoryText||v,dataTag:i.dismissConfirmationText}:{text:r,dataTag:i.manageTopicsText};if(d&&e&o.O7.hideTopic){const e=u?(0,l.WU)(t.hideConfirmationCardSingleTopic,u.label):t.hideConfirmationCardMultiTopic;return a?{text:e,dataTag:i.hideTopicConfirmationText}:{text:r,dataTag:i.manageTopicsText}}}else if(s)return a?{text:t.hideStoryTitle}:{text:t.personalizeButtonText};return{text:function(){let e;return e="like-button"===g?P:h?k:C||S,d&&T?T:e}(),dataTag:i.feedbackTitleText}}!function(e){e.dislikeConfirmationText="dislikeConfirmationText",e.likeConfirmationText="likeConfirmationText",e.feedbackTitleText="feedbackTitleText",e.manageTopicsText="manageTopicsText",e.muteConfirmationText="muteConfirmationText",e.followConfirmationText="followConfirmationText",e.reportConfirmationText="reportConfirmationText",e.viewMutedPublishersText="viewMutedPublishersText",e.hideTopicConfirmationText="hideTopicConfirmationText",e.dismissConfirmationText="dismissConfirmationText",e.newStoryConfirmationText="newStoryConfirmationText"}(i||(i={}))},5020:function(e,t,n){"use strict";n.d(t,{aU:function(){return s},df:function(){return c}});var i,r=n(38156),o=n(74045),a=n(60483);!function(e){e.hideStoryCard="HideStoryCard",e.confirmButtonName="Personalize",e.confirmButtonHeadline="Personalize my feed",e.undoHideButtonName="undoHide",e.undoHideButtonHeadline="Undo",e.cancelButtonName="Cancel",e.undoButtonName="Undo",e.dislikeButtonName="showFewer",e.mutePublisherButtonName="mute",e.publisherHideModule="PublisherHideModule",e.refreshFeedButtonName="feedRefresh",e.refreshFeedButtonHeadLine="Feed refresh",e.reportButtonName="ReportArticle",e.reportButtonHeadline="Report an issue",e.reportHideModule="ReportHideModule",e.storyHideModule="StoryHideModule",e.hideNamedTopicButton="HideNamedTopic",e.goodRecommendationButton="ShowMore",e.followPublisherButton="FollowPublisher",e.manageInterestsButton="ManageInterests"}(i||(i={}));const s=(e,t,n,a,s)=>{if(!e)return;const{cardContent:c={},metadata:{category:d,type:l}}=t,{provider:u={}}=c,{metadata:p={}}=c||{},h={brand:c.provider&&c.provider.name,category:p&&p.subCategory||c&&c.category&&c.category.product,headline:c.title,id:c.id,vertical:p.category||d,type:l};function g(e){let t="";return"dislike-button"===s?t="Dislike-":"like-button"===s&&(t="Like-"),t+e}const m=function(t){let n;return n=t&o.O7.hidden?t&o.O7.mute?g(i.publisherHideModule):t&o.O7.report?g(i.reportHideModule):g(i.storyHideModule):g(i.hideStoryCard),e.addOrUpdateChild({name:n,content:Object.assign({},h)})}(n),f=m.addOrUpdateChild({name:g(i.dislikeButtonName),behavior:r.wu.Dislike,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:c.title,id:c.id})}),v=m.addOrUpdateChild({name:g(i.confirmButtonName),behavior:r.wu.Navigate,type:r.c9.ActionButton,content:Object.assign({},h)}),y=m.addOrUpdateChild({name:g(a?i.cancelButtonName:i.undoHideButtonName),behavior:r.wu.Unhide,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:g(i.undoHideButtonHeadline)})}),S=m.addOrUpdateChild({name:g(i.mutePublisherButtonName),behavior:r.wu.Mute,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:u.name,id:u.id})}),C=m.addOrUpdateChild({name:g(i.refreshFeedButtonName),behavior:r.wu.Navigate,type:r.c9.ActionButton,content:Object.assign({},h)}),b=m.addOrUpdateChild({name:g(i.reportButtonName),behavior:r.wu.Report,type:r.c9.ActionButton,content:{headline:g(i.reportButtonHeadline),id:c.id}}),w=m.addOrUpdateChild({name:g(i.undoButtonName),behavior:r.wu.Unhide,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:g(i.undoButtonName)})}),T=m.addOrUpdateChild({name:g(i.hideNamedTopicButton),behavior:r.wu.Hide,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:g(i.hideNamedTopicButton)})}),k=m.addOrUpdateChild({name:g(i.goodRecommendationButton),behavior:r.wu.More,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:g(i.goodRecommendationButton)})}),P=m.addOrUpdateChild({name:g(i.followPublisherButton),behavior:r.wu.Follow,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:g(i.followPublisherButton)})}),A=m.addOrUpdateChild({name:g(i.manageInterestsButton),behavior:r.wu.Navigate,type:r.c9.ActionButton,content:Object.assign(Object.assign({},h),{headline:g(i.manageInterestsButton)})});return{componentRoot:e,hideNamedTopicButton:T,hideStoryCard:m,dislikeButton:f,confirmButton:v,cancelButton:y,mutePublisherButton:S,refreshFeedButton:C,reportButton:b,confirmationUndoButton:w,goodRecommendationButton:k,followPublisherButton:P,manageInterestsButton:A}},c=(e,t)=>{if(!e)return;const n=Object.assign({},e);return e&&e.hideStoryCard&&e.hideStoryCard.contract&&(n.hideStoryCard=new a.D(Object.assign(Object.assign({},e.hideStoryCard.contract),{ext:t}))),n}},2710:function(e,t,n){"use strict";n.d(t,{P:function(){return m},o:function(){return f}});var i=n(33940),r=n(56692),o=n(34960),a=n(68364),s=n(98304),c=n(53076),d=n(44772),l=n(34126),u=n(47266),p=n(55128),h=n(82423),g=n(65135);const m={followingChannelsUpdated:"femFollowingUpdated",recommendedChannelsUpdated:"femRecommendedUpdated",showFallbackFeed:"showFallbackFeed",hideFallbackFeed:"hideFallbackFeed"};class f{constructor(){this.currentFeedId="",this.overrideFeedConfig=null,this.feedManager=null,this.channels=[],this.prevChannelStoreFollows=[],this.isProng2=()=>r.jG.isWindowsDashboard,this.isWinHP=()=>"windows"===r.jG.AppType,this.isNTP=()=>"edgeChromium"===r.jG.AppType,this.isCanvasSupported=()=>this.isProng2()||this.isWinHP()||this.isNTP(),this.transformResponse=(e,t)=>{var n,i,r,o,a;if(e){const s=null===(n=e.regions)||void 0===n?void 0:n.filter((e=>"river"===e.region)),c=s&&s.length&&s[0]&&s[0].sections,{type:l}=(null===(r=null===(i=null==c?void 0:c[0])||void 0===i?void 0:i.cards)||void 0===r?void 0:r[0])||{};if(l===d.PL.ChannelFilterCard||t&&l===d.PL.ChannelCarousel)return null===(a=null===(o=null==s?void 0:s[0])||void 0===o?void 0:o.sections)||void 0===a||a.shift(),!0}return!1},this.fetchChannelFilter=e=>(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.isProng2()?this.fetchFromWindowsCardProvider(e):this.fetchFromWpoCardProvider(e),n=this.getCardsFromResponse(t)[0];if(n)return n.type===d.PL.ChannelFilterCard?n:void((null==n?void 0:n.type)!==d.PL.ChannelCarousel&&(0,a.H)(s.k2Y,"Channel Filter is not present in the backend response"));(0,a.H)(s.nZQ,"Failed to load Channel Filter feed")})),this.fetchPublishers=()=>(0,i.mG)(this,void 0,void 0,(function*(){var e;try{const t=yield null===(e=this.publisherServiceClient)||void 0===e?void 0:e.getUserFollowedSources();if(null==t?void 0:t.length)return t}catch(e){(0,a.H)(s.T4Y,"Failed to fetch publisher metadata")}})),this.fetchChannel=({id:e})=>(0,i.mG)(this,void 0,void 0,(function*(){const t={feedId:e};return this.isProng2()?this.fetchFromWindowsCardProvider(t):this.fetchFromWpoCardProvider(t)})),this.mapChannel=(e,t)=>{var n,i,r,o,a,s;const c=["InterestChannel","InterestFeed"].includes(e.type);return{id:c?null===(n=null==e?void 0:e.feed)||void 0===n?void 0:n.id:null===(i=null==e?void 0:e.provider)||void 0===i?void 0:i.id,imgSrc:(null===(o=null===(r=e.images)||void 0===r?void 0:r[0])||void 0===o?void 0:o.url)||"",title:c?null===(a=null==e?void 0:e.feed)||void 0===a?void 0:a.feedName:null===(s=null==e?void 0:e.provider)||void 0===s?void 0:s.name,isFollowing:!0,isTopic:c,index:t,providerProfileId:!c&&e.provider&&e.provider.profileId}},this.getCardsFromResponse=e=>{var t,n;if(!e)return[];const i=null===(t=e.sections)||void 0===t?void 0:t.filter((e=>"river"===e.region)),r=i&&i.length?i:e.sections,{cards:o=[],subSections:a}=r&&r.length&&r[0]||{};return(a?null===(n=a[0])||void 0===n?void 0:n.cards:o)||[]},this.fetchFromWindowsCardProvider=(e={})=>{const t=Object.assign({contextSource:"winWidgets",count:12,feedId:"",isXfeed:!0,ocid:"winp2",useRawJson:!0,pivotId:"Following"},e);return(new l.X).fetch(t)},this.fetchFromWpoCardProvider=(e={})=>{const t=(0,o.ku)(),n=Object.assign({ocid:t,timeoutMs:2e3,feedName:"following",requestId:g.M0.getRequestId(),shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion"},e);return new u.fy({initialRequest:{timeoutMs:2e3}},!1).fetchFromWpoService(n,!0)},this.resetChannelFeedId=()=>{this.currentFeedId=""},this.setChannelFeed=e=>(0,i.mG)(this,void 0,void 0,(function*(){if(e!==this.currentFeedId&&(e||this.currentFeedId))if(this.currentFeedId=e,this.overrideFeedConfig)this.overrideFeedConfig((t=>{var n;return(null===(n=t.riverSectionCardProviderConfig)||void 0===n?void 0:n.initialRequest)&&(t.riverSectionCardProviderConfig.initialRequest.feedName="following",t.riverSectionCardProviderConfig.initialRequest.feedId=e,t.riverSectionCardProviderConfig.initialRequest.isXFeed=!0,t.riverSectionCardProviderConfig.initialRequest.timeoutMs=3e3),t}));else if(this.feedManager){const t=this.isProng2()?"Following":"following",n=this.isProng2()?"winWidgets":"",i={isXFeed:!0,feedId:e,pivotId:t,contextSource:n};yield this.feedManager.callRefreshRegionsData(i)}})),this.setFeedConfigOverrider=e=>{this.overrideFeedConfig=e},this.setFeedManager=e=>{this.feedManager=e},this.setChannels=e=>{this.channels=e,window.dispatchEvent(new CustomEvent(m.followingChannelsUpdated))},this.setChannelsRecommendations=e=>{this.channels=e,window.dispatchEvent(new CustomEvent(m.recommendedChannelsUpdated))},this.isProviderChannel=e=>this.channels.some((({id:t,isTopic:n})=>e===t&&!n)),this.showFallbackFeed=()=>{window.dispatchEvent(new CustomEvent(m.showFallbackFeed))},this.hideFallbackFeed=()=>{window.dispatchEvent(new CustomEvent(m.hideFallbackFeed))},this.isFeedFetching=()=>this.feedManager&&this.feedManager.isFeedFetching()}initializeServiceClients(){this.topicsDataConnector||(this.topicsDataConnector=(0,h.K0)(c.z.TopicData)),this.publisherServiceClient||(this.publisherServiceClient=this.publisherServiceClient||new p.PublisherServiceClient(window.fetch.bind(window),!1)),this.topicsDataConnector||(0,a.H)(s.T4K,"Topic Data Connector is not defined in ChannelFilterCard WCE.")}}},16436:function(e,t,n){"use strict";n.r(t),n.d(t,{FollowingExperienceManagerEvents:function(){return i.P},followingExperienceManager:function(){return r}});var i=n(2710);const r=new i.o},56692:function(e,t,n){"use strict";n.d(t,{Vh:function(){return D},jG:function(){return F},Yq:function(){return R}});var i,r,o,a=n(12108),s=n(33799),c=n(38895),d=n(83097),l=n(98304),u=n(22704),p=n(68848),h=n(31573),g=n(10877),m=n(26974),f=n(36768),v=n(33379),y=n(12884),S=n(27003),C=n(99590),b=n(1038),w=n(26007),T=n(99038),k=n(45506),P=n(79022),A=n(81428),I=n(82855),E=n(63045),x=n(57967),M=n(67462);!function(e){e.WWW="www",e.MicrosoftStart="microsoftstart",e.INT="int",e.INT1="int1",e.MicrosoftStartINT="microsoftstart-int",e.MicrosoftStartINT1="microsoftstart-int1"}(i||(i={})),function(e){e.MSN="msn",e.MicrosoftStart="microsoftstart"}(r||(r={})),function(e){e.COM="com",e.CN="cn"}(o||(o={}));var O=n(82530);const L="__AppEnvironmentInstance__";class D{constructor(e,t,n,i,r){this.marketMismatchDetails={type:"",mismatchItem1:"",mismatchItem2:""},this.initializeAppEnvironment(e,t,n,i,r)}get ShouldUseFdheadQsp(){return this.shouldUseFdheadQsp}get OneServiceContentMarketQspKey(){return this.oneServiceContentMarketQspKey}get Ecasession(){return void 0===this.ecasession&&(this.ecasession=(0,M.ej)("ecasession")||"init"),this.ecasession}get BrowserOptOut(){return void 0===this.browserOptOut&&(this.browserOptOut="1"===(0,M.ej)("TOptOut")),this.browserOptOut}get isMobile(){var e,t;const n=(null===(e=null===k.Al||void 0===k.Al?void 0:k.Al.ClientSettings)||void 0===e?void 0:e.ocid)||"",i=(null===(t=null===k.Al||void 0===k.Al?void 0:k.Al.ClientSettings)||void 0===t?void 0:t.deviceFormFactor)||"";return n.startsWith("msnaroverlay")||"phone"===i}get isMiniProgram(){const e=k.Al.ClientSettings||{ocid:"",deviceFormFactor:""},t=(0,v.N)()?"weatherminiprogram"===e.ocid||((null===navigator||void 0===navigator?void 0:navigator.userAgent)||"").indexOf("miniProgram")>-1:"weatherminiprogram"===e.ocid;return"phone"===e.deviceFormFactor&&t}get isOverlayFrame(){var e;return((null===(e=null===k.Al||void 0===k.Al?void 0:k.Al.ClientSettings)||void 0===e?void 0:e.ocid)||"").startsWith("msnaroverlay")}get ActivityId(){return this.activityId}set ActivityId(e){this.activityId=e,k.Al.ClientSettings=Object.assign(Object.assign({},k.Al.ClientSettings),{aid:e})}get FrontDoorMuid(){return this.frontDoorMuid}get EnvironmentConfigUrl(){const e=new URL("",this.environmentConfigUrl);"dev"===new URLSearchParams((0,y.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,y.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get ContentServiceUrlBase(){const e=new URL("",this.contentServiceUrlBase);"dev"===new URLSearchParams((0,y.zp)()).get("env")&&e.searchParams.set("env.content","dev");const t=new URLSearchParams((0,y.zp)()).get("env.content");return t&&e.searchParams.set("env.content",t),e}get CurrentRequestTargetScope(){return this.currentRequestTargetScope}set CurrentRequestTargetScope(e){this.currentRequestTargetScope=e}get LocaleContentMarket(){var e,t,n;return(0,p.H)(k.Al.ClientSettings&&k.Al.ClientSettings.locale)||(null===(t=null===(e=this.currentRequestTargetScope)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.content)||(null===(n=this.currentRequestTargetScope)||void 0===n?void 0:n.locale)}get LocaleDisplayLanguage(){return(0,p.H)(k.Al.ClientSettings&&k.Al.ClientSettings.locale,!0)||this.LocaleContentMarket}get LocaleContentMarketString(){const e=this.LocaleContentMarket;return e&&e.language&&e.market?(0,p.p)(e):""}get LocaleDisplayLanguageString(){const e=this.LocaleDisplayLanguage;return e&&e.language&&e.market?(0,p.p)(e):""}get SourceUrl(){let e=F.HostPage.originalUrl;const t=F.CurrentRequestTargetScope.pageType,n=F.HostPage.verticalKey;if("localhost.msn.com"===F.HostPage.hostName&&t===a.G.NTP)return e="https://ntp.msn.com/edge/ntp",e;if(t&&n){const i=t.toLowerCase();(i.indexOf(a.G.DHP)>-1||i.indexOf(a.G.NTP)>-1)&&(e="https://"+F.HostPage.hostName+"/"+n+"/"+t)}return e}get CurrentMarket(){return this.currentMarket}set CurrentMarket(e){this.currentMarket=e}get EnableFiveColLayout(){return this.enableFiveColLayout}set EnableFiveColLayout(e){this.enableFiveColLayout=e}get Environment(){return this.environment}set Environment(e){this.environment=e}get StaticDomain(){return this.staticDomain}get HostPage(){return this.hostPage}set HostPage(e){this.hostPage=e}get AppType(){return this.appType}get AuthCookieName(){return this.authCookieName}set AuthCookieName(e){this.authCookieName=e}get UseOneServiceAuthEndpoints(){return this.useOneServiceAuthEndpoints}set UseOneServiceAuthEndpoints(e){this.useOneServiceAuthEndpoints=e}get UseOneServiceAnonAuthEndpoints(){return this.useOneServiceAnonAuthEndpoints}set UseOneServiceAnonAuthEndpoints(e){this.useOneServiceAnonAuthEndpoints=e}get UseAuthFetch(){return this.useAuthFetch}set UseAuthFetch(e){this.useAuthFetch=e}get AccountInfoPromise(){return this.accountInfoPromise}set AccountInfoPromise(e){this.accountInfoPromise=e}get ResolvedAccountInfo(){return this.resolvedAccountInfo}set ResolvedAccountInfo(e){this.resolvedAccountInfo=e}get BuildVersion(){return this.buildVersion||""}get ClarityEnabled(){return this.clarityEnabled}set ClarityEnabled(e){this.clarityEnabled=e}get IsWinAADUser(){return this.isWinAADUser}set IsWinAADUser(e){this.isWinAADUser=e}get RootTelemetryId(){return this.rootTelemetryId}set RootTelemetryId(e){this.rootTelemetryId=e}get TrackInfo(){return this.trackInfo}set TrackInfo(e){this.trackInfo=e}get UserId(){return this.getUserMuid()||this.userId}set UserId(e){this.userId=e}get OneServiceApiKey(){return this.oneServiceApiKey}set OneServiceApiKey(e){this.oneServiceApiKey=e}get OneServiceOverride(){return this.oneServiceOverride}set OneServiceOverride(e){this.oneServiceOverride=e}get EnvInstanceOverride(){return this.envInstanceOverride}get IsDebug(){return this.isDebug}get ShowMnsCreatorDashboard(){return this.showMnsCreatorDashboard}get NavTargetHostName(){return this.navTargetHost}get NavTargetUrlWithLocale(){return`https://${this.NavTargetHostName}/${this.CurrentMarket}`}get IsChinaCompliance(){return this.isChinaCompliance}get IsCaliforniaRegion(){return this.isCaliforniaRegion}get AssetsUrl(){return this.staticAssetsUrl}get StaticsUrl(){return this.staticsUrl}get topDomain(){return this.isChinaCompliance?o.CN:o.COM}get isGccModUser(){if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>(null==e?void 0:e.region_scope)===b.iN.GCC_MODERATE))}get unsupportedEnterpriseCloud(){if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>!((null==e?void 0:e.region_scope)===b.iN.GLOBAL)))}get WidgetAttributes(){return this.widgetAttributes}get ServiceUrlBase(){const e=new URL("",this.serviceUrlBase);"dev"===new URLSearchParams((0,y.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,y.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get FeedServiceUrlBase(){if(!this.feedServiceUrlBase)return null;const e=new URL("",this.feedServiceUrlBase);"dev"===new URLSearchParams((0,y.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,y.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get EnterpriseServiceUrlBase(){if(!this.enterpriseServiceDomainUrl)return;const e=new URL("",this.enterpriseServiceDomainUrl);"dev"===new URLSearchParams((0,y.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,y.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get isAadAccountUser(){return this.CurrentRequestTargetScope&&this.CurrentRequestTargetScope.audienceMode===a.F.Enterprise&&this.ResolvedAccountInfo&&this.ResolvedAccountInfo.account_type&&this.ResolvedAccountInfo.account_type===s.Qm.AAD}get IsFrePage(){return this.isFrePage}get DisableCachingConfigs(){return this.disableCachingConfigs}get EnableConfigService(){const e=w.c.getQueryParameterByName("enableConfigService",(0,y.zp)());return e?"true"===e.toLocaleLowerCase():this.enableConfigService}get EnableCMSPPEConfigs(){return k.Al&&k.Al.EnableCMSPPEConfigs}get IsMultiConfigRetrievalEnabled(){return this.isMultiConfigRetrievalEnabled}get SendFeedCallActivityIdInHeader(){return this.sendFeedCallActivityIdInHeader}get SendUserIdInHeader(){return this.sendUserIdInHeader}get ConfigServiceBaseUrl(){return this.configServiceBaseUrl}get CrsRetryBaseUrl(){return this.crsRetryBaseUrl}get FeatureFlags(){return this.featureFlags}get HostHeaderOverride(){return this.hostHeaderOverride}get ConfigRootUrl(){if(!this.configRootUrl)return null;const e=new URL("",this.configRootUrl);"dev"===new URLSearchParams((0,y.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,y.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get CacheBustingIdentifier(){return this.cacheBustingIdentifier}get IsGitConfigs(){return this.isGitConfigs}get CountryCode(){return this.countryCode}set CountryCode(e){this.countryCode=e}get ActivityIdLowerCaseNoHypens(){return(k.Al&&k.Al.ClientSettings&&k.Al.ClientSettings.aid||"").toLowerCase()}get Latitude(){return this.latitude}get Longitude(){return this.longitude}get ConfigOrigins(){return this.configOrigins}get CrsVersion(){return this.crsVersion}get CrsPath(){return this.crsPath}get CrsDisableServerCache(){return this.crsDisableServerCache}set CrsDisableServerCache(e){this.crsDisableServerCache=e}get LanguageRegionMismatch(){return this.findLanguageRegionMismatch()?"marketmismatch":""}get isWindowsDashboard(){return"newsAndInterests"===F.AppType||"windowsNewsPlus"===F.AppType||"winWidgets"===F.AppType}get LanguageRegionMismatchExplicit(){return this.findLanguageRegionMismatchExplicit()?"marketmismatch":""}get MarketRequestInputLanguage(){return this.marketRequestInputLanguage}get MarketRequestInputRegion(){return this.marketRequestInputRegion}get MarketRequestInputGeoCountry(){return this.marketRequestInputGeoCountry}get MarketDetectionType(){return this.marketDetectionType}get EnableAppErrorBatching(){return k.Al&&k.Al.CurrentFlights&&k.Al.CurrentFlights.includes("batcherrors")}findLanguageRegionMismatch(){var e,t,n,i,r,o,a,s,c;if(k.Al.ClientSettings&&"true"===k.Al.ClientSettings.static_page)return!1;const d=k.Al.ClientSettings&&(null===(e=k.Al.ClientSettings)||void 0===e?void 0:e.market)&&(null===(n=null===(t=k.Al.ClientSettings)||void 0===t?void 0:t.market)||void 0===n?void 0:n.detection),l=k.Al.ClientSettings&&(null===(i=k.Al.ClientSettings)||void 0===i?void 0:i.market)&&(null===(o=null===(r=k.Al.ClientSettings)||void 0===r?void 0:r.market)||void 0===o?void 0:o.requestInput),u=(0,p.H)(k.Al.ClientSettings&&(null===(a=k.Al.ClientSettings)||void 0===a?void 0:a.locale)&&(null===(c=null===(s=k.Al.ClientSettings)||void 0===s?void 0:s.locale)||void 0===c?void 0:c.content));if(d&&("implicitExisting"===d.type||"implicitNew"===d.type||"cm"===d.type||"implicitReset"===d.type)&&l){if(u){if(l.language.toLowerCase()!==u.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=l.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=u.language.toLowerCase(),!0;if(l.region&&l.region.toLowerCase()!==u.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=l.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=u.market.toLowerCase(),!0}if("implicitExisting"===d.type&&l.geo_country.toLowerCase()!==d.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=l.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=d.geo_country.toLowerCase(),!0}return!1}get MarketMismatchDetail(){return this.findLanguageRegionMismatch()||this.findLanguageRegionMismatchExplicit()?this.marketMismatchDetails:null}findLanguageRegionMismatchExplicit(){var e,t,n,i,r,o,a,s,c;if(k.Al.ClientSettings&&"true"===k.Al.ClientSettings.static_page)return!1;const d=k.Al.ClientSettings&&(null===(e=k.Al.ClientSettings)||void 0===e?void 0:e.market)&&(null===(n=null===(t=k.Al.ClientSettings)||void 0===t?void 0:t.market)||void 0===n?void 0:n.detection),l=k.Al.ClientSettings&&(null===(i=k.Al.ClientSettings)||void 0===i?void 0:i.market)&&(null===(o=null===(r=k.Al.ClientSettings)||void 0===r?void 0:r.market)||void 0===o?void 0:o.requestInput),u=(0,p.H)(k.Al.ClientSettings&&(null===(a=k.Al.ClientSettings)||void 0===a?void 0:a.locale)&&(null===(c=null===(s=k.Al.ClientSettings)||void 0===s?void 0:s.locale)||void 0===c?void 0:c.content));if(d&&"compliance"!==d.type&&"url"!==d.type&&l){if(u){if(l.language.toLowerCase()!==u.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=l.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=u.language.toLowerCase(),!0;if(l.region&&l.region.toLowerCase()!==u.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=l.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=u.market.toLowerCase(),!0}if(l.geo_country.toLowerCase()!==d.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=l.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=d.geo_country.toLowerCase(),!0}return!1}setConfigOrigin(){const e={feature:E.w.Production,loc:E.w.Production};return this.IsGitConfigs&&!this.EnableConfigService||(e.feature=E.w.Production,e.loc=E.w.Production),e}static getInstance(e=null,t=null,n=null,i=null,r=null){return S.Gq.get(L,(()=>new D(e,t,n,i,r)))}static resetInstance(e=null,t=null,n=null,i=null,r=null){const o=new D(e,t,n,i,r);return S.Gq.set(L,o),F=(0,C.h)(D),F}initializeAppEnvironment(e,t,n,i,r){const o=(0,y.Td)(),a=(0,v.N)()?(0,y.$w)(g.Xs):null,s=(0,y.l4)(),d=(0,y.Dp)(),u=(0,y.zp)();let p=null;const S=k.Al&&k.Al.ClientSettings,C=w.c.getParamsWithItems(u,!0);if(S){const e=C&&C.find((e=>"revip"===e.key));this.isCaliforniaRegion=S.geo_subdivision&&"california"==S.geo_subdivision.toLocaleLowerCase(),this.isChinaCompliance=o.toLowerCase().endsWith(".cn")||S.isChinaCompliance||S.useCnDomain||e&&e.value&&"cn"===e.value.toLocaleLowerCase()||!1,(0,h.sV)(this.isChinaCompliance),this.activityId=this.tryReformatGuid(S.aid),this.currentMarket=this.LocaleContentMarketString||S.apps_locale,this.countryCode=S.geo_country,this.frontDoorMuid=S.fd_muid,this.latitude=S.geo_lat,this.longitude=S.geo_long,this.configRootUrl=S.configRootUrl?new URL("",S.configRootUrl):null,p=(0,m.s)(S.pcsInfo&&S.pcsInfo.env||"prod"),this.setAccountInfoPromise(),this.appType=S.apptype||"",this.authCookieName=this.getAuthCookieName(),this.useOneServiceAuthEndpoints=!1,this.useOneServiceAnonAuthEndpoints=!1,this.useAuthFetch=!1,this.featureFlags=S.featureFlags,this.disableCachingConfigs=!(!this.featureFlags||!this.featureFlags.disableCachingConfigs)&&"true"===this.featureFlags.disableCachingConfigs,this.enableConfigService=!this.featureFlags||!this.featureFlags.enableConfigService||"true"===this.featureFlags.enableConfigService,this.sendFeedCallActivityIdInHeader=(!this.featureFlags||!this.featureFlags.disableActivityIdInHeader||"true"!==this.featureFlags.disableActivityIdInHeader)&&("edge"===this.appType||"hub"===this.appType),this.sendUserIdInHeader="channel"===this.appType,this.cacheBustingIdentifier=S.cbid;const{bundleInfo:t,pcsInfo:n}=S||{},i=this.getRunTimePropertyBag(t,n);(0,l.GQ)(i),(0,x.r7)(i),this.configIndexDocId=S.configIndexDocId,this.widgetAttributes=S.widgetAttributes}const b=(0,m.s)(w.c.getQueryParameterByName("env",s));this.environment=b||p||m.q.prod,this.envInstanceOverride=w.c.getQueryParameterByName("instance",s);const T=S&&S.servicesEndpoints,P=T&&T.feedService&&T.feedService.domain||d;this.serviceDomainUrl=n||P,this.oneServiceOverride=r,this.staticDomain=new URL(P).host,this.staticAssetsUrl=T&&T.staticConfig&&T.staticConfig.domain,this.staticsUrl=`${this.staticAssetsUrl}/staticsb/statics/`,this.enterpriseServiceDomainUrl=T&&T.enterpriseFeedService&&T.enterpriseFeedService.domain;const{crs:A={}}=T||{},{v:E,domain:M,path:O}=A;this.crsVersion=E,this.crsDomain=M,this.crsPath=O||c.mX;const{requestInput:L={},detection:D={}}=S&&S.market||{},{language:R="",region:F="",geo_country:B=""}=L||{},{type:N=""}=D||{};this.marketRequestInputLanguage=R,this.marketRequestInputRegion=F,this.marketRequestInputGeoCountry=B,this.marketDetectionType=N,this.serviceUrlBase=e||a&&a.getAttribute(g.X8)&&new URL("",a.getAttribute(g.X8))||new URL("/service/",this.serviceDomainUrl),this.feedServiceUrlBase=this.serviceDomainUrl&&new URL("/service/",this.serviceDomainUrl)||void 0,this.hostPage=f.N.getHostPageFromUrl(s),this.isFrePage="1"===w.c.getQueryParameterByName("fre",s),this.userId=this.getUserMuid(),this.rootTelemetryId=a?Number(a.getAttribute(g.DB)):0;const U=a&&a.getAttribute(g.uw),$=a&&a.getAttribute(g.Kz);if(this.trackInfo={sitePage:{page_product:U,page_type:$}},this.setNavTargetHostName(),this.setTargetScope(),this.crsVersion=(0,I.W_)(this.crsVersion||"",this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments,this.appType||""),this.isGitConfigs=this.useGitConfigs(),this.configOrigins=this.setConfigOrigin(),"mmx"===this.appType&&k.Al&&!k.Al.IsMmxWwwContentRequest){const e=(0,y.Td)().endsWith(".cn")?"https://assets.msn.cn":"https://assets.msn.com";this.contentServiceUrlBase=new URL("/content/",e)}else this.contentServiceUrlBase=this.serviceDomainUrl?new URL("/content/",this.serviceDomainUrl):void 0;this.isMultiConfigRetrievalEnabled=this.useMultiConfigsRetrieval();const _=this.getConfigServiceBaseUrl(this.isMultiConfigRetrievalEnabled,t);this.configServiceBaseUrl=_?new URL("",_):null,this.environmentConfigUrl=this.serviceDomainUrl?new URL("/config/v1/",this.serviceDomainUrl):void 0,this.isDebug=(w.c.getQueryParameterByName("debug",s)||"").toLowerCase()in{1:1,true:1}||(w.c.getQueryParameterByName("item",s)||"").toLowerCase().indexOf("/debug")>0||o.includes("localhost"),this.showMnsCreatorDashboard=null!=w.c.getQueryParameterByName("mnsDash",s),this.oneServiceApiKey=this.getOneServiceApiKey(),this.enableFiveColLayout=!1,i&&(this.hostHeaderOverride=i);const H={appType:this.appType,flights:k.Al.CurrentFlights,itemOverrides:C},W=u&&(u.includes("vptest=1")||u.includes("reqsrc=vp")),j="edgeChromium"===this.appType&&!(0,v.N)();this.shouldUseFdheadQsp=W||(0,I.Bc)(H,j),this.oneServiceContentMarketQspKey=this.shouldUseFdheadQsp?"market":"cm"}getOneServiceApiKey(){var e,t;if(this.widgetAttributes&&this.widgetAttributes.feed&&this.widgetAttributes.feed.apiKey)return this.widgetAttributes.feed.apiKey;const n="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM";let i;switch(this.appType){case"windowsShell":case"windowsShellV2":i="pWw5OmQehOA0XNfgcgrTrwEJZJJJzE83ovtTQx6JRG";break;case"newsAndInterests":case"windowsNewsPlus":i="AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"winWidgets":i=(null===(e=this.currentRequestTargetScope)||void 0===e?void 0:e.pageType)===a.G.Sidebar?n:"AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"edgeChromium":i="1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc";break;case"bingHomepage":case"distribution":i=k.Al.ClientSettings.pagetype===a.G.Lenovo?"OrorOEMX3w4Hsk49OXMM6YayCYQw3OHcpzqiXEk9xd":k.Al.ClientSettings.pagetype===a.G.EdgeWelcome?"oPFhbDSAghltCuG6UvQCcxmngSVye65eXQHHu3voxZ":"QMmdky7jrTlM4mWJmMYQTi71lp678KyZJBKHCAyKCg";break;case"sharedWidgets":i="hFWgtnoLG1BXruRRhEVJo5ACP8414XUG0Ric6JbyND";break;case"gaming":i="play"===(null===(t=this.currentRequestTargetScope)||void 0===t?void 0:t.pageType)?n:"Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo";break;case"travel":i="8RwD77wJgNQmmVBdGmZsK6vvPCrG58iRCQRoPsE4JJ";break;case"health":i="FywQv6H345wNCU4yKWraF2esI9qiMQFx90v53mMHrm";break;default:i=n}return i}getUserMuid(){let e;const t=(0,M.jG)();return(0,P.Z)(t)&&(e="m-"+t),e}getConfigServiceBaseUrl(e=!0,t=null){const n=this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments,i=(0,I.sW)(n,this.isChinaCompliance,this.appType),r=this.isGitConfigs?`${this.crsPath}${this.crsVersion||c.PQ}/config/`:`${this.crsPath}${e?"v2/":""}configindex/`;return t?t+r:(O&&O.env,(0,v.N)()&&(this.renderWidgets()||"sharedWidgets"===this.appType||"bingHomepage"===this.appType||"distribution"===this.appType||"gaming"===this.appType||("sports"===this.appType||"finance"===this.appType)&&this.widgetAttributes)?i?`${i}`+r:(this.crsDomain||"https://www.msn."+(this.IsChinaCompliance?"cn":"com"))+r:(i&&(this.crsRetryBaseUrl=(0,y.Dp)()?(0,y.Dp)()+r:null),i||(0,y.Dp)()?(i||(0,y.Dp)())+r:null))}useMultiConfigsRetrieval(){const e=(0,y.zp)();if(e){const t=w.c.getQueryParameterByName("isMultiConfigRetrievalEnabled",e);if(t)return"true"===t.toLocaleLowerCase()}return!this.featureFlags||!this.featureFlags.isMultiConfigRetrievalEnabled||"true"===this.featureFlags.isMultiConfigRetrievalEnabled}useGitConfigs(){const e=(0,y.zp)();if(e){const t=w.c.getQueryParameterByName("isGitConfig",e);if(t)return"true"===t.toLocaleLowerCase()}return(0,I.LB)(this.crsVersion,this.configIndexDocId,this.appType)}renderWidgets(){const e=(0,y.zp)();if(e){const t=w.c.getQueryParameterByName("renderWidget",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}getAuthCookieName(){if(this.authCookieName)return this.authCookieName;let e;switch((k.Al&&k.Al.ClientSettings).apptype||""){case"windows":e=k.Al.ClientSettings.pagetype===a.G.Windows?"anon":"app_anon";break;case"aicharacter":case"bingHomepage":case"community":case"contentTools":case"finance":case"firstParty":case"gaming":case"health":case"homePage":case"hub":case"hybrid":case"microsoftNews":case"personalize":case"recipes":case"sharedWidgets":case"shopping":case"sports":case"traffic":case"travel":case"ugc":case"views":case"weather":default:e="anon";break;case"edge":case"edgeChromium":case"distribution":case"mmx":case"newsAndInterests":case"windowsNewsbar":case"windowsNewsPlus":case"winWidgets":case"windowsShell":case"windowsShellV2":case"office":case"channel":case"superApp":e="app_anon"}return e}setAccountInfoPromise(){this.ResolvedAccountInfo=null,this.AccountInfoPromise=new Promise((e=>{if(!((0,v.N)()&&window.chrome&&window.chrome.authPrivate&&window.chrome.authPrivate.getPrimaryAccountInfo))return e(null);const t=Math.round(performance.now());window.chrome.authPrivate.getPrimaryAccountInfo((n=>{const i=Math.round(performance.now());return(0,u.Ou)()["Auth.GetPrimaryAccountInfo"]=i-t,this.ResolvedAccountInfo=n,e(n)}))})),this.AccountInfoPromise}tryReformatGuid(e){if(e&&32===e.length){const t=e.match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/i);t&&(e=t.slice(1).join("-"))}return e}setTargetScope(){if(!k.Al||!k.Al.ClientSettings)return;let e;const t=decodeURIComponent((0,M.ej)(d.IR.AppAnonCookieExists)),n=(0,M.ej)(g.nM),{child:i}=t&&(0,A.dW)(t)||{};e=t&&(1===i||n)?a.F.Kids:k.Al.ClientSettings.audienceMode||a.F.Adult;const{browser:r,deviceFormFactor:o,domain:s,ocid:c,os:l,pagetype:u}=k.Al.ClientSettings,p=k.Al.CurrentFlights.split(",");if(this.currentRequestTargetScope={audienceMode:e,browser:r,deviceFormFactor:o,domain:s,locale:{content:this.LocaleContentMarket,display:this.LocaleDisplayLanguage},ocid:c,os:l,platform:"web",pageType:u,pageExperiments:p},!this.currentRequestTargetScope.locale&&T.b.stringHasData(this.LocaleContentMarketString)){const e=this.LocaleContentMarketString.split("-");e.length>1&&(this.currentRequestTargetScope.locale={language:e[0],market:e[e.length-1],content:{language:e[0],market:e[e.length-1]},display:{language:e[0],market:e[e.length-1]}})}}setNavTargetHostName(){let{subDomain:e,domainName:t,topLevelDomain:n}={subDomain:i.WWW,domainName:r.MSN,topLevelDomain:o.COM};const a="homePage"!==this.appType&&k.Al&&k.Al.CurrentFlightSet&&k.Al.CurrentFlightSet.has("1s-viewurldomain");switch(this.environment){case m.q.prod:case m.q.staging:e=a?i.MicrosoftStart:i.WWW;break;case m.q.int1:e=a?i.MicrosoftStartINT1:i.INT1;break;case m.q.int:case m.q.intpr:case m.q.intperf:e=a?i.MicrosoftStartINT:i.INT}this.isChinaCompliance&&(n=o.CN),this.navTargetHost=`${e}.${t}.${n}`}getRunTimePropertyBag(e,t){const n={appType:this.appType};t&&(n.pcsVersion=t.v,n.pcsEnv=t.env);const{alias:i,v:r}=e||{};this.buildVersion=r||"",n.build=this.buildVersion,i&&(n.buildAlias=i);const o=k.Al.CurrentFlights;return o&&(n.shouldDelayUntilLoadTime="edgeChromium"===this.appType&&k.Al.IsPrerender,n.shouldSupressWarnings=o.includes("warningsremoved")),n}}const R=D.getInstance;let F=(0,C.h)(D)},48328:function(e,t,n){"use strict";n.d(t,{Qe:function(){return s},_Y:function(){return c}});var i=n(95527),r=n(81428),o=n(33379),a=n(10877);function s(){var e;return(0,o.N)()?(0,r.dW)(document.head.dataset.clientSettings||(null===(e=document.getElementsByClassName(i.fw)[0])||void 0===e?void 0:e.getAttribute(a.nr))):null}function c(e){if(!(0,o.N)()||!e)return;const t=(0,r.Vm)(e);t&&document.head.setAttribute(a.nr,t)}},27212:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var i=n(45506);const r=()=>{const e=i.Al&&i.Al.ClientSettings||{},{geo_citycf:t,geo_countrycf:n}=e;return e&&JSON.stringify({citycf:t,countrycf:n})}},1038:function(e,t,n){"use strict";var i;n.d(t,{Ak:function(){return a},I4:function(){return r},d3:function(){return o},iN:function(){return i},oD:function(){return s}}),function(e){e.GLOBAL="GLOBAL",e.GCC_MODERATE="GCC_MODERATE"}(i||(i={}));const r="d7b530a4-7680-4c23-a8bf-c52c121d2e87",o="https://enterprisenews.microsoft.com",a="EnterpriseOneService",s=87},26974:function(e,t,n){"use strict";var i;function r(e){switch(e){case i.prod:case i.staging:return i.prod;case i.int1:return i.int1;case i.int:case i.intpr:case i.intperf:return i.int;default:return null}}n.d(t,{q:function(){return i},s:function(){return r}}),function(e){e.prod="prod",e.staging="staging",e.int1="int1",e.int="int",e.intpr="intPR",e.intperf="intPerf"}(i||(i={}))},92908:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});class i{static get UpsellGamerMode(){return i.upsellGamerMode}static set UpsellGamerMode(e){i.upsellGamerMode=e}}},45506:function(e,t,n){"use strict";n.d(t,{nP:function(){return k},Al:function(){return P}});var i=n(81765),r=n(12108),o=n(27003),a=n(99590),s=n(12884),c=n(33379),d=n(10877),l=n(68848),u=n(26007),p=n(987),h=n(20424),g=n(81428),m=n(98304),f=n(33954),v=n(53525);function y(e){return"shd_"+e}var S=n(1038),C=n(95527),b=n(65135);const w="__HeadDataInstance__";class T{constructor(e){this.enableCMSPPEConfigs=!1,this.initializeHeadData(e)}get Locale(){return this.locale}get MarketDir(){return this.marketDir}set MarketDir(e){this.marketDir=e}get CurrentFlights(){return this.currentFlights||""}set CurrentFlights(e){this.currentFlights=e,this.currentFlightSet=new Set((e||"").split(",")),this.setSweeperStoredHeadData(i.il.FlightIdKey,this.currentFlights)}get CurrentFlightSet(){return this.currentFlightSet}get ClientSettings(){return this.clientSettings}set ClientSettings(e){this.clientSettings=e}get Diagnostics(){return this.diagnostics}set Diagnostics(e){this.diagnostics=e}get EnableCMSPPEConfigs(){return this.enableCMSPPEConfigs}get EdgeNTPHeader(){return this.edgeNTPHeader}set EdgeNTPHeader(e){this.edgeNTPHeader=e}get UserIsSignedIn(){return this.userIsSignedIn}get IsPreload(){return this.isPreload}set IsPreload(e){this.isPreload=e}get IsPrerender(){return this.isPrerender}set IsPrerender(e){this.isPrerender=e}get IsBlendedEnterprise(){return this.isBlendedEnterprise}set IsBlendedEnterprise(e){this.isBlendedEnterprise=e}get IsMmxWwwContentRequest(){return this.isMmxWwwContentRequest}set IsMmxWwwContentRequest(e){this.isMmxWwwContentRequest=e}get IsServiceWorkerCache(){return this.isServiceWorkerCache}get LastKnownAppVersion(){return this.lastKnownAppVersion}get AnonCookieName(){return this.anonCookieName}set AnonCookieName(e){this.anonCookieName=e}get SsoComplete(){return this.ssoComplete}get AadState(){return this.aadState}set AadState(e){this.aadState=e}set LocaleName(e){this.locale=e}get SelectedFeedPivot(){return this.selectedFeedPivot}set SelectedFeedPivot(e){this.selectedFeedPivot=e}get LastSelectedPivot(){return this.lastSelectedPivot}set LastSelectedPivot(e){this.lastSelectedPivot=e}get SwitchedPivot(){return this.switchedPivot}set SwitchedPivot(e){this.switchedPivot=e}static getInstance(){return o.Gq.get(w,(()=>new T))}static resetInstance(e){const t=new T(e);return o.Gq.set(w,t),P=(0,a.h)(T),P}initializeHeadData(e){if(e)return void this.initializeFromData(e);if(this.newRidNeeded=void 0,this.lastUsedActivityIdBacking=void 0,this.locationSearch=(0,s.zp)(),this.htmlElement=(0,c.N)()?(0,s.SV)(d.x$.html)[0]:null,this.headElement=(0,c.N)()?(0,s.SV)(d.x$.head)[0]:null,this.applicationCache=(0,c.N)()?window.applicationCache:null,this.selectedFeedPivot=(0,c.N)()?(0,p.$o)().getItem(d.pv):null,this.widgetSettingsElement=(0,c.N)()?(0,s.ZI)(C.fw)[0]:null,!this.htmlElement||!this.headElement)return;this.initializeFromDom(),window&&window.navigator&&window.navigator.serviceWorker&&window.navigator.serviceWorker.controller&&(this.isServiceWorkerCache=!0),this.isServiceWorkerCache&&(this.initializeFromStorage(),this.initializeLastUsedActivityId());const t=(0,l.H)(this.clientSettings&&this.clientSettings.locale),n=this.clientSettings&&t&&t.language&&t.market;this.locale=n?(0,l.p)(t):"";const i=this.htmlElement.getAttribute(d.cp);this.marketDir=i&&i.toLocaleLowerCase()||"",this.setQueryItemProvidedValues();const r=(this.widgetSettingsElement||this.headElement).getAttribute(d.js);if(r){const e=(0,g.dW)(r);this.anonCookieName=e.anonckname,this.userIsSignedIn=1===e.signedin}u.c.getQueryParameterByName("backgroundpreload",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPreload=!0,this.logDocumentVisibility()),u.c.getQueryParameterByName("prerender",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPrerender=!0,this.logDocumentVisibility()),(0,c.N)()&&window.ShellFeedsApp&&window.ShellFeedsApp.shellFeedsExperienceInfo&&!window.ShellFeedsApp.shellFeedsExperienceInfo.isWebviewVisible&&0===window.ShellFeedsApp.shellFeedsExperienceInfo.buttonInteraction&&(this.isPreload=!0),this.setIsBlendedEnterprise(),this.setIsMmxWwwContentRequest()}get lastUsedActivityId(){if(this.lastUsedActivityIdBacking)return this.lastUsedActivityIdBacking;const e=this.getStoredActivityIdKey(),t=(0,p.$o)().getItem(e);return t&&(this.lastUsedActivityIdBacking=(0,g.dW)(t)),this.lastUsedActivityIdBacking}set lastUsedActivityId(e){const t=this.getStoredActivityIdKey();if(e){if(e.id&&e.ts){try{(0,p.$o)().setItem(t,JSON.stringify(e),!1)}catch(e){const t=e&&e.message;(0,b.dK)().then((()=>{b.M0.sendAppErrorEvent(Object.assign(Object.assign({},m.dw4),{message:t}))}))}this.lastUsedActivityIdBacking=e}}else(0,p.$o)().removeItem(t)}get storedHeadData(){return function(e){const t=y(e),n=(0,p.$o)().getItem(t);return n?(0,g.dW)(n):null}(this.clientSettings.pagetype)}set storedHeadData(e){!function(e,t){const n=y(e);t?(0,p.$o)().setItem(n,JSON.stringify(t)):(0,p.$o)().removeItem(n)}(this.clientSettings.pagetype,e)}initializeFromData(e){var t,n;this.clientSettings=e.clientSettings,this.edgeNTPHeader=e.edgeNTPHeader,this.selectedFeedPivot=null===(t=e.edgeNTPHeader)||void 0===t?void 0:t.selectedFeedPivot,this.setFlights(e.clientInfo),this.setQueryItemProvidedValues();const i=(0,l.H)(this.clientSettings&&(null===(n=this.clientSettings)||void 0===n?void 0:n.locale)),r=this.clientSettings&&i&&i.language&&i.market;this.locale=r?(0,l.p)(i):"",this.marketDir=e.marketDir&&e.marketDir.toLocaleLowerCase()||"",this.setIsBlendedEnterprise(),this.setIsMmxWwwContentRequest()}initializeFromDom(){this.setFlights((this.widgetSettingsElement||this.headElement).getAttribute(d.um));const e=(this.widgetSettingsElement||this.headElement).getAttribute(d.IX);this.diagnostics=(0,g.dW)(e);const t=(this.widgetSettingsElement||this.headElement).getAttribute(d.nr);if(!t)return;if(this.clientSettings=(0,g.dW)(t),!this.clientSettings)return;this.calculateForwardableParams();const{pagetype:n}=this.clientSettings;if(!n){const e=(this.widgetSettingsElement||this.headElement).getAttribute(d.AU);this.clientSettings.pagetype=null==e?void 0:e}if(n)try{const e=(0,p.$o)().getObject(d.It.pageVersions)||{};this.lastKnownAppVersion=e[n];const{bundleInfo:t}=this.clientSettings;t&&this.lastKnownAppVersion!==t.v&&(e[n]=t.v,(0,p.$o)().setObject(d.It.pageVersions,e))}catch(e){f.k.log(`${this.logPrefix()} couldn't complete local storage related operation.`)}}initializeFromStorage(){const e=this.storedHeadData;e&&this.populateFromApiResponse(e)}populateFromApiResponse(e){if(!e)return;const t=e.clientSettings,n=e.info;if(!t||!n)return;if(this.clientSettings.pageGenTime>=t.pageGenTime)return void(this.storedHeadData=null);const i=this.clientSettings.queryparams,r=this.clientSettings&&this.clientSettings.bundleInfo&&this.clientSettings.bundleInfo.v;this.clientSettings=t,this.clientSettings.bundleInfo=Object.assign(this.clientSettings.bundleInfo||{},{v:r}),this.clientSettings.queryparams=i,this.calculateForwardableParams(),this.setFlights(n)}calculateForwardableParams(){const e=this.clientSettings?this.clientSettings.queryparams:"";if(!e)return;const t=e.toLocaleLowerCase(),n=["fdhead","item"].map((e=>{const n=u.c.getQueryParameterByName(e,t);return n?`${e}=${encodeURIComponent(n)}`:null})).filter((e=>e));this.clientSettings.forwardablequeryparams=n.join("&")}initializeLastUsedActivityId(){const e=this.lastUsedActivityId,t=this.clientSettings.aid,n=(0,v.Z)(this.clientSettings.pageGenTime).getTime();this.newRidNeeded=!(!e||!n||e.id!==t),n&&(!e||n>e.ts)&&(this.lastUsedActivityId={id:t,ts:n})}setFlights(e){this.CurrentFlights=((/f:\s*([^;]+)/i.exec(e)||{})[1]||"").toLowerCase(),this.currentFlightSet=new Set(this.currentFlights.split(","))}setSweeperStoredHeadData(e,t){if(!e)return;const n=y("sweeper"),i=h.y7.getObject(n)||{};t?i[e]=t:delete i[e],h.y7.setObject(n,i)}setIsBlendedEnterprise(){this.IsBlendedEnterprise=this.clientSettings&&this.clientSettings.audienceMode===r.F.Enterprise&&this.clientSettings.browser&&"edgeChromium"===this.clientSettings.browser.browserType&&parseInt(this.clientSettings.browser.version)>=S.oD}setIsMmxWwwContentRequest(){this.isMmxWwwContentRequest=this.currentFlights&&this.currentFlights.includes("prg-mmxcontent-t")}setQueryItemProvidedValues(){const e=u.c.getParamsWithItems((0,s.zp)(),!0),t=e.find((e=>"cms"===e.key));this.enableCMSPPEConfigs=t&&"ppe"===t.value,this.setCurrentFlightsTestOverride(e)}setCurrentFlightsTestOverride(e){if((0,s.Td)().toLowerCase().includes("localhost")&&e){const t=e.find((e=>"flights"===e.key));t&&(this.currentFlights=t.value,this.currentFlightSet=new Set(this.currentFlights.split(",")))}}getStoredActivityIdKey(){return"sai_"+this.clientSettings.pagetype}logPrefix(){return"HeadData:"+((0,c.N)()?"":` [Head:${this.widgetSettingsElement||this.headElement}] and [Html:${this.htmlElement}]`)}logDocumentVisibility(){(0,c.N)()&&((0,m.GQ)({isVisible:"visible"===document.visibilityState}),document.addEventListener("visibilitychange",(()=>{(0,m.GQ)({isVisible:"visible"===document.visibilityState})})))}}const k=T.getInstance;let P=(0,a.h)(T)},36768:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var i,r=n(10877);!function(e){e.getHostPageFromUrl=function(e){if(!e)return;const t=new URL(e),n=t.hostname,i=t.pathname.split("/"),o=(n.match(/[^.]+\.[^.\d]+$/)||{})[0]||"";if(i.length<=r.Qw)return{originalUrl:e,categoryKey:null,verticalKey:null,hostName:n,topDomain:o};const a=5===i[1].length&&2===i[1].split("-").length?1:0,s={originalUrl:e,categoryKey:i[2+a],verticalKey:i[1+a],hostName:n,topDomain:o};return i.length>=r.Qw&&(s.subcategoryKey=i[3+a]),s}}(i||(i={}))},17612:function(e,t,n){"use strict";var i;n.d(t,{IY:function(){return i}}),function(e){e.BR="pt-br",e.DEDE="de-de",e.ENAU="en-au",e.ENCA="en-ca",e.ENGB="en-gb",e.ENIN="en-in",e.ENUS="en-us",e.ENIE="en-ie",e.ESES="es-es",e.ESMX="es-mx",e.FRCA="fr-ca",e.FRFR="fr-fr",e.ITIT="it-it",e.IN="en-in",e.HUHU="hu-hu",e.KOKR="ko-kr",e.JAJP="ja-jp",e.PLPL="pl-pl",e.PTBR="pt-br",e.RURU="ru-ru",e.RUXL="ru-xl",e.ZHCN="zh-cn"}(i||(i={}))},27583:function(e,t,n){"use strict";n.d(t,{P8:function(){return A},TJ:function(){return M},_K:function(){return L},aS:function(){return D},hk:function(){return x},iG:function(){return E},lT:function(){return I},me:function(){return R},qn:function(){return k},tx:function(){return F},yd:function(){return U}});var i=n(95527),r=n(12108),o=n(9210),a=n(48328),s=n(10877),c=n(64084),d=n(1329),l=n(33379),u=n(12884),p=n(41651),h=n(96154),g=n(49945),m=n(76754),f=n(33954),v=n(76323);const y=(0,a.Qe)()||{},S={newsAndInterests:1,windowsNewsbar:1,windowsNewsPlus:1,winWidgets:1,windowsShell:1,windowsShellV2:1,distribution:1,superApp:1,channel:1},C={edgeChromium:1},b={winWidgets:1},w={shopping:1},T=(0,v.p)((()=>y&&y.apptype)),k=(0,v.p)((()=>(0,l.N)()&&T()in b)),P=(0,v.p)((()=>(0,l.N)()&&!(0,m.pE)()&&!(T()in S)&&!M()&&!O())),A=(0,v.p)((()=>P()&&!(T()in C))),I=((0,v.p)((()=>P()&&(!(T()in C)||!(0,d.mb)()))),(0,v.p)((()=>P()&&!B()&&!N())));function E(){return!!(0,h.AE)(s.Li)}function x(){return N()||B()}const M=(0,v.p)((()=>"edgeChromium"!==T()&&!(T()in w)&&function(){const{browser:e}=y,{browserType:t=""}=e||{};return!!/edgeChromium/i.test(t)}()&&function(){const e=new URLSearchParams((0,u.zp)()).get("ocid")||(null==y?void 0:y.ocid),t=null==e?void 0:e.toLowerCase();return!s.Oj.has(t)&&"homePage"!==T()&&!s.up.has(t)}()&&!("windows"==T()&&(y&&y.pagetype)==r.G.Windows&&(0,u.l4)().includes(`${o.lU}`)))),O=()=>(0,l.N)()&&document&&document.body&&document.body.getElementsByClassName(i.Di).length>0,L=(0,v.p)((()=>(0,g.Nv)("prg-1s-workid")));function D(){const e=(0,c.nh)();if(e)return f.k.log("dual-auth: tryGet1SAuthToken returned live tokens"),e;const t=(0,c.Wl)();if(t)return f.k.log(`dual-auth: tryGet1SAuthToken returned cached tokens that are ${(0,c.wX)()}`),t;f.k.log("dual-auth: tryGet1SAuthToken returned empty tokens")}function R(e){const t={};return e&&(t[s.Yu.authorization]=`Bearer ${e}`),t}function F(e){const t={};return e&&(t[s.Yu.entAuthorization]=e),t}function B(){return A()&&(0,p.YU)()||A()&&!(0,p.YU)()&&(0,d.x6)()&&("expired"==(0,c.wX)()||(0,p.hU)())||(0,p.SY)()||(0,p.jG)()}function N(){return A()&&!(0,d.x6)()&&(0,p.KK)()}function U(){(0,d.$v)(),A.cache.clear()}},64084:function(e,t,n){"use strict";n.d(t,{Wl:function(){return p},nh:function(){return f},tx:function(){return m},wX:function(){return h}});var i=n(33799),r=n(1329),o=n(987),a=n(49945);const s="1s-tokens",c=12096e5;var d;let l,u;function p(){return l=g(),l&&l.accessToken?l:void 0}function h(){if(l=g(),!l)return"notAvailable";const e=l.expiresOn,t=new Date(e),n="expired";if(!t.getTime())return n;const o=new Date,s="valid";if(t>o)return s;if((0,a.Nv)("prg-noext"))return n;{const e=(0,r.x6)();if(e&&e.account_type===i.Qm.MSA){if(new Date(t.getTime()+c)>o)return s}}return n}function g(){return l=l||void 0===l&&(0,o.$o)().getObject(s)||null,l}function m(e){l=void 0,u=e;const{accessToken:t,expiresOn:n}=e||{};t&&n?(0,o.$o)().setObject(s,{accessToken:t,expiresOn:n}):(0,o.$o)().removeItem(s)}function f(){return u}!function(e){e.NotAvailable="notAvailable",e.Expired="expired",e.Valid="valid"}(d||(d={}))},1329:function(e,t,n){"use strict";n.d(t,{$v:function(){return l},ac:function(){return s},mb:function(){return d},sM:function(){return a},x6:function(){return c}});var i=n(96154),r=n(76323),o=n(81428);const a="currentaccount",s=365,c=(0,r.p)((()=>{const e=(0,i.AE)(a,!0),t=e&&(0,o.dW)(e),{login_hint:n}=t||{};return n&&t})),d=(0,r.p)((()=>!!(0,i.AE)(a)));function l(){d.cache.clear(),c.cache.clear()}},68354:function(e,t,n){"use strict";n.d(t,{KO:function(){return p},XS:function(){return u},g8:function(){return l}});var i=n(33799),r=n(83097),o=n(96154),a=n(81428);const s=()=>{const e=(()=>{const e=(0,o.AE)("els",!0),t=e&&(0,a.dW)(e);return t&&Object.prototype.hasOwnProperty.call(t,"account_type")&&t})();if(e){if("MSA"===e.account_type)return i.Qm.MSA;if("AAD"===e.account_type)return i.Qm.AAD}};var c=n(83977),d=n(76323);const l="lt",u=(0,d.p)((()=>{let e,t;return(0,c.vs)()?(e=i.Hy.SignedIn,t=(0,c.Yn)()):(0,o.AE)("els")?(t=s(),e=t?i.Hy.SignedIn:i.Hy.NotSignedIn):(0,o.AE)(l)||(0,o.AE)(r.IR.AppAnonCookieExists)?(t=i.Qm.MSA,e=i.Hy.SignedIn):e=i.Hy.NotSignedIn,{isSignedIn:e,accountType:t}}));function p(){u.cache.clear()}},83977:function(e,t,n){"use strict";n.d(t,{E1:function(){return c},Rn:function(){return a},Yn:function(){return s},vs:function(){return d}});var i=n(33799),r=n(96154),o=n(81428);const a=()=>{const e=(0,r.AE)("elt",!0),t=e&&(0,o.dW)(e),{access_token:n,account_type:i,login_hint:a}=t||{};return(n||i||a)&&t},s=()=>{const e=a();if(e){if("MSA"===e.account_type)return i.Qm.MSA;if("AAD"===e.account_type)return i.Qm.AAD}},c=()=>{const e=a();return e&&e.login_hint},d=()=>!!(0,r.AE)("elt")},49945:function(e,t,n){"use strict";n.d(t,{Nv:function(){return s}});var i=n(27003),r=n(33379);const o="__PageExperimentInstance__";function a(e){i.Gq.set(o,e)}function s(e){var t,n;if(!i.Gq.has(o)&&(0,r.N)()){a(c(document.head.dataset.info||(null===(n=null===(t=window.document.getElementsByClassName("peregrine-widget-settings")[0])||void 0===t?void 0:t.dataset)||void 0===n?void 0:n.info)||""))}const s=i.Gq.get(o);return s&&s.has(e)}function c(e){const t=(e||"").replace(/(^f:|;.*$)/g,"").split(",");return new Set(t)}},247:function(e,t,n){"use strict";n.d(t,{A:function(){return s},m:function(){return a}});var i=n(33799);class r{constructor(){this._signInState=i.Hy.Unknown,this.initOverrides=()=>{}}getSignInState(){return this._signInState}setSignInState(e){this._signInState=e}useEnterpriseCompliance(){return!1}}r._instance=new r;let o=r._instance;function a(e){if(o!==r._instance||!e)return o;e()}function s(e){o=e}},61285:function(e,t,n){"use strict";n.d(t,{E:function(){return a},M:function(){return i}});var i,r=n(27583),o=n(76323);!function(e){e.App="app",e.EdgeId="edgeid",e.Web="web"}(i||(i={}));const a=(0,o.p)((()=>(0,r.TJ)()?i.EdgeId:(0,r.P8)()?i.Web:i.App))},85305:function(e,t,n){"use strict";n.d(t,{EX:function(){return h},YY:function(){return p},u6:function(){return l}});var i=n(10877),r=n(56692),o=n(31573),a=n(96154),s=n(76323),c=n(81428),d=n(67462);function l(e){const t=e||(0,o.g8)()||"al_app_anon",n=u();return!!(n&&(["anon","al_anon"].includes(t)&&n.AL_ANON||["app_anon","al_app_anon"].includes(t)&&n.AL_APP_ANON))}const u=(0,s.p)((()=>{const e=(0,a.AE)(i.tX,!0);return(0,c.dW)(e)}));function p(){(0,d.sq)(i.tX,"",-1,r.jG.HostPage.topDomain,"/"),h()}function h(){u.cache.clear()}},41651:function(e,t,n){"use strict";n.d(t,{KK:function(){return w},SY:function(){return m},YU:function(){return h},bf:function(){return f},bq:function(){return y},dy:function(){return g},hU:function(){return v},hq:function(){return C},jG:function(){return S},m5:function(){return b}});var i=n(13971),r=n(33379),o=n(49945),a=n(76323),s=n(81428);const c="uxlogin",d="uxlogout",l="uxedit",u="useRedirect",p="uxswitch",h=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(c)||(0,r.N)()&&location.search&&location.search.includes("uxlogin=1")}));function g(){const e=(0,i.U)();e&&h()&&(e.removeItem(c),h.cache.clear())}const m=(0,a.p)((()=>{const e=(0,i.N)();return e&&!!e.getItem(d)}));function f(){const e=(0,i.N)();e&&m()&&(e.removeItem(d),m.cache.clear())}const v=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(l)}));function y(){const e=(0,i.U)();e&&v()&&(e.removeItem(l),v.cache.clear())}const S=(0,a.p)((()=>{const e=(0,i.U)();return!(0,o.Nv)("prg-noredirect")&&e&&"1"===e.getItem(u)&&function(){const e=document.head.dataset.clientSettings||"",{browser:t}=(0,s.dW)(e)||{},{browserType:n=""}=t||{};return!!/safari/i.test(n)}()}));function C(){const e=(0,i.U)();e&&"1"===e.getItem(u)&&(e.removeItem(u),S.cache.clear())}function b(){const e=(0,i.U)();e&&e.setItem(u,"1"),S.cache.clear()}const w=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(p)}))},10877:function(e,t,n){"use strict";n.d(t,{AU:function(){return s},Cd:function(){return q},DB:function(){return p},Eo:function(){return N},IX:function(){return a},Ib:function(){return H},It:function(){return R},JJ:function(){return I},Ji:function(){return f},Kj:function(){return _},Kz:function(){return g},Li:function(){return y},Ny:function(){return k},Oj:function(){return K},Qw:function(){return m},Rn:function(){return j},V3:function(){return A},X8:function(){return u},Xs:function(){return i},YH:function(){return E},Yu:function(){return M},Z7:function(){return U},cp:function(){return l},cs:function(){return S},gb:function(){return x},j2:function(){return G},js:function(){return d},m$:function(){return v},nM:function(){return C},nr:function(){return o},og:function(){return T},pv:function(){return $},rD:function(){return O},rq:function(){return V},tX:function(){return b},uD:function(){return z},um:function(){return c},up:function(){return Q},uw:function(){return h},wG:function(){return P},x$:function(){return r},xG:function(){return W},yz:function(){return w}});const i="msnewsroot",r={html:"html",head:"head",body:"body"},o="data-client-settings",a="data-diagnostics",s="data-pagetype",c="data-info",d="data-js",l="dir",u="data-service-url",p="data-telemetry-id",h="data-page-product",g="data-page-type",m=2,f="APP_ANON",v="aace",y="ace",S="OSATE",C="child",b="AL_STATE",w="WID",T="APP_WID",k="nurturingAccepted",P="search-history-enabled",A="split-screen",I="left-rail-enabled",E="brand-zone-ads",x="no-search-history-expected-auth",M={activityId:"x-client-activityid",adsReferer:"ads-referer",authorization:"Authorization",entAuthorization:"Ent-Authorization",muid:"MUID",rpsToken:"UserAuthToken",taboolaSessionId:"taboola-sessionId",xboxToken:"s-xbox-token",traceParent:"traceparent"},O={traceId:"ddd-activityid",debugId:"ddd-debugid",userType:"ddd-usertype",isStatic:"X-Statics-Fallback"};var L,D;!function(e){e.Presentation="presentation"}(L||(L={})),function(e){e.Unknown="Unknown",e.Portrait="Portrait",e.Landscape="Landscape"}(D||(D={}));const R={pageVersions:"pageVersions"},F={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default"}},B={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default",sharedNs:"msn-ns"}},N=e=>{let t;switch(e){case"default":t=F;break;case"shared":t=B;break;default:t=void 0}return t},U="https://microsoftnews.msn.com/",$="selectedPivot",_="switchedPivot",H="pivotSelectionSource",W="userType",j="v3",G="ChannelCoachMarkTimestamp",V="ChannelCoachMarkShowTimes";var q,z;!function(e){e[e.Undefined=0]="Undefined",e[e.Basic=1]="Basic",e[e.Advanced=2]="Advanced",e[e.Premium=3]="Premium"}(q||(q={})),function(e){e.Init="init",e.Config="config",e.Targeted="targeted",e.Sticky="sticky",e.NoSticky="no_sticky",e.Admin="admin",e.Forced="forced",e.Manual="manual"}(z||(z={}));new Set(["winp0dash","winp1taskbar","winp1taskbarent","winp1taskbardirect","winp1taskbardirectent","winp1taskbarent","winp2juntaskbar","winp2juntaskbarent","winp2","winp2ent","winp2fp","winp2fpent","winp2fptaskbar","winp2fptaskbarent","winp2fptaskbarhover","winp2fptaskbarhoverent","winp2widget","winp2widgetent"]);const Q=new Set(["finance-app-win","weather-app-win","winpstoreapp"]);new Set(["msedgdhp","msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]);var Z;!function(e){e.outlookMobile="OnOOutlookMobile",e.officeMobile="OnOOfficeMobile",e.sapphire="OnOStartApp",e.skype="OnOSkype"}(Z||(Z={}));const K=new Set(["hpmsn"]);new Set(["emmx","vivo"])},55755:function(e,t,n){"use strict";n.d(t,{L:function(){return a}});var i=n(33379),r=n(73713);let o;function a(){return o||(o=new URLSearchParams(null===window||void 0===window?void 0:window.location.search)),o}(0,i.N)()||(0,r.U)((()=>{o=null}))},31177:function(e,t,n){"use strict";n.d(t,{qn:function(){return o},rh:function(){return r}});var i=n(33940);function r(e){return new Promise((t=>setTimeout(t,e)))}const o=(e,t,n)=>(0,i.mG)(void 0,void 0,void 0,(function*(){if(!t||isNaN(e))return;if(!e&&0!==e||e<0||e===1/0)return yield t;const i=(e=>{let t,n=()=>{},i=()=>!1;const r=new Promise(((r,o)=>{n=()=>{t&&(clearTimeout(t),t=null,o())},i=()=>null!==t,t=setTimeout((()=>{t=null,r()}),e)}));return{cancel:n,isActive:i,promise:r}})(e),r=yield Promise.race([t,i.promise]);return i.isActive()?i.cancel():n&&n(),r}))},32005:function(e,t,n){"use strict";n.d(t,{Sm:function(){return k},br:function(){return A},cb:function(){return P}});var i=n(33940),r=n(33379),o=n(2140);function a(e){const t=(0,o.s)();return function(n,i){if(i||(i={}),!s(i,"Referer")){const e="string"==typeof n?n:n.url;!function(e,t,n,i){const r=(d[i]||d[c])(e,t);if(delete n.referrerPolicy,!r)return;n.headers=n.headers||{},n.headers.Referer=r}(t.url,e,i,i.referrerPolicy)}return s(i,"User-Agent")||function(e,t){e.headers=e.headers||{},e.headers["User-Agent"]=`${t} (via node-fetch)`}(i,t.userAgent),e(n,i)}}function s(e,t){return e.headers&&void 0!==e.headers[t]}const c="strict-origin-when-cross-origin",d={"no-referrer":(e,t)=>{},"no-referrer-when-downgrade":(e,t)=>l(e,t)?void 0:e.href,origin:(e,t)=>e.origin+"/","origin-when-cross-origin":(e,t)=>u(e,t)?e.href:e.origin+"/","same-origin":(e,t)=>u(e,t)?e.href:void 0,"strict-origin":(e,t)=>l(e,t)?void 0:e.origin+"/","strict-origin-when-cross-origin":(e,t)=>u(e,t)?e.href:d["strict-origin"](e,t),"unsafe-url":(e,t)=>e.href};function l(e,t){return"https:"===e.protocol&&t.startsWith("http:")}function u(e,t){return t.startsWith(e.origin+"/")}n(73040);var p=n(91898),h=n(98878),g=n(26007);function m(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=yield h.o.get(e);return n?Promise.resolve(n):t(e).then((e=>e.blob())).then((e=>e.text())).then((t=>(h.o.set(e,t),t)))}))}function f(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(e&&t&&n))return Promise.resolve();yield h.o.set(`${e}-${t}-${n}`,r)}))}const v="https://peregrinebaselines.blob.core.windows.net/baselines";function y(e,t,n,r,o,a){var s;return(0,i.mG)(this,void 0,void 0,(function*(){const c=yield m(`${v}/${t}`,a);let d;try{d=JSON.parse(c)}catch(e){return o()}const l=null===(s=null==d?void 0:d.interceptions)||void 0===s?void 0:s.find((({urlPattern:t})=>g.c.urlPatternToRegExp(t).test(e))),u=null==l?void 0:l.interceptionsHash,y=null==l?void 0:l.urlPattern;if(u){const e=`${d.fileNamePrefix}-interceptions-${u}.json`,t=yield m(`${v}/${e}`,a),o=JSON.parse(t),s=yield function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(e&&t&&n))return Promise.resolve(void 0);const i=`${e}-${t}-${n}`,r=yield h.o.get(i);return Promise.resolve(r)}))}(r,y,n);o[n]&&void 0!==o[n].Times&&void 0===s&&(yield f(r,y,n,o[n].Times-1));const c=o&&0!==s?o[n]:null;if(s>0)yield f(r,y,n,s-1);else if(0===s)return null;return new p.Response(null==c?void 0:c.Body,{status:null==c?void 0:c.Status,headers:null==c?void 0:c.Headers,statusText:"OK"})}return o()}))}var S=n(33954);let C,b,w;class T{constructor(){"undefined"!=typeof AbortController&&(this.controller=new AbortController)}abort(){return!!this.controller&&(this.controller.abort(),!0)}setAbortSignal(e){this.controller&&(e.signal=this.controller.signal)}}function k(e,t,n,a,s,c,d=!1){var l;return(0,i.mG)(this,void 0,void 0,(function*(){s||(s=fetch);const u=()=>function(e,t,n,o,a,s,c=!1){return(0,i.mG)(this,void 0,void 0,(function*(){a||(a=fetch),o||(o=new T),(0,r.N)()&&(s=!1);let i=null,d=null;if(void 0===t?t=w:w>0&&(t=Math.min(t,w)),t>0&&(i=1e4,i=setTimeout((()=>{d=setTimeout((()=>{if(!o.abort())throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms. AbortController is not supported.`)}),0)}),t)),n||(n={method:"GET"}),!(0,r.N)()&&!n.agent&&C&&b){const e=function(e){return"http:"===e.protocol?C:b};n.agent=e}(0,r.N)()||n.headers&&n.headers.Connection||(n.headers=new Headers(n.headers),n.headers.set("Connection","keep-alive")),n.signal||o.setAbortSignal(n);const l=performance.now();let u,p=0;const h={};let g;const m=()=>{if(!(0,r.N)()){const n={abortableFetch:{url:e,statusCode:p,timestamp:(new Date).toISOString(),timeElapsed:(performance.now()-l).toFixed(2),timeOut:t.toFixed(2),oneWebServiceLatency:g,errorMessage:u&&u.message,errorName:u&&u.name,errorCode:u&&u.code,errorType:u&&u.type,cluster:h.cluster,dddDebugId:h.dddDebugId,wpoId:h.wpoId,afd:h.afd}};c||S.k.logSingleObject(n,!0)}i&&clearTimeout(i),d&&clearTimeout(d)};return a(e,n).then((e=>{var t,n,i;return p=e.status,g=null===(t=e.headers)||void 0===t?void 0:t.get("onewebservicelatency"),s&&(h.cluster=e.headers.get("x-fabric-cluster")||(null===(i=null===(n=e.headers.get("ddd-debugid"))||void 0===n?void 0:n.split("|"))||void 0===i?void 0:i[3]),h.afd=e.headers.get("x-msedge-ref"),h.dddDebugId=e.headers.get("ddd-debugid"),h.wpoId=e.headers.get("x-wpo-activityid")),e})).catch((n=>{if(u=n,"AbortError"===n.name)throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms.`);throw new Error(n)})).then((e=>(m(),e)),(e=>{throw m(),e}))}))}(e,t,n,a,s,c,d);if((0,r.N)())return u();const p=(0,o.s)(),h=null===(l=null==p?void 0:p.url)||void 0===l?void 0:l.searchParams,g=null==h?void 0:h.get("interceptions-config-file"),m=null==h?void 0:h.get("ssrTimestamp");return!(!g||!(null==n?void 0:n.method))?y(e,g,n.method,m,u,s):u()}))}function P(){return{abortToken:null,timeoutMs:900,fetchImpl:a(fetch)}}function A(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){return n||(n=P()),k(e,n.timeoutMs,t,n.abortToken,n.fetchImpl,n.trackApiClusterInServer)}))}},96154:function(e,t,n){"use strict";n.d(t,{AE:function(){return o}});var i=n(81428);let r;function o(e,t){if(!e)return null;if(t)return function(e){var t;const n=null===(t=document.cookie)||void 0===t?void 0:t.match(`\\b${e}=([^;]*)`);return n?(0,i.fB)(n[1]):null}(e);if(!r){const e="undefined"!=typeof document&&document.cookie.split("; ");r={};const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n].indexOf("=");r[e[n].slice(0,t).toLocaleLowerCase()]=(0,i.fB)(e[n].slice(t+1))}}const n=e.toLocaleLowerCase();return r[n]||null}},81818:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var i=n(45506),r=n(56692);function o(){const e=i.Al&&i.Al.Diagnostics||{},t=i.Al&&i.Al.ClientSettings,{mc:n={}}=e||{},{pageGenTime:o="",geo_citycf:a="",geo_countrycf:s=""}=t||{},c={refs:{refA:r.jG.ActivityIdLowerCaseNoHypens||"",refC:o},cookies:n,geoConfidence:{cityConfidence:a,countryConfidence:s},langMismatch:r.jG.MarketMismatchDetail};return JSON.stringify(c)}},28970:function(e,t,n){"use strict";n.d(t,{N6:function(){return s},j3:function(){return a}});var i=n(27003);const r=()=>i.Gq.get("__core_DisplayModeCoordination_displayModeMap__",(()=>({}))),o=()=>i.Gq.get("__core_DisplayModeCoordination_callbackMap__",(()=>({})));function a(e,t){const n=r();if(n[e]===t)return;n[e]=t;const i=o()[e];if(i)for(const e of i)e(t)}function s(e,t){const n=o(),i=r();let a=n[e];a||(a=[],n[e]=a),a.push(t);const s=i[e];s&&t(s)}},10618:function(e,t,n){"use strict";function i(e){return!(e&&e.length)}n.d(t,{x:function(){return i}})},55607:function(e,t,n){"use strict";n.d(t,{Xw:function(){return c},Z3:function(){return l},h_:function(){return u},nF:function(){return p},rP:function(){return d}});var i=n(9210),r=n(26007),o=n(56692),a=n(12884);const s=/\{localeCode\}|\{0\}/;function c(e,t){const n=r.c.encodeURIComponentForPrime(t).toLowerCase(),{HostPage:i}=o.jG;if(i){const t=new URL(i.originalUrl);return t.origin+"/"+i.verticalKey+"/"+i.categoryKey+"/interests/"+n+"/"+o.jG.CurrentMarket+"/f-"+e+t.search}return"https://www.msn.com"}function d(){return`${o.jG.NavTargetUrlWithLocale}/${i.lU}`}function l(e=i.UH){return`${o.jG.NavTargetUrlWithLocale}/${e}`}function u(e){return e&&(e=e.replace("{hostName}",o.jG.NavTargetHostName).replace(s,o.jG.CurrentMarket)),e}function p(e){if(!e)return;const{Environment:t,EnvInstanceOverride:n}=o.jG;n===t&&(e.host=(0,a.zw)(),e.searchParams.set("instance",n))}},13971:function(e,t,n){"use strict";function i(){try{return localStorage}catch(e){return null}}function r(){try{return sessionStorage}catch(e){return null}}n.d(t,{N:function(){return r},U:function(){return i}})},76754:function(e,t,n){"use strict";n.d(t,{H2:function(){return p},Ko:function(){return y},Rz:function(){return g},_3:function(){return m},pE:function(){return S},tr:function(){return u},wq:function(){return f},xs:function(){return h}});var i,r=n(33379),o=n(76323);!function(e){e.outlookMobile="OnOOutlookMobile",e.officeMobile="OnOOfficeMobile",e.sapphire="OnOStartApp",e.skype="OnOSkype",e.winWeatherApp="weather-app-win",e.winMoneyApp="finance-app-win"}(i||(i={}));const a=["ios","android","ipados"];let s=C("ocid").toLowerCase(),c=C("chpltfm"),[d,l]=c.toLowerCase().split("-");function u(){if(!(0,r.N)())return!1;const e=window.sapphireWebViewBridge,t=window.webkit,n=e&&e.send,i=t&&t.messageHandlers&&t.messageHandlers.send&&t.messageHandlers.send.postMessage;return!(!n&&!i)}function p(){const e=c&&"outlook"===d&&a.includes(l),t=s===i.outlookMobile.toLowerCase();return e||t}function h(){const e=c&&["office","union"].includes(d)&&a.includes(l),t=s===i.officeMobile.toLowerCase();return e||t}function g(){return p()||h()}function m(){const e=s===i.skype.toLowerCase()||"skype"===d;return(0,r.N)()&&(null===(t=window.skypeWebviewBridge)||void 0===t?void 0:t.isSkype)||e;var t}function f(){return u()||s===i.sapphire.toLowerCase()||s==="superappdhp".toLowerCase()}function v(){return"3rdp"===d}function y(){return"vivo"===s&&v()}const S=(0,o.p)((()=>u()||m()||h()||p()||f()||s===i.winWeatherApp.toLowerCase()||s===i.winMoneyApp.toLowerCase()||function(){const e=C("edge");return("emmx"===d||"1"===e)&&f()}()||v()));function C(e){try{return new URL(location.href).searchParams.get(e)||""}catch(e){return""}}},71484:function(e,t,n){"use strict";n.d(t,{Ie:function(){return i},_T:function(){return c},ou:function(){return p}});var i,r=n(33940),o=n(98304),a=n(56692),s=n(33379);function c(){return d}!function(e){e.Unknown="unknown",e.Connected="connected",e.Disconnected="disconnected",e.Aborted="aborted"}(i||(i={}));let d=i.Unknown,l=null,u=!1;function p(e=5e3){(0,s.N)()&&(d=i.Unknown,h(e))}function h(e=5e3,t){return(0,r.mG)(this,void 0,void 0,(function*(){return u=!1,t&&(l=window.setTimeout((()=>{u=!0,t.abort()}),e)),function(e){const t={method:"HEAD",cache:"reload"};e&&(t.signal=e);return fetch(`https://assets.msn.${a.jG.IsChinaCompliance?"cn":"com"}/statics/icons/favicon.ico`,t)}(t&&t.signal).then((()=>(d=i.Connected,(0,o.GQ)({networkStatus:d}),!0))).catch((e=>(d=e&&"AbortError"===e.name?i.Aborted:i.Disconnected,(0,o.GQ)({networkStatus:d}),!1))).finally((()=>{clearTimeout(l)}))}))}},62371:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var i,r=n(12108),o=n(56692),a=n(45506);!function(e){e.isDhpPage=function(){return a.Al.ClientSettings.pagetype===r.G.DHP},e.isNtpPage=function(){return a.Al.ClientSettings.pagetype===r.G.NTP},e.fiveColSupported=function(){return o.jG.EnableFiveColLayout}}(i||(i={}))},81428:function(e,t,n){"use strict";function i(e){try{if(e)return JSON.parse(e)}catch(e){}return null}function r(e,t){const n=parseInt(e);return isNaN(n)?t:n}function o(e){try{return JSON.stringify(e)}catch(e){return null}}function a(e){try{return decodeURIComponent(e)}catch(e){}}n.d(t,{Vm:function(){return o},dW:function(){return i},fB:function(){return a},hh:function(){return r}})},92805:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});class i{constructor(e){this.onSubscriptionCallbackError=e,this.eventLookup={}}publish(e,t){let n=this.eventLookup[e];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)try{n[i](t)}catch(n){this.onSubscriptionCallbackError&&this.onSubscriptionCallbackError(n,e,i,t)}}}subscribe(e,t){void 0===this.eventLookup[e]&&(this.eventLookup[e]=[]);const n=this.eventLookup[e];return n.push(t),{dispose(){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}}subscribeOnce(e,t){const n=this.subscribe(e,(function(e){n.dispose(),t(e)}));return n}}},79941:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},l:function(){return s}});var i=n(33940),r=n(33379);let o={};function a(e){e=e||{},(()=>{(0,i.mG)(this,void 0,void 0,(function*(){const{newUrl:t,invalidatePageCache:n=!0}=e;if(n){const{invalidatePageCacheHandler:e}=o;if(e){const t=e();t&&t.then&&(yield t)}}t?window.location.replace(t):window.location.reload(n)}))})()}const s={resetHandlers:function(){o={}},setHandlers:function(e){(0,r.N)()&&e&&(o=e)}}},3900:function(e,t,n){"use strict";n.d(t,{$z:function(){return h},Cv:function(){return g},NJ:function(){return f},Pz:function(){return p},Qq:function(){return T},Sq:function(){return w},be:function(){return l},bg:function(){return b},cD:function(){return y},cf:function(){return m},kJ:function(){return v},ll:function(){return S},nl:function(){return C}});var i=n(10877),r=n(987),o=n(20424),a=n(33379),s=n(55755),c=n(45506);const d="ntp.selected_feed_pivot",l="gamermode";function u(){return"undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate}function p(){const e=u();e&&e.setPref&&e.setPref(d,""),c.Al.SelectedFeedPivot="",(0,r.$o)().removeItem(i.pv)}function h(){if("1"===(0,s.L)().get(l)&&!o.y7.getItem(l))return"gaming";const e=null===c.Al||void 0===c.Al?void 0:c.Al.SelectedFeedPivot;if((0,a.N)()){const e=u(),t=(0,r.$o)().getItem(i.pv);if(t)return e&&e.setPref&&(e.setPref(d,t),c.Al.SelectedFeedPivot=t,(0,r.$o)().removeItem(i.pv)),t}return e}function g(e){"1"===e.get("gaming")&&m("gaming")}function m(e){v(e);const t=u();t&&t.setPref?(t.setPref(d,e),c.Al.SelectedFeedPivot=e):(0,r.$o)().setItem(i.pv,e),"1"!==(0,s.L)().get(l)||o.y7.getItem(l)||o.y7.setItem(l,"0")}function f(){return(0,r.$o)().getItem(i.Kj)}function v(e){(0,r.$o)().setItem(i.Kj,e)}function y(){(0,r.$o)().removeItem(i.Kj)}function S(){var e;return null!==(e=(0,r.$o)().getItem(i.Ib))&&void 0!==e?e:i.uD.Init}function C(e){(0,r.$o)().setItem(i.Ib,e)}function b(){(0,r.$o)().removeItem(i.Ib)}function w(){return(0,r.$o)().getItem(i.xG)}function T(){(0,r.$o)().removeItem(i.xG)}},32164:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});class i{constructor(e){this.promise=new Promise(((e,t)=>{this.resolver=e})),e&&setTimeout((()=>this.set(void 0)),e)}set(e){this.resolver(e),this.valueSet=!0}wasSet(){return this.valueSet}getResultAsync(){return this.promise}}},73713:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});const i=[];function r(e){i.push(e)}},69531:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});const i=e=>e&&"string"==typeof e&&e.trim&&!!e.trim()},34960:function(e,t,n){"use strict";n.d(t,{GI:function(){return d},Qc:function(){return c},ku:function(){return a},w_:function(){return s}});var i=n(65135),r=n(56692),o=n(10877);function a(){var e;if(!i.M0)return;const t=null===(e=i.M0.getPageMetadata)||void 0===e?void 0:e.call(i.M0);return t&&t.contract&&t.contract.page?t.contract.page.ocid:void 0}function s(e){if("windowsShell"===r.jG.AppType||"windowsShellV2"===r.jG.AppType)return c(e);const t=a(),n=e.toLowerCase();if(!t||-1!=n.indexOf("?ocid=")||-1!=n.indexOf("&ocid="))return e;const i=-1==e.indexOf("?")?"?":"&";return`${e}${i}ocid=${encodeURIComponent(t)}`}function c(e){if(!e)return e;try{const t=new URL(e),n=t.searchParams;return a()&&n.set("ocid",a()),n.set("cvid",i.M0.getRequestId()),t.toString()}catch(t){return e}}function d(e){if(!e)return null;const t=Object.assign({},e);return t[o.Yu.entAuthorization]&&(t[o.Yu.entAuthorization]="*****"),t[o.Yu.rpsToken]&&(t[o.Yu.rpsToken]="*****"),t[o.Yu.authorization]&&(t[o.Yu.authorization]="*****"),t}},27496:function(e,t,n){"use strict";n.d(t,{Kb:function(){return o}});var i=n(33940);setTimeout;let r=setTimeout;function o(e){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{r(t,e)}))}))}},23547:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});class i{constructor(e){this.searchParams=Object.create(null),this.parseQueryString(e)}set(e,t){return null!=t&&(this.searchParams[e]=t),this}get(e){return this.searchParams[e]}delete(e){delete this.searchParams[e]}toString(){const e=Object.keys(this.searchParams);return e.length?e.sort().map((e=>`${e}=${this.searchParams[e]}`)).join("&"):""}parseQueryString(e){if(!e)return;const t=e.indexOf("?");t>-1&&(e=e.substring(t+1)),e.split("&").forEach((e=>{const t=e.split("="),n=t[0];this.get(n)||(this.searchParams[n]=t[1])}))}}},26007:function(e,t,n){"use strict";n.d(t,{K:function(){return g},c:function(){return i}});var i,r=n(99038),o=n(79022),a=n(54433),s=n(92170),c=n(13578),d=n(50769),l=n(37242),u=n(33954),p=n(49972),h=n(12884);function g(e,t){try{const n=new URL(e,(0,h.Dp)());return t&&t.forEach((([e,t])=>e&&null!=t&&n.searchParams.append(e,t))),n}catch(e){u.k.logError((0,p.n)(e))}}!function(e){const t=/[^A-Za-z0-9]+/g;function n(e,t=!1){if(!(0,o.Z)(e))return null;return u((e||"").split("?")[1],t)}function i(e){return e=e.replace(/\+/g," "),e=decodeURIComponent(e)}function u(e,t=!1){const n=[];if(e&&e.startsWith("?")&&(e=e.substring(1)),e){const r=(e=e.split("#")[0]).split("&");for(let e=0;e<r.length;e++){const o=r[e].split("=");let s=o[0],c=o[1];t&&(s=i(s),c&&(c=i(c)));const d={key:s,value:c},l=(0,a.Z)(n,(e=>e.key===d.key));-1===l?n.push(d):n[l]=d}}return n}e.getParamsFromUrl=n,e.encodeURIComponentForPrime=function(e){return encodeURIComponent(e.replace(t,"-"))},e.getParams=u,e.getParamsWithItems=function(e,t=!1,n="item"){const r=[];if(e){e.startsWith("?")&&(e=e.substring(1));const o=(e=e.split("#")[0]).split("&");for(let e=0;e<o.length;e++){const a=o[e].split("=");let s=a[0],c=a[1];if(t&&(s=i(s),c&&(c=i(c))),s.toLowerCase()===n){c=c.replace("::::",";;;;");const e=c.split(":");if(2===e.length){s=e[0],c=e[1].replace(";;;;","::::");const t={key:s,value:c};-1===r.findIndex((e=>e.key===t.key))&&r.push(t)}}}}return r};const p={};function g(e){const t={},i=n(e,!0);return i&&i.length&&i.forEach((e=>t[e.key]=e.value)),t}e.getQueryParameterByName=function(e,t){p[t]||(p[t]=g(t));const n=p[t][e];return void 0!==n?n:null},e.isValidUrl=function(e,t){return(0,o.Z)(e)&&e.length>0&&(!t||t&&0===e.indexOf("http"))},e.keyValueArrayToQueryString=function(e){return!(0,s.Z)(e)||(0,c.Z)(e)?"":e.filter((e=>r.b.isKeyValuePair(e,(e=>"string"==typeof e),(e=>"string"==typeof e)))).map((e=>e.key+"="+e.value)).join("&")},e.getParamsObj=g,e.joinSubpathToURL=function(e,t){const n=e.href,i=(0,d.Z)(n,"/"),r=(0,l.Z)(t,"/");return new URL(`${i}/${r}`)},e.updateSearchParam=function(e,t,n){return e&&e.searchParams&&e.searchParams.get(t)&&e.searchParams.set(t,n),e},e.appendSearchParam=function(e,t,n,i){return e&&(e.searchParams||i?e.searchParams.append(t,n):e=new URL(e.href+(e.search.indexOf("?")>=0?"&":"?")+t+"="+n)),e},e.getAbsoluteUrl=function(e){return e.indexOf("://")>0||0===e.indexOf("//")?e:(0,h.Dp)()+e};const m=new Set(["/","$","^","+",".","(",")","=","!","|"]);e.urlPatternToRegExp=function(e){if(0==e.indexOf("/")&&e.lastIndexOf("/")>0){const t=e.slice(1,e.lastIndexOf("/")),n=e.substring(e.lastIndexOf("/")+1)||void 0;return new RegExp(t,n)}return function(e){const t=["^"];let n;for(let i=0;i<e.length;++i){const r=e[i];if(m.has(r))t.push("\\"+r);else if("*"!==r)switch(r){case"?":t.push(".");break;case"{":n=!0,t.push("(");break;case"}":n=!1,t.push(")");break;case",":if(n){t.push("|");break}t.push("\\"+r);break;default:t.push(r)}else{const n=e[i-1];let r=1;for(;"*"===e[i+1];)r++,i++;const o=e[i+1];!(r>1)||"/"!==n&&void 0!==n||"/"!==o&&void 0!==o?t.push("([^/]*)"):(t.push("((?:[^/]*(?:/|$))*)"),i++)}}return t.push("$"),new RegExp(t.join(""))}(e)},e.compareURLs=function(e,t){try{const n=new URL(e),i=new URL(t),r=n.searchParams,o=i.searchParams,a=[],s=[],c=[];return r.forEach(((e,t)=>{o.has(t)?o.get(t)!==r.get(t)&&c.push(t):s.push(t)})),o.forEach(((e,t)=>{r.has(t)||a.push(t)})),{hostMismatch:n.hostname!==i.hostname,pathMismatch:n.pathname!==i.pathname,paramsMissingLeft:a.join(","),paramsMissingRight:s.join(","),paramsDiff:c.join(",")}}catch(e){return{}}}}(i||(i={}))},99038:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var i,r=n(79022),o=n(43698);!function(e){function t(e){return null!=e}e.isNotNullOrUndefined=t,e.isDefined=function(e){return void 0!==e},e.isKeyValuePair=function(t,n,i){return e.isNonNullObject(t)&&n(t.key)&&i(t.value)},e.isNonNullObject=function(e){return e&&"object"==typeof e},e.isNotNull=function(e){return null!==e},e.isNullOrWhiteSpace=function(e){return!(0,r.Z)(e)||""===e.trim()},e.toNumber=function(e,t=-1){if(!e)return t;const n=(0,o.Z)(e);return isNaN(n)?t:n},e.arrayHasData=function(e){return!!t(e)&&(e.constructor===Array&&e.length>0)},e.stringHasData=function(e){return(0,r.Z)(e)&&e.trim().length>0},e.objectToString=function e(t){let n="",i=!0;if("object"!=typeof t)return n;for(const r in t)"object"==typeof t[r]?n+=i?`${e(t[r])}`:`-${e(t[r])}`:n+=i?`${t[r]}`:`-${t[r]}`,i=!1;return n},e.removeHyphens=function(e){if(e)return e.replace(/-/g,"")}}(i||(i={}))},17873:function(e,t,n){"use strict";n.d(t,{Fr:function(){return m},R0:function(){return l},mS:function(){return v},ot:function(){return f},rh:function(){return y},yb:function(){return d}});var i=n(21050),r=n(98304),o=n(33954),a=n(49972),s=n(33379),c=n(56692);let d,l;const u=new Map;let p;const h=(0,i.oA)("WebWorkerUtility","WebWorkerUtility",!0),g=new Map,m=e=>{if(!e)return;const t=g.get(e);return t?(g.delete(e),t):void 0};function f(e,t,n=!0,i=!0){const a={id:e&&e.id||"",fetched:!1,payload:null};if(!e||!e.id)return Promise.resolve(a);if(!d&&(!l||l&&"appanoncookie"!==e.id))return Promise.resolve(a);const s=h&&h.startMeasure(e.id).endMeasure,c=g.get(e.id);if(c)return i&&g.delete(e.id),s&&s({customSuffix:"standbymessage"}),Promise.resolve(c);let m,f;t&&(f=new Promise((i=>{m=setTimeout((()=>{u.delete(e.id);const c=`Web worker request timed out after ${t}ms for request id: [${e.id}]`;n&&(p?p(Object.assign(Object.assign({},r.s7S),{message:"Web worker request timed out",pb:Object.assign(Object.assign({},r.s7S.pb),{customMessage:c})})):o.k.logError(c)),s&&s({customSuffix:"timeout"}),i(Object.assign(Object.assign({},a),{timeout:!0}))}),t)})));const v=new Promise((t=>{u.set(e.id,{type:e.type||"data",callback:e=>{m&&clearTimeout(m),s&&s(),t(e)}})}));return window.webWorker.postMessage({id:e.id,type:e.type||"data",payload:e.payload}),t?Promise.race([v,f]):v}function v(e){d&&e&&e.id&&window.webWorker.postMessage({id:e.id,type:e.type||"command",payload:e.payload||null})}function y(e){if(!d||!e||"function"!=typeof e)return;p=function(t){try{e(t)}catch(e){o.k.logError(`Failed to log web worker AppError. Error: ${(0,a.n)(e)}`)}},window.webWorker.onerror=S;var t,n;t={id:"WebWorkerError",type:"subscription"},n=e=>{if(e.payload&&"object"==typeof e.payload){const t=e.payload;t.pb=Object.assign(Object.assign({},t.pb),(0,r.mnt)()),p(t)}else p(Object.assign(Object.assign({},r.ckW),{message:"Web worker error",pb:Object.assign(Object.assign({},r.ckW.pb),{customMessage:JSON.stringify(e.payload||"")})}))},d&&t&&"subscription"===t.type&&n&&(u.set(t.id,{type:"subscription",callback:n}),window.webWorker.postMessage(t)),setTimeout((()=>{window.webWorkerErrors&&Array.isArray(window.webWorkerErrors)&&(window.webWorkerErrors.forEach((e=>{S(e)})),delete window.webWorkerErrors)}))}function S(e){if(!e.filename)return d=!1,window._isWebWorkerPresent=d,window.webWorker.terminate(),void p(Object.assign(Object.assign({},r.ZI3),{message:"Web worker script not found",pb:Object.assign(Object.assign({},r.ZI3.pb),{customMessage:JSON.stringify(C(e))})}));p(Object.assign(Object.assign({},r.Z3R),{message:"Web worker runtime error",pb:Object.assign(Object.assign({},r.Z3R.pb),{customMessage:JSON.stringify(C(e))})}))}function C(e){return JSON.stringify({filename:e.filename,message:e.message,lineno:e.lineno})}var b;d=!1,l=!1,(0,s.N)()&&(d=void 0!==b?b:!!window.webWorker,window._isWebWorkerPresent=d,l=d),"edgeChromium"===c.jG.AppType&&(d=!1,c.jG.StaticDomain&&c.jG.StaticDomain.endsWith("cn")&&(l=!1)),(d||l)&&(window.webWorker.onmessage=e=>{const{data:t}=e,n=u.get(t.id);if(!n)return void g.set(t.id,t);"data"===n.type&&u.delete(t.id);const i=n.callback;i&&i(t)},setTimeout((()=>{window.webWorkerMessages&&Array.isArray(window.webWorkerMessages)&&(window.webWorkerMessages.forEach((e=>{e.id&&g.set(e.id,e)})),delete window.webWorkerMessages)})))},13959:function(e,t,n){"use strict";var i;n.d(t,{K:function(){return i}}),function(e){e[e.Banner=999999]="Banner",e[e.CookieWall=1100]="CookieWall",e[e.Dialog=900]="Dialog",e[e.Flyout=700]="Flyout",e[e.Overlay=600]="Overlay",e[e.Nav=500]="Nav",e[e.Over=300]="Over",e[e.Above=100]="Above",e[e.Default=0]="Default",e[e.Below=-1]="Below",e[e.Buried=-2]="Buried"}(i||(i={}))},70312:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var i=n(32005),r=n(33379);function o(){return(0,r.N)()?window.fetch.bind(window):i.br}},32509:function(e,t,n){"use strict";n.d(t,{L:function(){return c},j:function(){return d}});var i=n(33379);let r=!1,o=!1,a=!1;function s(){!r&&document.hidden?o=!0:"visible"===document.visibilityState&&(a=!0)}function c(){return o}function d(){return a}(0,i.N)()&&(window.addEventListener&&window.addEventListener("beforeunload",(function(){r=!0})),void 0!==document.hidden&&null!==document.hidden&&document.addEventListener("visibilitychange",s),s())},94794:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var i=n(33940),r=n(27496);function o(e=1){return(0,i.mG)(this,void 0,void 0,(function*(){for(let t=0;t<e;t++)yield(0,r.Kb)(0)}))}},987:function(e,t,n){"use strict";n.d(t,{$o:function(){return a}});var i=n(13638),r=n(33379);class o extends i.C{constructor(){let e=null;if((0,r.N)())try{e=localStorage}catch(e){}super(e)}}function a(){return s}let s=new o},62850:function(e,t,n){"use strict";n.d(t,{D:function(){return a},z:function(){return s}});var i=n(98304),r=n(33379),o=n(987);function a(e){if((0,r.N)()){const t="storageTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e(Object.assign(Object.assign({},i.F0_),{message:`Local Storage is not defined ${t}`}))}}return!1}function s(e,t,n){const i=(0,o.$o)();return(null==i?void 0:i.supported)?()=>{let r;const o=i.getObject(e,null);let a=null;return o&&o.version===t&&null!==o.value?(a=o.value,r=n):(a=n(),r=()=>a),requestIdleCallback((()=>i.setObject(e,{version:t,value:r()}))),a}:n}},20424:function(e,t,n){"use strict";n.d(t,{G:function(){return s},y7:function(){return a}});var i=n(13638),r=n(33379);class o extends i.C{constructor(){let e=null;if((0,r.N)())try{e="sessionStorage"in window&&window.sessionStorage}catch(e){}super(e)}}let a=new o;function s(){return a}},84344:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(98304),r=n(33379);function o(e){if((0,r.N)()){const t="storageTest";try{return window.sessionStorage.setItem(t,t),window.sessionStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e(Object.assign(Object.assign({},i.EIi),{message:`Session Storage is not defined: ${t}`}))}}return!1}},13638:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(81428),r=n(33954);class o{constructor(e){this.storage=e}get supported(){return!!this.storage}getItem(e){if(this.supported)return this.storage.getItem(e)}getObject(e,t){const n=this.getItem(e);if(null!=n){const e=(0,i.dW)(n);if(null!=e)return e}return t}key(e){if(this.supported&&e>=0)return this.storage.key(e)}keys(){return this.supported?Object.keys(this.storage):[]}setObject(e,t){void 0!==t?this.setItem(e,JSON.stringify(t)):this.removeItem(e)}removeObject(e){const t=this.removeItem(e);if(null!=t)return(0,i.dW)(t)}setItem(e,t,n=!0){if(this.supported)try{if(!t)throw"Attempted to store null/undefined value: "+t;this.storage.setItem(e,t)}catch(e){if(!n)throw e;r.k.logError(e)}else if(!n)throw new Error("WebStorage not supported")}get length(){if(this.supported)return this.storage.length}removeItem(e){if(this.supported){const t=this.getItem(e);return this.storage.removeItem(e),t}}clear(){this.supported&&this.storage.clear()}removeSubstringKeys(e){if(!this.supported||!e)return;const t=[];for(let n=0;n<this.storage.length;n++){const i=this.key(n);i&&i.includes(e)&&t.push(i)}for(let e=0;e<t.length;e++)this.removeItem(t[e])}}},81555:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});const i={addTopSiteButton:"addTopSiteButton",backgroundInnerHolder:"backgroundInnerHolder",backgroundOuterHolder:"backgroundOuterHolder",cardAction:"cardAction",complianceHyperlink:"complianceHyperlink",feedToggle:"feedToggle",financeGreeting:"financeGreeting",following:"following",myInterests:"myInterests",gaming:"gaming",gridViewFeed:"gridViewFeed",headerSpaceHolder:"headerSpaceHolder",locationGreeting:"locationGreeting",marketSelector:"marketSelector",myFeed:"myFeed",navBar:"navBar",notificationBell:"notificationBell",office365:"office365",overlayArticleReader:"overlayArticleReader",personalizeButton:"personalizeButton",pillWC:"pillWC",recommendedSites:"recommendedSites",rewardsIcon:"rewardsIcon",rewardsButton:"rewardsButton",rightRailSectionKey:"rightRailSectionKey",scrollableContainer:"scrollableContainer",searchBox:"search-box-edgenext",searchBoxInput:"searchBoxInput",searchBoxVoiceButton:"searchBoxVoiceButton",searchHistory:"searchHistoryEdgeNext",seeAllLinksButton:"seeAllLinksButton",settingsButton:"SettingsButton",settingsCloseButton:"settingsCloseButton",settingsInformationalButton:"settingsInformationalButton",shoppingNav:"shoppingNav",signInButton:"signInButton",singleColumnFeedRoot:"singleColumnFeedRoot",superCoachMark:"superCoachMark",topSites:"topSites",topSitesFirstLink:"quicklinksFirstLink",unifiedMobileFeed:"unifiedMobileFeed",weatherNav:"weatherNav",waffle:"waffle",watchNav:"watchNav",waterfallViewFeed:"waterfallViewFeed",welcomeGreeting:"welcomeGreeting",navigationPage:"navigationPage",videoPlayButton:"videoPlayButton",imageEditButton:"imageEditButton"}},9533:function(e,t,n){"use strict";n.d(t,{FY:function(){return s},b_:function(){return c},h_:function(){return d}});var i=n(32164),r=n(27003);const o=()=>r.Gq.get("__global-element-map_elementMap__",(()=>new Map)),a=()=>r.Gq.get("__global-element-map_waitForElementMap__",(()=>new Map));function s(e,t){if(!t)return;o().set(e,t);const n=a().get(e);n&&n.set(t)}function c(e){return e?o().get(e):null}function d(e){if(!e)return Promise.reject(null);const t=c(e);if(c(e))return Promise.resolve(t);const n=a();if(n.has(e))return n.get(e).getResultAsync();const r=new i.o;return n.set(e,r),r.getResultAsync()}},10619:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(65135);class r{static registerTrackAppErrorEventCallback(e){e&&(this.trackAppErrorEventCallback=e)}static trackAppErrorEvent(e){this.trackAppErrorEventCallback&&this.trackAppErrorEventCallback(e)}}r.trackAppErrorEventCallback=e=>{i.M0&&i.M0.sendAppErrorEvent(e)}},22528:function(e,t,n){"use strict";n.r(t),n.d(t,{IrisDataConnector:function(){return N},IrisDataReducer:function(){return U},IrisImageHotSpotsDataValidator:function(){return _},IrisSurfaceName:function(){return p._l},RegisterErrorTrackingCallback:function(){return S.i},ToolingInfo:function(){return W},irisStorageUtility:function(){return i.Vv},isAadAccount:function(){return i.Jw},isNurturingAccepted:function(){return i.XA}});var i=n(12574),r=n(46065),o=n(33940),a=n(33954),s=n(98304),c=n(56692),d=n(987),l=n(99038),u=n(26007),p=n(91881),h=n(6660),g=n(70260),m=n(6751),f=n(7781),v=n(23586),y=n(63439),S=n(10619),C=n(53076),b=n(12108),w=n(20126);const T={edge:"1",chrome:"2",internetExplorer:"3",firefox:"4",safari:"5",chromium:"6",edgeChromium:"6",[w.Q.Android]:"12",[w.Q.Ios]:"13"},k={homePage:"1",["edge"+b.G.DHP]:"2",["edgeChromium"+b.G.DHP]:"2",["edge"+b.G.NTP]:"3",["edgeChromium"+b.G.NTP]:"3",windows:"7",windowsShell:"7",finance:"8",hub:"8",weather:"8",views:"9",microsoftNews:"11",["mmx"+b.G.Launcher]:"12"},P={[w.Q.Windows]:"WIN10",[w.Q.Macos]:"MACOS",[w.Q.Linux]:"LINUX",[w.Q.Xbox]:"OTHER",[w.Q.Android]:"ANDROID",[w.Q.Ios]:"IOS"};var A=n(7029),I=n(45506),E=n(37180),x=n(90351),M=n(67462),O=n(85663),L=n(82423);class D{static runValidation(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){switch(e){case p._l.MSNAnaheimNewsNTPImages:case p._l.MSNAnaheimNewsNTPImages+p.Yq:{const n=!(0,O.isNullOrUndefined)(t)&&t,r=p.S5[e],o=i.Vv.hasUpdateTimeExpired(r,24),s=i.Vv.hasMarketChanged(r);if(!s&&!o&&!n||c.jG.IsFrePage)return void a.k.log(`IrisDataConnector: Image surface blocked: market changed - ${s}, has image expired - ${o}, dislike triggered - ${n}, FRE - ${c.jG.IsFrePage}.`);let d=null;const l=i.Vv.getImageInfo(r);if(n&&l){d={xSdkIaf:i.Vv.getDislikeList(l.dislikedCreatives)}}const u={addToCall:!0,headers:Object.assign({},d),parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"1"))};return a.k.log(`IrisDataConnector: Image surface validated: market changed - ${s}, has image expired - ${o}, dislike triggered - ${n}, FRE - ${c.jG.IsFrePage}.`),u}case p._l.MSNNewsCoachmark:case p._l.MSNNewsCoachmark+p.Yq:{const t=i.Vv.hasUpdateTimeExpired(p.S5[e],24),n=i.Vv.hasMarketChanged(p.S5[e]);if(!t&&!n)return void a.k.log(`IrisDataConnector: Coachmark surface blocked: last update time expired - ${t}, market changed - ${n}.`);const r={addToCall:!0,parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"0"))};return a.k.log(`IrisDataConnector: Coachmark surface validated: last update time expired - ${t}, market changed - ${n}.`),r}case p._l.WinHPCoachmark:case p._l.WinHPCoachmark+p.Yq:if(!e.endsWith(".int")){const t=i.Vv.hasUpdateTimeExpired(p.S5[e],24),n=i.Vv.hasMarketChanged(p.S5[e]);if(!t&&!n)return void a.k.log(`IrisDataConnector: WinHP Coachmark surface blocked: last update time expired - ${t}, market changed - ${n}.`)}return{addToCall:!0,parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"0"))};case p._l.ConditionalBanner:case p._l.ConditionalBanner+p.Yq:{const t=i.Vv.hasUpdateTimeExpired(p.S5[e],24),n=i.Vv.hasMarketChanged(p.S5[e]);if(!t&&!n)return void a.k.log(`IrisDataConnector: Conditional Banner surface blocked: last update time expired - ${t}, market changed - ${n}.`);const r={addToCall:!0,parameters:Object.assign(Object.assign({},yield this.getCallParametersWithSessionContext(e,"0")),D.getConditionalBannerIrisCallParameters(e))};return a.k.log(`IrisDataConnector: Conditional Banner surface validated: last update time expired - ${t}, market changed - ${n}.`),r}case p._l.MSNewsRewards:case p._l.MSNewsRewards+p.Yq:{const t=i.Vv.hasUpdateTimeExpired(p.S5[e],24),n=i.Vv.hasMarketChanged(p.S5[e]);if(!t&&!n)return void a.k.log(`IrisDataConnector: Rewards surface blocked: last update time expired - ${t}, market changed - ${n}.`);const r={addToCall:!0,parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"0"))};return a.k.log(`IrisDataConnector: Rewards surface validated: last update time expired - ${t}, market changed - ${n}.`),r}default:return void S.i.trackAppErrorEvent(Object.assign(Object.assign({},s.i29),{message:"Subscriber validation function not found.",pb:Object.assign(Object.assign({},s.i29.pb),{customMessage:"Subscriber: "+e})}))}}))}static getCallParametersWithSessionContext(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){const n={},r=[];n.nocookie="0"===t||"1"===t?t:"0";if("edgeChromium"===c.jG.AppType)for(const e in p.uS){const t=yield i.Vv.getIrisSessionContextAttribute(p.uS[e]);(0,O.isNullOrUndefined)(t)||""===t?p.uS[e]!==p.uS.AcquisitionPath&&p.uS[e]!==p.uS.ConsumerVsEnterprise&&p.uS[e]!==p.uS.PrimaryBrowser&&p.uS[e]!==p.uS.DefaultBrowser&&r.push(p.uS[e]):n[p.uS[e]]=t}const o=this.getPageConfiguration();return""!==o&&(n.pageConfig=o),c.jG&&"edgeChromium"===c.jG.AppType&&""===o&&r.push("pg.c"),r.length>0&&S.i.trackAppErrorEvent(Object.assign(Object.assign({},s.UX3),{message:"Missing parameters for subscriber",pb:Object.assign(Object.assign({},s.UX3.pb),{customMessage:`parameters ${r.toString()} for subscriber ${e}`})})),n}))}static getConditionalBannerIrisCallParameters(e){var t,n;const i={nocookie:"0"},r=(0,M.ej)(I.Al.AnonCookieName);i.ISSIGNEDIN=r?"1":"0";const o=(0,x.Z)(I.Al,"ClientSettings.apptype"),a=(0,x.Z)(I.Al,"ClientSettings.pagetype"),d=D.mapCanvasId(o,a),l=null===(t=null===c.jG||void 0===c.jG?void 0:c.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.os;d&&(i.MSN_CANVAS=d),l&&("edge"===o&&l===w.Q.Windows?i.OPSYS="WIN10":"homePage"!==o&&"views"!==o||(i.OPSYS=P[l]));const u=(0,x.Z)(I.Al,"ClientSettings.browser"),p=(0,x.Z)(I.Al,"ClientSettings.deviceFormFactor"),h="TRUE"===(null===(n=null==u?void 0:u.ismobile)||void 0===n?void 0:n.toUpperCase())||"phone"===p?"1":"0";let g;i.ISMOBILE=h,!l||"1"!==h||"homePage"!==o&&"views"!==o?u&&(g=T[u.browserType]):g=T[l],g&&(i.BROWSER=g);const m=[];return"ISSIGNEDIN"in i||m.push("ISSIGNEDIN"),"MSN_CANVAS"in i||m.push("MSN_CANVAS"),"ISMOBILE"in i||m.push("ISMOBILE"),"BROWSER"in i||m.push("BROWSER"),m.length>0&&S.i.trackAppErrorEvent(Object.assign(Object.assign({},s.MWq),{message:"Missing parameters for subscriber",pb:Object.assign(Object.assign({},s.MWq.pb),{customMessage:`parameters ${m.toString()} for subscriber ${e}`})})),i}static getPageConfiguration(){if(c.jG&&"edgeChromium"!==c.jG.AppType)return"";const e=(0,L.K0)(C.z.ChromiumPageSettings);if(!e)return"";const t=e.getCurrentState();if(!t)return"";let n=!1;"function"==typeof e.getPrimaryAccountInfoAsync&&e.getPrimaryAccountInfoAsync().then((e=>{n=e.accountType===A.l.MSA}));const i=(0,E.y)(t,n);return i&&!isNaN(i)?i.toString():void 0}static mapCanvasId(e,t){let n=null;switch(e){case"edge":case"edgeChromium":case"mmx":n=[e+t];break;default:n=e}return k[n]}}var R=n(65135),F=n(12884),B=n(24676);class N extends y.e{constructor(e,t,n,r,a,s,l){if(super(e,t,n,r,a,s,l),this.availableCreatives=new Map,this.headers=[void 0],this.queryParameters=[void 0],this.surfaceInfoMap=new Map,s.disableIrisCalls||!s.subscribers)return void(this.callWasMade=!1);this.irisDataPromise=new Promise((e=>(0,o.mG)(this,void 0,void 0,(function*(){yield i.Vv.configDataPromise,i.Vv.IrisDataConfig=s,this.appType=c.jG&&c.jG.AppType,this.internalPlacementUsed=this.config.isInternal||(0,p.cF)(),this.appType?(this.isBlackoutPeriodOver="edgeChromium"!==this.appType||(yield i.Vv.isBlackoutPeriodOver()),yield i.Vv.populateCachedSurfaceMap(),Object.keys(this.config.subscribers).forEach((e=>(0,o.mG)(this,void 0,void 0,(function*(){const t=this.internalPlacementUsed?e+p.Yq:e,n=p.S5[t],r=i.Vv.getCachedSurface(n);r&&r.placement&&this.surfaceInfoMap.set(n,r)})))),yield this.prepareCallData(),!this.queryParameters||this.queryParameters.length<1?this.callWasMade=!1:(this.callIris(),this.callWasMade=!0),e()):this.callWasMade=!1})))),this.irisDataPromise;const u=this.config.subscribers;Object.keys(u).forEach((e=>{const t=u[e].captureInitialStateOfCampaigns;if(t)for(const e in t)(0,d.$o)().getObject(e)&&R.M0.addOrUpdateTmplString(`userEligibleToSeeCoachmark_${e}:1`)}))}sendActionUpdate(e,t,n,r,o){let s;e&&t&&!this.isImagePlacement(e)&&(n===h.R.Impression?i.Vv.markCreativeAsSeenByUser(e,t):i.Vv.updateAction(e,t,o),i.Vv.persistAllSurfaces()),s=n===h.R.Impression?r.impressionUrl:g._.formatTelemetryActionUrl(r.actionUrl,o);try{m.c.sendActionUpdate(s)}catch(e){a.k.log(`IrisDataConnector: Failed to report iris action update beacon due to error: ${JSON.stringify(e)}`)}}getImagePayload(e){return(0,o.mG)(this,void 0,void 0,(function*(){return e&&(yield this.prepareCallData(!0),this.callIris(),this.callWasMade=!0),yield this.getPayload(p._l.MSNAnaheimNewsNTPImages)}))}tryGetPreviousImagePayload(){return(0,o.mG)(this,void 0,void 0,(function*(){return yield this.getPayload(p._l.MSNAnaheimNewsNTPImages,!0)}))}clearPreviousImagePayload(){this.surfaceInfoMap.delete(p.S5[p._l.MSNAnaheimNewsNTPImages+p.u7])}getPayload(e,t=!1){return(0,o.mG)(this,void 0,void 0,(function*(){yield this.irisDataPromise,this.callWasMade&&(yield this.callIrisPromise);let n=this.shouldUseRequestedIrisSurface();if(n&&n===e){this.internalPlacementUsed&&(n+=p.Yq);const e=p.S5[n];return yield this.tryGetSurfaceInfo(e)}let i=e;if(this.internalPlacementUsed?i=e+p.Yq:t&&(i=e+p.u7),!(0,O.isNullOrUndefined)(p.S5[i])){const e=p.S5[i];return yield this.tryGetSurfaceInfo(e)}return a.k.log(`IrisDataConnector: Surface requested ${i} was not found. `),null}))}tryGetSurfaceInfoInternal(e){return(0,o.mG)(this,void 0,void 0,(function*(){if(!this.surfaceInfoMap.has(e))return a.k.log(`IrisDataConnector: Placement: ${e} was not populated by local/persistent storage nor downloaded by network call.`),null;let t=this.surfaceInfoMap.get(e);return t=i.Vv.getSurfaceWithSelectedCreative(t),t}))}tryGetSurfaceInfo(e){return(0,o.mG)(this,void 0,void 0,(function*(){if(!this.surfaceInfoMap.has(e))return a.k.log(`IrisDataConnector: Placement: ${e} was not populated by local/persistent storage nor downloaded by network call.`),null;let t=this.surfaceInfoMap.get(e);return p.S5[p._l.MSNAnaheimNewsNTPImages]===e||p.S5[p._l.MSNAnaheimNewsNTPImages+p.u7]===e||p.S5[p._l.MSNAnaheimNewsNTPImages+p.Yq]===e||this.shouldBlockPsl()?t:(yield(0,i.Jw)())?(a.k.log(`IrisDataConnector: This is AAD user so not returning SurfaceInfo for: ${e} to experience.`),null):i.Vv.haveWeShownCurrentCreativeRecently(t)?(a.k.log(`IrisDataConnector: Already shown a campaign within 14 days so not returning SurfaceInfo for: ${e} to experience.`),null):i.Vv.haveWeShownCreativeTooManyTimes(t)?(a.k.log(`IrisDataConnector: Already shown a campaign too many times: ${e}.`),null):(t=i.Vv.getSurfaceWithSelectedCreative(t),t.creatives.length>0&&t.creatives[0].creativeId===this.creativeToShowUser?(a.k.log(`IrisDataConnector: Returning SurfaceInfo for: ${e} to experience.`),t):(a.k.log(`IrisDataConnector: Tried to return unselected campaign: ${e}.`),null))}))}prepareCallData(e){return(0,o.mG)(this,void 0,void 0,(function*(){this.queryParameters=[null],this.headers=[null];const t=[],n=[];let r,o,a=[];const c=yield(0,i.XA)();for(const u of Object.keys(this.config.subscribers)){let h;if(!this.config.subscribers[u].active)continue;const g=this.queryParameters.length,m=this.internalPlacementUsed?u+p.Yq:u,y=p.S5[m];if(!y){S.i.trackAppErrorEvent(Object.assign(Object.assign({},s.LRf),{message:"Subscriber not found in iris placement dictionary",pb:Object.assign(Object.assign({},s.LRf.pb),{customMessage:`Subscriber ${m} not found in dictionary`})}));continue}const C=this.isImagePlacement(y),b=!(0,O.isNullOrUndefined)(e)&&e;if(!C&&(b||this.appType&&"edgeChromium"===this.appType&&!c||!this.isBlackoutPeriodOver))continue;const{creativeCount:w,performValidation:T,staticQueryParams:k,aflights:P}=this.config.subscribers[u];let A,I,E;if(this.config.enableBackgroundGallery&&C&&!e&&(A=yield f.p.getBackgroundGalleryEligibilityAsync()),A){const e=yield f.p.getBackgroundPreferences();I=e&&e.changeBackgroundDaily,E=e&&e.backgroundSelectionMetadata}if(I&&E&&"Iris"===E.provider)continue;if(T&&(h=yield D.runValidation(m,b),!h||!h.addToCall))continue;!C||e||i.Vv.hasMarketChanged(y)||(this.previousNtpSurfaceInfoInRotation=this.surfaceInfoMap.get(y)),this.config.enableBackgroundGallery&&C&&(0,d.$o)().removeItem(v.gf);let x=w||1;x=h&&h.parameters&&h.parameters.bcnt?h.parameters.bcnt:x,x<=0?S.i.trackAppErrorEvent(Object.assign(Object.assign({},s.TVf),{message:"Creative count value is negative or zero",pb:Object.assign(Object.assign({},s.TVf.pb),{customMessage:`Creative count value is negative or zero : ${m}`})})):(C?this.queryParameters[g]={bcnt:x,placement:y}:(n.push(x),t.push(y)),l.b.isNotNullOrUndefined(k)&&(C?this.queryParameters[g]=Object.assign(Object.assign({},this.queryParameters[g]),k):o=Object.assign(Object.assign({},o),k)),h&&h.parameters&&l.b.isNotNullOrUndefined(h.parameters)&&(C?this.queryParameters[g]=Object.assign(Object.assign({},this.queryParameters[g]),h.parameters):o=Object.assign(Object.assign({},o),h.parameters)),h&&h.headers&&l.b.isNotNullOrUndefined(h.headers)&&(C?this.headers[g]=h.headers:this.headers[0]=Object.assign(Object.assign({},this.headers[0]),h.headers)),l.b.isNotNullOrUndefined(P)&&"object"==typeof P&&(C?this.queryParameters[g].aflights=P.join(";"):a=P),p.S5[p._l.MSNNewsCoachmark+p.Yq]===y&&(r=(0,p.M1)()))}if(l.b.isNotNullOrUndefined(this.config.dynamicQueryParams)){o=Object.assign(Object.assign({},o),this.config.dynamicQueryParams);for(let e=1;e<this.queryParameters.length;e++)this.queryParameters[e]=Object.assign(Object.assign({},this.queryParameters[e]),this.config.dynamicQueryParams)}t.length>0&&(this.queryParameters[0]=o||{placement:void 0},this.queryParameters[0].placement=t.join("|"),this.queryParameters[0].bcnt=n.join("|"),this.queryParameters[0].aflights=a.join(";"),r&&parseInt(r)>-1&&(this.queryParameters[0].testingNum=r));const u=(yield(0,B.a)()).join(";");for(let e=0;e<this.queryParameters.length;e++)this.queryParameters[e]&&(this.queryParameters[e].SCS_msNtpExp=u||"");const h=(0,p.So)();if(h)for(let e=0;e<this.queryParameters.length;e++)this.queryParameters[e]&&(this.queryParameters[e].ocid=h)}))}callIris(){this.callIrisPromise=new Promise((e=>(0,o.mG)(this,void 0,void 0,(function*(){try{for(let e=0;e<this.queryParameters.length;e++){if((0,O.isNullOrUndefined)(this.queryParameters[e]))continue;this.surfaceCollectionContext=yield m.c.requestSurfaceInfo(this.queryParameters[e],this.headers[e]);const t=this.getSurfacesFromCollection();yield i.Vv.addSurfacesToStorage(t)}}catch(e){this.callWasMade=!1,R.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.IrA),{message:"IrisDataConnector: Exception requesting iris surfaces from data connector.",pb:Object.assign(Object.assign({},s.IrA.pb),{customMessage:`Error: ${JSON.stringify(e)} requestUrl: ${this.config.irisEndpoint} queryParameters: ${JSON.stringify(this.queryParameters)} headers: ${JSON.stringify(this.headers)}`})}))}e()})))),this.callIrisPromise}getSurfacesFromCollection(){const e=this.config.subscribers;if(!(e&&this.surfaceCollectionContext&&this.surfaceCollectionContext.collection&&this.surfaceCollectionContext.reqContext&&this.surfaceCollectionContext.reqContext.queryParams&&this.surfaceCollectionContext.reqContext.queryParams.placement))return R.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.cZM),{message:`Surface collection context missing parameters. Surface Context: ${JSON.stringify(this.surfaceCollectionContext)}`})),null;const t=[];Object.keys(e).forEach((n=>{const i=this.getSurfaceFromCollection(n);if(i&&i.placement){if(a.k.log(`IrisDataConnector: Parsed response for ${i.placement} from Iris network call. Now adding to map.`),t.push(i),this.surfaceInfoMap.set(i.placement,i),this.isImagePlacement(i.placement)){const e=p.S5[p._l.MSNAnaheimNewsNTPImages+p.u7];this.previousNtpSurfaceInfoInRotation&&this.surfaceInfoMap.set(e,this.previousNtpSurfaceInfoInRotation)}this.captureInitialEligibilityStateOfCampaigns(i,e[n].captureInitialStateOfCampaigns)}}));const n=this.shouldUseRequestedIrisSurface(),i=this.internalPlacementUsed&&n?n+p.Yq:n;if((0,O.isNullOrUndefined)(i)){const e=Math.floor(Math.random()*(t.length-1));let n=0;this.availableCreatives.forEach(((t,i)=>{e!==n?n++:this.creativeToShowUser=this.availableCreatives.get(i)}))}else this.creativeToShowUser=this.availableCreatives.get(p.S5[i]);return t}getSurfaceFromCollection(e){const t=this.internalPlacementUsed?e+p.Yq:e,n=p.S5[t];if(this.surfaceCollectionContext.collection.hasUnclaimedErrors()){this.surfaceCollectionContext.collection.getUnclaimedErrors().forEach((e=>{2040!=(e&&e.code?e.code:e.errors&&e.errors.length>0&&e.errors[0].code)&&S.i.trackAppErrorEvent(Object.assign(Object.assign({},s.jWk),{message:"Surface errors discovered",pb:Object.assign(Object.assign({},s.jWk.pb),{customMessage:`Error with surface: ${t} Code: ${e.code} Message: ${e.msg} queryParams: ${JSON.stringify(this.surfaceCollectionContext.reqContext.queryParams)}`})}))}))}const i=this.surfaceCollectionContext.collection.get(n);return i&&i.placement&&i.creatives&&i.creatives.length>0&&!this.isImagePlacement(i.placement)&&this.availableCreatives.set(i.placement,i.creatives[0].creativeId),i}captureInitialEligibilityStateOfCampaigns(e,t){e.creatives&&t&&"object"==typeof t&&e.creatives.forEach((n=>{let i=!1;for(const r in t)if(e.placement===t[r]&&n.creativeId===r){i=!0;break}const r=(0,d.$o)().getObject(n.creativeId);(0,O.isNullOrUndefined)(r)&&(0,d.$o)().setObject(n.creativeId,i)}))}shouldUseRequestedIrisSurface(){const e=(0,F.zp)();if(e){const t=u.c.getQueryParameterByName("irisSurface",e);if(t)return t}return null}shouldBlockPsl(){const e=(0,F.zp)();if(e){const t=u.c.getQueryParameterByName("blockPsl",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}isImagePlacement(e){return p.S5[p._l.MSNAnaheimNewsNTPImages]===e||p.S5[p._l.MSNAnaheimNewsNTPImages+p.Yq]===e}fetchedNewImage(){const e=this.internalPlacementUsed?p._l.MSNAnaheimNewsNTPImages+p.Yq:p._l.MSNAnaheimNewsNTPImages,t=p.S5[e],n=this.surfaceCollectionContext&&this.surfaceCollectionContext.collection&&this.surfaceCollectionContext.collection.get(t);return!(0,O.isNullOrUndefined)(n)}resetImageLastUpdateTime(){const e=this.internalPlacementUsed?p._l.MSNAnaheimNewsNTPImages+p.Yq:p._l.MSNAnaheimNewsNTPImages,t=p.S5[e];i.Vv.resetSurfaceLastUpdateTime(t)}}class U{reduce(){return null}}var $=n(83760);class _{static hasCTASupportData(e){return!(0,O.isNullOrUndefined)(e)&&this.stringHasLength(e.cta)}static hasHotSpotData(e){return!(0,O.isNullOrUndefined)(e)&&e.hs&&"object"==typeof e.hs&&e.hs.length>0}static hasImageData(e){return!(0,O.isNullOrUndefined)(e)&&this.stringHasLength(e.LANDSCAPE)&&this.stringHasLength(e.PORTRAIT)}static hasImageRefreshData(e){return!(0,O.isNullOrUndefined)(e)&&this.stringHasLength(e.update_period)}static hasMuseumData(e){return!(0,O.isNullOrUndefined)(e)&&this.stringHasLength(e.title)&&this.stringHasLength(e.copyright)}static hasPositionData(e){return this.stringHasLength(e.x_percent)&&this.stringHasLength(e.y_percent)&&e.x_percent.length<=this.MaxPositionLength&&e.y_percent.length<=this.MaxPositionLength&&/^0?\.\d{1,3}$/.test(e.x_percent)&&/^0?\.\d{1,3}$/.test(e.y_percent)}static hasPositions(e){return!(0,O.isNullOrUndefined)(e.landscape)&&this.hasPositionData(e.landscape)&&!(0,O.isNullOrUndefined)(e.portrait)&&this.hasPositionData(e.portrait)}static hasTelemetryIndex(e){return this.stringHasLength(e.hs)}static hasTextComponents(e){return this.stringHasLength(e.title)}static hasValidCTAType(e){return!((0,O.isNullOrUndefined)(e)||!this.stringHasLength(e.cta_type)||e.cta_type!==$.W.offPageNavigation)}static hotSpotIsValid(e){return!(0,O.isNullOrUndefined)(e)&&this.hasTelemetryIndex(e)&&this.hasTextComponents(e)&&this.hasPositions(e)}static isValidImageHotSpotsCreative(e){return _.hasImageData(e)&&_.hasImageRefreshData(e)}static isValidStoredData(e){return!(0,O.isNullOrUndefined)(e)&&!(0,O.isNullOrUndefined)(e.imgExpiration)&&this.stringHasLength(e.imgLandURL)&&this.stringHasLength(e.imgPortURL)&&this.stringHasLength(e.reqMarket)}static stringHasLength(e){return!(0,O.isNullOrUndefined)(e)&&"string"==typeof e&&e.length>0}static hasValidCTASupportData(e,t){return!(!e||!t)&&(e===$.W.offPageNavigation&&this.isValidOffPageNavData(t))}static isValidOffPageNavData(e){return/^((microsoft-edge:)?https:\/\/((www)|(cn)|(go))\.((msn)|(bing)|(skype)|(microsoft))\.com)|(edge:\/\/)/.test(e)}}_.MaxPositionLength=5;var H=n(9665);const W={experienceConfigSchema:r.IrisDataConfigSchema,mockConfig:H.mockConfig}},12574:function(e,t,n){"use strict";n.d(t,{Vv:function(){return k},Jw:function(){return A},XA:function(){return P}});var i=n(33940),r=n(33954),o=n(98304),a=n(17440),s=n(65135);const c=new class{getAllCampaigns(){return new Promise((e=>(0,i.mG)(this,void 0,void 0,(function*(){try{(yield a.U.isApiAvailableToUse())?a.U.getPreferenceSetting("campaigns").then((t=>{const n=t&&t.value;n||r.k.logError("PSL: window.chrome.ntpSettingsPrivate.getPref does not have campaigns."),e(n||[])})):(s.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.f_s),{message:"PSL: Error fetching campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"})),r.k.logError("PSL: Error fetching campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"),e([]))}catch(t){s.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.CBf),{message:`PSL fetch error. ${JSON.stringify(t)}`})),r.k.logError(t),e([])}}))))}persistCampaigns(e){return new Promise((t=>(0,i.mG)(this,void 0,void 0,(function*(){try{(yield a.U.isApiAvailableToUse())?(yield a.U.savePreferenceSetting("campaigns",e),r.k.log(`PSL: Number of campaigns persisted: ${e.length||0}.`),t(!0)):(s.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.RLb),{message:"PSL: Error persisting campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"})),r.k.logError("PSL: Error persisting campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"))}catch(e){s.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.CBf),{message:`PSL persist error. ${JSON.stringify(e)}`})),r.k.logError(e)}t(!1)}))))}clearPersistentStorage(){return this.persistCampaigns([])}};var d=n(987);const l=new class{constructor(){this.storageKey="irisNewsLocalStorage"}getAllCampaigns(){try{return(0,d.$o)().getObject(this.storageKey)}catch(e){return r.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from local storage`),[]}}storeCampaigns(e){try{return(0,d.$o)().setObject(this.storageKey,e),r.k.log(`Number of campaigns persisted in local storage: ${e.length||0}.`),!0}catch(e){return r.k.logError(`Exception ${e} occurred storing user nurturing campaigns in local storage`),!1}}clearLocalStorage(){return this.storeCampaigns([])}};var u=n(56692),p=n(26007),h=n(99038),g=n(10877),m=n(45506),f=n(33799),v=n(52144),y=n(91881),S=n(33379),C=n(12884),b=n(72344),w=n(10619),T=n(85663);const k=new class{constructor(){this.cachedSurfaceMap=new Map,this.enabledFeatures=[],this.irisSessionContextAttributes=new Map,this.millisecondsInADay=864e5,this.timeNow=(new Date).getTime(),(0,S.N)()&&(this.appType=u.jG&&u.jG.AppType,"edgeChromium"===this.appType&&(this.configDataPromise=this.getConfigDataAsync()),this.currentURL=(0,C.zp)())}get isEnabled(){return!!this.shouldUseCache()||!(!this.irisDataConfig||!this.irisDataConfig.enableCaching)&&this.isCookieConsentNotRequired()}set IrisDataConfig(e){this.irisDataConfig=e}clearCachedSurfaceMap(){this.isEnabled&&this.cachedSurfaceMap.clear()}populateCachedSurfaceMap(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.isEnabled)try{if(this.purgeCacheWithQsp())return yield this.clearCachedSurfacesFromStorage(),void r.k.log("Cache purged!");this.clearCachedSurfaceMap();let e=[];if(e="edgeChromium"===u.jG.AppType?yield c.getAllCampaigns():l.getAllCampaigns(),!e||0===e.length)return void r.k.log("Bulk read of surfaces from local/persistent storage didn't return a surface.");const{subscribers:t}=this.irisDataConfig,n=[];Object.keys(t).forEach((e=>{t[e].active||n.push(y.S5[e])})),e.forEach((e=>{e&&e.placement&&(0===n.length||-1===n.indexOf(e.placement))&&(this.cachedSurfaceMap.set(e.placement,e),r.k.log(`Populated ${e.placement} from local/persistent storage.`))}))}catch(e){r.k.logError(`Bulk read of surfaces from local/persistent storage threw error: ${e}`)}}))}getCachedSurface(e){if(!e||0===e.length||0===this.cachedSurfaceMap.size)return null;if(!this.cachedSurfaceMap.has(e))return null;const t=this.cachedSurfaceMap.get(e);return t&&t.creatives&&0!==t.creatives.length?t:null}addSurfaceToCachedSurfaceMap(e){if(!e||!e.placement)return;const t=e.placement,n=new Map;let i;if(this.cachedSurfaceMap.has(t)&&(i=this.cachedSurfaceMap.get(t),i.creatives.forEach((e=>{n.set(e.creativeId,e)}))),e.creatives&&e.creatives.length>0){const t=(0,y.cF)()?y._l.MSNAnaheimNewsNTPImages+y.Yq:y._l.MSNAnaheimNewsNTPImages,r=y.S5[t];if(e.placement===r){if(i&&i.imageInfo)e.imageInfo=i.imageInfo;else{const t={dislikedCreatives:[],dislikedCreativeCountCurrentPeriod:0};e.imageInfo=t}this.hasUpdateTimeExpired(r,24)&&(e.imageInfo.dislikedCreativeCountCurrentPeriod=0),n.clear(),n.set(e.creatives[0].creativeId,e.creatives[0])}e.creatives.forEach((e=>{const t=n.get(e.creativeId);if(t&&(t.content=e.content,n.set(e.creativeId,t)),!t){const t={lastAddedTime:this.timeNow,useCount:0,useTime:0};e.storageInfo=t,n.set(e.creativeId,e)}}))}e.creatives=[...n.values()],this.cachedSurfaceMap.set(t,e),r.k.log(`Adding/Updating SurfaceInfo ${t} in storage.`)}addSurfacesToStorage(e){return(0,i.mG)(this,void 0,void 0,(function*(){e&&e.length>0&&(e.forEach((e=>{this.addSurfaceToCachedSurfaceMap(e)})),yield this.persistAllSurfaces())}))}persistAllSurfaces(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.isEnabled){if("edgeChromium"===u.jG.AppType)return void(yield c.persistCampaigns([...this.cachedSurfaceMap.values()]));l.storeCampaigns([...this.cachedSurfaceMap.values()])}}))}clearCachedSurfacesFromStorage(){return(0,i.mG)(this,void 0,void 0,(function*(){this.isEnabled&&(this.clearCachedSurfaceMap(),"edgeChromium"!==u.jG.AppType?l.clearLocalStorage():yield c.clearPersistentStorage())}))}resetSurfaceLastUpdateTime(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!this.isEnabled&&!this.cachedSurfaceMap.get(e))return;const t=this.cachedSurfaceMap.get(e);t.lastUpdatedTime=-1,this.cachedSurfaceMap.set(e,t),this.persistAllSurfaces()}))}getCachedSurfaceMap(){return this.cachedSurfaceMap}haveWeShownCurrentCreativeRecently(e){if((0,T.isNullOrUndefined)(e.currentCreativeId))return!0;if(this.ignoreCreativeUseTime())return!1;let t=!0;return e.creatives.forEach((n=>{n.creativeId===e.currentCreativeId&&n.storageInfo&&n.storageInfo.useTime+14*this.millisecondsInADay<this.timeNow&&(t=!1)})),t}haveWeShownCreativeTooManyTimes(e){if((0,T.isNullOrUndefined)(e)||(0,T.isNullOrUndefined)(e.currentCreativeId))return!0;if(this.ignoreMaxCapPerCreative())return!1;let t=!0;return e.creatives.forEach((n=>{e.currentCreativeId===n.creativeId&&n.storageInfo&&n.storageInfo.useCount<=2&&(t=!1)})),t}getSurfaceWithSelectedCreative(e){if((0,T.isNullOrUndefined)(e.currentCreativeId))return null;let t;return e.creatives.forEach((n=>{e.currentCreativeId===n.creativeId&&(t=n)})),Object.assign(Object.assign({},e),{creatives:[t]})}updateAction(e,t,n){if(e&&t&&this.cachedSurfaceMap.has(e)){const i=this.cachedSurfaceMap.get(e);i&&i.creatives&&i.creatives.forEach((e=>{e.creativeId===t&&e.storageInfo&&(e.storageInfo.irisAction=n)}))}}markCreativeAsSeenByUser(e,t){if(e&&t&&this.cachedSurfaceMap.has(e)){const n=this.cachedSurfaceMap.get(e);n&&n.creatives&&n.creatives.forEach((e=>{e&&e.creativeId&&e.creativeId===t&&e.storageInfo&&(e.storageInfo.useCount++,e.storageInfo.lastAddedTime=this.timeNow,e.storageInfo.useTime=this.timeNow)}))}}updateCreativeLatestAddedTime(e,t,n){if(!this.cachedSurfaceMap.has(e))return;const i=this.cachedSurfaceMap.get(e);i&&i.creatives&&0!==i.creatives.length&&i.creatives.forEach((e=>{e&&e.creativeId===t&&e.storageInfo&&e.storageInfo.lastAddedTime&&(e.storageInfo.lastAddedTime=n)}))}purgeCacheWithQsp(){if(this.currentURL){const e=p.c.getQueryParameterByName("purgeCache",this.currentURL);if(e&&"true"===e.toLocaleLowerCase())return!0}return!1}shouldUseCache(){if(this.currentURL){const e=p.c.getQueryParameterByName("useCache",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreMaxCapPerCreative(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreMaxCapPerCreative",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreUpdateTimeExpiration(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreUpdateTimeExpiration",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreCreativeUseTime(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreCreativeUseTime",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreBlackout(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreBlackout",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}isCookieConsentNotRequired(){return v.A.get(v.U.CookieConsentStatus)===b._.NotRequired}getConfigDataAsync(){return(0,i.mG)(this,void 0,void 0,(function*(){return this.getConfigDataPromise=new Promise((e=>{try{(0,S.N)()&&window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate.getConfigData?window.chrome.ntpSettingsPrivate.getConfigData((t=>{void 0!==t?(this.profileCreationTimeInMs=t.profileCreationTime,this.enabledFeatures=t.enabledFeatures,this.setIrisSessionContextAttributes(t.irisAttributes),this.configData=t,e()):(w.i.trackAppErrorEvent(Object.assign(Object.assign({},o.Zt_),{message:"Config data is undefined"})),e())})):(w.i.trackAppErrorEvent(Object.assign(Object.assign({},o.Ez4),{message:"Failed to fetch config data from chromium API"})),e())}catch(t){w.i.trackAppErrorEvent(Object.assign(Object.assign({},o._bN),{message:"Exception fetching config data from chromium API",pb:Object.assign(Object.assign({},o._bN.pb),{customMessage:`Exception: ${t}`})})),e()}})),this.getConfigDataPromise}))}isBlackoutPeriodOver(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.ignoreBlackout())return!0;if("edgeChromium"===this.appType){if(u.jG.IsFrePage)return!1;yield this.getConfigDataPromise}const e=this.irisDataConfig.blackoutPeriodInDays&&this.irisDataConfig.blackoutPeriodInDays*this.millisecondsInADay||7*this.millisecondsInADay;return!!this.profileCreationTimeInMs&&this.timeNow-this.profileCreationTimeInMs>e}))}getIrisSessionContextAttribute(e){return(0,i.mG)(this,void 0,void 0,(function*(){return"edgeChromium"===this.appType&&(yield this.getConfigDataPromise),this.irisSessionContextAttributes.has(e)?this.irisSessionContextAttributes.get(e):""}))}setIrisSessionContextAttributes(e){if(h.b.isNotNullOrUndefined(e)&&e.length>0){e.startsWith("&")&&e.length>=1&&(e=e.substring(1));e.split("&").map((e=>e.split("="))).forEach((e=>{this.irisSessionContextAttributes.set(e[0],e[1])}))}}getConfigData(){return this.configData}hasUpdateTimeExpired(e,t){if(this.ignoreUpdateTimeExpiration())return!0;const n=this.cachedSurfaceMap.get(e);if((0,T.isNullOrUndefined)(n))return r.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Placement not in PSL.`),!0;const i=(0,T.isNullOrUndefined)(n.lastUpdatedTime)?-1:n.lastUpdatedTime;if(i<0)return r.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Invalid lastUpdatedTime.`),!0;const o=i+36e5*t;return r.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Current time: ${this.timeNow}, lastUpdatedTime: ${o}. Result: ${o<this.timeNow}`),o<this.timeNow}getDislikeList(e){return e&&e.length>0?e.join(";"):""}hasMarketChanged(e){const t=this.cachedSurfaceMap.get(e);if((0,T.isNullOrUndefined)(t))return r.k.log(`IrisDataConnector: has market changed. placement: ${e}. Placement not in PSL.`),!0;const n=!!(0,T.isNullOrUndefined)(t.lastUpdatedMarket)||t.lastUpdatedMarket!==u.jG.CurrentMarket;return r.k.log(`IrisDataConnector: has market changed. placement: ${e} - ${n}.`),n}getImageInfo(e){const t=this.cachedSurfaceMap.get(e);return t&&t.imageInfo?t.imageInfo:null}addImageCreativeToDislikeList(){const e=(0,y.cF)()?y.S5[y._l.MSNAnaheimNewsNTPImages+y.Yq]:y.S5[y._l.MSNAnaheimNewsNTPImages],t=this.cachedSurfaceMap.get(e),n=t.creatives[0].creativeId;if((0,T.isNullOrUndefined)(t)||(0,T.isNullOrUndefined)(t.imageInfo))return!1;if(t.imageInfo.dislikedCreativeCountCurrentPeriod>=5)return!1;if((0,T.isNullOrUndefined)(t.imageInfo.dislikedCreatives))t.imageInfo.dislikedCreatives=[n];else{const e=t.imageInfo.dislikedCreatives.length;let i=!1;if(t.imageInfo.dislikedCreatives.forEach((e=>{e!==n||(i=!0)})),i)return!0;e>=20&&t.imageInfo.dislikedCreatives.shift(),t.imageInfo.dislikedCreatives.push(n)}return t.imageInfo.dislikedCreativeCountCurrentPeriod+=1,k.persistAllSurfaces(),!0}};function P(e=!1){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&(yield A()))return!1;try{return!1!==(0,d.$o)().getObject(g.Ny)}catch(e){return w.i.trackAppErrorEvent(Object.assign(Object.assign({},o.Qhy),{message:"Failed to fetch nurturing accepted key from local storage",pb:Object.assign(Object.assign({},o.Qhy.pb),{customMessage:`Exception: ${e} occurred while reading key: ${g.Ny} from local storage.`})})),!1}}))}function A(){return(0,i.mG)(this,void 0,void 0,(function*(){yield u.jG.AccountInfoPromise;const e=u.jG.ResolvedAccountInfo;return(0,T.isNullOrUndefined)(m.Al.AadState)?f.Qm.AAD===(e&&e.account_type):m.Al.AadState}))}},70260:function(e,t,n){"use strict";n.d(t,{_:function(){return p}});var i=n(33940),r=n(98304),o=n(33954),a=n(84606),s=n(61857),c=n(91881),d=n(65135),l=n(56692),u=n(85663);class p{static createIrisRequestContext(e,t){return Object.assign({queryParams:e},t?{includedHeaders:t}:{})}static callIris(e){return(0,i.mG)(this,void 0,void 0,(function*(){if((0,u.isNullOrUndefined)(e))throw a.l.create(a.N.MissingContext,"IRIS: Request context undefined or null",r.YSG,`Request context: ${JSON.stringify(e)}`);const t=this.validateQParams(e.queryParams);if(t)throw a.l.create(a.N.QueryParametersInvalid,"IRIS: Invalid query parameters",r.LIN,`Error validating query parameters: ${t} query parameters: ${JSON.stringify(e.queryParams)}`);const n=p.generateGuid();e.queryParams.asid=n;const i=this.assembleQParameters(e.queryParams),l=this.formatQParameters(i),h=new URL(c.TY+"?"+l),g=this.getHeaders(e.includedHeaders),m=this.getRequestInit(g);let f;const v=(0,s.zq)();setTimeout((()=>{f="Timeout occurred.",v.resolve()}),c.KI);const y=yield Promise.race([v.waiting,fetch(h,m).catch((e=>{f=`Fetch failure caused by ${JSON.stringify(e)}`}))]),S=y&&y.status;if(!y||S&&!(S>=200&&S<300))throw f&&(/^Timeout/.test(f)||/^Fetch/.test(f))&&(o.k.log(`Iris: Arc call failed due to ${f}`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.S2e),{message:`Arc call failed due to ${f}`}))),a.l.create(a.N.ResponseFailure,"Iris: Arc call failed.",r._ig,`Request url: ${h} Response status code: ${S} Response: ${JSON.stringify(y)}`);let C;try{if(C=yield y.text(),!C)throw"empty response body";const t=JSON.parse(C);if(!t)throw"error parsing json response";return{parsedResponse:t,reqContext:e}}catch(e){const t=null!=C?C:y;throw a.l.create(a.N.ResponseFailure,`Iris: Unable to parse iris resposne due to ${e}`,r.hnc,`Request url: ${h} Response status code: ${S} Response: ${JSON.stringify(t)}`)}}))}static formatTelemetryActionUrl(e,t){return e&&t?e.replace(/\{ACTION\}/,t):null}static updateIris(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if((0,u.isNullOrUndefined)(e))throw a.l.create(a.N.ActionUrlInvalid,"Iris: Action beacon undefined or null",void 0,`Iris action url: ${e} headers: ${JSON.stringify(t)}`);const n=new URL(e),i=this.getHeaders(t),l=this.getRequestInit(i);let p;const h=(0,s.zq)();setTimeout((()=>{p="Timeout occurred.",h.resolve()}),c.VT);const g=yield Promise.race([h.waiting,fetch(n,l).catch((e=>{p=`fetch failure caused by: ${JSON.stringify(e)}`}))]),m=g&&g.status;if(!g||m&&m<200&&m>=300)throw p&&(/^Timeout/.test(p)||/^Fetch/.test(p))&&(o.k.log(`Iris: Arc call failed due to ${p}`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.s51),{message:`Arc call failed due to ${p}`}))),a.l.create(a.N.ActionResponseInvalid,"Iris: Arc call failed.",r.a2y,`Request url: ${n} Response status code: ${m} Response: ${JSON.stringify(g)}`);return g}))}static createPropertyBagErrorMessage(e,t,n,i){return`Placement=${e}, Asid=${t}, Market=${n}, ${i}`}static getHeaders(e){const t=new Headers;return e&&((0,u.isNullOrUndefined)(e.xSdkIaf)||t.set("x-sdk-iaf",e.xSdkIaf)),t}static formatQParameters(e){if((0,u.isNullOrUndefined)(e))return null;const t=/[^=]/,n=[];for(const i in e)!(0,u.isNullOrUndefined)(e[i])&&t.test(e[i])&&n.push(`${i}=${e[i]}`);return n.length>0?n.join("&"):null}static getDefaultAppParameters(e){if(!l.jG)return o.k.log(`Iris: Missing App Environment Object: ${l.jG}`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.EXN),{message:`App environment undefined. Placement: ${JSON.stringify(e.placement)}`})),null;let t;const n={locale:l.jG.CurrentMarket,country:l.jG.CountryCode,muid:l.jG.UserId?l.jG.UserId.replace(/^m-/,""):null};return n.muid||(t=`UserId: ${n.muid}`),n.locale||(t=(t?", ":"")+`Market: ${n.locale}`),n.country||(t=(t?", ":"")+`CountryCode: ${n.country}`),t&&(o.k.log(`Iris: Missing ${t} from App Environment Object`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.yyJ),{message:`Missing App environment properties. Placement: ${JSON.stringify(e.placement)}. Error: ${t}`}))),n}static getRequiredStaticParameters(){return{nct:"1",fmt:"json",nocookie:"1"}}static assembleQParameters(e){if((0,u.isNullOrUndefined)(e))return d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Vsq),{message:"Undefined query param for ARC request."})),null;const t=this.getRequiredStaticParameters(),n=this.getDefaultAppParameters(e),i=(0,c.bu)(),o=(0,c.rB)();return Object.assign({},t,n||{},i||{},o,e)}static validateQParams(e){if((0,u.isNullOrUndefined)(e))return"untargetable; no query params";if(!e.placement)return"untargetable; no placement";if(/\|/.test(e.placement)){if(!e.bcnt)return"untargetable; no bcnt for batch request";const t=e.placement.split("|").length,n=e.bcnt.split("|").length;if(t!==n)return"untargetable; batch size mismatch p="+t+" b="+n}}static getDigit(e){let t=(new Date).getTime();const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:7&n|8).toString(16)}static generateGuid(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,p.getDigit)}static getRequestInit(e){return{method:"GET",headers:e,credentials:"include"}}}},6660:function(e,t,n){"use strict";var i,r;n.d(t,{M:function(){return r},R:function(){return i}}),function(e){e.Impression="imp",e.Action="act"}(i||(i={})),function(e){e.Click="click",e.Conversion="conversion",e.Dislike="dislike",e.Dismiss="dismiss",e.Like="like",e.Hover="hover"}(r||(r={}))},91881:function(e,t,n){"use strict";n.d(t,{KI:function(){return r},M1:function(){return p},S5:function(){return l},So:function(){return h},TY:function(){return a},VT:function(){return o},Yq:function(){return s},_l:function(){return d},bu:function(){return m},cF:function(){return u},rB:function(){return g},u7:function(){return c},uS:function(){return f}});var i=n(26007);const r=5e3,o=1e4,a="https://arc.msn.com/v4/api/selection",s=".int",c=".prev";var d;!function(e){e.MSNAnaheimNewsNTPImages="MSNAnaheimNewsNTPImages",e.MSNNewsCoachmark="MSNNewsCoachmark",e.WinHPCoachmark="WinHPCoachmark",e.MSNewsRewards="MSNewsRewards",e.ConditionalBanner="ConditionalBanner"}(d||(d={}));const l={[d.MSNAnaheimNewsNTPImages]:"88000244",[d.MSNAnaheimNewsNTPImages+s]:"88000245",[d.MSNAnaheimNewsNTPImages+c]:"88000246",[d.MSNNewsCoachmark]:"88000308",[d.MSNNewsCoachmark+s]:"88000309",[d.WinHPCoachmark]:"88000789",[d.WinHPCoachmark+s]:"88000788",[d.MSNewsRewards]:"88000321",[d.MSNewsRewards+s]:"88000322",[d.ConditionalBanner]:"10837393",[d.ConditionalBanner+s]:"10837394"},u=()=>{const e=location.search;return!!e&&/(\?|&)irisInternal=true/.test(e)},p=()=>{const e=location.search,t=new URLSearchParams(e);return t.has("testingNum")?t.get("testingNum"):"-1"},h=()=>{const e=location.search,t=new URLSearchParams(e);return t.has("ocid")?t.get("ocid"):""},g=()=>(()=>{const e=location.search;return!!e&&/(\?|&)irisStatic=true/.test(e)})()?{app:"anaheimstatic"}:{},m=()=>{const e=location.search;if(e&&/(\?|&)irisSegment=/.test(e)){const t=i.c.getQueryParameterByName("irisSegment",e);if(t)return{[t]:"1"}}return null};var f;!function(e){e.AcquisitionPath="AREF",e.BrowserChannel="ACHANNEL",e.BrowserVersion="ABUILD",e.Caller="clr",e.ClientID="edgeid",e.ConsumerVsEnterprise="ISU",e.DefaultBrowser="ADEFAB",e.DeviceOSVersion="devosver",e.OperatingSystem="OPSYS",e.PrimaryBrowser="APRIMB",e.TailoredExperiencesToggle="poptin",e.UITheme="UITHEME"}(f||(f={}))},84606:function(e,t,n){"use strict";n.d(t,{N:function(){return i},l:function(){return o}});var i,r=n(85663);!function(e){e[e.Unknown=0]="Unknown",e[e.MissingContext=1]="MissingContext",e[e.QueryParametersInvalid=2]="QueryParametersInvalid",e[e.FetchFailure=3]="FetchFailure",e[e.ResponseFailure=4]="ResponseFailure",e[e.Unparsable=5]="Unparsable",e[e.UnconvertableCreative=6]="UnconvertableCreative",e[e.ActionUrlInvalid=7]="ActionUrlInvalid",e[e.ActionCallFail=8]="ActionCallFail",e[e.ActionResponseInvalid=9]="ActionResponseInvalid"}(i||(i={}));class o{static create(e,t,n,i){return{appError:n,customMessage:i,errorMessage:t,irisErr:e}}static typeCheck(e){return e&&"object"==typeof e&&!(0,r.isNullOrUndefined)(e.irisErr)}}},83760:function(e,t,n){"use strict";var i;n.d(t,{W:function(){return i}}),function(e){e.offPageNavigation="nav-newtab",e.inPageNavigation="nav-inpage",e.executeAction="execute-action"}(i||(i={}))},6751:function(e,t,n){"use strict";n.d(t,{c:function(){return p}});var i=n(33940),r=n(70260),o=n(85663),a=n(69531),s=n(98304),c=n(65135);class d{static isError(e){return!(0,o.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,o.isNullOrUndefined)(e.error)||!(0,o.isNullOrUndefined)(e.code)}static handleError(e,t){if(e&&"number"==typeof e.code)if(e.code>=1e3&&e.code<=1999)this.sendAppError(s.ZHI,e.code,t);else if(e.code>=3e3&&e.code<=3999)this.sendAppError(s.gAu,e.code,t);else switch(e.code){case 0:case 2e3:case 2040:break;case 2010:this.sendAppError(s.MRH,e.code,t);break;case 2020:this.sendAppError(s.CBH,e.code,t);break;default:this.sendAppError(s.CPU,e.code,t)}}static isValidSingleResponse(e){return!(0,o.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,o.isNullOrUndefined)(e.prm)&&(0,a.R)(e.prm._id)&&(0,a.R)(e.prm._imp)&&!(0,o.isNullOrUndefined)(e.tracking)&&(0,a.R)(e.tracking.baseUri)&&!(0,o.isNullOrUndefined)(e.ad)&&!(0,o.isNullOrUndefined)(e.rdr)&&e.rdr.length>0&&(0,a.R)(e.rdr[0].c)&&(0,a.R)(e.rdr[0].u)&&(0,a.R)(e.f)&&(0,a.R)(e.v)}static isBatchResponse(e){return!(0,o.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,o.isNullOrUndefined)(e.batchrsp)}static batchContainsItems(e){return e&&!(0,o.isNullOrUndefined)(e.items)&&"object"==typeof e.items&&e.items.length>0}static batchContainsErrors(e){return e&&!(0,o.isNullOrUndefined)(e.errors)&&"object"==typeof e.errors&&e.errors.length>0}static decodeSingleResponseString(e){if(!(0,a.R)(e))return null;try{return JSON.parse(e)}catch(t){return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.FQ3),{message:"Exception parsing JSON",pb:Object.assign(Object.assign({},s.FQ3.pb),{customMessage:`Error parsing json encodedString: ${e}`})})),null}}static sendAppError(e,t,n){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:`err: ${t}`,pb:Object.assign(Object.assign({},e.pb),{customMessage:n&&n.queryParams?r._.createPropertyBagErrorMessage(n.queryParams.placement,n.queryParams.asid,n.queryParams.locale):""})}))}}var l=n(62985),u=n(84606);class p{static requestSurfaceInfo(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.cL8),{message:"Attempted iris call without any params."})),Promise.reject("Attempted iris call without any params.");const n=r._.createIrisRequestContext(e,t);return yield r._.callIris(n).then(p.mapResponse).then(p.handleUnclaimedErrors).catch((e=>{let t,i,r;return u.l.typeCheck(e)&&(t=e.appError,i=e.customMessage,r=e.errorMessage),t=t||s.bUp,c.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{message:r||"Unhandled error encountered requesting/processing iris call",pb:Object.assign(Object.assign({},t.pb),{customMessage:i||`Error: ${JSON.stringify(e)} requestContext: ${JSON.stringify(n)}`})})),Promise.reject(e)}))}))}static sendActionUpdate(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){try{return yield r._.updateIris(e,t)}catch(n){let i,r,o;return u.l.typeCheck(n)&&(i=n.appError,r=n.customMessage,o=n.errorMessage),i=i||s.bUp,c.M0.sendAppErrorEvent(Object.assign(Object.assign({},i),{message:o||"Unhandled error encountered requesting/processing iris action update call",pb:Object.assign(Object.assign({},i.pb),{customMessage:r||`Error: ${JSON.stringify(n)} actionUrl: ${JSON.stringify(e)} includedHeaders: ${JSON.stringify(t)}`})})),Promise.reject(n)}}))}static handleUnclaimedErrors(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(e&&e.collection&&e.collection.hasUnclaimedErrors()){e.collection.getUnclaimedErrors().forEach((t=>{d.handleError(t,e.reqContext)}))}return e}))}static mapResponse(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e||!e.parsedResponse)return Promise.resolve(null);const t=e.parsedResponse,n=e.reqContext&&e.reqContext.queryParams&&/^[^|]*$/.test(e.reqContext.queryParams.placement)?e.reqContext.queryParams.placement:null,i=new l.S,r={collection:i,reqContext:e.reqContext};if(d.isError(t))return i.addError(n,Object.assign(Object.assign({},t),{placement:n})),Promise.resolve(r);if(d.isBatchResponse(t)){if(d.batchContainsItems(t.batchrsp)){t.batchrsp.items.forEach((e=>{const t=e.placement?e.placement:n;p.extractCreativesFromItem(e,t,i)}))}if(d.batchContainsErrors(t.batchrsp)){t.batchrsp.errors.forEach((e=>{i.addError(e.placement||n,e)}))}}else{const r=p.convertToCreative(t);if(i.addCreative(n,r),!r){const t=e.reqContext&&e.reqContext.queryParams&&e.reqContext.queryParams.asid;c.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.EhB),{message:"Iris: Attempt to convert iris response to creative failed",pb:Object.assign(Object.assign({},s.EhB.pb),{customMessage:`ASID: ${t} RequestContext: ${JSON.stringify(e.reqContext)} Response: ${JSON.stringify(e.parsedResponse)}`})}))}}return Promise.resolve(r)}))}static convertToCreative(e){const t=e&&"string"==typeof e?d.decodeSingleResponseString(e):e;if(t&&d.isValidSingleResponse(t))return{creativeName:t.rdr[0].c,creativeNamespace:t.rdr[0].u,content:t.ad,creativeId:t.prm._id,telemetry:{impressionUrl:t.prm._imp,actionUrl:t.tracking.baseUri}};const n=t&&t.prm&&t.prm._id;return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.N6m),{message:"Iris: Response format invalid - creativeId",pb:Object.assign(Object.assign({},s.N6m.pb),{customMessage:`Error converting response into creative due to invalid format creativeId: ${n}\n                    encodedString: ${"object"==typeof e?JSON.stringify(e):e}\n                    decodedString: ${"object"==typeof t?JSON.stringify(t):t}`})})),null}static addIrisEntityToCollection(e,t,n){if(!t||!n)return;const i=p.convertToCreative(t);i&&n.addCreative(e,i)}static extractCreativesFromItem(e,t,n){n&&e&&(e.items&&e.items.length>0&&e.items.forEach((e=>{p.addIrisEntityToCollection(t,e,n)})),e.item&&p.addIrisEntityToCollection(t,e.item,n))}}},62985:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(56692),r=n(85663);class o{constructor(){this._infoMap=new Map,this._unknown=[],this._errors=[]}static createSurfaceInfo(e,t,n,r){return{creatives:e||[],currentCreativeId:t,errors:n||[],lastUpdatedMarket:i.jG.CurrentMarket,lastUpdatedTime:(new Date).getTime(),placement:r}}static infoHasId(e){return e&&!(0,r.isNullOrUndefined)(e.placement)}static infoHasCreatives(e){return e&&!(0,r.isNullOrUndefined)(e.creatives)&&e.creatives.length>0}static infoHasErrors(e){return e&&!(0,r.isNullOrUndefined)(e.errors)&&e.errors.length>0}get(e){return!(0,r.isNullOrUndefined)(e)&&this._infoMap.has(e)?this._infoMap.get(e):null}add(e,t){e&&(t?this._infoMap.set(t,e):this._unknown.push(e))}addCreative(e,t){t&&"object"==typeof t?(0,r.isNullOrUndefined)(e)?this._unknown.push(o.createSurfaceInfo([t],null,null,null)):this.addData(e,t,!1):(0,r.isNullOrUndefined)(e)||this._infoMap.set(e,o.createSurfaceInfo(null,null,null,e))}addError(e,t){t&&"object"==typeof t&&0!==Object.keys(t).length&&((0,r.isNullOrUndefined)(e)?this._errors.push(t):this.addData(e,t,!0))}hasUnknowns(){return this._unknown.length>0}getUnknowns(){return this._unknown}hasUnclaimedErrors(){return this._errors.length>0}getUnclaimedErrors(){return this._errors}addData(e,t,n){if((0,r.isNullOrUndefined)(e)){const e=t;this._unknown.push(o.createSurfaceInfo([e],e.creativeId,null,null))}else if(this._infoMap.has(e)){this._infoMap.get(e)[n?"errors":"creatives"].push(t)}else{const i=t;this._infoMap.set(e,o.createSurfaceInfo(n?null:[i],n?null:i.creativeId,n?[t]:null,e))}}}},12884:function(e,t,n){"use strict";n.d(t,{$w:function(){return m},Dp:function(){return d},FK:function(){return h},G8:function(){return g},SJ:function(){return p},SV:function(){return f},Td:function(){return s},Wo:function(){return u},ZI:function(){return v},b0:function(){return C},bs:function(){return y},ij:function(){return o},l4:function(){return a},x_:function(){return S},zp:function(){return l},zw:function(){return c}});var i=n(33379),r=n(2140);function o(){return(0,i.N)()?window.navigator.userAgent:(0,r.s)().userAgent}function a(){return(0,i.N)()?window.location.href:(0,r.s)().url.href}function s(){return(0,i.N)()?window.location.hostname:(0,r.s)().url.hostname}function c(){return(0,i.N)()?window.location.host:(0,r.s)().url.host}function d(){return(0,i.N)()?window.location.origin:(0,r.s)().url.origin}function l(){return(0,i.N)()?window.location.search:(0,r.s)().url.search}function u(){return(0,i.N)()?window.location.pathname:(0,r.s)().url.pathname}function p(){return(0,i.N)()?window.location.protocol:(0,r.s)().url.protocol}function h(){return(0,i.N)()?window.location.hash:(0,r.s)().url.hash}function g(){return(0,i.N)()?window.document.cookie:(0,r.s)().cookie}function m(e){if(!(0,i.N)())throw new Error("getDocumentElementById is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementById(e)}function f(e){if(!(0,i.N)())throw new Error("getDocumentElementsByTagName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByTagName(e)}function v(e){if(!(0,i.N)())throw new Error("getDocumentElementsByClassName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByClassName(e)}function y(){return(0,i.N)()?window.indexedDB:null}function S(){return(0,i.N)()?window.devicePixelRatio:(0,r.s)().devicePixelRatio}function C(e,t,n=!0,r="anonymous",o,a){if(!(0,i.N)())throw new Error("createScriptTag is unsupported server side. This call should be wrapped in canUseDOM().");const s=document.createElement("script");return t&&(s.id=t),o&&s.setAttribute("class",o),a&&(s.onload=a),s.type="text/javascript",e&&(s.src=e,s.async=n,s.crossOrigin=r),window&&window.NONCE_ID&&(s.nonce=window.NONCE_ID),s}},33379:function(e,t,n){"use strict";function i(){return!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv)}n.d(t,{N:function(){return i}})},27003:function(e,t,n){"use strict";n.d(t,{Gq:function(){return r}});let i=new Map;const r=Object.freeze({set(e,t){return i.set(e,t),this},get:function(e,t){let n=i.get(e);return void 0===n&&t&&(n=t(),i.set(e,n)),n},clear(){i.clear()},delete:e=>i.delete(e),has:e=>i.has(e)})},70587:function(e,t,n){"use strict";n.d(t,{Cw:function(){return a},cs:function(){return o},j4:function(){return s},mx:function(){return r}});var i=n(68692);const r="rd",o="OSATE",a="OSAT",s={ver:"0.1.0",spec:{innerWidth:{clientValue:()=>window.innerWidth},innerHeight:{clientValue:()=>window.innerHeight},outerWidth:{clientValue:()=>window.outerWidth},breakpoint:{clientValue:()=>function(e,t){for(let n=t.length-1;n>=0;n--)if(e>=t[n])return n}(window.innerWidth,i.A)},locationHash:{clientValue:()=>window.location.hash},locationHref:{clientValue:()=>window.location.href},locationHost:{clientValue:()=>window.location.host},locationHostName:{clientValue:()=>window.location.hostname},locationOrigin:{clientValue:()=>window.location.origin},locationPathName:{clientValue:()=>window.location.pathname},locationProtocol:{clientValue:()=>window.location.protocol},locationSearch:{clientValue:()=>window.location.search},screenTop:{clientValue:()=>window.screenTop},screenY:{clientValue:()=>window.screenY},canUseCssGrid:{clientValue:()=>window.CSS&&window.CSS.supports&&CSS.supports("display","grid")||!1},devicePixelRatio:{clientValue:()=>window.devicePixelRatio},language:{clientValue:()=>document.documentElement.lang},direction:{clientValue:()=>document.documentElement.dir}}}},68692:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});const i=[0,656,980,1304]},99590:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(33379);function r(e){return"object"==typeof n.g&&n.g.TEST_ENV&&!n.g.TEST_SINGLETONPROXY||(0,i.N)()?e.getInstance():new Proxy(e,{get(e,t,n){const i=e.getInstance(),r=Reflect.get(i,t,i);return"function"==typeof r?r.bind(i):r},set(e,t,n,i){const r=e.getInstance();return Reflect.set(r,t,n,r)}})}},2140:function(e,t,n){"use strict";n.d(t,{s:function(){return d}});var i=n(27003),r=n(70587);const o="__RequestDataInstance__";class a{constructor(e,t){if(this.url=new URL(e.href),this.innerHeight=e.innerHeight,this.devicePixelRatio=e.devicePixelRatio,this.canUseCssGrid=e.canUseCssGrid,this.requestId=e.requestId,this.cookie=e.cookie,this.referer=e.referer,this.userAgent=e.userAgent,this.clientData=e.clientData,this.oneServiceHeaders=function(e){try{if(e)return JSON.parse(e)}catch(e){}}(e.oneServiceHeaders)||{},this.isPssrMode=t,t){const e=s(r.cs,this.cookie),t=!!e&&"1"===e,n=s(r.Cw,this.cookie);if(t&&n||!e&&!n)return this.msalAuthReady=!0,void(n&&(this.oneServiceHeaders.Authorization=`Bearer ${n}`));this.msalAuthReady=!1,this.pssrRejectedReason=e&&!t?"interactiveLogin":e&&!n?"missOSAT":"missOSATE"}}static getInstance(){const e=i.Gq.get(o);return e||(n.g.TEST_ENV?c({href:"http://localhost:8080/",innerHeight:768,devicePixelRatio:1,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}):c({href:"http://localhost:8080/",innerHeight:0,devicePixelRatio:0,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}))}static resetInstance(e,t=!1){const n=new a(e,t);return i.Gq.set(o,n),n}}function s(e,t){if(t&&e){const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return n&&n.length>1?n[1]:null}return null}const c=a.resetInstance,d=()=>a.getInstance()},56474:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var i=n(98304),r=n(65135);class o extends Map{constructor(e,t={}){super(),this.identifier=e,this.subscriptions=new Map,t.initialState&&Object.keys(t.initialState).forEach((e=>{super.set(e,t.initialState[e])}))}set(e,t){super.set(e,t);const n=this.subscriptions.get(e);return n&&n.size?(n.forEach((n=>{try{n&&n(t)}catch(t){r.M0.sendAppErrorEvent(Object.assign(Object.assign({},i.fG_),{message:"Failed to execute subscription callback",pb:Object.assign(Object.assign({},i.fG_.pb),{customMessage:`Error executing subscription callback for key [${e}]`,instanceId:this.identifier,errorMessage:t&&t.message})}))}})),this):this}subscribe(e,t,n={}){if(!t||"function"!=typeof t)return;let i=this.subscriptions.get(e);i||(this.subscriptions.set(e,new Set),i=this.subscriptions.get(e)),i.add(t),this.has(e)&&!1!==n.fireImmediately&&t(this.get(e)),n.signal&&n.signal.addEventListener("abort",(()=>{this.unsubscribe(e,t)}))}unsubscribe(e,t){const n=this.subscriptions.get(e);n&&n.delete(t)}reset(){this.clear(),this.subscriptions.clear()}}},35385:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var i=n(55067);class r{}r.updateLayout=new i.C("updateLayout"),r.initialize=new i.C("initialize")},43980:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(53899);function r(e,t,n,r){if(!n||r)return i.nP.custom;const o=i.Wi[i.nP.focused],a=i.Wi[i.nP.informational],s=i.Wi[i.nP.inspirational];return e===o.feeds_position&&t===o.current_background_image_type?i.nP.focused:e===a.feeds_position&&t===a.current_background_image_type?i.nP.informational:e===s.feeds_position&&t===s.current_background_image_type?i.nP.inspirational:i.nP.custom}},91608:function(e,t,n){"use strict";n.d(t,{A$:function(){return r},FQ:function(){return i},FT:function(){return s},Jx:function(){return d},O9:function(){return a},cN:function(){return l},jb:function(){return o}});const i=78,r=50,o=40,a=24;let s;const c=[];function d(e){c.push(e)}function l(e){if(e!==s){s=e;for(const t of c)t(e)}}},53899:function(e,t,n){"use strict";n.d(t,{$B:function(){return f},$N:function(){return y},$_:function(){return S},F5:function(){return b},HX:function(){return l},L_:function(){return C},MT:function(){return m},Uq:function(){return s},VE:function(){return p},Wi:function(){return P},YZ:function(){return A},Z3:function(){return h},_9:function(){return w},_U:function(){return g},gZ:function(){return u},gp:function(){return c},iz:function(){return i},nP:function(){return d},yR:function(){return v}});var i,r=n(12108),o=n(56692);!function(e){e[e.MicrosoftNews=0]="MicrosoftNews",e[e.Office365=1]="Office365",e[e.Gaming=2]="Gaming",e[e.Play=3]="Play",e[e.NavigationPage=4]="NavigationPage",e[e.Following=5]="Following"}(i||(i={}));var a,s,c,d,l,u,p,h;!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(a||(a={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(s||(s={})),function(e){e[e.always=0]="always",e[e.peek=1]="peek",e[e.headingsonly=2]="headingsonly",e[e.onscroll=3]="onscroll",e[e.off=4]="off"}(c||(c={})),function(e){e.focused="focused",e.inspirational="inspirational",e.informational="informational",e.custom="custom"}(d||(d={})),function(e){e.bing="bing",e.custom="custom",e.iris="iris",e.off="off",e.theme="theme",e.enterprise="enterprise",e.imageAndVideo="imageAndVideo"}(l||(l={})),function(e){e[e.allowAll=0]="allowAll",e[e.disableImageOfTheDay=1]="disableImageOfTheDay",e[e.disableCustomImage=2]="disableCustomImage",e[e.disableAll=3]="disableAll"}(u||(u={})),function(e){e[e.off=0]="off",e[e.onerow=1]="onerow",e[e.tworows=2]="tworows",e[e.top=3]="top"}(p||(p={})),function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.top="top"}(h||(h={}));const g={0:"off",1:"onerow",2:"tworows",3:"top"},m={0:"allowAll",1:"disableImageOfTheDay",2:"disableCustomImage",3:"disableAll"},f={off:0,onerow:1,tworows:2,threerows:4,top:3};var v;!function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.threerows="threerows"}(v||(v={}));const y={off:0,tworows:1,threerows:2,onerow:3},S={0:"off",1:"tworows",2:"threerows",3:"onerow"},C={backgroundImageTypePolicy:u.allowAll,currentBackgroundImageType:l.imageAndVideo,currentLayout:d.inspirational,quickLinksEnabled:!0,hideDefaultTopSites:!1,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:"headingsonly",selectedQuickLinksDisplaySetting:h.onerow},b={0:"focused",1:"inspirational",2:"informational",3:"custom"},w={backgroundImage:"ntp.background_image",backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinks:"ntp.show_top_sites",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",layoutModeInstrumentation:"instrumentation.ntp.layout_mode",newsFeedDsiplayInstrumentation:"instrumentation.ntp.news_feed_display",gamerModeEnabled:"browser.gamer_mode_enabled",codexBingUpsellEnabled:"ntp.enable_bing_chat_by_policy",companyLogoEnabled:"ntp.enable_company_logo_by_policy"},T={focused:{quick_links:!0,feeds_position:"headingsonly",current_background_image_type:l.off,greeting:!0,hide_promoted_links:!1},inspirational:{quick_links:!0,feeds_position:"peek",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1},informational:{quick_links:!0,feeds_position:"always",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1}},k={focused:{quick_links:!0,feeds_position:"headingsonly",current_background_image_type:l.off,greeting:!0,hide_promoted_links:!1},inspirational:{quick_links:!0,feeds_position:"peek",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1},informational:{quick_links:!0,feeds_position:"always",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1}},P=o.jG.CurrentRequestTargetScope&&o.jG.CurrentRequestTargetScope.audienceMode===r.F.Enterprise?T:k,A={currentBackgroundImageType:P.informational.current_background_image_type,currentLayout:d.informational,quickLinksEnabled:P.informational.quick_links,hideDefaultTopSites:P.informational.hide_promoted_links,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:P.informational.feeds_position,greetingEnabled:P.informational.greeting}},4734:function(e,t,n){"use strict";n.d(t,{Qz:function(){return w},bn:function(){return T},v:function(){return k},FQ:function(){return v},gy:function(){return g},S0:function(){return p},F_:function(){return m},Qm:function(){return f}});var i,r=n(33940),o=n(68917);!function(e){e[e.StandardEventBasedDeferral=0]="StandardEventBasedDeferral",e[e.CustomEventBasedDeferral=1]="CustomEventBasedDeferral"}(i||(i={}));var a=n(53301),s=n(83757),c=n(53076),d=n(93450),l=n(49016);const u=(e,t)=>e.filter((e=>t in e));function p(){return d._.getInstance().rootReducer.connector(c.z.MilestoneData)}function h(e){const t=p();if(!t)return;const n=t.getCurrentState().perExperienceMilestones,i=n&&n.get(e);let r;return i&&(r=i.perInstanceMilestones.get(s.t)),r}function g(e){const t=h(e);if(!t||function(e){let t;switch(e.loadAfter.eventType){case o.Gg.aboveTheFoldVisuallyReady:t=y();break;case o.Gg.belowTheFoldTransitionStart:t=S();break;case o.Gg.hydrationComplete:t=b();break;default:t=(0,l.c)(e.loadAfter.experienceType,e.loadAfter.eventType)}return t}(t))return null;if(t.shouldLoad&&t.loadAfter){return{deferralType:C(t.loadAfter),shouldResolve:t.shouldLoad}}return null}function m(){return p()?y()?Promise.resolve():new Promise((e=>{a.g.updateAboveTheFoldVisuallyReady.registerObserver((t=>{e()}))})):Promise.resolve()}function f(){return p()?S()?Promise.resolve():new Promise((e=>{a.g.updateBelowTheFoldTransitionStart.registerObserver((t=>{e()}))})):Promise.resolve()}function v(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=p();if(!t)return;const n=t.getCurrentState().plugins;if(!n||0===n.length)return;const i=u(n,e);for(const t of i)void 0!==t[e]&&(yield t[e].call(t))}))}function y(){const e=p();if(!e)return!1;const{aboveTheFoldVisuallyReady:t}=e.getCurrentState();return Boolean(t&&t.endTime!==s.n)}function S(){const e=p();return!!e&&e.getCurrentState().belowTheFoldTransitionStart}function C(e){return e.eventType in o.ic?i.CustomEventBasedDeferral:i.StandardEventBasedDeferral}function b(){const e=p();return!!e&&e.getCurrentState().hydrationComplete}function w(e,t,n,i){return{deferralInfo:e,experienceType:t,experienceGroup:n,experienceInstance:i}}function T(e,t,n,i){return{experienceType:e,currentState:t,experienceGroup:n,experienceInstance:i}}function k(e,t,n,i,r){return{experienceType:e,experienceGroup:t,experienceInstance:n,startTime:i,endTime:r}}},53301:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(55067);class r{constructor(){this.updateHydrationComplete=new i.C("updateHydrationRenderComplete"),this.updateRiverHydrationComplete=new i.C("updateRiverHydrationRenderComplete"),this.updateAboveTheFoldVisuallyReady=new i.C("updateAboveTheFoldVisuallyReady"),this.updateBelowTheFoldTransitionStart=new i.C("updateBelowTheFoldTransitionStart"),this.updateExperienceLoadDeferralState=new i.C("updateExperienceLoadDeferralState"),this.updateExperienceCurrentState=new i.C("updateExperienceCurrentState"),this.updateExperiencePublicState=new i.C("updateExperiencePublicState"),this.updateExperienceRenderDeferralState=new i.C("updateExperienceRenderDeferralState"),this.updateInitTiming=new i.C("UpdateInitTiming"),this.updatePageComplete=new i.C("updatePageCompleteTiming"),this.updateRenderTiming=new i.C("UpdateRenderTiming"),this.updateVisuallyReadyTiming=new i.C("UpdateVisuallyReadyTiming"),this.updateStartLoadingTiming=new i.C("UpdateStartLoadingTiming"),this.updateDomCompleteTiming=new i.C("UpdateDomCompleteTiming"),this.updateMilestonePlugins=new i.C("updateMilestonePlugin")}resetInstance(){this.updateHydrationComplete.unregisterObservers(),this.updateRiverHydrationComplete.unregisterObservers(),this.updateAboveTheFoldVisuallyReady.unregisterObservers(),this.updateBelowTheFoldTransitionStart.unregisterObservers(),this.updateExperienceLoadDeferralState.unregisterObservers(),this.updateExperienceCurrentState.unregisterObservers(),this.updateExperiencePublicState.unregisterObservers(),this.updateExperienceRenderDeferralState.unregisterObservers(),this.updateInitTiming.unregisterObservers(),this.updatePageComplete.unregisterObservers(),this.updateRenderTiming.unregisterObservers(),this.updateVisuallyReadyTiming.unregisterObservers(),this.updateDomCompleteTiming.unregisterObservers(),this.updateMilestonePlugins.unregisterObservers(),o=new r}}let o=new r},98358:function(e,t,n){"use strict";n.d(t,{m:function(){return g}});var i=n(53301),r=n(68917),o=n(4734),a=n(78690),s=n(49016),c=n(2820);function d(e,t){e.registerObserver((e=>{((e.params||[])[0]||[]).forEach((({deferralInfo:e,experienceType:n})=>{e&&n&&function(e,t,n){if(!e||!t||!(t.eventType in r.Gg)||!t.experienceType&&!t.experienceGroup)return;const{eventType:i,experienceType:o}=t,d=o||t.experienceGroup,l=s.v.get(d);if(l&&l.referencedDependentsDeferralMap){if(l.currentState<i){const t=l.referencedDependentsDeferralMap.get(i);t?t.size>0&&t.set(e,n):l.referencedDependentsDeferralMap.set(i,new Map([[e,n]]))}}else s.v.set(d,{currentState:a.D.notStarted,referencedDependentsDeferralMap:new Map([[i,new Map([[e,n]])]])}),o&&(0,c.w)(o,!0)}(n,e,t)}))}))}function l(){d(i.g.updateExperienceLoadDeferralState,a.D.loadDeferred),d(i.g.updateExperienceRenderDeferralState,a.D.renderDeferred),i.g.updateExperienceCurrentState.registerObserver((e=>{const t=[];if(((e.params||[])[0]||[]).forEach((({experienceType:e,currentState:n})=>{if(!e||!n)return;const i=s.v.get(e);if(!i)return;i.currentState=n;const c=r.ez.get(n),d=c&&i.referencedDependentsDeferralMap.get(c);d&&d.forEach(((e,n)=>{if(!n)return;const i=e===a.D.loadDeferred?a.D.resolvedForLoad:a.D.resolvedForRender;t.push((0,o.bn)(n,i))}))})),t.length){const e=(0,o.S0)();e&&i.g.updateExperienceCurrentState.getActionSender(e).send(t)}}))}var u=n(73713);let p=new Map;(0,u.U)((()=>{p=new Map}));var h=n(63439);class g extends h.e{constructor(e,t,n,r,s,c,d){super(e,t,n,r,s,c,d),this.startObservers(),i.g.updateInitTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.initialized))),i.g.updateRenderTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.rendered))),i.g.updateVisuallyReadyTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.visuallyReady))),i.g.updateStartLoadingTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.startLoading))),i.g.updateDomCompleteTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.domComplete))),i.g.updateExperienceLoadDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:n})=>(0,o.bn)(e,a.D.loadDeferred,t,n)));t.length&&i.g.updateExperienceCurrentState.getActionSender(this).send(t)})),i.g.updateExperienceRenderDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:n})=>(0,o.bn)(e,a.D.renderDeferred,t,n)));t.length&&i.g.updateExperienceCurrentState.getActionSender(this).send(t)}))}startObservers(){l(),i.g.updateExperienceCurrentState.registerObserver((e=>{((e.params||[])[0]||[]).forEach((e=>{e.currentState===a.D.domComplete&&p.forEach(((t,n)=>{let i=!0;const{DomCompleteDependencies:r,DomCompleteCallback:o}=t;for(const t of r.values()){const{dependencyId:{experienceType:n,experienceGroup:r,experienceNamespace:o}}=t;if(n&&n!==e.experienceType||r&&r!==e.experienceGroup||o&&o!==e.experienceInstance||(t.milestoneReached=!0),!t.milestoneReached){i=!1;break}}i&&(t.dependenciesMet=!0,o&&(p.delete(n),o()))}))}))}))}updateExperienceTiming(e,t){e&&e.endTime&&i.g.updateExperienceCurrentState.getActionSender(this).send([(0,o.bn)(e.experienceType,t,e.experienceGroup,e.experienceInstance)])}}},83757:function(e,t,n){"use strict";n.d(t,{n:function(){return r},t:function(){return i}});const i="default",r=-1},75367:function(e,t,n){"use strict";n.d(t,{c:function(){return S}});var i,r=n(30856),o=n(53301);!function(e){e[e.domComplete=0]="domComplete",e[e.error=1]="error",e[e.initialized=2]="initialized",e[e.rendered=3]="rendered",e[e.visuallyReady=5]="visuallyReady",e[e.startLoading=6]="startLoading"}(i||(i={}));var a=n(78690),s=n(33954);function c(){return h(o.g.updateAboveTheFoldVisuallyReady,(()=>!0))}function d(){return h(o.g.updateBelowTheFoldTransitionStart,(()=>!0))}function l(e){return p(e,a.D.resolvedForLoad)}function u(e){return p(e,a.D.resolvedForRender)}function p(e,t){return h(o.g.updateExperienceCurrentState,(n=>((n.params||[])[0]||[]).some((n=>n.currentState===t&&n.experienceType===e))))}function h(e,t){return new Promise(((n,i)=>{try{e.registerObserver((e=>{t(e)&&n(!0)}))}catch(e){s.k.logError(e),i(!1)}}))}function g(){return new Promise(((e,t)=>{try{o.g.updateHydrationComplete.registerObserver((()=>{e(!0)}))}catch(e){s.k.logError(e),t(!1)}}))}var m=n(83757),f=n(68917);class v{static updateExperienceCurrentState(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o&&(o.currentState=n)}static updateMilestoneTiming(e,t,n,r,o,s,c){const d=this.getOrCreateExperienceInstanceMilestone(e,t,s,c);let l;if(d)switch(n){case i.initialized:l=d.initializationTime;break;case i.rendered:l=d.renderTime;break;case i.visuallyReady:l=d.visuallyReadyTime;break;case i.domComplete:l=d.domCompleteTime;break;case i.startLoading:return void(l=d.startLoadingTime);case i.error:return void(d.currentState=a.D.error);default:throw new Error("Invalid Argument: Unrecognized eventType")}if(!l)throw new Error(`Invalid experience time object while processing timing update for ${n}`);r&&(l.startTime=r),o&&(l.endTime=o)}static updateHydrationComplete(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.hydrationComplete=t}static updateBelowTheFoldTransitionStart(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.belowTheFoldTransitionStart=t}static updateMilestonePlugin(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.plugins&&0!==e.plugins.length?e.plugins=e.plugins.concat(t):e.plugins=t}static updateAboveTheFoldVisuallyReady(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.aboveTheFoldVisuallyReady.startTime=0,e.aboveTheFoldVisuallyReady.endTime=t}static updatePageComplete(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.pageCompleteTiming.startTime=0,e.pageCompleteTiming.endTime=t}static deferExperienceLoad(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o.loadAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},v.updateLoadDeferralHandler(o,t)}static deferExperienceRender(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o.renderAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},v.updateRenderDeferralHandler(o,t)}static getOrCreateExperienceMilestone(e,t,n){if(!t)throw new Error("Invalid Argument: experienceType");e||(e={aboveTheFoldVisuallyReady:void 0,pageCompleteTiming:void 0,perExperienceMilestones:void 0}),e.perExperienceMilestones||(e.perExperienceMilestones=new Map);let i=e.perExperienceMilestones.get(t);return i||(i={experienceType:t,experienceGroup:n,perInstanceMilestones:new Map},e.perExperienceMilestones.set(t,i)),i}static getOrCreateExperienceInstanceMilestone(e,t,n,i){const r=this.getOrCreateExperienceMilestone(e,t,n),o=i||m.t;let s=r.perInstanceMilestones.get(o);return s||(s={currentState:a.D.notStarted,initializationTime:{endTime:m.n,startTime:m.n},loadAfter:{experienceType:void 0,eventType:void 0},renderAfter:{experienceType:void 0,eventType:void 0},renderTime:{endTime:m.n,startTime:m.n},visuallyReadyTime:{endTime:m.n,startTime:m.n},startLoadingTime:{endTime:m.n,startTime:m.n},domCompleteTime:{endTime:m.n,startTime:m.n}},r.perInstanceMilestones.set(o,s)),s}static updateLoadDeferralHandler(e,t){switch(e.loadAfter.eventType){case f.Gg.aboveTheFoldVisuallyReady:e.shouldLoad=c;break;case f.Gg.belowTheFoldTransitionStart:e.shouldLoad=d;break;case f.Gg.hydrationComplete:e.shouldLoad=g;break;default:return void(e.shouldLoad=l.bind(this,t))}}static updateRenderDeferralHandler(e,t){switch(e.renderAfter.eventType){case f.Gg.aboveTheFoldVisuallyReady:e.shouldRender=c;break;case f.Gg.belowTheFoldTransitionStart:e.shouldRender=d;break;case f.Gg.hydrationComplete:e.shouldRender=g;break;default:return void(e.shouldRender=u.bind(this,t))}}}v.invalidMilestoneModelMessage="Invalid Argument: milestoneModel";var y=n(85663);class S{reduce(e,t){let n;if(n=e?Object.assign({},e):{aboveTheFoldVisuallyReady:{endTime:m.n,startTime:m.n},pageCompleteTiming:{endTime:m.n,startTime:m.n},perExperienceMilestones:new Map},!t)return n;let i=!1;return i=i||this.handlePageLevelActions(i,t,n),i=i||this.handleExperienceLevelActions(i,t,n),n||e}handleExperienceLevelActions(e,t,n){return e=(e=(e=(e=(e=(e=(e=(e=(e=e||r.G.handleAction(t,o.g.updateInitTiming,(e=>this.updateTiming(i.initialized,n,e))))||r.G.handleAction(t,o.g.updateRenderTiming,(e=>this.updateTiming(i.rendered,n,e))))||r.G.handleAction(t,o.g.updateVisuallyReadyTiming,(e=>this.updateTiming(i.visuallyReady,n,e))))||r.G.handleAction(t,o.g.updateStartLoadingTiming,(e=>this.updateTiming(i.startLoading,n,e))))||r.G.handleAction(t,o.g.updateDomCompleteTiming,(e=>this.updateTiming(i.domComplete,n,e))))||r.G.handleAction(t,o.g.updateExperienceLoadDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:r})=>{e&&t&&v.deferExperienceLoad(n,t,e,i,r)})))))||r.G.handleAction(t,o.g.updateExperienceRenderDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:r})=>{e&&t&&v.deferExperienceRender(n,t,e,i,r)})))))||r.G.handleAction(t,o.g.updateExperienceCurrentState,(e=>e.forEach((({experienceType:e,currentState:t,experienceGroup:i,experienceInstance:r})=>{t&&e&&v.updateExperienceCurrentState(n,e,t,i,r)})))))||r.G.handleAction(t,o.g.updateExperiencePublicState,(e=>{}))}handlePageLevelActions(e,t,n){return e=(e=(e=(e=(e=e||r.G.handleAction(t,o.g.updatePageComplete,(e=>v.updatePageComplete(n,e))))||r.G.handleAction(t,o.g.updateAboveTheFoldVisuallyReady,(e=>v.updateAboveTheFoldVisuallyReady(n,e))))||r.G.handleAction(t,o.g.updateBelowTheFoldTransitionStart,(e=>{(0,y.isNullOrUndefined)(e)||v.updateBelowTheFoldTransitionStart(n,e)})))||r.G.handleAction(t,o.g.updateHydrationComplete,(()=>{v.updateHydrationComplete(n,!0)})))||r.G.handleAction(t,o.g.updateMilestonePlugins,(e=>{e.length>0&&v.updateMilestonePlugin(n,e)}))}updateTiming(e,t,n){const{startTime:i,endTime:r,experienceType:o,experienceGroup:a,experienceInstance:s}=n;v.updateMilestoneTiming(t,o,e,i,r,a,s)}}},49016:function(e,t,n){"use strict";n.d(t,{c:function(){return o},v:function(){return r}});var i=n(73713);let r=new Map;function o(e,t){const n=r.get(e);return!n||n.currentState>=t}(0,i.U)((()=>{r=new Map}))},2820:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(73713);let r={};function o(e,t){return null!=t?r[e]=t:r[e]}(0,i.U)((()=>{r={}}))},68917:function(e,t,n){"use strict";n.d(t,{Gg:function(){return r},ez:function(){return a},ic:function(){return i}});var i,r,o=n(78690);!function(e){e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart"}(i||(i={})),function(e){e[e.startLoading=14]="startLoading",e[e.loaded=4]="loaded",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.aboveTheFoldVisuallyReady=12]="aboveTheFoldVisuallyReady",e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart",e[e.hydrationComplete=1]="hydrationComplete"}(r||(r={}));const a=new Map([[o.D.loaded,r.loaded],[o.D.rendered,r.rendered],[o.D.domComplete,r.domComplete],[o.D.visuallyReady,r.visuallyReady]])},78690:function(e,t,n){"use strict";var i;n.d(t,{D:function(){return i}}),function(e){e[e.notStarted=1]="notStarted",e[e.loadDeferred=2]="loadDeferred",e[e.resolvedForLoad=3]="resolvedForLoad",e[e.loaded=4]="loaded",e[e.initialized=5]="initialized",e[e.renderDeferred=6]="renderDeferred",e[e.resolvedForRender=7]="resolvedForRender",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.error=12]="error",e[e.startLoading=14]="startLoading"}(i||(i={}))},49286:function(e,t,n){"use strict";n.d(t,{$0:function(){return H},og:function(){return U},Qw:function(){return _}});var i=n(55801),r=n(85068);class o extends i.r{getPlacementRules(){var e;return[...super.getPlacementRules(),...null!==(e=this._platformData.placementRules)&&void 0!==e?e:[]]}get id(){return this._platformData.id}get placementSource(){return r.m.Internal}get group(){return this._platformData.group}}var a=n(45896),s=n(43178),c=n(3913),d=n(33940),l=n(78812),u=n(65453);class p extends l.L{get IsValid(){return!!this._contentData&&super.IsValid}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get disclaimerContent(){return this._contentData.disclaimerContent}get engageContentAction(){if(this._contentData.engageContentAction)return Object.assign(Object.assign({},this._contentData.engageContentAction),{actionDelegate:()=>(0,d.mG)(this,void 0,void 0,(function*(){var e,t;const n=yield null===(t=null===(e=this._contentData.engageContentAction)||void 0===e?void 0:e.actionDelegate)||void 0===t?void 0:t.call(e);this.interactionEvent.dispatchEvent({type:u.p.Engaged,ts:Date.now(),followUpPlacement:n})}))})}get dismissContentAction(){if(this._contentData.dismissContentAction||this._contentData.engageContentAction)return Object.assign(Object.assign({label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel},this._contentData.dismissContentAction),{actionDelegate:()=>(0,d.mG)(this,void 0,void 0,(function*(){var e,t;const n=yield null===(t=null===(e=this._contentData.engageContentAction)||void 0===e?void 0:e.actionDelegate)||void 0===t?void 0:t.call(e);this.interactionEvent.dispatchEvent({type:u.p.Dismissed,ts:Date.now(),followUpPlacement:n})}))})}}var h=n(42601);class g extends h.v{get contentType(){return s.J.CallToChoice}get IsValid(){return!!this.title&&!!this.description}}class m extends g{get IsValid(){return!!this._contentData&&super.IsValid}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get choiceOptions(){return this._contentData.choiceOptions||[]}get dismissContentAction(){if(this._contentData.dismissContentAction)return Object.assign(Object.assign({label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel},this._contentData.dismissContentAction),{actionDelegate:()=>(0,d.mG)(this,void 0,void 0,(function*(){var e,t;const n=yield null===(t=null===(e=this._contentData.dismissContentAction)||void 0===e?void 0:e.actionDelegate)||void 0===t?void 0:t.call(e);this.interactionEvent.dispatchEvent({type:u.p.Dismissed,ts:Date.now(),followUpPlacement:n})}))})}}var f=n(16229);class v extends f.r{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get position(){return this._surfaceData.position}get size(){return this._surfaceData.size}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=(e=super.displaySurfaceAction).actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.displaySurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=null===(e=super.hideSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.hideSurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}get closeSurfaceAction(){var e;return Object.assign(Object.assign({ariaLabel:null===(e=this._platformData)||void 0===e?void 0:e.defaultCloseAriaLabel},this._surfaceData.closeSurfaceAction),{actionDelegate:()=>{var e,t,n,i;null===(t=null===(e=super.closeSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.closeSurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}})}}var y=n(49879);class S extends y.C{get surfaceType(){return a.U.ContextualFeedbackCardLevel}}class C extends S{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=(e=super.displaySurfaceAction).actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.displaySurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=null===(e=super.hideSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.hideSurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}}class b extends y.C{get surfaceType(){return a.U.ContextualFeedback}}class w extends b{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=(e=super.displaySurfaceAction).actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.displaySurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=null===(e=super.hideSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.hideSurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}}var T=n(37526);class k extends T.F3{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get transitionEffect(){return this._surfaceData.transitionEffect}get position(){return this._surfaceData.position}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get bannerType(){return this._surfaceData.bannerType}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=(e=super.displaySurfaceAction).actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.displaySurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(t=null===(e=super.hideSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.hideSurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}}}get closeSurfaceAction(){return Object.assign(Object.assign({},this._surfaceData.closeSurfaceAction),{actionDelegate:()=>{var e,t,n,i;null===(t=null===(e=super.closeSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=null===(n=this._surfaceData.closeSurfaceAction)||void 0===n?void 0:n.actionDelegate)||void 0===i||i.call(n)}})}}var P,A=n(86331),I=n(26007);!function(e){e.InternalCoachmark="internal-coachmark",e.InternalHorizontalBanner="internal-horizontal-banner",e.InternalContextualFeedback="internal-contextual-feedback",e.WalktroughCoachmark="walktrough-coachmark"}(P||(P={}));var E=n(81555);function x(e){return e[Math.floor(Math.random()*e.length)]}const M=(e,t,n,i)=>({title:null!=e?e:x(["Buy Something","Take Action","Learn functionality","Do Something"]),description:null!=t?t:x(["Description should be defined here and need to be informative.","Very important Description.","Learn about promotion trough descriptions."]),contentType:s.J.CallToAction,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},engageContentAction:{label:null!=n?n:x(["Engage","Confirm","Go to"]),actionDelegate:()=>{}},dismissContentAction:{label:null!=i?i:x(["Not Now","Later","Dismiss",""]),actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://google.com"},{linkText:"Privacy",linkUrl:"https://google.com"}]}}),O=()=>{const e={surfaceType:a.U.Coachmark,size:A.dm.Medium,position:{coachmarkAnchor:E._.following,anchoringPosition:A.RC.Below,hasPointer:!0,pointerPosition:A.Jt.Center},displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}},closeSurfaceAction:{actionDelegate:()=>{}}},t=M();return{id:"nurturingPlacementManagerTestKey",placementSource:r.m.Internal,group:r.V.Functional,surfaceModel:e,contentModel:t}},L=()=>{const e={surfaceType:a.U.HorizontalBanner,position:x(Object.values(T.bw)),displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},t=M();return{id:"nurturingPlacementManagerTestKey",placementSource:r.m.Internal,group:r.V.Functional,surfaceModel:e,contentModel:t}},D={[P.InternalCoachmark]:O,[P.InternalHorizontalBanner]:L,[P.InternalContextualFeedback]:()=>{const e={surfaceType:a.U.ContextualFeedback,displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},t={title:"Do you like this feed?",description:"Description should be defined here and need to be informative.",contentType:s.J.CallToChoice,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},choiceOptions:[{label:"Yes",actionDelegate:()=>{}},{label:"No",actionDelegate:()=>{}},{label:"Not sure",actionDelegate:()=>{}}],disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://google.com"},{linkText:"Privacy",linkUrl:"https://google.com"}]}};return{id:"nurturingPlacementManagerTestKey",placementSource:r.m.Internal,group:r.V.Functional,surfaceModel:e,contentModel:t}},[P.WalktroughCoachmark]:()=>{const e=O();if(e.surfaceModel.position=A.pY.BottomStart,e.contentModel.engageContentAction){const t=O();t.surfaceModel.position=A.pY.BottomEnd,e.contentModel.engageContentAction=Object.assign(Object.assign({},e.contentModel.engageContentAction),{actionDelegate:()=>(0,d.mG)(void 0,void 0,void 0,(function*(){return t}))})}if(e.contentModel.dismissContentAction){const t=L();e.contentModel.dismissContentAction=Object.assign(Object.assign({},e.contentModel.dismissContentAction),{actionDelegate:()=>(0,d.mG)(void 0,void 0,void 0,(function*(){return t}))})}return e}};var R=n(98304),F=n(65135);const B={[a.U.Coachmark]:e=>new v(e),[a.U.HorizontalBanner]:e=>new k(e),[a.U.ContextualFeedback]:e=>new w(e),[a.U.ContextualFeedbackCardLevel]:e=>new C(e)},N={[s.J.CallToAction]:e=>new p(e),[s.J.CallToChoice]:e=>new m(e)};class U extends c.Dz{constructor(e={}){super(),this._providerStaticContext=e,this.showMockPlacements()}createPlacement(e){const t=B[e.surfaceModel.surfaceType],n=N[e.contentModel.contentType];if(!t||!n)return;let i;const r=Object.assign({},this._providerStaticContext.localizedStrings);try{i=new o(Object.assign(Object.assign({},e),r),t,n)}catch(t){return void F.M0.sendAppErrorEvent(Object.assign(Object.assign({},R.ejn),{message:"Internal data is not valid or missing.",pb:e}))}return i.interactionEvent.dispatchDecorator=e=>{const t=e.followUpPlacement?this.createPlacement(e.followUpPlacement):void 0;return Object.assign(Object.assign({},e),{followUpPlacement:t})},i}sendInternalPlacement(e,t=[]){const n=this.createPlacement(Object.assign(Object.assign({},e),{placementRules:t}));n&&this.providePlacement(n)}showMockPlacements(){(function(){const e=I.c.getQueryParameterByName("nurturingMockPlacement",window.location.search);return e?e.split(",").map((e=>e.trim())):[]})().forEach((e=>{const t=D[e];t&&this.sendInternalPlacement(t())}))}}let $;const _=e=>{$=e},H=()=>$},55801:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var i=n(76323),r=n(27050);class o{constructor(e,t,n){if(this._platformData=e,this._surfaceTemplateMapper=t,this._contentTemplateMapper=n,this.interactionEvent=new r.z,!e)throw new Error("Platform data is required for PlacementModel")}get surfaceModel(){return(0,i.p)((()=>{const e=this._surfaceTemplateMapper(this._platformData);return e.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),e}))()}get contentModel(){return(0,i.p)((()=>{const e=this._contentTemplateMapper(this._platformData);return e.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),e}))()}get IsValid(){return!!this.id&&this.surfaceModel.IsValid&&this.contentModel.IsValid}getPlacementRules(){return[]}}},27050:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});class i{constructor(){this._eventListeners=new Set}addEventListener(e){this._eventListeners.add(e)}removeEventListener(e){this._eventListeners.delete(e)}dispatchEvent(e){this._eventListeners.forEach((t=>this.dispatchDecorator?t(this.dispatchDecorator(e)):t(e)))}}},85068:function(e,t,n){"use strict";var i,r;n.d(t,{V:function(){return r},m:function(){return i}}),function(e){e.Iris="Iris",e.Amplify="Amplify",e.Internal="Internal"}(i||(i={})),function(e){e.Default="Default",e.Promotional="Promotional",e.Functional="Functional",e.Settings="Settings"}(r||(r={}))},42601:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=n(27050);class r{constructor(e){if(this._platformData=e,this.interactionEvent=new i.z,!e)throw new Error("Platform data is required for ContentTemplateModel")}}},78812:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(42601),r=n(43178);class o extends i.v{get contentType(){return r.J.CallToAction}get IsValid(){return!!this.title&&!!this.description}}},43178:function(e,t,n){"use strict";var i;n.d(t,{J:function(){return i}}),function(e){e.CallToAction="CallToAction",e.CallToChoice="CallToChoice"}(i||(i={}))},65453:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.Served="Served",e.Viewed="Viewed",e.Hidden="Hidden",e.Engaged="Engaged",e.Dismissed="Dismissed",e.Closed="Closed"}(i||(i={}))},3913:function(e,t,n){"use strict";n.d(t,{Dz:function(){return r},iU:function(){return i}});class i{}class r extends i{constructor(){super(...arguments),this._placementsQueue=[]}providePlacement(e){this._callback?this._callback(e):this._placementsQueue.push(e)}subscribeForPlacementStream(e){this._callback||(this._callback=e,this._placementsQueue.forEach((t=>e(t))))}}},49879:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(27050),r=n(65453);class o{constructor(e){if(this._platformData=e,this.interactionEvent=new i.z,!e)throw new Error("Platform data is required for PlacementSurfaceModel")}get displaySurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:r.p.Viewed,ts:Date.now()})}}}get hideSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:r.p.Hidden,ts:Date.now()})}}}get closeSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:r.p.Closed,ts:Date.now()})}}}}},16229:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var i=n(49879),r=n(45896);class o extends i.C{get IsValid(){return!!this.size}get surfaceType(){return r.U.Coachmark}}},37526:function(e,t,n){"use strict";n.d(t,{F3:function(){return c},Sy:function(){return r},bw:function(){return o},pp:function(){return i}});var i,r,o,a=n(49879),s=n(45896);!function(e){e.Promotional="Promotional",e.LegalCompliance="LegalCompliance"}(i||(i={})),function(e){e.SlideUp="SlideUp",e.FadeIn="FadeIn",e.SlideRight="SlideRight"}(r||(r={})),function(e){e.Top="Top",e.Bottom="Bottom"}(o||(o={}));class c extends a.C{get IsValid(){return!!this.position}get surfaceType(){return s.U.HorizontalBanner}}},45896:function(e,t,n){"use strict";var i;n.d(t,{U:function(){return i}}),function(e){e.Coachmark="Coachmark",e.HorizontalBanner="HorizontalBanner",e.RiverCard="RiverCard",e.ContextualFeedback="ContextualFeedback",e.ContextualFeedbackCardLevel="ContextualFeedbackCardLevel"}(i||(i={}))},97555:function(e,t,n){"use strict";function i(e,t,n){return(i,r)=>{let o=(null==r?void 0:r[i.id])||[];const{relatedPlacementIds:a,slidingWindowMS:s}=n||{};if(null==a?void 0:a.length){const e=a.filter((e=>e!==i.id)).flatMap((e=>(null==r?void 0:r[e])||[]));o.push(...e)}if(s&&(o=o.filter((e=>e.ts>Date.now()-s))),!o.length)return!0;return((null==o?void 0:o.filter((t=>t.type===e)).length)||0)<t}}n.d(t,{l:function(){return i}})},71219:function(e,t,n){"use strict";function i(e,t){if(!e||!t)throw new Error("PlacementInteractionsThrottle: Invalid parameters.");return(n,i)=>{if(!n)return!1;if(!i)return!0;let r;return Object.values(i).flat().forEach((t=>{(null==t?void 0:t.type)===e&&(null==t?void 0:t.ts)&&(!r||r.ts<t.ts)&&(r=t)})),!(r&&Date.now()-r.ts<=t)}}function r(e,t,n){return(i,r)=>{if(!i)return!1;const o=(null==r?void 0:r[i.id])||[],{relatedPlacementIds:a}=n||{};if(null==a?void 0:a.length){const e=a.filter((e=>e!==i.id)).flatMap((e=>(null==r?void 0:r[e])||[]));o.push(...e)}if(!o.length)return!0;let s;return o.forEach((t=>{(null==t?void 0:t.type)===e&&(null==t?void 0:t.ts)&&(!s||s.ts<t.ts)&&(s=t)})),!s||Date.now()-s.ts>t}}n.d(t,{H:function(){return r},S:function(){return i}})},91470:function(e,t,n){"use strict";n.d(t,{f:function(){return d}});var i=n(53899),r=n(3900),o=n(987),a=n(68723),s=n(53076),c=n(82423);function d(e,t){const n=(0,r.$z)();let d;if(e&&n&&(d=e[n]),!t){const e=(0,c.K0)(s.z.AdminPortalData),n=e&&e.getCurrentState();t=n?n.settings:(0,o.$o)().getObject(a.Ai)}if(!t)return d;const{adminSelectedNavId:l,isOfficeContentEnabled:u,isShowCompanyAndIndustry:p}=t;let h;return e&&l&&(h=e[l]),u&&p?d||h||i.iz.MicrosoftNews:u?i.iz.Office365:i.iz.MicrosoftNews}},12611:function(e,t,n){"use strict";n.d(t,{Jw:function(){return c},LZ:function(){return l},N:function(){return S},SY:function(){return d},Sn:function(){return u},TL:function(){return y},XA:function(){return f},_0:function(){return g},cx:function(){return a.c},hA:function(){return h},ni:function(){return s},v9:function(){return v},xD:function(){return p}});var i=n(44772),r=n(98304),o=n(65135),a=n(20479);function s(e,t=!1,n=!1,i){if(!e)return e;if(Array.isArray(e)){if(!e.length)return e;e=e[0]}if(!e||!e.subCards||!Array.isArray(e.subCards))return e;const a=e.subCards.map((e=>c(e,t,n,i)));return!e.subCards.length||a&&a.length&&e.subCards.length===a.length||o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.eto),{message:"Mapper returned invalid data",pb:Object.assign(Object.assign({},r.eto.pb),{customMessage:`Count mismatch - expected count [${e.subCards.length}] - actual count [${a.length}]`})})),{feedItems:a,nextPageUrl:e.nextPageUrl}}function c(e,t=!1,n=!1,r){if(!e)return{};if(e.type===i.PL.AiCharacterCard||e.type===i.PL.BingHealthFitnessCard||e.type===i.PL.BoostAd||e.type===i.PL.CashbackAds||e.type===i.PL.CommunityCard||e.type===i.PL.Elections||e.type===i.PL.EsportsCasualGames||e.type===i.PL.EsportsHighlight||e.type===i.PL.EsportsLiveStream||e.type===i.PL.EventSDCardAmplifyAds||e.type===i.PL.EventSDCardShopping||e.type===i.PL.EventSDCardSportsMIT1||e.type===i.PL.EventSDCardSportsMIT2||e.type===i.PL.EventSDCardSportsMIT3||e.type===i.PL.EventSDCardWorldCup||e.type===i.PL.EventSDCardWorldCup2||e.type===i.PL.GroupedContent||e.type===i.PL.HealthRiverCard||e.type===i.PL.HealthTipCard||e.type===i.PL.LinkedInCard||e.type===i.PL.LocalGuide||e.type===i.PL.LocalNews||e.type===i.PL.LocalNewsFeed||e.type===i.PL.MyBriefRiverCard||e.type===i.PL.RecommendedSearchesCard||e.type===i.PL.Promotion||e.type===i.PL.SageGroupedFeed||e.type===i.PL.ShoppingFeedCard||e.type===i.PL.ShoppingMerchantCategoryDeals||e.type===i.PL.ShoppingProngCardResponse||e.type===i.PL.ShoppingProngTracking||e.type===i.PL.SportsMatch||e.type===i.PL.SportsOlympics||e.type===i.PL.StockQuote||e.type===i.PL.StockQuote_spotlight||e.type===i.PL.TopStories||e.type===i.PL.TrafficDelays||e.type===i.PL.TrafficInfo||e.type===i.PL.Transit||e.type===i.PL.TravelDestinationCard||e.type===i.PL.Upsell||e.type===i.PL.UserInterestNTPProvider||e.type===i.PL.UserInterestTopic||e.type===i.PL.UserInterestProvider||e.type===i.PL.UserInterestTopicAndProvider||e.type===i.PL.TopicSuggestionforConsumptionPage||e.type===i.PL.ProviderSuggestionForConsumptionPage||e.type===i.PL.VideoShoppingCard||e.type===i.PL.WeatherSummary||e.type===i.PL.WeatherSummary_spotlight||e.type===i.PL.WorkHeadlines||e.type===i.PL.WindowsShellTrendingTopics||e.type===i.PL.ColdStartArticleFreCard||e.type===i.PL.MoneyInfo||e.type===i.PL.MoneyMoreForYouCard||e.type===i.PL.WindowsShellMorningDigest)return e;const o=(e.type||"").toLowerCase();if(o.startsWith("gold")||o.startsWith("combo:"))return e;if(e.type===i.PL.TopicFeed)return h(e);const s=e.wpoMetadata&&e.wpoMetadata.contentType,g=s===i.PL.NewsGroups||s===i.PL.NewsAnswerModule;if(n&&e.type===i.PL.Infopane&&!g)return e;if(e.type===i.PL.ComboCard)return u(e);if(e.subCards)return t||e.type===i.PL.NewsPromotionCard?{subItems:e.subCards.map((e=>c(e))),type:e.type||"tabbedInfopane"}:p(e,r);if(e.type===i.PL.ExternalLink)return d(e);if(e.type===i.PL.WebContent&&!n)return l(e);const{abstract:m="",actions:C=[],aiComments:b,badges:w,cardId:T,category:k,colorSamples:P,commentStatus:A,commentSummary:I,dataUrl:E,engagementSummary:x,externalVideoFiles:M,feed:O={},financeMetadata:L,id:D,images:R,isBreaking:F,isFeatured:B,isLocalContent:N,isLocalNews:U,locale:$,position:_,provider:H={},publishedDateTime:W,reactionStatus:j,reactionSummary:G,notificationMetadata:V,reasons:q,recoId:z,relatedCards:Q,ri:Z,rotPos:K,sourceId:J,spotlightStamp:X,title:Y="",topComments:ee,topics:te=[],traceIdIndex:ne,type:ie,url:re,videoMetadata:oe}=e,ae=y(R)||{},se=M||[],ce=te.find((e=>e.feedId===O.id&&e.locale===$)),de=v(re);let le=f(H.logoUrl);!le&&H.logo&&H.logo.url&&(le=f(H.logo.url));const ue=C.map((e=>S[e]||e));return w&&w.some((e=>"followedPublisher"===e.type))&&ue.push("followedPublisher"),{id:D,cardId:T,cardContent:{abstract:m,aiComments:b,badges:w,colorSamples:P,category:{product:k,label:void 0},destinationUrl:re,financeMetadata:L,id:D,isLocalContent:N,isLocalNews:U,isBreaking:F||0,isFeatured:B||!1,images:[{id:f(ae.url),height:ae.height,width:ae.width,caption:ae.title,focalRegion:ae.focalRegion,attribution:ae.attribution,source:ae.source,url:ae.url,colorSamples:ae.colorSamples}],kicker:Y,locale:$,provider:{id:H.id,name:H.name,logo:{id:le},logoUrl:H.logoUrl||H.logo&&H.logo.url,profileId:H.profileId,subscribable:!1},publishedDateTime:W,reasons:q,sourceHref:E,sourceId:J,notificationMetadata:V,type:(0,a.c)(ie),title:Y,topics:te,tags:[ce||{}],uriTitle:de[6],videoFiles:se},metadata:{abstractLength:m.length,titleLength:Y.length,category:k||de[4],subCategory:de[5],primaryImage:{height:ae.height,width:ae.width},locale:$,feed:{id:O.id},kicker:[O],actions:ue,reactionStatus:j,commentStatus:A,reactionSummary:G,commentSummary:I,engagementSummary:x,reasons:q,topComments:ee,recoId:z,relatedCards:Q,ri:Z,videoMetadata:oe},reasons:q,position:_,rotPos:K,spotlightStamp:X,type:ie,traceIdIndex:ne||r}}function d(e){const{type:t,category:n,images:i,id:r,url:o,abstract:a="",title:s="",provider:c={},feed:d={},cardId:l,position:u,rotPos:p}=e,h=y(i)||{},g=v(o),{uiHint:m,actionText:S}=e.uiMetadata||{};let C=f(c.logoUrl);return!C&&c.logo&&c.logo.url&&(C=f(c.logo.url)),{id:r,cardId:l,position:u,rotPos:p,type:t,metadata:{abstractLength:a.length,title:s,titleLength:s.length,category:n||g[4],subCategory:"other",primaryImage:{height:h.height,width:h.width,url:h.url},locale:g[3],url:o,abstract:a,uiHint:m,actionText:S,feed:{id:d.id},kicker:[{feedName:d.feedName}]},cardContent:{id:r,type:t,title:s,abstract:a,category:{product:n,label:void 0},provider:{id:c.id,name:c.name,logo:{id:C},logoUrl:c.logoUrl||c.logo&&c.logo.url,subscribable:!1},images:[{id:f(h.url),height:h.height,width:h.width,caption:h.title,focalRegion:h.focalRegion,attribution:h.attribution,url:h.url,colorSamples:h.colorSamples}],kicker:s,destinationUrl:o}}}function l(e){const{id:t,cardId:n,type:i,images:r,url:o,category:a,locale:s,reactionStatus:c,commentStatus:d,reactionSummary:l,commentSummary:u,tag:p,abstract:h="",feed:g={},title:m="",provider:C={},actions:b=[],isBreaking:w=0,externalVideoFiles:T={},publishedDateTime:k,colorSamples:P,dataUrl:A,sourceId:I,financeMetadata:E,isLocalContent:x,position:M,rotPos:O,videoMetadata:L={}}=e,D=y(r)||{},R=v(o);return{id:t,cardId:n,position:M,rotPos:O,type:i,metadata:{abstract:h,abstractLength:h.length,titleLength:m.length,category:a||R[4],subCategory:R[5],publishedDateTime:k,externalVideoFiles:T,locale:s,feed:{id:g.id},kicker:[g],actions:b.map((e=>S[e]||e)),reactionStatus:c,commentStatus:d,reactionSummary:l,commentSummary:u,primaryImage:{height:D.height,width:D.width,url:D.url},url:o,title:m,provider:{name:C.name,logo:{url:C.logoUrl}},viewCount:L.viewCount},cardContent:{id:t,type:i,title:m,abstract:h,isBreaking:w,tags:[p||{}],provider:{id:C.id,name:C.name,logoUrl:C.logoUrl,image:{alt:C.name,src:C.logoUrl}},category:{product:a,label:void 0},locale:s,images:[{id:f(D.url),height:D.height,width:D.width,caption:D.title,focalRegion:D.focalRegion,attribution:D.attribution,url:D.url,colorSamples:D.colorSamples}],colorSamples:P,videoFiles:T,publishedDateTime:k,kicker:m,sourceHref:A,destinationUrl:o,sourceId:I,financeMetadata:E,isLocalContent:x}}}function u(e){const{subCards:t}=e||{},n=t&&t.map((e=>c(e)));return Object.assign(Object.assign({},e),{subItems:n,subCards:null})}function p(e,t){const{type:n,title:i,wpoMetadata:r,subType:o,rotPos:a,position:s,cardId:d}=e,l={cardId:d,metadata:{title:i},position:s,subItems:e.subCards.map((e=>c(e))),subType:o,type:n,rotPos:a,traceIdIndex:t};return r&&(l.wpoMetadata=r),l}function h(e){return e.feed&&"linkedinnews"===e.feed.canonicalName?e.type=i.PL.LinkedInCard:(e.feed&&(e.feed.canonicalName===i.PL.TopicFeedWeekends||e.feed.canonicalName===i.PL.TopicFeedMomentInTime1)||e.feed.canonicalName===i.PL.TopicFeedShopping||e.feed.canonicalName===i.PL.TopicFeedWeather)&&(e.type=i.PL.TopicFeedMomentInTime1),e}function g(e){return e}const m=new RegExp(/bing.(com|net)\/th/);function f(e){if(!e)return"";if(m.test(e))return;const t=e.split("/");return y(t)&&t[t.length-1].replace(".img","")}function v(e){return e?e.split("/"):[]}function y(e=[],t=0){return e[t]}const S={liked:"like",unliked:"unlike",saved:"save"}},34126:function(e,t,n){"use strict";n.d(t,{X:function(){return C}});var i=n(33940),r=n(23547),o=n(56692),a=n(10877),s=n(45506),c=n(26007),d=n(63535),l=n(87298),u=n(19809),p=n(25568),h=n(33799),g=n(98304),m=n(51125),f=n(65135),v=n(12884),y=n(51671),S=n(95378);class C{constructor(e){this.treatmentQueryStringParam="Treatment",this.wpoitemsStringParam=p.hE.wpoitems,this.cardContext=e}fetch(e={}){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),{ocid:u,flightData:h,treatment:y,apiVersion:C="v1",scenario:b,feedCluster:w,pivotId:T,templateId:k}=e||{},{nextPageUrl:P}=e||{},A=(0,m.Ee)(),I=e&&("shell"===e.contextSource||"shellv2"===e.contextSource),E=I&&e.isXfeed;let x,M=`${C}/news/feed/windows/${k}`;M=I?this.buildShellRequest(e,M):this.buildWinWidgetsRequest(e,M);const O=new URLSearchParams((0,v.zp)());if(x=O.get(p.YU)?new URL(M,p.LJ):(0,d.fU)(M),P){const e=new r.h(new URL(P).search);A>0&&e.set(m.i$,A.toString()),o.jG.SendFeedCallActivityIdInHeader||!o.jG.ActivityId||I||e.set("activityId",o.jG.ActivityId),I&&!e.get("scn")&&e.set("scn",a.Ji),x.search=e.toString()}else{const e=[...yield this.getCommonParams(u,h)];A>0&&e.push({key:m.i$,value:A.toString()}),e.forEach((e=>e.value&&x.searchParams.set(e.key,e.value))),y&&x.searchParams.set(this.treatmentQueryStringParam,y)}I&&(x.searchParams.set("caller","peregrine"),"following"===e.pivotId&&x.searchParams.set("wposchema","byregion"));const L="Following"===T;if((e&&"winWidgets"===e.contextSource||E)&&e.feedId){const t=L&&!e.feedId.startsWith("Y_")?p.hE.providerId:p.hE.interestIds;x.searchParams.set(t,e.feedId)}L&&(x.searchParams.set(p.hE.includeFollowingFilters,"true"),e.feedId&&s.Al.CurrentFlightSet.has("prg-pr2fol-time")&&(x.searchParams.set(p.hE.ocid,p.i9),x.searchParams.set(p.hE.apiKey,p.S1))),w&&(x.searchParams.set("query","UserFre"),x.searchParams.set("entityids",w),x.searchParams.set("DisableTypeSerialization","true"),x.searchParams.set("wrapodata","false")),e&&e.count&&x.searchParams.set("$top",`${e.count}`);const D=x.searchParams.get(o.jG.OneServiceContentMarketQspKey);D&&x.searchParams.set("osLocale",D),o.jG.SendFeedCallActivityIdInHeader&&x.searchParams.delete("activityId");const R=c.c.getParamsWithItems(location.search);if(R){const t=R.find((e=>"idxExperienceTypeOverride"===e.key)),n=R.find((e=>"idxContentTypeOverride"===e.key)),i=R.find((e=>"idxTreatmentOverride"===e.key)),r=R.find((e=>"idxWpoKnobidsOverride"===e.key)),o=R.find((e=>"idxWpoEventRuleOverride"===e.key));if(t&&x.searchParams.set("Experience",t.value),n){const t=e.contentType?e.contentType:"article,video,slideshow",i=[...new Set(`${t},${n.value}`.split(","))];x.searchParams.set("contentType",i.join(","))}i&&x.searchParams.set(this.treatmentQueryStringParam,i.value),r&&x.searchParams.set(this.wpoitemsStringParam,`knobids:${r.value}`),o&&x.searchParams.set(this.wpoitemsStringParam,`byPassEventRule:${o.value}`)}b&&x.searchParams.set("scenario",b),x.searchParams.sort();try{const r=yield(0,l.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){return yield fetch(decodeURIComponent(x.href),t)}))),"WindowsCardProvider.fetch"),{status:s,statusText:c}=r||{},d="Following"===T,u=d&&204===s&&!x.searchParams.has("skip");if(!(r&&r.ok||d))return void f.M0.sendAppErrorEvent(Object.assign(Object.assign({},g.mfB),{message:r?"OneService returned error response":"OneService response was null",pb:Object.assign(Object.assign({},g.mfB.pb),{fetchNetworkResponse:{statusCode:s,statusText:c,activityId:o.jG.ActivityId,requestUrl:x.href,requestHeaders:JSON.stringify(t&&t.headers),xfeed:E?`feedID: ${e.feedId} is not valid with respect to locale and market`:"not XFeed"},responseHeaders:this.getResponseHeaders(r)})}));if(204===r.status&&("shell"===e.contextSource&&f.M0.sendAppErrorEvent(Object.assign(Object.assign({},g.U7j),{message:"OneService returned empty content 204 response",pb:Object.assign(Object.assign({},g.U7j.pb),{fetchNetworkResponse:{statusCode:r.status,statusText:r.statusText,activityId:o.jG.ActivityId,requestUrl:x.href,requestHeaders:JSON.stringify(t&&t.headers)},responseHeaders:this.getResponseHeaders(r)})})),!u))return{cards:[],netStatus:204};let p,h,m;if(r.headers){if(h=r.headers.get("X-Statics-Fallback"),h){const e=Object.assign(Object.assign({},g.kiM.pb),{activityId:o.jG.ActivityId,responseHeaders:this.getResponseHeaders(r),requestUrl:x.href});E&&(e.isXFeed=1),f.M0.sendAppErrorEvent(Object.assign(Object.assign({},g.kiM),{pb:e,message:"Static fallback content received"}))}const e=r.headers.get(a.rD.traceId);p=f.M0.addOrUpdateIdxId(e,!P)}const v=r&&(!r.ok||204===s);if(m=!d||r&&!v?yield r.json():yield n.e("SignInData").then(n.t.bind(n,81096,19)),w&&m){return{layoutTemplate:e&&e.count&&24===e.count?"ShellTwoColumn-14HalfCard-HalfTopstory":"ShellTwoColumn-Four1U",cards:m.subCards}}return"winWidgets"!==e.contextSource&&!E||!m.sections||e.useRawJson?Object.assign(Object.assign({},m),{traceIdIndex:p,isStatic:h}):m.sections[0]}catch(e){const n=(0,S.Z)(t,"headers.Authorization");f.M0.sendAppErrorEvent(Object.assign(Object.assign({},g.IVG),{message:"Error while fetching OneService response",pb:Object.assign(Object.assign({},g.IVG.pb),{customMessage:`Error: ${e}`,fetchNetworkResponse:{activityId:o.jG.ActivityId,requestUrl:x.href,requestHeaders:JSON.stringify(n&&n.headers)}})}))}}))}getRequestInit(e={method:"GET"}){return(0,i.mG)(this,void 0,void 0,(function*(){return e.credentials="include",e.headers=yield u.$D.getOneServiceFeedCallHeaders(),e}))}getCommonParams(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield(0,y.XJ)())===h.Hy.SignedIn?u.$D.getOneServiceParamsWithAuth(o.jG.UserId,e,!1,t):u.$D.getOneServiceParamsWithoutAuth(o.jG.UserId,e,!1,t)}))}getResponseHeaders(e){return e&&e.headers?JSON.stringify({"Akamai-Request-ID":e.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":e.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":e.headers.get("X-MSEdge-Ref")}):null}buildShellRequest(e,t){const{pivotId:n,isXfeed:i}=e||{};let{nextPageUrl:r}=e||{};return i&&("following"===n?(t=`${p.hZ}${p.Pg}`,r&&r.includes(p.H0)&&(r="")):e.feedId&&(t=`${p.hZ}${p.H0}`)),t}buildWinWidgetsRequest(e,t){const{feedCluster:n,pivotId:i,isXfeed:r}=e||{};let{nextPageUrl:o}=e||{};if(r)if("Following"===i)if(e.feedId)t=`${p.hZ}${p.Qs}`,f.M0.addOrUpdateTmplProperty("filtered-feed","1"),o&&(o.includes(p.kX)||o.includes(p.Td)||!o.includes(e.feedId))&&(o="");else{const n="filteredChannels"===e.feedName?p.Td:p.kX;t=`${p.hZ}${n}`,(null==o?void 0:o.includes(p.Qs))&&(o="")}else e.feedId&&(t=n?"news/feed":`${p.hZ}${p.H0}`);return t}}},51125:function(e,t,n){"use strict";n.d(t,{Dz:function(){return S},Ee:function(){return f},N:function(){return y},T1:function(){return g},e5:function(){return C},i$:function(){return d},j9:function(){return m},s6:function(){return v}});var i=n(33940),r=n(42420),o=n(56692),a=n(17873),s=n(67462);const c=10/1440,d="cbypass";let l="",u=!1,p=0;let h=parseInt((0,s.ej)(d))||0;function g(){return(0,i.mG)(this,void 0,void 0,(function*(){h=Date.now(),(0,s.sq)(d,h.toString(),c,o.jG.HostPage.topDomain,"/"),yield r.U.purgeCacheAsync(r.R.river),(0,a.mS)({id:"updatemyfeed",payload:h})}))}function m(){return(0,i.mG)(this,void 0,void 0,(function*(){h=Date.now(),(0,s.sq)(d,h.toString(),c,o.jG.HostPage.topDomain,"/"),yield r.U.purgeCacheAsync(r.R.river)}))}function f(){return h}function v(e){h>0&&e.searchParams.set(d,h.toString())}function y(){return l}function S(e,t){if(!e)return;if(t)return l=e,void(p=1);if(p>=10)return;const n=l?`${l},${e}`:e;p+=1,l=n}function C(e){!0!==e&&"true"!==e||(u=!0)}},82037:function(e,t,n){"use strict";n.d(t,{fK:function(){return p},rg:function(){return g},tW:function(){return h}});var i=n(33940),r=n(68364),o=n(98304),a=n(45506),s=n(32005);const c="//assets.msn",d="prg-1s-bkupdmnt",l="prg-1s-bkupdmnt1",u="prg-1s-bkupdmnt3";function p(){const e=a.Al.CurrentFlightSet;return!(!e||!(e.has(d)||e.has(l)||e.has("prg-1s-bkupdmnt2")||e.has(u)))}function h(){const e=a.Al.CurrentFlightSet;return!(!e||!e.has(d)&&!e.has(l))}function g(e,t={},n,d=!1){return(0,i.mG)(this,void 0,void 0,(function*(){let i;try{if(i=yield(0,s.Sm)(e,n,t),i&&i.ok)return i}catch(t){(0,r.OO)(t,o.Qsh,o.Qsh.message,`Failed URL: ${e}`)}return i&&i.headers&&i.headers.get("OneWebServiceLatency")||d?i:(e=a.Al.CurrentFlightSet&&a.Al.CurrentFlightSet.has(u)?e.replace(c,"//api.msn").replace("/service/","/"):e.replace(c,"//assets2.msn"),(0,s.Sm)(e,n,t))}))}},19809:function(e,t,n){"use strict";n.d(t,{$D:function(){return L}});var i=n(33940),r=n(33799),o=n(56692),a=n(61285),s=n(45506),c=n(10877),d=n(27583),l=n(1038),u=n(987),p=n(99038),h=n(23547),g=n(76323),m=n(4875),f=n(34042),v=n(51671),y=n(72447),S=n(33379),C=n(2140),b=n(17157),w=n(11380),T=n(98304),k=n(65135),P=n(73932),A=n(75270),I=n(79022),E=n(27496);const x="prg-telemetry-trace",M="traceparent";function O(e){if("Peregrine"===e){const e=(0,o.Yq)();null===k.M0||void 0===k.M0||k.M0.sendAppErrorEvent(Object.assign(Object.assign({},T.EDA),{message:"Generated OneService params with generic ocid value 'Peregrine'.",pb:Object.assign(Object.assign({},T.EDA.pb),{appType:e.AppType,hostPage:e.HostPage,stackTrace:Error().stack})}),!1)}}var L;!function(e){function t(e=null,t,n=!1,i=null,r=!1,c=(0,m.VQ)()){const d=(0,o.Yq)(),l=[{key:"apikey",value:d.OneServiceApiKey},{key:"activityId",value:d.ActivityId},{key:"ocid",value:n?T(d.TrackInfo,t):t},{key:d.OneServiceContentMarketQspKey,value:d.CurrentMarket},{key:"it",value:(0,a.E)()}];if(O(l.find((e=>"ocid"==e.key)).value),!d.SendUserIdInHeader&&e&&l.push({key:"user",value:e}),c&&l.push({key:m.rZ,value:m.AN}),s.Al.IsBlendedEnterprise&&l.push({key:"audienceMode",value:"enterprise"}),d.ShouldUseFdheadQsp){let e=(0,s.nP)().CurrentFlights;if(i){e=e?`${e},${i}`:i;const t="prg-bngimg-t";-1===e.indexOf(t)&&(e+=","+t),!0===r&&(e=i)}l.push({key:"fdhead",value:e})}if(s.Al&&s.Al.CurrentFlightSet&&s.Al.CurrentFlightSet.has(x)){const e=P.U.getTraceInstance(),t="00-"+e.getTraceId(!0)+"-"+e.getSpanId(!0)+"-00";l.push({key:"traceparent",value:t})}return l}function n(e=(0,m.VQ)(),t,n,a){var p,h,g;return(0,i.mG)(this,void 0,void 0,(function*(){const i={};let m;const T=(0,o.Yq)()||{};if((0,s.nP)().CurrentFlights&&(0,s.nP)().CurrentFlights.includes("prg-tracingheader")){const e=P.U.getTraceInstance(),t=e.getTraceId(!0),n=e.getSpanId(!0);i[c.Yu.traceParent]="00-"+t+"-"+n+"-00"}if("windowsShell"===T.AppType||"windowsShellV2"===T.AppType)T.IsWinAADUser&&(m=yield k(),Object.assign(i,(0,d.tx)(m)));else if("winWidgets"===T.AppType){if((0,S.N)()&&"function"==typeof window.createWindowsWidget1SAuthHeaders){const e=yield window.createWindowsWidget1SAuthHeaders();Object.assign(i,e)}}else{if(T.WidgetAttributes){m=(yield(0,f.yb)()).tokenValue}if(("shopping"==T.AppType||"views"==T.AppType)&&(0,b.wq)()){if((yield(0,v.YX)()).accountType==r.Qm.MSA){Object.assign(i,yield(0,w.dG)());for(const e in i)0===e.indexOf("X-MSEdge")&&delete i[e];return i.SiteName=`api.msn.${T.topDomain}`,(0,w.VQ)(i),i}}if(!m)if(e&&!(yield T.isGccModUser)){const e={id:l.d3,friendlyName:l.Ak},t=yield null===(p=(0,A.Kf)())||void 0===p?void 0:p.getAuthData(e);m=null==t?void 0:t.authToken}else if("gaming"===n&&a&&(0,S.N)()){const e=(0,u.$o)().getObject("xboxXTokenId");e&&e.notAfter&&new Date(e.notAfter)>new Date&&(i[c.Yu.xboxToken]=JSON.stringify(e))}else if(!(null==t?void 0:t.skipDualAuthHeader)&&(0,d.P8)()&&!(0,d.TJ)()){const e=(0,d.hk)()?yield(0,y.IY)():(0,d.aS)();m=null==e?void 0:e.accessToken}Object.assign(i,(0,d.me)(m))}if(!(0,S.N)()){const{oneServiceHeaders:e,cookie:t,referer:n,clientData:r}=(0,C.s)();e&&Object.assign(i,e),r&&(i["X-Client-Data"]=r),t&&(i.Cookie=t),n&&(i.Referer=n);const o=null===(g=null===(h=(0,s.nP)().ClientSettings)||void 0===h?void 0:h.detection)||void 0===g?void 0:g.ip;o&&(i["X-FD-ClientIP"]=o,i["X-MSEdge-ClientIP"]=o)}return i}))}function T(e,t){return p.b.isNonNullObject(e)&&p.b.isNonNullObject(e.sitePage)&&(0,I.Z)(e.sitePage.page_product)&&(0,I.Z)(e.sitePage.page_type)?e.sitePage.page_product+"-"+e.sitePage.page_type+(t?"-"+t:""):t}e.serviceRequestOnComplete=function(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){try{const n=yield e();return t(),n}catch(e){throw t(),e}}))},e.getOneServiceParamsWithoutAuth=t,e.getOneServiceNonDynamicParamsWithoutAuth=function(e,t=!1){const n=(0,o.Yq)(),i=[{key:"apikey",value:n.OneServiceApiKey},{key:"ocid",value:t?T(n.TrackInfo,e):e},{key:n.OneServiceContentMarketQspKey,value:n.CurrentMarket}];return O(i.find((e=>"ocid"==e.key)).value),(0,m.VQ)()&&i.push({key:m.rZ,value:m.AN}),i},e.getOneServiceParamsWithAuth=function(e=null,n,i=!1,r=null,a=!1){const s=(0,o.Yq)(),c=[...t(e,n,i,r,a)],d=s.AuthCookieName;return d&&c.push({key:"scn",value:d.toUpperCase()}),c},e.getOneServiceHeaders=n,e.getOneServiceFeedCallHeaders=function(e,t,r){return(0,i.mG)(this,void 0,void 0,(function*(){const i=yield n(e,null,t,r),a=(0,o.Yq)(),s=a.ActivityId;return a.SendFeedCallActivityIdInHeader&&s&&(i[c.Yu.activityId]=s),i}))},e.getLocationParams=function(e,t){const n=(0,o.Yq)(),i=e||n.Latitude,r=t||n.Longitude;return i&&r?{key:"location",value:`${i}|${r}`}:null},e.getOneServiceOCID=T,e.getBaseRequestData=function(t,n){return(0,i.mG)(this,void 0,void 0,(function*(){return{headers:yield e.getOneServiceHeaders((0,m.VQ)(),n),method:t}}))},e.getCommonParams=function(e,t=!1){return(0,s.nP)().UserIsSignedIn?this.getOneServiceParamsWithAuth((0,o.Yq)().UserId,e,t):this.getOneServiceParamsWithoutAuth((0,o.Yq)().UserId,e,t)},e.getCommonParams2=function(e,t=!1,n=!1){return(0,v.hC)()?this.getOneServiceParamsWithAuth((0,o.Yq)().UserId,e,t,n):this.getOneServiceParamsWithoutAuth((0,o.Yq)().UserId,e,t,n)},e.urlContainsOcidParam=function(e){if(!e)return!1;const t=e.split("?");if(t.length<2)return!1;const n=t[1].split("#")[0];return!!new h.h(n).get("ocid")},e.removeOcidFromUrl=function(e){if(!e)return e;const t=e.split("?");if(t.length<2)return e;const n=t[1].split("#")[0],i=new h.h(n);if(i.get("ocid")){i.delete("ocid");let t=e.replace(n,i.toString());return"?"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}return e},e.removeOcidFromRiverCardProviderResponse=function(t){t&&t.cardMetadata&&t.cardMetadata.length&&t.cardMetadata.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl?t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl):t.subItems&&t.subItems.length&&t.subItems.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl&&(t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl))})),t.metadata&&t.metadata.relatedCards&&t.metadata.relatedCards.forEach((t=>{t.url=e.removeOcidFromUrl(t.url)}))}))},e.removeOcidFromWindowsOneServiceResponse=function(t){t&&t.cards&&t.cards.forEach((t=>{t.subCards.forEach((t=>{t.url?t.url=e.removeOcidFromUrl(t.url):t.subCards&&t.subCards.forEach((t=>{t.url&&(t.url=e.removeOcidFromUrl(t.url))}))}))}))};const k=(0,g.p)((()=>(0,i.mG)(this,void 0,void 0,(function*(){if(!((0,S.N)()&&window&&window.ShellFeedsApp&&window.ShellFeedsApp.getQueryHeadersAsync))return;const e=yield Promise.race([window.ShellFeedsApp.getQueryHeadersAsync(),(0,E.Kb)(3e3).then((()=>null))]),t=e&&e[c.Yu.entAuthorization]||null;return t&&setTimeout((()=>k.cache.clear()),36e5),t}))));e._reset=function(){k.cache.clear()},e.addTelemetryTracingQueryParam=function(e){if(s.Al&&s.Al.CurrentFlightSet&&s.Al.CurrentFlightSet.has(x)){const t=P.U.getTraceInstance(),n="00-"+t.getTraceId(!0)+"-"+t.getSpanId(!0)+"-00";e.searchParams.set(M,n)}}}(L||(L={}))},87298:function(e,t,n){"use strict";n.d(t,{O:function(){return S},w:function(){return C}});var i=n(33940),r=n(32005),o=n(98304),a=n(9947),s=n(65135),c=n(33379);class d{constructor(e,t,n,i,r,o,s){if(!e)throw new Error("loggingService is required for ExponentialBackoffRetry.");const l=new a.K(e);this.logInvalidParams(l,t,n,i,r,s),this.loggingService=e,this.maxRetries=t||d.defaultMaxRetries,this.baseRetryDelayInMs=n||d.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=i||d.maxAllowedRetryDelayInMs,this.factor=r||d.defaultFactor,this.minOffsetInMs=o||d.defaultMinOffsetInMs,this.maxOffsetInMs=s||d.defaultMaxOffsetInMs,(0,c.N)()&&this.loggingService.infoCallback((()=>"ExponentialBackoffRetry has been configured."),null,{maxRetries:t,minTimeout:n,maxTimeout:i,factor:r})}executeRequest(e,t,n,r,o){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise(((a,s)=>(0,i.mG)(this,void 0,void 0,(function*(){yield this.tryRequest(e,a,s,0,t,n,r,o)}))))}))}logInvalidParams(e,t,n,i,r,o){t&&(t<1||t>d.maxAllowedRetries)&&e.fatal(`maxRetries should be at least 1 and less than ${d.maxAllowedRetries}.`),n&&n<d.defaultBaseRetryDelayInMs&&e.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),n&&o&&n<=o&&e.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),i&&(i<=0||i>d.maxAllowedRetryDelayInMs)&&e.fatal(`maxRetryDelay has to be a positive value less than ${d.maxAllowedRetryDelayInMs}.`),r&&r<=0&&e.fatal("factor has to be a positive value.")}tryRequest(e,t,n,r,a,d,l,u){return(0,i.mG)(this,void 0,void 0,(function*(){const i=()=>(0,c.N)()&&r<this.maxRetries&&!u;try{const n=l||1e4,i=yield this.timeoutServiceRequest(n,e(r));t(i)}catch(c){if(i()){const i=3,u=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(i)),p=.5,h=Math.random()<p?-1:1,g=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,r),this.maxRetryDelayInMs)+u*h;if(this.loggingService.warnCallback((()=>`Retrying the request in ${g} milliseconds.`),d,{error:c,currentRetry:r+1,requestInfo:a}),s.M0&&s.M0.sendAppErrorEvent){const e=("string"==typeof c?c:c.message)||"";s.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.if_),{pb:Object.assign(Object.assign({},o.if_.pb),{retryAttemptsMade:r,serviceFailed:d&&d.Message,maxRetries:this.maxRetries,customMessage:`${this.getActivityName(d)}. Error details: '${e}'. Retrying the request in ${g} milliseconds`})}),!1)}setTimeout((()=>this.tryRequest(e,t,n,r+1,a,d,l)),g)}else this.loggingService.errorCallback((()=>i()?`ExponentialBackoffRetry has exceeded maximum retries ${this.maxRetries}`:"Request has failed."),d,{error:c,currentRetry:r,requestInfo:a}),n(c)}}))}timeoutServiceRequest(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise(((n,r)=>(0,i.mG)(this,void 0,void 0,(function*(){const i=setTimeout((()=>r(new Error(`Service Request Timed out after ${e} milliseconds!`))),e);try{const e=yield t;n(e),clearTimeout(i)}catch(e){r(e),clearTimeout(i)}}))))}))}getActivityName(e){return`Activity name: '${e&&e.Message||"None"}'`}}d.defaultBaseRetryDelayInMs=100,d.defaultFactor=2,d.defaultMaxOffsetInMs=25,d.defaultMaxRetries=5,d.defaultMinOffsetInMs=1,d.maxAllowedRetries=10,d.maxAllowedRetryDelayInMs=2e3;var l=n(82037),u=n(13010),p=n(1970),h=n(42147),g=n(84147),m=n(19809),f=n(33954);let v,y;function S(e,t={},n,i=!1){return(0,l.fK)()?(0,l.rg)(e,t,n,i):(0,r.Sm)(e,n,t)}function C(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function*(){const i=b().activityLoggingService.createActivity(t);return r=r||(0,l.tW)(),yield m.$D.serviceRequestOnComplete((()=>function(){if(y)return y;return y=new d(b().loggingService,3),y}().executeRequest(e,null,i,n,r)),(()=>b().activityLoggingService.endActivity(i)))}))}function b(){if(v)return v;const e=u.u.getInstance("ExperienceActivityLogger");return(0,c.N)()&&f.k.isDebug()&&e.addAppender(new p.N(g.i.Activity)),v=new h.N(f.k.getLoggingService(),e),v}},63535:function(e,t,n){"use strict";n.d(t,{PH:function(){return u},Ph:function(){return c},fU:function(){return p},qQ:function(){return d}});var i=n(56692),r=n(45506),o=n(33954);let a,s;const c=new URL("","https://api.msn.com/");function d(){const e=(0,i.Yq)();var t;return a||(t=e.ServiceUrlBase,a=new URL("",t),h(a)),a}function l(){const e=(0,i.Yq)();var t;return s||(t=e.FeedServiceUrlBase,s=new URL("",t),h(s)),s}function u(e,t=d()){return new URL(e+(null==t?void 0:t.search),t)}function p(e,t=l()){return new URL(e+(null==t?void 0:t.search),t)}function h(e){let t=!1;"dev"!==e.searchParams.get("env.service")&&(0,r.nP)().UserIsSignedIn&&(t=!0),o.k.log("u-si: "+(0,i.Yq)().UserId),o.k.log("a-si: "+t),o.k.log("ss-si: "+(0,r.nP)().UserIsSignedIn)}},57945:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var i=n(38652);function r(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.logLoadingError&&(0,i.e)().then((()=>{t.logLoadingError(e)}))}},38652:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});function i(){return"visible"===document.visibilityState?Promise.resolve():new Promise((e=>{document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&e()}))}))}},76868:function(e,t,n){"use strict";var i;n.d(t,{y:function(){return i}}),function(e){e[e.MuidChange=1]="MuidChange",e[e.MarketChange=2]="MarketChange",e[e.InterestsChange=3]="InterestsChange",e[e.PivotSwitch=4]="PivotSwitch",e[e.WeatherChange=5]="WeatherChange",e[e.MoneyChange=6]="MoneyChange",e[e.FeedLayoutSwitch=7]="FeedLayoutSwitch",e[e.FetchRiverDataFailure=8]="FetchRiverDataFailure",e[e.BackgroundImageChange=9]="BackgroundImageChange",e[e.PublisherMuted=10]="PublisherMuted",e[e.StalePrerenderPage=11]="StalePrerenderPage",e[e.AdminSettingsChange=12]="AdminSettingsChange"}(i||(i={}))},73:function(e,t,n){"use strict";n.d(t,{C7:function(){return g},Qf:function(){return p},U4:function(){return m},VX:function(){return r},W1:function(){return o},WM:function(){return a},Y5:function(){return c},Z6:function(){return s},dd:function(){return l},eO:function(){return h},pM:function(){return u},pc:function(){return d},v3:function(){return i}});const i="epdu",r="ppreload",o="ppage",a="ppmuid",s="fpr",c="TTPR",d="TTF.SearchBox",l="TTVR",u="TTVR.SearchBox",p="TTVR.BackgroundExecution",h="backgroundpreload",g="prerender",m="TTPV"},75384:function(e,t,n){"use strict";n.d(t,{Qc:function(){return $},TR:function(){return q},wY:function(){return j},oc:function(){return W},Bj:function(){return G},VD:function(){return V},lr:function(){return _},Q9:function(){return H}});var i=n(33940),r=n(19388),o=n(98304),a=n(62676),s=n(33954),c=n(14675),d=n(45506),l=n(96361),u=n(38349),p=n(987),h=n(73),g=n(79941),m=n(76868),f=n(67462),v=n(65135);let y,S;function C(){const e=(0,p.$o)().removeObject(h.Z6);if(e){s.k.logObjects("pageRevealDelegate:isForceReloadRequested, time: "+new Date(e.time).toTimeString());const t=e.time;if(y=e.data,t>performance.timeOrigin)return!0}return function(){const e=(0,f.jG)()||"";if(S!==e)return y=m.y.MuidChange,(0,p.$o)().setItem(h.WM,`Previous MUID: ${e}, New MUID: ${S}`),!0;return!1}()}function b(e,t=!1){!function(e){y&&((0,p.$o)().setItem(h.VX,y+""),(0,p.$o)().setItem(h.W1,Math.round(e-performance.timeOrigin).toString()))}(e),(0,g.Z)({newUrl:w(t),invalidatePageCache:!1})}function w(e=!1){const t=location.href;return t?t.replace(/prerender(=\d)?/,"invalidaterender=1")+(e?"&stale=1":""):""}var T=n(49786),k=n(32717),P=n(32164),A=n(33379),I=n(4734);let E,x,M,O,L,D=!1;const R=new P.o,F=new P.o,B=new P.o,N=new P.o,U=new P.o;function $(e,t,n,c,g){return d.Al.IsPrerender?"visible"===document.visibilityState?(g&&B.set(),void R.set()):(v.M0.addOrUpdateTmplProperty("isprerender","1"),g&&(v.M0.addOrUpdateTmplProperty("feedPrerender","0"),(0,T.Yc)(g)),M=e,O=t,(0,k.Hv)(),S=(0,f.jG)()||"",Q()||g?(0,r.su)("PrerenderStart",performance.now()):function(){if(E=document.createElement("div"),!Z()){const e=document.body,t=E.style;t.background="transparent",t.position="fixed",t.bottom=t.left=t.right=t.top="0",t.zIndex="2147483647",e?(e.appendChild(E),s.k.logObjects("pageRevealDelegate:addOverlay: Added overlay")):s.k.logObjects("pageRevealDelegate:addOverlay: Document body is not available, failed to add overlay.")}(0,r.su)("PrerenderStart",performance.now())}(),L=()=>function(e){return(0,i.mG)(this,void 0,void 0,(function*(){document.removeEventListener("visibilitychange",L);const t=function(){if(!d.Al||!d.Al.CurrentFlightSet)return-1;if(d.Al.CurrentFlightSet.has("prg-prerend12h"))return 43200;if(d.Al.CurrentFlightSet.has("prg-prerend6h"))return 21600;if(d.Al.CurrentFlightSet.has("prg-prerend3h"))return 10800;if(d.Al.CurrentFlightSet.has("prg-prerend1h"))return 3600;if(d.Al.CurrentFlightSet.has("prg-prerend30m"))return 1800;if(d.Al.CurrentFlightSet.has("prg-prerend10m"))return 600;return-1}();if(t>0){Math.round((0,u.Hk)()-performance.timeOrigin)/1e3>t&&(0,u.yV)(m.y.StalePrerenderPage)}if(C())return t>0&&(document.body.style.display="none"),void b((0,u.Hk)());performance.mark(a.DB);const n=performance.now();window._pageTimings[a.DB]=Math.round(n),e&&(B.set(),yield V(),yield function(){if(!d.Al.IsPrerender)return Promise.resolve();return N.getResultAsync()}(),performance.mark(l.Jl)),yield(0,I.F_)(),D=!0;const i=Q()||e;i||(x=setTimeout((()=>{z()}),1e3)),function(e){v.M0.addOrUpdateTmplProperty("isbackgroundpreload","1"),v.M0.addOrUpdateCustomProperty(h.W1,Math.round(e-performance.timeOrigin).toString()),(0,r.su)("PrerenderRevealed",e);const t=(0,r.O0)("PrerenderStart");(0,r.su)("PrerenderAge",e-t)}((0,u.Hk)()),yield(0,T.XX)(n,M,O),E&&!i&&(z(),yield F.getResultAsync()),i&&(0,r.EV)(l.cA),(0,l.fm)(M,e),performance.mark(a.O6),performance.measure("StaleRevalidation",a.DB,a.O6),(0,l.G)(),R.set(),(0,k.mB)(),(0,T.Gy)(),v.M0.runContentVisibilityCallbacks()}))}(g),document.addEventListener("visibilitychange",L),void function(e,t){e&&window.setTimeout((()=>{"visible"!==document.visibilityState&&v.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.GI7),{pb:Object.assign(Object.assign({},o.GI7.pb),{customMessage:"Prerender content staled"})}))}),6e4*e);t&&window.setTimeout((()=>{"visible"!==document.visibilityState&&v.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.DxP),{pb:Object.assign(Object.assign({},o.DxP.pb),{customMessage:"Prerender sd staled"})}))}),6e4*t)}(n,c)):((0,A.N)()&&window._pageTimings&&(window._pageTimings[h.C7]=0),void function(){const e=(0,p.$o)().removeItem(h.VX),t=(0,p.$o)().removeItem(h.W1),n=(0,p.$o)().removeItem(h.WM);e&&v.M0.addOrUpdateCustomProperty(h.VX,e),t&&v.M0.addOrUpdateCustomProperty(h.W1,t),n&&v.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.smA),{pb:Object.assign(Object.assign({},o.smA.pb),{customMessage:n})}),!1)}())}function _(){return d.Al.IsPrerender?R.getResultAsync():Promise.resolve()}function H(){return d.Al.IsPrerender?B.getResultAsync():Promise.resolve()}function W(){B.set()}function j(){N.set()}function G(){U.set()}function V(){return d.Al.IsPrerender?U.getResultAsync():Promise.resolve()}function q(){return d.Al.IsPrerender&&!D}function z(){try{x&&clearTimeout(x),!Z()&&document.body.removeChild(E),s.k.logObjects("pageRevealDelegate:removeOverlay: Removed overlay"),(0,c.c)((()=>{(0,r.EV)(l.cA),F.set()}))}catch(e){}E=null}function Q(){var e;return!!(null===(e=d.Al.CurrentFlightSet)||void 0===e?void 0:e.has("prg-no-overlay"))}function Z(){var e;return!!(null===(e=d.Al.CurrentFlightSet)||void 0===e?void 0:e.has("prg-no-overlaycss"))}},38349:function(e,t,n){"use strict";n.d(t,{Ge:function(){return a},HQ:function(){return s},Hk:function(){return l},ih:function(){return c},yV:function(){return d}});var i=n(73),r=n(987);const o=new Set;function a(e){const t=(0,r.$o)().getObject(i.v3)||{},n=t[e];return!isNaN(n)&&(o.has(e)||o.add(e),delete t[e],(0,r.$o)().setObject(i.v3,t),n>performance.timeOrigin)}function s(e){return o&&o.has(e)}function c(e){const t=(0,r.$o)().getObject(i.v3)||{},n=t[e];isNaN(n)&&(t[e]=l(),(0,r.$o)().setObject(i.v3,t))}function d(e){const t={time:l(),data:e};(0,r.$o)().setObject(i.Z6,t)}function l(){return Math.round(performance.timeOrigin+performance.now())}},96361:function(e,t,n){"use strict";n.d(t,{G:function(){return v},Jl:function(){return h},cA:function(){return p},ew:function(){return y},fm:function(){return f},my:function(){return C},tV:function(){return S}});var i=n(83227),r=n(82890),o=n(15213),a=n(19388),s=n(62676),c=n(98304),d=n(73),l=n(65135);const u="TTVR.",p="OverlayRemoval",h="disableFeedPrerenderInitComplete";let g=0,m=0;function f(e,t){t&&function(){const e=["TTVR",r.p.wpoCallStart,r.p.wpoResponseBack,r.p.firstSectionRenderStart,u+r.p.feed,u+r.p.basicFeed,u+r.p.viewCards,"TTVR.GridViewFeed",u+r.p.sdCards,"TTVR.MoneyInfoCardWC","TTVR.WeatherCardWC","TTVR.WithRefreshDelay","TTVR.ShoppingCardWC","TTVR.TrendingNowWC","TTVR.SportsCardWC","WeatherCardWC.Ready","WeatherCardWC.Start","WeatherGreeting.Render","WelcomeGreeting.Start",s.zJ,o.q.RequestInitiated,o.q.AdProcessed,o.q.AdRendered,o.q.RenderReady,o.q.TimeToConsumeAds,o.q.RenderReady,o.q.TimeToAdResponse,o.q.TimeToServeAd],t=window._pageTimings;if(!t)return;const n=m-g;e.forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)&&(t[e]-=n)}));for(const e in t)0==e.indexOf("TTVR.ShoppingCardWC-")&&(t[e]-=n)}();const n=window._pageTimings;if(!n)return;const f=(0,a.TZ)(h),v=(0,a.Sc)(p);n[d.C7]=1,n[d.eO]=1;let y=v,S=-1;e.forEach((e=>{const r=n[u+e];let o=(0,a.Sc)(e);if(o=Math.max(o,v),n["TTVR.BackgroundExecution."+e]=r,n[u+e]=o||-1,e===i.x.commonSearchBoxEdgeNext)if(t&&f>-1){const e=performance.measure("disableFeedPrerenderInitTime",s.DB,h);S=o-Math.round((null==e?void 0:e.duration)||0)}else S=o;o>y&&(y=o)}));const C=n[d.dd];let b=!1;if(isNaN(C)||null===C){let t=n.IncompleteMarkers;if(!t){const e=(0,a.bO)(a.oN.Primary);t=null==e?void 0:e.join(",")}const i=(0,a.Gb)(),r=i.marker||"None",o=i.value||"None";l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.lFV),{message:"TTVR missing during prerender.",pb:Object.assign(Object.assign({},c.lFV.pb),{customMessage:`Incomplete markers: ${t}. visuallyReadyDependencies: ${e.join("|")}. Last Marked: ${r} ${o}`})})),b=!0}if((isNaN(y)||null===y)&&(l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.HYO),{message:"TTPR missing during prerender."})),b=!0),b)return;const w=Math.min(y,C);n[d.Y5]=n[d.dd]=w,n[d.Qf]=C;const T=n[d.pM],k=n[d.pc],P=n[`${d.Y5}.${r.p.searchBox}`]=Math.min(S,T);isNaN(T)||null===T?l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.Cab),{message:"TTVR.SearchBox missing during prerender."})):n[d.pM]=Math.min(P,T),isNaN(k)||null===k?l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.bor),{message:"TTF.SearchBox missing during prerender."})):n[d.pc]=Math.min(P,k)}function v(){const e=window._pageTimings;e&&(e[d.U4]=Math.round(performance.now()))}function y(){g=Math.round(performance.now())}function S(){m=Math.round(performance.now())}function C(){return m-g}},49786:function(e,t,n){"use strict";n.d(t,{Gy:function(){return v},MV:function(){return C},XX:function(){return f},Yc:function(){return b}});var i=n(33940),r=n(19388),o=n(68364),a=n(98304),s=n(32164),c=n(4734),d=n(38349),l=n(14675);let u,p=[],h=[],g=new Set,m=new s.o;function f(e,t,n){const i=(0,c.S0)().getCurrentState().aboveTheFoldVisuallyReady.endTime,o=new Set;for(const e of p){const{experienceType:n}=e;t.includes(n)&&g.add(n)}0==g.size&&m.set();for(const t of p){const{experienceType:a}=t;if(u&&"GridViewFeed"===a){(0,r.EV)(a),S(a),o.add(a);continue}const s=(0,d.Ge)(a),c=0===t.thresholdMinutes||null!=t.thresholdMinutes&&e-i>6e4*t.thresholdMinutes;n||s||c?(y(t),h.push(t.delayCallback)):((0,r.EV)(a),S(a)),o.add(a)}for(const e of t)o.has(e)||(0,r.EV)(e);return m.getResultAsync()}function v(){for(const e of h)e()}function y(e){return(0,i.mG)(this,void 0,void 0,(function*(){try{yield e.criticalCallback(),(0,l.c)((()=>{(0,r.EV)(e.experienceType),S(e.experienceType)}))}catch(t){(0,o.OO)(t,a.NKp,"Exception when running stale revalidate callback","Experience: "+e.experienceType)}}))}function S(e){g.delete(e)&&0==g.size&&m.set()}function C(e){p.push(e)}function b(e){u=e}},32717:function(e,t,n){"use strict";n.d(t,{Hv:function(){return s},eC:function(){return d},hR:function(){return p},mB:function(){return c}});var i=n(32164);let r,o,a=!1;function s(){a=!0}function c(){a=!1,u()}function d(e){return"visible"!==document.visibilityState||e&&a?(r||(r=new i.o,document.addEventListener("visibilitychange",l)),r.getResultAsync()):Promise.resolve()}function l(){"visible"===document.visibilityState&&u()}function u(){!a&&r&&(r.set(),r=null,document.removeEventListener("visibilitychange",l))}function p(){return o||(o=new Promise((e=>{"visible"===document.visibilityState&&e(),document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))}))),o}},37209:function(e,t,n){"use strict";n.d(t,{o:function(){return S}});var i=n(33940),r=n(14752),o=n(22704),a=n(98304),s=n(76950),c=n(72488),d=n(82890),l=n(65135),u=n(38156),p=n(60483),h=n(59997),g=n(26007),m=n(45506),f=n(78125),v=n(92402);function y(e){return e?"#242424":"#F7F7F7"}function S(e,t,n,S){var C;return(0,i.mG)(this,void 0,void 0,(function*(){let i;r.A.startMark("WC.Render"),i=void 0===n||"boolean"==typeof n?{noPaint:!!n}:n;const b=e.configRef,w=(0,s.ITY)(b.experienceType),T=matchMedia("(prefers-color-scheme:dark)");if(window.isSSREnabled&&!window.isSSRCompleted){if(null===l.M0||void 0===l.M0||l.M0.addOrUpdateTmplProperty("SSRIncomplete","1"),(0,o.Ou)()[d.p.isSSRAborted]="1","vp"===g.c.getQueryParameterByName("reqsrc",location.href))return void document.write("SSR didn't complete successfully, CSR fallback is disabled for VP tests");null===l.M0||void 0===l.M0||l.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.O5q),{message:"SSR didn't complete successfully, remove the existing design system provider element to avoid broken UI",pb:Object.assign(Object.assign({},a.O5q.pb),{lastElements:null==S?void 0:S()})})),null===(C=document.querySelector(t))||void 0===C||C.remove()}const k=document.querySelector(t)||document.createElement(t);k.baseLayerLuminance=T.matches?f.h.DarkMode:f.h.LightMode,k.direction="rtl"===m.Al.MarketDir?h.N.rtl:h.N.ltr,k.setAttribute("fill-color",y(T.matches));for(const e in i)Reflect.set(k,e,Reflect.get(i,e));const P=window.isSSREnabled?(0,v.bE)("WholePageHydration",!0):void 0,A=(0,v.zb)(k,P);T.addEventListener("change",(e=>{k.baseLayerLuminance=e.matches?f.h.DarkMode:f.h.LightMode,k.setAttribute("fill-color",y(e.matches))})),k.isConnected||document.body.appendChild(k);const I=new p.D({type:u.c9.Module,name:b.experienceType,content:{}});let E=k.querySelector(w);return E||(E=document.createElement(w)),E.parentTelemetry=I,E.setAttribute("config-instance-src",null==b?void 0:b.instanceSrc),E.setAttribute("instance-id",b.experienceType),E.setAttribute("data-t",I.getMetadataTag()),yield(0,c.Fg)(e),E.isConnected||k.appendChild(E),r.A.endMark("WC.Render"),A}))}},30113:function(e,t,n){"use strict";var i;n.d(t,{m:function(){return i}}),function(e){e.small="OneByOne",e.medium="OneByTwo",e.large="OneByThree"}(i||(i={}))},11708:function(e,t,n){"use strict";var i;n.d(t,{f:function(){return i}}),function(e){e.AiCharacter="aicharacterCardEnabled",e.AutosMarketplaceCard="autosmarketplaceCardEnabled",e.BoostCard="boostCardEnabled",e.HoroscopeCard="horoscopeCardEnabled",e.WeatherCard="weatherCardEnabled",e.SportsCard="sportsCardEnabled",e.MoneyCard="moneyCardEnabled",e.FinanceCard="financeCardEnabled",e.OnThisDayCard="onthisdayCardEnabled",e.SavingsCard="savingsCardEnabled",e.ShoppingCard="shoppingCardEnabled",e.ShoppingFashionCarousel="shoppingFashionCardEnabled",e.VideoShoppingCard="videoshoppingCardEnabled",e.ShoppingEventCard="eventSDCardShoppingEnabled",e.TrafficCard="trafficCardEnabled",e.EsportsCard="esportsCardEnabled",e.EsportsStreamsCard="esportsStreamsCardEnabled",e.ElectionsCard="genericelectionCardEnabled",e.LotteryCard="lotteryCardEnabled",e.QnaCard="qnaCardEnabled",e.RecipesCard="recipeCardEnabled",e.PrismFeedCard="prismFeedCardEnabled",e.PrismCarouselCard="prismFeedCarouselCardEnabled",e.TravelCard="travelCardEnabled",e.HealthCard="healthCardEnabled",e.TopStoriesCard="topstoriesCardEnabled",e.TrendingTopics="TrendingTopicsUpsellEnabled",e.LocalGuideCard="localGuideCardEnabled",e.GroceryCard="groceryCardEnabled",e.RewardsCard="rewardsCardEnabled",e.RecommendedSearchesCard="recommendedSearchCardEnabled",e.PersonalizedOffersCard="personalizedoffersCardEnabled",e.PollsCard="pollsCardEnabled",e.MarketPlaceCard="marketplaceCardEnabled",e.QuizCard="quizcardCardEnabled",e.CasualGamesCard="esportsCardEnabled",e.CommuteCard="commuteCardEnabled",e.MobileShoppingCard1="mobileShoppingCard1Enabled",e.MobileShoppingCard2="mobileShoppingCard2Enabled",e.MobileShoppingCard3="mobileShoppingCard3Enabled",e.MobileShoppingCard4="mobileShoppingCard4Enabled",e.MobileShoppingCard5="mobileShoppingCard5Enabled",e.TrendingSearchCard="trendingsearchCardEnabled",e.RealEstateCard="realestateCardEnabled",e.MangaCard="mangaCardEnabled",e.RichCalendarCard="RichCalendarCardEnabled",e.PrayerTimesCard="prayertimesCardEnabled",e.Crypto="CryptoCard",e.MarketBrief="MarketBriefCard",e.ElectionCard="ElectionCardEnabled",e.EntertainmentPremierCard="entertainmentPremierCardEnabled",e.CommunityCard="CommunityCardEnabled"}(i||(i={}))},83152:function(e,t,n){"use strict";var i;n.d(t,{L:function(){return i}}),function(e){e.Location="Location",e.Weather="Weather",e.Finance="Finance",e.Team="Team",e.League="League",e.Player="Player",e.Traffic="Traffic",e.Widget="Widget",e.TopicFeed="TopicFeed",e.CasualGame="CasualGame"}(i||(i={}))},791:function(e,t,n){"use strict";n.d(t,{N:function(){return b}});var i=n(33940),r=n(33954),o=n(98304),a=n(68364),s=n(33799),c=n(12108),d=n(56692),l=n(45506),u=n(17873),p=n(70312),h=n(19809),g=n(63535),m=n(87298),f=n(83152),v=n(11708),y=n(30113),S=n(65135),C=n(51671);const b=new class extends class{constructor(e){this.fetchImpl=e,this.userUpdateEndpoint="msn/user",this.pdpServiceEndpoint="graph/actions",this.locationsServiceEndPoint="v1/news/users/me/locations",this.userActionServiceEndPoint="news/users/me/actions",this.ocid="pdp-peregrine",this.ocidOverride=!0}getCommonParams(e,t){return e?h.$D.getOneServiceParamsWithAuth(null!=t?t:(0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth(null!=t?t:(0,d.Yq)().UserId,this.ocid,!this.ocidOverride)}getUserDefaultLocation(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit({method:"GET"}),n=(0,g.PH)(this.locationsServiceEndPoint);let r;[...h.$D.getCommonParams2(this.ocid,!this.ocidOverride),{key:"autodetect",value:e&&`${e}`}].forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{r=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(n.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: getUserDefaultLocation}`;throw new Error(t)}return e}))),"getUserDefaultLocation")}catch(e){return r}return r}))}addToFavoriteLocation(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n="Location",r="Follow",o=yield this.getRequestInit({method:"POST",body:JSON.stringify({actionType:r,targetType:n,definitionName:t,degree:"FavoriteLocation",metaData:e})}),a=(0,g.PH)(this.pdpServiceEndpoint),c=(yield(0,C.XJ)())===s.Hy.SignedIn;let d;this.getCommonParams(c).forEach((e=>{e.value&&a.searchParams.set(e.key,e.value)}));try{d=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: Location`;throw new Error(t)}return e.json()}))),"addToFavoriteLocation")}catch(e){return!1}return!0}))}removeFavoriteLocation(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.deleteFromPdp(f.L.Location,"definitionName",[e],void 0,void 0,void 0,void 0,void 0,t)}))}removeLocation(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.deleteFromPdp(f.L.Location,"definitionName",[e],void 0,void 0,void 0,void 0,void 0,t)}))}updatePdpHomeLocation(e,t,n={},r,o=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const a=f.L.Location,c="Follow",d=yield this.getRequestInit({method:"POST"},n,o);d.body=JSON.stringify({actionType:c,targetType:a,definitionName:t,degree:"DefaultLocation",metaData:e});const l=(0,g.PH)(this.pdpServiceEndpoint),u=(yield(0,C.XJ)())===s.Hy.SignedIn;return this.getCommonParams(u&&!o,r).forEach((e=>{e.value&&l.searchParams.set(e.key,e.value)})),yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,d);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${a}`;throw new Error(t)}return e}))),"setPdpHomeLocation"),this.tryInvalidateBulkFetchedPdpTargetType(a),!0}))}updateTrafficMyRoutes(e,t,n,o,a,s,c){return(0,i.mG)(this,void 0,void 0,(function*(){const d=n.replace(/[^a-zA-Z0-9\-.,_]/g,""),l=f.L.Traffic,u="Follow",p=yield this.getRequestInit({method:"POST",body:JSON.stringify({actionType:u,targetType:l,targetId:d,degree:e,definitionName:t,metadata:o,createdDateTime:s})},c),h=yield this.getTrafficPdpUrl(null,null,a);try{yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(h.href,p);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${l}`;throw new Error(t)}return e.json()}))),"updateTrafficMyRoutes");this.tryInvalidateBulkFetchedPdpTargetType(l)}catch(e){return r.k.logError(e.message),!1}return!0}))}deleteTrafficMyRoutes(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const r=yield this.getRequestInit({method:"DELETE"}),o=yield this.getTrafficPdpUrl(e,t,n);try{yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(o.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${f.L.Traffic}`;throw new Error(t)}return e}))),"deleteTrafficFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(f.L.Traffic)}catch(e){return!1}return!0}))}getTrafficMyRoutes(e,t){var n;return(0,i.mG)(this,void 0,void 0,(function*(){const r=yield this.getRequestInit({method:"GET"}),o=yield this.getTrafficPdpUrl(e,null,t);try{const e=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(o.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${f.L.Traffic}`;throw new Error(t)}return e}))),"getTrafficFromPdp");return null===(n=yield e.json())||void 0===n?void 0:n.value}catch(e){return null}}))}getTrafficPdpUrl(e,t,n,r="Follow",o){return(0,i.mG)(this,void 0,void 0,(function*(){const i=(0,g.PH)(this.pdpServiceEndpoint),a=(yield(0,C.XJ)())===s.Hy.SignedIn,c=(0,d.Yq)().UserId,l=a?h.$D.getOneServiceParamsWithAuth(c,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth(c,this.ocid,!this.ocidOverride);if(e||t){const n=`targetType eq '${f.L.Traffic}'`,a=e?`degree eq '${e}'`:"",s=t?`definitionName eq '${t}'`:"",c=o?`targetId eq '${o}'`:"";i.searchParams.set("$filter",`actionType eq '${r}' and (${n})${a?` and (${a})`:""}${s?` and (${s})`:""}${c?` and (${c})`:""}`)}return[...l,...n||[]].forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)})),i}))}addToWatchList(e,t=0,n={},r={}){var o;return(0,i.mG)(this,void 0,void 0,(function*(){const a=f.L.Finance,c="Follow",u=yield this.getRequestInit({method:"POST",body:JSON.stringify({actionType:c,targetType:a,targetId:e,metadata:Object.assign({securityType:t,tickerId:this.generateUUID()},r)})},n),p=(0,g.PH)(this.pdpServiceEndpoint),v="zh-cn"!==(0,d.Yq)().CurrentMarket,y=(yield(0,C.XJ)())===s.Hy.SignedIn,S=(null===(o=(0,l.nP)().CurrentFlights)||void 0===o?void 0:o.split(",").filter((e=>e.includes("1s"))).join(","))||"";let b;(y&&v?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,S,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,S,!0)).forEach((e=>{e.value&&p.searchParams.set(e.key,e.value)}));try{b=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(p.href,u);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${a}`;throw new Error(t)}return e.json()}))),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(a)}catch(e){return!1}return!0}))}addListToWatchList(e,t={},n={}){var r;return(0,i.mG)(this,void 0,void 0,(function*(){const o=f.L.Finance,a="Follow",c=yield this.getRequestInit({method:"POST",body:JSON.stringify(e.map((e=>({actionType:a,targetType:o,targetId:e.key,metadata:Object.assign({securityType:e.value,tickerId:this.generateUUID()},n)}))))},t),u=(0,g.PH)(this.pdpServiceEndpoint),p="zh-cn"!==(0,d.Yq)().CurrentMarket,v=(yield(0,C.XJ)())===s.Hy.SignedIn,y=(null===(r=(0,l.nP)().CurrentFlights)||void 0===r?void 0:r.split(",").filter((e=>e.includes("1s"))).join(","))||"";let S;(v&&p?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,y,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,y,!0)).forEach((e=>{e.value&&u.searchParams.set(e.key,e.value)}));try{S=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(u.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${o}`;throw new Error(t)}return e.json()}))),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(o)}catch(e){return!1}return!0}))}generateUUID(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}sortWatchList(e,t={}){var n,r;return(0,i.mG)(this,void 0,void 0,(function*(){const o=f.L.Finance,a="Follow",c=(null===(n=(0,l.nP)().CurrentFlights)||void 0===n?void 0:n.split(",").filter((e=>e.includes("1s"))).join(","))||"",u=[{key:"fdhead",value:c}],p=yield b.readPdpWithTargetType(f.L.Finance,!0,200,t,!1,u),v=p&&(null===(r=p.value)||void 0===r?void 0:r.filter((e=>e.actionType===a&&e.targetId)));if(!v||v.length<e.length)return!1;const y={};let S=e.length;v.forEach((t=>{let n=e.findIndex((e=>e===t.targetId));n<0&&(n=S,S++),y[t.targetId]=JSON.stringify({actionType:a,targetId:t.targetId,targetType:o,rank:n,metadata:t.metadata})}));const w=yield this.getRequestInit({method:"PUT",body:JSON.stringify(y)},t),T=(0,g.PH)(this.pdpServiceEndpoint);((yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,c,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,c,!0)).forEach((e=>{e.value&&T.searchParams.set(e.key,e.value)}));try{yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(T.href,w);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${o}`;throw new Error(t)}return e.json()}))),"sortWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(f.L.Finance)}catch(e){return!1}return!0}))}updateWeatherInterests(e,t,n={},o){return(0,i.mG)(this,void 0,void 0,(function*(){const i=f.L.Weather,a=yield this.getRequestInit({method:"POST",body:JSON.stringify({actionType:"Follow",targetType:i,targetId:e,metadata:t})},n),c=(0,g.PH)(this.pdpServiceEndpoint),d=(yield(0,C.XJ)())===s.Hy.SignedIn;this.getCommonParams(d,o).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));try{const e=yield this.fetchImpl(c.href,a);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather interests call`;throw new Error(t)}}catch(e){return r.k.logError(e.message),!1}return!0}))}getWeatherInterest(e={},t="",n){var r;return(0,i.mG)(this,void 0,void 0,(function*(){const o=yield this.getRequestInit({method:"GET"},e),a=this.getWeatherInterestUrl(null,t),c=(yield(0,C.XJ)())===s.Hy.SignedIn;this.getCommonParams(c,n).forEach((e=>{e.value&&a.searchParams.set(e.key,e.value)}));try{const e=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,o);if(e.status>=400){const t=`returned error response. Status: ${e.status} for actionType: Follow, targetType: ${f.L.Weather}`;throw new Error(t)}return e}))),"getWeatherInterest");return null===(r=yield e.json())||void 0===r?void 0:r.value}catch(e){return null}}))}getWeatherInterestUrl(e,t,n="Follow"){const i=(0,g.PH)(this.pdpServiceEndpoint),r=`targetType eq '${f.L.Weather}'`;return i.searchParams.set("$filter",`actionType eq '${n}' and (${r})${t?` and (${t})`:""}`),[...e||[]].forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)})),i}updateWeatherSettings(e,t,n={},r,o=!1){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&!t)return!0;let i="";i=e&&!t?'{"weatherDisplayUnit":"'+e+'"}':!e&&t?'{"userSettings":{"weatherLocationSettingMode":"'+t+'"}}':'{"weatherDisplayUnit":"'+e+'","userSettings":{"weatherLocationSettingMode":"'+t+'"}}';const a=yield this.getRequestInit({method:"POST"},n,o);a.body=i;const c=(0,g.PH)(this.userUpdateEndpoint),d=(yield(0,C.XJ)())===s.Hy.SignedIn;this.getCommonParams(d&&!o,r).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));const l=yield this.fetchImpl(c.href,a);if(l.status>=400){const e=`OneService returned error response. Status: ${l.status} for update weather setting call`;throw new Error(e)}return!0}))}updateFinanceInterests(e){var t;return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const n={financeInterests:e},i=JSON.stringify(n),r=yield this.getRequestInit({method:"POST"});r.body=i;const o=(0,g.PH)(this.userUpdateEndpoint),a="zh-cn"!==(0,d.Yq)().CurrentMarket,c=(yield(0,C.XJ)())===s.Hy.SignedIn,u=(null===(t=(0,l.nP)().CurrentFlights)||void 0===t?void 0:t.split(",").filter((e=>e.includes("1s"))).join(","))||"";(c&&a?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,u,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,u,!0)).forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)}));const p=yield this.fetchImpl(o.href,r);if(p.status>=400){const e=`OneService returned error response. Status: ${p.status} for update finance interests call`;throw new Error(e)}return!0}))}updateUserSettings(e,t={},n){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!0;const i=JSON.stringify({userSettings:e},((e,t)=>null!=t?t:void 0)),o=yield this.getRequestInit({method:"POST"},t);o.body=i;const a=(0,g.PH)(this.userUpdateEndpoint),c=(yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth(null!=n?n:(0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth(null!=n?n:(0,d.Yq)().UserId,this.ocid,!this.ocidOverride);for(const{key:e,value:t}of c)t&&a.searchParams.set(e,t);try{const e=yield this.fetchImpl(a.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather setting call`;throw new Error(t)}}catch(e){return r.k.logError(e.message),!1}return!0}))}getPdpUserPreference(e,t={},n){return(0,i.mG)(this,void 0,void 0,(function*(){const o=yield this.getRequestInit({method:"GET"},t),a=(0,g.PH)(this.userUpdateEndpoint),c=(yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth(n||(0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth(n||(0,d.Yq)().UserId,this.ocid,!this.ocidOverride);for(const{key:e,value:t}of c)t&&a.searchParams.set(e,t);try{const e=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,o);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}))),"readPDPData");if(!e.ok&&404!=e.status)throw Error(`code=${e.status}, ${e.statusText}`);return Object.assign(Object.assign({},yield e.json()),{is404:404==e.status})}catch(t){if(r.k.logError(t.message),e)throw Error(t.message);return null}}))}updatePdpLayoutPreference(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t={method:"PUT",credentials:"include",body:JSON.stringify({dummyid:{userLayoutPreference:e}})},n=(0,g.PH)(this.userUpdateEndpoint);((yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const e=yield this.fetchImpl(n.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update layout preference setting call`;throw new Error(t)}}catch(e){return r.k.logError(e.message),!1}return!0}))}updateSegmentCardsEnableStatus(e,t=null){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const n=[];if(t){let e;for(e in t)null!=t[e]&&n.push('"'+e+'": '+JSON.stringify(t[e]))}const i=e.map((e=>e.cardType!=v.f.TopStoriesCard?`\\"${e.cardType}\\":${e.enabled?'\\"1\\"':'\\"0\\"'}`:"")).join(","),r=n.length>0?'{"segmentCardSettings":"{'+i+'}","userSettings":{'+n.join(", ")+"}}":'{"segmentCardSettings":"{'+i+'}"}';return this.updateUserPreference(r)}))}updateProductivityCardsEnableStatus(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t=`{userSettings:{enterpriseCardsEnabled:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}))}updateGamingCardsEnableStatus(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t=`{userSettings:{gamingCards:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}))}updateMorningDigestEnableStatus(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t=`{userSettings:{WindowsShellMorningDigest:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}))}updateCommunitySettingsOptOutStatus(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t={};e.forEach((e=>{t[e.settingType]=e.optedOut?"1":"0"}));const n={communitySettings:t};return this.updateUserPreference(JSON.stringify(n))}))}updateWidgetSettings(e,t={},n){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const i=e.map((e=>({actionType:"Follow",targetId:e.cardType,targetType:f.L.Widget,metadata:{prongsv2:{region:e.region,size:y.m[e.size],position:e.position,widgetDefinitionId:e.widgetDefinitionId}}})));return this.sendGenericActionRequest({additionalHeaders:t,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}))}muteWidget(e,t={},n){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e||!e.length)return!1;const i=e.map((e=>({actionType:"Mute",targetId:e,targetType:f.L.Widget})));return this.sendGenericActionRequest({additionalHeaders:t,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}))}disableSpotlightCard(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const n={actionType:"Disabled",definitionName:e,targetId:e,targetType:f.L.TopicFeed};return this.sendGenericActionRequest({endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(n),appError:t})}))}sendGenericActionRequest(e){return(0,i.mG)(this,void 0,void 0,(function*(){const{additionalHeaders:t,additionalParams:n,endpoint:r,method:o,payload:a,appError:c}=e;if(!r||!o)return this.logError(new Error("Missing arguments: 'endpoint' and 'method' should be provided and valid"),c),!1;const l=(0,g.PH)(r);let u;((yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&l.searchParams.set(e.key,e.value)})),n&&n.forEach((e=>{e.value&&l.searchParams.set(e.key,e.value)}));try{JSON.parse(a),u=a}catch(e){u=JSON.stringify(a)}const p=yield this.getRequestInit({method:o,body:u},t),f="GET"==o;try{return yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,p);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for payload: ${a}`;throw new Error(t)}return!f||(yield e.json())}))),"sendActions")}catch(e){return this.logError(e,c),!1}}))}getUserActions(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=[{key:"actionType",value:e}],n=yield this.sendGenericActionRequest({additionalParams:t,endpoint:this.userActionServiceEndPoint,method:"GET"});return n&&n.value}))}setUserAction(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){return!!(yield this.sendGenericActionRequest({endpoint:n?this.pdpServiceEndpoint:this.userActionServiceEndPoint,method:"POST",payload:Object.assign({actionType:e},t)}))}))}deleteUserAction(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=[{key:"actionType",value:e},{key:"targetId",value:t.targetId},{key:"definitionName",value:t.definitionName}];return!!(yield this.sendGenericActionRequest({additionalParams:n,endpoint:this.userActionServiceEndPoint,method:"DELETE"}))}))}deleteUserActionRelatedTraffic(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=yield this.getRequestInit({method:"DELETE"}),r=yield this.getTrafficPdpUrl("Default",null,null,e,t.targetId);try{yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.fetchImpl(r.href,n);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: ${e}, targetType: ${f.L.Traffic}`;throw new Error(n)}return t}))),"deleteActionRelatedTraffic"),this.tryInvalidateBulkFetchedPdpTargetType(f.L.Traffic)}catch(e){return!1}return!0}))}updateUserPreference(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit({method:"POST"});t.body=e;const n=(0,g.PH)(this.userUpdateEndpoint);((yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const i=yield this.fetchImpl(n.href,t);if(i.status>=400){const t=`OneService returned error response while updating user preference. Status: ${i.status}, payload: ${e}`;throw new Error(t)}}catch(e){return!1}return!0}))}setPdpTargetTypesForBulkLoad(e){e&&e.length&&!this.bulkGraphActionTargetTypes&&(this.bulkGraphActionTargetTypes=e)}readPdpWithTargetType(e,t=!1,n,r={},a=!0,s=[]){return(0,i.mG)(this,void 0,void 0,(function*(){if(a){const t=yield this.getFromWebWorker(e);if(t)return t}if(this.bulkGraphActionTargetTypes&&this.bulkGraphActionTargetTypes.length)if(this.bulkGraphActionTargetTypes.indexOf(e)>=0){this.bulkGraphActionResultCache=this.bulkGraphActionResultCache||(yield this.bulkGraphActionPromise||(this.bulkGraphActionPromise=this.fetchPdpWithTargetTypes(this.bulkGraphActionTargetTypes,t,n,r,s)));const i=this.bulkGraphActionResultCache.get(e);if(i)return{value:i}}else S.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.srQ),{message:`Received an unknown target type "${e}" that was not in the bulk graph action target types list "${this.bulkGraphActionTargetTypes}". Falling back to new network call. Please update the EntryPoint config's "graphActionsToBulkLoad" property to include this type.`}));const i=(yield this.fetchPdpWithTargetTypes([e],t,n,r,s)).get(e);if(i)return{value:i}}))}deleteFromPdp(e,t,n,r={},o,a="Follow",c,d=[],l=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const u=yield this.getRequestInit({method:"DELETE"},r,l),p=(0,g.PH)(this.pdpServiceEndpoint),h=(yield(0,C.XJ)())===s.Hy.SignedIn,f=this.getCommonParams(h&&!l),v=`targetType eq '${e}'`,y=n.map((e=>`${t} eq '${e}'`)).join(" or ");let b=`actionType eq '${a}' and (${y}) and (${v})`;o&&(b+=` and (degree eq '${o}')`),p.searchParams.set("$filter",b),[...f,...d].forEach((e=>{e.value&&p.searchParams.set(e.key,e.value)}));try{yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.fetchImpl(p.href,u);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: ${a}, targetType: ${e}`;throw new Error(n)}return t}))),"deleteFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(e)}catch(e){return c&&S.M0.sendAppErrorEvent(Object.assign(Object.assign({},c),{pb:Object.assign(Object.assign({},c.pb),{actionType:a,error:e.message})})),!1}return!0}))}tryInvalidateBulkFetchedPdpTargetType(e){this.bulkGraphActionResultCache&&this.bulkGraphActionResultCache.delete(e)}fetchPdpWithTargetTypes(e,t=!1,n,r={},o=[]){return(0,i.mG)(this,void 0,void 0,(function*(){if(!e.length)return new Map;const a=e.map((e=>`targetType eq '${e}'`)).join(" or "),c=[{key:"$top",value:`${n=n||10*e.length*2}`},{key:"$filter",value:`actionType eq 'Follow' and (${a})`}],d=yield this.getRequestInit({method:"GET"},r);!0===t&&(d.cache="no-store");const l=(0,g.PH)(this.pdpServiceEndpoint),u=(yield(0,C.XJ)())===s.Hy.SignedIn;[...c,...this.getCommonParams(u),...o].forEach((e=>{e.value&&l.searchParams.set(e.key,e.value)}));const p=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,d);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}))),"readPDPData");if(!p.ok)throw Error(`code=${p.status}, ${p.statusText}`);const h=new Map,v=yield p.json();if(!v)return h;if(v.value)for(const e of v.value){let t=h.get(e.targetType);t||h.set(e.targetType,t=[]),t.push(e)}for(const t of e)if(h.get(t)||h.set(t,[]),t===f.L.Finance){if("all-cgcombo"===l.searchParams.get("interestType")){const e=h.get(f.L.CasualGame)||[];let n=h.get(f.L.Finance)||[];n=n.concat(e),h.set(t,n)}}return h}))}updateMarketPreference(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t={method:"POST",credentials:"include",body:JSON.stringify({userSettings:{preferredMarket:e}})},n=(0,g.PH)(this.userUpdateEndpoint);((yield(0,C.XJ)())===s.Hy.SignedIn?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const e=yield this.fetchImpl(n.href,t);if(!e.ok)throw new Error(`Failed to update market preference: Status: ${e.status}`);return!0}catch(e){return r.k.logError(e.message),!1}}))}getFromWebWorker(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t=null;if(u.yb){const n=this.maptoWebWorkerId(e);if(n&&n.trim()){const n=yield(0,u.ot)({id:this.maptoWebWorkerId(e)});n.fetched&&(t=n.payload)}}return t}))}maptoWebWorkerId(e){switch(e){case f.L.Location:return"weatherpdp";case f.L.League:return"sportsleaguepdp";case f.L.Player:return"sportsplayerpdp";case f.L.Team:return"sportsteampdp";case f.L.Finance:return"moneypdp";default:return""}}getRequestInit(e={method:"GET"},t={},n=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const i=yield h.$D.getOneServiceHeaders();return e.headers=Object.assign(Object.assign({},n?{}:i),t),e.credentials="include",e}))}getFollowedLists(){var e;return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit({method:"GET"}),n=(0,g.PH)(this.userUpdateEndpoint),c=(yield(0,C.XJ)())===s.Hy.SignedIn,u=(null===(e=(0,l.nP)().CurrentFlights)||void 0===e?void 0:e.split(",").filter((e=>e.includes("1s"))).join(","))||"",p=c?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,u,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,u,!0);for(const{key:e,value:t}of p)t&&n.searchParams.set(e,t);try{const e=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(n.href,t);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;(0,a.OO)(null,o.G9t,"Error get followed list")}return e}))),"getFollowedLists");return e.ok||(0,a.OO)(null,o.G9t,"Error get followed list"),yield e.json()}catch(e){return r.k.logError(e.message),null}}))}addToFollowedLists(e){var t;return(0,i.mG)(this,void 0,void 0,(function*(){const n=f.L.Finance,r=yield this.getRequestInit({method:"POST",body:JSON.stringify({financeListIds:e})}),o=(0,g.PH)(this.userUpdateEndpoint),a=(yield(0,C.XJ)())===s.Hy.SignedIn,c=(null===(t=(0,l.nP)().CurrentFlights)||void 0===t?void 0:t.split(",").filter((e=>e.includes("1s"))).join(","))||"";let u;(a?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,c,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,c,!0)).forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)}));try{u=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(o.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: FollowList, targetType: ${n}`;throw new Error(t)}return e.json()}))),"addToFollowedLists")}catch(e){return!1}return!0}))}deleteFromFollowedLists(e){var t;return(0,i.mG)(this,void 0,void 0,(function*(){const n=f.L.Finance,r=yield this.getRequestInit({method:"DELETE"}),o=(0,g.PH)(this.userUpdateEndpoint),a=(yield(0,C.XJ)())===s.Hy.SignedIn,c=(null===(t=(0,l.nP)().CurrentFlights)||void 0===t?void 0:t.split(",").filter((e=>e.includes("1s"))).join(","))||"";let u;[...a?h.$D.getOneServiceParamsWithAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,c,!0):h.$D.getOneServiceParamsWithoutAuth((0,d.Yq)().UserId,this.ocid,!this.ocidOverride,c,!0),...[{key:"financeListIds",value:e.toString()}]].forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)}));try{u=yield(0,m.w)((()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(o.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: UnFollowList, targetType: ${n}`;throw new Error(t)}return e.json()}))),"deleteFromFollowedLists")}catch(e){return!1}return!0}))}logError(e,t){t?S.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{pb:Object.assign(Object.assign({},t.pb),{error:e.message})})):r.k.logError(e.message)}}{constructor(){var e;super((0,p.j)()),"windowsNewsPlus"===d.jG.AppType||"newsAndInterests"===d.jG.AppType||"winWidgets"===d.jG.AppType?(this.ocid=(null===(e=l.Al.ClientSettings)||void 0===e?void 0:e.pagetype)===c.G.Sidebar?"shoreline":"winp2",this.ocidOverride=!0):"sharedWidgets"===d.jG.AppType?(this.ocid="hpwidget",this.ocidOverride=!0):"windowsNewsbar"===d.jG.AppType?(this.ocid="winp0dash",this.ocidOverride=!0):"travel"===d.jG.AppType?(this.ocid="travel-verthp-feeds",this.ocidOverride=!0):"gaming"===d.jG.AppType?(this.ocid="startgg-feeds",this.ocidOverride=!0):"bingHomepage"===d.jG.AppType?(this.ocid="BingHp01",this.ocidOverride=!0):"windowsShellV2"===d.jG.AppType&&(this.ocid="pdp-peregrine",this.ocidOverride=!0)}}},22897:function(e,t,n){"use strict";var i=n(38949);function r(e,t){const n=new URLSearchParams(e.location.search);if(n){const e=new URLSearchParams(t.search);if(null==n?void 0:n.keys())for(const t of n.keys())if(n.getAll(t)&&!e.getAll(t).length){n.getAll(t).forEach((n=>e.append(t,n)))}let i="";e.forEach(((e,t)=>i=i.concat(`&${t}=${e}`))),t.search=i.slice(1)}return t}function o(e,t,n){return"string"==typeof e?{pathname:e,state:t,search:n}:e}const a=(0,n(33379).N)()?function(e){const t=e(),n=t.push,i=t.replace;return t.push=(e,i,a)=>n.apply(t,[r(t,o(e,i,a))]),t.replace=(e,n,a)=>i.apply(t,[r(t,o(e,n,a))]),t}(i.lX):null;t.ZP=a},67893:function(e,t,n){"use strict";n.d(t,{lY:function(){return v}});var i,r=n(33940),o=n(3900),a=n(56692),s=n(30528);!function(e){e.NavigationData="NavigationDataAdapter",e.TopicsData="TopicsDataAdapter"}(i||(i={}));var c=n(88257),d=n(53076),l=n(93450),u=n(4734);class p{constructor(e,t){this.onUpdateFollowedTopics=()=>{if(!this.connector)return this.onRouteUpdateCallback([]);const e=this.connector.getCurrentState(),t=e.followedTopicIds,n=e.topicMap,r=[];t&&n&&t.forEach((e=>{const t=n[e],o={path:(0,s.qC)(t.name||t.canonicalName,e),display:t.name,experienceInfo:this.dynamicRouteExperienceInfo,context:{feedId:e},pivotId:e,dynamicPivotSource:i.TopicsData};r.push(o)})),this.onRouteUpdateCallback(r)},this.onRouteUpdateCallback=e,this.dynamicRouteExperienceInfo=t}getDynamicPivotsFromDataConnector(e){return(0,r.mG)(this,void 0,void 0,(function*(){switch(e){case d.z.TopicData:yield this.getPivotsFromTopicData();break;case d.z.NavigationData:yield this.getPivotsFromNavigationData();break;default:return}}))}getPivotsFromTopicData(){return(0,r.mG)(this,void 0,void 0,(function*(){yield(0,u.F_)(),l._.getInstance().rootReducer.getDataConnector(d.z.TopicData).then((e=>{this.connector=e,this.connector.getFollowedTopics(!1).then((()=>{this.onUpdateFollowedTopics()}))})),c.G.followedTopics.registerObserver(this.onUpdateFollowedTopics),c.G.updateTopicFollowedState.registerObserver(this.onUpdateFollowedTopics)}))}getPivotsFromNavigationData(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.connector=yield l._.getInstance().rootReducer.getDataConnector(d.z.NavigationData),this.connector){const e=yield this.connector.getNavigationItems(a.jG.HostPage.verticalKey,a.jG.HostPage.categoryKey);this.onRouteUpdateCallback(this.mapNavigationItemsToDynamicRoutes(e))}else this.onRouteUpdateCallback([])}))}mapNavigationItemsToDynamicRoutes(e){return e.map((e=>({path:e.targetUrl,externalUrl:e.targetUrl,display:e.displayText,pivotId:e.categoryKey,dynamicPivotSource:i.NavigationData})))}}var h,g=n(22897);class m{constructor(e){if(this.staticRoutes=[],this.dynamicRoutes=[],this.onUpdateRoutesCallbacks=[],this.switchListeners=[],this.useCustomRoutingEvent=!1,this.callSwitchListeners=e=>{if(!this.switchListeners.length)return;const t=this.getPivotSelectionInfoFromPath(e.state&&e.state.previousPath),n=this.getPivotSelectionInfoFromPath(e.pathname,e),i={newSelection:n,oldSelection:t};this.config.enableRememberedPivots&&(0,o.cf)(n&&n.pivotId),this.switchListeners.sort(((e,t)=>e.order-t.order));for(const e of this.switchListeners)e.callback(i)},e&&(this.useCustomRoutingEvent=e.useCustomRoutingEvent,(0,s.Vk)(e.enableLocaleFeedPrefix),(0,s.I8)(e.includeFeedPrefixForAppType),this.setRoutes(e)),g.ZP.listen(this.callSwitchListeners),"windows"===a.jG.AppType||this.useCustomRoutingEvent){const e=window.history.pushState;window.history.pushState=(t,n,i)=>{e.apply(window.history,[t,n,i]);const r=new CustomEvent("pushstate",{detail:{state:t,title:n,url:i}});window.dispatchEvent(r)},window.addEventListener("pushstate",(e=>{e.detail&&e.detail.state&&e.detail.state.shouldPush&&g.ZP.replace(window.location.pathname,{context:e.detail.state},window.location.search)}))}}setRoutes(e){this.config=e,this.setStaticRoutes(),this.config.disableLoadingDynamicRoutes||this.setDynamicRoutes()}pushHistory(e,t,n,i){const r=g.ZP.location.pathname;g.ZP.push((0,s.qC)(e,t,!0,n&&n.excludeFeedPrefix),{previousPath:r,context:n},i)}getStaticRoutes(){return this.staticRoutes}getDynamicRoutes(){return this.dynamicRoutes}getDynamicRoute(){const e=g.ZP.location.pathname.split("/"),t=e.findIndex((e=>"interest"===e.toLowerCase())),n=t>-1&&t<e.length-1?e[t+1]:"";return{path:(0,s.qC)("interest"),experienceInfo:this.config.dynamicRouteExperienceInfo,pivotId:"oneriver.xfeed",display:decodeURIComponent(n)}}isDynamicRoute(e){let t="";return s.T6&&(t="windows"===a.jG.AppType||s.uO?`/${a.jG.CurrentMarket}/feed`:`/${a.jG.CurrentMarket}`),t+="/interest",0===e.indexOf(t)}getCurrentRoute(){const e=g.ZP.location.pathname,t=this.staticRoutes.find((t=>t.path===e));return t||(/\/interest\/.+\//.test(e)?this.getDynamicRoute():null)}addDynamicRouteListener(e){this.onUpdateRoutesCallbacks.push(e)}addSwitchListener(e,t=h.AfterLoadContent){this.switchListeners.push({callback:e,order:t})}getRememberedPivot(){if(!this.config.enableRememberedPivots)return;const e=(0,o.$z)();e&&this.config.staticRoutes.forEach((t=>{t.pivotId===e&&this.pushHistory(t.canonicalName)}))}getPivotSelectionInfoFromPath(e,t){if(!e)return null;const n=this.config.staticRoutes.find((t=>(0,s.qC)(t.canonicalName,void 0,!0,t.context&&t.context.excludeFeedPrefix)===e));if(n)return{pivotId:n.pivotId,telemetryPageName:n.telemetryPageName,telemetryPivotCategory:n.telemetryPivotCategory,display:n.display||n.canonicalName,categoryKey:n.categoryKey,subCategoryKey:n.subCategoryKey,pageTitle:n.pageTitle};if(!this.isDynamicRoute(e))return null;const i=e.split("/");let r=0;s.T6&&(r="windows"===a.jG.AppType||s.uO?2:1);const o=t&&t.state&&t.state.context;return{telemetryPageName:"xfeed",telemetryPivotCategory:"news",pivotId:o&&t.state.context.feedId||i.length>=4+r&&i[3+r],display:o&&(t.state.context.display||t.state.context.query)||i.length>=3+r&&decodeURIComponent(i[2+r])}}setStaticRoutes(){const{staticRoutes:e}=this.config;e.forEach((e=>{let t;t=e.canonicalName?(0,s.qC)(e.canonicalName,void 0,!0,e.context&&e.context.excludeFeedPrefix):(0,s.Or)(e.externalUrl);const n={path:t,externalUrl:e.externalUrl,experienceInfo:e.experienceInfo,queryParamOverrides:e.queryParamOverrides,display:e.display||e.canonicalName,pivotId:e.pivotId,context:e.context,categoryKey:e.categoryKey,subCategoryKey:e.subCategoryKey,pageTitle:e.pageTitle};this.staticRoutes.push(n)}))}setDynamicRoutes(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=new p(this.onUpdateDynamicRoute.bind(this),this.config.dynamicRouteExperienceInfo);yield e.getDynamicPivotsFromDataConnector(this.config.dynamicRouteDataConnector)}))}onUpdateDynamicRoute(e){this.dynamicRoutes=e;for(const e of this.onUpdateRoutesCallbacks)e(this.dynamicRoutes)}}let f;!function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(h||(h={}));const v=e=>f?(e&&f.setRoutes(e),f):(f=new m(e),f)},30528:function(e,t,n){"use strict";n.d(t,{He:function(){return d},I8:function(){return s},Or:function(){return l},T6:function(){return r},Vk:function(){return o},n8:function(){return u},qC:function(){return c},uO:function(){return a}});var i=n(56692);let r=!1;function o(e){r=e}let a=!1;function s(e){a=e}function c(e,t,n=!0,o=!1){if(r&&n){let n=`/${i.jG.CurrentMarket}`;if("windows"!==i.jG.AppType&&!a||o||(n+="/feed"),!e)return n;if(t)return n+`/interest/${encodeURIComponent(e)}/${encodeURIComponent(t)}`;const r="/"===e[0]?e.slice(1):e;return n+(p[r]?`${p[r]}`:`/${r}`)}{if(!e)return"";if(t)return`/interest/${encodeURIComponent(e)}/${encodeURIComponent(t)}`;const n="/"===e[0]?e.slice(1):e;return p[n]||`/${n}`}}function d(e){return!!(e&&e.oldSelection&&e.newSelection)&&(!(!e.oldSelection||!e.oldSelection.pivotId)&&!(!e.newSelection||!e.newSelection.pivotId))}function l(e){try{return new URL(e).pathname}catch(e){return null}}var u;!function(e){e.MyFeed="myFeed",e.Personalize="personalize",e.Saves="saves"}(u||(u={}));const p={myFeed:"/",personalize:"/personalize",interest:"/interest/*/:id",saves:"/personalize/saves"}},62661:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(37574);class r{constructor(){this.callbacks=[],this.clickCallbacks=[]}getSelectedPivot(){return this.selectedPivot}setSelectedPivot(e){e&&e.pivotId&&(this.selectedPivot=Object.assign({},e))}switchPivot(e){var t;const n=this.selectedPivot;this.selectedPivot=Object.assign({},e);const i={hash:null===(t=this.selectedPivot.context)||void 0===t?void 0:t.hash,navIsSticky:this.selectedPivot.navIsSticky,newSelection:this.selectedPivot,oldSelection:n};this.callbacks.sort(((e,t)=>e.switchCallbackOrder-t.switchCallbackOrder));for(const e of this.callbacks)e.callback(i)}clickPivot(e=!0,t){for(const n of this.clickCallbacks)n(e,t)}addSwitchListener(e,t=i.I.AfterLoadContent){this.callbacks.find((n=>n.callback===e&&n.switchCallbackOrder===t))||this.callbacks.push({callback:e,switchCallbackOrder:t})}removeSwitchListener(e){this.callbacks=this.callbacks.filter((t=>t.callback!==e))}addClickListener(e){this.clickCallbacks.push(e)}removeClickListener(e){this.clickCallbacks=this.clickCallbacks.filter((t=>t!==e))}reportLoadComplete(){this.loadComplete=!0,this.loadCompleteResolveCallback&&this.loadCompleteResolveCallback()}waitForLoadComplete(){return this.loadCompletePromise?this.loadCompletePromise:this.loadComplete?Promise.resolve():(this.loadCompletePromise=new Promise((e=>{this.loadCompleteResolveCallback=e})),this.loadCompletePromise)}}var o=n(73713),a=n(27003);const s="__PivotManager_default__",c="__PivotManager_namedSwitchers__";function d(e){if(e){const t=a.Gq.get(c,(()=>new Map));let n=t.get(e);return n||(n=new r,t.set(e,n)),n}return a.Gq.get(s,(()=>new r))}(0,o.U)((()=>{a.Gq.delete(s),a.Gq.delete(c)}))},37574:function(e,t,n){"use strict";var i;n.d(t,{I:function(){return i}}),function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(i||(i={}))},28781:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var i=n(55067);class r{}r.pageVisibilityChange=new i.C("PageVisibilityChange"),r.timeForPageReveal=new i.C("TimeForPageReveal"),r.forcePageReload=new i.C("ForcePageReload"),r.updateCurrentPageRefreshState=new i.C("UpdateCurrentPageRefreshState"),r.updateDidRenderStartInBackgroundRenderFlag=new i.C("UpdateDidRenderStartInBackgroundRenderFlag")},56698:function(e,t,n){"use strict";n.d(t,{Eu:function(){return p},bY:function(){return u},fv:function(){return h}});var i=n(53076),r=n(6719),o=n(93450),a=n(28781),s=n(94546),c=n(98304),d=n(65135),l=n(45506);function u(e){const t=o._.getInstance().rootReducer.connector(i.z.Preload);t&&a.X.forcePageReload.getActionSender(t).send(e||s.T.SettingsChange)}function p(e){const t=o._.getInstance().rootReducer.connector(i.z.Preload);t&&a.X.timeForPageReveal.getActionSender(t).send(e)}function h(e){if(!l.Al.IsPreload)return;if("windowsShell"===l.Al.ClientSettings.apptype||"windowsShellV2"===l.Al.ClientSettings.apptype)return e.Win10PerfDCREnabled=1,e[r.Qf]=e[r.dd],delete e[r.dd],void delete e.launchType;const t=function(){const e=o._.getInstance().rootReducer.connector(i.z.Preload);if(!e)return!1;return e.getCurrentState().didRenderStartInBackground}();t&&("edgeChromium"===l.Al.ClientSettings.apptype?(e[r.C7]=1,e[r.eO]=1):e[r.eO]=1);const n=e[r.Lh],a=e[r.dd],s=e[r.pM],u=e[r.pc];let p=!1;if((isNaN(a)||null===a)&&(d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.vAF),{message:"TTVR missing during preload."})),p=!0),(isNaN(n)||null===n)&&(d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.Hif),{message:"TFPR missing during preload."})),p=!0),p)return;const h=e[r.Lh]=e[r.dd]=Math.min(n,a);t&&(e[r.Qf]=a),isNaN(s)||null===s?d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.vwD),{message:"TTVR.SearchBox missing during preload."})):e[r.pM]=Math.min(h,s),isNaN(u)||null===u?d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.sEv),{message:"TTF.SearchBox missing during preload."})):e[r.pc]=Math.min(h,u)}},6719:function(e,t,n){"use strict";n.d(t,{C7:function(){return l},H$:function(){return i},Lh:function(){return s},Qf:function(){return c},dd:function(){return o},eO:function(){return d},jh:function(){return u},pM:function(){return a},pc:function(){return r}});const i="TTPR2",r="TTF.SearchBox",o="TTVR",a="TTVR.SearchBox",s="TFPR",c="TTVR.BackgroundExecution",d="backgroundpreload",l="prerender",u="TTAF"},94546:function(e,t,n){"use strict";var i;n.d(t,{T:function(){return i}}),function(e){e[e.StalePage=1]="StalePage",e[e.SettingsChange=2]="SettingsChange",e[e.MuidChange=3]="MuidChange",e[e.GizmoSettingChange=4]="GizmoSettingChange",e[e.TopSites=5]="TopSites",e[e.PivotSwitch=6]="PivotSwitch",e[e.SignInStateChange=7]="SignInStateChange",e[e.MutePublisher=8]="MutePublisher",e[e.UnMutePublisher=9]="UnMutePublisher",e[e.Dislike=10]="Dislike",e[e.Like=11]="Like",e[e.Save=12]="Save",e[e.Hide=13]="Hide",e[e.KidsMode=14]="KidsMode",e[e.MarketChange=15]="MarketChange",e[e.InterestsSdCardSettingChange=16]="InterestsSdCardSettingChange",e[e.InterestsChange=17]="InterestsChange",e[e.WeatherChange=18]="WeatherChange",e[e.MoneyCardChange=19]="MoneyCardChange",e[e.Disabled=20]="Disabled"}(i||(i={}))},55128:function(e,t,n){"use strict";var i;n.d(t,{S:function(){return i},PublisherServiceClient:function(){return S}}),function(e){e.More="More",e.Mute="Mute",e.Read="Read"}(i||(i={}));var r=n(33940),o=n(56692),a=n(45506),s=n(76754),c=n(63535),d=n(19809),l=n(87298),u=n(17157),p=n(65019),h=n(11380),g=n(81866),m=n(51125),f=n(12108),v=n(33799),y=n(51671);class S{constructor(e,t=!0){this.fetchImpl=e,this.addPageInfoToOcid=t,this.followedPublishersEndpoint="v1/News/Users/Me/PreferredProviders",this.followedSourcesEndpoint="msn/sources",this.publishersServiceEndpoint="Msn/Providers",this.actionsServiceEndpoint="Graph/Actions",this.followActionSourceEndpoint="community/follows",this.ocid="feeds"}getOcid(){return this.ocid}getUserMutedPublishers(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=yield this.getUserActions(i.Mute);if(!e||!e.value)return null;if(!e.value.length)return[];const t=e.value.reduce(((e,t)=>(e[t.targetId]=t,e)),{}),n=yield this.getPublisherDetails(Object.keys(t));if(!n||!n.value||!n.value.length)return null;return n.value.map((e=>{const n={createdDateTime:t[e.id].createdDateTime};return Object.assign(Object.assign({},e),n)}))}))}getUserFollowedPublishers(e=100){return(0,r.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),n=[...yield this.getCommonParams(),{key:"$top",value:`${e}`}],i=(0,c.PH)(this.followedPublishersEndpoint);this.appendQs(n,i),(0,u.wq)()||(0,m.s6)(i);const r=yield this.sendRequest(decodeURIComponent(i.href),t,"getFollowedPublishers");return null==r?void 0:r.value}))}getUserFollowedSources(e=100){var t,n;return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield this.getRequestInit(),r=[...yield this.getCommonParams(),{key:"$top",value:`${e}`},{key:"queryType",value:"MyFeed"}],o=(0,c.PH)(this.followedSourcesEndpoint);this.appendQs(r,o),(0,u.wq)()||(0,m.s6)(o);const a=yield this.sendRequest(decodeURIComponent(o.href),i,"getFollowedSources");return(null===(t=null==a?void 0:a.value)||void 0===t?void 0:t.length)>0?null===(n=null==a?void 0:a.value[0])||void 0===n?void 0:n.subCards.map((e=>{var t;const n=e.intAttributes&&1==e.intAttributes.disableProfile;return Object.assign(Object.assign({},e),{profileId:n?null:e.profileId,displayName:e.name,logos:[{imageLink:{href:null===(t=e.image)||void 0===t?void 0:t.url}}]})})):[]}))}publisherUserAction(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!t)return null;const i=yield this.getRequestInit();i.method=n;let r=yield this.getCommonParams();"POST"===n?i.body=JSON.stringify({actionType:t,targetId:e,targetType:"SourceProvider"}):"DELETE"===n&&(r=[...r,{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}]);const o=(0,c.PH)(this.actionsServiceEndpoint);this.appendQs(r,o);const a=yield this.sendRequest(decodeURIComponent(o.href),i,`deleteUserAction ${t}`,!0,!0);if(a.status>=400){const n=`OneService returned error response. Status: ${a.status} for actionType: ${t}, targetId: ${e}`;throw new Error(n)}return a}))}updateSourceFollowState(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e)return null;const n=yield this.getRequestInit();let i=yield this.getCommonParams();i=[...i],t?(n.method="POST",n.body=JSON.stringify({targetId:e})):(n.method="DELETE",i=[...i,{key:"targetId",value:e}]);const r=(0,c.PH)(this.followActionSourceEndpoint);this.appendQs(i,r);const o=t?"follow":"unfollow";try{return yield this.sendRequest(decodeURIComponent(r.href),n,`updateSourceFollowState ${o}`,!0,!0)}catch(t){throw new Error(`OneService returned error response. Community follow service  for targetId: ${e}, action: ${o}`)}}))}updatePublisherReadTime(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e)return null;const r=yield this.getRequestInit(),o=yield this.getCommonParams(),a=i.Read;r.method="POST",r.body=JSON.stringify({actionType:a,targetType:n,targetId:e,updatedDateTime:t});const s=(0,c.PH)(this.actionsServiceEndpoint);this.appendQs(o,s);try{return yield this.sendRequest(decodeURIComponent(s.href),r,`updateSourceReadTime ${a}`,!0,!0)}catch(t){throw new Error(`OneService returned error response for actionType: ${a}, targetId: ${e}`)}}))}getUserPublishersReadTimes(){return(0,r.mG)(this,void 0,void 0,(function*(){try{const e=yield this.generatePublisherStatusRequest(void 0,i.Read);return null==e?void 0:e.value}catch(e){throw new Error("OneService returned error response for fetching followed sources read times.")}}))}getUserPublisherStatus(e,t){var n;return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield this.generatePublisherStatusRequest(e,t);return!!(null===(n=i.value)||void 0===n?void 0:n.length)}))}generatePublisherStatusRequest(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield this.getRequestInit();n.method="GET";const i=e?`and targetId eq '${e}'`:"";let r=yield this.getCommonParams();r=[...r,{key:"$filter",value:`actionType eq '${t}' ${i} `}];const o=(0,c.PH)(this.actionsServiceEndpoint);return this.appendQs(r,o),(0,u.wq)()||(0,m.s6)(o),yield this.sendRequest(decodeURIComponent(o.href),n,`getUserPublisherStatus ${t}`)}))}getUserActions(e,t=100){return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield this.getRequestInit(),i=[...yield this.getCommonParams(),{key:"$filter",value:`actionType eq '${e}' and deleted eq false and targetType eq 'SourceProvider'`},{key:"$top",value:`${t}`}],r=(0,c.PH)(this.actionsServiceEndpoint);return this.appendQs(i,r),(0,u.wq)()||(0,m.s6)(r),yield this.sendRequest(decodeURIComponent(r.href),n,`getUserActions ${e}`)}))}getPublisherDetails(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),n=(0,c.PH)(this.publishersServiceEndpoint),i=[...d.$D.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:e.join(",")}];return this.appendQs(i,n),yield this.sendRequest(decodeURIComponent(n.href),t,"getPublisherDetails")}))}getCommonParams(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){if("winWidgets"===o.jG.AppType&&(this.ocid=(null===(e=a.Al.ClientSettings)||void 0===e?void 0:e.pagetype)===f.G.Sidebar?"shoreline":"winp2",this.addPageInfoToOcid=!1),(0,u.wq)())return this.getSapphireQueryParams();(0,s._3)()&&(this.ocid="OnOSkypeChannels"),this.forcedApiKey&&(this.addPageInfoToOcid=!1);const t=(yield this.isUserSignedIn())?d.$D.getOneServiceParamsWithAuth(o.jG.UserId||o.jG.ActivityId,this.ocid,this.addPageInfoToOcid):d.$D.getOneServiceParamsWithoutAuth(o.jG.UserId||o.jG.ActivityId,this.ocid,this.addPageInfoToOcid);if(this.forcedApiKey){t.find((e=>"apikey"==e.key)).value=this.forcedApiKey}return t}))}getSapphireQueryParams(){const e=d.$D.getOneServiceNonDynamicParamsWithoutAuth(this.ocid,this.addPageInfoToOcid),t=(0,p._4)();return t&&(e.push({key:o.jG.OneServiceContentMarketQspKey,value:t.market}),o.jG.ShouldUseFdheadQsp&&e.push({key:"fdhead",value:t.features}),e.push({key:"activityId",value:t.activityId}),t.latitude&&t.longitude&&e.push({key:"location",value:`${t.latitude}|${t.longitude}`})),e}getRequestInit(e=null){return(0,r.mG)(this,void 0,void 0,(function*(){return null==e&&(e={method:"GET"}),(o.jG.SendUserIdInHeader||(yield this.isUserSignedIn()))&&(e.credentials="include"),e.headers=(0,u.wq)()?yield(0,h.dG)():yield d.$D.getOneServiceHeaders(),e}))}isUserSignedIn(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=(0,a.nP)().UserIsSignedIn;if(void 0!==e)return e;return(yield(0,y.XJ)())===v.Hy.SignedIn}))}sendRequest(e,t,n,i,o){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,u.wq)()?yield this.sapphireRequest(decodeURIComponent(e),t):yield this.networkRequest(decodeURIComponent(e),t,n,i,o)}))}sapphireRequest(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n={url:e,headers:t.headers,body:t.body,refresh:!0};let i;switch(t.method){case"POST":i=yield(0,g.Ef)(n);break;case"DELETE":i=yield(0,g.o9)(n);break;default:i=yield(0,g.FM)(n)}return JSON.parse(i||"{}")}))}networkRequest(e,t,n,i,o){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,l.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){const n=yield this.fetchImpl(e,t);if(!n.ok)throw Error(n.statusText);return i&&(0,m.T1)(),o?n:n.json()}))),n)}))}appendQs(e,t){e.forEach((e=>{e.value&&t.searchParams.set(e.key,e.value)}))}setForcedApiKey(e){this.forcedApiKey=e}}},63158:function(e,t,n){"use strict";n.d(t,{cB:function(){return a}});var i=n(987);"undefined"!=typeof window&&window.location.href;const r="timestamp_",o="lastKnown_";function a(){(0,i.$o)().supported&&((0,i.$o)().removeSubstringKeys(o),(0,i.$o)().removeSubstringKeys(r),(0,i.$o)().removeSubstringKeys("force_timestamp_"),(0,i.$o)().removeSubstringKeys("keys_"),(0,i.$o)().removeSubstringKeys("_jssMap"))}},6371:function(e,t,n){"use strict";n.d(t,{LZ:function(){return c},b8:function(){return a},gZ:function(){return i},pR:function(){return r},wc:function(){return s}});var i,r,o=n(44772);function a(e){switch(e){case o.PL.Article:return 13;case o.PL.Slideshow:return 14;case o.PL.Video:return 15;default:return null}}function s(e,t){return t?e.find((e=>t.includes(e.type))):null}function c(e,t){return t?e.find((e=>t.includes(e.type))):null}!function(e){e.TRENDING="trending",e.TOPQUESTIONS="topQuestions",e.HIGHLIGHTS="highlights",e.HOT="hot",e.VIEWS="views",e.OPINION="opinion",e.LOCAL="local",e.EXPLICITLIKE="explicitLike",e.FOLLOWEDTREATMENT="followed",e.FOLLOWEDTREATMENTTOPIC="followedTopic",e.FOLLOWEDTREATMENTPUBLISHER="followedPublisher"}(i||(i={})),function(e){e.FOLLOWEDTOPIC="followTopic",e.FOLLOWEDPUBLISHER="followPublisher",e.TRENDING="trending",e.LOCAL="local"}(r||(r={}))},44772:function(e,t,n){"use strict";n.d(t,{PL:function(){return i},TU:function(){return a},ne:function(){return o}});var i,r=n(38156);function o(e){switch(e){case"ArticlePreview":return r.uH.Article;case"SlideshowPreview":return r.uH.Gallery;case"VideoPreview":return r.uH.Video;case"WebContentPreview":return r.uH.WebContent;case"WebContentExternal":return r.uH.ExternalLink;default:return null}}!function(e){e.EntertainmentPremierCard="premier-sd-card",e.BingThisOrThatCard="bing-this-or-that-card",e.BingDailyQuizCard="bing-daily-quiz-card",e.RewardsDailyCheckinCard="RewardsDailyCheckIn",e.RichCalendarCard="RichCalendarSD",e.EventSDCardElectionMIT1="EventSDCardElectionMIT1",e.EventSDCardElectionMIT2="EventSDCardElectionMIT2",e.EventSDCardElectionMIT3="EventSDCardElectionMIT3",e.CommunityCard="CommunityInfo",e.HotListCard="hotlist",e.MobileRewardsCard="Rewards",e.TabbedInfopaneCard="tabbedinfopane",e.TabbedInfopaneCardTab="tabbed-infopane-tab",e.MangaCard="MangaCard",e.MobileShoppingCard="ShoppingFeed1",e.MobileShoppingCard2="ShoppingFeed2",e.MobileShoppingCard3="ShoppingFeed3",e.MobileShoppingCard4="ShoppingFeed4",e.VideoShoppingCard="VideoShoppingSDCard",e.VideoShoppingCarouselCard="VideoShoppingCarousel",e.SuperListCard="super-list-card",e.RealEstateCard="real-estate-card",e.PrayerTimesCard="PrayerTimes",e.PrismCarouselCard="PrismFeedCarousel",e.TrendingSearchCard="TrendingSearchCard",e.CommuteCard="CommuteMetadata",e.DigestCard="digest-card",e.Article="article",e.Slideshow="slideshow",e.Video="video",e.Spotlight="content360",e.Infopane="infopane",e.TabbedInfopane="tabbedInfopane",e.HalfPane="HalfPane",e.HeadToHead="HeadToHead",e.Mosaic="Mosaic",e.Triptych="Triptych",e.TabbedFeedCard="GroupedXfeedUpsell",e.TabbedInfopaneTab="tabbedInfopaneTab",e.WebContent="webcontent",e.ExternalLink="link",e.ChannelCarousel="followCarousel",e.ChannelFilterCard="filteredChannels",e.InterestManagementCard="InterestManager",e.GamingInterestGroup="GamingInterestGroup",e.DenseList="DenseList",e.BackFillContent="BackfillContent",e.MyBriefRiverCard="toppicks",e.panoCard="panocard",e.NativeAd="nativead",e.NativeTopAd="nativetopad",e.CmsAd="cmsad",e.BuyDirectAd="directbuyad",e.AmplifyAd="amplifyad",e.BoostAd="BoostAd",e.EventSDCardAmplifyAds="EventSDCardAmplifyAds",e.ShoppingCard="ShoppingCard",e.EdgeShoppingCard="EdgeShoppingCard",e.ShoppingCarousel="ShoppingCarousel",e.ShoppingRiver="ShoppingRiver",e.EventSDCardShopping="EventSDCardShopping",e.EventInfopaneShoppingAI="EventInfopaneShoppingAI",e.ComicsCarousel="ComicsCarousel",e.EditorsPickCarousel="EditorsPickCarousel",e.SelectCarousel="SelectCarousel",e.DailyFixGamesCarousel="DailyFixGamesCarousel",e.NewsSegmentCarousel="NewsSegmentCarousel",e.SubscriptionCarousel="SubscriptionCarousel",e.GroceryCouponSdCard="GroceryCouponSdCard",e.BeaconProviderUpsell="BeaconProviderUpsell",e.MoneyTopicStripe="MoneyTopicStripe",e.SportsTopicStripe="SportsTopicStripe",e.LinkedInCard="linkedInNewsCard",e.SectionHeader="GreetingsUpsell",e.TopStories="topStories",e.TopStoriesV2="cgtopStories",e.NewsGroups="newsGroups",e.NewsAnswerModule="NewsAnswerModule",e.WorkHeadlines="workNews",e.Trending="trendingnow",e.TrendingTopics="TrendingTopicsUpsellAnaheim",e.LocalNews="XfeedUpsell",e.LocalNewsFeed="LocalNewsFeed",e.SageGroupedFeed="SageGroupedFeed",e.TrendingInTenMinutes="trendingInTenMinutes",e.Horoscope="Horoscope",e.Elections="EventSDCardElection",e.RecommendedSearchCarousel="RecommendedSearchCarousel",e.RecommendedSearchesCard="RecommendedSearch",e.OnThisDay="OnThisDay",e.Lottery="Lottery",e.PartnerUpsell="PartnerUpsell",e.Qna="qnacard",e.quizcard="quizcard",e.Recipes="recipecard",e.Inspiration="PrismFeedCard",e.Rewards="rewardscard",e.TravelDestinationCard="TravelDestinationCard",e.TravelDestinationCarouselCard="TravelDestinationCarouselCard",e.TravelInspirationCard="TravelInspirationCard",e.BingHealthCovid19StatsCard="Covid19Stats",e.BingHealthFitnessCard="healthcard",e.HealthTipCard="healthtipcard",e.HealthRiverCard="healthrivercard",e.PollsCard="pollscard",e.PlaceholderCard="placeholder",e.WinAppAds="WinAppAds",e.CashbackAds="CashbackAds",e.Promotion="Promotion",e.BingVideo="BingVideo",e.BingVideoCarousel="BingVideoCarousel",e.CasualGamesCarousel="CasualGamesCarousel",e.CasualGamesStripeCarousel="CasualGamesStripeCarousel",e.EsportsCasualGames="esportsCasualGames",e.EsportsHighlight="esportsHighlight",e.EsportsLiveStream="esportsLiveStream",e.EsportsMatch="esportsMatch",e.EsportsTournament="esportsTournament",e.EventSDCardWorldCup="EventSDCardWorldCup",e.EventSDCardWorldCup2="EventSDCardWorldCup2",e.ShoppingFeedCard="ShoppingFeedCard",e.WeatherSummary="WeatherSummary",e.WeatherSummary_spotlight="WeatherSummary_spotlight",e.StockQuote="StockQuote",e.StockQuote_spotlight="StockQuote_spotlight",e.MoneyInfo="MoneyInfo",e.MoneyPreWL="MoneyPreWL",e.MoneyCrypto="CryptoCard",e.MoneyMarketBrief="MarketBrief",e.MoneyMoreForYouCard="MoneyMoreForYouCard",e.SportsMatch="SportsMatch",e.SportsOlympics="SportsOlympics",e.TrafficDelays="TrafficDelays",e.TrafficInfo="TrafficInfo",e.Transit="Transit",e.ShoppingProngCardResponse="ShoppingProngCardResponse",e.ShoppingProngCarousel="ShoppingProngCarousel",e.ShoppingProngTracking="ShoppingProngTracking",e.ShoppingMerchantCategoryDeals="ShoppingMerchantCategoryDeals",e.ShoppingVideoCarousel="ShoppingVideoCarousel",e.Group="group",e.Upsell="FreUpsell",e.Dense="densetab",e.LocalGuide="localdaycard",e.Marketplace="MarketPlace",e.MarketplaceEvent="EventSDCardMarketplace",e.GamingNews="gaming",e.GamingClip="GamingClip",e.GamingClipsCarousel="GamingClipsCarousel",e.GamingHighlightClipsCarousel="GamingHighlightClipsCarousel",e.GamingCompete="GamingCompete",e.GamingGamerModeUpsellCard="GamingGamerModeUpsell",e.GamingHighlight="GamingHighlight",e.GamingHighlightsCarousel="GamingHighlightsCarousel",e.GamingLiveStream="GamingLiveStream",e.GamingLiveStreamCarousel="GamingLiveStreamCarousel",e.GamingMatch="GamingMatch",e.GamingPersonalize="GamingPersonalize",e.GamingRecentlyPlayed="GamingRecentlyPlayed",e.GamingRecommendedGames="GamingRecommendedGames",e.GamingReddit="GamingReddit",e.GamingRewards="GamingRewardsCard",e.GamingTournament="GamingTournament",e.GamingUpcomingGames="GamingUpcomingGames",e.GamingVideoCarousel="GamingVideoCarousel",e.GamingVod="GamingVod",e.GamingVideo="GamingVideo",e.AiCharacterCard="AicharacterCard",e.MicrosoftFeedCard="MicrosoftFeedCard",e.IndustryNewsCard="IndustryNewsCard",e.RecommendedCardFeed="RecommendedCardFeed",e.RecommendedInterests="RecommendedInterests",e.WindowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.CompanyNewsCard="CompanyNewsCard",e.AutosEntityList="AutosEntityList",e.AutosCarousel="AutosCarousel",e.ContainerizedHalfu="containerizedHalfu",e.ComboCard="Combo",e.TopicFeed="TopicFeed",e.TopicFeedWeekends="eventcontentcardweekend",e.TopicFeedMomentInTime1="eventcontentcardmit1",e.TopicFeedTrendingNow="trending now",e.TopicFeedTopStories="topstories",e.TopicFeedShopping="eventcontentcardshopping",e.TopicFeedWeather="eventdynamiccontentcardweather",e.Calendar="Calendar",e.Entertainment="Entertainment",e.Family="Family",e.M365="M365",e.Photos="Photos",e.ThirdPartyWidget="3pwidget",e.Tips="Tips",e.ToDo="ToDo",e.XboxGamePass="xboxgamepass",e.Tombstone="tombstone",e.GroupedContent="GroupedContentFeed",e.UserInterestTopic="UserInterestTopic",e.UserInterestNTPProvider="UserInterestNTPProvider",e.SuggestedInterest="SuggestedInterest",e.TopicSuggestionforConsumptionPage="TopicSuggestionforConsumptionPage",e.ProviderSuggestionForConsumptionPage="ProviderSuggestionForConsumptionPage",e.InterestFeed="InterestFeed",e.ProviderFeed="ProviderFeed",e.InterestChannel="InterestChannel",e.ProviderChannel="ProviderChannel",e.UserInterestTopicAndProvider="UserInterestTopicAndProvider",e.NewsFlipper="NewsFlipper",e.ColdStartArticleFreCard="ArticleFre",e.NewsPromotionCard="PromotionFre",e.WindowsShellTrendingTopics="TrendingTopicsUpsell",e.WindowsShellNotificationBanner="genericbadge",e.RewardsDailySet="RewardsDailySet",e.BoostAdsBanner="BoostAdsBanner",e.BoostAdsCoachmark="BoostAdsCoachmark",e.EventSDCardSportsMIT1="EventSDCardSportsMIT1",e.EventSDCardSportsMIT2="EventSDCardSportsMIT2",e.EventSDCardSportsMIT3="EventSDCardSportsMIT3",e.UserInterestProvider="UserInterestProvider",e.WindowsShellMorningDigest="NewsDigest",e.TopicsAndProviders="TopicsAndProviders"}(i||(i={}));const a=[i.NativeAd,i.CmsAd,i.AmplifyAd,i.EventSDCardAmplifyAds,i.BoostAd,i.BoostAdsBanner,i.BoostAdsCoachmark,i.BuyDirectAd,i.NativeTopAd]},12858:function(e,t,n){"use strict";n.d(t,{$H:function(){return r},Au:function(){return i},Y:function(){return c},fv:function(){return o},pW:function(){return a},tD:function(){return s}});const i="0067acd6d05f4168b92f510d33b9ed74",r="dc6cfb18912240efaa3557c0123fb1eb",o="32649384730b2d61c9e79d46de589115",a="service::api.msn.com::MBI_SSL",s="service::www.msn.com::MBI_SSL",c="api://www.msn.com/OneService.Read"},81866:function(e,t,n){"use strict";n.d(t,{jK:function(){return C},o9:function(){return b},Tt:function(){return ne},qT:function(){return ie},yk:function(){return B},cz:function(){return N},JG:function(){return E},q3:function(){return x},dz:function(){return A},Ei:function(){return I},IK:function(){return g},FM:function(){return m},Of:function(){return M},SP:function(){return O},yj:function(){return L},v_:function(){return D},bG:function(){return R},c6:function(){return F},mu:function(){return ae},F:function(){return se},H:function(){return k},_k:function(){return P},Kz:function(){return w},gR:function(){return T},df:function(){return le},cN:function(){return ue},c4:function(){return d},$x:function(){return l},_u:function(){return u},ao:function(){return f},Ef:function(){return v},br:function(){return y},ZW:function(){return S},pp:function(){return p},k4:function(){return h},r:function(){return re},dP:function(){return oe},Nd:function(){return U},R3:function(){return $},R2:function(){return K},e_:function(){return J},ZK:function(){return _},pk:function(){return H},wS:function(){return Q},WR:function(){return Z},Jz:function(){return G},pQ:function(){return V},eI:function(){return W},kE:function(){return j},dq:function(){return q},js:function(){return z},OH:function(){return ce},E$:function(){return de},ix:function(){return ee},mX:function(){return te},Ld:function(){return X},r1:function(){return Y}});var i=n(17157),r=n(33940),o=n(12858);function a(e,t){var n,i;if(function(e){var t;try{return null!==(t=null==e?void 0:e.needHeader)&&void 0!==t&&t}catch(e){c(`Failed to get feed needHeader Failed with exception : ${e}`)}}(e))try{const e=JSON.parse(t),o=JSON.parse(null!==(n=null==e?void 0:e.header)&&void 0!==n?n:null),a=null!==(i=null==o?void 0:o["ddd-activityid"])&&void 0!==i?i:null;a&&function(e){(0,r.mG)(this,void 0,void 0,(function*(){const t=window.localStorage.getItem(s);if(void 0===t||""===t)window.localStorage.setItem(s,e);else{const n=t.split(",");n.length<10&&!n.includes(e)&&window.localStorage.setItem(s,`${t},${e}`)}}))}(a)}catch(e){c(`Failed to get feed needHeader Failed with exception : ${e}`)}}const s="activityIds";function c(e){(0,i.wq)()&&function(e){new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logEvent",e,t)}(e,(e=>{t(e)}))}))}({appId:o.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}function d(e,t){(0,i.dw)("navigate",e,t)}function l(e){return new Promise(((t,n)=>{d(e,(e=>{t(e)}))}))}function u(e,t){d(e,t)}function p(e,t){(0,i.dw)("requestBrowser",e,t)}function h(e){return new Promise(((t,n)=>{p(e,(e=>{t(e)}))}))}function g(e,t){(0,i.dw)("getHttp",e,t)}function m(e){return new Promise(((t,n)=>{g(e,(n=>{t(n),a(e,n)}))}))}function f(e,t){(0,i.dw)("postHttp",e,t)}function v(e){return new Promise(((t,n)=>{f(e,(e=>{t(e)}))}))}function y(e,t){(0,i.dw)("putHttp",e,t)}function S(e){return new Promise(((t,n)=>{y(e,(e=>{t(e)}))}))}function C(e,t){(0,i.dw)("deleteHttp",e,t)}function b(e){return new Promise(((t,n)=>{C(e,(e=>{t(e)}))}))}function w(e,t){(0,i.dw)("logEvent",e,t)}function T(e){return new Promise(((t,n)=>{w(e,(e=>{t(e)}))}))}function k(e,t){(0,i.dw)("logError",e,t)}function P(e){return new Promise(((t,n)=>{k(e,(e=>{t(e)}))}))}function A(e,t){(0,i.dw)("getDeviceInfo",e,t)}function I(e){return new Promise(((t,n)=>{A(e,(e=>{t(e)}))}))}function E(e,t){(0,i.dw)("getBatteryInfo",e,t)}function x(e){return new Promise(((t,n)=>{E(e,(e=>{t(e)}))}))}function M(e,t){(0,i.dw)("getLocationInfo",e,t)}function O(e){return new Promise(((t,n)=>{M(e,(e=>{t(e)}))}))}function L(e,t){(0,i.dw)("getNetworkInfo",e,t)}function D(e){return new Promise(((t,n)=>{L(e,(e=>{t(e)}))}))}function R(e,t){(0,i.dw)("getUserInfo",e,t)}function F(e){return new Promise(((t,n)=>{R(e,(e=>{t(e)}))}))}function B(e,t){(0,i.dw)("getAppList",e,t)}function N(e){return new Promise(((t,n)=>{B(e,(e=>{t(e)}))}))}function U(e,t){(0,i.dw)("requestDialog",e,t)}function $(e){return new Promise(((t,n)=>{U(e,(e=>{t(e)}))}))}function _(e,t){(0,i.dw)("requestPermission",e,t)}function H(e){return new Promise(((t,n)=>{_(e,(e=>{t(e)}))}))}function W(e,t){(0,i.dw)("requestToast",e,t)}function j(e){return new Promise(((t,n)=>{W(e,(e=>{t(e)}))}))}function G(e,t){(0,i.dw)("requestSnackBar",e,t)}function V(e){return new Promise(((t,n)=>{G(e,(e=>{t(e)}))}))}function q(e,t){(0,i.dw)("requestVibration",e,t)}function z(e){return new Promise(((t,n)=>{q(e,(e=>{t(e)}))}))}function Q(e,t){(0,i.dw)("requestRestart",e,t)}function Z(e){return new Promise(((t,n)=>{Q(e,(e=>{t(e)}))}))}function K(e,t){(0,i.dw)("requestOrientation",e,t)}function J(e){return new Promise(((t,n)=>{K(e,(e=>{t(e)}))}))}function X(e,t){return(0,i.oL)(e,t)}function Y(e,t,n){(0,i.Ev)(e,t,n)}function ee(e,t){(0,i.dw)("sendBroadcast",e,t)}function te(e){return new Promise(((t,n)=>{ee(e,(e=>{t(e)}))}))}function ne(e,t){(0,i.dw)("fetchAds",e,t)}function ie(e){return new Promise(((t,n)=>{ne(e,(e=>{t(e)}))}))}function re(e,t){(0,i.dw)("requestCustom",e,t)}function oe(e){return new Promise(((t,n)=>{re(e,(e=>{t(e)}))}))}function ae(e,t){(0,i.dw)("loadData",e,t)}function se(e){return new Promise(((t,n)=>{ae(e,(e=>{t(e)}))}))}function ce(e,t){(0,i.dw)("saveData",e,t)}function de(e){return new Promise(((t,n)=>{ce(e,(e=>{t(e)}))}))}function le(e,t){(0,i.dw)("requestShare",e,t)}function ue(e){return new Promise(((t,n)=>{le(e,(e=>{t(e)}))}))}},17157:function(e,t,n){"use strict";n.d(t,{Ev:function(){return f},NG:function(){return p},Yt:function(){return u},dw:function(){return g},oL:function(){return m},wq:function(){return c}});var i=n(33379),r=n(30040);const o={},a={};function s(e,t){let n=r.DS.decode(t);void 0!==n&&""!==n||(n=null),o[e]&&o[e].length>0&&(o[e].forEach((e=>{e(n)})),o[e]=void 0),a[e]&&a[e].length>0&&a[e].forEach((e=>{e(n)}))}function c(){var e,t,n,r;if(!(0,i.N)())return!1;const o=null===(e=window.sapphireWebViewBridge)||void 0===e?void 0:e.send,a=null===(r=null===(n=null===(t=window.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.send)||void 0===r?void 0:r.postMessage;return o||a}let d,l=!1;function u(){!l&&c()&&(window.sapphireWebViewBridge||(window.sapphireWebViewBridge={}),window.sapphireWebViewBridge.$onDataReady=s,l=!0)}function p(e){d=e}function h(e,t){var n,i,r,o,a,s,c,l;console.log(e,t);const u="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),p={scenario:e,data:{data:t},id:u};d&&!p.data.data.appId&&(p.data.data.appId=d);const h=JSON.stringify(p);return(null===(r=null===(i=null===(n=window.webkit)||void 0===n?void 0:n.messageHandlers)||void 0===i?void 0:i.send)||void 0===r?void 0:r.postMessage)&&(null===(s=null===(a=null===(o=window.webkit)||void 0===o?void 0:o.messageHandlers)||void 0===a?void 0:a.send)||void 0===s||s.postMessage(h)),(null===(c=window.sapphireWebViewBridge)||void 0===c?void 0:c.send)&&window.sapphireWebViewBridge.send(h),(null===(l=window.VPsapphireWebViewBridge)||void 0===l?void 0:l.send)&&window.VPsapphireWebViewBridge.send(h),u}function g(e,t,n){const i=h(e,t);n&&function(e,t){o[e]?o[e].push(t):o[e]=[t]}(i,n)}function m(e,t){const n=h("subscribe",e);var i,r;return r=t,a[i=n]?a[i].push(r):a[i]=[r],n}function f(e,t,n){g("unSubscribe",t,(e=>{n&&n(e)})),a[e]=void 0}},90489:function(e,t,n){"use strict";var i,r,o;n.d(t,{dO:function(){return i},ip:function(){return o},mk:function(){return r}}),function(e){e.Android="Android",e.iPad="iPadOS",e.iOS="iOS"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Approximate=1]="Approximate",e[e.Precise=2]="Precise"}(r||(r={})),function(e){e.Summarize="summarize",e.TopQuestions="top-questions",e.KeyTakeaways="key-takeaways",e.Panel360Degree="360-degree-panel",e.FactCheck="fact-check"}(o||(o={}))},65019:function(e,t,n){"use strict";n.d(t,{A7:function(){return c},AL:function(){return _},Bp:function(){return S},I$:function(){return q},KJ:function(){return O},P7:function(){return E},Vx:function(){return k},Zj:function(){return M},_4:function(){return A},_j:function(){return H},b0:function(){return $},fb:function(){return U},fp:function(){return T},gS:function(){return I},hP:function(){return x},jD:function(){return b},mr:function(){return P},n6:function(){return W},po:function(){return y},uM:function(){return C},yh:function(){return w}});var i=n(33940),r=n(90489),o=n(81866),a=n(12858);const s=(e,t)=>new URL(t).searchParams.get(e)||null;function c(e){var t,n;const i=`; ${document.cookie}`.split(`; ${e}=`)||[];if(2===i.length)return null===(n=null===(t=i.pop())||void 0===t?void 0:t.split(";"))||void 0===n?void 0:n.shift()}const d=()=>c("MUID");let l,u,p,h,g,m,f,v=!1;function y(e){m=e}function S(e){f=e}function C(){return m}function b(){return f}function w(e,t=!1){return(0,i.mG)(this,void 0,void 0,(function*(){const n=window.location.href,i=s("muid",n),r=/android/i.test(window.navigator.userAgent);return(V()?r:i)&&!t?f(e):m(e)}))}function T(){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{setTimeout((()=>(0,i.mG)(this,void 0,void 0,(function*(){const n=yield M(),i=null==n?void 0:n.sapphireId;i?(h.muid=`m-${i}`,e(i)):t()}))),50)}))}))}function k(){return v}function P(){return(0,i.mG)(this,void 0,void 0,(function*(){let e=0;return new Promise(((t,n)=>{if(v)t();else{const r=setInterval((function(){return(0,i.mG)(this,void 0,void 0,(function*(){v?(clearInterval(r),t()):e>30?(clearInterval(r),n()):e++}))}),50)}}))}))}function A(){return h}function I(){return(0,i.mG)(this,void 0,void 0,(function*(){try{yield L(),l&&(h.accountType=l.accountType,h.isSignedIn=l.isSignedIn)}catch(e){R(e,"SapphireUserConfig.UserInfomation: Failed to getUserInformationInternal")}}))}function E(e){h.market=e,B(h)}function x(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(l.isSignedIn&&"AAD"===l.accountType){const e=yield(0,o.c6)({refresh:!0,accountType:"AAD"});try{const t=JSON.parse(e);if(t.accessToken&&t.accessToken.length>0)return`Bearer ${t.accessToken}`}catch(e){R(e,"SapphireUserConfig.getAccessToken: Failed to parse AAD access token")}}if(l.isSignedIn&&"MSA"===l.accountType){const t=yield(0,o.c6)({refresh:!0,accountType:"MSA",type:"AccessToken",scope:e});try{const e=JSON.parse(t);if(e.succeed)return e.accessToken}catch(e){R(e,"SapphireUserConfig.getAccessToken: Failed to parse MSA access token")}}return null}))}function M(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,o.Ei)({});try{return JSON.parse(e)}catch(e){R(e,"SapphireUserConfig.getDeviceInformation: Failed to parse response")}}))}function O(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,o.v_)({});try{g=JSON.parse(e)}catch(e){R(e,"SapphireUserConfig.getNetworkInformation: Failed to parse response")}}))}function L(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,o.c6)({});try{l=JSON.parse(e)}catch(e){R(e,"SapphireUserConfig.getUserInformationInternal: Failed to parse response")}}))}function D(e){let t=null;try{t=JSON.parse(e)}catch(e){R(e,"SapphireUserConfig.getLocationInformationInternal: Failed to parse response")}return t}function R(e,t){(0,o._k)({type:"Failure",name:"HP_WEBVIEW_APP_ERROR",error:t,data:{error:e,customMessage:t}})}function F(e){if(!e||"null"===e||"undefined"===e||""===e)return"en-us";const t=e.toLowerCase();return"en-id"===t?"en-xl":t}function B(e){"ru-ru"===e.market&&e.detectedCountry&&"RU"!==e.detectedCountry&&(e.market="en-xl");const t=e.market.split("-");t&&2==t.length&&(e.language=t[0],e.countryCode=t[1])}function N(){return R(new Error("SapphireUserConfig.uuidv4: Recieved empty activityId"),"Empty activityId"),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function U(e){const{lat:t,lng:n,provider:i,accuracy:r,time:o,city:a}=e,{cityInfo:s}=h;let c=!1;return(null==a?void 0:a.locality)&&(null==s?void 0:s.locality)!==(null==a?void 0:a.locality)&&(c=!0),h.latitude=t,h.longitude=n,h.clientLocationProvider=i,h.clientLocationAccuracy=r,a&&(h.cityInfo=a),e.time&&(h.clientLocationTimeStamp=new Date(Number(o)).toISOString()),c}function $(e){h.userLocationPermission=e}function _(){return(0,i.mG)(this,void 0,void 0,(function*(){let e=r.mk.None;if(yield H(r.mk.Precise))e=r.mk.Precise;else{(yield H(r.mk.Approximate))&&(e=r.mk.Approximate)}return e}))}function H(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t=!1;const n=/android/i.test(window.navigator.userAgent);let i=e===r.mk.Precise?"fineLocation":"location";"zh-cn"!==h.market||n||(i="location");try{const e=yield(0,o.pk)({permission:i,check:!0});t=JSON.parse(e).granted}catch(e){R(e,"SapphireUserConfig.isUserLocationPermissionGranted: Failed to parse location permission data for permission type "+i)}return t}))}function W(e,t,n=new Error("Promise timed out")){const i=new Promise(((e,i)=>{setTimeout((()=>{i(n)}),t)}));return Promise.race([e,i])}y((function(e){return(0,i.mG)(this,void 0,void 0,(function*(){h={},window.performance.mark("HP-initUserConfigForOthers-DeviceInformation-Start"),u=yield M(),window.performance.mark("HP-initUserConfigForOthers-DeviceInformation-End"),window.performance.measure("HP-initUserConfigForOthers-DeviceInformation","HP-initUserConfigForOthers-DeviceInformation-Start","HP-initUserConfigForOthers-DeviceInformation-End");const t=window.location.href,n=V();if(u){h.muid=`m-${u.sapphireId}`,h.deviceLevel=u.deviceLevel,h.sapphireId=u.sapphireId,h.adid=u.ADID;const e=/superapp.msn.cn/i.test(window.location.href),t=Object.keys(u).find((e=>"anid"===e.toLowerCase()));h.anid=t?u[t]:void 0,h.market=n&&e?"zh-cn":F(u.market),h.features=u.expFeatures,h.activityId=u.expActivityId?u.expActivityId:N(),h.isDarkMode=u.isDarkMode,h.platform=u.platform,h.bridgeVersionInt=u.bridgeVersionInt,h.fontSize=u.fontSize,h.isChinaBuild=u.isChinaBuild,h.clientVersion=u.clientVersion||"",h.packageName=u.packageName,h.installSource=u.installSource,h.detectedCountry=u.detectedCountry?u.detectedCountry:"",h.isEdge=void 0!==u.isEdge&&u.isEdge,h.isEos=void 0!==u.isEos&&u.isEos,h.screenWidth=u.screenWidth,h.screenWidthPx=u.screenWidthPx,h.screenHeight=u.screenHeight,h.screenHeightPx=u.screenHeightPx,h.isBingApp=u.isBingApp,h.isNewsApp=u.isNewsApp,h.adjustCampaign=u.adjustCampaign,h.attributionNetwork=u.attributionNetwork,h.isFirstSession=u.isFirstSession,h.isProd=u.isProd,B(h)}let r;n&&(r=d(),h.sapphireId=null!==r?r:"",h.muid=null!==r?`m-${r}`:""),window.performance.mark("HP-initUserConfigForOthers-UserInformation-Start"),yield L(),window.performance.mark("HP-initUserConfigForOthers-UserInformation-End"),window.performance.measure("HP-initUserConfigForOthers-UserInformation","HP-initUserConfigForOthers-UserInformation-Start","HP-initUserConfigForOthers-UserInformation-End");const a=s("isSignedIn",t),c=s("accountType",t);l&&(h.accountType=l.accountType||c,h.isSignedIn=l.isSignedIn||"true"===a,h.isSSO=l.isSSO),window.performance.mark("HP-initUserConfigForOthers-LocationInformation-Start"),yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,o.SP)({fallbackRevIP:!1});p=D(e)}))}(),window.performance.mark("HP-initUserConfigForOthers-LocationInformation-End"),window.performance.measure("HP-initUserConfigForOthers-LocationInformation","HP-initUserConfigForOthers-LocationInformation-Start","HP-initUserConfigForOthers-LocationInformation-End"),p&&(h.latitude=p.lat,h.longitude=p.lng,h.clientLocationProvider=p.provider,h.clientLocationAccuracy=p.accuracy,h.cityInfo=p.city,p.time&&(h.clientLocationTimeStamp=new Date(Number(p.time)).toISOString()),h.userLocationPermission=yield W(_(),500)),window.performance.mark("HP-initUserConfigForOthers-NetworkInformation-Start"),yield O(),window.performance.mark("HP-initUserConfigForOthers-NetworkInformation-End"),window.performance.measure("HP-initUserConfigForOthers-NetworkInformation","HP-initUserConfigForOthers-NetworkInformation-Start","HP-initUserConfigForOthers-NetworkInformation-End"),g&&(h.networkInfoType=g.type);const m=new URLSearchParams(window.location.search);if(h.isPageRefresh=!(!m||!m.get("isPageRefresh"))&&"1"===m.get("isPageRefresh"),e&&(e.muid&&(h.muid=e.muid),e.activityId&&(h.activityId=e.activityId),h.features=e.expFeatures),h&&Object.keys(h).length>0&&(v=!0),!(null==h?void 0:h.muid)){R(new Error("SapphireUserConfig.initUserConfig: Recieved empty muid"),"Empty muid for iOS SA")}}))})),S((function(e){return(0,i.mG)(this,void 0,void 0,(function*(){h={};const t=window.location.href,n=V();let c;c=n?d():s("muid",t),h.sapphireId=null!==c?c:"",h.muid=null!==c?`m-${c}`:"";const u=s("adid",t);h.adid=null!==u?u:"";const g=s("market",t);h.market=F(g),B(h);const m=s("features",t);h.features=null!==m?m:"",e&&n&&(h.features=e.expFeatures);const f=s("activityId",t);h.activityId=f||N();const y=s("platform",t);h.platform=null!==y?r.dO[y]:"",h.bridgeVersionInt=1;const S=s("bridgeVersionInt",t);S&&(h.bridgeVersionInt=parseInt(S,10));const C=s("isDarkMode",t);h.isDarkMode="true"===C;const b=s("isSignedIn",t);h.isSignedIn="true"===b;const w=s("isSSO",t);h.isSSO="true"===w;const T=s("accountType",t);h.accountType=null!==T?T:"",n&&(yield L(),Object.values(l).forEach((e=>{"MSA"!==e&&"AAD"!==e||(h.accountType=e)})));const k=s("isPageRefresh",t);h.isPageRefresh=null!==k&&"1"===k;const P=s("isChinaBuild",t);h.isChinaBuild="true"===P;const A=s("kids",t);h.isKidsMode=null!==A&&"1"===A;const I=s("fontSize",t);h.fontSize=parseInt(I,10);const E=s("latitude",t);h.latitude=null!==E?E:"";const x=s("longitude",t);h.longitude=null!==x?x:"";const O=s("anid",t);h.anid=null!==O?O:"",l={isSignedIn:h.isSignedIn,accountType:h.accountType},p={lat:E,lng:x};const U=s("clientVersion",t);if(null!=U){h.clientVersion=U;const e=s("packageName",t);h.packageName=null!==e?e:""}else window.performance.mark("HP-initUserConfigForSuperAppAndroid-DeviceInformation-Start"),M().then((e=>{!function(e){window.performance.mark("HP-initUserConfigForSuperAppAndroid-DeviceInformation-End"),window.performance.measure("HP-initUserConfigForSuperAppAndroid-DeviceInformation","HP-initUserConfigForSuperAppAndroid-DeviceInformation-Start","HP-initUserConfigForSuperAppAndroid-DeviceInformation-End"),h.clientVersion=e.clientVersion||"",h.packageName=e.packageName,h.isProd=e.isProd}(e)}));window.performance.mark("HP-initUserConfigForSuperAppAndroid-LocationInformation-Start");const $=s("provider",t);if(null!==$){h.clientLocationProvider=null!==$?$:"";const e=s("accuracy",t);h.clientLocationAccuracy=null!==e?e:"";const n=s("time",t);h.clientLocationTimeStamp=null!==n?n:""}else(0,o.SP)({appId:a.Au,fallbackRevIP:!1,detectCity:!0}).then((e=>(0,i.mG)(this,void 0,void 0,(function*(){window.performance.mark("HP-initUserConfigForSuperAppAndroid-LocationInformation-End"),window.performance.measure("HP-initUserConfigForSuperAppAndroid-LocationInformation","HP-initUserConfigForSuperAppAndroid-LocationInformation-Start","HP-initUserConfigForSuperAppAndroid-LocationInformation-End"),p=D(e),p&&(h.latitude=p.lat,h.longitude=p.lng,h.clientLocationProvider=p.provider,h.clientLocationAccuracy=p.accuracy,h.cityInfo=p.city,p.time&&(h.clientLocationTimeStamp=new Date(Number(p.time)).toISOString()),h.userLocationPermission=yield W(_(),500))}))));if(M().then((e=>{h.installSource=e.installSource,h.detectedCountry=e.detectedCountry?e.detectedCountry:"",h.deviceLevel=e.deviceLevel,h.screenWidth=e.screenWidth,h.screenWidthPx=e.screenWidthPx,h.screenHeight=e.screenHeight,h.screenHeightPx=e.screenHeightPx,h.isBingApp=e.isBingApp,h.isNewsApp=e.isNewsApp,h.adjustCampaign=e.adjustCampaign,h.attributionNetwork=e.attributionNetwork,h.isFirstSession=e.isFirstSession,h.isOEM=G(e.buildChannel),B(h)})),h&&Object.keys(h).length>0&&(v=!0),!(null==h?void 0:h.muid)){R(new Error("SapphireUserConfig.initUserConfig: Recieved empty muid"),"Empty muid for Android SA")}}))}));const j=["Huawei_cn","Xiaomi_cn","Tencent_cn","Oppo_cn","Vivo_cn","Ali_cn","Download_cn","Samxung_cn","Baidu_cn","Lenovo_cn","Meizu_cn","Other_cn","Huawei_store","Huawei_pre","Tcl_pre","Duo_pre","Lenovo_pre","Xiaomi_pre","Honor_pre"],G=e=>j.filter((t=>t.toLowerCase()===e.toLowerCase())).length>0;function V(){const e=window.location.href;return"1"===s("edge",e)}function q(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(l||(yield L()),l.isSignedIn){if(l.accessToken)return l.accessToken;{const t=yield(0,o.c6)({refresh:!0,accountType:l.accountType,type:"AccessToken",scope:e});try{const e=JSON.parse(t);if(null==e?void 0:e.succeed){const t=e.accessToken.startsWith("t=")?e.accessToken.substring(2):e.accessToken;return l.accessToken=t,t}}catch(e){R(e,`SapphireUserConfig.getAccessTokenOnEdge: Failed to parse ${l.accountType} access token`)}}}return null}))}},11380:function(e,t,n){"use strict";n.d(t,{$:function(){return Y},$V:function(){return I},AG:function(){return h},AJ:function(){return b},AQ:function(){return se},BG:function(){return u},CN:function(){return ne},Cw:function(){return v},G$:function(){return z},H:function(){return ee},HC:function(){return ve},HI:function(){return q},LK:function(){return le},M8:function(){return J},NM:function(){return X},Nq:function(){return be},Nt:function(){return $},Qe:function(){return w},Sh:function(){return fe},Sm:function(){return C},So:function(){return Z},UO:function(){return N},VA:function(){return re},VQ:function(){return pe},Vs:function(){return ae},XF:function(){return m},XG:function(){return oe},Xz:function(){return H},_o:function(){return f},bk:function(){return _},cc:function(){return S},ci:function(){return U},dG:function(){return W},em:function(){return ie},fM:function(){return K},hi:function(){return p},hj:function(){return me},iX:function(){return te},in:function(){return ge},jA:function(){return de},jV:function(){return V},jv:function(){return E},kX:function(){return k},lK:function(){return ye},lL:function(){return i},lj:function(){return P},lm:function(){return F},oC:function(){return O},oL:function(){return Se},oh:function(){return y},p9:function(){return he},qn:function(){return Ce},rI:function(){return ce},tD:function(){return T},vj:function(){return ue},w8:function(){return g},wM:function(){return Q},wR:function(){return j},wh:function(){return A},xW:function(){return B},xe:function(){return L},xp:function(){return D},zP:function(){return x},zy:function(){return M}});var i,r=n(33940),o=n(12858),a=n(65019),s=n(81866),c=n(90489),d=n(17157);!function(e){e.OnlineRetailer="OnlineRetailer",e.Venue="Venue",e.Map="Map",e.Category="Category",e.Promotion="Promotion",e.CardList="Card-List",e.VideoList="Video-List"}(i||(i={}));const l="Home";function u(e,t,n,i,r){const o={url:e,deeplink:n,articleId:t,action:"requestNativePage"};i&&(o.commentId=i,o.shouldScrollToComments=r),k(o)}function p(e,t,n,i){k({url:e,firstCard:i,deeplink:n,articleId:t,action:"requestNativePage"})}function h(e,t){const n={action:"requestActionMenu",items:e};(0,s._u)(n,t)}function g(e,t,n,i){k({action:"requestShare",title:t,content:e,description:i})}function m(e,t,n,i,o,a,c,d,l,u,p,h){return(0,r.mG)(this,void 0,void 0,(function*(){const r={partner:"MySaves",scenario:"Add",category:"News",data:{title:e,key:t,newsId:o,type:a,url:n,timestamp:i,image:d,icon:p,imageHeight:l,imageWidth:u,provider:c,firstCard:h}};return yield(0,s.dP)(r)}))}function f(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t={partner:"MySaves",scenario:"Delete",category:"News",filters:{conditions:[{key:"key",value:e,operator:"="}]}};return yield(0,s.dP)(t)}))}function v(e){var t;return(0,r.mG)(this,void 0,void 0,(function*(){const n={partner:"MySaves",scenario:"Get",category:"News",filters:{conditions:[{key:"key",value:e,operator:"="}]}},i=yield(0,s.dP)(n);try{const e=JSON.parse(i);return!0===(null==e?void 0:e.success)&&!!(null===(t=e.result)||void 0===t?void 0:t.length)}catch(e){}return!1}))}function y(e,t,n,i,o,a="long"){return(0,r.mG)(this,void 0,void 0,(function*(){const r={message:e,action:o,period:a,bgColor:t,textColor:n,actionColor:i,bottomMargin:200,showImmediately:!1};return yield(0,s.pQ)(r)}))}function S(e,t,n,i,r){k({deeplink:e,action:t||"requestNativePage",targetAppId:n,page:i,params:r})}function C(e,t,n){let r="";switch(t){case i.OnlineRetailer:r=`sapphire://dealsHub?page=home&source=Sapphire&medium=ShoppingFeedCards&contentType=OnlineOffer&drawer=OnlineRetailer&drawerData=${n}`;break;case i.Venue:r=`sapphire://dealsHub?page=home&source=Sapphire&medium=ShoppingFeedCards&contentType=NearbyOffer&drawer=Venue&drawerData=${n}`;break;case i.Map:r="sapphire://dealsHub?page=deeplink&medium=ShoppingFeedCards&contentType=NearbyOffers&url=/nearby-map?";break;case i.Category:r=`sapphire://dealsHub?page=category&categoryName=${n}&source=Sapphire&medium=ShoppingFeedCards&contentType=${n}`;break;case i.Promotion:r="sapphire://dealsHub?page=home&drawer=GroceryRebateDetails&drawerData=%7B%22id%22%3A%22receipt%22%2C%22sourceId%22%3A%22%22%2C%22source%22%3A%22%22%2C%22offerType%22%3A%22grocery%22%2C%22name%22%3A%22Scan%20and%20Earn!%22%2C%22description%22%3A%22Earn%20instant%20cash%20back%20when%20you%20scan%20receipts.%22%2C%22summary%22%3A%22%22%2C%22disclaimer%22%3A%22Scan%20and%20complete%20ANY%20ONE(1)%20VALID%20RECEIPT%20to%20claim%20cashback.%20Receipt%20must%20be%20submitted%20within%2014%20days%20of%20purchase%20date%20on%20receipt.%20Limit%201%20per%20user.%20The%20maximum%20daily%20cashback%20earn%20limit%20is%20%246.5%20per%20user.%20The%20maximum%20weekly%20cashback%20earn%20limit%20is%20%2410%20per%20user.%22%2C%22category%22%3A%22%22%2C%22displayCategory%22%3A%22%22%2C%22images%22%3A%5B%22https%3A%2F%2Fsapphire.azureedge.net%2Fapps%2Ff94e53400dc149ff8c8016d271c78876%2Fa5ca45f66bae42bf86d81faeb0242297%2Freceipt-new.png%22%5D%2C%22includedBrands%22%3A%5B%22Receipt%20Scan%22%5D%2C%22includedRetailers%22%3A%5B%7B%22id%22%3A%22%22%2C%22name%22%3A%22%22%7D%5D%2C%22excludedBrands%22%3A%5B%5D%2C%22excludedRetailers%22%3A%5B%5D%2C%22excludeOtherPromotions%22%3Afalse%2C%22startDate%22%3A%22%22%2C%22expirationDate%22%3A%22%22%2C%22active%22%3Atrue%2C%22valueType%22%3A%22%22%2C%22offerValue%22%3Anull%2C%22rewards%22%3A%5B%5D%2C%22partitionKey%22%3A%22%22%2C%22sourceFields%22%3A%7B%7D%2C%22deeplink%22%3A%7B%22targetAppId%22%3A%22b48290e0df1e430a81007bac5f5602bb%22%2C%22page%22%3A%22home%22%2C%22params%22%3A%7B%22offerId%22%3A%22receipt%22%7D%7D%7D&source=PromoBannerCard&contentType=PromotionRS";break;case i.CardList:r=`sapphire://dealsHub?page=card-list&listId=${n}&source=Sapphire&medium=ShoppingFeedCards&contentType=${n}`;break;case i.VideoList:r=`sapphire://miniApp?id=d907c956035445239a134ad443f27294&page=deeplink-with-params&url=video&source=Sapphire&medium=ShoppingFeedCards&contentType=${n}`}k({action:"requestNativePage",targetAppId:e,deeplink:r})}function b(e,t,n){k({action:"requestMiniApp",targetAppId:e,page:t,params:n})}function w(e){k({action:"requestAutoSuggest",query:e,scope:"web",source:"homepage",appId:o.Au})}function T(e,t){k({action:"requestMiniAppPage",targetAppId:e,page:t})}function k(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield(0,s.$x)(e)}))}function P(e="",t="",n=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const i={accountType:e,scope:t,refresh:n};return yield(0,s.c6)(i)}))}function A(){const e={partner:l,data:{method:"homepageFeedRefreshCompleted",params:{}}};(0,s.dP)(e)}function I(){const e={partner:l,data:{method:"homepageFeedTTVRCompleted",params:{}}};(0,s.dP)(e)}function E(){const e={partner:l,data:{method:"homepageFeedImgLoadCompleted",params:{}}};(0,s.dP)(e)}function x(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=(0,a._4)();let t=null;if((null==e?void 0:e.platform)===c.dO.Android)return t={appId:o.Au,partner:"Features",target:"scaffolding",features:["enableHomepageBackground"]},JSON.parse(yield(0,s.dP)(t));if((null==e?void 0:e.platform)===c.dO.iOS){t={appId:o.Au,partner:"Features",target:"settings",features:["enableHomepageBackground"]};const{enableHomepageBackground:e=!1}=JSON.parse(yield(0,s.dP)(t));return{result:{enableHomepageBackground:e}}}}))}function M(){return(0,r.mG)(this,void 0,void 0,(function*(){const e={appId:o.Au,partner:"Features",target:o.fv,features:["spotifyPromo"]};return JSON.parse(yield(0,s.dP)(e))}))}function O(e,t,n){const i={uniqueId:o.fv,key:`Promo-${e}-${t}-shared`,type:"json",appId:o.Au};return(0,s.mu)(i,n)}function L(e=!0,t,n){var i,r,o;const a=(null===(o=null===(r=null===(i=null==t?void 0:t[1])||void 0===i?void 0:i.ref)||void 0===r?void 0:r.getBoundingClientRect())||void 0===o?void 0:o.bottom)||733,c={partner:l,data:{method:"homepageFeedSnapshotReady",params:R(e,a,t,n)}};(0,s.dP)(c)}function D(e=!0,t,n,i){const r={partner:l,data:{method:"homepageFeedAdsCardReady",params:R(e,t,n,i)}};(0,s.dP)(r)}function R(e=!0,t,n,i){const r=(null==i?void 0:i.screenWidthPx)/(null==i?void 0:i.screenWidth);return{snapshot:{allow:e&&!!(null==i?void 0:i.screenWidth)&&!!(null==i?void 0:i.screenHeightPx)&&!!t&&!!(null==i?void 0:i.screenWidthPx),expectedArea:`0,0,${null==i?void 0:i.screenWidthPx},${Math.min(Math.ceil(t*r),null==i?void 0:i.screenHeightPx)}`},cardList:n.map(((e,t)=>{var n;const i=null===(n=null==e?void 0:e.ref)||void 0===n?void 0:n.getBoundingClientRect();return{index:t,data:e.data,clickArea:`${Math.floor((null==i?void 0:i.left)*r)},${Math.floor((null==i?void 0:i.top)*r)},${Math.ceil((null==i?void 0:i.right)*r)},${Math.ceil((null==i?void 0:i.bottom)*r)}`}}))}}function F(){const e={partner:l,data:{method:"requestArticleFeedback",params:{}}};(0,s.dP)(e)}function B(){const e={partner:l,data:{method:"requestSuperApp",params:{}}};(0,s.dP)(e)}function N(e){k({url:e,action:"requestBrowser"})}function U(e){return{partner:l,data:{method:"getPrefetchData",params:{url:e}}}}function $(e){const t={partner:l,data:{method:"addPrefetchUrls",params:{urls:[e]}}};(0,s.dP)(t)}function _(e,t){const n={partner:l,data:{method:"clickEmojiCallback",params:{url:e,reactionType:t}}};(0,s.dP)(n)}function H({url:e,refresh:t=!1,headers:n=null,needHeader:i=!1,processError:r=!1,isEdge:o=!1,cacheKey:s}){const c={url:e,refresh:t,needHeader:i,processError:r},d=(0,a._4)();return s&&(c.cacheKey=s),i&&d.bridgeVersionInt<=1&&(c.needHeader=!1),n&&(c.headers=n),c}function W(e=!1,t=!1,n=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const i={};e&&(i.SiteName="www.msn.com");const r=(0,a._4)();if(r)if(i.MUID=r.muid,i["X-MSEdge-ClientID"]=r.sapphireId,i["X-MSEdge-Market"]=r.market,e){const e=yield(0,a.I$)(o.Y);e&&(i.Authorization="Bearer "+e)}else{const e=yield(0,a.hP)(G(t,n));"MSA"===r.accountType&&e?i.UserAuthToken=e:"AAD"===r.accountType&&e&&(i.Authorization=e)}return i}))}function j(e=!1,t=!1,n=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const i={};e&&(i.SiteName="www.msn.com");const r=(0,a._4)();if(r)if(e){const e=yield(0,a.I$)(o.Y);e&&(i.Authorization="Bearer "+e)}else{i["X-MSEdge-ClientId"]=r.sapphireId,i["X-MSEdge-Market"]=r.market;const e=yield(0,a.hP)(G(t,n));"MSA"===r.accountType&&e?i.UserAuthToken=e:"AAD"===r.accountType&&e&&(i.Authorization=e)}return i}))}function G(e,t){return t&&e?o.tD:o.pW}function V(e){(0,s.Ld)({key:"homepageFeedRefresh"},e)}function q(){(0,s.r1)("homepageFeedRefresh",{})}function z(e){(0,s.Ld)({key:"homepageSendTraceInfo"},e)}function Q(){(0,s.r1)("homepageSendTraceInfo",{})}function Z(e){(0,s.Ld)({key:"miniAppLifecycle"},e)}function K(){(0,s.r1)("miniAppLifecycle",{})}function J(e){(0,s.Ld)({key:"HomepageBackground"},e)}function X(e){(0,s.Ld)({key:"HomepageVisible"},e)}function Y(){(0,s.r1)("HomepageVisible",{})}function ee(e){(0,s.Ld)({appId:o.Au,value:"activeAccountType"},e)}function te(){(0,s.r1)("location",{})}function ne(e){!function(e){(0,s.Ld)({key:"location",appId:o.Au},e)}((t=>{try{let n=null;void 0!==t&&""!==t&&(n=t);const i=JSON.parse(n);(0,a.fb)(i)&&e()}catch(e){pe({e,status:"Error occured while parsing location change bridge res"})}}))}function ie(){(0,s.r1)("market",{})}function re(e){!function(e){(0,s.Ld)({key:"market",appId:o.Au},e)}((t=>{var n;try{let e=null;void 0!==t&&""!==t&&(e=t);const i=null===(n=JSON.parse(e))||void 0===n?void 0:n.data;(function(e){var t;return(null==e?void 0:e.length)>0&&2===(null===(t=e.split("-"))||void 0===t?void 0:t.length)})(i)&&(0,a.P7)(i)}catch(e){pe({e,status:"Error occured while parsing region change bridge res"})}e()}))}function oe(e,t=!1,n=!1){if(!(0,d.wq)())return;let i="";try{i=JSON.parse(document.head.dataset.clientSettings).bundleInfo.v}catch(e){pe({e,status:`Error occured while parsing client Settings in logPerfMarkers: ${document.head.dataset.clientSettings}`})}(0,s.mX)({key:"StartupPerfNotify",intent:{perfName:n?"MiniAppStartUp":"ScaffoldingStartUp",stateName:e,ts:(new Date).getTime(),isFinish:t,feedVersion:i}}),(0,s.gR)({type:"Debug",name:n?"MINI_APP_DIAGNOSTIC_LOG":"HP_WEBVIEW_SERVER_LOG",data:{stateName:e,ts:(new Date).getTime()}})}function ae(e,t=!1,n=""){if(!(0,d.wq)())return;let i="";try{i=JSON.parse(document.head.dataset.clientSettings).bundleInfo.v}catch(e){pe({e,status:`Error occured while parsing client Settings in logPerfMarkers: ${document.head.dataset.clientSettings}`})}(0,s.mX)({key:"StartupPerfNotify",intent:{perfName:"ScaffoldingStartUp",stateName:e,ts:(new Date).getTime(),isFinish:t,feedVersion:i,ext:{perf:{tags:n}}}});(0,a._4)().isProd||(0,s.gR)({type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{stateName:e,ts:(new Date).getTime(),tags:n}})}function se(e,t,n=""){(0,d.wq)()&&(0,s.gR)({type:"ClientPerf",name:"CLIENT_PERF_HP_PERF_TIME",ext:{perf:{key:e,value:t,tags:n}}})}function ce(e,t,n){const i=n-t;(0,s.gR)({type:"ClientPerf",name:e,data:{Duration:i}})}function de(){(0,d.wq)()&&(pe("showStandardErrorPage"),(0,s.mX)({appId:o.Au,key:"showStandardPage",intent:{page:"error"}}))}function le(){(0,d.wq)()&&(window.navigator.onLine?de():(pe("showOfflineErrorPage"),(0,s.mX)({appId:o.Au,key:"showStandardPage",intent:{page:"offline"}})))}function ue(e){pe("showStandardErrorPageByDesign"),(0,s.mX)({appId:o.Au,key:"showStandardPage",intent:{page:"error",source:e}})}function pe(e){if(!(0,d.wq)())return;const t=(0,a._4)();(null==t?void 0:t.isProd)||(0,s.gR)({appId:o.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}function he(e,t,n){if(!(0,d.wq)())return;let i="";try{i=JSON.parse(document.head.dataset.clientSettings).bundleInfo.v}catch(e){pe({e,status:`Error occured while parsing client Settings in logPerfMarkers: ${document.head.dataset.clientSettings}`})}(0,s.gR)({appId:o.Au,type:"Error",name:"HP_WEBVIEW_ERROR_PAGE",data:{errorPage:e,feedversion:i,source:t,errorcode:n,ext:{page:{extSchemaId:n}}}})}function ge(e){(0,s.gR)({type:"Diagnostic",name:"NEWS_L2_PREFETCH_CALL_STATUS",data:{contentSource:e}})}function me(){(0,s.dP)({partner:"Home",data:{method:"prefetchData",params:{images:["https://sapphire.azureedge.net/icons/news/2020092401/Share.png","https://sapphire.azureedge.net/icons/news/2020092401/Remove.png","https://sapphire.azureedge.net/icons/news/2020092401/Save.png","https://sapphire.azureedge.net/icons/news/2020092401/Liked.png","https://sapphire.azureedge.net/icons/news/2020092401/Like.png","https://sapphire.azureedge.net/icons/news/2020092401/Disliked.png","https://sapphire.azureedge.net/icons/news/2020092401/Dislike.png","https://sapphire.azureedge.net/icons/news/2020092401/HideStory.png","https://sapphire.azureedge.net/icons/news/2020092401/HideSource.png","https://sapphire.azureedge.net/icons/news/2020092401/Feedback.png","https://sapphire.azureedge.net/icons/news/2020092401/HiddenSources.png","https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/superapp/DegreeOverview.png","https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/superapp/FactCheck.png","https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/superapp/KeyTakeaways.png","https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/superapp/Summarize.png","https://assets.msn.com/staticsb/statics/latest/icons-wc/icons/superapp/TopQuestions.png"]},notExpire:!0},appId:o.Au})}function fe(e){(0,d.wq)()&&(0,s.gR)({type:"Diagnostic",name:"HP_WEBVIEW_START",data:{type:"Refresh",tags:e}})}function ve(e){(0,d.wq)()&&(0,s.gR)({type:"Diagnostic",name:"HP_WEBVIEW_COMPLETE",data:{type:e}})}function ye(e,t,n,i){if(!e&&!t)return;const{market:r="en-us"}=(0,a._4)()||{},s=`{"appId":"${o.Au}","articleId":"${n}","market":"${r}",${"Title"===i?`"articleTitle":"${e}"`:`"articleUrl":"${t}"`},"chatMode":"1","deeplinkOrigin":"HomePageFeed"}`;S(`sapphire://sydney?data=${encodeURIComponent(s)}&reload=1&appId=${o.Au}`)}function Se(e){if(!e)return;const{market:t="en-us"}=(0,a._4)()||{},n=`{"appId":"${o.Au}","market":"${t}", "chatMode":"1","deeplinkOrigin":"HomePageFeed"}`;S(`sapphire://sydney?q=${e}&reload=1&appId=${o.Au}&data=${n}`)}function Ce(e){(0,s.gR)({type:"Diagnostic",name:"HP_WEBVIEW_START",data:{type:"trace_log",result:"true",error_msg:"",step:e}})}function be(e,t,n){if(!e&&!t)return;const{market:i="en-us"}=(0,a._4)()||{},r=`{"appId":"${o.Au}","action":"${n}","articleId":"${t}","market":"${i}","articleTitle":"${e}","chatMode":"1","deeplinkOrigin":"HomePageFeed"}`;S(`sapphire://sydney?data=${encodeURIComponent(r)}&reload=1&appId=${o.Au}`)}},89123:function(e,t,n){"use strict";n.d(t,{J:function(){return l},f:function(){return p}});var i=n(33940);const r={prefix:"SW",startTime:"StartTime",navigationFetchTime:"NavigationFetchTime",navigationCacheReadTime:"NavigationCacheReadTime",navFeedHandlerComplete:"NavFeedHandlerComplete",navFeedHandlerWillRespond:"NavFeedHandlerWillRespond",navFeedHandlerDidRespond:"NavFeedHandlerDidRespond",navFeedHandlerStart:"NavFeedHandlerStart",navFeedCacheDuration:"NavFeedCacheDuration",navParseDuration:"NavParseDuration",navFeedCachedStatus:"NavFeedCachedStatus",navFeedCacheReadTime:"NavFeedCacheReadTime",navFeedFetchTime:"NavFeedFetchTime",navFeedCacheOpenDuration:"NavFeedCacheOpenDuration"};function o(e){return[r.prefix,e].filter((e=>e.length>0)).join(".")}var a=n(41065);var s=n(22704),c=n(62676);const d={hit:1,"hit-mem":2,miss:0};function l(e){const t=(0,s.Th)();u(t)&&(e[o(r.startTime)]=function(e){return e.requestStart-e.workerStart}(t),e[o(r.navigationFetchTime)]=function(e){const t=e.transferSize;if(0===t||300===t)return-1;return e.responseStart-e.requestStart}(t),e[o(r.navigationCacheReadTime)]=function(e){const t=e.transferSize;return 0===t||300===t?e.responseStart-e.requestStart:-1}(t),function(e){(0,i.mG)(this,void 0,void 0,(function*(){if(!u())return;const t=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,a.T)({type:"NAV_PERF_DATA"})}))}();e[c.kc]=t&&"hit"===t.cachedStatus?1:0,t&&t.cacheReadTime&&(e[o(r.navigationCacheReadTime)]=Math.round(t.cacheReadTime)),t&&t.fetchTime&&(e[o(r.navigationFetchTime)]=Math.round(t.fetchTime))}))}(e))}function u(e){return!!(e=e||(0,s.Th)())&&Boolean(e.workerStart)}function p(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(!u())return;const t=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,a.T)({type:"FEED_FETCH_PERF_DATA"})}))}();t&&t.navFeedHandlerComplete&&(e[o(r.navFeedHandlerComplete)]=Math.round(t.navFeedHandlerComplete)),t&&t.navFeedHandlerStart&&(e[o(r.navFeedHandlerStart)]=Math.round(t.navFeedHandlerStart)),t&&t.navFeedHandlerWillRespond&&(e[o(r.navFeedHandlerWillRespond)]=Math.round(t.navFeedHandlerWillRespond)),t&&t.navFeedHandlerDidRespond&&(e[o(r.navFeedHandlerDidRespond)]=Math.round(t.navFeedHandlerDidRespond)),t&&t.navFeedCacheDuration&&(e[o(r.navFeedCacheDuration)]=Math.round(t.navFeedCacheDuration)),t&&t.navFeedCacheOpenDuration&&(e[o(r.navFeedCacheOpenDuration)]=Math.round(t.navFeedCacheOpenDuration)),t&&t.navParseDuration&&(e[o(r.navParseDuration)]=Math.round(t.navParseDuration)),t&&t.navFeedCachedStatus&&(e[c.Ak]=d[t.navFeedCachedStatus]),t&&t.navFeedCacheReadTime&&(e[o(r.navFeedCacheReadTime)]=Math.round(t.navFeedCacheReadTime)),t&&t.navFeedFetchTime&&(e[o(r.navFeedFetchTime)]=Math.round(t.navFeedFetchTime))}))}},42420:function(e,t,n){"use strict";n.d(t,{R:function(){return a},U:function(){return o}});var i=n(33940);let r=!1;const o={purgeCacheAsync:function(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.isServiceWorkerActive()){const t=(yield caches.keys()).filter((t=>t.includes(e)));yield Promise.all(t.map((e=>caches.delete(e))))}}))},purgeEntryInCache:function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.isServiceWorkerActive()){const i=yield caches.open(e),r=(yield i.keys()).filter((e=>e.url.startsWith(t)&&e.method===n));yield Promise.all(r.map((e=>i.delete(e))))}}))},isServiceWorkerActive:function(){const{navigator:e}=window,t=e&&e.serviceWorker&&e.serviceWorker.controller;return t&&"activated"===t.state},getIsServiceWorkerEnabled:function(){return r},setIsServiceWorkerEnabled:function(e){r=e}};var a;!function(e){e.base="base",e.followedTopics="followedTopics",e.publishersProfile="publishersProfile",e.river="river",e.subscribedPublishers="subscribedPublishers",e.financeGraphAction="financeGraphAction"}(a||(a={}))},41065:function(e,t,n){"use strict";function i(e){if(!navigator.serviceWorker)return;const t=navigator.serviceWorker.controller;return t?r(t,e):navigator.serviceWorker.ready.then((t=>{const n=t.active;if(n)return r(n,e)}))}function r(e,t){return new Promise((n=>{const i=new MessageChannel;i.port1.onmessage=e=>{n(e.data)},e.postMessage(t,[i.port2])}))}n.d(t,{T:function(){return i}})},55027:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(55067);class r{}r.layoutAnimationStart=new i.C("layoutAnimationStart"),r.layoutAnimationComplete=new i.C("layoutAnimationComplete"),r.headerTransitionEnd=new i.C("headerTransitionEnd")},92431:function(e,t,n){"use strict";n.d(t,{O:function(){return l},k:function(){return d}});var i=n(33940),r=n(89638),o=n(27003),a=n(99590),s=n(11363);class c{constructor(){this.config={},this.strings={}}static getInstance(){return o.Gq.get("__SharedTimestampUtilHelper__",(()=>new c))}initConfig(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.config=(yield this.getConfigFromRef(e))||{},this.strings=this.config&&this.config.localizedStrings||{}}))}getConfig(){return this.config}getLocStrings(){return this.strings}getConfigFromRef(e){return(0,i.mG)(this,void 0,void 0,(function*(){try{const t=e.configRef||{experienceType:"SharedTimestampUtil",instanceSrc:"default",sharedNs:"msn-ns"},n=yield r.U.getConfig(t);return n&&n.properties}catch(e){return{}}}))}}const d=(0,a.h)(c);function l(e,t,n,i,r){if(!e)return"";const o=new Date(e);if(i)return(0,s.Xk)(o);const a=n||d.getLocStrings().localizedTimeStrings;return t=t||"en-US",(0,s.fh)(o,t,a,void 0,void 0,!0,r)}},11978:function(e,t,n){"use strict";n.d(t,{O:function(){return r},y:function(){return o}});var i=n(55067);class r{}function o(){r.setSignInState.unregisterObservers()}r.setSignInState=new i.C("setSignInStateSignature"),r.updateFlyoutDisplayState=new i.C("setFlyoutDisplayStateSignature")},75244:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var i=n(63439),r=n(11978),o=n(33379);class a extends i.e{constructor(e,t,n,i,r,a,s){super(e,t,n,i,r,a,s),this._authPrivateApi=(0,o.N)()&&window&&window.chrome&&window.chrome.authPrivate,this.registerSignInEventChangedCallback()}updateSignInState(e){var t,n;null===(n=null===(t=null===r.O||void 0===r.O?void 0:r.O.setSignInState)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}updateSignInFlyoutDisplayState(e){var t,n;null===(n=null===(t=null===r.O||void 0===r.O?void 0:r.O.updateFlyoutDisplayState)||void 0===t?void 0:t.getActionSender(this))||void 0===n||n.send(e)}registerSignInEventChangedCallback(){this._authPrivateApi&&this._authPrivateApi.onSignInStateChanged.addListener((e=>{const t=e;this.updateSignInState(!!t.account_id)}))}}},79485:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(30856),r=n(11978);class o{reduce(e,t){if(!e)return{isUserSignedIn:void 0,isFlyoutDisplayed:!1};if(!t)return e;let n;return i.G.handleAction(t,r.O.setSignInState,(t=>{n=Object.assign(Object.assign({},e),{isUserSignedIn:t})})),i.G.handleAction(t,r.O.updateFlyoutDisplayState,(t=>{n=Object.assign(Object.assign({},e),{isFlyoutDisplayed:t})})),n||e}}},47680:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(55067);class r{}r.disableSmartList=new i.C("disableSmartList"),r.registerSmartList=new i.C("registerSmartList"),r.persistSmartList=new i.C("persistSmartList"),r.updateSmartListBadgeProps=new i.C("updateSmartListBadgeProps"),r.updateSmartListState=new i.C("updateSmartListState"),r.userSignInSignature=new i.C("userSignInSignature"),r.userSignOutSignature=new i.C("userSignOutSignature")},12360:function(e,t,n){"use strict";n.r(t),n.d(t,{SmartListSharedActions:function(){return r.j},SmartListSharedDataConnector:function(){return s},SmartListSharedDataReducer:function(){return d},ToolingInfo:function(){return l}});var i,r=n(47680);!function(e){e[e.notStarted=0]="notStarted",e[e.initialized=1]="initialized",e[e.rendered=2]="rendered",e[e.unmounted=3]="unmounted"}(i||(i={}));var o=n(63439),a=n(83227);class s extends o.e{initSmartList(e,t){if(!e)return;const n=this.getSmartList(e);n&&n.initCallback&&n.currentState===i.notStarted&&(e===a.x.edgeShopping?t&&(n.initCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,i.initialized)):(n.initCallback(),r.j.updateSmartListState.getActionSender(this).send(e,i.initialized)))}moveFocusToSmartList(e,t){const n=this.getSmartList(e);return!!(n&&n.focusCallback&&n.renderCallback&&n.currentState===i.rendered)&&(n.focusCallback(t),!0)}renderSmartList(e,t){if(!e||!t)return;const n=this.getSmartList(e);n&&n.renderCallback&&(n.renderCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,i.rendered))}unmountSmartList(e,t){if(!e||!t)return;const n=this.getSmartList(e);n&&n.unmountCallback&&n.currentState===i.rendered&&(n.unmountCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,i.unmounted))}updateSignInStatus(e,t){const n=this.getSmartList(e);return!(!n||!n.updateSignInStatusCallback)&&(n.updateSignInStatusCallback(t),!0)}getSmartList(e){if(!e)return;const t=this.getCurrentState().smartLists;return t&&0!==t.size?t.get(e):void 0}}var c=n(30856);class d{reduce(e,t){if(!e)return{smartLists:new Map};if(!t)return e;let n=!1;const o=Object.assign({},e);return n=n||c.G.handleAction(t,r.j.disableSmartList,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.currentState=i.notStarted)}})),n=n||c.G.handleAction(t,r.j.registerSmartList,(e=>{e&&(o.smartLists.has(e.experienceType)||o.smartLists.set(e.experienceType,{badgeProps:void 0,currentState:i.notStarted,focusCallback:e.focusShouldMove,initCallback:e.initShouldFire.bind(e),isUserSignedIn:!1,renderCallback:e.renderShouldFire,shouldPersist:void 0,unmountCallback:e.unmountShouldFire,updateSignInStatusCallback:e.updateSignInStatus}))})),n=n||c.G.handleAction(t,r.j.persistSmartList,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.shouldPersist=!0)}})),n=n||c.G.handleAction(t,r.j.updateSmartListState,((e,t)=>{if(e){const n=o.smartLists.get(e);n&&(n.currentState=t)}})),n=n||c.G.handleAction(t,r.j.updateSmartListBadgeProps,((e,t)=>{if(e){const n=o.smartLists.get(e);n&&t&&(n.badgeProps=t)}})),n=n||c.G.handleAction(t,r.j.userSignInSignature,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.isUserSignedIn=!0)}})),n=n||c.G.handleAction(t,r.j.userSignOutSignature,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.badgeProps=null,t.isUserSignedIn=!1)}})),n?o:e}}const l={experienceConfigSchema:{}}},59785:function(e,t,n){"use strict";n.d(t,{AF:function(){return d},li:function(){return l},yC:function(){return s}});var i=n(33940),r=n(27003);const o=()=>r.Gq.get("__ssr_util__preload_bundles",(()=>new Set)),a=()=>r.Gq.get("__ssr_util__pending_preload_bundles",(()=>new Set)),s=()=>`<script nonce="${window.NONCE_ID}">window.ssrLoadedBundles.publish(${JSON.stringify((()=>{const e=o(),t=[...e];return e.clear(),t})())});<\/script>`,c=new Map,d=(e,t)=>{if(c.has(e))throw new Error(`Bundle ${e} is already registered.`);c.set(e,t);const n=a();return n.has(e)&&(n.delete(e),t()),()=>(o().add(e),t())},l=e=>{const t=a(),n=e.map((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){if(c.has(e))return c.get(e)();t.add(e)}))));return Promise.all(n)}},15178:function(e,t,n){"use strict";n.d(t,{$e:function(){return i}});n(43488);function i(){const e=performance.getEntriesByType("navigation")[0].serverTiming;if(e){const t=e.find((e=>"rsClusterName"===e.name));if(t)return t.description}}},44572:function(e,t,n){"use strict";n.d(t,{k:function(){return b}});var i,r=n(27003),o=n(99590),a=n(99452),s=n(33940),c=n(33379),d=n(56692);!function(e){e.MatchMedia="MatchMedia",e.BaseLayerLuminance="BaseLayerLuminance",e.External="External",e.Defalut="MatchMedia"}(i||(i={}));const l="DefaultConfig",u=Object.freeze(new Map([["windows",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["edgeChromium",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["winWidgets",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],["superApp",{notifyThemeSwitch:!1,themeSwitchNotifier:"External"}],["homePage",{notifyThemeSwitch:!0,themeSwitchNotifier:"MatchMedia"}],["channel",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],[l,{notifyThemeSwitch:!0,themeSwitchNotifier:"MatchMedia"}]]));function p(){var e;const t=d.jG.AppType,n=u.get(t)||u.get(l);return null===(e=null==n?void 0:n.notifyThemeSwitch)||void 0===e||e}var h=n(78125),g=n(38492),m=n(92059);class f{constructor(){this.mediaQueryCallback=()=>{},this.appThemeState=null}eventListener(e){this.appThemeState&&this.appThemeState.setAppInDarkMode(e.currentTarget.matches)}initialize(e){return!(!this.mediaQueryList&&e)||!!(null===window||void 0===window?void 0:window.matchMedia)&&(this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),!!this.mediaQueryList&&(this.appThemeState=e,this.appThemeState&&this.appThemeState.setAppInDarkMode(this.mediaQueryList.matches),this.mediaQueryCallback=this.eventListener.bind(this),this.mediaQueryList.addEventListener("change",this.mediaQueryCallback),!0))}uninitialize(){return this.mediaQueryList&&(this.mediaQueryList.removeEventListener("change",this.mediaQueryCallback),this.mediaQueryCallback=()=>{},this.mediaQueryList=void 0,this.appThemeState=null),!0}}class v{constructor(e=null){this.initialized=!1,this.source=e,this.appThemeState=null}handleChange(e,t){if(this.source&&t.target===this.source){const t=e.getValueFor(this.source),n=(0,m.s)(t.toColorString())<=h.h.DarkMode;this.appThemeState&&this.appThemeState.setAppInDarkMode(n)}}updateSource(e=null){this.source=e}initialize(e){if(this.initialized)return!0;if(this.appThemeState=e,!this.source){const e=document.querySelector("fluent-design-system-provider[fill-color]");if(null==e)return!1;this.source=e}const t={target:this.source,token:g.I};return this.handleChange(g.I,t),g.I.subscribe(this),this.initialized=!0,this.initialized}uninitialize(){return this.initialized&&(g.I.unsubscribe(this),this.initialized=!1,this.appThemeState=null),!0}}class y{constructor(){this.appThemeInDarkMode=!1,this.themeSwitchSubscription=null;let e=null;if((0,c.N)())switch(function(){var e;const t=d.jG.AppType,n=u.get(t)||u.get(l);return null!==(e=null==n?void 0:n.themeSwitchNotifier)&&void 0!==e?e:"MatchMedia"}()){case"BaseLayerLuminance":e=new v;break;case"External":break;default:e=new f}else e=new f;e&&this.setThemeSubscription(e)}setThemeSubscription(e){var t;if(this.themeSwitchSubscription&&this.themeSwitchSubscription.uninitialize(),this.themeSwitchSubscription=e,!this.themeSwitchSubscription)return;this.themeSwitchSubscription.initialize(this)||(this.themeSwitchSubscription=new f,null===(t=this.themeSwitchSubscription)||void 0===t||t.initialize(this))}setAppInDarkMode(e){this.appThemeInDarkMode=e}appInDarkMode(){return this.appThemeInDarkMode}}(0,s.gn)([a.LO],y.prototype,"appThemeInDarkMode",void 0);const S=new WeakMap;class C{constructor(){this._appThemeMode=null}get appThemeMode(){return this._appThemeMode||(this._appThemeMode=new y),this._appThemeMode}static getInstance(){return r.Gq.get("__SuperComponentThemeHelper__",(()=>new C))}setThemeSwitchSubscription(e){this.appThemeMode.setThemeSubscription(e)}setAppInDarkMode(e){this.appThemeMode.setAppInDarkMode(e)}appInDarkMode(){return this.appThemeMode.appInDarkMode()}subscribeThemeChange(e){if(!e||!this.appThemeMode||S.get(e))return;if(e.handleThemeChange(b.appInDarkMode()),!p())return;const t={handleChange:()=>{e.handleThemeChange(b.appInDarkMode())}};S.set(e,t),a.y$.getNotifier(this.appThemeMode).subscribe(t,"appThemeInDarkMode")}unsubscribeThemeChange(e){if(!p()||!e||!this.appThemeMode)return;const t=S.get(e);t&&(a.y$.getNotifier(this.appThemeMode).unsubscribe(t,"appThemeInDarkMode"),S.delete(e))}}const b=(0,o.h)(C)},82749:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var i=n(33940),r=n(3900),o=n(83227),a=n(67277);const s=(e,t,n)=>(0,i.mG)(void 0,void 0,void 0,(function*(){var i;const s=(0,r.$z)(),c="headingsonly"===(null==t?void 0:t.selectedFeedDisplaySetting)||"off"===(null==t?void 0:t.selectedFeedDisplaySetting);if(!["gaming","productivityHub","following"].includes(s)&&!c){const t={experienceType:n?o.x.waterfallViewFeed:o.x.gridViewFeed,instanceSrc:"default"},r=yield e.getConfig(t),s=(0,a.e)(r.properties,o.x.gridViewFeed,!0);if(null===(i=r.properties)||void 0===i?void 0:i.auctionRidOverride)return;const c=r.properties||{};s.fetchSamPredictContent([],c.enableEarlyATFAds||c.enableEarlySSRAdsRequest),s.fetchCmsPredictContent()}}))},31780:function(e,t,n){"use strict";n.d(t,{et:function(){return y},l6:function(){return f},mY:function(){return S}});var i=n(33940),r=n(98304),o=n(27212),a=n(45506),s=n(81428),c=n(12611),d=n(20479),l=n(65135),u=n(3072),p=n(60813),h=n(4734),g=n(75384);const m=[],f=e=>{if(p.Qu.includes(e.type))return e;try{const{augments:t,type:n,isBreaking:i,locale:r,category:o,images:a,topics:s=[],dataUrl:l,publishedDateTime:u,id:p,url:h,abstract:g="",title:m="",provider:f={},feed:v={},actions:y=[],externalVideoFiles:S,reactionStatus:C,commentStatus:b,reactionSummary:w,commentSummary:T,reasons:k,sourceId:P,topComments:A,colorSamples:I,isLocalContent:E,badges:x,relatedCards:M,recoDocMetadata:O,offer:L,recoId:D,ri:R,subType:F,traceIdIndex:B,rowCount:N,videoMetadata:U,isWorkNewsContent:$}=e,_=(0,c.TL)(a)||{},H=S||{},W=s.find((e=>e.feedId===v.id&&e.locale===r)),j=(0,c.v9)(h);let G=(0,c.XA)(f.logoUrl);return!G&&f.logo&&f.logo.url&&(G=(0,c.XA)(f.logo.url)),{augments:t,id:p,type:n,metadata:{abstract:g,abstractLength:g.length,titleLength:m.length,category:o||j[4],subCategory:j[5],primaryImage:{height:_.height,width:_.width},locale:r,feed:{id:v.id},kicker:[v],actions:y.map((e=>c.N[e]||e)),reactionStatus:C,commentStatus:b,reactionSummary:w,commentSummary:T,reasons:k,topComments:A,relatedCards:M,topics:s,recoId:D,recoDocMetadata:O,ri:R,videoFiles:H,videoMetadata:U},cardContent:{id:p,type:(0,d.c)(n),title:m,uriTitle:j[6],abstract:g,isBreaking:i||0,tags:[W||{}],provider:{id:f.id,name:f.name,logo:{id:G},lightThemeSVGLogo:f.lightThemeSVGLogo,darkThemeSVGLogo:f.darkThemeSVGLogo,profileId:f.profileId,logoUrl:f.logoUrl,subscribable:!1},category:{product:o,label:void 0},locale:r,images:[{id:(0,c.XA)(_.url),height:_.height,width:_.width,caption:_.title,focalRegion:_.focalRegion,attribution:_.attribution,url:_.url,colorSamples:_.colorSamples}],videoFiles:H,publishedDateTime:u,kicker:m,sourceHref:l,destinationUrl:h,sourceId:P,colorSamples:I,isLocalContent:E,isWorkNewsContent:$,badges:x,topics:s},offer:L,subType:F,rowCount:N,traceIdIndex:B}}catch(t){return e}};function v(){const e=v;return new Promise((t=>{void 0!==e.cache&&t(e.cache);const n=i=>{i>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(i++,setTimeout((()=>n(++i)),3e3))};n(0)}))}const y=(e,t)=>l.M0.addOrUpdateIdxId(e,t),S=(e,t)=>(0,i.mG)(void 0,void 0,void 0,(function*(){try{(e||t)&&m.push({id:e,debug:t}),yield Promise.all([(0,h.F_)(),(0,g.lr)()]);const n=yield v();if(n&&n.innerText){const e=JSON.parse(n.innerText);Object.assign(e,{traceInfo:m}),Object.assign(e,{prgDiagnostics:C()}),Object.assign(e,{authTrail:b()}),Object.assign(e,{countryConfidenceFactor:(0,o.q)()}),n.innerText=JSON.stringify(e)}}catch(e){l.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.vxy),{message:"Error throwed during update idxid into diagnostic element"}))}})),C=()=>{const e=a.Al&&a.Al.Diagnostics||{};return e&&(0,s.fB)(JSON.stringify(e))},b=()=>{try{return(0,u.pD)()}catch(e){l.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.evM),{message:"Error throwed when getCompressedRecords doesn't return anything for NTP"}))}}},67277:function(e,t,n){"use strict";n.d(t,{e:function(){return G}});var i=n(33940),r=n(64950),o=n(987);const a="1adindices",s=e=>{try{return JSON.parse(e,d)}catch(e){return null}},c=(e,t)=>t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t,d=(e,t)=>"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t;var l=n(65135),u=n(45506);const p=(e,t,n)=>{h(n,void 0,`Config: ${e}, Response: ${t}`,!0)},h=(e,t,n,i)=>{const r=Object.assign(Object.assign({},e),{pb:Object.assign({},e.pb)});t&&(r.message=t),n&&r.pb&&(r.pb.customMessage=n),i&&r.pb&&(r.pb.isPrerender=null===u.Al||void 0===u.Al?void 0:u.Al.IsPrerender),l.M0.sendAppErrorEvent(r)};var g,m,f,v=n(18769),y=n(4365),S=n(96288),C=n(92170),b=n(40252),w=n(32005),T=n(63535),k=n(19809),P=n(87298),A=n(68364),I=n(98304);!function(e){e.CacheData="CacheData"}(g||(g={})),function(e){e.AdsSsr="AdsSsr"}(m||(m={})),function(e){e.PredictedAdPlacements="PredictedAdPlacements"}(f||(f={}));class E{constructor(){this.actionsServiceEndpoint="graph/actions",this.ocid="ntp-ads-cache",this.apiKey="Ctz9EPtL1YqXXOuymQHypfaBCLF5mOgFsdvxhT8ZNR",this.timeoutMs=1e3}getRequestUrl(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=(0,T.PH)(this.actionsServiceEndpoint,T.Ph);return k.$D.getCommonParams(this.ocid).forEach((({key:t,value:n})=>e.searchParams.append(t,n))),e.searchParams.set("ocid",this.ocid),e.searchParams.set("apikey",this.apiKey),e}))}getRequestInit(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n={method:"GET",credentials:"include"};return n.headers=yield k.$D.getOneServiceHeaders(),e&&(n.method=e),t&&(n.body=JSON.stringify(t)),n}))}sendRequest(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const i=yield(0,P.w)((()=>(0,w.Sm)(e.toString(),this.timeoutMs,t)),n,this.timeoutMs,!0),r=yield i.json();if((0,S.Z)(r)&&(0,C.Z)(r.value)){const e=(0,b.Z)(r.value);return e&&e.metadata}}))}getAdUserPreference(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function*(){try{const i=yield this.getRequestUrl(),o=yield this.getRequestInit();return i.searchParams.append("$filter",`actionType eq '${e}' and targetType eq '${t}' and definitionName eq '${n}'`),i.searchParams.append("$top","1"),yield this.sendRequest(i,o,r)}catch(e){(0,A.OO)(e,I.eL$,"Call to get ads user preference failed")}}))}setAdUserPreference(e,t,n,r,o){return(0,i.mG)(this,void 0,void 0,(function*(){try{const i=yield this.getRequestUrl(),a=yield this.getRequestInit("POST",{actionType:e,targetType:t,definitionName:n,metadata:r});return yield this.sendRequest(i,a,o)}catch(e){(0,A.OO)(e,I.eL$,"Call to set ads user preference failed")}}))}getPredictedAdPlacements(){return(0,i.mG)(this,void 0,void 0,(function*(){return this.getAdUserPreference(g.CacheData,m.AdsSsr,f.PredictedAdPlacements,"AdsUserActionService.getPredictedAdPlacements")}))}setPredictedAdPlacements(e){return(0,i.mG)(this,void 0,void 0,(function*(){return this.setAdUserPreference(g.CacheData,m.AdsSsr,f.PredictedAdPlacements,e,"AdsUserActionService.setPredictedAdPlacements")}))}}var x=n(99753),M=n(33379),O=n(27003),L=n(14752),D=n(40755),R=n(52965),F=n(25156),B=n(16614),N=n(44772),U=n(32164),$=n(75384),_=n(18179),H=n(88875),W=n(65019);class j{constructor(e,t){this.hasSSRAdData=!!((0,M.N)()&&window.ntpSSRData&&window.ntpSSRData.samAd),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[],this.infopanePlacementList=[],this.originalInfopaneRegion=new Map,this.getCmsAdsConfig=()=>this.cmsAdsConfig,this.getAdRegionTupleListMap=()=>this.adRegionTupleListMap,this.getPlacementsBySectionIndex=(e,t)=>{const n=this.getAdIndexList(t)[this.config.auctionPreSectionsNum||0],i=j.isFilteredRegion[t]?(0,D.Z)(e,(e=>e<=n))+1:e.length,r=[];return e.forEach(((e,t)=>{t<i&&r.push(e)})),r},this.getCmsRequestFromTuple=(e=0)=>{const t={placements:[]};return this.adRegionTupleListMap.forEach(((n,i)=>{if(!n[0]){if(0===e&&this.shouldDeferInfopaneAuctionOnPrerender(i))return;const r=n[1],o=this.getAdIndexList(i)[e]||-1,a=j.isFilteredRegion[i]?(0,D.Z)(r,(e=>e<=o))+1:r.length,s=r.splice(0,a);this.checkAndAddPlacement(t,!n[0],i,s)}})),t},this.fireCmsAuction=(e=0)=>(0,i.mG)(this,void 0,void 0,(function*(){var t,n,i,r;let o;if((null===(n=null===(t=this.cmsRequest)||void 0===t?void 0:t.placements)||void 0===n?void 0:n.length)?(o=this.cmsRequest,this.cmsRequest=void 0):o=this.getCmsRequestFromTuple(e),o&&o.placements.length)try{const{infopane:e,river:t,documentId:n}=this.cmsAdsConfig,a=o.placements.find((({region:e})=>"resinfopane"===e)),s=o.placements.find((({region:e})=>"resriver"===e)),c=e.splice(0,null!==(i=null==a?void 0:a.indices.length)&&void 0!==i?i:0),d=t.splice(0,null!==(r=null==s?void 0:s.indices.length)&&void 0!==r?r:0);this.isFirstCmsAdsBatch=!1,this.cmsRequestPromise=this.nativeAdService.fetchCmsAds(o,n,[...c,...d]);const{placements:l}=yield this.cmsRequestPromise;return l}catch(e){(0,A.OO)(e,I.NF_,"Call to CMS Ad Service failed")}})),this.getRegionImgForMobile=e=>{const{river:t,infopane:n}=this.overrideImageSize||{};switch(e){case"river":return t;case"infopane":return n;default:return}},this.fetchSamPredictContent=(e=[],t)=>(0,i.mG)(this,void 0,void 0,(function*(){if(this.isFirstSamAdsBatch){this.samPredictResponsePromise=new U.o;try{this.config.enableUASAdPlacementPrediction&&(!(0,M.N)()||this.hasSSRAdData)&&this.cachedAdIndicesResponseFromUAS&&(this.cachedAdIndicesFromUAS=yield this.cachedAdIndicesResponseFromUAS);const n=this.getPredictedAdRequest();if(this.samRequest=n,!n||!n.placements||!n.placements.length)return void(0,A.H)(I.Ehx,"SAM Ad Predicted Placements is Empty",`adRequest: ${JSON.stringify(n)}`);L.A.startMark("AdServiceCall.SuperFeed");const i=this.nativeAdService.fetchSamAds(n,!0,e,this.getIsPrerenderAds(),t);this.samRequestPromise=i;const r=(0,_.pl)(this.config);[this.predictSamResponse]=yield Promise.all([i,r])}catch(e){(0,A.OO)(e,I.R0M,"Call to SAM Ad Service failed")}finally{this.samPredictResponsePromise.set(),L.A.endMark("AdServiceCall.SuperFeed")}}})),this.waitForSamPredictResponse=()=>(0,i.mG)(this,void 0,void 0,(function*(){var e;return null===(e=this.samPredictResponsePromise)||void 0===e?void 0:e.getResultAsync()})),this.waitForSamAuctionCall=()=>(0,i.mG)(this,void 0,void 0,(function*(){return this.samRequestPromise})),this.addToCallbackList=e=>{this.nativeAdService.addToCallbackList(e)},this.getSamRequestFromTupleWithSectionIndex=(e=0)=>{const t={placements:[]};return this.adRegionTupleListMap.forEach(((n,i)=>{if(n[0]){if(0===e&&this.shouldDeferInfopaneAuctionOnPrerender(i))return;const r=n[1],o=this.getAdIndexList(i)[e]||-1,a=j.isFilteredRegion[i]?(0,D.Z)(r,(e=>e<=o))+1:r.length,s=r.splice(0,a);this.checkAndAddPlacement(t,n[0],i,s)}})),t},this.getSamRequestFromTuple=()=>{const e={placements:[]};return this.adRegionTupleListMap.forEach(((t,n)=>{t[0]&&this.checkAndAddPlacement(e,t[0],n,t[1])})),e},this.shouldDeferInfopaneAuctionOnPrerender=e=>this.getIsPrerenderAds()&&e.includes("infopane"),this.getAdIndexList=e=>{var t,n;return(null===(t=this.config.riverSectionCardProviderConfig)||void 0===t?void 0:t.useRelativeAdPlacement)&&"river"===e?this.nativeAdIndexList:(null===(n=this.config.riverSectionCardProviderConfig)||void 0===n?void 0:n.useRelativeAdPlacement)&&"resriver"===e?this.cmsAdIndexList:this.cardsIndexList},this.overrideTopAdSamRequest=(e,t)=>{var n,i,r;const o=(0,W._4)();return(null==t?void 0:t.isSuperAppTopAd)&&this.config.enableTopAdCard&&(null==o?void 0:o.isOEM)&&e[0]&&(e[0].region="top",e[0].img=null===(r=null===(i=null===(n=this.config)||void 0===n?void 0:n.adTemplateConfig)||void 0===i?void 0:i.imageSizeConfig)||void 0===r?void 0:r.top),e},this.fireSamAuction=(e=[],t,n)=>(0,i.mG)(this,void 0,void 0,(function*(){var i,r;let o;if((null===(r=null===(i=this.samRequest)||void 0===i?void 0:i.placements)||void 0===r?void 0:r.length)?(o=this.samRequest,this.samRequest=void 0):o=this.config.enableNativeAdBatchCall?this.getSamRequestFromTuple():this.getSamRequestFromTupleWithSectionIndex(t),o&&o.placements.length)return n&&(o={placements:this.overrideTopAdSamRequest(o.placements,n),pageType:n.pageType,locale:n.locale,adid:n.adid,anid:n.anid,muid:n.muid,sapphireid:n.sapphireid,appName:n.appName,clientVersion:n.clientVersion,packageName:n.packageName,tmax:n.tmax},"prime_mobile"===n.appName&&"mobilefeed"===n.pageType&&o.placements.forEach((e=>{e.isStrictIndices=!0}))),yield this.fetchSamAds(o,e)})),this.fetchSamAds=(e,t=[])=>(0,i.mG)(this,void 0,void 0,(function*(){var n,i;try{L.A.startMark("AdServiceCall.SuperFeed");const{isFirstSamAdsBatch:r,nativeAdService:o}=this,a=r?t:[];this.isFirstSamAdsBatch=!1;const s=o.fetchSamAds(e,r,a,this.getIsPrerenderAds());if(!this.config.loadAdTemplate)return yield s;if(this.config.enableNativeAdWC||this.config.enableNativeAdWCInfopane){const[e]=yield Promise.all([s,this.lazyLoadDRBundle(null===(i=null===(n=this.config)||void 0===n?void 0:n.adTemplateConfig)||void 0===i?void 0:i.configType)]);return e}{const[e]=yield Promise.all([s,(0,_.pl)(this.config)]);return e}}catch(e){(0,A.OO)(e,I.R0M,"Get SAM data failed")}finally{L.A.endMark("AdServiceCall.SuperFeed")}})),this.initNativeAdConfig(e),this.initAdRegionTupleListMap(),this.beaconService=new v.A(null==e?void 0:e.adBeaconServiceConfig),this.config.enableUASAdPlacementPrediction&&this.initAdsUserActionService()}initNativeAdConfig(e){var t,n,i,r;this.isFirstSamAdsBatch=!0,this.isFirstCmsAdsBatch=!0,this.config=(0,R.Z)(e)||{},this.cmsAdsConfig=null!==(n=null===(t=this.config)||void 0===t?void 0:t.cmsAds)&&void 0!==n?n:{documentId:"",infopane:[],river:[]},this.tallAdProcessed=!(null===(i=this.config)||void 0===i?void 0:i.enableAdsWaterfall);const o={};this.config.backfillContentForMissingPlacements&&(o.useEmptyPlacementsForNoContent=!0),this.config.enablePrerenderAds&&this.config.enablePrerenderAuctionFlag&&(o.enablePrerenderAdsAuctionFlag=!0),this.config.auctionTimeoutOverride&&(o.auctionTimeoutOverride=this.config.auctionTimeoutOverride),this.config.auctionRidOverride&&(o.auctionRidOverride=!0),this.config.disableAdsSSR&&(o.disableAdsSSR=!0),this.config.adSSRTimeoutSinceAdReqInMS&&(o.adSSRTimeoutSinceAdReqInMS=this.config.adSSRTimeoutSinceAdReqInMS),this.config.enableSponsoredCollectionSSR&&(o.enableSponsoredCollectionSSR=!0),this.config.enableBuyDirectAd&&(o.enableBuyDirectAd=!0),this.nativeAdService=(0,y.d)((null===(r=this.config)||void 0===r?void 0:r.adTemplateConfig)||{},o)}initAdRegionTupleListMap(){var e;this.adRegionTupleListMap=new Map([["infopane",[!0,[],[]]],["rightrail",[!0,[],[]]],["river",[!0,[],[]]],["infopane-tab",[!0,[],[]]],["resinfopane",[this.config.enableInfopaneLeadgenNative,[],[]]],["resriver",[this.config.enableRiverLeadgenNative,[],[]]],["dense-river",[!0,[],[]]],["rivert",[(null===(e=this.config)||void 0===e?void 0:e.enableAdsWaterfall)||!0,[],[]]]])}initAdsUserActionService(){this.adsUserActionService=new E,this.cachedAdIndicesResponseFromUAS=this.adsUserActionService.getPredictedAdPlacements()}loadCmsBackfillList(){return this.nativeAdService.loadCmsBackFillList()}fillAdsMap(e){if(!e)return;const{adLabelText:t,isGreyAdsLabelEnabled:n}=this.nativeAdService.getAdTagStyleByLocale(),i=(0,r.AH)(Object.assign({adLabelText:t,isGreyAdsLabelEnabled:n},this.config),e),o=(0,W._4)();this.adRegionTupleListMap.forEach(((e,t)=>{var n;"river"===t&&this.config.enableTopAdCard&&(null==o?void 0:o.isOEM)&&i.top&&e[2].push(...i.top),e[2].push(...null!==(n=i[t])&&void 0!==n?n:[])}))}createNativeAdCardMetadata(e,t){var n,i,r;const o="resinfopane"===e||"resriver"===e?N.PL.CmsAd:N.PL.NativeAd;(null===(n=this.config)||void 0===n?void 0:n.enableAdsWaterfall)&&"river"===e&&t===(null===(i=this.config)||void 0===i?void 0:i.tallAdsIndex)&&(e="rivert");const a=null===(r=this.adRegionTupleListMap.get(e))||void 0===r?void 0:r[2],s=null==a?void 0:a.find((e=>e.regionIndex===t));return s?{type:o,regionIndex:t,id:this.getNativeAdId(e,s.regionIndex),placement:s}:{type:o,regionIndex:t,placement:{items:[]}}}getPredictCmsAdsData(){var e,t;if(!this.isFirstCmsAdsBatch)return;const n=this.getCmsRequestFromTuple();if(this.predictCmsResponse&&this.validateCmsAdPlacementConfig(n),this.cmsRequest=n,(null===(t=null===(e=this.cmsRequest)||void 0===e?void 0:e.placements)||void 0===t?void 0:t.length)&&(this.isFirstCmsAdsBatch=!1),this.predictCmsResponse){const e=this.predictCmsResponse;return this.predictCmsResponse=void 0,e}}waitForCmsAuction(){return(0,i.mG)(this,void 0,void 0,(function*(){this.cmsRequestPromise&&(yield this.cmsRequestPromise)}))}getVAAssets(e){var t;const n=[],i=null===(t=this.config.adTemplateConfig)||void 0===t?void 0:t.supportedVAAssets;if(i){const t=i.reduce(((t,n,i)=>{const r=(0,F.Z)(H.aT,(e=>e===n));if(r){const n=Object.assign(Object.assign({},H.hy[r]),{id:i+1});"img"===r&&(n.img=Object.assign(Object.assign({},this.getRegionImg(e)),n.img)),t.push(n)}return t}),[]);n.push(t)}return n}checkAndAddPlacement(e,t,n,i){var r;if(e&&t&&i.length){let t,o=this.getRegionImg(n);if(this.config.overrideSAMAdImageSize&&this.overrideImageSize){const e=this.getRegionImgForMobile(n);e&&(o=e)}(null===(r=this.config.adTemplateConfig)||void 0===r?void 0:r.enableVA)&&!this.config.enableFeed3Cards&&"rightrail"!==n&&(t=this.getVAAssets(n));const a={assets:t,region:n,indices:i.splice(0),img:o};this.config.enableSAMAdStrictIndices&&(a.isStrictIndices=!0),e.placements.push(a)}}fetchCmsPredictContent(){var e,t;return(0,i.mG)(this,void 0,void 0,(function*(){if(!this.isFirstCmsAdsBatch)return;this.config.enableUASAdPlacementPrediction&&(!(0,M.N)()||this.hasSSRAdData)&&this.cachedAdIndicesResponseFromUAS&&(this.cachedAdIndicesFromUAS=yield this.cachedAdIndicesResponseFromUAS);const n=this.getPredictedAdRequest(!0);if(this.cmsRequest=n,n.placements.length)try{const{infopane:i,river:r,documentId:o}=this.cmsAdsConfig,a=n.placements.find((({region:e})=>"resinfopane"===e)),s=n.placements.find((({region:e})=>"resriver"===e)),c=i.splice(0,null!==(e=null==a?void 0:a.indices.length)&&void 0!==e?e:0),d=r.splice(0,null!==(t=null==s?void 0:s.indices.length)&&void 0!==t?t:0),{placements:l}=yield this.nativeAdService.fetchCmsAds(n,o,[...c,...d]);return this.predictCmsResponse=l,l}catch(e){(0,A.OO)(e,I.NF_,"Call to CMS Ad Service failed")}}))}lazyLoadDRBundle(e){switch(e){case"prg-ad-like":return n.e("na-like-button").then(n.bind(n,86391));case"prg-trending":return n.e("na-trending").then(n.bind(n,75249));case"prg-ad-ctav2":case"prg-ad-ctav3":return n.e("na-trending").then(n.bind(n,98950));case"prg-ad-sh-v1":return n.e("nas-highlight-v1").then(n.bind(n,72555));case"prg-ad-sh-v3":case"prg-ad-sh-v4":return Promise.all([n.e("nas-highlight-v3v4").then(n.bind(n,93060)),n.e("nas-highlight-v3v4").then(n.bind(n,69966))]);case"prg-ad-combo":return Promise.all([n.e("na-decoration-combo").then(n.bind(n,26827)),n.e("na-decoration-combo").then(n.bind(n,56588)),n.e("na-decoration-combo").then(n.bind(n,43637)),n.e("na-decoration-combo").then(n.bind(n,47897))])}}getPredictedAdRequest(e){const t={placements:[]};return this.adRegionTupleListMap.forEach(((n,i)=>{const r=e?this.getCmsIndices(i):this.getSamIndices(i),o=e?!n[0]:n[0];o&&(null==r?void 0:r.length)&&this.checkAndAddPlacement(t,o,i,r)})),t}getPredictSamAdsData(){var e,t;if(this.isFirstSamAdsBatch){if((0,M.N)()){const e=this.getSamRequestFromTupleWithSectionIndex();this.predictSamResponse&&this.validateSamAdPlacementConfig(e),this.samRequest=e}if((null===(t=null===(e=this.samRequest)||void 0===e?void 0:e.placements)||void 0===t?void 0:t.length)&&(this.isFirstSamAdsBatch=!1),this.predictSamResponse){const e=this.predictSamResponse;return this.predictSamResponse=void 0,e}}}shouldPrefetchInfopaneSamAds(e){return-1!==this.infopanePlacementList.findIndex((({index:t})=>t===e+r.h2))}prefetchInfopaneSamAds(e){const t=this.getAndUpdateInfopanePrefetchPlacementList(e);if(t.length)return this.fetchSamAdsInPlacementList(t)}getAndUpdateInfopanePrefetchPlacementList(e){if(!this.config.infopaneViewOptAdCount)return[];const t=this.infopanePlacementList.findIndex((({index:t})=>t>e));return-1===t?[]:this.infopanePlacementList.splice(t,this.config.infopaneViewOptAdCount)}mapViewOptimizationRegion(e){if(this.config.infopaneViewOptAdCount){e.placements.forEach((e=>{x.PB.includes(e.region)&&(1===this.config.infopaneViewOptAdCount?e.region=x.BU[0]:2===this.config.infopaneViewOptAdCount&&(e.region=x.BU[1]))}));const t={};e.placements.forEach((e=>{const n=e.region;t[n]?t[n].indices.push(...e.indices):t[n]=Object.assign({},e)})),e.placements=Object.values(t)}}mapSamAdRegionToOriginal(e){var t,n;this.config.infopaneViewOptAdCount&&((null===(t=null==e?void 0:e.samResponse)||void 0===t?void 0:t.placements)&&e.samResponse.placements.forEach((e=>{const{index:t}=e;this.originalInfopaneRegion.get(t)&&(e.region=this.originalInfopaneRegion.get(t))})),(null===(n=null==e?void 0:e.placeHolderResponse)||void 0===n?void 0:n.placements)&&e.placeHolderResponse.placements.forEach((e=>{const{regionIndex:t}=e;this.originalInfopaneRegion.get(t)&&(e.region=this.originalInfopaneRegion.get(t))})))}fetchSamAdsInPlacementList(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t={placements:[]};(0,r.EC)(e).forEach(((e,n)=>{this.checkAndAddPlacement(t,!0,n,e)})),this.mapViewOptimizationRegion(t);const n=yield this.fetchSamAds(t);return this.mapSamAdRegionToOriginal(n),n}))}fireServedTrackingCallForPlacements(e){if(!e)return;const t=this.beaconService.sendBeaconForAdServed.bind(this.beaconService);e.map((({beaconsJson:e,bingTrackerUrls:t=[],videoViewabilityData:n,beaconsSupportHttpPOST:i})=>!e||t.length>0&&n?null:{beaconsJson:e,beaconsSupportHttpPOST:i})).filter((e=>!(!e||!e.beaconsJson))).forEach(t)}updateAdRegionTupleListMap(e){var t,n;const{adRegionTupleListMap:i}=this;i.forEach(((t,n)=>{var i;t[1].push(...null!==(i=e.get(n))&&void 0!==i?i:[])})),(null===(t=this.config)||void 0===t?void 0:t.enableAdsWaterfall)&&!1===this.tallAdProcessed&&this.updatePlacementsForTallAd(i,this.config.tallAdsIndex),(null===(n=this.config)||void 0===n?void 0:n.infopaneViewOptAdCount)&&this.updatePlacementsForInfopane(i)}updatePlacementsForTallAd(e,t=0){if(0===t)return;const n=this.getOrDefault(e,"rivert",[!0,[],[]]),i=this.getOrDefault(e,"river",[!0,[],[]]),r=[t],o=this.removeItemFromPlacementArray(i[1],t);e.set("river",[i[0],o,i[2]]),e.set("rivert",[n[0],r,n[2]]),this.tallAdProcessed=!0}updatePlacementsForInfopane(e){e.forEach(((e,t)=>{e[0]&&x.PB.includes(t)&&(e[1].forEach((e=>{this.infopanePlacementList.push({region:t,index:e}),this.originalInfopaneRegion.set(e,t)})),e[1]=[])})),this.infopanePlacementList.sort(((e,t)=>e.index-t.index))}removeItemFromPlacementArray(e,t){return null==e?void 0:e.filter((e=>e!==t))}getOrDefault(e,t,n){var i;return null!==(i=e.get(t))&&void 0!==i?i:n}updateAdCache(e){if(!this.isFirstSamAdsBatch)return;const t=new Map;if(this.adRegionTupleListMap.forEach(((n,i)=>{var r;const o=[...null!==(r=null==e?void 0:e.get(i))&&void 0!==r?r:[],...n[1]],a=this.getPlacementsBySectionIndex(o,i);t.set(i,a)})),((e,t)=>{var n,i;const r=JSON.stringify(e,c);r!==(0,o.$o)().getItem(t)&&(null===(n=(0,o.$o)())||void 0===n||n.setItem(t,r),null===(i=(0,o.$o)())||void 0===i||i.setItem(`${t}_date`,JSON.stringify(new Date)))})(t,a),this.config.enableUASAdPlacementPrediction){const e=Object.fromEntries(t);if((0,B.Z)(e,this.cachedAdIndicesFromUAS))return;this.adsUserActionService&&this.adsUserActionService.setPredictedAdPlacements(e)}}isAdsMapEmpty(){let e=!0;return this.adRegionTupleListMap.forEach((t=>{t[2].length>0&&(e=!1)})),e}getRegionImg(e){var t,n,i,r,o,a,s,c,d,l,u,p,h,g;switch(e){case"resriver":return null===(n=null===(t=this.config.adTemplateConfig)||void 0===t?void 0:t.imageSizeConfig)||void 0===n?void 0:n.river;case"resinfopane":return null===(r=null===(i=this.config.adTemplateConfig)||void 0===i?void 0:i.imageSizeConfig)||void 0===r?void 0:r.infopane;case"river":return null===(a=null===(o=this.config.adTemplateConfig)||void 0===o?void 0:o.imageSizeConfig)||void 0===a?void 0:a.river;case"infopane":return null===(c=null===(s=this.config.adTemplateConfig)||void 0===s?void 0:s.imageSizeConfig)||void 0===c?void 0:c.infopane;case"rightrail":return null===(l=null===(d=this.config.adTemplateConfig)||void 0===d?void 0:d.imageSizeConfig)||void 0===l?void 0:l.river;case"infopane-tab":return null===(p=null===(u=this.config.adTemplateConfig)||void 0===u?void 0:u.imageSizeConfig)||void 0===p?void 0:p.infopaneTab;case"rivert":return null===(g=null===(h=this.config.adTemplateConfig)||void 0===h?void 0:h.imageSizeConfig)||void 0===g?void 0:g.rivert;default:return}}refresh(){this.initNativeAdConfig(this.config),this.initAdRegionTupleListMap(),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[]}updateCardsIndexPersection(e){e.map((e=>{var t;const n=this.cardsIndexList[this.cardsIndexList.length-1]||0;this.cardsIndexList.push(n+((null===(t=e.cards)||void 0===t?void 0:t.length)||0))}))}updateRelativeAdIndexPersection(e){e.forEach((e=>{var t,n;const i=this.nativeAdIndexList[this.nativeAdIndexList.length-1]||0,r=(null===(t=e.cards)||void 0===t?void 0:t.filter((e=>"nativead"===e.type)).length)||0;this.nativeAdIndexList.push(i+r);const o=this.cmsAdIndexList[this.cmsAdIndexList.length-1]||0,a=(null===(n=e.cards)||void 0===n?void 0:n.filter((e=>"cmsad"===e.type)).length)||0;this.cmsAdIndexList.push(o+a)}))}updateAndFilterSamAdResponse(e,t){const{placements:n}=this.nativeAdService.updateSamAdResponse(e,t,this.getIsPrerenderAds());return n.filter((e=>e.items.length))}getAdIndices(e){let t;if(this.config.enableUASAdPlacementPrediction&&this.cachedAdIndicesFromUAS&&(!(0,M.N)()||this.hasSSRAdData)&&(t=new Map(Object.entries(this.cachedAdIndicesFromUAS))),(!t||!t.size)&&this.config.adPlacementsConfig&&(!(0,M.N)()||this.hasSSRAdData)){t=new Map;for(const[e,n]of Object.entries(this.config.adPlacementsConfig))t.set(e.replace("_","-"),n)}return t&&t.size||!(0,M.N)()||(t=(e=>{var t;const n=null===(t=(0,o.$o)())||void 0===t?void 0:t.getItem(e);return s(n)})(a)),(null==t?void 0:t.get(e))||[]}getSamIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("infopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedSamIndices(e){var t,n,i;return(null===(i=null===(n=null===(t=this.samRequest)||void 0===t?void 0:t.placements)||void 0===n?void 0:n.find((t=>t.region===e)))||void 0===i?void 0:i.indices)||[]}getCmsIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("resinfopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedCmsIndices(e){var t,n,i;return(null===(i=null===(n=null===(t=this.cmsRequest)||void 0===t?void 0:t.placements)||void 0===n?void 0:n.find((t=>t.region===e)))||void 0===i?void 0:i.indices)||[]}validateSamAdPlacementConfig(e){var t,n,i,r;const o=[],a=new Map;for(const t of e.placements){const e=t.region,n=this.getPredictedSamIndices(e);if(!n||!n.length){o.push(t);continue}const i=n.filter((e=>t.indices.indexOf(e)>=0)),r=t.indices.filter((e=>i.indexOf(e)<0));t.indices=r,r.length&&o.push(t),a.set(e,i)}let s=o;if(o.length&&this.config.avoidPredictInfopaneAd&&(s=s.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),s.length?(p(JSON.stringify(null===(t=this.samRequest)||void 0===t?void 0:t.placements),JSON.stringify(e.placements),I.iLP),l.M0.addOrUpdateTmplProperty("edge_ntp.adMismatched","1")):l.M0.addOrUpdateTmplProperty("edge_ntp.adMatched","1"),e.placements=o,null===(r=null===(i=null===(n=this.predictSamResponse)||void 0===n?void 0:n.samResponse)||void 0===i?void 0:i.placements)||void 0===r?void 0:r.length){const e=[];if(this.predictSamResponse.samResponse.placements.forEach((t=>{const n=t.region&&a.get(t.region);t.index&&n&&n.indexOf(t.index)>-1&&e.push(t)})),this.predictSamResponse.samResponse.placements=e,this.hasSSRAdData){const e=[];this.predictSamResponse.placeHolderResponse.placements.forEach((t=>{const n=t.region&&a.get(t.region);t.regionIndex&&n&&n.indexOf(t.regionIndex)>-1&&e.push(t)})),this.predictSamResponse.placeHolderResponse.placements=e}}}validateCmsAdPlacementConfig(e){var t,n;const i=[],r=new Map;for(const t of e.placements){const e=t.region,n=this.getPredictedCmsIndices(e);if(!n||!n.length){i.push(t);continue}const o=n.filter((e=>t.indices.indexOf(e)>=0)),a=t.indices.filter((e=>o.indexOf(e)<0));t.indices=a,a.length&&i.push(t),r.set(e,o)}let o=i;if(i.length&&this.config.avoidPredictInfopaneAd&&(o=o.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),o.length&&p(JSON.stringify(null===(t=this.cmsRequest)||void 0===t?void 0:t.placements),JSON.stringify(e),I.RaX),e.placements=i,this.predictCmsResponse&&this.predictCmsResponse.length){const e=[];null===(n=this.predictCmsResponse)||void 0===n||n.forEach((t=>{const n=r.get(t.region);n&&n.indexOf(t.regionIndex)>-1&&e.push(t)})),this.predictCmsResponse=e}}getNativeAdId(e,t){return`nativead-${e}-${t}`}getIsPrerenderAds(){const e=this.config.enablePrerenderAds&&(0,$.TR)()&&(0,M.N)()&&"hidden"===document.visibilityState,t=this.config.enableSponsoredCollectionSSR&&!(0,M.N)();return!(!e&&!t)}createMetaTags(e){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise((t=>{e.forEach((e=>{var t;if("infopane"==e.region||"river"==e.region){const n=e.items&&(null===(t=e.items[0])||void 0===t?void 0:t.adSelectionReason);if(n){const t=this.getNativeAdId(e.region,e.regionIndex);let i;switch(e.region){case"infopane":i=`tab_panel_${t}`;break;case"river":i=`native_ad_${t}`;break;default:return}try{if(!(0,M.N)())return;const e=JSON.parse(n).ads[0].id,t=n.replace(e,i),r=document.head,o=document.createElement("meta");o.name="AdsMetadata",o.content=t,r.appendChild(o)}catch(e){return void(0,A.OO)(e,I.ds2,"Failed to add WhyThisAd meta tag to head")}}}})),t()}))}))}loadBuyDirectAd(){return(0,i.mG)(this,void 0,void 0,(function*(){yield this.nativeAdService.loadBuyDirectAd()}))}}j.isFilteredRegion={river:!0,resriver:!0};const G=(e,t,n=!1)=>{const i="NATIVE_AD_HELPER_INSTANCE";let r=O.Gq.get(i);return r&&!n||(r=new j(e,t),O.Gq.set(i,r)),r}},54291:function(e,t,n){"use strict";n.d(t,{X:function(){return D}});var i=n(33940),r=n(25568),o=n(82890),a=n(32506),s=n(99704),c=n(77316),d=n(33379),l=n(27003),u=n(98304),p=n(22704),h=n(68364);var g=n(56692),m=n(26007),f=n(23547),v=n(32005),y=n(34960),S=n(10877),C=n(987),b=n(45506),w=n(51125),T=n(31780),k=n(19809),P=n(87298),A=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"filteredChannels","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),I=n(65135),E=n(24676),x=n(75384),M=n(1033),O=n(44772);const L=["cbypass","activityId","prerender","timeOut","caller","infopaneCount","edgExpMask","skipRetry","dhp","overlay"];class D{constructor(e){this.shouldRetryInOtherDomain=!1,this.config=e}fetchFromWpoService(e,t,n){var o;return(0,i.mG)(this,void 0,void 0,(function*(){if(n){const n=(0,d.N)()?1e4:void 0,i=yield M.SI.getEarlyWpoFeedData(n),r=void 0===i||(null===(o=null==i?void 0:i.appError)||void 0===o?void 0:o.id);if(M.SI.enableEarlyMainFeedRequest=!1,!r||!(0,d.N)())return i;if(!e.skipRetry){const n=yield this.fetchFromService(e,t);if(n)return n}}else{const n=yield this.fetchFromService(e,t);if(n)return n}if(this.shouldRetryInOtherDomain){e.domainOverride=r.hM,e.requestPathOverride=r.hZ;const n=yield this.fetchFromService(e,t,!0);if(n)return n}return this.getCachedResponse(e)}))}fetchFromService(e,t,n=!1){var h,M,O,L,D,R,F,B,N,U,$,_,H,W;return(0,i.mG)(this,void 0,void 0,(function*(){let i;const j=(0,x.TR)(),G=g.jG.ShouldUseFdheadQsp?(null===(M=null===(h=g.jG.CurrentRequestTargetScope)||void 0===h?void 0:h.pageExperiments)||void 0===M?void 0:M.join(","))||"":void 0;let V;(0,d.N)()&&(V=!(window&&window.chrome&&window.chrome.embeddedSearch),I.M0.addOrUpdateTmplProperty("privatew",`${V}`));const q=window&&`${window.innerWidth}x${window.innerHeight}`;!(0,d.N)()&&(null===(O=this.config)||void 0===O?void 0:O.requestToOrigin)&&(e.domainOverride=r.hM,e.requestPathOverride=r.hZ),(null===(L=this.config)||void 0===L?void 0:L.enableResetServiceURL)&&(e.domainOverride=r.kJ);const z=e.useNextPageUrl&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,Q=Object.assign(Object.assign({},e),{audienceMode:null===(D=g.jG.CurrentRequestTargetScope)||void 0===D?void 0:D.audienceMode,enableRightRailColumn:e.powerRightRailWithWpo,fdhead:G||e.fdhead,nextPageUrl:e.useNextPageUrl?e.nextPageUrl:"",requestType:e.requestType?s.xd[e.requestType]:s.xd.wpoService,refreshType:j&&!(0,E.ZE)()?s.Rx.Bgtask:void 0,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:z||2e3,disableContent:e.disableContent,isRetry:n,private:V,viewportSize:q}),Z=m.c.getQueryParameterByName("ssrFeedTimeOut",window.location.href);!(0,d.N)()&&Z&&(Q.timeoutMs=parseInt(Z));const K=yield c.q.requestInit(Q),J=yield c.q.buildServiceRequestURL(Q),X=decodeURIComponent(J.href);if("1"===m.c.getQueryParameterByName("logwporeq",window.location.href)){const e={};new Headers(null==K?void 0:K.headers).forEach(((t,n)=>e[n]=t)),I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.N1),{pb:Object.assign(Object.assign({},u.N1.pb),{headers:JSON.stringify(e),url:X,credentials:K.credentials,referrer:K.referrer})}))}this.requestQueryParams=new f.h(J.search),J.search=this.requestQueryParams.toString(),k.$D.addTelemetryTracingQueryParam(J);const Y=(0,p.Ou)();Y[o.p.wpoCallStart]=Math.round((0,p.UE)());const{nextPageUrl:ee,pageScenario:te}=e||{};let ne,ie;const re=e&&e.isMobile&&e.mobileUrl||J.href;try{let r=(0,d.N)()?1e4:800;(0,d.N)()&&(null==e?void 0:e.overrideCSRTimeoutInMs)?r=null==e?void 0:e.overrideCSRTimeoutInMs:!(0,d.N)()&&(null==e?void 0:e.overrideSSRTimeoutInMs)&&(r=null==e?void 0:e.overrideSSRTimeoutInMs),t&&t();const o=!(e.useNextPageUrl&&ee),s=5e3;ie=(()=>{let e=0;const t=o?u.IHr:u.lsA;return setInterval((()=>{e+=1,I.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{pb:Object.assign(Object.assign({},t.pb),{url:decodeURIComponent(re),isFirstPage:o,activityId:g.jG.ActivityId,isPrerender:j}),message:`Request didn't finish in ${s*e}ms`}))}),s)})();const c=yield(0,P.w)((()=>(0,d.N)()?(0,P.O)(decodeURIComponent(re),K,r,e.skipRetry):(0,v.Sm)(decodeURIComponent(re),r,K)),"SuperFeedDataProvider.fetchFromWpoService",r||0,e.skipRetry);if(ie&&(clearInterval(ie),ie=null),ne=null===(R=null==c?void 0:c.headers)||void 0===R?void 0:R.get("ddd-debugid"),l.Gq.set("OneServiceResponseDebugId",ne),c){if("1"===m.c.getQueryParameterByName("logwpores",window.location.href)){const e={};null===(F=c.headers)||void 0===F||F.forEach(((t,n)=>e[n]=t)),I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.uI4),{pb:Object.assign(Object.assign({},u.uI4.pb),{headers:JSON.stringify(e),ok:c.ok,status:c.statusText,body:c.body})}))}}const{status:p}=c||{};if("following"===e.feedName){const e=new URLSearchParams(J.search),t="activityId",n=e.get(t)||"";if(n&&n!=g.jG.ActivityId&&I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.hOL),{message:"ActivityId mismatched",pb:Object.assign(Object.assign({},u.hOL.pb),{clientActivityId:g.jG.ActivityId,serviceSideActivityId:n,debugId:ne})})),(204===p||404===p)&&o){const e=A;return 204===p&&(null===(U=null===(N=null===(B=null==e?void 0:e.sections)||void 0===B?void 0:B[0].subSections)||void 0===N?void 0:N[0].cards)||void 0===U?void 0:U[0])&&(e.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),e}}let h,f,b;if(!c||!c.ok){const{statusText:t}=c||{};h=e.disableContent?u.wNN:o?u.R5h:u.EkS;const i=Object.assign(Object.assign({},h),{message:c?"SuperFeedDataProvider: OneService returned error response":"SuperFeedDataProvider: OneService response was null",pb:Object.assign(Object.assign({},h.pb),{url:decodeURIComponent(re),status:p,statusText:t,requestHeaders:JSON.stringify((0,y.GI)(K.headers)),responseHeaders:this.getResponseHeaders(c),isPrerender:j,debugId:ne,isRetriedRequest:n})});return I.M0.sendAppErrorEvent(i),{appError:i,debugId:ne}}if(!e.disableContent&&204===c.status){const e=o?u.K4A:u.FDi,t=Object.assign(Object.assign({},e),{message:"SuperFeedDataProvider: Service returned no content.",pb:Object.assign(Object.assign({},e.pb),{activityId:g.jG.ActivityId,requestHeaders:JSON.stringify((0,y.GI)(K.headers)),responseHeaders:this.getResponseHeaders(c),status:p,url:decodeURIComponent(re),isPrerender:j,debugId:c.headers&&c.headers.get("ddd-debugid")})});I.M0.sendAppErrorEvent(t);return!(0,d.N)()&&t===u.R5h?void 0:{sections:[],appError:t,debugId:ne}}if(c.headers){c.headers.get(S.rD.isStatic)&&(i=!0,(0,w.e5)(i),I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.XCT),{pb:Object.assign(Object.assign({},u.XCT.pb),{isPrerender:j,isFirstPage:o,activityId:g.jG.ActivityId,responseHeaders:this.getResponseHeaders(c),url:decodeURIComponent(re),debugId:ne,isRetriedRequest:n}),message:"Fell back to static content on the feeds call"})));const e=c.headers.get("ddd-tmpl");e&&I.M0.addOrUpdateTmplString(e);const t=c.headers.get(S.rD.traceId);"edgeChromium"==g.jG.AppType?(f=(0,T.et)(t,!ee),(0,d.N)()&&(0,T.mY)(t,ne)):(f=(0,T.et)(t,!ee),(0,w.Dz)(ne,!ee)),b=c.headers.get(S.rD.userType)}const k=(0,d.N)()&&performance.now(),E=yield c.json();k&&Y&&(Y.FeedResponseJsonReadTime=Math.round(performance.now()-k));if(!("vp"===m.c.getQueryParameterByName("reqsrc",location.href)||"1"===m.c.getQueryParameterByName("vptest",location.href))&&ee&&E){const e=new URLSearchParams(ee),t=null===($=e.get("activityId"))||void 0===$?void 0:$.toLowerCase().replace(/-/g,""),r=g.jG.ActivityIdLowerCaseNoHypens;t&&t!==r&&I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.ey$),{pb:Object.assign(Object.assign({},u.ey$.pb),{isPrerender:j,responseHeaders:this.getResponseHeaders(c),url:decodeURIComponent(re),debugId:ne,isRetriedRequest:n,customMessage:`ActivityId returned from backend: [${t}]; Current activityId: [${r}]; DDD-DebugID: ${ne}; isStatic: ${i}`}),message:"ActivityId returned from backend is different from current activityId"}))}if(E&&E.swCacheEnabled){I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.Y6E),{pb:Object.assign(Object.assign({},u.Y6E.pb),{url:decodeURIComponent(re),isFirstPage:o,activityId:g.jG.ActivityId,isPrerender:j,debugId:ne,isRetriedRequest:n,cacheAgeSeconds:E.cacheAgeSeconds}),message:"Service Worker Cached Data Triggered"}));let e=null,t="";switch(E.cacheTriggeredReason){case u.RDJ.id:e=u.RDJ,t="Service Worker Triggered due to fetch error: "+E.cacheTriggeredErrorMessage;break;case u.Nyv.id:e=u.Nyv,t="Service Worker Triggered due to wpo service error";break;case u.Vm4.id:e=u.Vm4,t="Service Worker Triggered due to Status 204 no content";break;case u.npe.id:e=u.npe,t="Service Worker Triggered due to static content loaded";break;case u.Q0t.id:e=u.Q0t,t="Service Worker Triggered due to wpo service returns empty section";break;case u.dAd.id:e=u.dAd,t="Service Worker Triggered due to static fallback returns empty section";break;case u.zo9.id:e=u.zo9,t="Service Worker Triggered due to network timeout"}e&&I.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{url:decodeURIComponent(re),isFirstPage:o,activityId:g.jG.ActivityId,isPrerender:j,debugId:ne,isRetriedRequest:n,cacheAgeSeconds:E.cacheAgeSeconds}),message:t}))}if(E&&E.serviceContext&&E.serviceContext.preRenderDisabled)return E.serviceContext.debugId&&I.M0.addOrUpdateCustomProperty("PartialId",E.serviceContext.debugId),{isPartial:E.isPartial,serviceContext:E.serviceContext};if("following"===e.feedName&&200===c.status&&o){const e=A;if(!(E.sections&&E.sections.some((e=>"river"===e.region)))&&E.sections&&e&&e.sections&&e.sections.length){const t=E.sections.filter((e=>"overlay"===e.region));t&&t.length&&E.sections.push(e.sections[0])}}if("gaming"===e.feedName&&200===c.status&&o&&(0,d.N)()&&(null===(_=E.serviceContext)||void 0===_?void 0:_.tmpl)&&!(0,C.$o)().getObject(a.d.GamingFeedEngagement))try{const e=Math.floor((new Date).getTime()/1e3),t=E.serviceContext.tmpl.split(";"),n={};for(let e=0;e<t.length;e++)t[e].includes("gamingFeedEngagementCount30D")&&t[e].split(",").forEach((e=>{const t=e.split(":"),[i,r]=t,o=r?Number.parseInt(r,10):null;"gamingFeedEngagementSum7D"!==i&&"gamingFeedEngagementCount7D"!==i&&"gamingFeedEngagementSum30D"!==i&&"gamingFeedEngagementCount30D"!==i||null===o||(n[i]=o)}));n.lastUpdated=e;const i=5;Object.keys(n).length===i&&(0,C.$o)().setObject(a.d.GamingFeedEngagement,n)}catch(e){}if("winfullpage"===te&&E&&E.sections&&E.sections.length>0){const e=E.sections;(e[0].subSections&&e[0].subSections.length>0?e[0].subSections:e).some((e=>!e.layoutTemplate))&&I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.Z49),{pb:Object.assign(Object.assign({},u.Z49.pb),{url:decodeURIComponent(re),dataTemplate:E.sections.map((e=>e.dataTemplate)).join(","),layoutTemplate:E.sections.map((e=>e.layoutTemplate)).join(",")}),message:"LayoutTemplate field missing for sections on the feeds call"}))}let M;if(!(E&&(e.disableContent||E.sections&&E.sections.length))){const e=i?u.w0e:u._yJ;I.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{url:decodeURIComponent(re),isFirstPage:o,activityId:g.jG.ActivityId,isPrerender:j,debugId:ne,isRetriedRequest:n}),message:"Empty Section on the feed call"}))}!(null===(H=this.config)||void 0===H?void 0:H.auctionRidOverride)||(0,x.TR)()||(0,d.N)()||this.backfill1SAdWithNews(E);const O=E&&E.metadata;if("byregion"!=e.wpoSchema){const e=function(e){return e&&e.sections&&!e.sections[0].region?{nextPageUrl:e.nextPageUrl,sections:[{region:"river",subSections:e.sections}],adsMetadata:e.adsMetadata,pageContext:e.pageContext}:e}(E);return Object.assign(Object.assign({},e),{isStatic:i,appError:M,traceIdIndex:f,metadata:O,userType:b,debugId:ne})}return Object.assign(Object.assign({},E),{isStatic:i,appError:M,traceIdIndex:f,metadata:O,userType:b,debugId:ne})}catch(t){ie&&(clearInterval(ie),ie=null);const i=["Service Request Timed out","Fetch for https://"],r=["TypeError: Failed to fetch"];let o;const a=!ee;let s;if(this.shouldRetryInOtherDomain=a&&!e.domainOverride&&b.Al.CurrentFlightSet.has("prg-retryapimsn"),i.some((e=>{var n;return null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.includes(e)}))){const e=j?u.lCX:u.Kzw;o=a?e:u.Jmv,s=!0,o===u.Kzw&&this.shouldRetryInOtherDomain&&!n&&(o=u.tYD)}else o=r.some((e=>`${t}`.includes(e)))?this.shouldRetryInOtherDomain?u.Ps3:u.zYr:this.shouldRetryInOtherDomain?u.md3:u.KJ$;const c=Object.assign(Object.assign({},o),{message:"Error while fetching OneService response",pb:Object.assign(Object.assign({},o.pb),{url:decodeURIComponent(re),activityId:g.jG.ActivityId,requestHeaders:JSON.stringify((0,y.GI)(K.headers)),customMessage:`${t}`,isPrerender:j,debugId:ne,isRetry:this.shouldRetryInOtherDomain,domainOverride:null!==(W=e.domainOverride)&&void 0!==W?W:"",isRetriedRequest:n})});return I.M0.sendAppErrorEvent(c),{appError:c,userEndError:s,debugId:ne}}}))}getResponseHeaders(e){return e&&e.headers?JSON.stringify({"Akamai-Request-ID":e.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":e.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":e.headers.get("X-MSEdge-Ref")}):""}getCachedResponse(e){var t;return(0,i.mG)(this,void 0,void 0,(function*(){if((e.skipRetry||e.enableCachedResponseFallback)&&(0,d.N)()&&window.caches&&e.serviceUrl&&e.serviceWorkerCachePrefix)try{const n=(yield caches.keys()).find((t=>t.startsWith(e.serviceWorkerCachePrefix||"")));if(!n)return;const i=yield caches.open(n);if(!i)return;const r=this.normalizeUrl(e.serviceUrl),o=(yield i.keys())||[],a=o.filter((e=>e.url&&this.normalizeUrl(e.url)===r));for(const e of a)try{const n=yield i.match(e.url);if(n){const e=yield n.json();if(e){const i=(null===(t=n.headers)||void 0===t?void 0:t.get("date"))||"",r=Date.parse(i),o=isNaN(r)?"":(Date.now()-r)/1e3;return I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.Akl),{pb:Object.assign(Object.assign({},u.Akl.pb),{cacheAgeSeconds:o})})),e}}}catch(e){}I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.rYN),{pb:Object.assign(Object.assign({},u.rYN.pb),{numCachedRequests:o.length,numMatches:a.length,serviceUrl:e.serviceUrl})}))}catch(t){I.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.rYN),{message:"An error occurred while retrieving a cached response. "+t.message,pb:Object.assign(Object.assign({},u.rYN.pb),{isFirstPage:!e.nextPageUrl,url:e.serviceUrl,requestId:e.requestId,stack:t.stack})}))}}))}normalizeUrl(e){try{const t=new URL(e);L.forEach((e=>t.searchParams.delete(e)));return decodeURIComponent(t.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(e){return""}}backfill1SAdWithNews(e){var t,n,i,r,o,a,s;if(!(null===(t=e.sections)||void 0===t?void 0:t.length))return;const c=null===(r=null===(i=null===(n=e.sections.find((e=>"backup"===e.region)))||void 0===n?void 0:n.subSections)||void 0===i?void 0:i[0])||void 0===r?void 0:r.cards,d=null===(s=null===(a=null===(o=e.sections.find((e=>"river"===e.region)))||void 0===o?void 0:o.subSections)||void 0===a?void 0:a[0])||void 0===s?void 0:s.cards;null==d||d.forEach(((e,t)=>{(e.type===O.PL.NativeAd&&m.c.getQueryParameterByName("mockNo1SNative",window.location.href)||e.type===O.PL.CmsAd&&m.c.getQueryParameterByName("mockNo1SCms",window.location.href))&&(e.data=null),e.type!==O.PL.NativeAd&&e.type!==O.PL.CmsAd||e.data||((0,h.OO)(null,u.paG,`Ad for ${e.type} not found in feed response.`,`cardData: ${JSON.stringify(e)}`),(null==c?void 0:c.length)?d[t]=c.shift():(0,h.OO)(null,u.G78,"Empty backup region"))}))}}},96470:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var i=n(10618),r=n(8158),o=n(53076);var a=n(72488);let s=!1;function c(e,t){s||(s=!0,(0,i.x)(e)||t&&t()||requestAnimationFrame((()=>{t&&t()||e.forEach((({experienceType:e,instanceSrc:t})=>{if(e in o.z)r.n.loadExperience(e);else{const n=function(e,t="default",n=e){return{instanceId:e,configRef:{experienceType:n,instanceSrc:t||"default"}}}(e,t);(0,a.Fg)(n)}}))})))}},64950:function(e,t,n){"use strict";n.d(t,{AH:function(){return f},C1:function(){return y},EC:function(){return v},JV:function(){return x},Og:function(){return w},Qz:function(){return I},aR:function(){return A},b:function(){return M},h2:function(){return p},m0:function(){return T},pE:function(){return P},sI:function(){return b},vZ:function(){return k},yy:function(){return E},zX:function(){return C}});var i=n(82890),r=n(15213),o=n(22704),a=n(19388),s=n(89696),c=n(44772),d=n(90351),l=n(45506),u=n(75384);const p=1,h=["river","resriver","river_cms","rightrail"],g=e=>t=>{var n;const i=Object.assign(Object.assign({},t),{adLabelText:e.adLabelText,isGreyAdsLabelEnabled:e.isGreyAdsLabelEnabled,isWhiteSlug:e.isWhiteSlug,isTransparentSlug:e.isTransparentSlug,isNarrowTitleFooterGap:e.isNarrowTitleFooterGap,isTransparentAdSlugWithBorder:e.isTransparentAdSlugWithBorder,isTransparentAdSlugWithBorderV2:e.isTransparentAdSlugWithBorderV2,isTransparentAdSlugWithBorderV2NonDr:e.isTransparentAdSlugWithBorderV2NonDr,enableAdsColorBleed:e.enableAdsColorBleed,isAdSlugV4NonDr:e.isAdSlugV4NonDr});return"rightrail"===t.region&&(null===(n=e.rightrail)||void 0===n?void 0:n.useTransparentAdCard)&&(i.shouldUseWhiteGradient=!0),h.includes(t.region)?(i.isProviderInFooter=e.isProviderInFooter,i.isProviderInHeader=e.isProviderInHeader,((e,t)=>{var n;if(null===(n=t.items)||void 0===n?void 0:n.length){if(e.useArticleCardTemplate){const n=Number(t.items[0].imageWidth)||(0,d.Z)(e.adTemplateConfig,"imageSizeConfig.river.w"),i=Number(t.items[0].imageHeight)||(0,d.Z)(e.adTemplateConfig,"imageSizeConfig.river.h");return t.items[0].imageWidth=(225*n/i).toFixed().toString(),t.items[0].imageHeight="225",t.imageWidth=t.items[0].imageWidth,void(t.imageHeight=t.items[0].imageHeight)}t.items[0].imageWidth="300",t.items[0].imageHeight="156"}})(e,i),i):i},m=(e,t)=>{var n;const i=null!==(n=e[t.region])&&void 0!==n?n:[];return Object.assign(Object.assign({},e),{[t.region]:i.concat(t)})},f=(e,t)=>t.map(g(e)).reduce(m,{}),v=e=>e.reduce(((e,{region:t,index:n})=>{const i=e.get(t)||[];return i.push(n),e.set(t,i),e}),new Map),y=(e,t)=>e.reduce(((e,n)=>(t(n)?e[0].push(n):e[1].push(n),e)),[[],[]]),S=()=>{const e=(0,o.Ou)()[a.nz+i.p.complete];(0,s.hf)(r.q.RenderReady,e),(0,s.hf)(r.q.AdRendered,1),(0,s.hf)(r.q.TimeToRenderAd,e)},C=(e=!1)=>{const t=(0,o.Ou)(),n=t[i.p.isSSRCompleted]&&window.is1SAdsSSRRendered;n&&S(),window.requestAnimationFrame((()=>{setTimeout((()=>{const i=(0,s.v0)(l.Al.IsPrerender&&!e),o=(0,a.O0)(r.q.RenderReady);o>-1&&o&&(0,a.su)(r.q.AdRendered,i-o);const c=(0,a.O0)(r.q.TimeToAdResponse);c>-1&&(0,a.O_)(r.q.AdProcessed,c,i);const d=(0,a.O0)(e?r.q.TimeToServeAdBackground:r.q.TimeToServeAd);d>-1&&(0,a.su)(r.q.RespToAdCallback,d-c),e?(0,u.lr)().then((()=>{(0,a.O_)(r.q.TimeToRenderAd,0,t.TTPR),(0,a.O_)(r.q.TimeToRequestAd,0,1)})):n||(0,a.O_)(r.q.TimeToRenderAd,0,i)}),0)}));const c=(0,s.v0)(l.Al.IsPrerender&&!e);(0,a.su)(r.q.RenderReady,c);const d=(0,a.O0)(e?r.q.TimeToServeAdBackground:r.q.TimeToServeAd);d>-1&&(0,a.su)(r.q.AdCallbackProcessed,c-d)},b=()=>{if((0,o.Ou)()[i.p.isSSRCompleted]&&window.is1SAdsSSRRendered)S();else{const e=(0,s.v0)(l.Al.IsPrerender);(0,a.O_)(r.q.TimeToRenderAd,0,e)}},w=e=>{var t,n;return 0===(null===(n=null===(t=e.placement)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)},T=e=>e.type===c.PL.Infopane,k=e=>e.type===c.PL.TabbedInfopaneCard,P=e=>e.type===c.PL.ChannelCarousel||e.type===c.PL.ChannelFilterCard,A=e=>e.type===c.PL.NativeAd||e.type===c.PL.NativeTopAd,I=e=>e.type===c.PL.CmsAd,E=e=>e.type===c.PL.Dense,x=e=>e.type===c.PL.TabbedInfopaneCardTab||e.type===c.PL.TopicFeed,M=e=>e.type===c.PL.BuyDirectAd},19246:function(e,t,n){"use strict";n.d(t,{G8:function(){return h},Jx:function(){return C},TO:function(){return S},Xd:function(){return y},Zn:function(){return f},cP:function(){return p},iM:function(){return v},oE:function(){return u}});var i=n(25295),r=n(76859),o=n(82890),a=n(83227),s=n(86294),c=n(55849),d=n(71149),l=n(9753);const u=e=>{var t;return e.type+(null!==(t=e.id)&&void 0!==t?t:"")},p=`TTVR.${o.p.viewCards}`,h=`TTVR.${o.p.sdCards}`,g=new Map([[s.U.infopaneCard,()=>!0],[s.U.sectionHeaderCard,()=>!0],[s.U.topStoriesCard,()=>!0],[s.U.contentCard,e=>{const t=(0,c.Ae)(e)||(0,d.UN)(e);return t&&t.height>=i.B._300x225.height&&t.width>=i.B._300x225.width}]]),m=[s.U.contentCard,s.U.infopaneCard,s.U.sectionHeaderCard,s.U.topStoriesCard];function f(e){const t=l.J[e.type];if(t&&m.includes(t)){const n=g.get(t);return!!n&&n(e)}return!1}const v={C1:1,C2:2,C3:3,C4:4,C5:5,C6:6};function y(e,t){return 2*e*(v[t]||1)}const S=e=>{switch(e){case r.Nv._1x_1y:return 1;case r.Nv._1x_2y:case r.Nv._2x_1y:return 2;case r.Nv._3x_1y:return 3;case r.Nv._2x_2y:case r.Nv._4x_1y:return 4;default:return 2}},C={contentGroup:a.x.contentGroup,"content-card":a.x.articlePage,horoscopeCard:a.x.horoscopeAnswerCardWC,linkedInCard:a.x.linkedInCard,moneyInfoCard:a.x.moneyInfoCardWC,onThisDayCard:a.x.onThisDayCardWC,qnaCard:a.x.qna,"shopping-carousel":a.x.shoppingCardWC,sportsCard:a.x.sportsCardWC,trafficCard:a.x.trafficCardWC,travelDestination:a.x.travelDestination,trendingNowCard:a.x.trendingNowWC,weather:a.x.weatherCardWC,autosCarousel:a.x.autosCarousel,autosMarketplaceCard:a.x.autosMarketplaceCard,boostAdCard:a.x.boostAdCard,electionsCard:a.x.generalElections,rewardsCard:a.x.rewardsCardWC,gamingCompeteCard:a.x.gamingCompeteCard,gamingInterestGroupCard:a.x.gamingInterestGroupCard,gamingMatchCard:a.x.gamingMatchCard,gamingMediaCarousel:a.x.gamingMediaCarousel,gamingPersonalizationCard:a.x.gamingPersonalizationCard,gamingRedditCard:a.x.gamingRedditCard,gamingRecentlyPlayedCard:a.x.gamingRecentlyPlayedCard,gamingRecommendedCard:a.x.gamingRecommendedCard,gamingRewardsCard:a.x.gamingRewardsCard,gamingStreamCard:a.x.gamingStreamCard,GamingClip:a.x.gamingStreamCard,GamingHighlight:a.x.gamingStreamCard,GamingLiveStream:a.x.gamingStreamCard,GamingVod:a.x.gamingStreamCard,gamingTournamentCard:a.x.gamingTournamentCard,gamingUpcomingCard:a.x.gamingUpcomingCard,gamingVideoCard:a.x.gamingVideoCard,"trending-in-ten-minutes-id":a.x.selectCarousel,"infopane-id":a.x.selectCarousel,"war-in-ukraine-carousel-id":a.x.selectCarousel,"local-news-carousel-id":a.x.selectCarousel,casualGamesCarouselCard:a.x.casualGamesCarouselCard,trendingSearchCard:a.x.trendingSearchCard,mangaCard:a.x.mangaCard,"shopping-prong-card-response":a.x.selectCarousel,winAppCard:a.x.winAppWC,publisherList:a.x.publisherList}},20782:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},X:function(){return a}});var i=n(19246),r=n(14989);function o(e,t){const n=i.iM[e];let r="";if(t)r=Object.keys(t).slice(0,n).map((e=>`${e}:${t[e].offset}`)).join(",");else{for(let e=1;e<=n;++e)r+=`c${e}:0,`;r=r.slice(0,r.length-1)}return{layout:e.toLowerCase(),colstatus:r,colwidth:300}}function a(e,t,n){const i={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},o=e.c1.length*t;return Object.keys(e).forEach((a=>{const s=a,c=n?n[s].offset:0;let d=e[s].length;s===r.K$.c2&&d++,i[s].offset=d*t-o+c})),i}},92031:function(e,t,n){"use strict";n.d(t,{$S:function(){return k},$y:function(){return v},Ay:function(){return C},Gh:function(){return L},IK:function(){return E},IV:function(){return O},Kb:function(){return T},QF:function(){return i},Rc:function(){return I},U$:function(){return y},U1:function(){return B},Zs:function(){return A},eT:function(){return x},gA:function(){return P},jo:function(){return S},js:function(){return f},tV:function(){return w},uS:function(){return r},z2:function(){return M}});var i,r,o=n(33940),a=n(98304),s=n(68364),c=n(33954),d=n(53899),l=n(24888),u=n(61857),p=n(53076),h=n(65135),g=n(33379),m=n(82423);!function(e){e.pinMsnews="pinMsnews",e.tryInformationalMode="tryInformationalMode",e.tryInformationalModeDirect="tryInformationalModeDirect",e.tryInformationalModeProg="tryInformationalModeProg",e.tryPersonalizations="tryPersonalizations",e.focusOnSearchBar="focusOnSearchBar",e.tryOffice365="tryOffice365"}(i||(i={})),function(e){e.setDefaultBrowser="setDefaultBrowser"}(r||(r={}));const f=()=>{const e=new Promise((e=>{try{(0,g.N)()&&window&&window.chrome&&window.chrome.shellIntegrationPrivate&&"function"==typeof window.chrome.shellIntegrationPrivate.setDefaultBrowser?window.chrome.shellIntegrationPrivate.setDefaultBrowser((t=>{const n=null==t?void 0:t.success;n&&document.dispatchEvent(new CustomEvent("setDefaultBrowserSuccess",{})),e({actionCompleted:n,status:null==t?void 0:t.message})})):(h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.DKZ),{message:"TargetActionLib: window.chrome.shellIntegrationPrivate.setDefaultBrowser chromium API not available"})),e({actionCompleted:!1,status:"set default browser api not available"}))}catch(t){(0,s.OO)(t,a.WQV,"TargetActionLib: Exception executing window.chrome.shellIntegrationPrivate.setDefaultBrowser chromium API to set default browser to Edge"),e({actionCompleted:!1,status:JSON.stringify(t)})}}));return()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield e}))},v=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=l.LR[l.HV.openEdgeBrowserNewWindow];return t?yield t({text:e}):null})),y=(e,t)=>{switch(e){case i.tryInformationalMode:return T(t);case i.tryInformationalModeDirect:return P();case i.tryInformationalModeProg:return k(t);case i.tryPersonalizations:return b();case i.tryOffice365:return C()}},S=e=>{if(e===r.setDefaultBrowser)return f()},C=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickOffice365Button];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),b=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickPersonalizeButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),w=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickVoiceSearchButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),T=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let t;return t=yield R(),yield(0,u.rT)(e||1e3),t=yield D(),t})),k=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let t;t=yield R(),yield(0,u.rT)(e||1e3),t=yield D(),yield(0,u.rT)(e||1e3);const n=l.LR[l.HV.clickSettingsCloseButton];return n&&(t=yield n({})),t})),P=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e={actionCompleted:!1},t=yield(0,m.oU)(p.z.ChromiumPageSettings);if(!t)return e.status="ChromiumPageSettingsConnector not found",e;const n=t.getCurrentState(),i=Object.assign(Object.assign(Object.assign({},n),{originalLayout:n.currentLayout}),d.YZ);return t.updateLayout(i),e.actionCompleted=!0,e.status="Layout mode changed to informational",document.dispatchEvent(new CustomEvent("changeToInformationalSuccess",{})),e})),A=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickWaffleButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),I=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return F("always")})),E=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return F("peek")})),x=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e={actionCompleted:!1};return window.scrollTo({top:0,behavior:"smooth"}),e.actionCompleted=!0,e})),M=()=>()=>{let e={actionCompleted:!1,status:"pinPage API not available"};try{if(!((0,g.N)()&&window&&window.chrome&&window.chrome.appPinningPrivate&&window.chrome.appPinningPrivate.pinPage))return h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.oEq),{message:"window.chrome.appPinningPrivate.pinPage not available"})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e;const t="This attests that the user has agreed to pin this website";window.chrome.appPinningPrivate.pinPage(t,"https://microsoftnews.msn.com?ocid=msnewspintb","Microsoft News"),e={actionCompleted:!0,status:"Microsoftnews pinned to taskbar"}}catch(e){h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.oEq),{message:"Exception executing window.chrome.appPinningPrivate.pinPage chromium API to pin Microsoftnews to taskbar",pb:Object.assign(Object.assign({},a.oEq.pb),{customMessage:`Exception: ${e}`})}))}return c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e},O=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{if(!((0,g.N)()&&window&&window.chrome&&window.chrome.desktopWidgetPrivate))return h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.NqK),{message:"window.chrome.desktopWidgetPrivate api not available"})),{actionCompleted:!1,status:"window.chrome.desktopWidgetPrivate api not available"};if(!window.chrome.desktopWidgetPrivate.launch)return h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.WNM),{message:"window.chrome.desktopWidgetPrivate.launch api not available"})),{actionCompleted:!1,status:"window.chrome.desktopWidgetPrivate.launch api not available"};const t=(0,u.Bw)(e);return window.chrome.desktopWidgetPrivate.launch(t,"COACHMARK"),window.chrome.desktopWidgetPrivate.enableAutoStart?(window.chrome.desktopWidgetPrivate.enableAutoStart(t,"COACHMARK"),{actionCompleted:!0,status:"Launched web widget and default to windows start."}):(h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.mNl),{message:"window.chrome.desktopWidgetPrivate.enableAutoStart api not available"})),{actionCompleted:!1,status:"window.chrome.desktopWidgetPrivate.enableAutoStart api not available"})}catch(e){return h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.dyx),{message:"Exception launching web widget and defaulting to windows start",pb:Object.assign(Object.assign({},a.dyx.pb),{customMessage:`Error: ${JSON.stringify(e)}`})})),{actionCompleted:!1,status:"Exception executing launchAndDefaultWebWidget() CTA"}}})),L=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{let e;const t=l.LR[l.HV.focusOnSearchBar];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}catch(e){return h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.Zwk),{message:"Exception when try to focus on search bar",pb:Object.assign(Object.assign({},a.Zwk.pb),{customMessage:`Error: ${JSON.stringify(e)}`})})),{actionCompleted:!1,status:`Exception executing focusOnSearchBar() CTA. Error: ${JSON.stringify(e)}`}}}));function D(){return(0,o.mG)(this,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickSettingsInformationalButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}))}function R(){return(0,o.mG)(this,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickSettingsButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}))}function F(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t={actionCompleted:!1},n=yield(0,m.oU)(p.z.ChromiumPageSettings);if(!n)return t.status="ChromiumPageSettingsConnector not found",t;const i=n.getCurrentState();if(i.currentLayout!==d.nP.custom){const e=Object.assign(Object.assign({},i),{originalLayout:i.currentLayout,currentLayout:d.nP.custom});n.updateLayout(e)}return n.updateFeeds(e,i.selectedFeedDisplaySetting),t.actionCompleted=!0,t.status=`Feed toggle changed to ${e}`,t}))}const B=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{let e;const t=l.LR[l.HV.clickRewardsButton];return t?(e=yield t({}),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e):(h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.$t),{message:"Rewards icon not found"})),{actionCompleted:!1,status:"Rewards icon not found"})}catch(e){return h.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.IEE),{message:"Exception when try to click on rewards button",pb:Object.assign(Object.assign({},a.IEE.pb),{customMessage:`Error: ${JSON.stringify(e)}`})})),{actionCompleted:!1,status:`Exception executing clickRewardsButton() CTA. Error: ${JSON.stringify(e)}`}}}))},24888:function(e,t,n){"use strict";n.d(t,{LR:function(){return s},HV:function(){return a}});var i=n(61857),r=n(33940),o=n(69531);const a={clickAddTileButton:"clickAddTileButton",clickMyFeedPivotButton:"clickMyFeedPivotButton",clickOffice365Button:"clickOffice365Button",clickPersonalizeButton:"clickPersonalizeButton",clickSettingsAdvancedButton:"clickSettingsAdvancedButton",clickSettingsButton:"clickSettingsButton",clickSettingsCloseButton:"clickSettingsCloseButton",clickSettingsCustomButton:"clickSettingsCustomButton",clickSettingsFocusedButton:"clickSettingsFocusedButton",clickSettingsInformationalButton:"clickSettingsInformationalButton",clickSettingsInspirationalButton:"clickSettingsInspirationalButton",clickVoiceSearchButton:"clickVoiceSearchButton",clickWaffleButton:"clickWaffleButton",openEdgeBrowserNewWindow:"openEdgeBrowserNewWindow",focusOnSearchBar:"focusOnSearchBar",clickRewardsButton:"clickRewardsButton"},s={[a.clickAddTileButton]:()=>(0,i.xB)("AddTopSiteButton"),[a.clickMyFeedPivotButton]:()=>(0,i.xB)("MyFeedPivotButton"),[a.clickOffice365Button]:()=>(0,i.xB)("office365"),[a.clickPersonalizeButton]:()=>(0,i.xB)("PersonalizeButton"),[a.clickSettingsAdvancedButton]:()=>(0,i.xB)("SettingsAdvancedButton"),[a.clickSettingsButton]:()=>(0,i.xB)("SettingsButton"),[a.clickSettingsCloseButton]:()=>(0,i.xB)("settingsCloseButton"),[a.clickSettingsCustomButton]:()=>(0,i.xB)("SettingsCustomButton"),[a.clickSettingsFocusedButton]:()=>(0,i.xB)("SettingsFocusedButton"),[a.clickSettingsInformationalButton]:()=>(0,i.xB)("settingsInformationalButton"),[a.clickSettingsInspirationalButton]:()=>(0,i.xB)("SettingsInspirationalButton"),[a.clickVoiceSearchButton]:()=>(0,i.xB)("searchBoxVoiceButton"),[a.openEdgeBrowserNewWindow]:e=>(0,r.mG)(void 0,void 0,void 0,(function*(){return e&&e.text&&(0,o.R)(e.text)?(window.open(e.text,"_blank").focus(),{actionCompleted:!0,status:"Window opened"}):{actionCompleted:!1,status:"No url provided"}})),[a.clickWaffleButton]:()=>(0,i.xB)("waffle"),[a.focusOnSearchBar]:()=>(0,i.yC)("searchBoxInput"),[a.clickRewardsButton]:()=>(0,i.xB)("rewardsIcon")}},61857:function(e,t,n){"use strict";n.d(t,{Bw:function(){return p},rT:function(){return l},xB:function(){return c},yC:function(){return d},zq:function(){return u}});var i=n(33940),r=n(69531),o=n(53899),a=n(9533);const s=e=>(0,r.R)(e)?(0,a.b_)(e):null,c=e=>{const t=s(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const n=(e=>{const t=e&&e.click;return!(!t||"function"!=typeof t||(e.click.call(e),0))})(t);return{actionCompleted:n,status:`Click status: TargetId [${e}] == ${n}`}},d=e=>{const t=s(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const n=(e=>{const t=e&&e.focus;return!(!t||"function"!=typeof t||(e.focus.call(e),0))})(t);return{actionCompleted:n,status:`Focus status: TargetId [${e}] == ${n}`}},l=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){const t=new Promise((t=>{setTimeout(t,e)}));yield t})),u=()=>{const e={resolve:null,waiting:null};return e.waiting=new Promise((t=>{e.resolve=t})),e},p=e=>{switch(e){case o.nP.custom:return"NTP_CUSTOM";case o.nP.focused:return"NTP_FOCUSED";case o.nP.informational:return"NTP_INFORMATIONAL";case o.nP.inspirational:return"NTP_INSPIRATIONAL";default:return"NTP_UNKNOWN"}}},75559:function(e,t,n){"use strict";n.d(t,{NS:function(){return r},ob:function(){return s},qP:function(){return i},tM:function(){return o},tW:function(){return a}});const i="data-t";var r;!function(e){e.Auto="auto",e.AutoScroll="autoScroll",e.Load="load",e.OutOfFocus="outoffocus",e.Partial="partial",e.Resize="resize",e.Scroll="scroll",e.Swipe="swipe",e.Tap="tap",e.View="view"}(r||(r={}));const o="TelemetryPageViewNotificationEvent",a="AppErrorNotificationEvent",s="IDXId"},38156:function(e,t,n){"use strict";n.d(t,{Aw:function(){return o},c9:function(){return i},hP:function(){return s},uH:function(){return r},wu:function(){return a}});const i={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Entity:15,Topic:29,Provider:30,NewStories:46,AutoSuggest:47,Tile:49,TrendingNews:50,AllCoverage:51,Report:52,MsccCookieComplianceBanner:54,CookieWallCookieComplianceBanner:57,FRE:60,VideoPlayer:61,ContentCard:62,SubmitForm:63,TrafficCard:64,WeatherCard:65,TravelDestinationCard:66,FitnessWorkoutVideo:67,BingHealthFitnessCard:68,FamilyCard:69,FitnessCard:70,HealthQnACard:71,HealthTipCard:72,HealthFitnessCarousel:73,CovidCard:74,Audio:75,ShoppingAd:76,ContentGroup:77,AicreationCard:78,Game:79,HealthRiverCard:80,Augment:81},r={Undefined:0,StructuredData:1,AppStore:2,CmsPromotions:3,MicrosoftWebStore:4,XboxStore:5,OfficeStore:6,PartnerLinks:7,SponsoredContent:8,ExternalLink:10,SearchPromo:11,Feed:12,Article:13,Gallery:14,Video:15,Audio:16,Settings:17,DisplayAd:18,OfficeDocument:19,App:20,SearchResult:21,VideoAd:22,Map:23,Comment:24,Profile:25,Coachmark:26,TrendingSearch:27,AutoSuggestSearch:28,SearchHistory:29,TextSearch:30,TopSites:31,SearchLink:32,ImageSearch:33,VoiceSearch:34,Toast:35,Greeting:36,Image:37,Banner:38,Waffle:39,Notification:40,QnaTopic:41,QnaContent:42,Publisher:43,Topic:44,LayoutToggle:45,WebContent:46,FinanceTicker:47,CashbackOffer:48,AiCharacter:49,FoodItem:50,FitnessChallenge:51,Overlay:52,Inspiration:53,DailyDiscovery:54,SegmentAugment:55},o={Click:"click",Hover:"mouseenter",MouseLeave:"mouseleave",Submit:"submit",View:"view",RightClick:"rightclick",Wheel:"wheel",KeyPress:"keypress",HorizontalSwipe:"hswipe",MiddleClick:"middleclick",VerticalSwipe:"vswipe",Launch:"launch"},a={Undefined:0,Navigate:1,ContextMenu:2,Pin:3,Unpin:4,Rearrange:5,Remove:6,Add:7,Open:8,View:9,Follow:10,Unfollow:11,More:12,Close:13,Share:14,Like:15,Dislike:16,Unlike:17,Undislike:18,Mute:19,Unmute:20,Cancel:21,Launch:22,Install:23,Manage:24,Show:25,MuteCancel:26,Save:27,Hide:28,Unhide:29,Customize:30,Suspend:31,Clear:32,SignIn:33,SignOut:34,UndoSave:35,TurnOn:36,TurnOff:37,Forward:38,Response:39,Report:40,ZoomIn:41,ZoomOut:42,Comment:43,Sort:44,Love:45,Surprised:46,Thinking:47,Sad:48,Angry:49,TextSearch:50,ImageSearch:51,UndoRemove:52,Rename:53,SearchLink:54,VoiceSearch:55,Complete:56,Play:57,Pause:58,Seek:59,Volume:60,ClosedCaptions:61,Fullscreen:62,Restore:63,Replay:64,Copy:65,Reactlike:66,UnReactlike:67,UnLove:68,UnSurprised:69,UnThinking:70,UnSad:71,UnAngry:72,ReportAd:73,Refresh:74,Paginate:75,Click:76,Hover:77,SelectProduct:78,Signup:79,CompleteOrder:80,Model3DInteraction:81,PushNotificationReceive:82,PushNotificationShow:83,PushNotificationClick:84,PushNotificationHmsClick:85,Expand:86,Collapse:87,NoSearchQuerySubmit:88,Feedback:89,QualityChange:90,ProtocolLaunch:91,SydneySummary:92,SydneyTopQuestions:93,SydneyKeyTakeaways:94,SydneyDegreeOverview:95,SydneyFactCheck:96,SydneyMore:97},s={Empty:0,SearchBox:1,TopSites:2,Suggested:4,ContentFeed:8,WinFRE:16,BingImage:32,ContentBelowTheFold:64,CustomModeOption:128,GreetingEnabled:256,HeadingsOnly:512,StripeLayout:1024,Peek:2048}},65135:function(e,t,n){"use strict";let i;n.d(t,{M0:function(){return a},dK:function(){return o},uZ:function(){return s}});const r=new Promise((e=>{i=e}));let o=()=>r,a=null;function s(e,t=i){a=e,t()}},75816:function(e,t,n){"use strict";var i;n.d(t,{G:function(){return i}}),function(e){e[e.All=0]="All",e[e.Otf=1]="Otf",e[e.OneDS=2]="OneDS",e[e.CTag=3]="CTag",e[e.Comscore=4]="Comscore",e[e.Debug=5]="Debug",e[e.SuperApp=6]="SuperApp"}(i||(i={}))},82357:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var i=n(98429);class r{createPageViewPayload(e){if(!e)return;const t=e&&e.page,n=t&&t.content,r=e&&e.user,o={rnd:(0,i.Xn)(),udc:!0};return t&&(o["pg.n"]=t.name,o["pg.t"]=t.type,o["pg.c"]=t.config,o["pg.p"]=t.product,o.rf=t.referral,o.tp=t.url,o.cvs=t.canvas,t.consentChanged&&(o.ctsa=t.consentChanged)),n&&(o.di=n.domainId,o["st.dpt"]=n.category,o["st.sdpt"]=n.subcategory,o.subcvs=n.vertical),e&&(o.lng=e.locale&&e.locale.mkt,e.request&&(o.rid=e.request.requestId,o.activityId=e.request.activityId),e.browser&&(o["d.imd"]=e.browser.isMobile,o.scr=e.browser.screenSize,o.anoncknm=e.browser.anoncknm)),r&&(o.issso=r.isSso,o.aadState=r.aadState),o}}},93048:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(98429);class r{createPageViewPayload(e){if(!e)return;let t=e&&e.page&&e.page.url;try{const n=new URL(t),i=e&&e.page&&e.page.config;(8&i||2048&i)&&(n.searchParams.set("content","1"),t=n.href),e.locale&&e.locale.mkt&&(n.searchParams.set("mkt",e.locale.mkt),t=n.href)}catch(e){}return{rn:(0,i.Xn)(),c1:2,c2:3000001,cs_ucfr:1,c7:t,c8:e&&e.page&&e.page.content&&e.page.content.title,c9:e&&e.page&&e.page.referral}}}},7282:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var i=n(75559),r=n(38156),o=n(65004),a=n(98429),s=n(65969),c=n(24410),d=n(13578);class l{constructor(e=!1,t){this.enableBatchingForAllEvents=!1,this.enableCustomDiagnostic=!1,this.enableBatchingEventList={},this.enableCustomDiagnostic=t,!0!==e?Array.isArray(e)&&e.forEach((e=>this.enableBatchingEventList[e]=!0)):this.enableBatchingForAllEvents=!0}createPageViewPayload(e){if(e){return this.createEvent("PageView",Object.assign({},e),o.zU.RealTime)}}createContentViewPayload(e,t,{contentViewType:n,isMeaningfulScroll:r}){if(!t)return;const s=[];e.forEach((e=>{s.push(this.mapTelemetryObject(e))}));let c;(0,a.d5)()&&(c={content:{docHeight:(0,a.d5)()}});const l=Object.assign(Object.assign(Object.assign({},t),c),{compressedObject:s,contentViewType:n});if(n===i.NS.Scroll&&(l.isMeaningfulScroll=r),!(0,d.Z)(s)){return this.createEvent("ContentView",l,o.zU.RealTime)}}createActionPayload(e,t,n,i){if((0,d.Z)(e)||!t)return;let a;n===r.Aw.RightClick?a="rightclick":t&&t.browser&&!0===t.browser.isMobile?a="tap":n===r.Aw.Click&&(a="click");const s=e.content&&e.content.type,l=e.type||(0,c.Y)(s,i);0!==l&&(e.type=l),delete e.action,delete e.behavior,delete e.overrideId,delete e.overrideDestinationUrl,delete e.overrideEmailIdScrubbing;return this.createEvent("UserAction",Object.assign(Object.assign({actionType:n,behavior:i,object:e},t),{gesture:a}),o.zU.RealTime)}createEventPayload(e,t,n){if(!n)return;return this.createEvent(e,Object.assign(Object.assign({},n),t),o.zU.RealTime)}createCustomEventPayload(e,t,n){if(!n&&"AppError"!==e||(0,d.Z)(t))return;return this.createEvent(e,Object.assign(Object.assign({},n),{extSchema:t}),o.zU.RealTime)}mapTelemetryObject(e){r.c9.ContentCard;let t;const n=e&&e.content&&e.content.type;(n||e.behavior)&&(t=(0,c.Y)(n,e.behavior));const i={n:e&&e.name,y:e&&e.type||t,l:e&&e.content&&e.content.id,h:e&&e.content&&e.content.headlineIdx,v:e&&e.content&&e.content.vertical,tp:e&&e.content&&e.content.topic,c:e&&e.content&&e.content.category,s:e&&e.content&&e.content.source,f:e&&e.feed&&e.feed.id,ct:e&&e.content&&e.content.type,i:e&&e.placement&&e.placement.id,p:e&&e.placement&&e.placement.parentId,o:e&&e.placement&&e.placement.ordinal,aud:e&&e.content&&e.content.audienceMode,isLocal:e&&e.content&&e.content.isLocal,subscriptionType:e&&e.content&&e.content.subscriptionType,providerType:e&&e.content&&e.content.providerType,zone:e&&e.zone,isMonetized:e&&e.isMonetized,isFeed:e&&e.isFeed};return e.ext&&(i.ext=e.ext),i}createEvent(e,t,n){let i=0;return!a.kP||this.enableBatchingForAllEvents||this.enableBatchingEventList[e]||(i=2),this.enableCustomDiagnostic&&("AppError"===e?e="AppErrorDiag":"LoadTime"===e&&(e="LoadTimeDiag")),{name:s.id[e],data:t,baseType:s.id.Base,latency:n,sync:i}}}},98146:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var i=n(90351),r=n(25514);const o={n:"name",t:"type",a:"action",b:"behavior",customHandled:"customHandled",d:"overrideDestinationUrl",oe:"overrideEmailIdScrubbing",z:"zone",ism:"isMonetized",isfeed:"isFeed",isci:"isCI","c.hi":"content.headlineIdx","c.auth":"content.author","c.i":"content.id","c.l":"content.isLocal","c.s":"content.source","c.p":"content.parentId","c.t":"content.type","c.tp":"content.topic","c.v":"content.vertical","c.c":"content.category","c.sc":"content.subcategory","c.pn":"content.partnerName","c.pi":"content.partnerId","c.b":"content.brand","c.bi":"content.brandId","c.st":"content.subscriptionType","c.pl.i":"content.placement.id","c.pl.p":"content.placement.parentId","c.pl.o":"content.placement.ordinal","c.pl.l":"content.placement.lineage","c.pl.lo":"content.placement.lineageOrdinal","c.aud":"content.audienceMode","c.pv":"content.providerType","f.i":"feed.id","f.n":"feed.name","f.t":"feed.type",ext:"ext","m.c":"metrics.isContentCI"};class a{static compress(e){const t={},n=Object.keys(o);for(let r=0;r<n.length;r++){const a=n[r],s=(0,i.Z)(e,o[a]);void 0!==s&&(t[a]=s)}const r=(0,i.Z)(e,"content.headline");return r&&(t["c.hl"]=r),t}static decompress(e){if(!e)return;const t={},n=Object.keys(o);for(let a=0;a<n.length;a++){const s=n[a],c=(0,i.Z)(e,s);void 0!==c&&(0,r.Z)(t,o[s],c)}return e["c.hl"]&&(0,r.Z)(t,"content.headline",e["c.hl"]),t}}},18536:function(e,t,n){"use strict";n.d(t,{u:function(){return d}});var i=n(75559),r=n(65135),o=n(98429),a=n(98146),s=n(60483),c=n(46728);class d{constructor(e){this.hasInheritedProperty=!1,this.children=[],this.ordinal=0,this.ordinalCount=0,this.contract=e||{},this.ordinalCount=0,this.superContract={}}get combinedContract(){if(this.contract){const e=(this.contract.content=this.contract.content||{}).headline;this.contract.content.headline=e||(0,o.tH)(this.element)}return this.hasInheritedProperty?(0,c.Z)({},this.superContract,this.contract,this.internalContract):(0,c.Z)({},this.contract,this.internalContract)}get internalContract(){const{lineage:e,lineageOrdinal:t}=d.getLineage(this)||{},n=d.getInheritedProperties(this),i=Object.assign({placement:{id:this.id,lineage:e,lineageOrdinal:t}},n);return this.parentDOM&&this.parentDOM.id&&0!==this.parentDOM.id&&(i.placement.parentId=this.parentDOM.id,i.placement.ordinal=this.ordinal),i}static addElement(e){if(!e)return;const t=this.parseContract(e);let n=this.get(e);if(n&&n.id?t&&(n.contract=t):(n=new d(t),n.id=this.generateId(),this.set(e,n)),!n)return;let r=e.parentElement;!r&&e.parentNode&&e.parentNode.host&&(r=e.parentNode.host);let a=r&&(0,o.pE)(r,`[${i.qP}]`),s=a&&this.get(a);return a&&!s&&((0,o.t0)("telemetrynodeadded",a),s=this.get(a)),n===s&&(a=a&&a.closest(`[${i.qP}]`),s=a&&this.get(a)),n&&(n.parentDOM=s&&s!==n?s:d.getRoot()),this.inheritProperty(n),this.needUpdate=!0,n}static inheritProperty(e){if(!r.M0||!r.M0.config||r.M0.config.inheritByTraversingDOM||!e||!e.contract)return;const t=e.parentDOM&&e.parentDOM.contract,n=e.parentDOM&&e.parentDOM.superContract,i=e.contract,o=e.superContract;r.M0.config.inheritExt&&(t&&t.ext||n&&n.ext)&&(e.hasInheritedProperty=!0,o.ext=Object.assign(Object.assign(Object.assign({},n&&n.ext),t&&t.ext),i.ext))}static isObject(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}static renderObject(e){return e.render()}static renderContract(e){return s.D.render(e)}static setAttribute(e,t,n){if(!e||!e.dataset)return;const r=this.renderContract(t||n&&n.contract);r&&(e.dataset.t=r[i.qP])}static get(e){const t=this.elementMap.get(e);if(!t)return t;const n=this.parseContract(e);return t&&n&&(t.contract=n),t}static getLineage(e,t=">",n=!1){try{if(e&&e.parentDOM&&e.parentDOM!==d.root){const i=this.getLineage(e.parentDOM,t,n),{lineage:r,lineageOrdinal:o}=i||{};return{lineage:r+t+e.contract.name,lineageOrdinal:(o?o+t:"")+e.ordinal}}return e&&e.parentDOM&&e.parentDOM===d.root&&n?{lineage:e.contract.name,lineageOrdinal:`${e.ordinal}`}:{lineage:e&&e.contract.name}}catch(t){if(r.M0&&r.M0.config&&r.M0.config.logElementForLineageFailure){const{id:t,tagName:n}=e&&e.element||{};r.M0.sendAppErrorEvent({id:20203,severity:1,message:"Error while parsing lineage",pb:{customMessage:JSON.stringify({elementId:t,elementTag:n})}})}}}static getInheritedProperties(e){if(!r.M0||!r.M0.config||!e)return;const{inheritByTraversingDOM:t=!1,inheritPropertyList:n=[],memoizeInheritedProperties:i}=r.M0.config,o=t&&n;return o?i?this.getInheritedPropertiesWithMemoize(e,o):this.getInheritedPropertiesWithoutMemoize(e,o):void 0}static getInheritedPropertiesWithoutMemoize(e,t){let n=e;const i={};for(;n&&n!==d.root;){for(const e of t){const t=n.contract&&n.contract[e];void 0!==t&&(void 0===i[e]?i[e]=t:this.isObject(i[e])&&(i[e]=Object.assign(Object.assign({},t),i[e])))}n=n.parentDOM}return i}static getInheritedPropertiesWithMemoize(e,t){if(e.memoizedProperties)return e.memoizedProperties;const n={};for(const i of t){n[i]=e.contract[i];let t=e&&e.parentDOM;for(;t&&t!==d.root;){const e=t.memoizedProperties?t.memoizedProperties[i]:t.contract[i];if(void 0!==e&&(void 0===n[i]?n[i]=e:this.isObject(n[i])&&(n[i]=Object.assign(Object.assign({},e),n[i]))),t.memoizedProperties)break;t=t.parentDOM}}return e.memoizedProperties=n,n}static getRoot(){return d.root}static getTelemetryObject(e){const t=this.get(e);if(t&&t.contract)return new s.D(t.contract)}static parseContract(e){try{const t=e&&e.getAttribute&&e.getAttribute(i.qP);return t?this.parseAttribute(t):void 0}catch(e){}}static parseAttribute(e){try{const t=e&&JSON.parse(e);return this.parseMetadata(t)}catch(e){}}static parseMetadata(e){try{return e&&a.v.decompress(e)}catch(e){}}static set(e,t){t.element=e,this.elementMap.set(e,t)}static updateLayout(){if(!this.needUpdate)return;this.needUpdate=!1,this.root.ordinalCount=0;const e=(0,o.Ux)(document.documentElement);for(const t of e){let e=this.get(t);e&&e.parentDOM||((0,o.t0)("telemetrynodeadded",t),e=this.get(t)),e&&(e.ordinal=e.parentDOM?++e.parentDOM.ordinalCount:0,e.ordinalCount=0)}}static generateId(){return++this.lastId}}d.elementMap=new WeakMap,d.root=new d({name:"root"}),d.lastId=0,d.needUpdate=!1},69244:function(e,t,n){"use strict";n.d(t,{o:function(){return _}});var i=n(33940),r=n(75559),o=n(75816),a=n(38156);var s=n(98429);class c{constructor(e,t){this.contentViewCallback=e,this.overrideScrollOffset=t,this.scrollChanged=!0,this.sizeChanged=!0,this.newScrollLeft=null,this.newScrollTop=null,this.firstScrolledMargin=10,this.forceScrollFiring=!1,this.viewportEventIntervalDelayMs=200,this.viewportLeft=0,this.viewportTop=0,this.viewportWidth=0,this.viewportHeight=0,this.userInteracted=!1,this.eventTimerId=0,this.eventTimeoutMS=1e3,this.scrollPerformanceTrackers={},this.syntheticTelemetryScrollCallback=(e,t)=>{e&&(this.userInteracted=!0,this.updateMechanism=r.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),t(e),this.forceScrollFiring=!0)},this.viewportOffset=0}initListener(){const e=this.throttle(this.update.bind(this),this.viewportEventIntervalDelayMs);e(),this.attachEvent("resize",(t=>{this.userInteracted=!0,this.updateMechanism=r.NS.Resize,this.sizeChanged=!0,this.triggerCallback(),e(t)})),this.attachEvent("scroll",(t=>{t&&!t.preventDefaultScroll&&(this.userInteracted=!0,this.updateMechanism=r.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),e(t))})),s.kP&&window.addEventListener("telemetryscroll",(t=>{this.syntheticTelemetryScrollCallback(t,e)}))}resetViewportOffset(){this.viewportOffset=this.overrideScrollOffset?this.overrideScrollOffset():(0,s.qC)()}triggerCallback(){this.dispatchEvent("telemetryviewportupdated",this.updateMechanism)}dispatchEvent(e,t){const n=new CustomEvent(e,{detail:{mech:t}});dispatchEvent(n)}throttle(e,t=1e3){let n=0,i=!1;return r=>{if(i)return;const o=(new Date).getTime(),a=o-n;a>t?(n=o,e(r)):(i=!0,setTimeout((()=>{i=!1,e()}),t-a))}}update(e){let t=this.sizeChanged,n=this.scrollChanged;const i=this.viewportWidth,r=this.viewportHeight,o=this.viewportLeft,a=this.viewportTop;this.updateCurrentViewportValues(),t=t&&(r!==this.viewportHeight||i!==this.viewportWidth),n=n&&(o!==this.viewportLeft||a!==this.viewportTop),(this.forceScrollFiring||t||n)&&(this.scheduleViewportEvent(e),this.forceScrollFiring=!1)}updateCurrentViewportValues(){this.scrollChanged&&(this.viewportLeft=this.newScrollLeft||this.getScrollLeft(),this.viewportTop=this.newScrollTop||this.getScrollTop(),this.newScrollLeft=this.newScrollTop=null,!this.firstScroll&&this.viewportTop>this.firstScrolledMargin&&(this.firstScroll=!0)),this.sizeChanged&&(this.viewportWidth=window.innerWidth||document.documentElement.clientWidth,this.viewportHeight=window.innerHeight||document.documentElement.clientHeight),this.scrollChanged=this.sizeChanged=!1}scheduleViewportEvent(e){if(this.userInteracted&&(d(e)&&(this.lastScrollStarted||(this.lastScrollStarted=e&&e.timeStamp||performance.now()),this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.startOrContinue(e),this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.startOrContinue(e)),this.eventLastScheduleTime=+new Date,!this.eventTimerId)){const t=()=>{this.eventTimerId=this.userInteracted=!1;const n=Date.now()-this.eventLastScheduleTime;if(n>this.eventTimeoutMS)if(d(e)){const e=performance.now()-this.lastScrollStarted;let t,n,i;this.lastScrollStarted=void 0,this.scrollPerformanceTrackers.scrollInputTracker&&(t=this.scrollPerformanceTrackers.scrollInputTracker.getPendingPotentialInputType(),n=this.scrollPerformanceTrackers.scrollInputTracker.getAndResetPotentialMissedScrollInput(),i=this.scrollPerformanceTrackers.scrollInputTracker.getScrollInstanceData());const r={scrollInputType:t,potentialMissedScrollInput:n,scrollDuration:e,endOfFeedTime:this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.stop(),calculateAri:this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.stop(),scrollInstanceData:i};this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll(),r)}else this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll());else this.eventTimerId=setTimeout(t,this.eventTimeoutMS-n)};this.eventTimerId=setTimeout(t,this.eventTimeoutMS)}}isMeaningfulScroll(){if(this.updateMechanism!==r.NS.Scroll)return!1;const e=this.overrideScrollOffset?this.overrideScrollOffset():(0,s.qC)(),t=(0,s.P6)();return(e>this.viewportOffset&&e-this.viewportOffset>t/2||e<this.viewportOffset&&this.viewportOffset-e>t/2)&&(this.viewportOffset=e,!0)}getScrollTop(){if("undefined"!=typeof pageYOffset)return pageYOffset;{const e=document.body;let t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop}}getScrollLeft(){if(void 0!==window.pageXOffset)return window.pageXOffset;{const e=document.body;let t=document.documentElement;return t=t.clientWidth?t:e,t.scrollLeft}}attachEvent(e,t){window.addEventListener(e,t,!1)}initScrollPerformanceTrackers(e){const{endOfFeedTimeTracker:t,appResponsivenessTracker:n,scrollInputTracker:i}=e;t&&(this.scrollPerformanceTrackers.endOfFeedTimeTracker=t),n&&(this.scrollPerformanceTrackers.appResponsivenessTracker=n),i&&(this.scrollPerformanceTrackers.scrollInputTracker=i,i.start())}}function d(e){return e&&(e.type===r.NS.Scroll||"telemetryscroll"===e.type)}let l,u=new Promise((e=>l=e));const p=new Map;function h(){p.clear()}var g=n(65969),m=n(18536);class f{constructor(){this.clickSearchDepth=20}observe(e=window,t){e.addEventListener("click",this.clickEventCallback.bind(this)),e.addEventListener("auxclick",this.auxClickEventCallback.bind(this)),t||e.addEventListener("contextmenu",this.contextMenuEventCallback.bind(this))}unobserve(e,t){e.removeEventListener("click",this.clickEventCallback.bind(this)),e.removeEventListener("auxclick",this.auxClickEventCallback.bind(this)),t||e.removeEventListener("contextmenu",this.contextMenuEventCallback.bind(this))}handleClickEvent(e,t,n){const i=this.getTelemetryClickTarget(e);if(!i)return;i&&i.hasAttribute("data-customhandled")||this.dispatchEvent("telemetryclick",i,t,n)}contextMenuEventCallback(e){const t=this.getClickTarget(e);this.handleClickEvent(t,a.Aw.RightClick,a.wu.ContextMenu)}clickEventCallback(e){const t=this.getClickTarget(e);1===e.button?this.handleClickEvent(t,a.Aw.MiddleClick,a.wu.Navigate):this.handleClickEvent(t)}auxClickEventCallback(e){if(1===e.button){const t=this.getClickTarget(e);this.handleClickEvent(t,a.Aw.MiddleClick,a.wu.Navigate)}}dispatchEvent(e,t,n,i){const r=new CustomEvent(e,{detail:{element:t,action:n,behavior:i}});dispatchEvent(r)}getTelemetryClickTarget(e){let t=e;for(let e=0;e<this.clickSearchDepth&&t&&!this.validTarget(t);e++)t.assignedSlot?t=t.assignedSlot:t.parentElement?t=t.parentElement:t.parentNode&&t.parentNode.host&&(t=t.parentNode.host);if(this.validTarget(t))return t}getClickTarget(e){if(!e.composedPath||"function"!=typeof e.composedPath)return e.target;{const t=e.composedPath();if(t.length>2&&"hasAttribute"in t[0]&&!t[0].hasAttribute(r.qP)&&"[object ShadowRoot]"===Object.prototype.toString.call(t[1])&&"hasAttribute"in t[2]&&t[2].hasAttribute(r.qP))return t[2];if(t.length>0)return t[0]}}validTarget(e){if(!e)return!1;const t=m.u.get(e);let n;return n=t?t.contract:m.u.parseContract(e),"BUTTON"===e.nodeName||e.hasAttribute("href")||e.getAttribute&&"button"===e.getAttribute("role")||n&&n.type===a.c9.DropDown||n&&n.type===a.c9.ActionButton||n&&n.behavior&&e.tagName.includes("-")||e.form}}class v{static start(){this.startTime=Date.now(),this.isPause=!1,this.isPauseV2=!1,this.started=!0}static pause(){this.started&&!this.isPause&&(this.isPause=!0,this.dwellTimeElapse+=Date.now()-this.startTime)}static pauseV2(){this.started&&!this.isPauseV2&&(this.isPauseV2=!0,this.dwellTimeElapseV2+=Date.now()-this.startTime)}static getDwellTime(){if(this.isPause){return this.dwellTimeElapse}if(0!==this.startTime&&this.started){return this.dwellTimeElapse+(Date.now()-this.startTime)}return 0}static getDwellTimeV2(){if(this.isPauseV2){return this.dwellTimeElapseV2}if(0!==this.startTime&&this.started){return this.dwellTimeElapseV2+(Date.now()-this.startTime)}return 0}static setDwellTime(e,t){this.startTime=e,this.dwellTimeElapse=t}static reset(){this.dwellTimeElapse=0,this.dwellTimeElapseV2=0,this.startTime=0,this.isPause=!1,this.isPauseV2=!1,this.started=!1}static getIsActive(){return this.started&&!this.isPause}}v.started=!1,v.startTime=0,v.dwellTimeElapse=0,v.dwellTimeElapseV2=0,v.isPause=!1,v.isPauseV2=!1;class y{constructor(){this.filterNodeList=["script"],this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),this.processAddedSubtreeAndDispatchEvent(document.documentElement);const e=HTMLElement.prototype.attachShadow;if(!e)return;const t=this;HTMLElement.prototype.attachShadow=function(n){const i=e.call(this,n);return this.shadowRoot&&t.observe(this.shadowRoot),i}}observe(e){e!==window&&this.mutationObserver.observe(e,{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-t"]})}unobserve(e){}mutationCallback(e){setTimeout((()=>{this.processMutationRecord(e)}),10)}processMutationRecord(e){for(let t=0;t<e.length;t++){const n=e[t],i=n.addedNodes;i&&i.length>0?this.processMutatedNodes(Array.from(i)):"attributes"===n.type&&this.processMutatedNodes([n.target])}}processMutatedNodes(e){e&&e.forEach((e=>{(0,s.He)(e)?this.processAddedSubtreeAndDispatchEvent(e):e.nodeType!==Node.ELEMENT_NODE||this.filterNodeList.includes(e.tagName&&e.tagName.toLowerCase())||this.processAddedSubtreeAndDispatchEvent(e)}))}processAddedSubtreeAndDispatchEvent(e){(0,s.jT)(e)&&(0,s.t0)("telemetrynodeadded",e);const t=this.processSubtree(e);for(let e=0;e<t.length;e++)(0,s.t0)("telemetrynodeadded",t[e])}processSubtree(e){if(!e)return;let t;return t=(0,s.He)(e)?e.shadowRoot.querySelectorAll("[data-t]"):e.querySelectorAll("[data-t]"),t}}var S=n(60483);class C{constructor(e,t,n,i,r,o,a,c){this.eventIndexInternal=0,this.cookiesToCollect=["TOptOut","OptanonConsent","eupubconsent-v2","wid","app_wid"],this.qspToScrubbed=["tid","upn","q","user","username","email","login_hint"],this.contract=e,this.updateActivityId(t),this.anonCookieName=n,this.enableDwelltimeV2=c,this.buildNumber=i||"",this.afdMuidInternal=a,this.customProps={},this.tmplProps={},this.joinIdProps={},this.eventIndexInternal=0,this.browserHiddenOnce=!1,this.overrideScrollOffset=r,this.viewTypeCallback=o,s.kP&&document.addEventListener("visibilitychange",this.browserVisibilityCallback.bind(this))}get requestId(){return this.requestIdInternal}get combinedContract(){this.eventIndexInternal=this.eventIndexInternal+1,this.tmplString=this.generateStringFromKeyValueObject(this.tmplProps);const e=this.joinIdProps&&Object.keys(this.joinIdProps).length>0?JSON.stringify(this.joinIdProps):void 0,t=Object.keys(this.customProps).length>0?JSON.stringify(this.customProps):void 0;this.customString=t;try{const e=window;void 0!==e&&e.navigator&&void 0!==typeof e.navigator.globalPrivacyControl&&(this.globalPrivacyControl=e.navigator.globalPrivacyControl)}catch(e){}const n={page:Object.assign(Object.assign({},this.contract.page),{url:(0,s.Mm)((0,s.XW)(this.contract.page.url,this.contract.page.ocid),this.qspToScrubbed),referral:(0,s.Mm)(this.contract.page.referral||s.kP&&document.referrer,this.qspToScrubbed),content:this.contract.page.content?Object.assign({},this.contract.page.content):void 0,dwellTime:v.getDwellTime(),dwellTimeV2:this.getDwellTimeV2(),viewType:this.contract.page.viewType||this.viewTypeCallback&&this.viewTypeCallback()}),browser:Object.assign(Object.assign({},this.contract.browser),{width:(0,s.wi)(),height:(0,s.P6)(),screenSize:s.kP?[screen.width,screen.height].join("x"):"0x0",clientId:(0,s.i2)(this.activityIdInternal),scrollOffset:"function"==typeof this.overrideScrollOffset&&this.overrideScrollOffset()||(0,s.qC)(),anoncknm:this.anonCookieName,cookieEnabled:s.kP&&navigator.cookieEnabled,globalPrivacyControl:this.globalPrivacyControl,hiddenOnce:this.browserHiddenOnce,muid:(0,s.FL)()||void 0,cookies:(0,s.tV)(this.cookiesToCollect)||void 0}),flight:Object.assign(Object.assign({},this.contract.flight),{tmpl:this.tmplString}),integration:Object.assign(Object.assign({},this.contract.integration),{joinIds:e}),request:{activityId:this.activityIdInternal,requestId:this.requestIdInternal,afdMuid:this.afdMuidInternal},timestamp:+Date.now(),eventIndex:this.eventIndexInternal,sdk:{name:"peregrine",ver:"1.0.19",schemaVer:"1.0.19"},user:this.contract.user,locale:this.contract.locale,feed:this.contract.feed,gallery:this.contract.gallery,custom:this.customString,build:this.buildNumber},i=(0,s.F$)();i&&(n.browser.isWin11=i);const r=(0,s.uV)();return r&&(n.browser.isXBox=r),n}static mergeContract(e,t){if(!e||!t)return e||t;const n=Object.keys(t),i=Object.assign({},e);for(let e=0;e<n.length;e++){const r=n[e];i[r]=Object.assign(Object.assign({},i[r]),t[r])}return e.page&&e.page.content&&t.page&&t.page.content&&(i.page.content=Object.assign(Object.assign({},e.page.content),t.page.content)),e.user&&t.user&&(i.user=Object.assign(Object.assign({},e.user),t.user)),i}update(e,t=!1){e&&(t?this.contract=C.mergeContract(this.contract,e):this.updatedContract=C.mergeContract(this.updatedContract,e))}updateActivityId(e){this.activityIdInternal=e;const t=this.contract&&this.contract.page&&this.contract.page.isStatic&&"true"===this.contract.page.isStatic.toString().toLowerCase()?(0,s.pW)():e;this.updateRequestId(t)}getEventIndexInternal(){return this.eventIndexInternal}updateRequestId(e,t){this.eventIndexInternal=t||0,this.requestIdInternal=e||(0,s.pW)()}updateAfdMuid(e){this.afdMuidInternal=e||""}updateContract(){this.contract=C.mergeContract(this.contract,this.updatedContract),delete this.updatedContract}addOrUpdateCustomProperty(e,t){this.customProps[e]=t}removeCustomProperty(e){e&&delete this.customProps[e]}addOrUpdateTmplProperty(e,t){this.tmplProps[e]=t}removeTmplProperty(e){delete this.tmplProps[e]}addOrUpdateJoinIdProperty(e,t){this.joinIdProps[e]=t}getJoinId(e){return this.joinIdProps[e]}updatePageConfiguration(e){this.update({page:{config:e}})}get JoinIdProps(){return this.joinIdProps}browserVisibilityCallback(){(document.hidden||"hidden"===document.visibilityState)&&(this.browserHiddenOnce=!0)}generateStringFromKeyValueObject(e){const t=[];return e&&Object.keys(e).forEach((n=>{e[n]?t.push(n+":"+e[n]):t.push(n)})),t.length>0?t.join(";"):void 0}getDwellTimeV2(){if(this.enableDwelltimeV2)return v.getDwellTimeV2()}}var b=n(63165),w=n(3232),T=n(14590);class k{constructor(e){this.config=e}get disable(){return this.config.disable}set disable(e){this.config.disable=e}}var P=n(73932),A=n(13578);class I extends k{constructor(e){super(e),this.transporterReady=!1,setTimeout((()=>{this.collectorChannelPlugin=new w.Z,this.appInsightsCore=new b.Z;const t=new T.Z,n={populateBrowserInfo:!1,populateOperatingSystemInfo:!1,enableApplicationInsightsTrace:!1,enableDistributedTracing:!0,enableApplicationInsightsUser:!1,sessionRenewalMs:18e5,sessionExpirationMs:18e5,userConsentCookieName:"OptanonAlertBoxClosed"},i={instrumentationKey:e.key,channels:[[this.collectorChannelPlugin]],extensionConfig:[t],disablePageUnloadEvents:["visibilitychange"]},r=[];if(s.kP||(i.extensionConfig[this.collectorChannelPlugin.identifier]={httpXHROverride:{sendPOST:(t,n,i)=>{delete t.headers["cache-control"],delete t.headers["content-type"];const r={method:"POST",credentials:"include",body:t.data,headers:t.headers};t.data.length>64e3?this.sendRequest(e,t.urlString,r).then((e=>{n(e.status)})).catch((e=>{n(0,{})})):(this.sendRequest(e,t.urlString,Object.assign(Object.assign({},r),{keepalive:!0})).then((e=>{})).catch((e=>{})),n(200,{}))}}}),e.addNoResponse){const e={addNoResponse:!1};i.extensionConfig[this.collectorChannelPlugin.identifier]=e}if(s.kP&&(i.extensionConfig[t.identifier]=n,r.push(t)),e&&e.anonCookieName&&(i.anonCookieName=e.anonCookieName),e.endpoint&&(i.endpointUrl=e.endpoint),this.appInsightsCore.initialize(i,r),e&&e.enableTraceGenerator)try{P.U.getTraceInstance().setTraceObj(this.appInsightsCore)}catch(e){}this.transporterReady=!0}),100)}sendRequest(e,t,n){var i;return e.abortableFetch?e.abortableFetch(t,null!==(i=e.timeout)&&void 0!==i?i:1e3,n,void 0,void 0,void 0,!0):fetch(t,n)}transport(e,t=!0,n=0){!e||(0,A.Z)(e)||this.config.disable||(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()?this.appInsightsCore.track(e):n<50&&setTimeout((()=>this.transport(e,t,n+1)),200))}}class E extends k{constructor(e){super(e)}transport(e){if(!e||!this.config.endpoint||this.config.disable)return;const t=this.generateUrl(this.config.endpoint+"?",e);this.generatePixelBeacon(t)}generatePixelBeacon(e){(new Image).src=e.replace(/&amp;/gi,"&")}generateUrl(e,t){const n=[];let i=e;return Object.keys(t).forEach((e=>{let i=t[e];"object"==typeof i&&i&&(i=JSON.stringify(i)),n.push(this.encodeURIComponent(e)+"="+this.encodeURIComponent(i))})),i=e+n.join("&").replace(/%20/g,"+"),i}encodeURIComponent(e){return null!=e&&encodeURIComponent(e)||""}}let x=null,M={};class O extends k{constructor(e){super(e),x=e&&e.callbackData?e.callbackData.callback:null,M=e&&e.callbackData?e.callbackData.data:null}transport(e){if(!e||this.config.disable)return;let t;try{t=this.flattenObj(e),t.isCoreView=!0,t.platform="app",M&&(t["browser.muid"]=M)}catch(e){return void window.console.error("Error occured while flatterning telemetry payload :",e)}e.name&&x({type:e.eventType,name:e.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{oneds:t}})}flattenObj(e){const t={},n=(e,i)=>{Object.keys(e).forEach((r=>{let o="";o=""===i?`${r}`:`${i}.${r}`,"object"==typeof e[r]&&e[r]?n(e[r],o):t[this.formatKey(o)]=e[r]}))};return n(e,""),t}formatKey(e){return e?"eventType"===e?"type":e.startsWith("data.")?e.substring(5,e.length):e:e}}var L=n(82357);class D extends k{constructor(e){super(e)}transport(e){e&&!this.config.disable&&this.config.callback(e)}}var R=n(93048),F=n(7282),B=n(65004),N=n(24410);class U extends F.k{createEvent(e,t,n,i=0){return{name:this.getSuperAppOneDSEventName(g.id[e]),eventType:this.getSuperAppOneDSEventType(g.id[e]),data:t,baseType:g.id.Base,latency:n,sync:i}}createContentViewPayload(e,t,n){if(!t)return;const i=[];e.forEach((e=>{i.push(this.mapTelemetryObject(e))}));let o;(0,s.d5)()&&(o={content:{docHeight:(0,s.d5)()}});let a=null;try{a=JSON.stringify(i)}catch(e){a=i}const c=Object.assign(Object.assign(Object.assign({},t),o),{object:a,contentViewType:n.contentViewType});if(n.contentViewType===r.NS.Scroll&&(c.isMeaningfulScroll=n.isMeaningfulScroll),!(0,A.Z)(i)){return this.createEvent("ContentView",c,B.zU.RealTime)}}mapTelemetryObject(e){let t;const n=e&&e.content&&e.content.type;(n||e.behavior)&&(t=(0,N.Y)(n,e.behavior));const i=Object.assign({},e);return delete i.action,delete i.behavior,delete i.overrideId,i}getSuperAppOneDSEventType(e){switch(e){case g.id.PageView:return"Microsoft.Windows.MsnApps.PageView";case g.id.UserAction:return"Microsoft.Windows.MsnApps.PageAction";case g.id.AppError:return"Microsoft.Windows.MsnApps.Failure";case g.id.AppPerfTrace:return"Microsoft.Windows.MsnApps.ClientPerf";case g.id.ContentView:return"Microsoft.Windows.MsnApps.ContentView";case g.id.LoadTime:case g.id.Unload:return"Microsoft.Windows.MsnApps.AppLifeCycle";case g.id.VideoPlay:return"Microsoft.Windows.MsnApps.VideoPlay";case g.id.TraceInfo:return"Microsoft.Windows.MsnApps.TraceInfo";default:return null}}getSuperAppOneDSEventName(e){switch(e){case g.id.PageView:return"PAGE_VIEW_HP_WEBVIEW";case g.id.UserAction:return"PAGE_ACTION_HP_WEBVIEW_CLICK";case g.id.AppError:return"HP_WEBVIEW_APP_ERROR";case g.id.AdFeedback:return"PAGE_ACTION_HP_WEBVIEW_AD_FEEDBACK";case g.id.AdImpression:return"HP_WEBVIEW_AD_IMPRESSION";case g.id.AppPerfTrace:return"HP_WEBVIEW_APP_PERF_TRACE";case g.id.Base:return"PAGE_VIEW_HP_WEBVIEW_BASE";case g.id.ContentView:return"CONTENT_VIEW_HP_WEBVIEW";case g.id.Feedback:return"PAGE_ACTION_HP_WEBVIEW_FEEDBACK";case g.id.LoadTime:return"HP_WEBVIEW_LOAD_TIME";case g.id.ServerLog:return"HP_WEBVIEW_SERVER_LOG";case g.id.Unload:return"HP_WEBVIEW_UNLOAD";case g.id.VideoAdPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO_AD";case g.id.VideoPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO";case g.id.TraceInfo:return"DIAGNOSTIC_HP_WEBVIEW_TRACEINFO";default:return e}}}class ${constructor(){this.trackingSystems=[]}add(e){this.trackingSystems.push(e)}sendPageViewEvent(e,t=o.G.All){this.trackingSystems.forEach((n=>{if((t===o.G.All||t===n.type)&&n.mapper.createPageViewPayload){const t=n.mapper.createPageViewPayload(e);n.transporter.transport(t)}}))}sendContentViewEvent(e,t,n={contentViewType:r.NS.Partial}){this.trackingSystems.forEach((i=>{if(i.mapper.createContentViewPayload){const r=i.mapper.createContentViewPayload(e,t,n);i.transporter.transport(r)}}))}sendActionEvent(e,t,n,i){this.trackingSystems.forEach((r=>{if(r.mapper.createActionPayload){const o=r.mapper.createActionPayload(e,t,n,i);r.transporter.transport(o)}}))}sendEventPayload(e,t,n){this.trackingSystems.forEach((i=>{if(i.mapper.createCustomEventPayload){const r=i.mapper.createEventPayload(e,t,n);i.transporter.transport(r)}}))}sendCustomEvent(e,t,n){this.trackingSystems.forEach((i=>{if(i.mapper.createCustomEventPayload){const r=i.mapper.createCustomEventPayload(e,t,n);i.transporter.transport(r)}}))}disable(e=o.G.All){this.trackingSystems.forEach((t=>{e!==o.G.All&&e!==t.type||(t.transporter.disable=!0)}))}enable(e=o.G.All){this.trackingSystems.forEach((t=>{e!==o.G.All&&e!==t.type||(t.transporter.disable=!1)}))}}s.kP&&function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();class _{constructor(e){this.internalErrors=[],this.eventQueue=[],this.contentUpdateQueue=new Set,this.partialContentUpdateQueue=new Set,this.contentViewTriggerSource=r.NS.Load,this.contentViewTimeout=1e3,this.contentViewTimer=null,this.contentViewDelay=200,this.scheduledContentViewType=null,this.contentViewTimePassed=0,this.contentViewLastExecution=0,this.contentUpdateDebugQueue=new Set,this.intersectionObserverOptions={root:null,rootMargin:"0px",threshold:0},this.traceIdIndex=-1,this.maxScrollLoadTimeEvents=10,this.contentViewBeaconSent=!1,this.pageViewBeaconSent=!1,this.yieldElementsCount=20,this.batchSendScrollLoadTimeEvent=({scrollInputType:e,scrollDuration:t,endOfFeedTime:n,potentialMissedScrollInput:i,calculateAri:r,scrollInstanceData:o})=>{if(this.scrollLoadTimeEventsBatcher)this.scrollLoadTimeEventsBatcher.defer();else{const e=e=>{let t,n,i,r,a=0;if(e.forEach((e=>{null!=e.eoft&&(t=(t||0)+e.eoft),null!=e.ari&&e.duration&&(n=(n||0)+e.ari*e.duration),e.duration&&(a+=e.duration),e.inputType&&(i||(i={}),i[e.inputType]=(i[e.inputType]||0)+1),!r&&e.potentialMissedScrollInput&&(r=e.potentialMissedScrollInput)})),a<=0||null==t&&null==n)return;const s={scrollDuration:Math.round(a)};i&&(s.scrollInputs=i),r&&(s.potentialMissedScrollInput=r),null!=t&&(s.scrollEoft=Math.round(t/a*1e4)),null!=n&&(s.scrollAri=Math.round(n/a*1e4)),o&&o.length&&(s.scrollInstanceData=[...o],o.length=0),this.sendLoadTimeEvent({markers:s})};this.scrollLoadTimeEventsBatcher=function(e,t){const{autoFlushIntervalInMs:n,maxFlushes:i}=Object.assign({},t);let r,o=[],a=0;const s=()=>{(null==i||a<i)&&(a++,o.length&&(e(o),o=[]))},c=()=>{n&&(r&&clearTimeout(r),r=setTimeout(s,n))};return{enqueue:e=>{o.push(e),c()},flush:s,defer:c}}(e,{maxFlushes:this.maxScrollLoadTimeEvents}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.scrollLoadTimeEventsBatcher.flush()})),window.addEventListener("beforeunload",(()=>this.scrollLoadTimeEventsBatcher.flush())),this.subscribeToAppHidden&&this.subscribeToAppHidden((()=>this.scrollLoadTimeEventsBatcher.flush()))}const a=r&&r();this.scrollLoadTimeEventsBatcher.enqueue({eoft:n,ari:a,duration:t,inputType:e,potentialMissedScrollInput:i})};try{this.config=e,this.config.autoCaptureContentView=void 0===e.autoCaptureContentView||e.autoCaptureContentView,this.config.beacons=e.beacons||{},this.config.beacons.PageOutOfFocus=this.config.beacons.PageOutOfFocus||{},this.config.beacons.PageOutOfFocus.disable=void 0===this.config.beacons.PageOutOfFocus.disable||this.config.beacons.PageOutOfFocus.disable,s.kP&&(this.layoutEventManager=new y,this.layoutEventManager.observe(document.documentElement),this.clickEventManager=new f,e.hydrationPromise&&e.hydrationPromise instanceof Promise?this.config.hydrationPromise.then((()=>{this.clickEventManager.observe(window,this.config.disableContextMenu)})):this.clickEventManager.observe(window,this.config.disableContextMenu),window.addEventListener("beforeunload",this.unloadEventCallback.bind(this)),window.addEventListener("telemetrynodeadded",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&(m.u.addElement(e.detail.element),this.viewportIntersectionObserver.observe(e.detail.element))})),window.addEventListener("telemetrynodremoved",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&this.viewportIntersectionObserver.unobserve(e.detail.element)})),window.addEventListener("telemetryclick",this.clickEventHandler.bind(this)),window.addEventListener("focus",this.onFocusCallback.bind(this)),window.addEventListener("blur",this.onBlurCallback.bind(this))),this.trackingSystemList=new $,e.trackingSystems.forEach((t=>{t.transporterConfig.abortableFetch=e.abortableFetch,t.transporterConfig.anonCookieName=e.anonCookieName,t.transporterConfig.addNoResponse=e.addNoResponse,t.transporterConfig.enableTraceGenerator=e.enableTraceGenerator,t.transporterConfig.enableEventsBatching=e.enableEventsBatching,t.transporterConfig.enableCustomDiagnostic=e.enableCustomDiagnostic,t.transporterConfig.timeout=e.timeout,this.trackingSystemList.add(class{static getTrackingSystem(e,t){switch(e.type){case o.G.OneDS:return{transporter:new I(e.transporterConfig),mapper:new F.k(e.transporterConfig.enableEventsBatching,e.transporterConfig.enableCustomDiagnostic),type:e.type};case o.G.CTag:return{transporter:new E(e.transporterConfig),mapper:new L.P,type:e.type};case o.G.Comscore:return{transporter:new E(e.transporterConfig),mapper:new R.O,type:e.type};case o.G.Debug:return{transporter:new D(e.transporterConfig),mapper:e.mapper,type:e.type};case o.G.SuperApp:return{transporter:new O(e.transporterConfig),mapper:new U,type:e.type};default:return{transporter:new I(e.transporterConfig),mapper:new F.k,type:e.type}}}}.getTrackingSystem(t))}))}catch(e){this.internalErrors.push({message:"Error in Telemetry Lib constructor.",error:e})}}getTrackingSystemList(){return this.trackingSystemList}setContentViewTimeout(e){this.contentViewTimeout=e}resetContentViewTimeout(){this.contentViewTimeout=g.S8}renderTelemetryAttribute(e,t,n){return new S.D(e).render(t)}observeSingleElement(e){}observeElementTree(e){}observeShadowRoot(e){this.layoutEventManager.observe(e)}initPage(e,t,i,r){this.pageMetadata=new C(e,t,this.config.anonCookieName,i,this.config.overrideScrollOffset,this.config.viewTypeCallback,r,this.config.enableDwelltimeV2),s.kP&&("IntersectionObserver"in n.g&&(this.viewportIntersectionObserver=new IntersectionObserver(this.contentVisibilityCallback.bind(this),this.intersectionObserverOptions),this.contentVisibilityCallbackPromise=(0,s.xI)()),this.runContentVisibilityCallbacksPromise=this.config.deferContentViewIntersectionCallbacks?(0,s.xI)():(0,s.xI)(!0),this.viewportEventManager=new c(((e,t,n)=>{this.config.autoCaptureContentView&&(this.autoSendContentViewEvent({contentViewType:e,isMeaningfulScroll:t}),n&&(null!=n.endOfFeedTime||n.calculateAri)&&this.batchSendScrollLoadTimeEvent(n))}),this.config.overrideScrollOffset),window.addEventListener("telemetryviewportupdated",(e=>{e&&e.detail&&e.detail.mech&&(this.contentViewTriggerSource=e.detail.mech)})),this.viewportEventManager.initListener())}sendPageView(e=null,t=!1,n=null,i=o.G.All,a=!1){this.queueEvent("PageView",(()=>{this.config.beacons&&this.config.beacons.PageView&&this.config.beacons.PageView.disable||!this.pageMetadata||(this.config.resetAppErrorCounterOnPageView&&h(),e=e||{},(0,s.lB)(e),this.contentLoaded=!1,this.config.disableAutoCalculateDwellTime||v.reset(),this.pageMetadata.update(e),n?this.pageMetadata.updateActivityId(n):t||this.updateRequestId(),this.pageMetadata.updateContract(),this.viewportEventManager.resetViewportOffset(),this.updatePageMetadata({page:{isMonetized:!1}},!0),this.trackingSystemList.sendPageViewEvent(this.pageMetadata.combinedContract,i),this.pageViewBeaconSent=!0,!a||i!==o.G.All&&i!==o.G.Comscore||fetch(g.EE),t||(this.contentViewTriggerSource=r.NS.Load,setTimeout((()=>{this.autoSendContentViewEvent({contentViewType:r.NS.Load})}),1e3)),this.dispatchEvent(r.tM,{requestId:this.pageMetadata.requestId}))}))}getRequestId(){return this.pageMetadata.requestId}getCurrentEventIndex(){return this.pageMetadata.getEventIndexInternal()}updateRequestId(e,t){this.pageMetadata.updateRequestId(e,t)}disableTrackingSystem(e=o.G.All){this.trackingSystemList.disable(e)}enableTrackingSystem(e=o.G.All){this.trackingSystemList.enable(e)}disableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!0}enableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!1}disableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!0}enableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!1}updatePageConfiguration(...e){let t;e.forEach((e=>{t|=e})),this.pageMetadata.updatePageConfiguration(t)}updatePageMetadata(e,t=!1){e&&this.pageMetadata.update(e,t)}addOrUpdateCustomProperty(e,t){this.pageMetadata.addOrUpdateCustomProperty(e,t)}removeCustomProperty(e){this.pageMetadata.removeCustomProperty(e)}addOrUpdateJoinIdProperty(e,t){this.pageMetadata.addOrUpdateJoinIdProperty(e,t)}addOrUpdateTmplProperty(e,t){this.pageMetadata.addOrUpdateTmplProperty(e,t)}removeTmplProperty(e){this.pageMetadata.removeTmplProperty(e)}addOrUpdateTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");2===n.length?this.addOrUpdateTmplProperty(n[0],n[1]):1===n.length&&this.addOrUpdateTmplProperty(n[0])}}removeTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");n&&n.length&&this.pageMetadata.removeTmplProperty(n[0])}}addOrUpdateIdxId(e,t){if(e){t&&(delete this.pageMetadata.JoinIdProps[r.ob],this.traceIdIndex=-1);const n=this.pageMetadata.getJoinId(r.ob),i=n?`${n},${e}`:e;return this.pageMetadata.addOrUpdateJoinIdProperty(r.ob,i),this.traceIdIndex+=1,this.traceIdIndex}}sendActionEvent(e,t,n,i,o){this.queueEvent("UserAction",(()=>{if(!(this.config.beacons&&this.config.beacons.UserAction&&this.config.beacons.UserAction.disable)&&this.pageMetadata&&e){const c=e;m.u.updateLayout();const d=this.clickEventManager.getTelemetryClickTarget(e);let l;d&&(e=d),l=e.getAttribute&&e.getAttribute(r.qP),e.parentElement&&!l&&(l=(e=e.parentElement).getAttribute&&e.getAttribute(r.qP));let u=m.u.get(e);if(!u){const e=m.u.parseAttribute(l);e&&(u=new m.u(e))}if(this.pageMetadata&&u){o&&((0,s.Vr)(c,this.pageMetadata.contract.page.ocid),(0,s.Zf)(c,this.pageMetadata.contract.page.partnerTrackingCode),(0,s.uK)(c,this.pageMetadata.requestId),(0,s.wC)(c,this.pageMetadata.getEventIndexInternal()+1));const r=e.getAttribute("action")||e.form&&e.form.getAttribute("action"),d=t||u.contract.action,l=void 0===n?u.contract.behavior:n,p=u.contract.overrideDestinationUrl||(0,s.jv)(i)&&i||e.getAttribute("href")||r;if(p&&!p.startsWith("mailto:")?!0===u.contract.overrideEmailIdScrubbing||(0,s.uj)(p)?u.contract.destinationUrl=p:(u.contract.destinationUrl="",this.sendAppErrorEvent({id:54301,severity:0,message:"Email found in the destination url",pb:u.combinedContract})):u.contract.destinationUrl="",d===a.Aw.RightClick&&l===a.wu.ContextMenu&&!(u&&u.contract&&u.contract.destinationUrl))return;this.trackingSystemList.sendActionEvent(u.combinedContract,this.pageMetadata.combinedContract,null==d?a.Aw.Click:d,null==l?a.wu.Navigate:l),u.contract&&u.contract.triggerPageView&&l===a.wu.Navigate&&this.sendPageView(null,!1)}}}))}scheduleContentViewEvent(e=r.NS.Partial,t){if(!s.kP)return;const n=(new Date).getTime();this.contentViewTimePassed=n-this.contentViewLastExecution,this.contentViewTimePassed<=this.contentViewDelay&&e!==r.NS.Partial||(this.contentViewLastExecution=n,this.contentViewTimer&&this.scheduledContentViewType===e&&window.clearTimeout(this.contentViewTimer),this.contentViewTimer=window.setTimeout((()=>this.autoSendContentViewEvent({contentViewType:e})),t||this.contentViewTimeout),this.scheduledContentViewType=e)}sendContentViewEvent(e,t=r.NS.Partial,n=!0){this.queueEvent("ContentView",(()=>{if(this.config.beacons&&this.config.beacons.ContentView&&this.config.beacons.ContentView.disable||!this.pageMetadata)return;m.u.updateLayout();const i=(0,s.Ux)(e),r=[];if(i&&i.length>0){for(let e=0;e<i.length;e++){const t=i[e],o=m.u.get(t);o&&(!n||this.contentUpdateQueue.has(t)||this.partialContentUpdateQueue.has(t))&&(this.setIsMonetizedFlag(o.combinedContract),r.push(o.combinedContract))}this.trackingSystemList.sendContentViewEvent(r,this.pageMetadata.combinedContract,{contentViewType:t})}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}))}sendAppErrorEvent(e,t=!0){if(!this.config.ignoreAppErrorCounter&&function(e){if(!e||!e.id)return!0;p.has(e.id)||p.set(e.id,0);const t=p.get(e.id)+1;return p.set(e.id,t),3===e.severity&&t>25||3!==e.severity&&t>10}(e))return console.error(JSON.stringify(e)),void console.error(`App errors throttled for Id: ${e.id}`);if(!function(e){const{pb:t,severity:n=1}=e;return 3===n||(!(t&&t.shouldSupressWarnings)||1!==n)}(e))return console.error(JSON.stringify(e)),void console.error(`This App error Id: ${e.id} will not be sent!`);if(!(this.config.beacons&&this.config.beacons.AppError&&this.config.beacons.AppError.disable)&&this.pageMetadata)if(function(e){const{pb:t,severity:n=1}=e;return 3!==n&&!(!t||!t.shouldDelayUntilLoadTime)}(e)){const n=Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{delayed:1})});u.then((()=>{this.queueAppErrorEvent(n,t)}))}else this.queueAppErrorEvent(e,t)}sendLoadTimeEvent(e){this.sendEvent("LoadTime",e),l()}sendFeedbackEvent(e){this.sendEvent("Feedback",e)}sendAdImpressionEvent(e){this.sendEvent("AdImpression",e)}sendAdFeedbackEvent(e){this.sendEvent("AdFeedback",e)}sendVideoPlayEvent(e,t,n=!1){if(this.config.beacons&&this.config.beacons.VideoPlay&&this.config.beacons.VideoPlay.disable)return;const i=n?"VideoAdPlay":"VideoPlay";t&&m.u.updateLayout();const r=t?m.u.get(t):void 0,o=r?r.combinedContract:{};if(e){const t=Object.assign(Object.assign({},o),e);this.trackingSystemList.sendEventPayload(i,{object:t},this.pageMetadata.combinedContract)}else t&&this.pageMetadata&&r&&this.trackingSystemList.sendEventPayload(i,{object:o},this.pageMetadata.combinedContract)}sendGamePlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.GamePlay&&this.config.beacons.GamePlay.disable))if(e)this.trackingSystemList.sendEventPayload("GamePlay",{object:e},this.pageMetadata.combinedContract);else if(t){m.u.updateLayout();const e=m.u.get(t);this.pageMetadata&&e&&this.trackingSystemList.sendEventPayload("GamePlay",{object:e.combinedContract},this.pageMetadata.combinedContract)}}sendAudioPlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.AudioPlay&&this.config.beacons.AudioPlay.disable))if(e)this.trackingSystemList.sendEventPayload("AudioPlay",{object:e},this.pageMetadata.combinedContract);else if(t){m.u.updateLayout();const e=m.u.get(t);this.pageMetadata&&e&&this.trackingSystemList.sendEventPayload("AudioPlay",{object:e.combinedContract},this.pageMetadata.combinedContract)}}sendServerLogEvent(e){this.sendEvent("ServerLog",e)}sendAppPerfTraceEvent(e){this.sendEvent("AppPerfTrace",e)}sendAuthEvent(e){this.sendEvent("Auth",e)}sendHeartBeatEvent(e){this.sendEvent("HeartBeat",e)}sendClientLogEvent(e){this.config.enableSendClientLogEvent&&this.sendEvent("ClientLog",e)}sendPageOutOfFocusEvent(e){this.queueEvent("PageOutOfFocus",(()=>{this.config.beacons&&this.config.beacons.PageOutOfFocus&&this.config.beacons.PageOutOfFocus.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("PageOutOfFocus",null,this.pageMetadata.combinedContract)}))}sendUnloadEvent(){this.queueEvent("Unload",(()=>{this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("Unload",null,this.pageMetadata.combinedContract)}))}sendTraceInfoEvent(e){this.queueEvent("TraceInfo",(()=>{this.config.beacons&&this.config.beacons.TraceInfo&&this.config.beacons.TraceInfo.disable||!this.pageMetadata||this.sendEvent("TraceInfo",e)}))}getPageMetadata(){return this.pageMetadata}flush(e=!0,t,n){const i=e=>!(t&&t!==e.eventType||n&&n===e.eventType);for(const e of this.eventQueue)"function"==typeof e.callback&&i(e)&&e.callback();this.eventQueue=this.eventQueue.filter((e=>!i(e))),this.config.useEventQueue=!e}empty(){this.eventQueue=[]}enableEventQueue(){this.config.useEventQueue=!0}disableEventQueue(){this.config.useEventQueue=!1}addEventTypeToForceQueueList(e){this.config.forceUseEventQueueList||(this.config.forceUseEventQueueList=[]),this.config.forceUseEventQueueList.push(e)}removeEventTypeFromForceQueueList(e){this.config.forceUseEventQueueList&&(this.config.forceUseEventQueueList=this.config.forceUseEventQueueList.filter((t=>t!==e)))}startDwellTime(){v.start()}pauseDwellTime(){v.pause()}pauseDwellTimeV2(){v.pauseV2()}resetDwellTime(){v.reset()}isDwellTimeActive(){return v.getIsActive()}setDwellTime(e,t){v.setDwellTime(e,t)}getDwellTime(){return v.getDwellTime()}clickEventHandler(e){if(e&&e.detail&&e.detail.element&&this.pageMetadata){const t=e.detail.element;this.sendActionEvent(t,e.detail.action,e.detail.behavior,void 0,!0),t.attributes&&t.attributes.href&&t.attributes.href.value&&t.attributes.href.value.startsWith&&"function"==typeof t.attributes.href.value.startsWith&&t.attributes.href.value.startsWith("mailto:")&&(this.ignoreUnload=!0)}}queueAppErrorEvent(e,t=!0){this.queueEvent("AppError",(()=>{if(this.trackingSystemList.sendCustomEvent("AppError",e,this.pageMetadata.combinedContract),t){const t=new Date+": "+ +new Date+" "+JSON.stringify(e);console.error(t)}this.dispatchEvent(r.tW,{error:e})}))}unloadEventCallback(){this.ignoreAutoUnloadCallback||this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||(this.pageMetadata&&!this.ignoreUnload&&this.sendUnloadEvent(),this.ignoreUnload=!1)}setIsMonetizedFlag(e){e&&e.isMonetized&&this.updatePageMetadata({page:{isMonetized:!0}},!0)}autoSendContentViewEvent(e){this.queueEvent("ContentView",(()=>{if(this.pageMetadata){let t;if(m.u.updateLayout(),e.contentViewType!==r.NS.Partial&&this.contentUpdateQueue&&this.contentUpdateQueue.size>0?t=this.contentUpdateQueue:this.partialContentUpdateQueue&&this.partialContentUpdateQueue.size>0&&(t=this.partialContentUpdateQueue),t){const n=[...t].map((t=>{const n=m.u.get(t);if(n&&(e.contentViewType!==r.NS.Partial||!n.isCaptured))return n.isCaptured=!0,this.setIsMonetizedFlag(n.combinedContract),n.combinedContract})).filter((e=>e));this.trackingSystemList.sendContentViewEvent(n,this.pageMetadata.combinedContract,e),this.contentViewBeaconSent=!0,this.partialContentUpdateQueue.clear(),this.contentViewTriggerSource=null}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}}))}runContentVisibilityCallbacks(){var e;null===(e=this.runContentVisibilityCallbacksPromise)||void 0===e||e.resolve()}yieldAsync(){return new Promise((e=>setTimeout(e,0)))}contentVisibilityCallback(e){var t;const n=t=>(0,i.mG)(this,void 0,void 0,(function*(){for(let n=0;n<e.length;n++){t&&n>0&&n%this.yieldElementsCount==0&&(yield this.yieldAsync());const i=e[n];i.isIntersecting?(this.contentUpdateQueue.add(i.target),this.contentViewTriggerSource||this.partialContentUpdateQueue.add(i.target)):(this.contentUpdateQueue.delete(i.target),this.partialContentUpdateQueue.delete(i.target))}!this.contentViewTriggerSource&&this.config.autoCaptureContentView&&this.scheduleContentViewEvent(r.NS.Partial,500),this.contentUpdateQueue.size&&this.contentVisibilityCallbackPromise&&this.contentVisibilityCallbackPromise.resolve()}));this.config.deferContentViewIntersectionCallbacks&&(null===(t=this.runContentVisibilityCallbacksPromise)||void 0===t?void 0:t.promise)?this.runContentVisibilityCallbacksPromise.promise.then((()=>n(!0))):n()}sendEvent(e,t){this.queueEvent(e,(()=>{this.config.beacons&&this.config.beacons[e]&&this.config.beacons[e].disable||!this.pageMetadata||this.trackingSystemList.sendCustomEvent(e,t,this.pageMetadata.combinedContract)}))}queueEvent(e,t){this.config.useEventQueue||this.config.forceUseEventQueueList&&this.config.forceUseEventQueueList.includes(e)?this.eventQueue.push({eventType:e,callback:t}):t()}dispatchEvent(e,t){s.kP&&setTimeout((()=>dispatchEvent(new CustomEvent(e,{detail:t}))),0)}startAutoDwellTime(){document.hasFocus()&&!this.config.disableAutoCalculateDwellTime&&(v.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStart","true"))}onFocusCallback(){this.contentLoaded&&!this.config.disableAutoCalculateDwellTime&&(v.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeFocusStart","true"))}waitForContentVisibilityObserverInit(){return this.contentVisibilityCallbackPromise?this.contentVisibilityCallbackPromise.promise:Promise.resolve()}onBlurCallback(){this.sendPageOutOfFocusEvent({}),this.config.disableAutoCalculateDwellTime||(v.pause(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimePause","true"))}isEventInQueue(e){return this.eventQueue.some((t=>t.eventType===e))}isContentViewBeaconSent(){return this.contentViewBeaconSent}isPageViewBeaconSent(){return this.pageViewBeaconSent}initScrollPerformanceTrackers(e){if(!this.viewportEventManager)return;this.subscribeToAppHidden=null==e?void 0:e.subscribeToAppHidden;n.e("scrollPerfMetricTrackers").then(n.bind(n,92099)).then((({createEndOfFeedTimeTracker:t,createAppResponsivenessTracker:n,createScrollInputTracker:i})=>{const r=t({scrollContainer:null==e?void 0:e.scrollContainer,scrollEventName:null==e?void 0:e.scrollEventName}),o=n(),a=(null==e?void 0:e.enableScrollInputTracking)&&i&&i(null==e?void 0:e.enableMissedScrollTracking,null==e?void 0:e.enableSectionScrollTracking);this.viewportEventManager.initScrollPerformanceTrackers({endOfFeedTimeTracker:r,appResponsivenessTracker:o,scrollInputTracker:a})}))}}},60483:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var i=n(75559),r=n(98146);class o{constructor(e,t,n){this.contract=e}static render(e){const t=r.v.compress(e);return{[i.qP]:JSON.stringify(t)}}addChild(e){return new o(e,this)}addOrUpdateChild(e,t){return t?(t.contract=e,t):new o(e,this)}updateContract(e){this.contract=e}render(e){return o.render(this.contract)}getMetadataTag(){return JSON.stringify(this.getMetadata())}getMetadata(){return r.v.compress(this.contract)}}},73932:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var i=n(39860),r=n(65135);class o{constructor(){this.getSpanId=(e=!1)=>{if(o.traceCtrxObj&&!e)return o.traceCtrxObj.getSpanId();const t=(0,i.DO)().substring(0,16);return(0,r.dK)().then((()=>{o.setSpanIdFunc(t)}),(()=>{})),t},this.getTraceId=(e=!1)=>{if(o.traceCtrxObj&&!e)return o.traceCtrxObj.getTraceId();const t=(0,i.DO)();return(0,r.dK)().then((()=>{o.setTraceIdFunc(t)}),(()=>{})),t}}setTraceObj(e){o.traceCtrxObj=e&&e.getTraceCtx()}}o.getTraceInstance=()=>(o.traceInstance||(o.traceInstance=new o),o.traceInstance),o.setSpanIdFunc=e=>{const t=e||(0,i.DO)().substring(0,16);try{o.traceCtrxObj.setSpanId(t)}catch(e){}},o.setTraceIdFunc=e=>{const t=e||(0,i.DO)();try{o.traceCtrxObj.setTraceId(t)}catch(e){}}},65969:function(e,t,n){"use strict";n.d(t,{EE:function(){return i},S8:function(){return o},id:function(){return r}});const i="https://www.msn.com/PV.xml",r={UserAction:"MS.News.Web.PageAction",PageView:"MS.News.Web.PageView",ContentView:"MS.News.Web.ContentView",AppError:"MS.News.Web.AppError",AppErrorDiag:"MS.News.Web.AppErrorDiag",LoadTime:"MS.News.Web.LoadTime",LoadTimeDiag:"MS.News.Web.LoadTimeDiag",Unload:"MS.News.Web.Unload",Base:"MS.News.Web.Base",Feedback:"MS.News.Web.Feedback",AdImpression:"MS.News.Web.AdImpression",AdFeedback:"MS.News.Web.AdFeedback",GamePlay:"MS.News.Web.GamePlay",VideoPlay:"MS.News.Web.VideoPlay",VideoAdPlay:"MS.News.Web.VideoAdPlay",AudioPlay:"MS.News.Web.AudioPlay",ServerLog:"MS.News.Web.ServerLog",AppPerfTrace:"MS.News.Web.AppPerfTrace",Auth:"MS.News.Web.Auth",HeartBeat:"MS.News.Web.HeartBeat",ClientLog:"MS.News.Web.ClientLog",PageOutOfFocus:"MS.News.Web.PageOutOfFocus",TraceInfo:"MS.News.Web.TraceInfo"},o=1e3},98429:function(e,t,n){"use strict";n.d(t,{F$:function(){return U},FL:function(){return v},He:function(){return R},Mm:function(){return H},P6:function(){return g},Ux:function(){return L},Vr:function(){return b},XW:function(){return C},Xn:function(){return p},Zf:function(){return w},d5:function(){return f},i2:function(){return y},jT:function(){return F},jv:function(){return B},kP:function(){return S},lB:function(){return j},pE:function(){return M},pW:function(){return u},qC:function(){return m},t0:function(){return N},tH:function(){return A},tV:function(){return _},uK:function(){return T},uV:function(){return $},uj:function(){return W},wC:function(){return k},wi:function(){return h},xI:function(){return G}});let i,r,o,a,s,c,d=(new Date).getTime();try{s="sessionStorage"in window&&window.sessionStorage}catch(e){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{c=e.platformVersion}))}catch(e){}function l(e){const t=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===e?t:7&t|8).toString(16)}function u(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,l)}function p(){return Date.now()}function h(){return S&&(window.outerWidth||document.documentElement.clientWidth)}function g(){return S&&(window.outerHeight||document.documentElement.clientHeight)}function m(){return S&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0}function f(){return S&&Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function v(){const e="undefined"!=typeof document&&document.cookie;if(!S&&!e)return"";const t=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(e);return t&&t.length>1?t[1]:""}function y(e){return S?(i||""===i||(i=v()||e||""),i):v()}const S=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function C(e,t){return function(e,t){if(t&&e){const n=t.toLowerCase();if(-1==n.indexOf("?ocid=")&&-1==n.indexOf("&ocid=")){const n=-1==t.indexOf("?")?"?":"&";t=`${t}${n}ocid=${encodeURIComponent(e)}`}}return t}(t,e)}function b(e,t){P(e,"ocid",t)}function w(e,t){let n=t;try{const e=new URL(location.href);n=e.searchParams.get("pc")||e.searchParams.get("PC")||e.searchParams.get("pC")||e.searchParams.get("Pc")||n}catch(e){}P(e,"pc",n||t)}function T(e,t){P(e,"cvid",t,!0)}function k(e,t){P(e,"ei",t.toString(),!0)}function P(e,t,n,i=!1){if(!e||!t)return;let r=e;if("a"!==r.nodeName&&r.closest("a")&&(r=r.closest("a")),!r)return;const{href:o}=r;if(o)try{const e=new URL(o);(!e.searchParams.get(t)||i)&&n&&(e.host.includes("msn.com")||e.host.includes("msn.cn")||e.host.includes("bing.com"))&&(e.searchParams.set(t,n),r.href=e.href)}catch(e){}}function A(e,t=""){if(!e)return;const n=e.getAttribute("data-hl")||"";if(!t&&!n){const n=e.querySelector("h4")||e.querySelector("h3"),i=function(e,t,n=2){if(!t)return;let i=t,r=0;for(;i&&i!==e;i=i.parentElement,r++)if(r>n)return;return r}(e,n);n&&i&&i<=2&&(t=E(n))}const i=e instanceof HTMLAnchorElement?e.querySelector(".title"):"";!t&&i&&(t=E(i));const r=e instanceof HTMLAnchorElement?e.getAttribute("title"):"";!t&&r&&(t=r);const o=e instanceof HTMLAnchorElement?e.getAttribute("aria-lable"):"";return!t&&o&&(t=o),"string"!=typeof t&&(t=n||e.getAttribute("data-piitxt")||("FORM"==e.nodeName?"[form submit]":e.getAttribute("title")||x(e,"title","img")||E(e)||e.getAttribute("alt")||x(e,"alt")||"")),null!=t.trim&&(t=t.trim()),t}const I=/(^\s+)|(\s+$)/gm;function E(e){return(e&&(e.textContent||e.innerText)||"").replace(I,"")}function x(e,t,n=""){const i=e.children||[];let r,o=0;for(t=t||"alt";o<i.length;o++)if(r=i[o].getAttribute(t)||x(i[o],t,n),r&&n!=i[o].localName)return r}function M(e,t){if(!e||e===document||e===window)return null;const n=e.closest(t);if(n)return n;const i=O(e);return i&&i.host?M(i.host,t):void 0}function O(e){return e.parentNode?O(e.parentNode):e}function L(e){const t=[];if(!e)return;let n;return n=R(e)?e.shadowRoot.querySelectorAll("*"):e.querySelectorAll("*"),D(Array.from(n),t),t}function D(e,t=[]){for(let n=0;n<e.length;n++){const i=e[n];F(i)&&t.push(i),R(i)&&D(Array.from(i.shadowRoot.querySelectorAll("*")),t)}}function R(e){return!!e.shadowRoot}function F(e){return e.hasAttribute&&e.hasAttribute("data-t")}function B(e){try{new URL(e)}catch(e){return!1}return!0}function N(e,t){const n=new CustomEvent(e,{detail:{element:t}});dispatchEvent(n)}function U(){let e=!1;if(S)try{const t=c;if(t&&parseInt(t.split(".")[0])>=11&&(e=!0),!e&&window&&window.external&&window.external.getHostEnvironmentValue("os-build")){const t=JSON.parse(window.external.getHostEnvironmentValue("os-build"))["os-build"].split(".");(t[0]>10||10===t[0]&&t[1]>0||t[2]>=22e3)&&(e=!0)}}catch(e){}return o=!0===e||null,o}function $(){let e=!1;const t="os-sku";if(S)try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const n=JSON.parse(window.external.getHostEnvironmentValue(t));e=n&&"192"===n[t]}}catch(e){}return a=!0===e||null,a}function _(e){if(!r&&""!==r&&S)try{if(!e||0===e.length)return;const t=document.cookie;if(t){let n="";e.forEach((e=>{const i=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t),r=i&&i.length>1?i[1]:"";""!==r&&(n+=e+"="+r+";")})),r=n}}catch(e){}return r}function H(e,t){if(!e||""===e)return"";let n=!1,i=null;if(S)try{if(i=new URL(e),!t||0===t.length)return;t.forEach((e=>{i.searchParams.has(e)&&(n=!0),i.searchParams.delete(e)}))}catch(t){return e}return n?i.toString():e}function W(e){if(!e||""===e)return"";let t=null,n=!1;if(S)try{t=new URL(e);const i=new RegExp(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi);t.searchParams.forEach((function(e,t){e.match(i)&&(n=!0)}))}catch(e){}return n?"":e}function j(e){const t="sign-in-refreshed-page";S&&s&&s.getItem(t)?(s.removeItem(t),(e.page=e.page||{}).isAutoRefresh=!0):function(e){return!e||!e.page||!0!==e.page.isAutoRefresh&&!1!==e.page.isAutoRefresh}(e)&&((e.page=e.page||{}).isAutoRefresh=!1)}function G(e=!1){let t;const n=new Promise((e=>{t=e}));return e&&t(),{promise:n,resolve:t}}},24410:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var i=n(38156);function r(e,t){const n=function(e){switch(e){case i.uH.AppStore:return 17;case i.uH.StructuredData:return 16;case i.uH.CmsPromotions:return 19;case i.uH.MicrosoftWebStore:return 20;case i.uH.XboxStore:return 21;case i.uH.OfficeStore:return 22;case i.uH.PartnerLinks:return 24;case i.uH.SponsoredContent:return 25;default:return 0}}(e)||function(e){switch(e){case i.wu.Navigate:return 14;case i.wu.Follow:return 26;case i.wu.Unfollow:return 27;case i.wu.More:return 28;case i.wu.Close:return 36;case i.wu.Share:return 37;case i.wu.Like:return 38;case i.wu.Dislike:return 39;case i.wu.Unlike:return 40;case i.wu.Undislike:return 41;case i.wu.Mute:return 42;case i.wu.Unmute:return 43;case i.wu.Cancel:return 44;case i.wu.Manage:return 45;default:return 0}}(t);if(0!==n)return n;if(e===i.uH.App){if(t===i.wu.Install)return 23;if(t===i.wu.Launch)return 18}return 0}},32758:function(e,t,n){"use strict";n.d(t,{D:function(){return m}});var i=n(65135),r=n(3900),o=n(10877),a=n(987),s=n(62661),c=n(37574),d=n(53076),l=n(63439),u=n(93450);const p="tp";var h=n(33379),g=n(67893);class m extends l.e{constructor(e,t,n,r,o,a,l){super(e,t,n,r,o,a,l);const p=(0,s.l)(),f=p.getSelectedPivot();if(f&&f.telemetryPivotCategory){let e;e.page.pivot=f.telemetryPivotCategory,i.M0.updatePageMetadata(e)}if((0,h.N)()){const e=u._.getInstance().rootReducer.connector(d.z.SharedState);e&&e.getCurrentState().useHistory?(0,g.lY)().addSwitchListener((e=>{window.requestAnimationFrame((()=>m.onPivotSwitch(e)))}),c.I.Telemetry):p.addSwitchListener(m.onPivotSwitch,c.I.Telemetry)}}static onPivotSwitch(e){let t;const n=e.newSelection;if(n&&(i.M0.addOrUpdateCustomProperty(p,n.display),t={feed:{id:n.pivotId,name:n.display,type:"xfeed"===n.telemetryPageName?"category filter":void 0},page:{content:{topic:n.display},pivot:""}},n.telemetryPivotCategory&&(t.page.pivot=n.telemetryPivotCategory),n.telemetryVertical&&(t.page.content.vertical=n.telemetryVertical),n.telemetryPageType&&(t.page.type=n.telemetryPageType),"gaming"===n.pivotId&&(t.feed.id=`gaming/${(0,r.ll)()}`),"following"===n.pivotId&&(t.feed.id=`following/${(0,r.ll)()}`),i.M0.updatePageMetadata(t)),e.oldSelection||m.isPivotManagerSwitched){if(m.isPivotManagerSwitched=!1,n.telemetryPageName)t.page.name=n.telemetryPageName;else if(n.pivotId)switch(n.pivotId){case"productivityHub":t.page.name="entnewshp";break;case"myfeed":case"myFeed":t.page.name="default";break;case"myInterests":t.page.name="cinterests";break;case"gaming":t.page.name="gaming";break;case"play":t.page.name="play";break;case"navigationPage":t.page.name="navigationPage";break;case"following":t.page.name="following",t.feed.id=`following/${o.uD.Manual}`}"gaming"===n.pivotId&&(t.feed.id=`gaming/${o.uD.Manual}`,t.page.isCorePV=!0);const e="IsGamer",r="IsXboxGamer",s="IsPCGamer",c=(0,a.$o)().getItem("userType");return i.M0.addOrUpdateTmplProperty(e,c&&c.includes(e)?"1":"0"),i.M0.addOrUpdateTmplProperty(r,c&&c.includes(r)?"1":"0"),i.M0.addOrUpdateTmplProperty(s,c&&c.includes(s)?"1":"0"),i.M0.updateRequestId(),i.M0.updatePageMetadata(t),void i.M0.sendPageView(null,!0)}}}m.isPivotManagerSwitched=!1},72467:function(e,t,n){"use strict";n.r(t),n.d(t,{TelemetryDataConnector:function(){return i.D},TelemetryDataReducer:function(){return r},ToolingInfo:function(){return o}});var i=n(32758);class r{reduce(e,t){return{}}}const o={experienceConfigSchema:{}}},37180:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var i=n(53899),r=n(38156);function o(e,t){let n=r.hP.SearchBox;switch(e.selectedFeedDisplaySetting){case"always":n|=r.hP.ContentFeed;break;case"headingsonly":n|=r.hP.HeadingsOnly;break;case"onscroll":n|=r.hP.ContentBelowTheFold;break;case"peek":n|=r.hP.Peek;break;default:n|=r.hP.Empty}return e.imageOfTheDayEnabled&&(n|=r.hP.BingImage),e.greetingEnabled&&t&&(n|=r.hP.GreetingEnabled),e.selectedQuickLinksDisplaySetting!==i.Z3.off&&(n|=r.hP.TopSites),e.currentLayout===i.nP.custom&&(n|=r.hP.CustomModeOption),n}},86088:function(e,t,n){"use strict";n.r(t),n.d(t,{TelemetryDataEdgeChromiumConnector:function(){return b},TelemetryDataEdgeChromiumReducer:function(){return w},ToolingInfo:function(){return T},edgeNextGetPageConfiguration:function(){return p.y}});var i=n(33940),r=n(7029),o=n(63439),a=n(82423),s=n(55027),c=n(45506),d=n(56692),l=n(44979),u=n(35385),p=n(37180),h=n(75384),g=n(32717),m=n(53076),f=n(65135),v=n(14989),y=n(16614),S=n(67462),C=n(33379);class b extends o.e{constructor(e,t,n,i,o,a,s){super(e,t,n,i,o,a,s),this.fireTelemetryBeacon=!0,this.isMSASignedin=!1,this.edgeChromiumPgltCookieName="pglt",this.cookieExpireInDays=182;const c=new URLSearchParams(window.location.search);this.firstLaunchParam=c.get("firstlaunch"),(0,C.N)()&&(this.setupLayoutTelemetry(),this.getPrimaryAccountInfoAsync().then((e=>{this.isMSASignedin=e.accountType===r.l.MSA})))}getLayoutStateAsync(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,a.oU)(m.z.ChromiumPageSettings);return yield e.getLayoutStateAsync()}))}getPrimaryAccountInfoAsync(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=yield(0,a.oU)(m.z.ChromiumPageSettings);return yield e.getPrimaryAccountInfoAsync()}))}pageSettingTelemetry(e){if("visible"===document.visibilityState){const t=(0,p.y)(e,this.isMSASignedin);f.M0.updatePageConfiguration(t),this.setPgltCookie(String(t)),this.stampTmpl(e)}}initializeTelemetry(e){const t=f.M0.getPageMetadata();if(t&&t.contract&&t.contract.page){const t=(0,p.y)(e,this.isMSASignedin);f.M0.updatePageConfiguration(t),this.setPgltCookie(String(t)),this.stampTmpl(e)}const n=document.createEvent("Event");n.initEvent("trackvaluesupdated",!0,!0),document.dispatchEvent(n)}setupLayoutTelemetry(){this.getLayoutStateAsync().then((e=>{this.currentLayoutState=e,this.initializeTelemetry(e)})),u.J.updateLayout.registerObserver((e=>{const t=e&&e.params;!t||t.length<1||this.pageSettingTelemetry(t[0])})),s.I.layoutAnimationComplete.registerObserver((()=>{this.getLayoutStateAsync().then((e=>{if("1"===this.firstLaunchParam){if(!this.fireTelemetryBeacon)return;this.fireTelemetryBeacon=!1}this.currentLayoutState.backgroundImageTypePolicy===e.backgroundImageTypePolicy&&this.currentLayoutState.currentBackgroundImageType===e.currentBackgroundImageType&&this.currentLayoutState.currentLayout===e.currentLayout&&(0,y.Z)(this.currentLayoutState.customBackgroundImageInfo,e.customBackgroundImageInfo)&&this.currentLayoutState.greetingEnabled===e.greetingEnabled&&this.currentLayoutState.imageOfTheDayEnabled===e.imageOfTheDayEnabled&&this.currentLayoutState.market===e.market&&this.currentLayoutState.quickLinksEnabled===e.quickLinksEnabled&&this.currentLayoutState.selectedFeedDisplaySetting===e.selectedFeedDisplaySetting||(this.currentLayoutState=e,(0,h.TR)()||(0,g.eC)().then((()=>{f.M0.sendPageView(null,!1)})))}))}))}setPgltCookie(e){let t=this.edgeChromiumPgltCookieName;const{apptype:n,pagetype:i}=c.Al.ClientSettings?c.Al.ClientSettings:{apptype:void 0,pagetype:void 0};n&&i&&(t+="-"+c.Al.ClientSettings.apptype+"-"+c.Al.ClientSettings.pagetype),(0,S.sq)(t,e,this.cookieExpireInDays,d.jG.HostPage.topDomain)}stampTmpl(e){if(this.stampHardware(),!v.SX)return;const t=(0,l.Nd)(this.requestContext.data.innerWidth,"innerWidth"),n=(0,l.Nd)(this.requestContext.data.outerWidth,"outerWidth");if(!t||!n)return;let i=0;const r=!(0,l.Nd)(this.requestContext.data.screenTop,"screenTop")&&!(0,l.Nd)(this.requestContext.data.screenY,"screenY")?0:14;e.verticalTabsOpened&&(i=e.verticalTabsCollapsed?48:256);const o=Math.round(1e4*(n-r-i)/innerWidth)/1e4;if(!o)return;const a=Math.round((n-r)/o);if(a&&(f.M0.addOrUpdateTmplProperty("edge.zoom",o+""),f.M0.addOrUpdateTmplProperty("edge_ntp.actualWidth",t+""),f.M0.addOrUpdateTmplProperty("edge_ntp.expectedWidth",a+""),e.verticalTabsOpened)){if(f.M0.addOrUpdateTmplProperty("vertical_tabs.opened","1"),f.M0.addOrUpdateTmplProperty("vertical_tabs.collapsed",e.verticalTabsCollapsed?"1":"0"),a<=t)return;let n=1,i=1;for(let e=v.SX.length-1;e>1;e--){const r=v.SX[e].minViewportWidthPx;if(!r||1!=n&&1!=i)break;1==n&&a>r&&(n=e),1==i&&t>r&&(i=e)}n>i&&(f.M0.addOrUpdateTmplProperty("vertical_tabs.eligiblecol",n+1+""),f.M0.addOrUpdateTmplProperty("vertical_tabs.showncol",i+1+""))}}stampHardware(){if(window&&window.navigator){const e=window.navigator;e.deviceMemory&&f.M0.addOrUpdateTmplProperty("edge.mem",e.deviceMemory+""),e.hardwareConcurrency&&f.M0.addOrUpdateTmplProperty("edge.concurrency",e.hardwareConcurrency+""),e.connection&&e.connection.effectiveType&&f.M0.addOrUpdateTmplProperty("edge.connection",e.connection.effectiveType+"")}}}class w{reduce(e,t){return{}}}const T={experienceConfigSchema:{}}},66925:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});var i=n(65135),r=n(68364),o=n(98304);class a{static renderToast(e){this.renderToastCallback?this.renderToastCallback(e):i.M0.sendAppErrorEvent((0,r.Tr)(o.PMq,"Undefined toast render callback function"))}static setRenderToastCallback(e){this.renderToastCallback=e,this.readyResolveFn()}static expireToast(e){this.expireToastCallback?this.expireToastCallback(e):i.M0.sendAppErrorEvent((0,r.Tr)(o.hxo,"Undefined toast expire callback function"))}static setExpireToastCallback(e){this.expireToastCallback=e}static setCurrentToast(e,t){this.currentToastId!==e&&(this.currentToastId=e,this.renderToastCallback=t,this.currentToastIdChangeCallbacks.forEach((t=>t(e))),this.renderToast())}static addCurrentToastIdChangeCallback(e){e&&this.currentToastIdChangeCallbacks.push(e)}}a.ready=new Promise((e=>a.readyResolveFn=e)),a.currentToastIdChangeCallbacks=[]},85334:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.Save="Save",e.Unsave="Unsave",e.Mute="Mute",e.Follow="Follow",e.Unfollow="Unfollow",e.InterestFailure="InterestFailure",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Hide="Hide",e.DisableNotification="DisableNotification",e.EnableNotification="EnableNotification",e.RecommendedInterestsFailure="RecommendedInterestsFailure",e.Refresh="Refresh",e.Pin="Pin",e.Unpin="Unpin",e.HideTopic="HideTopic",e.UnhideTopic="UnhideTopic",e.HideSource="HideSource",e.UnhideSource="UnhideSource",e.WindowsInformation="WindowsInformation",e.Error="Error",e.Default="Default",e.ConnectionError="ConnectionError",e.MuteError="MuteError",e.Fre="Fre",e.TuneYourFeed="TuneYourFeed",e.Report="ReportContent"}(i||(i={}))},62947:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(55067);class r{}r.setMaxTiles=new i.C("setMaxTilesSignature")},20147:function(e,t,n){"use strict";n.d(t,{L:function(){return S}});var i=n(33940),r=n(63439),o=n(82423),a=n(65932),s=n(62947),c=n(7009),d=n(53076),l=n(83227),u=n(1584),p=n(19388),h=n(33954),g=n(53899),m=n(17440),f=n(65135),v=n(32717),y=n(53301);class S extends r.e{constructor(e,t,n,r,s,S,C){super(e,t,n,r,s,S,C);const b=(0,o.K0)(d.z.ChromiumPageSettings);m.U.getPreferenceSetting(c.lx).then((e=>{const t=null==e?void 0:e.value;!1===(null==t?void 0:t.quickLinkSettingsChanged)&&(0,v.eC)().then((()=>{null===f.M0||void 0===f.M0||f.M0.addOrUpdateTmplProperty("tscollapsed_to_off","1")}))}));try{(0,a.Uo)(d.z.ChromiumPageSettings,(e=>(0,i.mG)(this,void 0,void 0,(function*(){e.isLoadCompleted&&(0,u.NU)(e).then((e=>{e&&(b.updateQuickLinksDisplayOption(g.Z3.off,!0),(0,o.oU)(d.z.ExperienceTrackerEdgeNextData).then((e=>{window.setTimeout((()=>{(0,p.o_)(l.x.topSitesEdgeNextWC,!0),y.g.updateVisuallyReadyTiming.getActionSender(e).send({experienceType:l.x.topSitesEdgeNextWC,endTime:performance.now()})}))})),(0,v.eC)().then((()=>{null===f.M0||void 0===f.M0||f.M0.addOrUpdateTmplProperty("tscollapsed_to_off","1")})))}))}))))}catch(e){h.k.log(e)}}updateMaxTiles(e){s.I.setMaxTiles.getActionSender(this).send(e)}}},31172:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(30856),r=n(62947);class o{reduce(e,t){if(!e)return{maxTiles:8};if(!t)return e;let n;return i.G.handleAction(t,r.I.setMaxTiles,(t=>{n=Object.assign(Object.assign({},e),{maxTiles:t})})),n||e}}},88257:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var i=n(55067);class r{}r.followedTopics=new i.C("FollowedTopics"),r.followedTopicsFailed=new i.C("FollowedTopicsFailedSignature"),r.recommendedTopics=new i.C("RecommendedTopics"),r.recommendedTopicsFailed=new i.C("RecommendedTopicsFailed"),r.hiddenTopics=new i.C("HiddenTopics"),r.hiddenTopicsFailed=new i.C("HiddenTopicsFailed"),r.topic=new i.C("Topic"),r.topicFailed=new i.C("TopicsFailed"),r.topics=new i.C("Topics"),r.topicList=new i.C("TopicList"),r.topicsFailed=new i.C("TopicsFailed"),r.topicGroup=new i.C("TopicGroup"),r.topicGroupFailed=new i.C("TopicGroupFailed"),r.updateTopicFollowedState=new i.C("UpdateTopicFollowedState"),r.updateTopicFollowedStateFailed=new i.C("UpdateTopicFollowedStateFailed"),r.updateTopicHiddenState=new i.C("UpdateTopicHiddenState"),r.updateTopicHiddenStateFailed=new i.C("UpdateTopicHiddenStateFailed")},26680:function(e,t,n){"use strict";var i;n.d(t,{SH:function(){return p},$A:function(){return c},ku:function(){return a},Ol:function(){return s},jI:function(){return l},jC:function(){return d},Jn:function(){return u}}),function(e){e.DesktopL1="weatherdesktopl1",e.DesktopL2="weatherdesktopl2",e.PWA="weatherpwa",e.EdgeFeatured="edgefeatured",e.WINAPP="weather-app-win",e.XIAOMI="xiaomi",e.XIAOMI_ANDROID_GO="xmweather-gominus1",e.XIAOMI_BROWSER="xmweather-browser",e.SKYPE="onoskype",e.WINDOWS_HEADER_PREFIX="win",e.EDGE_ARTICLE_PREFIX="msnar"}(i||(i={}));new Set(["msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]),new Set(["xiaomi","xmweather-gominus1","xmweather-browser"]);var r=n(56692),o=n(10877);function a(e){let t;if(e instanceof URL)t=e.searchParams;else if(e instanceof URLSearchParams)t=e;else if("string"==typeof e)try{t=new URL(e).searchParams}catch(e){t=void 0}return s(t,"ocid")}function s(e,t,n){if(e&&t){const i={value:e.get(t)||void 0};if(!i.value&&n&&n.length>0)for(let t=0;t<n.length&&(i.value=e.get(n[t])||void 0,!i.value);++t);if(!i.value){const n=t.toLowerCase();e.forEach((function(e,t){!i.value&&t.toLowerCase()===n&&e&&(i.value=e)}))}return i.value}}function c(e,t,n){if(!e)return null;let i;try{i=e instanceof URL?new URL(e.href):new URL(e)}catch(e){return null}if(i&&(n||i.host.includes("msn.com")||i.host.includes(".msn.cn")))for(const[e,n]of Object.entries(t))e&&n&&i.searchParams.set(e,n);return i.href}function d(e,t){if(!e)return null;let n;try{n=new URL(e instanceof URL?e.href:e)}catch(e){return null}return n&&t&&t.length&&t.forEach((e=>{n.searchParams.delete(e)})),n.href}function l(e){const t=new RegExp("^.*/([Aa][Rr]||[Ss]{2}||[Vv][Ii]||[Vv][Pp])-(?<contentId>[a-zA-Z0-9]{6,8})(([?].*)||#.*)?$");return null!==e.match(t)}function u(e){if("edgeChromium"===r.jG.AppType)return!1;const t=a(e),n=null==t?void 0:t.toLowerCase();return o.Oj.has(n)}n(49977);function p(e,t,n){return c(e,{cvid:t,ocid:n})}},15395:function(e,t,n){"use strict";n.d(t,{ue:function(){return s},ce:function(){return h},ez:function(){return c},Xp:function(){return d}});var i,r=n(44772),o=n(12108);!function(e){e.Article="article",e.Gallery="slideshow",e.Video="video",e.Webcontent="webcontent"}(i||(i={}));var a=n(56692);a.jG.NavTargetUrlWithLocale;const s="consumption-feed-common-header",c="om",d="testOverlayMode";a.jG.isMobile;var l;!function(e){e.articlePageBodySection="articlePageBodySection",e.consumptionFeedContent="consumption-feed-content",e.galleryPageBodySection="galleryPageBodySection",e.gridAreaGallery="galleryPage_gridarea_gallery",e.topSpanModule="top-span-module",e.viewsHeaderWrapper="viewsHeaderWrapper",e.viewsHeaderWrapperGradientMasthead="viewsHeaderWrapperGradientMasthead",e.viewsHeaderWrapperWithNoComm="viewsHeaderWrapperWithNoComm"}(l||(l={}));var u;!function(e){e.atMenuToggle="atMenuToggle",e.jumpToNextNextArticle="jumpToNextNextArticle",e.jumpToPreviousArticle="jumpToPreviousArticle"}(u||(u={}));var p;!function(e){e.general="general",e.river="river"}(p||(p={}));new Map([[i.Article,"ar"],[i.Gallery,"ss"],[i.Video,"vi"],[r.PL.Article,"ar"],[r.PL.Slideshow,"ss"],[r.PL.Video,"vi"],[r.PL.WebContent,"vi"]]),r.PL.Article,r.PL.Slideshow,r.PL.Video,r.PL.Video,new Map([[i.Article,o.G.Article],[i.Gallery,o.G.Gallery],[i.Video,o.G.Video],[r.PL.Article,o.G.Article],[r.PL.Slideshow,o.G.Gallery],[r.PL.Video,o.G.Video],[r.PL.WebContent,o.G.Video]]),new Map([[o.G.Article,"article"],[o.G.Gallery,"gallery"],[o.G.Video,"video"]]);const h="24px"},21263:function(e,t,n){"use strict";n.d(t,{Te:function(){return v},sn:function(){return y},tq:function(){return S},oR:function(){return h},HQ:function(){return C}});n(33940);var i=n(56692),r=(n(26007),n(44979),n(89638),n(55607),n(76754)),o=n(34960),a=n(17612);n(38156);n(62512),n(19628);var s=n(15395);Object.freeze({slideshow:"slideshow",fullscreen:"fullscreen"});var c=n(58958),d=n(36585),l=n(33379);new RegExp("<[^>]*>","gim");const u=function(){let e=null;return function(t=!1){if(null===e||t)try{e=window.self!==window.top}catch(t){e=!0}return e}}();var p;!function(e){e[e.NO_OVERLAY=0]="NO_OVERLAY",e[e.IFRAME_OVERLAY=1]="IFRAME_OVERLAY",e[e.TEST_OVERLAY=2]="TEST_OVERLAY"}(p||(p={}));!function(){let e=null}();function h(){if((0,l.N)()){if((0,d.ti)()){const e=(0,d.v1)();return e&&e.isDarkMode}if((0,r.pE)()){const e=sessionStorage.getItem("nativeAppUserConfig"),t=e&&JSON.parse(e);if(t)return t.isDarkMode}}return(0,c.Y)()}function g(e){const t=new URL(e),n=(0,o.ku)();return n&&t.searchParams.set("ocid",n),t.href}function m(e){return encodeURI(e.trim().toLowerCase().replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\uA9|\uAE]\u3030|\uA9|\uAE|\u3030/gi,"").slice(0,600).replace(/[\][!"#$%&'()*+,./:;<=>?@\\^_{|}~]/g,"").replace(/\s+/g,"-").replace(/-+$/,""))||"title"}function f(){return i.jG.CurrentMarket===a.IY.PLPL?"wideo":"video"}function v(e,t){const n=i.jG.HostPage.verticalKey||"watch",r=f();return g(`${i.jG.NavTargetUrlWithLocale}/${r}/${n}/${m(t)}/vi-${e}`)}function y(e,t,n="web-content",r="webcontent"){try{const o=new URL(t);o.searchParams.delete("ocid");const a=f(),s=new URL(`${i.jG.NavTargetUrlWithLocale}/${a}/${r}/${m(n)}/vi-${e}`);if("www.youtube.com"==o.hostname)return s.searchParams.set("vid",o.searchParams.get("v")||""),s.searchParams.set("provider","yt"),g(s.href);if("www.facebook.com"==o.hostname){const e=t.match(/^http(?:s?):\/\/(?:www\.|web\.|m\.)?facebook\.com\/([A-z0-9.]+)\/videos(?:\/[0-9A-z].+)?\/(\d+)(?:.+)?$/);return s.searchParams.set("vid",e&&e[2]||""),s.searchParams.set("provider","fb"),g(s.href)}return g(o.href)}catch(e){return t}}function S(){return i.jG.isMobile}function C(e,t){return Object.assign(Object.assign({},e),{instanceId:`${e.instanceId}-${t}`})}},36585:function(e,t,n){"use strict";n.d(t,{dG:function(){return s},ti:function(){return o},v1:function(){return a}});var i=n(33940),r=n(65019);function o(){return(0,r.Vx)()}function a(){return(0,r._4)()}function s(){return(0,i.mG)(this,void 0,void 0,(function*(){const e={};if((0,r.Vx)()){const t=(0,r._4)();e.MUID=t.muid;const n=yield(0,r.hP)("service::api.msn.com::MBI_SSL");"MSA"===t.accountType&&n?e.UserAuthToken=n:"AAD"===t.accountType&&n&&(e.Authorization=n)}return e}))}},95460:function(e,t,n){"use strict";n.d(t,{Vo:function(){return g},XJ:function(){return h}});var i=n(33940),r=n(85594),o=n(76858),a=n(4734),s=n(7124);let c=!1;function d(){l()}const l=(0,s.Z)((()=>g(!1)),300),u=new Set;class p extends r.Pq{constructor(e){super(e),this.options=e}bind(e){this.target=e.targets[this.targetNodeId],c||(addEventListener("resize",d),c=!0),this.initialCalc(),u.add(this)}unbind(){u.delete(this)}initialCalc(){return(0,i.mG)(this,void 0,void 0,(function*(){yield(0,a.F_)(),this.recalculate(!1)}))}recalculate(e){return(0,i.mG)(this,void 0,void 0,(function*(){yield(0,o.y)();const t=this.target;if("fixed"!==t.style.position&&t.offsetWidth>0&&t.offsetHeight>0){const n={top:t.offsetTop,left:t.offsetLeft};if(e&&this.lastPosition){const e=this.lastPosition.left-n.left,i=this.lastPosition.top-n.top;if(e||i){const n=`translate(${e}px, ${i}px)`;t.style.transform=n,requestAnimationFrame((()=>{const e="transform .3s ease-out",n=t.style.transition;t.style.transition=n?n+", "+e:e,t.style.transform="translate(0, 0)",setTimeout((()=>{t.style.transition=n,t.style.transform=null}),300)}))}}this.lastPosition=n}}))}}function h(){return new p({})}function g(e){for(const t of u.values())t.recalculate(e)}r.m0.define(p)},23344:function(e,t,n){"use strict";n.d(t,{Fc:function(){return c},Fl:function(){return s},Nu:function(){return d}});var i=n(85594);const r={},o={};class a extends i.Pq{constructor(e){super(e),this.options=e,this.stickyClassApplied=!1,this.refreshSticky=()=>{const e=r[this.options.breakpointName];if(e<0)return;const t=scrollY>e;if(t!==this.stickyClassApplied){const e=this.options.stickyClassName;t?this.target.classList.add(e):this.target.classList.remove(e),this.stickyClassApplied=t}}}bind(e){this.target=e.targets[this.targetNodeId],this.refreshSticky();const{breakpointName:t}=this.options;let n=o[t];n||(n=new Set,o[t]=n),n.add(this),addEventListener("scroll",this.refreshSticky)}unbind(e){o[this.options.breakpointName].delete(this),removeEventListener("scroll",this.refreshSticky)}}function s(e){return new a(e)}function c(e,t){r[e]=t;const n=o[e];if(n)for(const e of n)e.refreshSticky()}function d(e){return r[e]}i.m0.define(a)},68742:function(e,t,n){"use strict";var i,r;n.d(t,{a:function(){return i}}),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(i||(i={})),function(e){e.MPH="mph",e.KMH="km/h",e.MS="m/s",e.BFT="bft",e.MILE="mi",e.METER="m",e.MM="mm",e.CM="cm",e.MB="mb",e.HPA="hPa",e.IN="in"}(r||(r={}))},58475:function(e,t,n){"use strict";n.d(t,{MN:function(){return d},Mx:function(){return p},Rb:function(){return s},Ws:function(){return h},ge:function(){return c},hl:function(){return a},k4:function(){return l},qF:function(){return o},zf:function(){return u}});var i=n(97417);const r={"prg-1sw-swiconfix":"weathermapdata/1/static/weather/Icons/flights/taskbar_v10sw2/","prg-1sw-swiconfix2":"weathermapdata/1/static/weather/Icons/flights/taskbar_v10sw2/","prg-1sw-swiconfix3":"weathermapdata/1/static/weather/Icons/flights/taskbar_v10sw2/"};const o=function(){let e="";return Object.keys(r).forEach((t=>{(0,i.SL)(t)&&(e=r[t])})),e}()||"weathermapdata/1/static/weather/Icons/taskbar_v10/",a="hurricane_warnning.svg",s="Alert/",c="AQI/WildFire.svg",d="AQI/wildfireMapInfopane.svg",l="AQI/aq{level}.svg",u="Condition_Card/",p=o+"NoColor_Card/",h="https://assets.msn.com/weathermapdata/1/static/weather/Icons/taskbar/Fallback/Alert_Y.svg"},18461:function(e,t,n){"use strict";n.d(t,{LO:function(){return l},Om:function(){return m},QO:function(){return w},Re:function(){return f},TP:function(){return d},bK:function(){return y},d5:function(){return C},fd:function(){return S},ld:function(){return g},se:function(){return v},y3:function(){return p},zk:function(){return u}});var i=n(56692),r=n(58475),o=n(19628),a=n(68364),s=n(98304),c=n(65135);function d(e,t,n){return!n||e>24||e<0||t<0?"":t<e?`${n}&day=1&hour=${t+1}`:t>=e&&t-e<=24?`${n}&day=2&hour=${t-e}`:""}const l=["TeaserRainTomorrow","TeaserDayTempChange","TeaserDayTempChangeDay","TeaserDayTempTrend","TeaserRain5Day","TeaserWindDay","TeaserTempRecordDay","TeaserSummaryTomorrow","TeaserSummaryTomorrowDefault"],u=["Storm","Nowcast","AlertNowcast","SevereWeather","AQICard","Hurricane","HurricaneAround","WildFirePointFullCard","JwaPollen","USPollen","EUPollen","ForecastVideo"],p={darkBg:{textColor:"#FFFFFF",preBackground:"#3b3b3b",iconInvert:"100%"},lightBg:{textColor:"#2B2B2B",preBackground:"#FFFFFF",iconInvert:"0%"}};const h={"hurricane.svg":"hurricane_warnning.svg"};function g(e,t,n){if(!e)return"";const r=n||!h[e]?e:h[e],o=`https://assets.msn.${i.jG.IsChinaCompliance?"cn":"com"}/${t}${r}`;return c.M0&&"function"==typeof c.M0.sendClientLogEvent&&c.M0.sendClientLogEvent({message:`GetWeatherIconUrl result in ${o} with original icon: ${e}`,type:"information"}),o}function m(e){return e?`https://assets.msn.${i.jG.IsChinaCompliance?"cn":"com"}/weathermapdata/1/static/weather/Images/${e}`:""}function f(e,t){let n=null;switch(t){case"JwaPollen":n="AQI/jwapl{level}.svg";break;case"USPollen":case"EUPollen":n="AQI/uspl{level}.svg"}return n?g(o.Ld.Format(n,{level:e}),r.qF):""}function v(e,t){return e?t.formatDayWithWeek(e,{forceWeekdayAhead:!0,excludeComma:!0}):""}var y,S;!function(e){e.Insights="Insights",e.Teaser="Teaser",e.Nowcast="Nowcast",e.SevereWeather="SevereWeather",e.AQICard="AQICard",e.WildFirePointFullCard="WildFirePointFullCard",e.Hurricane="Hurricane",e.USPollen="USPollen",e.EUPollen="EUPollen",e.JwaPollen="JwaPollen",e.AlertNowcast="AlertNowcast",e.HurricaneAround="HurricaneAround"}(y||(y={})),function(e){e.hourly="hourly",e.daily="daily",e.map="map",e.alert="alert",e.precipitation="precipitation",e.hurricane="hurricane",e.news="news",e.poll="poll",e.trend="trend",e.video="video"}(S||(S={}));const C="WeatherCardMiniL1TabIndex";var b;function w(e,t,n){if(!t||t.split("_").length<2||!t.startsWith("Weather")||!e||!n)return;const i=t.replace("Weather:","Weather_").split("_")[2],r=e.contenttype,o=n.map((e=>e.contenttype||""));i!==r&&(0,a.H)(s.jUm,"Taskbar content type and display content mismatch",`Content type in taskbar [${i}] is not consistent with display content [${r}]. PreviewType: ${t}; ContentData list: ${o}`)}!function(e){e.curWea="1",e.hourly="2",e.daily="3",e.teaser="4"}(b||(b={}))},38985:function(e,t,n){"use strict";n.d(t,{CR:function(){return s},Cr:function(){return c},G:function(){return y},_v:function(){return g},a7:function(){return d},bd:function(){return l},dP:function(){return v},eK:function(){return u},eu:function(){return f},f6:function(){return h},qE:function(){return p}});var i=n(56692),r=n(38573),o=n(45506),a=n(4596);function s(e){return(0,r.JY)(e)}function c(e){return(void 0!==e.latitude||void 0!==e.longitude)&&(!s(e)||""+e.latitude=="-1"&&""+e.longitude=="-1")}function d(e){const t=i.jG.AppType;return["windowsShell","windows","newsAndInterests","windowsNewsPlus","winWidgets"].indexOf(t)>=0?!(!e||!(e.addressLine||e.locality||e.region)):"zh-cn"===e.language||"CN"===e.isoCode?!(!e||!(e.addressLine||e.locality||e.subRegion||e.addressLine)):!(!e||!e.locality&&!e.addressLine)}function l(e){const t=o.Al.Locale;return e&&e.language&&(e.language===t||/en-/i.test(e.language)&&/en-/i.test(t))}function u(e){return(/,g=([a-z]+-[a-z]+)$/i.exec(e)||[])[1]}function p(){if(o.Al.ClientSettings&&o.Al.ClientSettings.geo_lat&&o.Al.ClientSettings.geo_long&&""!==o.Al.ClientSettings.geo_lat&&""!==o.Al.ClientSettings.geo_long){const e={latitude:o.Al.ClientSettings.geo_lat,longitude:o.Al.ClientSettings.geo_long,locality:o.Al.ClientSettings.geo_city,region:o.Al.ClientSettings.geo_subdivision,country:o.Al.ClientSettings.geo_countryname,isoCode:o.Al.ClientSettings.geo_country,isDetected:!0,language:"en-us"};return e.region=(0,a.x_)(e.region,e.language,e.isoCode),e.displayName=(0,r.Gf)(e),e}return null}function h(e){if(e)return e.el?`el=[${e.el}]`:`lat=${e.latitude},long=${e.longitude}`}function g(e){return`${e.latitude},${e.longitude}`}function m(e){const t="number"==typeof e?e:parseFloat(e);return Math.trunc(1e3*t)/1e3}function f(e,t){return!(!e||!t)&&(0,r.Gf)(e)===(0,r.Gf)(t)}function v(e,t,n=!1){if(e&&t){let i=""+(e[0]||e.latitude),r=""+(t[0]||t.latitude),o=""+(e[1]||e.longitude),a=""+(t[1]||t.longitude);return n&&(i=m(i).toString(),o=m(o).toString(),r=m(r).toString(),a=m(a).toString()),i===r&&o==a}return!1}function y(e,t){return!(!e||!t)&&((0,r.aQ)(e)!=(0,r.aQ)(t)&&(0,r.Gf)(e)!==(0,r.Gf)(t))}},97417:function(e,t,n){"use strict";n.d(t,{SL:function(){return a}});var i=n(45506),r=n(56692),o=n(33379);function a(e){var t,n;if((0,o.N)()){return((null===i.Al||void 0===i.Al?void 0:i.Al.CurrentFlights)||"").includes(e)}if(((null===(n=null===(t=null===r.Vh||void 0===r.Vh?void 0:r.Vh.getInstance())||void 0===t?void 0:t.CurrentRequestTargetScope)||void 0===n?void 0:n.pageExperiments)||[]).some((t=>t.startsWith(e))))return!0;return!1}},12037:function(e,t,n){"use strict";n.d(t,{q:function(){return d},v:function(){return l}});var i=n(33954),r=n(31206),o=n.n(r),a=n(50791),s=n.n(a),c=n(38573);const d=function(e){const t={};return function(n){return t.i===n||(t.i=n,t.o=e(n)),t.o}}((function(e){try{const t=(0,c.gl)(e,!0);return o().parse(t).toString(s())}catch(t){i.k.log(`serialize failed, location=${JSON.stringify(e)}`)}}));function l(e){try{const t=s().parse(e).toString(o());return(0,c.$i)(t,!0)||{}}catch(t){return i.k.log(`deserialize failed, serializedLocation=${e}`),{}}}},68913:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});class i{static latlonToPixelXY(e,t,n){const i=this.clip(e,this.MinLatitude,this.MaxLatitude),r=(this.clip(t,this.MinLongitude,this.MaxLongitude)+180)*this.ReciprocalOf360,o=Math.sin(i*this.PerDegree),a=.5-Math.log((1+o)/(1-o))*this.ReciprocalOf4Pi;return[this.modPositive(r*n,n),this.modPositive(a*n,n)]}static modPositive(e,t){return(e%=t)<0?e+t:e}static clip(e,t,n){return Math.min(n,Math.max(t,e))}static MapSize(e){return 256<<e}static latLonsToPixel(e,t,n,r=i.zoomLevelMap){return i.toPixelArray(e,t,n,i.widthCardHalf,i.heightCardHalf,r)}static latLonsToPixelLandingPage(e,t,n,r=1600,o=210,a=i.zoomLevelMap){return i.toPixelArray(e,t,n,(r-1)/2,(o-1)/2,a)}static latLonToPixel(e,t,n=1600,r=210,o=i.zoomLevelMap){const a=e[0],s=e[1],c=i.latlonToPixelXY(a,s,i.getMapSizePixel(o));return[c[0]-t[0]+(n-1)/2,c[1]-t[1]+(r-1)/2]}static latLonToPixelCard(e,t,n=i.zoomLevelMap){const r=e[0],o=e[1],a=i.latlonToPixelXY(r,o,i.getMapSizePixel(n));return[a[0]-t[0]+i.widthCardHalf,a[1]-t[1]+i.heightCardHalf]}static toPixelArray(e,t,n,r,o,a=i.zoomLevelMap){const s=i.getMapSizePixel(a),c=i.latlonToPixelXY(t,n,s),d=[];return e.forEach((e=>{const t=e[1],n=e[0],a=i.latlonToPixelXY(t,n,s),l=a[0]-c[0]+r,u=a[1]-c[1]+o;d.push([l,u])})),d}static getMapSizePixel(e=7){return 256<<e}static getRad(e){return e*Math.PI/180}static getDistance(e,t,n,r){let o=0;try{const a=i.getRad(e),s=i.getRad(n),c=i.getRad(e)-i.getRad(n),d=i.getRad(t)-i.getRad(r);o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(c/2),2)+Math.cos(a)*Math.cos(s)*Math.pow(Math.sin(d/2),2))),o*=i.EARTH_RADIUS}catch(e){o=0}return Math.round(o)}static convertKm2Mile(e){const t=.62137*e;return Math.round(t)}}i.MinLongitude=-180,i.MaxLongitude=180,i.MinLatitude=-85.05112878,i.MaxLatitude=85.05112878,i.ReciprocalOf360=1/360,i.TwoPi=2*Math.PI,i.ReciprocalOfPi=1/Math.PI,i.ReciprocalOf4Pi=1/(4*Math.PI),i.PerDegree=Math.PI/180,i.widthMap=1600,i.heightMap=210,i.maxHeightMap=400,i.widthMapCard=1200,i.heightMapCard=400,i.zoomLevelMap=7,i.widthHalf=(i.widthMap-1)/2,i.heightHalf=(i.heightMap-1)/2,i.widthCardHalf=(i.widthMapCard-1)/2,i.heightCardHalf=(i.heightMapCard-1)/2,i.mapSizePixel=256<<i.zoomLevelMap,i.EARTH_RADIUS=6378.137},21256:function(e,t,n){"use strict";n.d(t,{GE:function(){return u},g_:function(){return c},lI:function(){return d},qn:function(){return p}});var i=n(45506),r=n(68913);n(19628);const o=new Map([["SN","winterstorm"],["IC","winterstorm"],["IM","winterstorm"],["FD","wildfire"],["AQ","airqualitystation"],["SM","airqualitystation"],["DU","airqualitystation"],["VO","airqualitystation"],["AS","airqualitystation"]]),a={winterstorm:{type:"exclude",markets:["zh-cn"]},wildfire:{type:"include",markets:["us"]},airqualitystation:{type:"include",markets:["us"]}},s="severeweather";function c(e,t,n=r.b.widthMap,i=r.b.heightMap,o=r.b.zoomLevelMap,a=30){const s=(n-1)/2+a,c=(i-1)/2+a,d=r.b.getMapSizePixel(o),l=r.b.latlonToPixelXY(e.lat,e.lon,d),u=[l[0]-s,l[1]-c],p=[l[0]+s,l[1]+c],h=o-t+8;return{minTileX:u[0]>>h,maxTileX:p[0]>>h,minTileY:u[1]>>h,maxTileY:p[1]>>h,pixelXY:l,pixelLT:u,pixelRB:p}}function d(e){if(!e)return null;const t=o.get(e);return function(e){const t=i.Al.Locale;let n=!1;if(!(e in a))return n;"include"==a[e].type?a[e].markets.some((e=>{if(null==t?void 0:t.includes(e))return n=!0,!0})):"exclude"==a[e].type&&(n=!0,a[e].markets.some((e=>{if(null==t?void 0:t.includes(e))return n=!1,!0})));return n}(t)?t:s}function l(e){const t=""+(e||"0");return t.length<2?"0"+t:t}function u(e,t,n,i){const r=parseInt(e.substring(0,4)),o=parseInt(e.substring(4,6))-1,a=parseInt(e.substring(6,8)),s=parseInt(e.substring(8,10)),c=parseInt(e.substring(10,12)),d=n?new Date(Date.UTC(r,o,a,s,c)):new Date(r,o,a,s,c),u=new Date(d);u.setMinutes(d.getMinutes()+t);const p=u.getFullYear().toString()+l(u.getMonth()+1)+l(u.getDate())+l(u.getHours());return i?p:p+l(u.getMinutes())}const p=new Map([["rain-low","https://assets.msn.com/weathermapdata/1/static/img/animation/rain-low.png"],["rain-avg","https://assets.msn.com/weathermapdata/1/static/img/animation/rain-avg.png"],["rain-hvy","https://assets.msn.com/weathermapdata/1/static/img/animation/rain-hvy.png"],["sleet-low","https://assets.msn.com/weathermapdata/1/static/img/animation/sleet-low.png"],["sleet-avg","https://assets.msn.com/weathermapdata/1/static/img/animation/sleet-avg.png"],["sleet-hvy","https://assets.msn.com/weathermapdata/1/static/img/animation/sleet-hvy.png"],["snow-low","https://assets.msn.com/weathermapdata/1/static/img/animation/snow-low.png"],["snow-avg","https://assets.msn.com/weathermapdata/1/static/img/animation/snow-avg.png"],["snow-hvy","https://assets.msn.com/weathermapdata/1/static/img/animation/snow-hvy.png"]]);new Map([["low","#98B2CA"],["avg","#7891B5"],["hvy","#506984"]]),new Map([["0",new Map([["89","#001add"],["97","#00cc31"],["105","#00e300"],["113","#00bd00"],["121","#009600"],["129","#99d300"],["137","#f8ec00"],["145","#e7c000"],["153","#f89e00"],["161","#ff5600"],["169","#fb0000"],["177","#de0000"]])],["1",new Map([["89","#79b837"],["105","#078f33"],["121","#014b24"],["137","#eec040"],["153","#d05d2c"],["169","#830826"]])],["2",new Map([["89","#aae1e0"],["105","#5ad2e0"],["121","#249fdb"],["137","#1547bd"],["153","#101e96"],["169","#01016e"]])],["3",new Map([["89","#edb2c7"],["105","#df71a9"],["121","#bb338f"],["137","#8a139b"],["153","#660888"],["169","#470765"]])]]),new Map([["89","low"],["105","low"],["121","avg"],["137","hvy"],["153","hvy"],["169","hvy"]]),new Map([["1","rain"],["2","snow"],["3","sleet"]])},4596:function(e,t,n){"use strict";n.d(t,{x_:function(){return r},zW:function(){return o}});const i={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","American Samoa":"AS","District of Columbia":"DC",Guam:"GU","Marshall Islands":"MH","Northern Mariana Island":"MP","Puerto Rico":"PR","Virgin Islands":"VI"};function r(e,t,n){return"US"!==n&&"us"!==n||"en-us"!==t?e:i[e]||e}function o(e,t){return e&&JSON.parse(JSON.stringify(e,(function(e,n){if(n&&"object"==typeof n&&!Array.isArray(n)){const e={};for(const i in n)if(Object.hasOwnProperty.call(n,i)){e[t&&t[i]||i&&i.charAt(0).toLowerCase()+i.substring(1)]=n[i]}return e}return n})))}},38573:function(e,t,n){"use strict";n.d(t,{$i:function(){return y},DF:function(){return u},Gf:function(){return s},JY:function(){return f},XA:function(){return S},aQ:function(){return d},gl:function(){return h},mH:function(){return c},vt:function(){return m},zl:function(){return l}});var i=n(56692),r=n(65135),o=n(98304),a=n(4596);function s(e,t){if(e)return e.displayName&&!(null==t?void 0:t.skipOldName)?e.displayName:l(e,t)}function c(e,t){const n=e&&e.displayName,i=u(e,{enforceOnlySmallLocal:!0}),a=i.length>0?i[0]:n;return a||r.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.s$v),{message:`ShortlocationNameArr: ${i}.\n             CurrentLocation: ${JSON.stringify(e)}. \n             Error: Short location name in ${t} is empty.`})),a}function d(e){return e.definitionName||`${e.latitude},${e.longitude}`}function l(e,t){return u(e,t).join(", ")}function u(e,t){var n;"united states"===(null===(n=null==e?void 0:e.country)||void 0===n?void 0:n.toLowerCase())&&(e.isoCode="US");const r=!t||!t.skipLocale,o=!(null==t?void 0:t.skipAddressLine),s=i.jG&&i.jG.LocaleContentMarket&&i.jG.LocaleContentMarket.market,c=(e.isoCode||"").toUpperCase(),d=c&&s&&s.substr(-c.length).toUpperCase()===c,l=m(e.isoCode)?null:e.subRegion,u=(0,a.x_)(e.region,e.language,e.isoCode),h=[o&&e.addressLine,r?e.locality:"",l,u,(null==t?void 0:t.skipCountry)?"":e.country].filter((e=>!!e));let g=0;for(;h[g+1];)h[g+1]===h[g]?h.splice(g+1,1):g++;const f="CN"==(null==s?void 0:s.toUpperCase())?1:2;if(e.country&&d&&h.length>f&&h.splice(-1,1),t&&t.enforceOnlySmallLocal&&h.length>0){return[/,/.test(h[0])?h[0].split(",")[0]:h[0]]}var v;return t&&t.enforceSmallLocaleFirst||(v=e.language)&&p.has(v.toUpperCase())&&h.reverse(),!(null==t?void 0:t.enforceOnlySmallLocal)&&0==h.length&&e.latitude&&e.longitude&&(h.push(e.latitude),h.push(e.longitude)),h}const p=new Set(["ZH-CN","KO-KR","JA-JP"]);function h(e,t=!1){const n={a:e.addressLine,l:e.locality,r:e.region,r2:e.subRegion,c:e.country,i:e.isoCode,t:e.locationType,g:e.language,x:t?e.longitude:void 0,y:t?e.latitude:void 0,n:i.jG.isMiniProgram?e.displayName:void 0},r=JSON.stringify(n,((e,t)=>null!=t&&""!==t?t:void 0));return"{}"!==r?r:void 0}const g=new Set(["JP","TW"]);function m(e){return!g.has((e||"").toUpperCase())}function f(e){const t=parseFloat(null==e?void 0:e.latitude),n=parseFloat(null==e?void 0:e.longitude);return v(t,-85,85)&&v(n,-180,180)&&(0!==t||0!==n)}function v(e,t,n){return!isNaN(e)&&e>=t&&e<=n}function y(e,t=!1){if(e)try{const n=JSON.parse(e),r={};return r.addressLine=n.a,r.locality=n.l,r.region=n.r,r.subRegion=n.r2,r.country=n.c,r.isoCode=n.i,r.locationType=n.t,r.language=n.g,t&&(r.latitude=n.y,r.longitude=n.x),i.jG.isMiniProgram&&(r.displayName=n.n),r}catch(e){return}}function S(e,t){return!(!e||!t)&&(C(e.longitude,t.longitude)&&C(e.latitude,t.latitude))}function C(e,t){return!(!e||!t)&&b(e)===b(t)}function b(e){const t=parseFloat(e),n=Math.pow(10,6);return Math.round(t*n)/n}},29442:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var i=n(56692),r=n(58475);const o=["RA","SN","FL","FO","TL","TH","WI","TS","AQ","FD","HW","BLIZZARD","COLD%20WAVE","DROUGHT","ICY%20ROAD","RAINSTORM","TYPHOON","GALE","DENSE%20FOG","THUNDER","SANDSTORM","FROST","HAIL","HAZE","HIGH%20TEMPERATURE"];function a(e,t,n){if(!e||!t)return"";const a=n||r.qF+r.Rb;e=e.toUpperCase().replace(" ","%20");return o.includes(e)?`https://assets.msn.${i.jG.IsChinaCompliance?"cn":"com"}/${a}/Alert_${e}_${t}.svg`:`https://assets.msn.${i.jG.IsChinaCompliance?"cn":"com"}/${a}/Alert_OT_${t}.svg`}},25859:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var i=n(57405);const r=/^\/([a-z]{1,}-[a-z]{1,})/i;class o{constructor(e){this.rawURL=e,this.url=new URL(e)}query(){return this.url.searchParams}unit(){return(0,i.rC)(this.url.searchParams)}market(){const e=r.exec(this.url.pathname);return e&&e[1]}}var a=n(88195);function s(e,t,n){return t.split(",").forEach((t=>{if(t.startsWith("|")){const i=t.split("|");if(i.length<=2)return;if(!i[2].startsWith("/"))return;const r=i[2].split("/"),s=r[1],c=new o(n),d=e.currentCondition.locationRaw,l=c.unit()||e.unit,u=c.market(),p=c.query(),h=p.get("loc"),g=e=>h,m={ocid:p.get("ocid"),cvid:p.get("cvid"),etreeUser:p.get("etreeUser"),etreeTaskID:p.get("etreeTaskID"),locale:u};switch(s){case"maps":if(r.length>2){const e=r[2];n=(0,a.E_)(d,l,g,e,Object.assign(Object.assign({},m),{zoom:p.get("zoom"),"3d":!!p.get("3d"),autoplay:!!p.get("autoplay")}))}break;case"life":n=(0,a.zc)(d,l,g,Object.assign({},m));break;default:n=(0,a.ss)(d,l,g,Object.assign(Object.assign({},m),{linkType:s}))}}else n+=t})),n}},88195:function(e,t,n){"use strict";n.d(t,{E_:function(){return f},Lk:function(){return m},RK:function(){return y},iS:function(){return S},ss:function(){return g},zc:function(){return v}});var i=n(56692),r=n(55755),o=n(98304),a=n(33379),s=n(65135),c=n(38573),d=n(38985),l=n(21256),u=n(12037),p=n(57405);function h(e,t){const n=Object.assign({},e||{});return n.locStrResolver=n.locStrResolver||t,n}function g(e,t,n,i){const r=h(i,n),o=r.linkType||1;return m(e,t,(function(e){return(0,p.LL)(o,e)}),r).toString()}function m(e,t,n,l){const u=l.locale||i.jG.LocaleContentMarketString||"en-us",h=(0,p.LL)("weather",u),g=n(u);let m,f;if(e&&(m=function(e){return e.urlSlug?e.urlSlug:(0,c.DF)(e,{skipAddressLine:!0}).slice(0,2).map((e=>null==e||"boolean"==typeof e?"":`${e}`)).map((e=>e.replace(/[/?#%\s]+/g,"-"))).map((e=>encodeURIComponent(e))).join(",")}(e),f=l.locStrResolver(e),(0,d.Cr)(e)&&s.M0&&o.hT$)){const t=new Error("seems invalid location for weather link");s.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.hT$),{message:t.message,pb:Object.assign(Object.assign({},o.hT$.pb),{location:{longitude:e.longitude,latitude:e.latitude},stack:(t.stack||"").slice(0,1024)})}),!0)}const v=m?`/in-${m}`:"";let y;(0,a.N)()?y=document.location.href:l.locationHref&&(y=l.locationHref);let S=i.jG.NavTargetHostName;S="zh-cn"===u?S.replace("com","cn"):S,(null==y?void 0:y.includes("localhost.msn.com"))&&(0,a.N)()&&(S=document.location.host);const C=new URL(`https://${S}/${u}/${h}/${g}${v}`),b=C.searchParams;return f&&b.set("loc",f),(0,p.Nn)(b,t),(0,a.N)()?(0,p.mk)((0,r.L)(),b,l):l.locationHref&&(0,p.mk)(new URL(l.locationHref).searchParams,b,l),l.ocid&&b.set("ocid",l.ocid),l.cvid&&b.set("cvid",l.cvid),l.etreeUser&&b.set("etree-user",l.etreeUser),l.etreeTaskID&&b.set("etree-task-id",l.etreeTaskID),l.content&&b.set("content",l.content),C}function f(e,t,n,i,r){const o=h(r,n),a=m(e,t,(function(e){const t=(0,p.LL)(2,e),n=i&&(0,p.LV)(i,e);return i?t+"/"+n:t+"/-"}),o),s=a.searchParams;return y(s,"zoom",o.zoom),y(s,"3d",o["3d"]&&"1"),y(s,"autoplay",o.autoplay&&"1"),y(s,"subs",o.subs),y(s,"wfid",o.wfid),a.toString()}function v(e,t,n,i){const r=m(e,t,(function(e){return(0,p.LL)(6,e)}),i=h(i,n)),o=r.searchParams;return y(o,"lifeIndex",i.lifeIndex),y(o,"day",i.day),y(o,"fct",i.fct),r.toString()}function y(e,t,n){n&&e.set(t,""+n)}function S(e,t,n,i){var r,o;if(!i){const t=new Date(null===(r=e.alertsInfo)||void 0===r?void 0:r.created);i=(null===(o=e.alertsInfo)||void 0===o?void 0:o.id)+t.getTime()/1e3}const a=(0,l.lI)(e.alertsInfo.class),s=f(e.currentLocation,e.unit,t||u.q,a,n);return i?s+"&alertid="+i:s}},57405:function(e,t,n){"use strict";n.d(t,{cT:function(){return w},Nn:function(){return b},LV:function(){return v},LL:function(){return f},rC:function(){return S},mk:function(){return C}});const i={weather:{es:"el-tiempo","es-es":"eltiempo",fr:"meteo",it:"meteo",de:"wetter",nl:"weer",cs:"pocasi",pt:"clima","pt-pt":"meteorologia",da:"vejr",hu:"idojaras",id:"cuaca",fi:"saa",sv:"vader",tr:"havadurumu",pl:"pogoda"},forecast:{es:"pronostico","es-es":"prevision",fr:"previsions",it:"previsioni",de:"vorhersage",nl:"voorspelling",cs:"predpoved","pt-pt":"previsao",da:"vejrudsigt",hu:"elorejelzes",id:"prakiraan",fi:"ennuste",nb:"vaermelding",sv:"prognos",tr:"havadurumutahmini",pl:"prognoza"},maps:{cs:"mapy",da:"kort",de:"karten",es:"mapas",fi:"kartat",fr:"cartes",id:"peta",it:"mappe",nb:"kart",nl:"kaarten",pl:"mapy-pogody",pt:"mapas",sv:"vaderkartor",tr:"haritalar"},monthlyforecast:{da:"manedligprognose",de:"monatlicheprognose",es:"pronosticomensual",fi:"kuukaudenennuste",fr:"previsionsmensuelles",id:"prakiraanbulanan",it:"previsionimensili",nb:"manedligprognose",nl:"maandelijksevoorspelling",pl:"prognozamiesieczna",pt:"previsaomensal",sv:"manadsprognos",tr:"ayliktahmin"},records:{cs:"rekordniaprumerne",da:"rekorder",de:"historisches","de-ch":"rekorde",fi:"Tilastot",hu:"rekordok",id:"catatan",it:"record",nb:"rekorder",pl:"rekordowe",sv:"medeltemperaturer",tr:"mevsim-normalleri","pt-pt":"recordes"},life:{da:"livet",de:"leben",es:"lavida",fi:"elama",fr:"vie",hu:"elet",id:"kehidupan",it:"vita",nb:"liv",nl:"leven",pl:"zycie",pt:"vida",sv:"liv",tr:"hayat"},pollen:{es:"polen",fi:"siitepoly",id:"serbuksari",it:"polline",nl:"stuifmeel",pl:"pylekkwiatowy",pt:"polen",tr:"polen"},hourlyforecast:{da:"timeprognose",de:"stundlichevorhersage",es:"previsionhoraria",fi:"tuntiennuste",fr:"previsionhoraire",id:"prakiraanperjam",it:"previsioniorarie",nb:"prognosepertime",nl:"voorspellingperuur",pl:"prognozagodzinowa",pt:"previsaohoraria",sv:"timprognos",tr:"saatliktahmin"}},r="orkaner",o="temperatur",a="synlighet",s="vind",c="vento",d="snofall",l={radar:{fi:"tutka"},hurricane:{cs:"hurikany",da:r,nb:r,sv:r,de:"hurrikane",es:"huracanes",fr:"ouragans",id:"hurikan",it:"uragani",nl:"orkanen",pl:"huragany",pt:"hurricanes",tr:"kasirgalar"},severeweather:{fi:"huonosaa",id:"cuacaburuk",nl:"slechtweer",sv:"ovader"},temperature:{cs:"teplota",da:o,de:o,nb:o,sv:o,fi:"lampotila",id:"suhu",tr:"sicaklik"},precipitation:{cs:"srazky",da:"nedbor",nb:"nedbor",id:"curahhujan",nl:"neerslag",pl:"opady",sv:"nederbord",tr:"yagis"},wildfire:{cs:"lesnipozar",da:"skovbrand",de:"waldbrand",fi:"maastopalo",fr:"feuforet",id:"kebakaran",nb:"skogbrann",pl:"pozar",sv:"skogsbrand"},wind:{cs:"vitr",da:s,nb:s,sv:s,es:"viento",fi:"tuuli",fr:"vent",id:"angin",it:c,pt:c,pl:"wiatr",tr:"ruzgar"},cloud:{cs:"oblacnost",da:"sky",nb:"sky",de:"bewolkung",es:"nube",fi:"pilvi",fr:"nuages",id:"awan",it:"nuvolosita",nl:"bewolking",pt:"nublado",sv:"moln",tr:"bulut"},pressure:{cs:"tlak",da:"lufttryk",de:"druck",fi:"ilmanpaine",fr:"pression",id:"tekanan",it:"pressione",nb:"trykk",nl:"druk",sv:"tryck"},humidity:{cs:"vlhkost",es:"humedad",id:"kelembapan",nb:"fuktighet",pt:"umidade",tr:"nemlilik"},visibility:{da:"synlighed",nb:a,sv:a,nl:"zicht"},dewpoint:{cs:"rosnybod",da:"dugpunkt",de:"taupunkt",fi:"kastepiste",nb:"duggpunkt",nl:"dauwpunt"},winterstorm:{cs:"zimniboure"},airquality:{fi:"ilmanlaatu",fr:"qualiteair"},snowdepth:{cs:"vyskasnehu",nb:"snodybde",pt:"alturaneve",sv:"snodjup"},snowfall:{cs:"snezeni",da:"snefald",de:"schnee",fi:"lumisade",fr:"chuteneige",id:"curahsalju",it:"nevicata",nb:d,sv:d,nl:"sneeuwval",pt:"quedaneve",tr:"karyagisi"},airqualitystation:{},ski:{es:"esquiar",fi:"laskettelu",it:"sci",pl:"narty",pt:"esqui",sv:"skida",tr:"kayak"},pollen:i.pollen,pollenindex:{},etree:{},earthquake:{},lightning:{},lightningthunderstormradar:{},lightningthunderstormprecip:{},lightningradar:{},lightningprecip:{},thunderstormradar:{},thunderstormprecip:{},lightningonlyradar:{},lightningonlyprecip:{},radarltntstm:{},radarltn:{},radartstm:{},radaronly:{},precipltntstm:{},precipltn:{},preciptstm:{},preciponly:{}};var u=n(68742);var p=n(56692),h=n(26680);const g={};function m(e){e&&!g[e]&&(g[e]=e.split("-")[0]);return g[e]}function f(e,t=p.jG.CurrentMarket){const n="string"==typeof e?e:{1:"forecast",4:"records",3:"monthlyforecast",6:"life",5:"pollen",2:"maps",7:"hourlyforecast"}[e],r=i[n];return r&&(r[t]||r[m(t)])||n}function v(e,t){const n=l[e];return n&&(n[t]||n[m(t)])||e}(e=>{const t=Object.keys(l),n=new Map})(p.jG.CurrentMarket);const y={F:u.a.Fahrenheit,C:u.a.Celsius,f:u.a.Fahrenheit,c:u.a.Celsius};function S(e){if(e){const t=(0,h.Ol)(e,"weadegreetype",["weaDegreeType"]);return t&&y[t]||void 0}}function C(e,t,n){if(t&&e){if(!n||!n.excludeItem){const n=e.getAll("item");for(let e=0;e<n.length;++e)t.append("item",n[e])}if(!n||!n.excludeOcid){const n=(0,h.ku)(e);n&&t.set("ocid",n)}if(!n||!n.cvid){const n=e.get("cvid");n&&t.set("cvid",n)}}return t||void 0}function b(e,t){const n=function(e){return["","F","C"][e||0]||""}(t);return n&&e&&e.set("weadegreetype",n),e}function w(e,t,n){if(!e)return e;try{const i=new URL(e);return i.searchParams.set(t,n),i.href}catch(t){return e}}},68848:function(e,t,n){"use strict";function i(e,t=!1){if(e){if(t&&e.display)return e.display;if(e.content)return e.content}return e}function r(e){return e.language&&e.market&&(e.language+"-"+(e.script?e.script+"-":"")+e.market).toLowerCase()||""}n.d(t,{H:function(){return i},p:function(){return r}})},53909:function(e,t,n){"use strict";n.d(t,{D3:function(){return a},KL:function(){return l},QG:function(){return u},mL:function(){return g},pG:function(){return c},q3:function(){return d},vc:function(){return s},zz:function(){return p}});var i=n(31573),r=n(12697);let o;var a,s;!function(e){e.JPG="jpg",e.PNG="png",e.WEBP="webp"}(a||(a={})),function(e){e[e.None=0]="None",e[e.Letterbox=1]="Letterbox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.FacialCrop=6]="FacialCrop"}(s||(s={}));const c=90,d="www.bing.com/th",l=new RegExp(/bing\.(com|net)\/th/);function u(e,t){return`${(0,i.PQ)()?"//prod-streaming-video.msn.cn/":"//prod-streaming-video-msn-com.akamaized.net/"}${e}.${t||"mp4"}`}function p(e,t){return g(((0,i.PQ)()?"//img-s.msn.cn/tenant/amp/entityid/":"//img-s-msn-com.akamaized.net/tenant/amp/entityid/")+e,t)}const h=Math.ceil(4*Math.random())||4;function g(e,t){if(e&&l.test(e))return function(e,t){try{return m(new URL(e),t).href}catch(n){const i=m(new URL(`https://${e}`),t);return`//${i.host}${i.pathname}${i.search}`}}(e,t);const{focalRegion:n,backgroundColor:i}=t;let{width:s=0,height:c=0,format:d=a.JPG}=t,u="";if(n){const e=v(n.x1,n.x2),t=v(n.y1,n.y2);null!=e&&null!=t&&(u+=`&x=${e}&y=${t}`)}i&&(u+=`&b=${i}`);const p=null==t.mode?6:t.mode;if(6===p&&(u+="&u=t"),t.enableDpiScaling){if(!t.devicePixelRatio)throw new Error("A valid devicePixelRatio value must be provided when DPI scaling is enabled");const e=function(e){if(f()&&o)return o;if(e<1)return null;let t=e;(0,r.Z)(4*t)||(t=Math.ceil(10*t)/10);t>3&&(t=3);f()&&(o=t);return t}(t.devicePixelRatio);e&&(s=Math.round(s*e),c=Math.round(c*e))}return`${e}?w=${s}&h=${c}&q=${t.quality||60}&m=${p}&f=${d}${u}`}function m(e,t){(0,i.PQ)()&&(e.hostname=`ts${h}.cn.mm.bing.net`);const{width:n=0,height:r=0}=t,o=t.quality||c,a=t.crop||0===t.crop?t.crop:1;if(e.searchParams.set("w",`${n}`),e.searchParams.set("h",`${r}`),e.searchParams.set("qlt",`${o}`),e.searchParams.set("c",`${a}`),e.searchParams.set("rs","1"),t.enableDpiScaling){e.searchParams.set("dpr",`${t.devicePixelRatio}`);const n=t.padding||0;e.searchParams.set("p",`${n}`)}return e}function f(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function v(e,t){if(null!=e&&null!=t)return Math.floor((e+t)/2)}},31573:function(e,t,n){"use strict";let i,r;function o(e){i=e}function a(){return i}function s(e){r=e}function c(){return r}n.d(t,{PQ:function(){return a},g8:function(){return c},jW:function(){return s},sV:function(){return o}})},98878:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var i=n(33940),r=n(27003),o=n(33379);class a{constructor(){this.cacheMap=new Map}has(e){return(0,i.mG)(this,void 0,void 0,(function*(){return!!this.cacheMap[e]}))}get(e){return(0,i.mG)(this,void 0,void 0,(function*(){return this.cacheMap[e]}))}set(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){return this.cacheMap[e]=t,!0}))}mSet(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return Object.keys(e).forEach((t=>{this.cacheMap[t]=e[t]})),!0}))}del(e){return(0,i.mG)(this,void 0,void 0,(function*(){delete this.cacheMap[e]}))}itemCount(){return(0,i.mG)(this,void 0,void 0,(function*(){return Object.keys(this.cacheMap).length}))}reset(){return(0,i.mG)(this,void 0,void 0,(function*(){this.cacheMap=new Map}))}}const s="__ServerCacheUpdateMap__";let c,d;const l=(0,o.N)()?null:{emitUpdate:function(){return(0,i.mG)(this,void 0,void 0,(function*(){if(!r.Gq.has(s))return;const e=r.Gq.get(s),t=[];return e.forEach(((e,n)=>{const i=d.mSet(e,n).then((()=>{const e=r.Gq.get(s);e&&e.delete(n)}));t.push(i)})),Promise.all(t)}))},initialize:function(e,t=!1){d=e,c=t},reset:function(){return(0,i.mG)(this,void 0,void 0,(function*(){yield d.reset()}))},set:function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){if(c)return function(e,t,n){const i=r.Gq.get(s,(()=>new Map)),o=i.get(n);i.set(n,Object.assign(Object.assign({},o),{[e]:t}))}(e,t,n);yield d.set(e,t,n)}))},get:function(e){return(0,i.mG)(this,void 0,void 0,(function*(){return yield d.get(e)}))},has:function(e){return(0,i.mG)(this,void 0,void 0,(function*(){return yield d.has(e)}))},del:function(e){return(0,i.mG)(this,void 0,void 0,(function*(){return yield d.del(e)}))},itemCount:function(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield d.itemCount()}))}};n.g.TEST_ENV&&!(0,o.N)()&&l.initialize(new a)},47266:function(e,t,n){"use strict";n.d(t,{fy:function(){return te},eW:function(){return ee}});var i=n(33940),r=n(98304),o=n(79664),a=n(22704),s=n(59902),c=n(65135),d=n(25845),l=n(25568),u=n(82890),p=n(32506),h=n(15443),g=n(99704),m=n(77316),f=n(75192),v=n(24676),y=n(33379),S=n(27003),C=n(19809),b=n(87298),w=n(82037),T=n(26768),k=n(45506),P=n(56692),A=n(17873),I=n(26007),E=n(23547),x=n(32005),M=n(10877),O=n(987),L=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"followCarousel","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),D=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"filteredChannels","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),R=n(44772),F=n(32164),B=n(60813),N=n(68364),U=n(36871);class ${constructor(){this.infoPaneCardCount=0,this.riverCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.infopaneCmsAdCount=0,this.sectionIndex=0,this.mapRegionBasedWpoResponseForSuperFeed=(e,t,n,i,r)=>{if(!e||!e.sections.length)return{rawAdRegionTupleMap:_()};this.rawAdRegionTupleMap=_();const o={rawAdRegionTupleMap:this.rawAdRegionTupleMap},a=e.serviceContext?e.serviceContext.debugId:e.debugId,s=function(e){if(e.sections[0].region)return e;return{nextPageUrl:e.nextPageUrl,sections:[{region:"river",subSections:e.sections}],previews:e.previews,pageContext:e.pageContext}}(e),{nextPageUrl:c,sections:d,pageContext:l,previews:u}=s;return o.nextPageUrl=c,o.pageContext=l,o.previews=u,o.regions=d.map((e=>{const{subSections:o,region:s}=e;return{region:s,sections:o.map((({dataTemplate:e,layoutTemplate:o,cards:c,column:d})=>{if(c){const l={dataTemplate:e,layoutTemplate:o,cards:c.map((e=>this.convertCardForSuperFeed(Object.assign(Object.assign({},e),{placement:void 0}),s,a,void 0,t,n,i,r))),column:d};return this.sectionIndex++,l}})).filter((e=>void 0!==e))}})),o.raw1sAdRegionTupleMap=this._raw1sAdRegionTupleMap,o.debugId=a,o},this.backfill1SAdWithNews=e=>{var t,n,i,o,a,s,c;if(!(null===(t=e.sections)||void 0===t?void 0:t.length))return;const d=null===(o=null===(i=null===(n=e.sections.find((e=>"backup"===e.region)))||void 0===n?void 0:n.subSections)||void 0===i?void 0:i[0])||void 0===o?void 0:o.cards,l=null===(c=null===(s=null===(a=e.sections.find((e=>"river"===e.region)))||void 0===a?void 0:a.subSections)||void 0===s?void 0:s[0])||void 0===c?void 0:c.cards;null==l||l.forEach(((e,t)=>{(e.type===R.PL.NativeAd&&I.c.getQueryParameterByName("mockNo1SNative",window.location.href)||e.type===R.PL.CmsAd&&I.c.getQueryParameterByName("mockNo1SCms",window.location.href))&&(e.data=null),e.type!==R.PL.NativeAd&&e.type!==R.PL.CmsAd||e.data||((0,N.OO)(null,r.paG,`Ad for ${e.type} not found in feed response.`,`cardData: ${JSON.stringify(e)}`),(null==d?void 0:d.length)?l[t]=d.shift():(0,N.OO)(null,r.G78,"Empty backup region"))}))}}get raw1sAdRegionTupleMap(){return this._raw1sAdRegionTupleMap||(this._raw1sAdRegionTupleMap=_()),this._raw1sAdRegionTupleMap}convertCardForSuperFeed(e,t,n,i,o,a=0,s=0,c){let d;if("river"===t?(this.riverCardCount++,d=this.riverCardCount):"rightrail"===t?(this.rightrailCardCount++,d=this.rightrailCardCount):"Rail"===t&&(this.railCardCount++,d=this.railCardCount),Object.values(R.PL).includes(e.type)||(0,N.OO)(null,r.nsS,`${e.type} undefined error, it is not in OneServiceMetadataType`),e.subCards){let t=B.uq.NotDenseCard;if(e.type===R.PL.Dense&&i===R.PL.Infopane?t=B.uq.IsInfopaneDenseCard:e.type===R.PL.Dense&&i!==R.PL.Infopane&&(t=B.uq.IsRiverDenseCard),e.type===R.PL.Infopane||e.type===R.PL.GroupedContent||e.type===R.PL.ColdStartArticleFreCard||e.type===R.PL.RewardsDailySet||e.type===R.PL.TabbedInfopaneCard||t!==B.uq.NotDenseCard)return this.convertComplexCardForSuperFeed(e,t,n,o,s);if("TopStories"===e.subType)return this.convertNestedCard(e);if(e.type===R.PL.NewsAnswerModule)return this.convertNewsGroupsCard(e)}if(B.Qu.includes(e.type))return e;if(R.TU.includes(e.type)){let n=d;return"river"===t&&(e.type===R.PL.NativeAd?this.riverNativeAdRelativeCount++:e.type===R.PL.CmsAd&&(this.riverCmsAdRelativeCount>=a?(e.type=R.PL.NativeAd,this.riverNativeAdRelativeCount++):this.riverCmsAdRelativeCount++),o&&(n=e.type===R.PL.NativeAd?this.riverNativeAdRelativeCount:this.riverCmsAdRelativeCount),c&&0===this.sectionIndex&&e.data&&(window.is1SAdsSSRRendered=!0)),this.convertCardForAds(e,t,n)}try{const{augments:t,type:i,isBreaking:r,locale:o,category:a,images:s,topics:c=[],dataUrl:d,publishedDateTime:l,id:u,url:p,abstract:h="",title:g="",provider:m={},reasons:f,feed:v={},actions:y=[],externalVideoFiles:S=[],reactionStatus:C,commentStatus:b,reactionSummary:w,commentSummary:T,sourceId:k,topComments:P,topQuestions:A,highlights:I,colorSamples:E,isLocalContent:x,badges:M,relatedCards:O,recoDocMetadata:L,recoId:D,ri:F,offer:N,subType:U,videoMetadata:$,isWorkNewsContent:_,wpoMetadata:V,panoCaption:q,aiComments:z}=e,Q=j(s)||{},Z=c.find((e=>e.feedId===v.id&&e.locale===o)),K=i===R.PL.EventInfopaneShoppingAI?W(p,/[/?]/):W(p);let J=H(m.logoUrl);!J&&m.logo&&m.logo.url&&(J=H(m.logo.url));const X=y.map((e=>B.N[e]||e));return M&&M.some((e=>"followedPublisher"===e.type))&&X.push("followedPublisher"),{augments:t,id:u,type:i,metadata:{abstract:h,abstractLength:h.length,titleLength:g.length,category:a||K[4],subCategory:K[5],primaryImage:{height:Q.height,width:Q.width},locale:o,feed:{id:v.id},kicker:[v],actions:X,reactionStatus:C,commentStatus:b,reactionSummary:w,commentSummary:T,topComments:P,topQuestions:A,highlights:I,reasons:f,relatedCards:O,panoCaption:q,topics:c,recoDocMetadata:L,recoId:D,ri:F,debugId:n,videoFiles:S,videoMetadata:$,wpoMetadata:V},cardContent:{id:u,type:G(i),title:g,aiComments:z,uriTitle:K[6],abstract:h,isBreaking:r||0,tags:[Z||{}],provider:{id:m.id,name:m.name,logo:{id:J},profileId:m.profileId,logoUrl:m.logoUrl,subscribable:!1,lightThemeSVGLogo:m.lightThemeSVGLogo,darkThemeSVGLogo:m.darkThemeSVGLogo},category:{product:a,label:void 0},locale:o,images:[{id:H(Q.url),height:Q.height,width:Q.width,caption:Q.title,focalRegion:Q.focalRegion,attribution:Q.attribution,url:Q.url,colorSamples:Q.colorSamples}],panoCaption:q,videoFiles:S,publishedDateTime:l,kicker:g,sourceHref:d,destinationUrl:p,sourceId:k,colorSamples:E,isLocalContent:x,isWorkNewsContent:_,badges:M,topics:c},offer:N,subType:U}}catch(t){return e}}convertCardForAds(e,t,n){return e.type===R.PL.NativeAd?("river"===t?e.data?this.raw1sAdRegionTupleMap.get("river").push(n):this.rawAdRegionTupleMap.get("river").push(n):"rightrail"===t?this.rawAdRegionTupleMap.get("rightrail").push(n):"Rail"===t&&this.rawAdRegionTupleMap.get("Rail").push(n),e.data?{type:R.PL.NativeAd,regionIndex:n,data:e.data,id:e.id}:{type:R.PL.NativeAd,regionIndex:n,placement:{items:[]}}):e.type===R.PL.CmsAd?("river"===t&&(e.data?this.raw1sAdRegionTupleMap.get("resriver").push(n):this.rawAdRegionTupleMap.get("resriver").push(n)),e.data?{type:R.PL.CmsAd,regionIndex:n,data:e.data,id:e.id}:{type:R.PL.CmsAd,regionIndex:n,placement:{items:[]}}):e.type===R.PL.AmplifyAd||e.type===R.PL.BoostAdsBanner||e.type===R.PL.BoostAdsCoachmark||e.type===R.PL.EventSDCardAmplifyAds||e.type===R.PL.BoostAd?{type:e.type,regionIndex:n,data:e.data,id:`${e.type}-${e.section}-${n}`,wpoMetadata:e.wpoMetadata}:void 0}convertComplexCardForSuperFeed(e,t,n,i,r=0){const{id:o,type:a,title:s,wpoMetadata:c}=e;let d,l;try{d=e.subCards.map((e=>{if(t===B.uq.IsInfopaneDenseCard){if(e.type===R.PL.NativeAd)return this.rawAdRegionTupleMap.get("infopane-tab").push(this.infoPaneCardCount),{type:R.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}else if(t===B.uq.IsRiverDenseCard){if(this.denseRiverCardCount++,e.type===R.PL.NativeAd)return this.rawAdRegionTupleMap.get("dense-river").push(this.denseRiverCardCount),{type:R.PL.NativeAd,regionIndex:this.denseRiverCardCount,placement:{items:[]}}}else{if(this.infoPaneCardCount++,e.type===R.PL.NativeAd)return this.rawAdRegionTupleMap.get("infopane").push(this.infoPaneCardCount),{type:R.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}};if(e.type===R.PL.CmsAd){let t="resinfopane";return this.infopaneCmsAdCount>=r&&(e.type=R.PL.NativeAd,t="infopane"),this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}if(e.type===R.PL.BuyDirectAd){const t="infopane";return this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{isBuyDirect:!0,items:[]}}}if(e.type===R.PL.EventInfopaneShoppingAI)try{const t=JSON.parse(e.data),n=(0,U.Z)(t);delete e.data,e=Object.assign(Object.assign({},n),e)}catch(e){return}}if(e.type===R.PL.Dense||e.type===R.PL.TopicFeed||e.type===R.PL.TabbedInfopaneCardTab){let t=B.uq.IsInfopaneDenseCard;return a!==R.PL.Infopane&&a!==R.PL.TabbedInfopaneCard&&(t=B.uq.IsRiverDenseCard),this.convertComplexCardForSuperFeed(e,t,n,i)}return this.convertCardForSuperFeed(e,"none",n,a,i)}))}finally{d=(null==d?void 0:d.filter((e=>!!e)))||[],l={id:o,type:a,subItems:d,metadata:{title:s},wpoMetadata:c},e.type===R.PL.TopicFeed&&(l={id:o,type:a,subItems:d,metadata:{title:s},wpoMetadata:c,feed:e.feed?e.feed:null})}return l}convertNestedCard(e){return e.subCards[0].type=e.type,e.subCards[0].subType=e.subType,e=e.subCards[0]}convertNewsGroupsCard(e){return{id:e.id,type:e.type,subType:e.subType,subCards:e.subCards||[]}}resetCardCountForSuperFeed(){this.infoPaneCardCount=0,this.riverCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0}}function _(){return new Map([["rightrail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]],["dense-river",[]]])}function H(e){if(!e)return"";const t=e.split("/");return j(t)&&t[t.length-1].replace(".img","")}function W(e,t="/"){return e?e.split(t):[]}function j(e,t=0){if(e)return e[t]}function G(e){switch(e){case R.PL.Article:return"ArticlePreview";case R.PL.Video:return"VideoPreview";case R.PL.Slideshow:return"SlideshowPreview";case R.PL.WebContent:return"WebContentPreview";default:return""}}var V=n(51125),q=n(3072),z=n(85663),Q=n(75384),Z=n(95378),K=n(1033);const J="gaming",X=["cbypass","activityId","prerender","timeOut","caller","infopaneCount","edgExpMask","skipRetry","dhp","overlay"];function Y(e,t=[]){var n,i,o;if(!(null==e?void 0:e.serviceContext))return;const a=t.filter((e=>k.Al.CurrentFlightSet.has(e))),s=null!==(o=null===(i=null===(n=e.serviceContext.fdHead)||void 0===n?void 0:n.split(","))||void 0===i?void 0:i.map((e=>e.trim())))&&void 0!==o?o:[],d=a.filter((e=>!s.includes(e)));d.length>0&&c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.YVN),{pb:Object.assign(Object.assign({},r.YVN.pb),{cetoRef:e.cetoRef,msEdgeRef:e.msEdgeRef,message:`Flight ids ${d.join(",")} missing in wpo fdhead.`})}))}function ee(){if(!(0,y.N)()||!window.ntpSSRData||!window.ntpSSRData.wpoFeed)return;const e=window.ntpSSRData.wpoFeed;Y(e,["prg-wpo-bkpncbig","prg-wpo-ntpscssr"]);const{debugId:t,traceIdIndex:n,dddTmpl:i}=e;return(0,V.Dz)(t,!0),c.M0.addOrUpdateIdxId(n,!0),c.M0.addOrUpdateTmplString(i),delete window.ntpSSRData.wpoFeed,e}class te{constructor(e,t){this.shouldRetryInOtherDomain=!1,this.traceInfo=[],this.shouldResetRightRailPromise=!1,this.wpoRightRailPromise=new F.o,this.shouldResetRailPromise=!1,this.wpoRailPromise=new F.o,this.noContentRetryCount=0,this.maxContentRetryCount=5,this.isPartialResponse=e=>!!(e&&e.serviceContext&&e.serviceContext.preRenderDisabled),this.getAuthTrail=()=>{try{return(0,q.pD)()}catch(e){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.evM),{message:"Error throwed when getCompressedRecords doesn't return anything for NTP"}))}},this.mapperHelper=new $,this.config=e,this.initializeRequest(),this.isXFeed=t}fetch(e,t,n,o,a){return(0,i.mG)(this,void 0,void 0,(function*(){let i=this.config.initialRequest;if(this.shouldResetRightRailPromise&&(this.wpoRightRailPromise=new F.o,this.shouldResetRightRailPromise=!1),this.shouldResetRailPromise&&(this.wpoRailPromise=new F.o,this.shouldResetRailPromise=!1),e&&(e.feedId||e.nextPageUrl||(e.feedId=i.feedId),i=Object.assign(Object.assign({},i),e)),!i)return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.eD0),{message:"default WpoService fetch configuration was invalid"})),this.responseStatus=T.F.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]])};const s=yield this.fetchRiverSectionFeedLayoutData(i,t,n);return s&&s.serviceContext&&!k.Al.IsPrerender&&k.Al.CurrentFlightSet.has("1s-ads-ntpriver")&&Y(s,["1s-ads-ntpriver","prg-ad-ridoverride"]),t!==d.V.init||(0,y.N)()||(s?K.SI.setSSRInitialFeedResponse(s):c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.y6M),{pb:Object.assign(Object.assign({},r.y6M.pb),{requestId:i.requestId})}))),this.handleResponseMapForSuperFeed(i,s,o,a)}))}overrideAppErrorSeverity(e){if("hub"===P.jG.AppType&&[r.vas,r.ck_,r.KEP,r.QJe].includes(e))return o.z.Critical}sendAppErrorWithSeverityOverride(e,t){const n=this.overrideAppErrorSeverity(e);n&&(t.severity=n),c.M0.sendAppErrorEvent(t)}handleResponseMapForSuperFeed(e,t,n,i){var o;if(this.isPartialResponse(t))return t&&t.serviceContext&&t.serviceContext.debugId&&c.M0.addOrUpdateCustomProperty("PartialId",t.serviceContext.debugId),{status:this.responseStatus,isStatic:!1,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]]),isPartial:t.isPartial,serviceContext:t.serviceContext,previews:t.previews};const a=new Set(["msft-dense-nine-card"]);(null===(o=null==t?void 0:t.sections)||void 0===o?void 0:o.length)>0&&"river"===t.sections[0].region&&t.sections[0].subSections.forEach(((e,n)=>{var i;a.has(e.layoutTemplate)&&(t.sections[0].subSections[n].cards=[{type:"densetab",isLocalContent:!1,galleryItemCount:0,subCards:e.cards}]),(null===(i=null==e?void 0:e.cards)||void 0===i?void 0:i.length)>0&&e.cards.forEach(((e,i)=>{var r,o;if((null==e?void 0:e.type)===R.PL.Infopane&&(null===(o=null===(r=null==e?void 0:e.subCards)||void 0===r?void 0:r[0])||void 0===o?void 0:o.type)===R.PL.TabbedInfopaneCardTab){const r=function(e){const t=[];let n=[];for(let i=0;i<e.length;i++){const r=e[i];if(r.type==R.PL.TabbedInfopaneCardTab)n.push(r);else if(r.type==R.PL.TopicFeed)n.push(r);else{if(n.length>0){const e={type:R.PL.TabbedInfopaneCard,subCards:n};t.push(e),n=[]}t.push(r)}}return t}(null==e?void 0:e.subCards);t.sections[0].subSections[n].cards[i]=Object.assign(Object.assign({},e),{subCards:r})}}))}));const s=this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(t,this.config.useRelativeAdPlacement,n,i,this.config.auctionRidOverride&&!(0,Q.TR)()),{nextPageUrl:d,regions:l,rawAdRegionTupleMap:u,raw1sAdRegionTupleMap:p,previews:h,pageContext:g,debugId:m}=s;let f;this.responseStatus===T.F.Success?(f=Object.assign(Object.assign({},e),{nextPageUrl:d}),this.noContentRetryCount=0):this.responseStatus===T.F.Failed?(f=Object.assign({},e),this.noContentRetryCount=0):this.responseStatus===T.F.NoContent&&(this.noContentCannotRetry()||(f=Object.assign({},e),this.noContentRetryCount++),c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.a$Z),{pb:Object.assign(Object.assign({},r.a$Z.pb),{isFirstPage:!e.nextPageUrl,url:e.nextPageUrl,requestId:e.requestId,status:this.responseStatus,noContentRetryCount:this.noContentRetryCount})})));return{regions:l,nextPageRequest:f,rawAdRegionTupleMap:u,raw1sAdRegionTupleMap:p,status:this.responseStatus,isStatic:this.isStatic,traceIdIndex:t?t.traceIdIndex:void 0,metadata:t?t.metadata:void 0,userType:t?t.userType:void 0,previews:h,pageContext:g,debugId:m}}fetchRiverSectionFeedLayoutData(e,t,n){var o;return(0,i.mG)(this,void 0,void 0,(function*(){const i=(null===k.Al||void 0===k.Al?void 0:k.Al.IsPrerender)||this.config.disableWorker,s=t===d.V.init||t===d.V.refresh;if((0,y.N)()&&s){const t=ee();if(t)return t&&t&&t.sections&&t.sections.length>0?this.responseStatus=T.F.Success:this.responseStatus=T.F.NoContent,S.Gq.set("__isSSRWpoFeedConsumed__",!0),t;if(!S.Gq.has("__isSSRWpoFeedConsumed__")&&(null===(o=window.ssrLayoutState)||void 0===o?void 0:o.selectedFeedDisplaySetting)){const t=window.ssrLayoutState.selectedFeedDisplaySetting;["off","onscroll","headingsonly"].includes(t)||c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.W1B),{pb:Object.assign(Object.assign({},r.W1B.pb),{requestId:e.requestId})}))}}if(t!==d.V.init||this.isXFeed||i||e.feedName===J&&e.dontUseWorkerForFeed)this.checkWebWorkerUrl=!1;else{this.checkWebWorkerUrl=!1;let t="myfeed";e.feedName===J&&(t="gaming"),"following"===e.feedName&&(t="following");const i=this.config.removeTimeoutWebworker?void 0:1e3;n&&n();const r=yield(0,A.ot)({id:t},i),o=r&&r.payload;if(o){const e=f.sj.MultiColumn;if(f.sj.MultiColumn===e&&r.fetched){this.checkWebWorkerUrl=!0,this.responseStatus=T.F.Success;(0,a.Ou)().isFeedFromWW=1;const e=o.traceId;if(o.traceIdIndex=this.addOrUpdateIdxId(e,s),(0,y.N)()){const e=this.getAuthTrail();(0,v.mY)(o.traceId,o.debugId,e)}return o.tmpl&&c.M0.addOrUpdateTmplString(o.tmpl),h.n.publish(h.j.userIsSignedIn,{isSignedIn:o.isSignedIn,src:"WW-wcp"}),o}}}if(K.SI.enableEarlyMainFeedRequest&&t===d.V.init){const t=(0,y.N)()?1e4:void 0,i=yield K.SI.getEarlyWpoFeedData(t);if(this.responseStatus=null==i?void 0:i.responseStatus,K.SI.enableEarlyMainFeedRequest=!1,this.responseStatus===T.F.Success||!(0,y.N)())return i;if(!e.skipRetry){const t=yield this.fetchFromWpoService(e,s,n);if(t)return t}}else{const t=yield this.fetchFromWpoService(e,s,n);if(t)return t}if(this.shouldRetryInOtherDomain){e.domainOverride=l.hM,e.requestPathOverride=l.hZ;const t=yield this.fetchFromWpoService(e,s,void 0,!0);if(t)return t}return this.getCachedResponse(e)}))}fetchFromWpoService(e,t,n,o=!1){var d,h,f,R,F,B,N,U,$;return(0,i.mG)(this,void 0,void 0,(function*(){const i=null===k.Al||void 0===k.Al?void 0:k.Al.IsPrerender,_=(0,Q.TR)();!(0,y.N)()&&this.config.requestToOrigin&&(e.domainOverride=l.hM,e.requestPathOverride=l.hZ),this.config.enableResetServiceURL&&(e.domainOverride=l.kJ);const H=!t&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,W=_&&t?2e3:H,j=P.jG.ShouldUseFdheadQsp?null===(h=null===(d=P.jG.CurrentRequestTargetScope)||void 0===d?void 0:d.pageExperiments)||void 0===h?void 0:h.join(","):void 0;let G;(0,y.N)()&&(G=!(window&&window.chrome&&window.chrome.embeddedSearch),c.M0.addOrUpdateTmplProperty("privatew",`${G}`));const q=window&&`${window.innerWidth}x${window.innerHeight}`,z=Object.assign(Object.assign({},e),{audienceMode:null===(f=P.jG.CurrentRequestTargetScope)||void 0===f?void 0:f.audienceMode,enableRightRailColumn:e.powerRightRailWithWpo,fdhead:j,isXFeed:this.isXFeed,nextPageUrl:e.useNextPageUrl&&e.nextPageUrl,requestType:g.xd.wpoService,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:W,refreshType:_&&!(0,v.ZE)()?g.Rx.Bgtask:void 0,isDhp:_&&this.isDhp(),isRetry:o,private:G,viewportSize:q}),K=I.c.getQueryParameterByName("ssrFeedTimeOut",window.location.href);!(0,y.N)()&&K&&(z.timeoutMs=parseInt(K));const X=yield m.q.requestInit(z),Y=yield m.q.buildServiceRequestURL(z);C.$D.addTelemetryTracingQueryParam(Y);const ee=decodeURIComponent(Y.href);this.requestQueryParams=new E.h(Y.search),e.serviceUrl=ee;if("1"===I.c.getQueryParameterByName("logwporeq",window.location.href)){const e={};new Headers(null==X?void 0:X.headers).forEach(((t,n)=>e[n]=t)),c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.vif),{pb:Object.assign(Object.assign({},r.vif.pb),{headers:JSON.stringify(e),url:ee,credentials:X.credentials,referrer:X.referrer})}))}const te=(0,a.Ou)();let ne;if(te[u.p.wpoCallStart]=Math.round((0,a.UE)()),Y.search=this.requestQueryParams.toString(),this.checkWebWorkerUrl){const e=(0,A.Fr)("WebWorkerInitFeedUrl");e&&e.payload&&e.payload!==Y.href&&c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.MUC),{message:"Wpo feed fetch url does not match web worker"}))}const ie=e.useNextPageUrl&&e.nextPageUrl,re=!ie;let oe,ae,se,ce;try{let d;d=(0,y.N)()?(null==e?void 0:e.overrideCSRTimeoutInMs)||1e4:(null==e?void 0:e.overrideSSRTimeoutInMs)||800,n&&n(),ce=(()=>{let e=0;const t=re?r.TRT:r.TzH;return setInterval((()=>{e+=1,c.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{pb:Object.assign(Object.assign({},t.pb),{url:ee,isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_}),message:`Request didn't finish in ${5e3*e}ms`}))}),5e3)})();const l=yield(0,b.w)((()=>(0,y.N)()?(0,b.O)(ee,X,d,e.skipRetry):(0,x.Sm)(ee,d,X,void 0,void 0,!0)),"WpoCardProvider.fetch",d,e.skipRetry);let h,g,m,f,C,w,k;if(ce&&(clearInterval(ce),ce=null),l){if("1"===I.c.getQueryParameterByName("logwpores",window.location.href)){const e={};null===(R=l.headers)||void 0===R||R.forEach(((t,n)=>e[n]=t)),c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.v5s),{pb:Object.assign(Object.assign({},r.v5s.pb),{headers:JSON.stringify(e),reqHeaders:JSON.stringify(X.headers),ok:l.ok,status:l.statusText,body:l.body})}))}const{ok:n,status:i,statusText:o,headers:a}=l;if(oe=a&&a.get("ddd-debugid"),ae=a&&a.get("x-ceto-ref"),se=a&&a.get("x-msedge-ref"),S.Gq.set("OneServiceResponseDebugId",oe),"following"===e.feedName){const n=new URLSearchParams(Y.search),o="activityId",a=n.get(o)||"";if(a&&a!=P.jG.ActivityId&&c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.jQb),{message:"ActivityId mismatched",pb:Object.assign(Object.assign({},r.jQb.pb),{clientActivityId:P.jG.ActivityId,serviceSideActivityId:a,debugId:oe})})),(204===i||404===i)&&re&&t&&!e.feedId){const t="skype-desktop-following"===e.ocid?L:D;return 204===i&&(null===(N=null===(B=null===(F=null==t?void 0:t.sections)||void 0===F?void 0:F[0].subSections)||void 0===B?void 0:B[0].cards)||void 0===N?void 0:N[0])&&(t.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),t}}n?e.disableContent||204!==i||(h=re?r.bri:r.e88,f=!1):(h=e.disableContent?r.k28:re?r.vas:r.azB,"outlookchannels"===e.feedName&&500===i&&(h=r.SPE),"following"!==e.feedName||204!==i&&404!==i?f=!0:(h=r.wyy,f=!1),g=i,m=o)}else h=e.disableContent?r.k28:re?r.vas:r.azB,f=!0;if(h){const e=(0,Z.Z)(X,"headers.Authorization"),t=Object.assign(Object.assign({},h),{pb:Object.assign(Object.assign({},h.pb),{url:decodeURIComponent(Y.href),requestHeaders:JSON.stringify(e&&e.headers),status:g,statusText:m,isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_,isRetriedRequest:o,isInitializedAsPrerenderPage:i,debugId:oe})});if(this.sendAppErrorWithSeverityOverride(h,t),f)return void(this.responseStatus=T.F.Failed);if(!(0,y.N)()&&h===r.bri)return void(this.responseStatus=T.F.NoContent)}const A=l.headers&&l.headers.get("X-Statics-Fallback");if(l.headers){if(A){const e=_?r.V_e:r.vCG;c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},r.vCG.pb),{url:decodeURIComponent(Y.href),isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_,isInitializedAsPrerenderPage:i,debugId:oe,isRetriedRequest:o}),message:"Fell back to static content on the feeds call"})),this.isStatic=!0}k=l.headers.get("ddd-tmpl"),c.M0.addOrUpdateTmplString(k);const e=l.headers.get(M.rD.traceId);if(C=this.addOrUpdateIdxId(e,t),(0,V.Dz)(oe,!1),(0,y.N)()){const t=this.getAuthTrail();(0,v.mY)(e,oe,t)}w=l.headers.get(M.rD.userType)}if(!ie){const e=te[u.p.wpoCallStart],t=te[u.p.wpoResponseBack]=Math.round((0,a.UE)());te[u.p.feedRequestFG]=t-e,(0,s.QP)({name:u.p.feedRequestFG,startTime:e,endTime:t})}if(![r.bri,r.e88,r.RSD].includes(h)){const n=(0,y.N)()&&(0,a.UE)();if(ne=yield l.json(),n&&te&&(te.FeedResponseJsonReadTime=Math.round((0,a.UE)()-n)),null==ne?void 0:ne.swCacheEnabled){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Y6E),{pb:Object.assign(Object.assign({},r.Y6E.pb),{url:decodeURIComponent(Y.href),isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_,isInitializedAsPrerenderPage:i,debugId:oe,isRetriedRequest:o,cacheAgeSeconds:ne.cacheAgeSeconds}),message:"Service Worker Cached Data Triggered"}));let e=null,t="";switch(null==ne?void 0:ne.cacheTriggeredReason){case r.RDJ.id:e=r.RDJ,t="Service Worker Triggered due to fetch error: "+ne.cacheTriggeredErrorMessage;break;case r.Nyv.id:e=r.Nyv,t="Service Worker Triggered due to wpo service error";break;case r.Vm4.id:e=r.Vm4,t="Service Worker Triggered due to Status 204 no content";break;case r.npe.id:e=r.npe,t="Service Worker Triggered due to static content loaded";break;case r.Q0t.id:e=r.Q0t,t="Service Worker Triggered due to wpo service returns empty section";break;case r.dAd.id:e=r.dAd,t="Service Worker Triggered due to static fallback returns empty section";break;case r.zo9.id:e=r.zo9,t="Service Worker Triggered due to network timeout"}e&&c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{url:decodeURIComponent(Y.href),isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_,isInitializedAsPrerenderPage:i,debugId:oe,isRetriedRequest:o,cacheAgeSeconds:ne.cacheAgeSeconds}),message:t}))}if(ne.traceIdIndex=C,ne.userType=w,ne.debugId=oe,ne.cetoRef=ae,ne.msEdgeRef=se,ne.dddTmpl=k,"following"===e.feedName&&200===l.status&&re&&t){const t="skype-desktop-following"===e.ocid?L:D;if(!(ne.sections&&ne.sections.some((e=>"river"===e.region)))&&ne.sections&&t&&t.sections&&t.sections.length){const e=ne.sections.filter((e=>"overlay"===e.region));e&&e.length&&ne.sections.push(t.sections[0])}}if(e.feedName===J&&200===l.status&&re&&t&&(0,y.N)()&&(null===(U=ne.serviceContext)||void 0===U?void 0:U.tmpl)&&!(0,O.$o)().getObject(p.d.GamingFeedEngagement))try{const e=Math.floor((new Date).getTime()/1e3),t=ne.serviceContext.tmpl.split(";"),n={};for(let e=0;e<t.length;e++)t[e].includes("gamingFeedEngagementCount30D")&&t[e].split(",").forEach((e=>{const t=e.split(":"),[i,r]=t,o=r?Number.parseInt(r,10):null;"gamingFeedEngagementSum7D"!==i&&"gamingFeedEngagementCount7D"!==i&&"gamingFeedEngagementSum30D"!==i&&"gamingFeedEngagementCount30D"!==i||null===o||(n[i]=o)}));n.lastUpdated=e;const i=5;Object.keys(n).length===i&&(0,O.$o)().setObject(p.d.GamingFeedEngagement,n)}catch(e){}if(!(e.disableContent||this.isPartialResponse(ne)||ne.sections&&ne.sections.length>0)){let t=A?r.hqX:r.Fh_;"following"===e.feedName&&(t=r.wyy),c.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{pb:Object.assign(Object.assign({},t.pb),{url:decodeURIComponent(Y.href),isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_,isInitializedAsPrerenderPage:i,debugId:oe,isRetriedRequest:o}),message:"Empty Section on the feed call"}))}}}catch(t){ce&&(clearInterval(ce),ce=null);const n=["Service Request Timed out","Fetch for https://"],a=["TypeError: Failed to fetch"];let s;const c=(0,w.fK)();if(this.shouldRetryInOtherDomain=re&&!e.domainOverride&&!c&&!(!(0,y.N)()&&this.config.requestToOrigin),n.some((e=>{var n;return null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.includes(e)}))){const e=_?r.LLm:r.KEP;s=re?e:r.VPR,s===r.KEP&&this.shouldRetryInOtherDomain&&!o&&(s=r.YLV)}else s=a.some((e=>{var n;return null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.includes(e)}))?this.shouldRetryInOtherDomain?r.iB1:r.ck_:this.shouldRetryInOtherDomain?r.CDI:r.QJe;const d=(0,Z.Z)(X,"headers.Authorization"),l=Object.assign(Object.assign({},s),{message:"Error while fetching WpoService response",pb:Object.assign(Object.assign({},s.pb),{customMessage:`Error: ${t}`,url:decodeURIComponent(Y.href),requestHeaders:JSON.stringify(d.headers),isFirstPage:re,activityId:P.jG.ActivityId,isPrerender:_,isInitializedAsPrerenderPage:i,domainOverride:null!==($=e.domainOverride)&&void 0!==$?$:"",isRetry:this.shouldRetryInOtherDomain,debugId:oe,isRetriedRequest:o,isRetryBackupDomainFlight:c})});return this.sendAppErrorWithSeverityOverride(s,l),void(this.responseStatus=T.F.Failed)}if(ne&&ne&&ne.sections&&ne.sections.length>0)this.responseStatus=T.F.Success;else if(this.isPartialResponse(ne))this.responseStatus=T.F.Success;else if(this.responseStatus=T.F.NoContent,!(0,y.N)())return;return!this.config.auctionRidOverride||(0,Q.TR)()||(0,y.N)()||this.mapperHelper.backfill1SAdWithNews(ne),ne}))}getCachedResponse(e){var t;return(0,i.mG)(this,void 0,void 0,(function*(){if((e.skipRetry||e.enableCachedResponseFallback)&&(0,y.N)()&&window.caches&&e.serviceUrl&&e.serviceWorkerCachePrefix)try{const n=(yield caches.keys()).find((t=>t.startsWith(e.serviceWorkerCachePrefix)));if(!n)return;const i=yield caches.open(n);if(!i)return;const o=this.normalizeUrl(e.serviceUrl),a=(yield i.keys())||[],s=a.filter((e=>e.url&&this.normalizeUrl(e.url)===o));for(const e of s)try{const n=yield i.match(e.url),o=yield n.json();if(o){const e=Date.parse(null===(t=n.headers)||void 0===t?void 0:t.get("date")),i=isNaN(e)?"":(Date.now()-e)/1e3;return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Smg),{pb:Object.assign(Object.assign({},r.Smg.pb),{cacheAgeSeconds:i})})),o}}catch(e){}c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Rgo),{pb:Object.assign(Object.assign({},r.Rgo.pb),{numCachedRequests:a.length,numMatches:s.length,serviceUrl:e.serviceUrl})}))}catch(t){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Rgo),{message:"An error occurred while retrieving a cached response. "+t.message,pb:Object.assign(Object.assign({},r.Rgo.pb),{isFirstPage:!e.nextPageUrl,url:e.serviceUrl,requestId:e.requestId,stack:t.stack})}))}}))}normalizeUrl(e){try{const t=new URL(e);X.forEach((e=>t.searchParams.delete(e)));return decodeURIComponent(t.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(e){return""}}clearCache(){this.mapperHelper.resetCardCountForSuperFeed()}initializeRequest(){const{initialRequest:e}=this.config;null!==e&&(0,z.isNullOrUndefined)(e.useNextPageUrl)&&(e.useNextPageUrl=!0)}addOrUpdateIdxId(e,t){return c.M0.addOrUpdateIdxId(e,t)}getResponseStatus(){return this.responseStatus}_requestQueryParams(){return this.requestQueryParams}isDhp(){var e;return(null===(e=window.location.search)||void 0===e?void 0:e.indexOf("startpage=1"))>-1}noContentCannotRetry(){return this.noContentRetryCount>=this.maxContentRetryCount}}},26768:function(e,t,n){"use strict";var i,r;n.d(t,{F:function(){return i}}),function(e){e[e.InvalidRequest=0]="InvalidRequest",e[e.Success=1]="Success",e[e.NoContent=2]="NoContent",e[e.Failed=3]="Failed"}(i||(i={})),function(e){e.river="river",e.rightRail="rightrail",e.Rail="Rail"}(r||(r={}))},60813:function(e,t,n){"use strict";n.d(t,{N:function(){return o},Qu:function(){return a},uq:function(){return i}});var i,r=n(44772);!function(e){e[e.IsInfopaneDenseCard=0]="IsInfopaneDenseCard",e[e.IsRiverDenseCard=1]="IsRiverDenseCard",e[e.NotDenseCard=2]="NotDenseCard"}(i||(i={}));const o={liked:"like",unliked:"unlike",saved:"save"},a=[r.PL.AutosCarousel,r.PL.AutosEntityList,r.PL.BeaconProviderUpsell,r.PL.BingDailyQuizCard,r.PL.BingHealthCovid19StatsCard,r.PL.BingHealthFitnessCard,r.PL.BingThisOrThatCard,r.PL.BingVideoCarousel,r.PL.CasualGamesCarousel,r.PL.ChannelCarousel,r.PL.ChannelFilterCard,r.PL.CommunityCard,r.PL.CommuteCard,r.PL.CompanyNewsCard,r.PL.DigestCard,r.PL.EdgeShoppingCard,r.PL.Elections,r.PL.EntertainmentPremierCard,r.PL.EsportsCasualGames,r.PL.EsportsLiveStream,r.PL.EsportsMatch,r.PL.EsportsTournament,r.PL.EventSDCardElectionMIT1,r.PL.EventSDCardElectionMIT2,r.PL.EventSDCardElectionMIT3,r.PL.EventSDCardShopping,r.PL.EventSDCardSportsMIT1,r.PL.EventSDCardSportsMIT2,r.PL.EventSDCardSportsMIT3,r.PL.EventSDCardWorldCup,r.PL.EventSDCardWorldCup2,r.PL.GamingClip,r.PL.GamingClipsCarousel,r.PL.GamingCompete,r.PL.GamingGamerModeUpsellCard,r.PL.GamingHighlight,r.PL.GamingHighlightClipsCarousel,r.PL.GamingHighlightsCarousel,r.PL.GamingInterestGroup,r.PL.GamingLiveStream,r.PL.GamingLiveStreamCarousel,r.PL.GamingMatch,r.PL.GamingRecentlyPlayed,r.PL.GamingRecommendedGames,r.PL.GamingReddit,r.PL.GamingRewards,r.PL.GamingTournament,r.PL.GamingUpcomingGames,r.PL.GamingVideoCarousel,r.PL.GamingVod,r.PL.GroceryCouponSdCard,r.PL.HealthTipCard,r.PL.Horoscope,r.PL.HotListCard,r.PL.IndustryNewsCard,r.PL.Inspiration,r.PL.InterestManagementCard,r.PL.LinkedInCard,r.PL.LocalNewsFeed,r.PL.Lottery,r.PL.MangaCard,r.PL.Marketplace,r.PL.MarketplaceEvent,r.PL.MicrosoftFeedCard,r.PL.MobileRewardsCard,r.PL.MobileShoppingCard,r.PL.MobileShoppingCard2,r.PL.MobileShoppingCard3,r.PL.MobileShoppingCard4,r.PL.MoneyCrypto,r.PL.MoneyInfo,r.PL.MoneyMarketBrief,r.PL.MoneyPreWL,r.PL.MoneyTopicStripe,r.PL.MyBriefRiverCard,r.PL.OnThisDay,r.PL.PrayerTimesCard,r.PL.PrismCarouselCard,r.PL.Qna,r.PL.RealEstateCard,r.PL.Recipes,r.PL.RecommendedCardFeed,r.PL.RecommendedInterests,r.PL.RecommendedSearchCarousel,r.PL.Rewards,r.PL.RewardsDailyCheckinCard,r.PL.RewardsDailySet,r.PL.RichCalendarCard,r.PL.SectionHeader,r.PL.ShoppingCard,r.PL.ShoppingCarousel,r.PL.ShoppingRiver,r.PL.SportsMatch,r.PL.SportsOlympics,r.PL.SportsTopicStripe,r.PL.StockQuote,r.PL.SuperListCard,r.PL.TabbedInfopaneCard,r.PL.TopStories,r.PL.TopicFeed,r.PL.TrafficDelays,r.PL.TrafficInfo,r.PL.Transit,r.PL.TravelDestinationCard,r.PL.TravelDestinationCarouselCard,r.PL.TravelInspirationCard,r.PL.Trending,r.PL.TrendingInTenMinutes,r.PL.TrendingSearchCard,r.PL.TrendingTopics,r.PL.Upsell,r.PL.UserInterestNTPProvider,r.PL.UserInterestProvider,r.PL.UserInterestTopic,r.PL.UserInterestTopicAndProvider,r.PL.VideoShoppingCard,r.PL.VideoShoppingCarouselCard,r.PL.WeatherSummary,r.PL.quizcard]},75970:function(e,t,n){"use strict";function i(e,t){var n;const{audienceMode:i="",locale:r={},pageType:o=""}=t||{},a=null!==(n=r.content)&&void 0!==n?n:r,{language:s,market:c}=a;return`wpo_data_ ${i}_${s}_${c}_${o}_${e}`}n.d(t,{_:function(){return i}})},16822:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var i=n(77331),r=n(75970),o=n(56692),a=n(987);const s=new class{constructor(){this.localStorage=new Map,this.wpoTreatmentTypeMap=new Map,this.isLoaded=new Map}getWpoTreatments(){var e,t;const n=(0,r._)(o.jG.AppType,o.jG.CurrentRequestTargetScope);if(!this.isLoaded.get(n)){this.wpoTreatmentTypeMap.set(n,new Map);const r=this.wpoTreatmentTypeMap.get(n);for(const e in i._h)if(isNaN(Number(e))){const t=i._h[e];null==r||r.set(t,[])}const{treatments:o}=(0,a.$o)().getObject(n)||{};if(this.localStorage.set(n,o||[]),o)for(let n=0;n<o.length;n++){const i=null===(e=o[n])||void 0===e?void 0:e.type;i&&(null===(t=null==r?void 0:r.get(i))||void 0===t||t.push(o[n]))}this.isLoaded.set(n,!0)}return this.localStorage.get(n)}getWpoTreatmentsWithType(e){var t;const n=(0,r._)(o.jG.AppType,o.jG.CurrentRequestTargetScope);return this.isLoaded.get(n)||this.getWpoTreatments(),null===(t=this.wpoTreatmentTypeMap.get(n))||void 0===t?void 0:t.get(e)}}},77331:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return i}}),function(e){e.topSites="topsites",e.layoutPromotion="layoutPromotion",e.topSitesPromotion="topsitesPromotion",e.topsitesCollapse="topsitesCollapse",e.recommendedsitesCollapse="recommendedsitesCollapse",e.bellCoachMark="bellCoachMark",e.backupRegionStatus="backupRegionStatus",e.searchBoxCollapse="searchBoxCollapse",e.followedTopics="followedTopics",e.feedContextualFeedback="feedContextualFeedback",e.animationControl="animationControl",e.pinProngCoachMark="pinProngCoachMark",e.shorelineTrigger="shorelineTrigger",e.topNavPivotsPromotion="pivotNav"}(i||(i={}))},58869:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var i=n(33940),r=n(98304),o=n(65135),a=n(27003),s=n(99590),c=n(99452),d=n(32164);class l{constructor(){this.wpoNotificationPreviewData=new d.o,this.notificationMiniCardDismissed=!1,this.dismissNotificationMiniCard=e=>{this.notificationMiniCardDismissed=!0,null===o.M0||void 0===o.M0||o.M0.addOrUpdateTmplProperty("NotificationMiniCardDismissed",e)}}static getInstance(){return a.Gq.get("__WpoPreview__",(()=>new l))}storeWpoNotificationPreviewData(e){var t,n,i;if(!e)return;if(this.wpoNotificationPreviewData.wasSet())return;const a={};try{for(const n of(null===(t=e.previews)||void 0===t?void 0:t.simplePreviews)||[]){for(const e of n.cards)for(const t of e.elements)switch(t.id){case"Icon":a.icon=t.url;break;case"Title":a.title=t.text;break;case"Tooltip":a.tooltip=t.text;break;case"Summary":a.summary=t.text;break;case"Detail":a.detail=t.text}n.previewType&&(a.previewType=n.previewType),n.url&&(a.url=n.url)}const i=Object.keys(a).length;if(0===i)return;if(i>0&&7!==i){const t="Invalid notification preview data.",i=`Parsed data: ${JSON.stringify(a)}. ReceivedPreviewData: ${JSON.stringify(null===(n=e.previews)||void 0===n?void 0:n.simplePreviews).substring(0,32768)}.`;return void this.logAppError(r.clq,t,i)}this.wpoNotificationPreviewData.set(a),null===o.M0||void 0===o.M0||o.M0.addOrUpdateTmplProperty("previewDataReady","1")}catch(t){const n=`Failed to parse notification preview data.Error:${t}`,o=`ReceivedPreviewData: ${JSON.stringify(null===(i=e.previews)||void 0===i?void 0:i.simplePreviews).substring(0,32768)}`;this.logAppError(r.l0m,n,o)}}subscribe(e){this.wpoNotificationPreviewData.getResultAsync().then(e)}logAppError(e,t,n=""){o.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:n})}))}}(0,i.gn)([c.LO],l.prototype,"notificationMiniCardDismissed",void 0);const u=(0,s.h)(l)},1033:function(e,t,n){"use strict";n.d(t,{C5:function(){return v},SI:function(){return C}});var i=n(98304),r=n(22704),o=n(68364),a=n(77331),s=n(56474),c=n(987),d=n(75192),l=n(11765),u=n(17440),p=n(75970),h=n(65135),g=n(27003),m=n(99590),f=n(32164);const v={Request:"Wpo.Treatments.Request",Response:"Wpo.Treatments.Response",StoreInit:"Wpo.Treatments.StoreInit",Parsed:"Wpo.Treatments.Parsed",Stored:"Wpo.Treatments.Stored"},y="ssr-feed-data";class S{constructor(){this.wpoOptimizationsReady=new Promise((e=>this.wpoOptimizationsResolver=e)),this.wpoFeedDataCache=new s.v("WpoFeedDataCache"),this.enableEarlyMainFeedRequest=!1,this.earlyFeedResponsePromiseV2=new f.o,this.usePromiseForEarlyFeed=!1}static getInstance(){return g.Gq.get("__WpoServiceClient__",(()=>new S))}onWPOFeedReady(e){this.wpoFeedDataCache.subscribe(y,e)}setSSRInitialFeedResponse(e){this.wpoFeedDataCache.set(y,e)}resetFeedDataCache(){this.wpoFeedDataCache.clear()}addWpoOptimizationDataToLocalStorage(e,t,n,o=!1,s=!1,g){var m,f,y,S;const C=(0,p._)(t,n);if(this.optimizationDataReceived)return;if(!e||!e.optimizationItems)return void(g&&"wpo"===g.source&&this.removeWPOUserChoiceFromPSL());if(!e.optimizationItems.length)return this.logAppError(i.lGs,"WPO Optimization data is empty in feed response ",`isFocusedMode:${o}`),(0,c.$o)().removeItem(C),void(g&&"wpo"===g.source&&this.removeWPOUserChoiceFromPSL());const b=(0,r.Ou)();b[v.StoreInit]=Math.round(performance.now());try{const t=this.parseOptimizationItems(e.optimizationItems),n={treatments:t};b[v.Parsed]=Math.round(performance.now()),(0,c.$o)().setObject(C,n),b[v.Stored]=Math.round(performance.now()),this.optimizationDataReceived=!0;const i=t.filter((e=>{var t;return((null==e?void 0:e.type)===a._h.topSites||(null==e?void 0:e.type)===a._h.topsitesCollapse)&&(null===(t=null==e?void 0:e.properties)||void 0===t?void 0:t.topSitesCollapsibleControlConfig)}));if(window.isSSREnabled&&null==g&&(null==i?void 0:i.length)&&(null===(y=null===(f=null===(m=i[0])||void 0===m?void 0:m.properties)||void 0===f?void 0:f.topSitesCollapsibleControlConfig)||void 0===y?void 0:y.collapsibleControlIsDefaultCollapsed)){const e={setting:d.nc.tscollapsed,source:"wpo",timestamp:(new Date).getTime(),value:1};l.L.savePreferenceSetting(d.nc.tscollapsed,e)}if("wpo"===(null==g?void 0:g.source)&&0==(null==i?void 0:i.length)&&this.removeWPOUserChoiceFromPSL(),s){const e=t.filter((e=>{var t;return(null==e?void 0:e.type)===a._h.layoutPromotion&&"PageContentLayout"===(null===(t=null==e?void 0:e.properties)||void 0===t?void 0:t.layoutType)}));if(!(null==e?void 0:e.length)||!(null===(S=e[0])||void 0===S?void 0:S.properties))return void u.U.savePreferenceSetting(d.Xm.layoutPromotion,null);u.U.savePreferenceSetting(d.Xm.layoutPromotion,e[0].properties),h.M0.addOrUpdateTmplProperty("lpdatapsl","1")}}catch(t){const n=`Failed to store wpo response to LS.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}. key: ${C}`;this.logAppError(i.pOl,n,r)}}setShouldUsePromiseForEarlyFeed(e){this.usePromiseForEarlyFeed||(this.usePromiseForEarlyFeed=e)}storeEarlyWpoFeedData(e){this.usePromiseForEarlyFeed?this.earlyFeedResponsePromiseV2.set(e):this.wpoFeedDataCache.set("feed-ready",e)}getEarlyWpoFeedData(e){if(this.usePromiseForEarlyFeed){let t;const n=new Promise((n=>{t=setTimeout((()=>{const t=`Getting early main feed v2 timeout in ${e}ms`;this.logAppError(i.$HJ,t),n(void 0)}),e||1e4)}));return Promise.race([this.earlyFeedResponsePromiseV2.getResultAsync(),n]).finally((()=>clearTimeout(t)))}return new Promise((t=>{let n;const r=e=>{n&&clearTimeout(n),this.wpoFeedDataCache.unsubscribe("feed-ready",r),this.wpoFeedDataCache.delete("feed-ready"),t(e)};e&&(n=setTimeout((()=>{this.wpoFeedDataCache.unsubscribe("feed-ready",r),this.wpoFeedDataCache.delete("feed-ready");const n=`Getting early main feed timeout in ${e}ms`;this.logAppError(i.$HJ,n),t(void 0)}),e)),this.wpoFeedDataCache.subscribe("feed-ready",r)}))}storeWpoOptimizationData(e){if(e)if(this.wpoOptimizations&&this.wpoOptimizations.length>0)this.wpoOptimizationsResolver();else{try{this.wpoOptimizations=this.parseOptimizationItems(e.pageContext&&e.pageContext.optimizationItems)}catch(t){const n=`Failed to store wpo response to Memory.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}.`;this.logAppError(i.yPw,n,r)}this.wpoOptimizationsResolver()}}isShorelineTriggerEnabled(e){var t,n;const i=this.parseOptimizationItems(e.pageContext&&e.pageContext.optimizationItems).filter((e=>(null==e?void 0:e.type)===a._h.shorelineTrigger));return!!(null===(n=null===(t=null==i?void 0:i[0])||void 0===t?void 0:t.properties)||void 0===n?void 0:n.trigger)}getWpoOptimizationData(e){if(e){let t;const n=new Promise((n=>{t=setTimeout((()=>{h.M0.addOrUpdateTmplProperty("wpoPromoTimeout",e.toString()),n()}),e)}));return Promise.race([n,this.wpoOptimizationsReady]).then((()=>(clearTimeout(t),this.wpoOptimizations)))}return this.wpoOptimizationsReady.then((()=>this.wpoOptimizations))}tryToGetWpoOptimizationData(){return this.wpoOptimizations}logAppError(e,t,n=""){h.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:n})}))}parseOptimizationItems(e){if(!e||!e.length)return[];return e.map(((e,t)=>{if(e.type&&e.type.trim().length)if(Object.values(a._h).includes(e.type)||this.logAppError(i.OE6,`Unknown Type in WPO optimization items. Type: ${e.type}, Index: ${t}`),e.data){if(e.type&&e.data){let n;try{if(n=JSON.parse(e.data),!Object.entries(n).length)return void this.logAppError(i.OnJ,`Parsed WPO Optimization item but it is empty. Type: ${e.type}, Index: ${t}`)}catch(n){return void(0,o.OO)(n,i.X1V,`${n}. Type: ${e.type}, Index: ${t}`)}if(n)return{type:e.type,properties:n}}}else this.logAppError(i.uSS,`Unable to find data in WPO optimization item. Type: ${e.type}, Index: ${t}`);else this.logAppError(i._wC,`Type not found in WPO optimization items. Index: ${t}`)})).filter(Boolean)}isOptimizationDataReceived(){return this.optimizationDataReceived}removeWPOUserChoiceFromPSL(){l.L.deleteKeyValueFromPSL(d.nc.tscollapsed)}}const C=(0,m.h)(S)},46065:function(){},9665:function(){},53692:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var i=n(33940),r=n(99452),o=n(98304),a=n(92773);class s{constructor(e,t){this.props=e,this.cb=t}connectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).subscribe(this,e)})),this.handleChange(t)}disconnectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).unsubscribe(this,e)})),t.$fastController.removeStyles(this.styles)}handleChange(e){this.styles=this.cb(e),e.$fastController.addStyles(this.styles)}}(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehavior.Bind")],s.prototype,"connectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehavior.Unbind")],s.prototype,"disconnectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehaviorHandleChange")],s.prototype,"handleChange",null)},41503:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var i=n(33940),r=n(99452),o=n(98304),a=n(92773);class s{constructor(e){this.propertyName=e}connectedCallback(e){r.y$.getNotifier(e.source).subscribe(this,this.propertyName)}disconnectedCallback(e){this.styles&&e.source.$fastController.removeStyles(this.styles)}handleChange(e,t){this.styles&&e.$fastController.removeStyles(this.styles),this.styles=e[t],e.$fastController.addStyles(this.styles)}}(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.Bind")],s.prototype,"connectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.Unbind")],s.prototype,"disconnectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.HandleChange")],s.prototype,"handleChange",null)},96146:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var i=n(99452),r=n(28904);const o={handleChange(e){e.$fastController.isConnected?e.connected&&e.connected():e.disconnected&&e.disconnected()}};function a(e){return class extends e{constructor(...e){super(...e),i.y$.getNotifier(this.$fastController).subscribe(o,"isConnected")}}}a(r.H)}}]);